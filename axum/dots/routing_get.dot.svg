<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.50.0 (20211204.2007)
 -->
<!-- Title: Daemon Pages: 1 -->
<svg width="1007pt" height="536pt"
 viewBox="0.00 0.00 1007.00 536.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 532)">
<title>Daemon</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-532 1003,-532 1003,4 -4,4"/>
<!-- Handler -->
<g id="node1" class="node">
<title>Handler</title>
<path fill="#c5eb97" stroke="#c5eb97" d="M582,-280.5C582,-280.5 987,-280.5 987,-280.5 993,-280.5 999,-286.5 999,-292.5 999,-292.5 999,-515.5 999,-515.5 999,-521.5 993,-527.5 987,-527.5 987,-527.5 582,-527.5 582,-527.5 576,-527.5 570,-521.5 570,-515.5 570,-515.5 570,-292.5 570,-292.5 570,-286.5 576,-280.5 582,-280.5"/>
<text text-anchor="middle" x="784.5" y="-512.3" font-family="Times,serif" font-size="14.00" fill="#374052">trait Handler</text>
<polyline fill="none" stroke="#c5eb97" points="570,-504.5 999,-504.5 "/>
<text text-anchor="start" x="578" y="-489.3" font-family="Times,serif" font-size="14.00" fill="#374052">#[async_trait]</text>
<text text-anchor="start" x="578" y="-474.3" font-family="Times,serif" font-size="14.00" fill="#374052">pub trait Handler&lt;T, B = Body&gt;: Clone + Send + Sized + &#39;static {</text>
<text text-anchor="start" x="578" y="-443.3" font-family="Times,serif" font-size="14.00" fill="#374052">type Sealed: sealed::HiddenTrait;</text>
<text text-anchor="start" x="578" y="-412.3" font-family="Times,serif" font-size="14.00" fill="#374052">async fn call(self, req: Request&lt;B&gt;) &#45;&gt; Response;</text>
<text text-anchor="start" x="578" y="-381.3" font-family="Times,serif" font-size="14.00" fill="#374052">fn layer&lt;L&gt;(self, layer: L) &#45;&gt; Layered&lt;L::Service, T&gt;</text>
<text text-anchor="start" x="578" y="-350.3" font-family="Times,serif" font-size="14.00" fill="#374052">fn into_service(self) &#45;&gt; IntoService&lt;Self, T, B&gt; </text>
<text text-anchor="start" x="578" y="-319.3" font-family="Times,serif" font-size="14.00" fill="#374052">fn into_make_service(self) &#45;&gt; IntoMakeService&lt;IntoService&lt;Self, T, B&gt;&gt; </text>
<text text-anchor="start" x="578" y="-288.3" font-family="Times,serif" font-size="14.00" fill="#374052">fn into_make_service_with_connect_info&lt;C, Target&gt;</text>
</g>
<!-- impl_hanlder -->
<g id="node2" class="node">
<title>impl_hanlder</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M249,-315.5C249,-315.5 522,-315.5 522,-315.5 528,-315.5 534,-321.5 534,-327.5 534,-327.5 534,-364.5 534,-364.5 534,-370.5 528,-376.5 522,-376.5 522,-376.5 249,-376.5 249,-376.5 243,-376.5 237,-370.5 237,-364.5 237,-364.5 237,-327.5 237,-327.5 237,-321.5 243,-315.5 249,-315.5"/>
<text text-anchor="middle" x="385.5" y="-361.3" font-family="Times,serif" font-size="14.00" fill="#434b54">impl_hanlder!</text>
<polyline fill="none" stroke="#eeeeee" points="237,-353.5 534,-353.5 "/>
<text text-anchor="start" x="245" y="-338.3" font-family="Times,serif" font-size="14.00" fill="#434b54">给Fonce(T1,...Tn) &#45;&gt; Fut + Clone + Send + &#39;static </text>
<text text-anchor="start" x="245" y="-323.3" font-family="Times,serif" font-size="14.00" fill="#434b54">实现Handler trait</text>
</g>
<!-- impl_hanlder&#45;&gt;Handler -->
<g id="edge4" class="edge">
<title>impl_hanlder&#45;&gt;Handler</title>
<path fill="none" stroke="#55606a" d="M534.05,-367.56C542.45,-368.78 550.98,-370.03 559.58,-371.29"/>
<polygon fill="#55606a" stroke="#55606a" points="559.3,-374.78 569.7,-372.76 560.31,-367.86 559.3,-374.78"/>
</g>
<!-- all_the_tuples -->
<g id="node3" class="node">
<title>all_the_tuples</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M12,-102.5C12,-102.5 189,-102.5 189,-102.5 195,-102.5 201,-108.5 201,-114.5 201,-114.5 201,-287.5 201,-287.5 201,-293.5 195,-299.5 189,-299.5 189,-299.5 12,-299.5 12,-299.5 6,-299.5 0,-293.5 0,-287.5 0,-287.5 0,-114.5 0,-114.5 0,-108.5 6,-102.5 12,-102.5"/>
<text text-anchor="middle" x="100.5" y="-284.3" font-family="Times,serif" font-size="14.00" fill="#434b54">all_the_tuples!</text>
<polyline fill="none" stroke="#eeeeee" points="0,-276.5 201,-276.5 "/>
<text text-anchor="start" x="8" y="-261.3" font-family="Times,serif" font-size="14.00" fill="#434b54">依次展开，支持1~16个参数</text>
<text text-anchor="start" x="8" y="-230.3" font-family="Times,serif" font-size="14.00" fill="#434b54">macro_rules! all_the_tuples {</text>
<text text-anchor="start" x="8" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#434b54"> ($name:ident) =&gt; {</text>
<text text-anchor="start" x="8" y="-200.3" font-family="Times,serif" font-size="14.00" fill="#434b54"> $name!(T1);</text>
<text text-anchor="start" x="8" y="-185.3" font-family="Times,serif" font-size="14.00" fill="#434b54"> $name!(T1, T2);</text>
<text text-anchor="start" x="8" y="-170.3" font-family="Times,serif" font-size="14.00" fill="#434b54"> ....</text>
<text text-anchor="start" x="8" y="-155.3" font-family="Times,serif" font-size="14.00" fill="#434b54"> $name!(T1, T2, T3, T4, T5, T6, </text>
<text text-anchor="start" x="8" y="-140.3" font-family="Times,serif" font-size="14.00" fill="#434b54"> T7, T8, T9, T10, T11, </text>
<text text-anchor="start" x="8" y="-125.3" font-family="Times,serif" font-size="14.00" fill="#434b54"> T12, T13, T14, T15, T16);</text>
<text text-anchor="start" x="8" y="-110.3" font-family="Times,serif" font-size="14.00" fill="#434b54">}</text>
</g>
<!-- all_the_tuples&#45;&gt;impl_hanlder -->
<g id="edge1" class="edge">
<title>all_the_tuples&#45;&gt;impl_hanlder</title>
<path fill="none" stroke="#55606a" d="M201.28,-252.12C239.11,-271.51 281.32,-293.13 315.68,-310.74"/>
<polygon fill="#55606a" stroke="#55606a" points="314.19,-313.91 324.69,-315.36 317.39,-307.68 314.19,-313.91"/>
</g>
<!-- impl_service -->
<g id="node4" class="node">
<title>impl_service</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M298.5,-162.5C298.5,-162.5 472.5,-162.5 472.5,-162.5 478.5,-162.5 484.5,-168.5 484.5,-174.5 484.5,-174.5 484.5,-227.5 484.5,-227.5 484.5,-233.5 478.5,-239.5 472.5,-239.5 472.5,-239.5 298.5,-239.5 298.5,-239.5 292.5,-239.5 286.5,-233.5 286.5,-227.5 286.5,-227.5 286.5,-174.5 286.5,-174.5 286.5,-168.5 292.5,-162.5 298.5,-162.5"/>
<text text-anchor="middle" x="385.5" y="-224.3" font-family="Times,serif" font-size="14.00" fill="#434b54">impl_service!</text>
<polyline fill="none" stroke="#eeeeee" points="286.5,-216.5 484.5,-216.5 "/>
<text text-anchor="start" x="294.5" y="-201.3" font-family="Times,serif" font-size="14.00" fill="#434b54">为HandleError&lt;S, F, (T1...Tn)&gt; </text>
<text text-anchor="start" x="294.5" y="-186.3" font-family="Times,serif" font-size="14.00" fill="#434b54">实现Service trait</text>
</g>
<!-- all_the_tuples&#45;&gt;impl_service -->
<g id="edge3" class="edge">
<title>all_the_tuples&#45;&gt;impl_service</title>
<path fill="none" stroke="#55606a" d="M201.28,-201C225.47,-201 251.46,-201 276.03,-201"/>
<polygon fill="#55606a" stroke="#55606a" points="276.1,-204.5 286.1,-201 276.1,-197.5 276.1,-204.5"/>
</g>
<!-- impl_from_request -->
<g id="node5" class="node">
<title>impl_from_request</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M249.5,-21C249.5,-21 521.5,-21 521.5,-21 527.5,-21 533.5,-27 533.5,-33 533.5,-33 533.5,-117 533.5,-117 533.5,-123 527.5,-129 521.5,-129 521.5,-129 249.5,-129 249.5,-129 243.5,-129 237.5,-123 237.5,-117 237.5,-117 237.5,-33 237.5,-33 237.5,-27 243.5,-21 249.5,-21"/>
<text text-anchor="middle" x="385.5" y="-113.8" font-family="Times,serif" font-size="14.00" fill="#434b54">impl_from_request!</text>
<polyline fill="none" stroke="#eeeeee" points="237.5,-106 533.5,-106 "/>
<text text-anchor="start" x="245.5" y="-90.8" font-family="Times,serif" font-size="14.00" fill="#434b54">给(T1,...Tn) 实现FromRequest</text>
<text text-anchor="start" x="245.5" y="-59.8" font-family="Times,serif" font-size="14.00" fill="#434b54">依次调用每个T的from_request</text>
<text text-anchor="start" x="245.5" y="-28.8" font-family="Times,serif" font-size="14.00" fill="#434b54">impl&lt;B, $($ty,)*&gt; FromRequest&lt;B&gt; for ($($ty,)*)</text>
</g>
<!-- all_the_tuples&#45;&gt;impl_from_request -->
<g id="edge2" class="edge">
<title>all_the_tuples&#45;&gt;impl_from_request</title>
<path fill="none" stroke="#55606a" d="M201.28,-156.58C218.21,-149.04 236.03,-141.1 253.62,-133.27"/>
<polygon fill="#55606a" stroke="#55606a" points="255.09,-136.45 262.8,-129.18 252.24,-130.05 255.09,-136.45"/>
</g>
<!-- HandleError_Service_call -->
<g id="node7" class="node">
<title>HandleError_Service_call</title>
<path fill="#eeeeee" stroke="#eeeeee" d="M698,-140.5C698,-140.5 871,-140.5 871,-140.5 877,-140.5 883,-146.5 883,-152.5 883,-152.5 883,-249.5 883,-249.5 883,-255.5 877,-261.5 871,-261.5 871,-261.5 698,-261.5 698,-261.5 692,-261.5 686,-255.5 686,-249.5 686,-249.5 686,-152.5 686,-152.5 686,-146.5 692,-140.5 698,-140.5"/>
<text text-anchor="middle" x="784.5" y="-246.3" font-family="Times,serif" font-size="14.00" fill="#434b54">HanldeError.call</text>
<polyline fill="none" stroke="#eeeeee" points="686,-238.5 883,-238.5 "/>
<text text-anchor="start" x="694" y="-223.3" font-family="Times,serif" font-size="14.00" fill="#434b54">为HandlerError </text>
<text text-anchor="start" x="694" y="-208.3" font-family="Times,serif" font-size="14.00" fill="#434b54">T类型为(T1, ... Tn)实现的</text>
<text text-anchor="start" x="694" y="-193.3" font-family="Times,serif" font-size="14.00" fill="#434b54">Service call接口:</text>
<text text-anchor="start" x="694" y="-178.3" font-family="Times,serif" font-size="14.00" fill="#434b54">依次调用每个T的from_request</text>
<text text-anchor="start" x="694" y="-163.3" font-family="Times,serif" font-size="14.00" fill="#434b54">组合成参数后</text>
<text text-anchor="start" x="694" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#434b54">调用FnOnce(...)函数</text>
</g>
<!-- impl_service&#45;&gt;HandleError_Service_call -->
<g id="edge6" class="edge">
<title>impl_service&#45;&gt;HandleError_Service_call</title>
<path fill="none" stroke="#55606a" d="M484.63,-201C542.59,-201 616.03,-201 675.61,-201"/>
<polygon fill="#55606a" stroke="#55606a" points="675.81,-204.5 685.81,-201 675.81,-197.5 675.81,-204.5"/>
</g>
<!-- FromRequst -->
<g id="node6" class="node">
<title>FromRequst</title>
<path fill="#c5eb97" stroke="#c5eb97" d="M642,-0.5C642,-0.5 927,-0.5 927,-0.5 933,-0.5 939,-6.5 939,-12.5 939,-12.5 939,-109.5 939,-109.5 939,-115.5 933,-121.5 927,-121.5 927,-121.5 642,-121.5 642,-121.5 636,-121.5 630,-115.5 630,-109.5 630,-109.5 630,-12.5 630,-12.5 630,-6.5 636,-0.5 642,-0.5"/>
<text text-anchor="middle" x="784.5" y="-106.3" font-family="Times,serif" font-size="14.00" fill="#374052">FromRequst</text>
<polyline fill="none" stroke="#c5eb97" points="630,-98.5 939,-98.5 "/>
<text text-anchor="start" x="638" y="-83.3" font-family="Times,serif" font-size="14.00" fill="#374052">#[async_trait]</text>
<text text-anchor="start" x="638" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#374052">pub trait FromRequest&lt;B&gt;: Sized {</text>
<text text-anchor="start" x="638" y="-53.3" font-family="Times,serif" font-size="14.00" fill="#374052"> type Rejection: IntoResponse;</text>
<text text-anchor="start" x="638" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#374052"> async fn from_request(req: &amp;mut RequestParts&lt;B&gt;)</text>
<text text-anchor="start" x="638" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#374052"> &#45;&gt; Result&lt;Self, Self::Rejection&gt;;</text>
<text text-anchor="start" x="638" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#374052">}</text>
</g>
<!-- impl_from_request&#45;&gt;FromRequst -->
<g id="edge5" class="edge">
<title>impl_from_request&#45;&gt;FromRequst</title>
<path fill="none" stroke="#55606a" d="M533.76,-69.81C561.79,-68.82 591.29,-67.78 619.79,-66.77"/>
<polygon fill="#55606a" stroke="#55606a" points="619.96,-70.27 629.83,-66.42 619.71,-63.27 619.96,-70.27"/>
</g>
</g>
</svg>
