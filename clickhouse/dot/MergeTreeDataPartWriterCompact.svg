<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: MergeTreeDataPartWriterCompact Pages: 1 -->
<svg width="2329pt" height="741pt"
 viewBox="0.00 0.00 2329.00 741.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 737)">
<title>MergeTreeDataPartWriterCompact</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-737 2325,-737 2325,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_MergeTreeDataPartWriterOnDisk</title>
<polygon fill="none" stroke="black" points="931,-387 931,-725 2256.5,-725 2256.5,-387 931,-387"/>
<text text-anchor="middle" x="1593.75" y="-705" font-family="Times,serif" font-size="20.00">MergeTreeDataPartWriterOnDisk</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_MergeTreeDataPartWriterCompact</title>
<polygon fill="none" stroke="black" points="1192,-95 1192,-311 2313,-311 2313,-95 1192,-95"/>
<text text-anchor="middle" x="1752.5" y="-291" font-family="Times,serif" font-size="20.00">MergeTreeDataPartWriterCompact</text>
</g>
<g id="clust13" class="cluster">
<title>cluster_MergeBlockOutPutStream</title>
<polygon fill="none" stroke="black" points="729,-189 729,-379 1123,-379 1123,-189 729,-189"/>
<text text-anchor="middle" x="926" y="-359" font-family="Times,serif" font-size="20.00">MergeBlockOutPutStream</text>
</g>
<g id="clust17" class="cluster">
<title>cluster_MergeTreeDataWriter</title>
<polygon fill="none" stroke="black" points="510.5,-216 510.5,-298 704.5,-298 704.5,-216 510.5,-216"/>
<text text-anchor="middle" x="607.5" y="-278" font-family="Times,serif" font-size="20.00">MergeTreeDataWriter</text>
</g>
<g id="clust19" class="cluster">
<title>cluster_MergeTreeBlockOutPutStream</title>
<polygon fill="none" stroke="black" points="355,-124 355,-208 709,-208 709,-124 355,-124"/>
<text text-anchor="middle" x="532" y="-188" font-family="Times,serif" font-size="20.00">MergeTreeBlockOutPutStream</text>
</g>
<g id="clust21" class="cluster">
<title>cluster_StorageMergeTree</title>
<polygon fill="none" stroke="black" points="297,-8 297,-116 483,-116 483,-8 297,-8"/>
<text text-anchor="middle" x="390" y="-96" font-family="Times,serif" font-size="20.00">StorageMergeTree</text>
</g>
<g id="clust22" class="cluster">
<title>cluster_TcpHandler</title>
<polygon fill="none" stroke="black" points="8,-54 8,-178 277,-178 277,-54 8,-54"/>
<text text-anchor="middle" x="142.5" y="-158" font-family="Times,serif" font-size="20.00">TcpHandler</text>
</g>
<!-- index_file_stream -->
<g id="node1" class="node">
<title>index_file_stream</title>
<polygon fill="#95e1d3" stroke="black" points="1661.5,-618 1661.5,-664 1813.5,-664 1813.5,-618 1661.5,-618"/>
<text text-anchor="middle" x="1737.5" y="-648.8" font-family="Times,serif" font-size="14.00">index_file_stream</text>
<polyline fill="none" stroke="black" points="1661.5,-641 1813.5,-641 "/>
<text text-anchor="middle" x="1737.5" y="-625.8" font-family="Times,serif" font-size="14.00">part_path + &#39;primary.idx&#39;</text>
</g>
<!-- index_stream -->
<g id="node2" class="node">
<title>index_stream</title>
<polygon fill="#95e1d3" stroke="black" points="1446.5,-518 1446.5,-564 1574.5,-564 1574.5,-518 1446.5,-518"/>
<text text-anchor="middle" x="1510.5" y="-548.8" font-family="Times,serif" font-size="14.00">index_stream</text>
<polyline fill="none" stroke="black" points="1446.5,-541 1574.5,-541 "/>
<text text-anchor="middle" x="1510.5" y="-525.8" font-family="Times,serif" font-size="14.00">HashingWriteBuffer</text>
</g>
<!-- index_stream&#45;&gt;index_file_stream -->
<g id="edge1" class="edge">
<title>index_stream&#45;&gt;index_file_stream</title>
<path fill="none" stroke="#666666" d="M1560.51,-564.08C1585.92,-575.93 1617.53,-590.46 1646,-603 1654.25,-606.63 1662.95,-610.38 1671.56,-614.05"/>
<polygon fill="#666666" stroke="#666666" points="1670.28,-617.31 1680.85,-617.99 1673.01,-610.86 1670.28,-617.31"/>
</g>
<!-- skip_indices_streams -->
<g id="node3" class="node">
<title>skip_indices_streams</title>
<polygon fill="#95e1d3" stroke="black" points="2115.5,-541 2115.5,-577 2248.5,-577 2248.5,-541 2115.5,-541"/>
<text text-anchor="middle" x="2182" y="-555.3" font-family="Times,serif" font-size="14.00">skip_indices_streams</text>
</g>
<!-- initSkipIndices -->
<g id="node4" class="node">
<title>initSkipIndices</title>
<polygon fill="none" stroke="black" points="1993,-450 1895,-450 1895,-414 1993,-414 1993,-450"/>
<text text-anchor="middle" x="1944" y="-428.3" font-family="Times,serif" font-size="14.00">initSkipIndices</text>
</g>
<!-- initSkipIndices&#45;&gt;skip_indices_streams -->
<g id="edge2" class="edge">
<title>initSkipIndices&#45;&gt;skip_indices_streams</title>
<path fill="none" stroke="#666666" d="M1978.56,-450.06C2020.47,-472.61 2092.22,-511.22 2138.08,-535.9"/>
<polygon fill="#666666" stroke="#666666" points="2136.71,-539.14 2147.17,-540.8 2140.02,-532.97 2136.71,-539.14"/>
</g>
<!-- index_stream_next -->
<g id="node5" class="node">
<title>index_stream_next</title>
<polygon fill="none" stroke="black" points="1330,-559 1210,-559 1210,-523 1330,-523 1330,-559"/>
<text text-anchor="middle" x="1270" y="-537.3" font-family="Times,serif" font-size="14.00">index_stream_next</text>
</g>
<!-- index_stream_next&#45;&gt;index_stream -->
<g id="edge3" class="edge">
<title>index_stream_next&#45;&gt;index_stream</title>
<path fill="none" stroke="#666666" d="M1330.26,-541C1362.27,-541 1402.07,-541 1436.03,-541"/>
<polygon fill="#666666" stroke="#666666" points="1436.37,-544.5 1446.37,-541 1436.37,-537.5 1436.37,-544.5"/>
</g>
<!-- calculateAndSerializeSkipIndices -->
<g id="node6" class="node">
<title>calculateAndSerializeSkipIndices</title>
<polygon fill="none" stroke="black" points="1610,-499 1411,-499 1411,-463 1610,-463 1610,-499"/>
<text text-anchor="middle" x="1510.5" y="-477.3" font-family="Times,serif" font-size="14.00">calculateAndSerializeSkipIndices</text>
</g>
<!-- calculateAndSerializeSkipIndices&#45;&gt;skip_indices_streams -->
<g id="edge4" class="edge">
<title>calculateAndSerializeSkipIndices&#45;&gt;skip_indices_streams</title>
<path fill="none" stroke="#666666" d="M1595.38,-499.02C1600.61,-501.87 1605.55,-505.18 1610,-509 1639.26,-534.15 1613.55,-567.13 1646,-588 1651.68,-591.65 2018.92,-586.37 2023,-586 2049.91,-583.58 2079.15,-579.11 2105.06,-574.49"/>
<polygon fill="#666666" stroke="#666666" points="2105.98,-577.88 2115.19,-572.65 2104.73,-571 2105.98,-577.88"/>
</g>
<!-- skip_stream_marks -->
<g id="node7" class="node">
<title>skip_stream_marks</title>
<polygon fill="none" stroke="black" points="2005.5,-522 1882.5,-522 1882.5,-486 2005.5,-486 2005.5,-522"/>
<text text-anchor="middle" x="1944" y="-500.3" font-family="Times,serif" font-size="14.00">skip_stream_marks</text>
</g>
<!-- calculateAndSerializeSkipIndices&#45;&gt;skip_stream_marks -->
<g id="edge5" class="edge">
<title>calculateAndSerializeSkipIndices&#45;&gt;skip_stream_marks</title>
<path fill="none" stroke="#666666" d="M1610.24,-491.26C1622.28,-492.3 1634.41,-493.25 1646,-494 1723.26,-499.03 1812,-501.6 1872.21,-502.86"/>
<polygon fill="#666666" stroke="#666666" points="1872.3,-506.37 1882.37,-503.07 1872.44,-499.37 1872.3,-506.37"/>
</g>
<!-- skip_stream_compressed -->
<g id="node8" class="node">
<title>skip_stream_compressed</title>
<polygon fill="none" stroke="black" points="2021,-577 1867,-577 1867,-541 2021,-541 2021,-577"/>
<text text-anchor="middle" x="1944" y="-555.3" font-family="Times,serif" font-size="14.00">skip_stream_compressed</text>
</g>
<!-- calculateAndSerializeSkipIndices&#45;&gt;skip_stream_compressed -->
<g id="edge6" class="edge">
<title>calculateAndSerializeSkipIndices&#45;&gt;skip_stream_compressed</title>
<path fill="none" stroke="#666666" d="M1610.11,-496.9C1687.27,-509.45 1788.12,-526.11 1829,-534 1838.08,-535.75 1847.55,-537.67 1856.97,-539.65"/>
<polygon fill="#666666" stroke="#666666" points="1856.26,-543.08 1866.76,-541.72 1857.71,-536.23 1856.26,-543.08"/>
</g>
<!-- writeIntBinary -->
<g id="node9" class="node">
<title>writeIntBinary</title>
<polygon fill="none" stroke="black" points="1785.5,-485 1689.5,-485 1689.5,-449 1785.5,-449 1785.5,-485"/>
<text text-anchor="middle" x="1737.5" y="-463.3" font-family="Times,serif" font-size="14.00">writeIntBinary</text>
</g>
<!-- calculateAndSerializeSkipIndices&#45;&gt;writeIntBinary -->
<g id="edge7" class="edge">
<title>calculateAndSerializeSkipIndices&#45;&gt;writeIntBinary</title>
<path fill="none" stroke="#666666" d="M1610.19,-474.86C1633.83,-473.39 1658.3,-471.87 1679.33,-470.56"/>
<polygon fill="#666666" stroke="#666666" points="1679.6,-474.05 1689.36,-469.93 1679.17,-467.06 1679.6,-474.05"/>
</g>
<!-- serializeBinary -->
<g id="node10" class="node">
<title>serializeBinary</title>
<polygon fill="none" stroke="black" points="1786.5,-579 1688.5,-579 1688.5,-543 1786.5,-543 1786.5,-579"/>
<text text-anchor="middle" x="1737.5" y="-557.3" font-family="Times,serif" font-size="14.00">serializeBinary</text>
</g>
<!-- calculateAndSerializeSkipIndices&#45;&gt;serializeBinary -->
<g id="edge8" class="edge">
<title>calculateAndSerializeSkipIndices&#45;&gt;serializeBinary</title>
<path fill="none" stroke="#666666" d="M1582.39,-499.02C1591.79,-502.03 1601.21,-505.37 1610,-509 1626.91,-515.99 1629.31,-521.48 1646,-529 1656.46,-533.71 1667.84,-538.21 1678.88,-542.26"/>
<polygon fill="#666666" stroke="#666666" points="1677.88,-545.61 1688.47,-545.7 1680.24,-539.03 1677.88,-545.61"/>
</g>
<!-- skip_stream_marks&#45;&gt;skip_indices_streams -->
<g id="edge20" class="edge">
<title>skip_stream_marks&#45;&gt;skip_indices_streams</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M2005.78,-518.16C2036.22,-525.26 2073.38,-533.92 2105.62,-541.43"/>
<polygon fill="#666666" stroke="#666666" points="2104.93,-544.87 2115.46,-543.73 2106.52,-538.05 2104.93,-544.87"/>
</g>
<!-- skip_stream_compressed&#45;&gt;skip_indices_streams -->
<g id="edge19" class="edge">
<title>skip_stream_compressed&#45;&gt;skip_indices_streams</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M2021.3,-559C2048.16,-559 2078.34,-559 2105.17,-559"/>
<polygon fill="#666666" stroke="#666666" points="2105.28,-562.5 2115.28,-559 2105.28,-555.5 2105.28,-562.5"/>
</g>
<!-- writeIntBinary&#45;&gt;skip_stream_marks -->
<g id="edge17" class="edge">
<title>writeIntBinary&#45;&gt;skip_stream_marks</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1785.67,-475.54C1811.42,-480.19 1843.81,-486.05 1872.49,-491.24"/>
<polygon fill="#666666" stroke="#666666" points="1872,-494.71 1882.47,-493.05 1873.25,-487.82 1872,-494.71"/>
</g>
<!-- serializeBinary&#45;&gt;skip_stream_compressed -->
<g id="edge18" class="edge">
<title>serializeBinary&#45;&gt;skip_stream_compressed</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1786.7,-560.53C1807.58,-560.32 1832.66,-560.08 1856.57,-559.85"/>
<polygon fill="#666666" stroke="#666666" points="1856.76,-563.34 1866.73,-559.75 1856.69,-556.34 1856.76,-563.34"/>
</g>
<!-- calculateAndSerializePrimaryIndex -->
<g id="node11" class="node">
<title>calculateAndSerializePrimaryIndex</title>
<polygon fill="none" stroke="black" points="1375,-485 1165,-485 1165,-449 1375,-449 1375,-485"/>
<text text-anchor="middle" x="1270" y="-463.3" font-family="Times,serif" font-size="14.00">calculateAndSerializePrimaryIndex</text>
</g>
<!-- calculateAndSerializePrimaryIndex&#45;&gt;index_stream -->
<g id="edge9" class="edge">
<title>calculateAndSerializePrimaryIndex&#45;&gt;index_stream</title>
<path fill="none" stroke="#666666" d="M1329.86,-485.07C1344.61,-489.6 1360.38,-494.47 1375,-499 1394.98,-505.19 1416.62,-511.94 1436.58,-518.17"/>
<polygon fill="#666666" stroke="#666666" points="1435.64,-521.54 1446.23,-521.18 1437.73,-514.86 1435.64,-521.54"/>
</g>
<!-- finishSkipIndicesSerialization -->
<g id="node12" class="node">
<title>finishSkipIndicesSerialization</title>
<polygon fill="none" stroke="black" points="1123.5,-631 944.5,-631 944.5,-595 1123.5,-595 1123.5,-631"/>
<text text-anchor="middle" x="1034" y="-609.3" font-family="Times,serif" font-size="14.00">finishSkipIndicesSerialization</text>
</g>
<!-- finishSkipIndicesSerialization&#45;&gt;skip_indices_streams -->
<g id="edge10" class="edge">
<title>finishSkipIndicesSerialization&#45;&gt;skip_indices_streams</title>
<path fill="none" stroke="#666666" d="M1123.84,-619.78C1192.49,-625.22 1289.83,-633.34 1375,-642 1576.24,-662.46 1629.24,-705.8 1829,-674 1939.89,-656.34 2063.32,-609.25 2130.56,-581.1"/>
<polygon fill="#666666" stroke="#666666" points="2132.21,-584.21 2140.06,-577.1 2129.49,-577.76 2132.21,-584.21"/>
</g>
<!-- kip_stream_compressed -->
<g id="node13" class="node">
<title>kip_stream_compressed</title>
<polygon fill="none" stroke="black" points="1344.5,-687 1195.5,-687 1195.5,-651 1344.5,-651 1344.5,-687"/>
<text text-anchor="middle" x="1270" y="-665.3" font-family="Times,serif" font-size="14.00">kip_stream_compressed</text>
</g>
<!-- finishSkipIndicesSerialization&#45;&gt;kip_stream_compressed -->
<g id="edge11" class="edge">
<title>finishSkipIndicesSerialization&#45;&gt;kip_stream_compressed</title>
<path fill="none" stroke="#666666" d="M1110.33,-631.03C1134.28,-636.76 1160.92,-643.13 1185.42,-649"/>
<polygon fill="#666666" stroke="#666666" points="1184.87,-652.47 1195.41,-651.39 1186.5,-645.66 1184.87,-652.47"/>
</g>
<!-- skip_stream_finalize -->
<g id="node14" class="node">
<title>skip_stream_finalize</title>
<polygon fill="none" stroke="black" points="1334.5,-613 1205.5,-613 1205.5,-577 1334.5,-577 1334.5,-613"/>
<text text-anchor="middle" x="1270" y="-591.3" font-family="Times,serif" font-size="14.00">skip_stream_finalize</text>
</g>
<!-- finishSkipIndicesSerialization&#45;&gt;skip_stream_finalize -->
<g id="edge12" class="edge">
<title>finishSkipIndicesSerialization&#45;&gt;skip_stream_finalize</title>
<path fill="none" stroke="#666666" d="M1123.8,-606.17C1147.34,-604.36 1172.51,-602.42 1195.16,-600.68"/>
<polygon fill="#666666" stroke="#666666" points="1195.68,-604.15 1205.38,-599.89 1195.14,-597.17 1195.68,-604.15"/>
</g>
<!-- finishPrimaryIndexSerialization -->
<g id="node15" class="node">
<title>finishPrimaryIndexSerialization</title>
<polygon fill="none" stroke="black" points="1129,-522 939,-522 939,-486 1129,-486 1129,-522"/>
<text text-anchor="middle" x="1034" y="-500.3" font-family="Times,serif" font-size="14.00">finishPrimaryIndexSerialization</text>
</g>
<!-- finishPrimaryIndexSerialization&#45;&gt;index_stream -->
<g id="edge13" class="edge">
<title>finishPrimaryIndexSerialization&#45;&gt;index_stream</title>
<path fill="none" stroke="#666666" d="M1129.11,-502.52C1197.53,-502.47 1292.27,-504.55 1375,-514 1395.04,-516.29 1416.54,-520.02 1436.34,-523.99"/>
<polygon fill="#666666" stroke="#666666" points="1435.72,-527.43 1446.22,-526.01 1437.13,-520.57 1435.72,-527.43"/>
</g>
<!-- finishPrimaryIndexSerialization&#45;&gt;index_stream_next -->
<g id="edge14" class="edge">
<title>finishPrimaryIndexSerialization&#45;&gt;index_stream_next</title>
<path fill="none" stroke="#666666" d="M1129.17,-518.89C1152.84,-522.63 1177.82,-526.58 1200.01,-530.09"/>
<polygon fill="#666666" stroke="#666666" points="1199.57,-533.56 1209.99,-531.67 1200.66,-526.65 1199.57,-533.56"/>
</g>
<!-- computeIndexGranularity -->
<g id="node16" class="node">
<title>computeIndexGranularity</title>
<polygon fill="none" stroke="black" points="1589,-431 1432,-431 1432,-395 1589,-395 1589,-431"/>
<text text-anchor="middle" x="1510.5" y="-409.3" font-family="Times,serif" font-size="14.00">computeIndexGranularity</text>
</g>
<!-- computeIndexGranularityImpl -->
<g id="node17" class="node">
<title>computeIndexGranularityImpl</title>
<polygon fill="none" stroke="black" points="1829,-431 1646,-431 1646,-395 1829,-395 1829,-431"/>
<text text-anchor="middle" x="1737.5" y="-409.3" font-family="Times,serif" font-size="14.00">computeIndexGranularityImpl</text>
</g>
<!-- computeIndexGranularity&#45;&gt;computeIndexGranularityImpl -->
<g id="edge15" class="edge">
<title>computeIndexGranularity&#45;&gt;computeIndexGranularityImpl</title>
<path fill="none" stroke="#666666" d="M1589.25,-413C1604.25,-413 1620.17,-413 1635.78,-413"/>
<polygon fill="#666666" stroke="#666666" points="1635.99,-416.5 1645.99,-413 1635.99,-409.5 1635.99,-416.5"/>
</g>
<!-- initPrimaryIndex -->
<g id="node18" class="node">
<title>initPrimaryIndex</title>
<polygon fill="none" stroke="black" points="1325,-431 1215,-431 1215,-395 1325,-395 1325,-431"/>
<text text-anchor="middle" x="1270" y="-409.3" font-family="Times,serif" font-size="14.00">initPrimaryIndex</text>
</g>
<!-- initPrimaryIndex&#45;&gt;index_stream -->
<g id="edge16" class="edge">
<title>initPrimaryIndex&#45;&gt;index_stream</title>
<path fill="none" stroke="#666666" d="M1325.09,-418.32C1342.44,-422.18 1360.81,-428.78 1375,-440 1401.83,-461.21 1384.92,-485.88 1411,-508 1418.63,-514.48 1427.59,-519.69 1436.93,-523.9"/>
<polygon fill="#666666" stroke="#666666" points="1435.78,-527.21 1446.36,-527.77 1438.44,-520.74 1435.78,-527.21"/>
</g>
<!-- stream -->
<g id="node19" class="node">
<title>stream</title>
<polygon fill="#95e1d3" stroke="black" points="2059,-113 2059,-243 2305,-243 2305,-113 2059,-113"/>
<text text-anchor="middle" x="2182" y="-227.8" font-family="Times,serif" font-size="14.00">MergeTreeDataPartWriterOnDisk::stream</text>
<polyline fill="none" stroke="black" points="2059,-220 2305,-220 "/>
<text text-anchor="start" x="2067" y="-204.8" font-family="Times,serif" font-size="14.00">在构造函数中初始化</text>
<text text-anchor="start" x="2067" y="-189.8" font-family="Times,serif" font-size="14.00"> 对应数据部分，后缀为.bin</text>
<polyline fill="none" stroke="black" points="2059,-182 2305,-182 "/>
<text text-anchor="start" x="2067" y="-166.8" font-family="Times,serif" font-size="14.00">marks</text>
<polyline fill="none" stroke="black" points="2059,-159 2305,-159 "/>
<text text-anchor="start" x="2067" y="-143.8" font-family="Times,serif" font-size="14.00">reset()</text>
<polyline fill="none" stroke="black" points="2059,-136 2305,-136 "/>
<text text-anchor="middle" x="2182" y="-120.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- write -->
<g id="node20" class="node">
<title>write</title>
<polygon fill="none" stroke="black" points="1297,-273 1243,-273 1243,-237 1297,-237 1297,-273"/>
<text text-anchor="middle" x="1270" y="-251.3" font-family="Times,serif" font-size="14.00">write</text>
</g>
<!-- write&#45;&gt;computeIndexGranularity -->
<g id="edge21" class="edge">
<title>write&#45;&gt;computeIndexGranularity</title>
<path fill="none" stroke="#666666" d="M1297.43,-272.51C1340.36,-300.95 1425.29,-357.22 1473.63,-389.24"/>
<polygon fill="#666666" stroke="#666666" points="1471.94,-392.32 1482.21,-394.92 1475.81,-386.48 1471.94,-392.32"/>
</g>
<!-- writeBlock -->
<g id="node21" class="node">
<title>writeBlock</title>
<polygon fill="none" stroke="black" points="1549,-219 1472,-219 1472,-183 1549,-183 1549,-219"/>
<text text-anchor="middle" x="1510.5" y="-197.3" font-family="Times,serif" font-size="14.00">writeBlock</text>
</g>
<!-- write&#45;&gt;writeBlock -->
<g id="edge22" class="edge">
<title>write&#45;&gt;writeBlock</title>
<path fill="none" stroke="#666666" d="M1297.43,-249.01C1337.15,-240.02 1412.8,-222.89 1462.18,-211.71"/>
<polygon fill="#666666" stroke="#666666" points="1463.01,-215.11 1471.99,-209.49 1461.47,-208.29 1463.01,-215.11"/>
</g>
<!-- fillIndexGranularity -->
<g id="node22" class="node">
<title>fillIndexGranularity</title>
<polygon fill="none" stroke="black" points="1573,-273 1448,-273 1448,-237 1573,-237 1573,-273"/>
<text text-anchor="middle" x="1510.5" y="-251.3" font-family="Times,serif" font-size="14.00">fillIndexGranularity</text>
</g>
<!-- write&#45;&gt;fillIndexGranularity -->
<g id="edge23" class="edge">
<title>write&#45;&gt;fillIndexGranularity</title>
<path fill="none" stroke="#666666" d="M1297.43,-255C1330.99,-255 1390.22,-255 1437.56,-255"/>
<polygon fill="#666666" stroke="#666666" points="1437.78,-258.5 1447.78,-255 1437.78,-251.5 1437.78,-258.5"/>
</g>
<!-- writeBlock&#45;&gt;writeIntBinary -->
<g id="edge24" class="edge">
<title>writeBlock&#45;&gt;writeIntBinary</title>
<path fill="none" stroke="#666666" d="M1549.33,-201.88C1570.14,-204.42 1594.77,-211.17 1610,-228 1674.14,-298.85 1582.66,-368.44 1646,-440 1654.75,-449.88 1666.94,-456.22 1679.54,-460.26"/>
<polygon fill="#666666" stroke="#666666" points="1678.65,-463.65 1689.22,-462.93 1680.51,-456.9 1678.65,-463.65"/>
</g>
<!-- writeBlock&#45;&gt;stream -->
<g id="edge25" class="edge">
<title>writeBlock&#45;&gt;stream</title>
<path fill="none" stroke="#666666" d="M1549.18,-206.83C1568.27,-210.88 1591.3,-217.49 1610,-228 1629.18,-238.79 1625.55,-253.87 1646,-262 1801.71,-323.91 1860.43,-299.58 2023,-259 2035.27,-255.94 2047.67,-251.77 2059.84,-246.94"/>
<polygon fill="#666666" stroke="#666666" points="2061.19,-250.17 2069.1,-243.13 2058.52,-243.7 2061.19,-250.17"/>
</g>
<!-- writeColumnSingleGranule -->
<g id="node23" class="node">
<title>writeColumnSingleGranule</title>
<polygon fill="none" stroke="black" points="1821,-253 1654,-253 1654,-217 1821,-217 1821,-253"/>
<text text-anchor="middle" x="1737.5" y="-231.3" font-family="Times,serif" font-size="14.00">writeColumnSingleGranule</text>
</g>
<!-- writeBlock&#45;&gt;writeColumnSingleGranule -->
<g id="edge26" class="edge">
<title>writeBlock&#45;&gt;writeColumnSingleGranule</title>
<path fill="none" stroke="#666666" d="M1549.16,-201.5C1576.6,-204.27 1614.91,-209.6 1649.75,-215.3"/>
<polygon fill="#666666" stroke="#666666" points="1649.51,-218.81 1659.95,-217 1650.66,-211.9 1649.51,-218.81"/>
</g>
<!-- writeColumnSingleGranule&#45;&gt;writeBlock -->
<g id="edge27" class="edge">
<title>writeColumnSingleGranule&#45;&gt;writeBlock</title>
<path fill="none" stroke="#666666" d="M1653.85,-229.05C1622.02,-224.71 1586.75,-219.08 1559.28,-213.86"/>
<polygon fill="#666666" stroke="#666666" points="1559.65,-210.36 1549.16,-211.88 1558.3,-217.23 1559.65,-210.36"/>
</g>
<!-- stream_finalize -->
<g id="node24" class="node">
<title>stream_finalize</title>
<polygon fill="none" stroke="black" points="1994,-250 1894,-250 1894,-214 1994,-214 1994,-250"/>
<text text-anchor="middle" x="1944" y="-228.3" font-family="Times,serif" font-size="14.00">stream_finalize</text>
</g>
<!-- writeColumnSingleGranule&#45;&gt;stream_finalize -->
<g id="edge28" class="edge">
<title>writeColumnSingleGranule&#45;&gt;stream_finalize</title>
<path fill="none" stroke="#666666" d="M1821.09,-233.79C1842.04,-233.48 1864.14,-233.16 1883.68,-232.87"/>
<polygon fill="#666666" stroke="#666666" points="1884,-236.37 1893.95,-232.72 1883.9,-229.37 1884,-236.37"/>
</g>
<!-- stream_addToChecksums -->
<g id="node25" class="node">
<title>stream_addToChecksums</title>
<polygon fill="none" stroke="black" points="2023,-196 1865,-196 1865,-160 2023,-160 2023,-196"/>
<text text-anchor="middle" x="1944" y="-174.3" font-family="Times,serif" font-size="14.00">stream_addToChecksums</text>
</g>
<!-- writeColumnSingleGranule&#45;&gt;stream_addToChecksums -->
<g id="edge29" class="edge">
<title>writeColumnSingleGranule&#45;&gt;stream_addToChecksums</title>
<path fill="none" stroke="#666666" d="M1803.21,-216.96C1824.01,-211.17 1847.22,-204.7 1868.66,-198.72"/>
<polygon fill="#666666" stroke="#666666" points="1869.67,-202.07 1878.37,-196.02 1867.79,-195.33 1869.67,-202.07"/>
</g>
<!-- stream_finalize&#45;&gt;stream -->
<g id="edge35" class="edge">
<title>stream_finalize&#45;&gt;stream</title>
<path fill="none" stroke="#666666" d="M1994.19,-220.75C2010.48,-217.02 2029.47,-212.67 2048.97,-208.21"/>
<polygon fill="#666666" stroke="#666666" points="2049.92,-211.58 2058.89,-205.94 2048.36,-204.76 2049.92,-211.58"/>
</g>
<!-- stream_addToChecksums&#45;&gt;stream -->
<g id="edge36" class="edge">
<title>stream_addToChecksums&#45;&gt;stream</title>
<path fill="none" stroke="#666666" d="M2023.26,-178C2031.45,-178 2039.94,-178 2048.53,-178"/>
<polygon fill="#666666" stroke="#666666" points="2048.65,-181.5 2058.65,-178 2048.65,-174.5 2048.65,-181.5"/>
</g>
<!-- finishDataSerialization -->
<g id="node26" class="node">
<title>finishDataSerialization</title>
<polygon fill="none" stroke="black" points="1340,-172 1200,-172 1200,-136 1340,-136 1340,-172"/>
<text text-anchor="middle" x="1270" y="-150.3" font-family="Times,serif" font-size="14.00">finishDataSerialization</text>
</g>
<!-- finishDataSerialization&#45;&gt;stream -->
<g id="edge30" class="edge">
<title>finishDataSerialization&#45;&gt;stream</title>
<path fill="none" stroke="#666666" d="M1340.28,-142C1362.78,-138.4 1387.91,-134.69 1411,-132 1681.18,-100.48 1755.68,-86.71 2023,-137 2031.5,-138.6 2040.22,-140.4 2048.98,-142.33"/>
<polygon fill="#666666" stroke="#666666" points="2048.36,-145.78 2058.88,-144.56 2049.9,-138.95 2048.36,-145.78"/>
</g>
<!-- finishDataSerialization&#45;&gt;writeBlock -->
<g id="edge31" class="edge">
<title>finishDataSerialization&#45;&gt;writeBlock</title>
<path fill="none" stroke="#666666" d="M1340.3,-167.66C1379.36,-175.35 1427.14,-184.77 1461.95,-191.63"/>
<polygon fill="#666666" stroke="#666666" points="1461.37,-195.08 1471.86,-193.58 1462.73,-188.22 1461.37,-195.08"/>
</g>
<!-- finishDataSerialization&#45;&gt;stream_finalize -->
<g id="edge32" class="edge">
<title>finishDataSerialization&#45;&gt;stream_finalize</title>
<path fill="none" stroke="#666666" d="M1340.31,-156.16C1408.93,-158.75 1516.94,-164.05 1610,-174 1707.94,-184.47 1732.11,-190.29 1829,-208 1846.8,-211.25 1866.07,-215.16 1883.62,-218.87"/>
<polygon fill="#666666" stroke="#666666" points="1883.22,-222.37 1893.73,-221.03 1884.68,-215.52 1883.22,-222.37"/>
</g>
<!-- finishDataSerialization&#45;&gt;stream_addToChecksums -->
<g id="edge33" class="edge">
<title>finishDataSerialization&#45;&gt;stream_addToChecksums</title>
<path fill="none" stroke="#666666" d="M1340.16,-150.39C1408.9,-147.89 1517.2,-146.88 1610,-159 1626.35,-161.14 1629.67,-165.71 1646,-168 1715.67,-177.77 1795.39,-179.97 1854.68,-179.89"/>
<polygon fill="#666666" stroke="#666666" points="1854.77,-183.39 1864.76,-179.85 1854.75,-176.39 1854.77,-183.39"/>
</g>
<!-- stream_reset -->
<g id="node27" class="node">
<title>stream_reset</title>
<polygon fill="none" stroke="black" points="1780.5,-159 1694.5,-159 1694.5,-123 1780.5,-123 1780.5,-159"/>
<text text-anchor="middle" x="1737.5" y="-137.3" font-family="Times,serif" font-size="14.00">stream_reset</text>
</g>
<!-- finishDataSerialization&#45;&gt;stream_reset -->
<g id="edge34" class="edge">
<title>finishDataSerialization&#45;&gt;stream_reset</title>
<path fill="none" stroke="#666666" d="M1340.31,-145.09C1362.82,-142.6 1387.93,-140.23 1411,-139 1499.32,-134.28 1521.56,-138.3 1610,-139 1634.38,-139.19 1661.4,-139.59 1684.19,-139.99"/>
<polygon fill="#666666" stroke="#666666" points="1684.28,-143.49 1694.34,-140.17 1684.4,-136.49 1684.28,-143.49"/>
</g>
<!-- stream_reset&#45;&gt;stream -->
<g id="edge37" class="edge">
<title>stream_reset&#45;&gt;stream</title>
<path fill="none" stroke="#666666" d="M1780.56,-140.72C1836.19,-140.75 1937.21,-142.2 2023,-151 2031.36,-151.86 2039.94,-152.89 2048.58,-154.04"/>
<polygon fill="#666666" stroke="#666666" points="2048.35,-157.54 2058.74,-155.44 2049.31,-150.61 2048.35,-157.54"/>
</g>
<!-- writeImpl -->
<g id="node28" class="node">
<title>writeImpl</title>
<polygon fill="none" stroke="black" points="1069.5,-341 998.5,-341 998.5,-305 1069.5,-305 1069.5,-341"/>
<text text-anchor="middle" x="1034" y="-319.3" font-family="Times,serif" font-size="14.00">writeImpl</text>
</g>
<!-- writeImpl&#45;&gt;calculateAndSerializeSkipIndices -->
<g id="edge38" class="edge">
<title>writeImpl&#45;&gt;calculateAndSerializeSkipIndices</title>
<path fill="none" stroke="#17b978" d="M1069.8,-328.7C1153.9,-342.57 1362.22,-377.57 1375,-386 1399.08,-401.88 1388.73,-421.67 1411,-440 1419.9,-447.33 1430.3,-453.52 1440.95,-458.69"/>
<polygon fill="#17b978" stroke="#17b978" points="1439.78,-462 1450.33,-462.97 1442.68,-455.63 1439.78,-462"/>
</g>
<!-- writeImpl&#45;&gt;calculateAndSerializePrimaryIndex -->
<g id="edge39" class="edge">
<title>writeImpl&#45;&gt;calculateAndSerializePrimaryIndex</title>
<path fill="none" stroke="#17b978" d="M1069.79,-340.33C1088.75,-350.9 1111.79,-365.71 1129,-383 1150.14,-404.24 1140.8,-422.33 1165,-440 1166.9,-441.39 1168.86,-442.7 1170.88,-443.95"/>
<polygon fill="#17b978" stroke="#17b978" points="1169.58,-447.23 1180.03,-449 1172.96,-441.1 1169.58,-447.23"/>
</g>
<!-- writeImpl&#45;&gt;write -->
<g id="edge40" class="edge">
<title>writeImpl&#45;&gt;write</title>
<path fill="none" stroke="#17b978" d="M1069.83,-313.04C1087.55,-307.96 1109.43,-301.68 1129,-296 1164.42,-285.73 1204.84,-273.87 1233.12,-265.56"/>
<polygon fill="#17b978" stroke="#17b978" points="1234.34,-268.85 1242.95,-262.67 1232.37,-262.14 1234.34,-268.85"/>
</g>
<!-- writeSuffixAndFinalizePart -->
<g id="node29" class="node">
<title>writeSuffixAndFinalizePart</title>
<polygon fill="none" stroke="black" points="903,-287 737,-287 737,-251 903,-251 903,-287"/>
<text text-anchor="middle" x="820" y="-265.3" font-family="Times,serif" font-size="14.00">writeSuffixAndFinalizePart</text>
</g>
<!-- writeSuffixAndFinalizePart&#45;&gt;finishSkipIndicesSerialization -->
<g id="edge41" class="edge">
<title>writeSuffixAndFinalizePart&#45;&gt;finishSkipIndicesSerialization</title>
<path fill="none" stroke="#3fc1c9" d="M893.59,-287.1C897.07,-289.69 900.25,-292.64 903,-296 969.6,-377.41 880.01,-439 931,-531 944.55,-555.45 968.64,-575.34 990.01,-589.41"/>
<polygon fill="#3fc1c9" stroke="#3fc1c9" points="988.33,-592.49 998.65,-594.89 992.08,-586.58 988.33,-592.49"/>
</g>
<!-- writeSuffixAndFinalizePart&#45;&gt;finishPrimaryIndexSerialization -->
<g id="edge42" class="edge">
<title>writeSuffixAndFinalizePart&#45;&gt;finishPrimaryIndexSerialization</title>
<path fill="none" stroke="#3fc1c9" d="M891.71,-287.02C895.8,-289.62 899.62,-292.6 903,-296 931.63,-324.82 911.32,-347.47 931,-383 951.22,-419.49 983.33,-455.26 1006.12,-478.33"/>
<polygon fill="#3fc1c9" stroke="#3fc1c9" points="1003.91,-481.07 1013.46,-485.65 1008.85,-476.11 1003.91,-481.07"/>
</g>
<!-- writeSuffixAndFinalizePart&#45;&gt;finishDataSerialization -->
<g id="edge43" class="edge">
<title>writeSuffixAndFinalizePart&#45;&gt;finishDataSerialization</title>
<path fill="none" stroke="#3fc1c9" d="M891.49,-250.9C972.56,-230.1 1105.3,-196.02 1189.84,-174.32"/>
<polygon fill="#3fc1c9" stroke="#3fc1c9" points="1190.84,-177.68 1199.65,-171.8 1189.1,-170.9 1190.84,-177.68"/>
</g>
<!-- writePrefix -->
<g id="node30" class="node">
<title>writePrefix</title>
<polygon fill="none" stroke="black" points="858.5,-341 781.5,-341 781.5,-305 858.5,-305 858.5,-341"/>
<text text-anchor="middle" x="820" y="-319.3" font-family="Times,serif" font-size="14.00">writePrefix</text>
</g>
<!-- writeWithPermutation -->
<g id="node31" class="node">
<title>writeWithPermutation</title>
<polygon fill="none" stroke="black" points="889,-233 751,-233 751,-197 889,-197 889,-233"/>
<text text-anchor="middle" x="820" y="-211.3" font-family="Times,serif" font-size="14.00">writeWithPermutation</text>
</g>
<!-- writeWithPermutation&#45;&gt;writeImpl -->
<g id="edge44" class="edge">
<title>writeWithPermutation&#45;&gt;writeImpl</title>
<path fill="none" stroke="#666666" d="M889.09,-232.58C894.06,-235.29 898.78,-238.41 903,-242 923.59,-259.52 909.9,-279.09 931,-296 947.12,-308.91 968.82,-315.69 988.06,-319.23"/>
<polygon fill="#666666" stroke="#666666" points="987.73,-322.72 998.15,-320.84 988.83,-315.81 987.73,-322.72"/>
</g>
<!-- MergeBlockOutPutStream -->
<g id="node32" class="node">
<title>MergeBlockOutPutStream</title>
<polygon fill="none" stroke="black" points="1115,-287 953,-287 953,-251 1115,-251 1115,-287"/>
<text text-anchor="middle" x="1034" y="-265.3" font-family="Times,serif" font-size="14.00">MergeBlockOutPutStream</text>
</g>
<!-- MergeBlockOutPutStream&#45;&gt;initSkipIndices -->
<g id="edge45" class="edge">
<title>MergeBlockOutPutStream&#45;&gt;initSkipIndices</title>
<path fill="none" stroke="#3f72af" d="M1104.09,-287.07C1112.57,-289.81 1121.05,-292.8 1129,-296 1145.78,-302.76 1147.7,-309.72 1165,-315 1235.97,-336.65 1757.02,-368 1829,-386 1851.88,-391.72 1876.25,-401.07 1896.56,-409.86"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1895.31,-413.13 1905.88,-413.97 1898.14,-406.73 1895.31,-413.13"/>
</g>
<!-- MergeBlockOutPutStream&#45;&gt;initPrimaryIndex -->
<g id="edge46" class="edge">
<title>MergeBlockOutPutStream&#45;&gt;initPrimaryIndex</title>
<path fill="none" stroke="#3f72af" d="M1113.23,-287.14C1118.77,-289.72 1124.09,-292.65 1129,-296 1150.74,-310.82 1145.83,-324.97 1165,-343 1183.92,-360.8 1207.8,-377.21 1227.91,-389.67"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1226.19,-392.72 1236.55,-394.93 1229.83,-386.74 1226.19,-392.72"/>
</g>
<!-- writeTempPart -->
<g id="node33" class="node">
<title>writeTempPart</title>
<polygon fill="none" stroke="black" points="656.5,-260 558.5,-260 558.5,-224 656.5,-224 656.5,-260"/>
<text text-anchor="middle" x="607.5" y="-238.3" font-family="Times,serif" font-size="14.00">writeTempPart</text>
</g>
<!-- writeTempPart&#45;&gt;writeSuffixAndFinalizePart -->
<g id="edge47" class="edge">
<title>writeTempPart&#45;&gt;writeSuffixAndFinalizePart</title>
<path fill="none" stroke="#b83b5e" d="M656.53,-248.16C677.43,-250.84 702.66,-254.08 726.94,-257.19"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="726.54,-260.67 736.91,-258.47 727.43,-253.73 726.54,-260.67"/>
</g>
<!-- writeTempPart&#45;&gt;writePrefix -->
<g id="edge48" class="edge">
<title>writeTempPart&#45;&gt;writePrefix</title>
<path fill="none" stroke="#b83b5e" d="M645.43,-260.05C669.02,-271.2 700.43,-285.36 729,-296 742.66,-301.08 757.74,-305.91 771.59,-310.03"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="770.84,-313.46 781.42,-312.91 772.8,-306.74 770.84,-313.46"/>
</g>
<!-- writeTempPart&#45;&gt;writeWithPermutation -->
<g id="edge49" class="edge">
<title>writeTempPart&#45;&gt;writeWithPermutation</title>
<path fill="none" stroke="#b83b5e" d="M656.53,-235.84C681.39,-232.65 712.36,-228.68 740.58,-225.06"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="741.36,-228.49 750.83,-223.74 740.47,-221.54 741.36,-228.49"/>
</g>
<!-- writeTempPart&#45;&gt;MergeBlockOutPutStream -->
<g id="edge50" class="edge">
<title>writeTempPart&#45;&gt;MergeBlockOutPutStream</title>
<path fill="none" stroke="#b83b5e" d="M656.51,-233.73C674.02,-229.2 693.34,-222.33 709,-212 720.59,-204.36 716.43,-193.89 729,-188 799.03,-155.2 828.65,-166.73 903,-188 941.36,-198.97 979.41,-224.91 1004.34,-244.5"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1002.28,-247.33 1012.27,-250.87 1006.66,-241.88 1002.28,-247.33"/>
</g>
<!-- mt_write -->
<g id="node34" class="node">
<title>mt_write</title>
<polygon fill="none" stroke="black" points="363,-133 363,-169 417,-169 417,-133 363,-133"/>
<text text-anchor="middle" x="390" y="-147.3" font-family="Times,serif" font-size="14.00">write</text>
</g>
<!-- mt_write&#45;&gt;writeTempPart -->
<g id="edge51" class="edge">
<title>mt_write&#45;&gt;writeTempPart</title>
<path fill="none" stroke="#666666" d="M417.44,-166.14C441.26,-179.38 477.5,-198.54 510.5,-212 522.61,-216.94 535.85,-221.56 548.53,-225.62"/>
<polygon fill="#666666" stroke="#666666" points="547.49,-228.96 558.08,-228.61 549.59,-222.28 547.49,-228.96"/>
</g>
<!-- MergeTreeBlockOutPutStream -->
<g id="node35" class="node">
<title>MergeTreeBlockOutPutStream</title>
<polygon fill="none" stroke="black" points="701,-168 514,-168 514,-132 701,-132 701,-168"/>
<text text-anchor="middle" x="607.5" y="-146.3" font-family="Times,serif" font-size="14.00">MergeTreeBlockOutPutStream</text>
</g>
<!-- st_write -->
<g id="node36" class="node">
<title>st_write</title>
<polygon fill="none" stroke="black" points="305,-16.5 305,-77.5 475,-77.5 475,-16.5 305,-16.5"/>
<text text-anchor="middle" x="390" y="-62.3" font-family="Times,serif" font-size="14.00">write</text>
<polyline fill="none" stroke="black" points="305,-54.5 475,-54.5 "/>
<text text-anchor="start" x="313" y="-39.3" font-family="Times,serif" font-size="14.00">获取BlockOutputStreamPtr</text>
<text text-anchor="start" x="313" y="-24.3" font-family="Times,serif" font-size="14.00"> 用于后续写入数据</text>
</g>
<!-- st_write&#45;&gt;MergeTreeBlockOutPutStream -->
<g id="edge52" class="edge">
<title>st_write&#45;&gt;MergeTreeBlockOutPutStream</title>
<path fill="none" stroke="#666666" d="M455.07,-77.62C488.58,-93.64 528.87,-112.9 559.46,-127.52"/>
<polygon fill="#666666" stroke="#666666" points="558.1,-130.74 568.63,-131.9 561.12,-124.43 558.1,-130.74"/>
</g>
<!-- receiveData -->
<g id="node37" class="node">
<title>receiveData</title>
<polygon fill="none" stroke="black" points="16,-62.5 16,-139.5 269,-139.5 269,-62.5 16,-62.5"/>
<text text-anchor="middle" x="142.5" y="-124.3" font-family="Times,serif" font-size="14.00">receiveData</text>
<polyline fill="none" stroke="black" points="16,-116.5 269,-116.5 "/>
<text text-anchor="start" x="24" y="-101.3" font-family="Times,serif" font-size="14.00">收到数据，调用storage&#45;&gt;write接口获取</text>
<text text-anchor="start" x="24" y="-86.3" font-family="Times,serif" font-size="14.00"> writer，写入block数据</text>
</g>
<!-- receiveData&#45;&gt;mt_write -->
<g id="edge53" class="edge">
<title>receiveData&#45;&gt;mt_write</title>
<path fill="none" stroke="#666666" d="M269.13,-126.59C299.68,-132.81 329.99,-138.98 352.49,-143.57"/>
<polygon fill="#666666" stroke="#666666" points="352.07,-147.05 362.57,-145.62 353.47,-140.19 352.07,-147.05"/>
</g>
<!-- receiveData&#45;&gt;st_write -->
<g id="edge54" class="edge">
<title>receiveData&#45;&gt;st_write</title>
<path fill="none" stroke="#666666" d="M269.13,-73.37C277.86,-71.45 286.57,-69.53 295.09,-67.66"/>
<polygon fill="#666666" stroke="#666666" points="295.98,-71.05 304.99,-65.48 294.47,-64.21 295.98,-71.05"/>
</g>
</g>
</svg>
