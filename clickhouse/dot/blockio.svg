<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: BlockIO Pages: 1 -->
<svg width="983pt" height="797pt"
 viewBox="0.00 0.00 983.00 796.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 792.5)">
<title>BlockIO</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-792.5 979,-792.5 979,4 -4,4"/>
<text text-anchor="start" x="462.5" y="-774.3" font-family="Times,serif" font-weight="bold" font-size="14.00">BlockIO</text>
<!-- BlockIO -->
<g id="node1" class="node">
<title>BlockIO</title>
<polygon fill="none" stroke="black" points="0,-525 0,-617 166,-617 166,-525 0,-525"/>
<text text-anchor="middle" x="83" y="-601.8" font-family="Times,serif" font-size="14.00">BlockIO</text>
<polyline fill="none" stroke="black" points="0,-594 166,-594 "/>
<text text-anchor="start" x="8" y="-578.8" font-family="Times,serif" font-size="14.00">BlockOutputStreamPtr out;</text>
<polyline fill="none" stroke="black" points="0,-571 166,-571 "/>
<text text-anchor="start" x="8" y="-555.8" font-family="Times,serif" font-size="14.00">BlockInputStreamPtr in;</text>
<polyline fill="none" stroke="black" points="0,-548 166,-548 "/>
<text text-anchor="start" x="8" y="-532.8" font-family="Times,serif" font-size="14.00">QueryPipeline pipeline;</text>
</g>
<!-- BlockInputStreamPtr -->
<g id="node2" class="node">
<title>BlockInputStreamPtr</title>
<polygon fill="none" stroke="black" points="338.5,-464 206.5,-464 206.5,-428 338.5,-428 338.5,-464"/>
<text text-anchor="middle" x="272.5" y="-442.3" font-family="Times,serif" font-size="14.00">BlockInputStreamPtr</text>
</g>
<!-- BlockIO&#45;&gt;BlockInputStreamPtr -->
<g id="edge1" class="edge">
<title>BlockIO:in&#45;&gt;BlockInputStreamPtr</title>
<path fill="none" stroke="#666666" d="M166,-559C189.53,-559 230.32,-505.99 253.68,-472.59"/>
<polygon fill="#666666" stroke="#666666" points="256.71,-474.37 259.51,-464.16 250.95,-470.4 256.71,-474.37"/>
</g>
<!-- BlockOutputStreamPtr -->
<g id="node4" class="node">
<title>BlockOutputStreamPtr</title>
<polygon fill="none" stroke="black" points="343,-678 202,-678 202,-642 343,-642 343,-678"/>
<text text-anchor="middle" x="272.5" y="-656.3" font-family="Times,serif" font-size="14.00">BlockOutputStreamPtr</text>
</g>
<!-- BlockIO&#45;&gt;BlockOutputStreamPtr -->
<g id="edge3" class="edge">
<title>BlockIO:out&#45;&gt;BlockOutputStreamPtr</title>
<path fill="none" stroke="#666666" d="M166,-583C183.9,-583 219.86,-612.3 244.79,-634.75"/>
<polygon fill="#666666" stroke="#666666" points="242.71,-637.59 252.46,-641.75 247.43,-632.42 242.71,-637.59"/>
</g>
<!-- QueryPipeline -->
<g id="node6" class="node">
<title>QueryPipeline</title>
<polygon fill="none" stroke="black" points="320,-589 225,-589 225,-553 320,-553 320,-589"/>
<text text-anchor="middle" x="272.5" y="-567.3" font-family="Times,serif" font-size="14.00">QueryPipeline</text>
</g>
<!-- BlockIO&#45;&gt;QueryPipeline -->
<g id="edge5" class="edge">
<title>BlockIO:pipeline&#45;&gt;QueryPipeline</title>
<path fill="none" stroke="#666666" d="M166.23,-571C182.57,-571 199.37,-571 214.61,-571"/>
<polygon fill="#666666" stroke="#666666" points="214.89,-574.5 224.89,-571 214.89,-567.5 214.89,-574.5"/>
</g>
<!-- IBlockInputStream -->
<g id="node3" class="node">
<title>IBlockInputStream</title>
<polygon fill="none" stroke="black" points="379,-0.5 379,-607.5 775,-607.5 775,-0.5 379,-0.5"/>
<text text-anchor="middle" x="577" y="-592.3" font-family="Times,serif" font-size="14.00">IBlockInputStream</text>
<polyline fill="none" stroke="black" points="379,-584.5 775,-584.5 "/>
<polyline fill="none" stroke="black" points="379,-560.5 775,-560.5 "/>
<text text-anchor="start" x="387" y="-545.3" font-family="Times,serif" font-size="14.00">interface</text>
<polyline fill="none" stroke="black" points="379,-537.5 775,-537.5 "/>
<text text-anchor="start" x="387" y="-522.3" font-family="Times,serif" font-size="14.00">virtual String getName() const = 0;</text>
<polyline fill="none" stroke="black" points="379,-514.5 775,-514.5 "/>
<text text-anchor="start" x="387" y="-499.3" font-family="Times,serif" font-size="14.00">virtual Block getHeader() const = 0;</text>
<polyline fill="none" stroke="black" points="379,-491.5 775,-491.5 "/>
<text text-anchor="start" x="387" y="-476.3" font-family="Times,serif" font-size="14.00">virtual bool isSortedOutput() const</text>
<text text-anchor="start" x="387" y="-461.3" font-family="Times,serif" font-size="14.00"> virtual void readPrefix();</text>
<polyline fill="none" stroke="black" points="379,-453.5 775,-453.5 "/>
<text text-anchor="start" x="387" y="-438.3" font-family="Times,serif" font-size="14.00">Block read();</text>
<polyline fill="none" stroke="black" points="379,-430.5 775,-430.5 "/>
<text text-anchor="start" x="387" y="-415.3" font-family="Times,serif" font-size="14.00">virtual void readSuffix();</text>
<polyline fill="none" stroke="black" points="379,-407.5 775,-407.5 "/>
<text text-anchor="start" x="387" y="-392.3" font-family="Times,serif" font-size="14.00">virtual Block getTotals();</text>
<polyline fill="none" stroke="black" points="379,-384.5 775,-384.5 "/>
<text text-anchor="start" x="387" y="-369.3" font-family="Times,serif" font-size="14.00">virtual Block getExtremes();</text>
<polyline fill="none" stroke="black" points="379,-361.5 775,-361.5 "/>
<text text-anchor="start" x="387" y="-346.3" font-family="Times,serif" font-size="14.00">virtual void setProgressCallback(const ProgressCallback &amp; callback);</text>
<text text-anchor="start" x="387" y="-331.3" font-family="Times,serif" font-size="14.00"> virtual void cancel(bool kill);</text>
<polyline fill="none" stroke="black" points="379,-323.5 775,-323.5 "/>
<text text-anchor="start" x="387" y="-308.3" font-family="Times,serif" font-size="14.00">virtual void setLimits(const LocalLimits &amp; limits_);</text>
<polyline fill="none" stroke="black" points="379,-300.5 775,-300.5 "/>
<polyline fill="none" stroke="black" points="379,-300.5 775,-300.5 "/>
<polyline fill="none" stroke="black" points="379,-276.5 775,-276.5 "/>
<text text-anchor="start" x="387" y="-261.3" font-family="Times,serif" font-size="14.00">data members</text>
<polyline fill="none" stroke="black" points="379,-253.5 775,-253.5 "/>
<text text-anchor="start" x="387" y="-238.3" font-family="Times,serif" font-size="14.00">std::vector&lt;TableLockHolder&gt; table_locks;</text>
<polyline fill="none" stroke="black" points="379,-230.5 775,-230.5 "/>
<text text-anchor="start" x="387" y="-215.3" font-family="Times,serif" font-size="14.00">BlockInputStreams children;</text>
<polyline fill="none" stroke="black" points="379,-207.5 775,-207.5 "/>
<text text-anchor="start" x="387" y="-192.3" font-family="Times,serif" font-size="14.00">std::shared_mutex children_mutex;</text>
<polyline fill="none" stroke="black" points="379,-184.5 775,-184.5 "/>
<text text-anchor="start" x="387" y="-169.3" font-family="Times,serif" font-size="14.00">BlockStreamProfileInfo info;</text>
<polyline fill="none" stroke="black" points="379,-161.5 775,-161.5 "/>
<text text-anchor="start" x="387" y="-146.3" font-family="Times,serif" font-size="14.00">std::atomic&lt;bool&gt; is_cancelled;</text>
<polyline fill="none" stroke="black" points="379,-138.5 775,-138.5 "/>
<text text-anchor="start" x="387" y="-123.3" font-family="Times,serif" font-size="14.00">std::atomic&lt;bool&gt; is_killed;</text>
<polyline fill="none" stroke="black" points="379,-115.5 775,-115.5 "/>
<text text-anchor="start" x="387" y="-100.3" font-family="Times,serif" font-size="14.00">ProgressCallback progress_callback;</text>
<polyline fill="none" stroke="black" points="379,-92.5 775,-92.5 "/>
<text text-anchor="start" x="387" y="-77.3" font-family="Times,serif" font-size="14.00">QueryStatus * process_list_elem = nullptr;</text>
<polyline fill="none" stroke="black" points="379,-69.5 775,-69.5 "/>
<text text-anchor="start" x="387" y="-54.3" font-family="Times,serif" font-size="14.00">UInt64 last_profile_events_update_time = 0;</text>
<polyline fill="none" stroke="black" points="379,-46.5 775,-46.5 "/>
<text text-anchor="start" x="387" y="-31.3" font-family="Times,serif" font-size="14.00">Block totals;</text>
<polyline fill="none" stroke="black" points="379,-23.5 775,-23.5 "/>
<text text-anchor="middle" x="577" y="-8.3" font-family="Times,serif" font-size="14.00">Block extremes;</text>
</g>
<!-- BlockInputStreamPtr&#45;&gt;IBlockInputStream -->
<g id="edge2" class="edge">
<title>BlockInputStreamPtr&#45;&gt;IBlockInputStream</title>
<path fill="none" stroke="#666666" d="M312.12,-427.87C328.08,-420.38 347.89,-411.08 369.45,-400.96"/>
<polygon fill="#666666" stroke="#666666" points="371.22,-403.99 378.79,-396.58 368.25,-397.66 371.22,-403.99"/>
</g>
<!-- BlockStreamProfileInfo -->
<g id="node7" class="node">
<title>BlockStreamProfileInfo</title>
<polygon fill="none" stroke="black" points="817,-115.5 817,-230.5 969,-230.5 969,-115.5 817,-115.5"/>
<text text-anchor="middle" x="893" y="-215.3" font-family="Times,serif" font-size="14.00">BlockStreamProfileInfo</text>
<polyline fill="none" stroke="black" points="817,-207.5 969,-207.5 "/>
<text text-anchor="start" x="825" y="-192.3" font-family="Times,serif" font-size="14.00">Information for profiling</text>
<polyline fill="none" stroke="black" points="817,-184.5 969,-184.5 "/>
<text text-anchor="start" x="825" y="-169.3" font-family="Times,serif" font-size="14.00">size_t rows = 0;</text>
<polyline fill="none" stroke="black" points="817,-161.5 969,-161.5 "/>
<text text-anchor="start" x="825" y="-146.3" font-family="Times,serif" font-size="14.00">size_t blocks = 0;</text>
<polyline fill="none" stroke="black" points="817,-138.5 969,-138.5 "/>
<text text-anchor="start" x="825" y="-123.3" font-family="Times,serif" font-size="14.00">size_t bytes = 0;</text>
</g>
<!-- IBlockInputStream&#45;&gt;BlockStreamProfileInfo -->
<g id="edge6" class="edge">
<title>IBlockInputStream:info&#45;&gt;BlockStreamProfileInfo</title>
<path fill="none" stroke="#666666" d="M775,-173C785.24,-173 795.98,-173 806.63,-173"/>
<polygon fill="#666666" stroke="#666666" points="806.79,-176.5 816.79,-173 806.79,-169.5 806.79,-176.5"/>
</g>
<!-- RWLockImpl_LockHolder -->
<g id="node8" class="node">
<title>RWLockImpl_LockHolder</title>
<polygon fill="none" stroke="black" points="975,-499 811,-499 811,-463 975,-463 975,-499"/>
<text text-anchor="middle" x="893" y="-477.3" font-family="Times,serif" font-size="14.00">RWLockImpl_LockHolder</text>
</g>
<!-- IBlockInputStream&#45;&gt;RWLockImpl_LockHolder -->
<g id="edge7" class="edge">
<title>IBlockInputStream:table_locks&#45;&gt;RWLockImpl_LockHolder</title>
<path fill="none" stroke="#666666" d="M775,-242C867.8,-242 887,-389.16 890.97,-452.53"/>
<polygon fill="#666666" stroke="#666666" points="887.48,-452.85 891.52,-462.64 894.47,-452.47 887.48,-452.85"/>
</g>
<!-- IBlockOutputStream -->
<g id="node5" class="node">
<title>IBlockOutputStream</title>
<polygon fill="none" stroke="black" points="447,-627 447,-765 707,-765 707,-627 447,-627"/>
<text text-anchor="middle" x="577" y="-749.8" font-family="Times,serif" font-size="14.00">IBlockOutputStream</text>
<polyline fill="none" stroke="black" points="447,-742 707,-742 "/>
<text text-anchor="start" x="455" y="-726.8" font-family="Times,serif" font-size="14.00">virtual Block getHeader() const = 0;</text>
<polyline fill="none" stroke="black" points="447,-719 707,-719 "/>
<text text-anchor="start" x="455" y="-703.8" font-family="Times,serif" font-size="14.00">virtual void write(const Block &amp; block) = 0;</text>
<polyline fill="none" stroke="black" points="447,-696 707,-696 "/>
<text text-anchor="start" x="455" y="-680.8" font-family="Times,serif" font-size="14.00">virtual void writePrefix()</text>
<polyline fill="none" stroke="black" points="447,-673 707,-673 "/>
<text text-anchor="start" x="455" y="-657.8" font-family="Times,serif" font-size="14.00">virtual void writeSuffix()</text>
<polyline fill="none" stroke="black" points="447,-650 707,-650 "/>
<polyline fill="none" stroke="black" points="447,-650 707,-650 "/>
<text text-anchor="middle" x="577" y="-634.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- BlockOutputStreamPtr&#45;&gt;IBlockOutputStream -->
<g id="edge4" class="edge">
<title>BlockOutputStreamPtr&#45;&gt;IBlockOutputStream</title>
<path fill="none" stroke="#666666" d="M343.28,-668.3C371.19,-671.63 404.37,-675.57 436.81,-679.44"/>
<polygon fill="#666666" stroke="#666666" points="436.51,-682.92 446.85,-680.63 437.33,-675.97 436.51,-682.92"/>
</g>
<!-- IBlockOutputStream&#45;&gt;RWLockImpl_LockHolder -->
<g id="edge8" class="edge">
<title>IBlockOutputStream:table_locks&#45;&gt;RWLockImpl_LockHolder</title>
<path fill="none" stroke="#666666" d="M707.11,-654.53C730.77,-644.14 754.44,-631.68 775,-617 817.45,-586.69 854.43,-537.84 874.93,-507.67"/>
<polygon fill="#666666" stroke="#666666" points="877.87,-509.58 880.51,-499.32 872.04,-505.69 877.87,-509.58"/>
</g>
</g>
</svg>
