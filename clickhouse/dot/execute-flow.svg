<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.0 (20200408.0750)
 -->
<!-- Title: execute_flow Pages: 1 -->
<svg width="1253pt" height="100pt"
 viewBox="0.00 0.00 1253.00 100.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 96)">
<title>execute_flow</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-96 1249,-96 1249,4 -4,4"/>
<!-- SQL -->
<g id="node1" class="node">
<title>SQL</title>
<polygon fill="none" stroke="black" points="0,-15.5 0,-76.5 99,-76.5 99,-15.5 0,-15.5"/>
<text text-anchor="middle" x="49.5" y="-61.3" font-family="Times,serif" font-size="14.00">SQL</text>
<polyline fill="none" stroke="black" points="0,-53.5 99,-53.5 "/>
<text text-anchor="start" x="8" y="-38.3" font-family="Times,serif" font-size="14.00">客户端的SQL</text>
<text text-anchor="start" x="8" y="-23.3" font-family="Times,serif" font-size="14.00"> 语句字符串</text>
</g>
<!-- AST -->
<g id="node2" class="node">
<title>AST</title>
<polygon fill="none" stroke="black" points="198,-15.5 198,-76.5 348,-76.5 348,-15.5 198,-15.5"/>
<text text-anchor="middle" x="273" y="-61.3" font-family="Times,serif" font-size="14.00">AST</text>
<polyline fill="none" stroke="black" points="198,-53.5 348,-53.5 "/>
<text text-anchor="start" x="206" y="-38.3" font-family="Times,serif" font-size="14.00">通过parseQuery解析为</text>
<text text-anchor="start" x="206" y="-23.3" font-family="Times,serif" font-size="14.00"> interpreter</text>
</g>
<!-- SQL&#45;&gt;AST -->
<g id="edge1" class="edge">
<title>SQL&#45;&gt;AST</title>
<path fill="none" stroke="#666666" d="M99.11,-46C125.08,-46 157.79,-46 187.76,-46"/>
<polygon fill="#666666" stroke="#666666" points="187.8,-49.5 197.8,-46 187.8,-42.5 187.8,-49.5"/>
<text text-anchor="middle" x="148.5" y="-49.8" font-family="Times,serif" font-size="14.00">parseQuery</text>
</g>
<!-- Interpreters -->
<g id="node3" class="node">
<title>Interpreters</title>
<polygon fill="none" stroke="black" points="385,-15.5 385,-76.5 558,-76.5 558,-15.5 385,-15.5"/>
<text text-anchor="middle" x="471.5" y="-61.3" font-family="Times,serif" font-size="14.00">interpreter</text>
<polyline fill="none" stroke="black" points="385,-53.5 558,-53.5 "/>
<text text-anchor="start" x="393" y="-38.3" font-family="Times,serif" font-size="14.00">interpreter execute时候</text>
<text text-anchor="start" x="393" y="-23.3" font-family="Times,serif" font-size="14.00"> 拆解为一堆QueryPlanStep</text>
</g>
<!-- AST&#45;&gt;Interpreters -->
<g id="edge2" class="edge">
<title>AST&#45;&gt;Interpreters</title>
<path fill="none" stroke="#666666" d="M348.01,-46C356.7,-46 365.67,-46 374.61,-46"/>
<polygon fill="#666666" stroke="#666666" points="374.67,-49.5 384.67,-46 374.67,-42.5 374.67,-49.5"/>
</g>
<!-- QueryPlanStep -->
<g id="node4" class="node">
<title>QueryPlanStep</title>
<polygon fill="none" stroke="black" points="595,-8 595,-84 830,-84 830,-8 595,-8"/>
<text text-anchor="middle" x="712.5" y="-68.8" font-family="Times,serif" font-size="14.00">QueryPlanStep</text>
<polyline fill="none" stroke="black" points="595,-61 830,-61 "/>
<text text-anchor="start" x="603" y="-45.8" font-family="Times,serif" font-size="14.00">在buildpipeline时候，将planstep</text>
<text text-anchor="start" x="603" y="-30.8" font-family="Times,serif" font-size="14.00"> 转变为Processors</text>
<text text-anchor="start" x="603" y="-15.8" font-family="Times,serif" font-size="14.00"> 并连接依赖的Processors的输入输出</text>
</g>
<!-- Interpreters&#45;&gt;QueryPlanStep -->
<g id="edge3" class="edge">
<title>Interpreters&#45;&gt;QueryPlanStep</title>
<path fill="none" stroke="#666666" d="M558.11,-46C566.77,-46 575.69,-46 584.67,-46"/>
<polygon fill="#666666" stroke="#666666" points="584.81,-49.5 594.81,-46 584.81,-42.5 584.81,-49.5"/>
</g>
<!-- PipelineProcessors -->
<g id="node6" class="node">
<title>PipelineProcessors</title>
<polygon fill="none" stroke="black" points="867,-0.5 867,-91.5 1031,-91.5 1031,-0.5 867,-0.5"/>
<text text-anchor="middle" x="949" y="-76.3" font-family="Times,serif" font-size="14.00">PipelineProcessors</text>
<polyline fill="none" stroke="black" points="867,-68.5 1031,-68.5 "/>
<text text-anchor="start" x="875" y="-53.3" font-family="Times,serif" font-size="14.00">每个processor有</text>
<text text-anchor="start" x="875" y="-38.3" font-family="Times,serif" font-size="14.00"> input和output</text>
<text text-anchor="start" x="875" y="-23.3" font-family="Times,serif" font-size="14.00"> 以及prepare/work虚函数</text>
<text text-anchor="start" x="875" y="-8.3" font-family="Times,serif" font-size="14.00"> 用于执行具体功能</text>
</g>
<!-- QueryPlanStep&#45;&gt;PipelineProcessors -->
<g id="edge4" class="edge">
<title>QueryPlanStep&#45;&gt;PipelineProcessors</title>
<path fill="none" stroke="#666666" d="M830.06,-46C838.99,-46 847.91,-46 856.64,-46"/>
<polygon fill="#666666" stroke="#666666" points="856.78,-49.5 866.78,-46 856.78,-42.5 856.78,-49.5"/>
</g>
<!-- PipelineExecutor -->
<g id="node5" class="node">
<title>PipelineExecutor</title>
<polygon fill="none" stroke="black" points="1068,-15.5 1068,-76.5 1245,-76.5 1245,-15.5 1068,-15.5"/>
<text text-anchor="middle" x="1156.5" y="-61.3" font-family="Times,serif" font-size="14.00">PipelineExecutor</text>
<polyline fill="none" stroke="black" points="1068,-53.5 1245,-53.5 "/>
<text text-anchor="start" x="1076" y="-38.3" font-family="Times,serif" font-size="14.00">将processors转换为DAG</text>
<text text-anchor="start" x="1076" y="-23.3" font-family="Times,serif" font-size="14.00"> 依赖图并在线程池中执行</text>
</g>
<!-- PipelineProcessors&#45;&gt;PipelineExecutor -->
<g id="edge5" class="edge">
<title>PipelineProcessors&#45;&gt;PipelineExecutor</title>
<path fill="none" stroke="#666666" d="M1031.22,-46C1039.85,-46 1048.69,-46 1057.48,-46"/>
<polygon fill="#666666" stroke="#666666" points="1057.77,-49.5 1067.77,-46 1057.77,-42.5 1057.77,-49.5"/>
</g>
</g>
</svg>
