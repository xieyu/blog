<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.0 (20200408.0750)
 -->
<!-- Title: blockIO Pages: 1 -->
<svg width="1033pt" height="905pt"
 viewBox="0.00 0.00 1033.00 905.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 901)">
<title>blockIO</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-901 1029,-901 1029,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_QueryPipeline</title>
<polygon fill="none" stroke="black" points="575.5,-795 575.5,-889 1017,-889 1017,-795 575.5,-795"/>
<text text-anchor="middle" x="796.25" y="-869" font-family="Times,serif" font-size="20.00">QueryPipeline</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_PullingPipelineExecutor</title>
<polygon fill="none" stroke="black" points="553,-265 553,-523 956,-523 956,-265 553,-265"/>
<text text-anchor="middle" x="754.5" y="-503" font-family="Times,serif" font-size="20.00">PullingPipelineExecutor</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_PullingAsyncPipelineExecutor</title>
<polygon fill="none" stroke="black" points="553,-8 553,-257 973,-257 973,-8 553,-8"/>
<text text-anchor="middle" x="763" y="-237" font-family="Times,serif" font-size="20.00">PullingAsyncPipelineExecutor</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_PipelineExecutingBlockInputStream</title>
<polygon fill="none" stroke="black" points="278,-531 278,-787 709,-787 709,-531 278,-531"/>
<text text-anchor="middle" x="493.5" y="-767" font-family="Times,serif" font-size="20.00">PipelineExecutingBlockInputStream</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_IBlockInputStream</title>
<polygon fill="none" stroke="black" points="8,-520 8,-796 224,-796 224,-520 8,-520"/>
<text text-anchor="middle" x="116" y="-776" font-family="Times,serif" font-size="20.00">IBlockInputStream</text>
</g>
<!-- pipline_get_header -->
<g id="node1" class="node">
<title>pipline_get_header</title>
<polygon fill="none" stroke="black" points="583.5,-804 583.5,-840 655.5,-840 655.5,-804 583.5,-804"/>
<text text-anchor="middle" x="619.5" y="-818.3" font-family="Times,serif" font-size="14.00">getHeader</text>
</g>
<!-- pipeline_getNumThreads -->
<g id="node2" class="node">
<title>pipeline_getNumThreads</title>
<polygon fill="none" stroke="black" points="738,-804 738,-850 1009,-850 1009,-804 738,-804"/>
<text text-anchor="middle" x="873.5" y="-834.8" font-family="Times,serif" font-size="14.00">getNumThreads</text>
<polyline fill="none" stroke="black" points="738,-827 1009,-827 "/>
<text text-anchor="middle" x="873.5" y="-811.8" font-family="Times,serif" font-size="14.00">如果线程数&gt;1,就使用PullingAysncExecutor</text>
</g>
<!-- getTotalsBlock -->
<g id="node3" class="node">
<title>getTotalsBlock</title>
<polygon fill="none" stroke="black" points="669,-429 570,-429 570,-393 669,-393 669,-429"/>
<text text-anchor="middle" x="619.5" y="-407.3" font-family="Times,serif" font-size="14.00">getTotalsBlock</text>
</g>
<!-- getExtremesBlock -->
<g id="node4" class="node">
<title>getExtremesBlock</title>
<polygon fill="none" stroke="black" points="678,-375 561,-375 561,-339 678,-339 678,-375"/>
<text text-anchor="middle" x="619.5" y="-353.3" font-family="Times,serif" font-size="14.00">getExtremesBlock</text>
</g>
<!-- execute_pull -->
<g id="node5" class="node">
<title>execute_pull</title>
<polygon fill="none" stroke="black" points="575,-274 575,-320 664,-320 664,-274 575,-274"/>
<text text-anchor="middle" x="619.5" y="-304.8" font-family="Times,serif" font-size="14.00">pull</text>
<polyline fill="none" stroke="black" points="575,-297 664,-297 "/>
<text text-anchor="middle" x="619.5" y="-281.8" font-family="Times,serif" font-size="14.00">执行pipeline</text>
</g>
<!-- execute_get_header -->
<g id="node6" class="node">
<title>execute_get_header</title>
<polygon fill="none" stroke="black" points="583.5,-448 583.5,-484 655.5,-484 655.5,-448 583.5,-448"/>
<text text-anchor="middle" x="619.5" y="-462.3" font-family="Times,serif" font-size="14.00">getHeader</text>
</g>
<!-- PullingPipelineExecutor -->
<g id="node7" class="node">
<title>PullingPipelineExecutor</title>
<polygon fill="none" stroke="black" points="948,-485 799,-485 799,-449 948,-449 948,-485"/>
<text text-anchor="middle" x="873.5" y="-463.3" font-family="Times,serif" font-size="14.00">PullingPipelineExecutor</text>
</g>
<!-- async_executor_pull -->
<g id="node8" class="node">
<title>async_executor_pull</title>
<polygon fill="none" stroke="black" points="592.5,-17 592.5,-53 646.5,-53 646.5,-17 592.5,-17"/>
<text text-anchor="middle" x="619.5" y="-31.3" font-family="Times,serif" font-size="14.00">pull</text>
</g>
<!-- async_execute_get_header -->
<g id="node9" class="node">
<title>async_execute_get_header</title>
<polygon fill="none" stroke="black" points="583.5,-182 583.5,-218 655.5,-218 655.5,-182 583.5,-182"/>
<text text-anchor="middle" x="619.5" y="-196.3" font-family="Times,serif" font-size="14.00">getHeader</text>
</g>
<!-- async_getTotalsBlock -->
<g id="node10" class="node">
<title>async_getTotalsBlock</title>
<polygon fill="none" stroke="black" points="570,-127 570,-163 669,-163 669,-127 570,-127"/>
<text text-anchor="middle" x="619.5" y="-141.3" font-family="Times,serif" font-size="14.00">getTotalsBlock</text>
</g>
<!-- async_getExtremesBlock -->
<g id="node11" class="node">
<title>async_getExtremesBlock</title>
<polygon fill="none" stroke="black" points="561,-72 561,-108 678,-108 678,-72 561,-72"/>
<text text-anchor="middle" x="619.5" y="-86.3" font-family="Times,serif" font-size="14.00">getExtremesBlock</text>
</g>
<!-- PullingAsyncPipelineExecutor -->
<g id="node12" class="node">
<title>PullingAsyncPipelineExecutor</title>
<polygon fill="none" stroke="black" points="965,-219 782,-219 782,-183 965,-183 965,-219"/>
<text text-anchor="middle" x="873.5" y="-197.3" font-family="Times,serif" font-size="14.00">PullingAsyncPipelineExecutor</text>
</g>
<!-- PipelineExecutingBlockInputStream -->
<g id="node13" class="node">
<title>PipelineExecutingBlockInputStream</title>
<polygon fill="none" stroke="black" points="286,-540 286,-586 501,-586 501,-540 286,-540"/>
<text text-anchor="middle" x="393.5" y="-570.8" font-family="Times,serif" font-size="14.00">PipelineExecutingBlockInputStream</text>
<polyline fill="none" stroke="black" points="286,-563 501,-563 "/>
<text text-anchor="middle" x="393.5" y="-547.8" font-family="Times,serif" font-size="14.00">构造函数</text>
</g>
<!-- getHeader -->
<g id="node14" class="node">
<title>getHeader</title>
<polygon fill="none" stroke="black" points="429.5,-695 357.5,-695 357.5,-659 429.5,-659 429.5,-695"/>
<text text-anchor="middle" x="393.5" y="-673.3" font-family="Times,serif" font-size="14.00">getHeader</text>
</g>
<!-- getHeader&#45;&gt;pipline_get_header -->
<g id="edge1" class="edge">
<title>getHeader&#45;&gt;pipline_get_header</title>
<path fill="none" stroke="#17b978" d="M429.78,-678.11C452.48,-680.56 481.3,-687.12 501,-704 532.91,-731.34 507.78,-761.81 538,-791 547.87,-800.54 560.99,-807.22 573.77,-811.86"/>
<polygon fill="#17b978" stroke="#17b978" points="572.82,-815.24 583.41,-815.04 575.01,-808.59 572.82,-815.24"/>
</g>
<!-- getHeader&#45;&gt;execute_get_header -->
<g id="edge2" class="edge">
<title>getHeader&#45;&gt;execute_get_header</title>
<path fill="none" stroke="#17b978" d="M429.65,-676.66C452.73,-674.58 482.05,-668.13 501,-650 542.24,-610.53 505.42,-573.88 538,-527 548.11,-512.45 562.78,-499.89 576.83,-490"/>
<polygon fill="#17b978" stroke="#17b978" points="579.11,-492.69 585.46,-484.2 575.2,-486.88 579.11,-492.69"/>
</g>
<!-- getHeader&#45;&gt;async_execute_get_header -->
<g id="edge3" class="edge">
<title>getHeader&#45;&gt;async_execute_get_header</title>
<path fill="none" stroke="#17b978" d="M429.58,-677.88C453.4,-676.45 483.62,-670.27 501,-650 557.51,-584.07 495.72,-336.84 538,-261 546.49,-245.78 560.51,-233.18 574.5,-223.47"/>
<polygon fill="#17b978" stroke="#17b978" points="576.71,-226.2 583.16,-217.79 572.87,-220.35 576.71,-226.2"/>
</g>
<!-- readPrefixImpl -->
<g id="node15" class="node">
<title>readPrefixImpl</title>
<polygon fill="none" stroke="black" points="442.5,-749 344.5,-749 344.5,-713 442.5,-713 442.5,-749"/>
<text text-anchor="middle" x="393.5" y="-727.3" font-family="Times,serif" font-size="14.00">readPrefixImpl</text>
</g>
<!-- createExecutor -->
<g id="node16" class="node">
<title>createExecutor</title>
<polygon fill="none" stroke="black" points="538,-592.5 538,-653.5 701,-653.5 701,-592.5 538,-592.5"/>
<text text-anchor="middle" x="619.5" y="-638.3" font-family="Times,serif" font-size="14.00">createExecutor</text>
<polyline fill="none" stroke="black" points="538,-630.5 701,-630.5 "/>
<text text-anchor="start" x="546" y="-615.3" font-family="Times,serif" font-size="14.00">根据queryPipeline线程数</text>
<text text-anchor="start" x="546" y="-600.3" font-family="Times,serif" font-size="14.00"> 创建对应的executor</text>
</g>
<!-- readPrefixImpl&#45;&gt;createExecutor -->
<g id="edge4" class="edge">
<title>readPrefixImpl&#45;&gt;createExecutor</title>
<path fill="none" stroke="#666666" d="M442.64,-722.6C461.37,-718.36 482.67,-712.31 501,-704 526.5,-692.43 552.38,-675.29 573.34,-659.76"/>
<polygon fill="#666666" stroke="#666666" points="575.53,-662.49 581.41,-653.67 571.32,-656.9 575.53,-662.49"/>
</g>
<!-- createExecutor&#45;&gt;pipeline_getNumThreads -->
<g id="edge13" class="edge">
<title>createExecutor&#45;&gt;pipeline_getNumThreads</title>
<path fill="none" stroke="#666666" d="M658.23,-653.54C706.25,-692.42 788.66,-759.13 836.06,-797.5"/>
<polygon fill="#666666" stroke="#666666" points="833.95,-800.29 843.92,-803.86 838.35,-794.85 833.95,-800.29"/>
</g>
<!-- createExecutor&#45;&gt;PullingPipelineExecutor -->
<g id="edge14" class="edge">
<title>createExecutor&#45;&gt;PullingPipelineExecutor</title>
<path fill="none" stroke="#666666" d="M701.17,-600.84C707.67,-598.16 714.03,-595.22 720,-592 770.07,-565.01 819.39,-520.4 847.83,-492.41"/>
<polygon fill="#666666" stroke="#666666" points="850.33,-494.87 854.95,-485.33 845.39,-489.91 850.33,-494.87"/>
</g>
<!-- createExecutor&#45;&gt;PullingAsyncPipelineExecutor -->
<g id="edge15" class="edge">
<title>createExecutor&#45;&gt;PullingAsyncPipelineExecutor</title>
<path fill="none" stroke="#666666" d="M680.34,-592.46C695.87,-581.55 710.8,-567.72 720,-551 751.14,-494.43 701.19,-314.05 738,-261 749.71,-244.12 767.32,-231.93 785.97,-223.14"/>
<polygon fill="#666666" stroke="#666666" points="787.44,-226.32 795.19,-219.09 784.63,-219.91 787.44,-226.32"/>
</g>
<!-- readImpl -->
<g id="node17" class="node">
<title>readImpl</title>
<polygon fill="none" stroke="black" points="426.5,-641 360.5,-641 360.5,-605 426.5,-605 426.5,-641"/>
<text text-anchor="middle" x="393.5" y="-619.3" font-family="Times,serif" font-size="14.00">readImpl</text>
</g>
<!-- readImpl&#45;&gt;getTotalsBlock -->
<g id="edge5" class="edge">
<title>readImpl&#45;&gt;getTotalsBlock</title>
<path fill="none" stroke="#b83b5e" d="M426.76,-623.26C450.45,-621.68 481.74,-615.59 501,-596 551.26,-544.88 489.99,-492.24 538,-439 544.05,-432.29 551.79,-427.19 560.07,-423.31"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="561.65,-426.45 569.59,-419.43 559,-419.97 561.65,-426.45"/>
</g>
<!-- readImpl&#45;&gt;getExtremesBlock -->
<g id="edge6" class="edge">
<title>readImpl&#45;&gt;getExtremesBlock</title>
<path fill="none" stroke="#b83b5e" d="M426.78,-623.78C450.8,-622.5 482.51,-616.57 501,-596 519.91,-574.96 513.95,-497.83 519,-470 526,-431.49 511.83,-413.11 538,-384 541.98,-379.58 546.7,-375.88 551.84,-372.78"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="553.55,-375.84 560.81,-368.12 550.33,-369.62 553.55,-375.84"/>
</g>
<!-- readImpl&#45;&gt;execute_pull -->
<g id="edge7" class="edge">
<title>readImpl&#45;&gt;execute_pull</title>
<path fill="none" stroke="#b83b5e" d="M426.83,-623.82C450.88,-622.57 482.61,-616.66 501,-596 521.13,-573.4 514.83,-490.98 519,-461 527.11,-402.73 501.8,-376.37 538,-330 545.05,-320.98 554.98,-314.4 565.47,-309.62"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="566.81,-312.85 574.77,-305.86 564.19,-306.36 566.81,-312.85"/>
</g>
<!-- readImpl&#45;&gt;async_executor_pull -->
<g id="edge8" class="edge">
<title>readImpl&#45;&gt;async_executor_pull</title>
<path fill="none" stroke="#b83b5e" d="M426.62,-624.32C451.06,-623.4 483.39,-617.7 501,-596 516.38,-577.05 516.1,-181.24 519,-157 524.12,-114.25 509.53,-94.31 538,-62 549.19,-49.3 566.54,-42.56 582.27,-38.99"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="583.13,-42.39 592.3,-37.07 581.82,-35.51 583.13,-42.39"/>
</g>
<!-- readImpl&#45;&gt;async_execute_get_header -->
<g id="edge9" class="edge">
<title>readImpl&#45;&gt;async_execute_get_header</title>
<path fill="none" stroke="#b83b5e" d="M426.78,-624.24C451.14,-623.26 483.29,-617.5 501,-596 546.85,-540.34 484.43,-335.29 519,-272 531.2,-249.67 553.65,-232.51 574.14,-220.56"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="576.03,-223.51 583.07,-215.59 572.63,-217.39 576.03,-223.51"/>
</g>
<!-- readImpl&#45;&gt;async_getTotalsBlock -->
<g id="edge10" class="edge">
<title>readImpl&#45;&gt;async_getTotalsBlock</title>
<path fill="none" stroke="#b83b5e" d="M426.79,-624.24C451.15,-623.26 483.3,-617.5 501,-596 524.2,-567.82 514.41,-304.21 519,-268 524.42,-225.28 509.71,-205.46 538,-173 544.07,-166.04 551.96,-160.8 560.43,-156.87"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="561.83,-160.08 569.79,-153.1 559.21,-153.59 561.83,-160.08"/>
</g>
<!-- readImpl&#45;&gt;async_getExtremesBlock -->
<g id="edge11" class="edge">
<title>readImpl&#45;&gt;async_getExtremesBlock</title>
<path fill="none" stroke="#b83b5e" d="M426.59,-624.29C451,-623.36 483.33,-617.65 501,-596 528.01,-562.91 513.75,-254.39 519,-212 524.24,-169.7 509.97,-150.11 538,-118 541.93,-113.5 546.62,-109.73 551.73,-106.56"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="553.51,-109.57 560.68,-101.77 550.21,-103.4 553.51,-109.57"/>
</g>
<!-- readImpl&#45;&gt;createExecutor -->
<g id="edge12" class="edge">
<title>readImpl&#45;&gt;createExecutor</title>
<path fill="none" stroke="#b83b5e" d="M426.59,-623C453.02,-623 491.83,-623 527.65,-623"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="527.66,-626.5 537.66,-623 527.66,-619.5 527.66,-626.5"/>
</g>
<!-- read -->
<g id="node18" class="node">
<title>read</title>
<polygon fill="none" stroke="black" points="42,-609 42,-685 190,-685 190,-609 42,-609"/>
<text text-anchor="middle" x="116" y="-669.8" font-family="Times,serif" font-size="14.00">read</text>
<polyline fill="none" stroke="black" points="42,-662 190,-662 "/>
<text text-anchor="start" x="50" y="-646.8" font-family="Times,serif" font-size="14.00">Read next block</text>
<text text-anchor="start" x="50" y="-631.8" font-family="Times,serif" font-size="14.00"> if there no more blocks</text>
<text text-anchor="start" x="50" y="-616.8" font-family="Times,serif" font-size="14.00"> return an empty block</text>
</g>
<!-- read&#45;&gt;readImpl -->
<g id="edge16" class="edge">
<title>read&#45;&gt;readImpl</title>
<path fill="none" stroke="#666666" d="M190.11,-640.63C241.21,-636.18 307.66,-630.39 350.21,-626.68"/>
<polygon fill="#666666" stroke="#666666" points="350.56,-630.17 360.22,-625.81 349.96,-623.19 350.56,-630.17"/>
</g>
<!-- IBlockInputStream -->
<g id="node19" class="node">
<title>IBlockInputStream</title>
<polygon fill="none" stroke="black" points="16,-528.5 16,-589.5 216,-589.5 216,-528.5 16,-528.5"/>
<text text-anchor="middle" x="116" y="-574.3" font-family="Times,serif" font-size="14.00">IBlockInputStream</text>
<polyline fill="none" stroke="black" points="16,-566.5 216,-566.5 "/>
<text text-anchor="start" x="24" y="-551.3" font-family="Times,serif" font-size="14.00">the stream interface for reading</text>
<text text-anchor="start" x="24" y="-536.3" font-family="Times,serif" font-size="14.00"> data by blocks from the database</text>
</g>
<!-- IBlockInputStream&#45;&gt;PipelineExecutingBlockInputStream -->
<g id="edge17" class="edge">
<title>IBlockInputStream&#45;&gt;PipelineExecutingBlockInputStream</title>
<path fill="none" stroke="#666666" d="M216.07,-560.44C235.47,-560.72 255.98,-561.02 275.89,-561.31"/>
<polygon fill="#666666" stroke="#666666" points="275.88,-564.81 285.93,-561.45 275.98,-557.81 275.88,-564.81"/>
<text text-anchor="middle" x="251" y="-564.8" font-family="Times,serif" font-size="14.00">derive</text>
</g>
<!-- readPrefix -->
<g id="node20" class="node">
<title>readPrefix</title>
<polygon fill="none" stroke="black" points="17,-704.5 17,-757.5 215,-757.5 215,-704.5 17,-704.5"/>
<text text-anchor="start" x="25" y="-742.3" font-family="Times,serif" font-size="14.00">readPrefix read something before</text>
<text text-anchor="start" x="25" y="-727.3" font-family="Times,serif" font-size="14.00"> starting all data or after</text>
<text text-anchor="start" x="25" y="-712.3" font-family="Times,serif" font-size="14.00"> the end of all data</text>
</g>
<!-- readPrefix&#45;&gt;readPrefixImpl -->
<g id="edge18" class="edge">
<title>readPrefix&#45;&gt;readPrefixImpl</title>
<path fill="none" stroke="#666666" d="M215.3,-731C255.07,-731 299.63,-731 334.12,-731"/>
<polygon fill="#666666" stroke="#666666" points="334.48,-734.5 344.48,-731 334.48,-727.5 334.48,-734.5"/>
</g>
</g>
</svg>
