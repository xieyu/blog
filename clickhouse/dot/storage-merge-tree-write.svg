<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: storage_merge_tree_write Pages: 1 -->
<svg width="1175pt" height="846pt"
 viewBox="0.00 0.00 1175.00 846.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 842)">
<title>storage_merge_tree_write</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-842 1171,-842 1171,4 -4,4"/>
<g id="clust2" class="cluster">
<title>cluster_settings</title>
<polygon fill="none" stroke="black" points="144,-748 144,-830 599,-830 599,-748 144,-748"/>
<text text-anchor="middle" x="371.5" y="-810" font-family="Times,serif" font-size="20.00">settings</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_MergeTreeData</title>
<polygon fill="none" stroke="black" points="153.5,-558 153.5,-694 630,-694 630,-558 153.5,-558"/>
<text text-anchor="middle" x="391.75" y="-674" font-family="Times,serif" font-size="20.00">MergeTreeData</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_metedata_snapshot</title>
<polygon fill="none" stroke="black" points="447,-128 447,-264 614,-264 614,-128 447,-128"/>
<text text-anchor="middle" x="530.5" y="-244" font-family="Times,serif" font-size="20.00">metadata_snapshot</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_MergeTreeDataWriter</title>
<polygon fill="none" stroke="black" points="181.5,-272 181.5,-374 965,-374 965,-272 181.5,-272"/>
<text text-anchor="middle" x="573.25" y="-354" font-family="Times,serif" font-size="20.00">MergeTreeDataWriter</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_PartLog</title>
<polygon fill="none" stroke="black" points="1022.5,-210 1022.5,-292 1121.5,-292 1121.5,-210 1022.5,-210"/>
<text text-anchor="middle" x="1072" y="-272" font-family="Times,serif" font-size="20.00">PartLog</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_BackgroundProcessingPoolTaskInfo</title>
<polygon fill="none" stroke="black" points="97.5,-8 97.5,-90 402.5,-90 402.5,-8 97.5,-8"/>
<text text-anchor="middle" x="250" y="-70" font-family="Times,serif" font-size="20.00">BackgroundProcessingPoolTaskInfo</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_MergeTreeBlockOutputStream</title>
<polygon fill="none" stroke="black" points="8,-428 8,-550 1159,-550 1159,-428 8,-428"/>
<text text-anchor="middle" x="583.5" y="-530" font-family="Times,serif" font-size="20.00">MergeTreeBlockOutputStream </text>
</g>
<!-- write -->
<g id="node1" class="node">
<title>write</title>
<polygon fill="none" stroke="black" points="70,-738 16,-738 16,-702 70,-702 70,-738"/>
<text text-anchor="middle" x="43" y="-716.3" font-family="Times,serif" font-size="14.00">write</text>
</g>
<!-- max_partitions_per_insert_block -->
<g id="node2" class="node">
<title>max_partitions_per_insert_block</title>
<polygon fill="none" stroke="black" points="348,-792 152,-792 152,-756 348,-756 348,-792"/>
<text text-anchor="middle" x="250" y="-770.3" font-family="Times,serif" font-size="14.00">max_partitions_per_insert_block</text>
</g>
<!-- write&#45;&gt;max_partitions_per_insert_block -->
<g id="edge1" class="edge">
<title>write&#45;&gt;max_partitions_per_insert_block</title>
<path fill="none" stroke="#666666" d="M70.01,-735.04C78.54,-739.44 88.22,-743.91 97.5,-747 111.64,-751.71 126.81,-755.66 141.89,-758.94"/>
<polygon fill="#666666" stroke="#666666" points="141.27,-762.38 151.77,-761 142.7,-755.53 141.27,-762.38"/>
</g>
<!-- metadata_snapshot -->
<g id="node3" class="node">
<title>metadata_snapshot</title>
<polygon fill="none" stroke="black" points="310,-738 190,-738 190,-702 310,-702 310,-738"/>
<text text-anchor="middle" x="250" y="-716.3" font-family="Times,serif" font-size="14.00">metadata_snapshot</text>
</g>
<!-- write&#45;&gt;metadata_snapshot -->
<g id="edge2" class="edge">
<title>write&#45;&gt;metadata_snapshot</title>
<path fill="none" stroke="#666666" d="M70.38,-720C97.76,-720 141.74,-720 179.21,-720"/>
<polygon fill="#666666" stroke="#666666" points="179.59,-723.5 189.59,-720 179.59,-716.5 179.59,-723.5"/>
</g>
<!-- MergeTreeBlockOutputStream -->
<g id="node4" class="node">
<title>MergeTreeBlockOutputStream</title>
<polygon fill="none" stroke="black" points="343,-512 157,-512 157,-476 343,-476 343,-512"/>
<text text-anchor="middle" x="250" y="-490.3" font-family="Times,serif" font-size="14.00">MergeTreeBlockOutputStream</text>
</g>
<!-- write&#45;&gt;MergeTreeBlockOutputStream -->
<g id="edge3" class="edge">
<title>write&#45;&gt;MergeTreeBlockOutputStream</title>
<path fill="none" stroke="#666666" d="M44.93,-701.76C47.59,-668.21 57.86,-596.32 97.5,-554 113.58,-536.84 135.19,-524.49 157.04,-515.65"/>
<polygon fill="#666666" stroke="#666666" points="158.31,-518.91 166.41,-512.07 155.82,-512.37 158.31,-518.91"/>
</g>
<!-- max_parts_in_total -->
<g id="node5" class="node">
<title>max_parts_in_total</title>
<polygon fill="none" stroke="black" points="591,-792 469,-792 469,-756 591,-756 591,-792"/>
<text text-anchor="middle" x="530" y="-770.3" font-family="Times,serif" font-size="14.00">max_parts_in_total</text>
</g>
<!-- delayInsertOrThrowIfNeeded -->
<g id="node6" class="node">
<title>delayInsertOrThrowIfNeeded</title>
<polygon fill="none" stroke="black" points="338.5,-629 161.5,-629 161.5,-593 338.5,-593 338.5,-629"/>
<text text-anchor="middle" x="250" y="-607.3" font-family="Times,serif" font-size="14.00">delayInsertOrThrowIfNeeded</text>
</g>
<!-- delayInsertOrThrowIfNeeded&#45;&gt;max_parts_in_total -->
<g id="edge4" class="edge">
<title>delayInsertOrThrowIfNeeded&#45;&gt;max_parts_in_total</title>
<path fill="none" stroke="#666666" d="M286,-629.01C316.97,-645.17 363.21,-669.83 402.5,-693 433.65,-711.37 468.16,-733.6 493.26,-750.12"/>
<polygon fill="#666666" stroke="#666666" points="491.45,-753.12 501.72,-755.71 495.31,-747.28 491.45,-753.12"/>
</g>
<!-- getPartsCount -->
<g id="node7" class="node">
<title>getPartsCount</title>
<polygon fill="none" stroke="black" points="576.5,-602 483.5,-602 483.5,-566 576.5,-566 576.5,-602"/>
<text text-anchor="middle" x="530" y="-580.3" font-family="Times,serif" font-size="14.00">getPartsCount</text>
</g>
<!-- delayInsertOrThrowIfNeeded&#45;&gt;getPartsCount -->
<g id="edge5" class="edge">
<title>delayInsertOrThrowIfNeeded&#45;&gt;getPartsCount</title>
<path fill="none" stroke="#666666" d="M338.58,-602.49C382.7,-598.21 434.87,-593.14 473.44,-589.4"/>
<polygon fill="#666666" stroke="#666666" points="473.82,-592.88 483.43,-588.43 473.14,-585.91 473.82,-592.88"/>
</g>
<!-- getMaxPartsCountForPartition -->
<g id="node8" class="node">
<title>getMaxPartsCountForPartition</title>
<polygon fill="none" stroke="black" points="622,-656 438,-656 438,-620 622,-620 622,-656"/>
<text text-anchor="middle" x="530" y="-634.3" font-family="Times,serif" font-size="14.00">getMaxPartsCountForPartition</text>
</g>
<!-- delayInsertOrThrowIfNeeded&#45;&gt;getMaxPartsCountForPartition -->
<g id="edge6" class="edge">
<title>delayInsertOrThrowIfNeeded&#45;&gt;getMaxPartsCountForPartition</title>
<path fill="none" stroke="#666666" d="M338.58,-619.51C366.77,-622.24 398.24,-625.3 427.35,-628.13"/>
<polygon fill="#666666" stroke="#666666" points="427.25,-631.63 437.54,-629.12 427.93,-624.67 427.25,-631.63"/>
</g>
<!-- hasPartitionKey -->
<g id="node9" class="node">
<title>hasPartitionKey</title>
<polygon fill="none" stroke="black" points="582,-226 478,-226 478,-190 582,-190 582,-226"/>
<text text-anchor="middle" x="530" y="-204.3" font-family="Times,serif" font-size="14.00">hasPartitionKey</text>
</g>
<!-- getPartitionKey -->
<g id="node10" class="node">
<title>getPartitionKey</title>
<polygon fill="none" stroke="black" points="581,-172 479,-172 479,-136 581,-136 581,-172"/>
<text text-anchor="middle" x="530" y="-150.3" font-family="Times,serif" font-size="14.00">getPartitionKey</text>
</g>
<!-- KeyDescription -->
<g id="node14" class="node">
<title>KeyDescription</title>
<polygon fill="none" stroke="black" points="760,-316 658,-316 658,-280 760,-280 760,-316"/>
<text text-anchor="middle" x="709" y="-294.3" font-family="Times,serif" font-size="14.00">KeyDescription</text>
</g>
<!-- getPartitionKey&#45;&gt;KeyDescription -->
<g id="edge11" class="edge">
<title>getPartitionKey&#45;&gt;KeyDescription</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M581.14,-160.43C597.83,-164.38 615.76,-170.74 630,-181 661.75,-203.88 684.32,-243.99 696.76,-270.77"/>
<polygon fill="#666666" stroke="#666666" points="693.6,-272.28 700.88,-279.98 699.99,-269.42 693.6,-272.28"/>
</g>
<!-- splitBlockIntoParts -->
<g id="node11" class="node">
<title>splitBlockIntoParts</title>
<polygon fill="none" stroke="black" points="310.5,-326 189.5,-326 189.5,-290 310.5,-290 310.5,-326"/>
<text text-anchor="middle" x="250" y="-304.3" font-family="Times,serif" font-size="14.00">splitBlockIntoParts</text>
</g>
<!-- splitBlockIntoParts&#45;&gt;hasPartitionKey -->
<g id="edge7" class="edge">
<title>splitBlockIntoParts&#45;&gt;hasPartitionKey</title>
<path fill="none" stroke="#666666" d="M301.34,-289.89C348.43,-272.95 418.81,-247.64 468.84,-229.64"/>
<polygon fill="#666666" stroke="#666666" points="470.34,-232.82 478.56,-226.14 467.97,-226.23 470.34,-232.82"/>
</g>
<!-- splitBlockIntoParts&#45;&gt;getPartitionKey -->
<g id="edge8" class="edge">
<title>splitBlockIntoParts&#45;&gt;getPartitionKey</title>
<path fill="none" stroke="#666666" d="M272.66,-289.97C306.17,-262.87 373.45,-211.58 438,-181 447.81,-176.35 458.59,-172.31 469.19,-168.87"/>
<polygon fill="#666666" stroke="#666666" points="470.34,-172.18 478.85,-165.88 468.26,-165.49 470.34,-172.18"/>
</g>
<!-- buildScatterSelector -->
<g id="node12" class="node">
<title>buildScatterSelector</title>
<polygon fill="none" stroke="black" points="593,-316 467,-316 467,-280 593,-280 593,-316"/>
<text text-anchor="middle" x="530" y="-294.3" font-family="Times,serif" font-size="14.00">buildScatterSelector</text>
</g>
<!-- splitBlockIntoParts&#45;&gt;buildScatterSelector -->
<g id="edge9" class="edge">
<title>splitBlockIntoParts&#45;&gt;buildScatterSelector</title>
<path fill="none" stroke="#666666" d="M310.64,-305.85C353.36,-304.32 411.11,-302.24 456.5,-300.61"/>
<polygon fill="#666666" stroke="#666666" points="456.7,-304.1 466.57,-300.25 456.45,-297.11 456.7,-304.1"/>
</g>
<!-- ExpressionAction_execute -->
<g id="node13" class="node">
<title>ExpressionAction_execute</title>
<polygon fill="none" stroke="black" points="957,-326 796,-326 796,-290 957,-290 957,-326"/>
<text text-anchor="middle" x="876.5" y="-304.3" font-family="Times,serif" font-size="14.00">ExpressionAction_execute</text>
</g>
<!-- splitBlockIntoParts&#45;&gt;ExpressionAction_execute -->
<g id="edge10" class="edge">
<title>splitBlockIntoParts&#45;&gt;ExpressionAction_execute</title>
<path fill="none" stroke="#666666" d="M310.7,-314.82C347.37,-318.66 395.34,-323.06 438,-325 580.96,-331.48 617.27,-335.45 760,-325 768.35,-324.39 777.02,-323.53 785.68,-322.52"/>
<polygon fill="#666666" stroke="#666666" points="786.33,-325.97 795.83,-321.28 785.48,-319.02 786.33,-325.97"/>
</g>
<!-- part_blocks -->
<g id="node21" class="node">
<title>part_blocks</title>
<polygon fill="#95e1d3" stroke="black" points="490,-383 490,-419 570,-419 570,-383 490,-383"/>
<text text-anchor="middle" x="530" y="-397.3" font-family="Times,serif" font-size="14.00">part_blocks</text>
</g>
<!-- splitBlockIntoParts&#45;&gt;part_blocks -->
<g id="edge20" class="edge">
<title>splitBlockIntoParts&#45;&gt;part_blocks</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M295.1,-326.09C332.7,-341.12 388.37,-362.49 438,-378 451.52,-382.22 466.34,-386.23 480.03,-389.68"/>
<polygon fill="#666666" stroke="#666666" points="479.22,-393.08 489.77,-392.09 480.9,-386.29 479.22,-393.08"/>
</g>
<!-- KeyDescription&#45;&gt;ExpressionAction_execute -->
<g id="edge12" class="edge">
<title>KeyDescription&#45;&gt;ExpressionAction_execute</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M760.1,-301.03C768.33,-301.52 777.07,-302.05 785.91,-302.59"/>
<polygon fill="#666666" stroke="#666666" points="785.73,-306.08 795.92,-303.19 786.15,-299.09 785.73,-306.08"/>
</g>
<!-- addNewPart -->
<g id="node15" class="node">
<title>addNewPart</title>
<polygon fill="none" stroke="black" points="1113.5,-254 1030.5,-254 1030.5,-218 1113.5,-218 1113.5,-254"/>
<text text-anchor="middle" x="1072" y="-232.3" font-family="Times,serif" font-size="14.00">addNewPart</text>
</g>
<!-- signalReadyToRun -->
<g id="node16" class="node">
<title>signalReadyToRun</title>
<polygon fill="none" stroke="black" points="310.5,-52 189.5,-52 189.5,-16 310.5,-16 310.5,-52"/>
<text text-anchor="middle" x="250" y="-30.3" font-family="Times,serif" font-size="14.00">signalReadyToRun</text>
</g>
<!-- mergeMutateTask -->
<g id="node17" class="node">
<title>mergeMutateTask</title>
<polygon fill="none" stroke="black" points="588,-52 472,-52 472,-16 588,-16 588,-52"/>
<text text-anchor="middle" x="530" y="-30.3" font-family="Times,serif" font-size="14.00">mergeMutateTask</text>
</g>
<!-- signalReadyToRun&#45;&gt;mergeMutateTask -->
<g id="edge13" class="edge">
<title>signalReadyToRun&#45;&gt;mergeMutateTask</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M310.64,-34C354.99,-34 415.55,-34 461.64,-34"/>
<polygon fill="#666666" stroke="#666666" points="461.84,-37.5 471.84,-34 461.84,-30.5 461.84,-37.5"/>
</g>
<!-- m_write -->
<g id="node18" class="node">
<title>m_write</title>
<polygon fill="none" stroke="black" points="16,-437 16,-473 70,-473 70,-437 16,-437"/>
<text text-anchor="middle" x="43" y="-451.3" font-family="Times,serif" font-size="14.00">write</text>
</g>
<!-- m_write&#45;&gt;delayInsertOrThrowIfNeeded -->
<g id="edge14" class="edge">
<title>m_write&#45;&gt;delayInsertOrThrowIfNeeded</title>
<path fill="none" stroke="#666666" d="M49.45,-473.23C56.92,-495.24 72.33,-532.03 97.5,-554 115.38,-569.6 137.94,-581.11 160.16,-589.54"/>
<polygon fill="#666666" stroke="#666666" points="159.05,-592.86 169.64,-592.96 161.43,-586.27 159.05,-592.86"/>
</g>
<!-- m_write&#45;&gt;splitBlockIntoParts -->
<g id="edge15" class="edge">
<title>m_write&#45;&gt;splitBlockIntoParts</title>
<path fill="none" stroke="#666666" d="M69.14,-436.97C105.87,-410.64 174.29,-361.57 215.34,-332.14"/>
<polygon fill="#666666" stroke="#666666" points="217.57,-334.84 223.66,-326.17 213.49,-329.16 217.57,-334.84"/>
</g>
<!-- m_write&#45;&gt;addNewPart -->
<g id="edge16" class="edge">
<title>m_write&#45;&gt;addNewPart</title>
<path fill="none" stroke="#666666" d="M44.22,-436.89C45.61,-400.42 53.74,-317.43 97.5,-268 233.09,-114.86 324.46,-108 529,-108 529,-108 529,-108 710,-108 833.91,-108 968.69,-175.81 1032.88,-212.72"/>
<polygon fill="#666666" stroke="#666666" points="1031.42,-215.93 1041.83,-217.93 1034.94,-209.88 1031.42,-215.93"/>
</g>
<!-- m_write&#45;&gt;signalReadyToRun -->
<g id="edge17" class="edge">
<title>m_write&#45;&gt;signalReadyToRun</title>
<path fill="none" stroke="#666666" d="M44.36,-436.62C46.01,-370.82 54.69,-147.99 97.5,-94 117.56,-68.71 149.83,-54.04 179.45,-45.55"/>
<polygon fill="#666666" stroke="#666666" points="180.61,-48.87 189.37,-42.91 178.8,-42.1 180.61,-48.87"/>
</g>
<!-- writeTempPart -->
<g id="node19" class="node">
<title>writeTempPart</title>
<polygon fill="none" stroke="black" points="758,-472 660,-472 660,-436 758,-436 758,-472"/>
<text text-anchor="middle" x="709" y="-450.3" font-family="Times,serif" font-size="14.00">writeTempPart</text>
</g>
<!-- m_write&#45;&gt;writeTempPart -->
<g id="edge18" class="edge">
<title>m_write&#45;&gt;writeTempPart</title>
<path fill="none" stroke="#666666" d="M70.11,-453.24C78.82,-452.73 88.57,-452.25 97.5,-452 300.21,-446.32 540.93,-450.25 649.61,-452.59"/>
<polygon fill="#666666" stroke="#666666" points="649.64,-456.1 659.71,-452.82 649.79,-449.1 649.64,-456.1"/>
</g>
<!-- renameTempPartAndAdd -->
<g id="node20" class="node">
<title>renameTempPartAndAdd</title>
<polygon fill="none" stroke="black" points="1151,-491 993,-491 993,-455 1151,-455 1151,-491"/>
<text text-anchor="middle" x="1072" y="-469.3" font-family="Times,serif" font-size="14.00">renameTempPartAndAdd</text>
</g>
<!-- m_write&#45;&gt;renameTempPartAndAdd -->
<g id="edge19" class="edge">
<title>m_write&#45;&gt;renameTempPartAndAdd</title>
<path fill="none" stroke="#666666" d="M70.1,-455.68C129.25,-457.27 278.07,-461.51 402.5,-467 516.12,-472.01 544.32,-477.89 658,-481 703.32,-482.24 714.67,-481.58 760,-481 835.08,-480.03 920.32,-477.76 982.55,-475.88"/>
<polygon fill="#666666" stroke="#666666" points="982.84,-479.37 992.73,-475.57 982.62,-472.38 982.84,-479.37"/>
</g>
<!-- parts -->
<g id="node22" class="node">
<title>parts</title>
<polygon fill="#95e1d3" stroke="black" points="849.5,-383 849.5,-419 903.5,-419 903.5,-383 849.5,-383"/>
<text text-anchor="middle" x="876.5" y="-397.3" font-family="Times,serif" font-size="14.00">parts</text>
</g>
<!-- writeTempPart&#45;&gt;parts -->
<g id="edge22" class="edge">
<title>writeTempPart&#45;&gt;parts</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M758.06,-436.72C770.38,-432.43 783.65,-427.94 796,-424 810.07,-419.51 825.66,-414.92 839.28,-411.03"/>
<polygon fill="#666666" stroke="#666666" points="840.59,-414.3 849.25,-408.21 838.68,-407.57 840.59,-414.3"/>
</g>
<!-- part_blocks&#45;&gt;writeTempPart -->
<g id="edge21" class="edge">
<title>part_blocks&#45;&gt;writeTempPart</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M570.36,-408.83C588.65,-412.8 610.6,-418.05 630,-424 638.08,-426.48 646.51,-429.38 654.73,-432.39"/>
<polygon fill="#666666" stroke="#666666" points="653.64,-435.72 664.24,-435.94 656.1,-429.16 653.64,-435.72"/>
</g>
<!-- parts&#45;&gt;addNewPart -->
<g id="edge24" class="edge">
<title>parts&#45;&gt;addNewPart</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M903.89,-398.69C922.31,-396.02 946.77,-390.29 965,-378 1008.41,-348.73 1040.95,-295.61 1057.89,-263.3"/>
<polygon fill="#666666" stroke="#666666" points="1061.01,-264.87 1062.44,-254.38 1054.78,-261.69 1061.01,-264.87"/>
</g>
<!-- parts&#45;&gt;renameTempPartAndAdd -->
<g id="edge23" class="edge">
<title>parts&#45;&gt;renameTempPartAndAdd</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M903.52,-406.57C921.11,-410.65 944.75,-416.72 965,-424 985.73,-431.45 1007.95,-441.4 1026.67,-450.39"/>
<polygon fill="#666666" stroke="#666666" points="1025.31,-453.62 1035.84,-454.85 1028.37,-447.33 1025.31,-453.62"/>
</g>
</g>
</svg>
