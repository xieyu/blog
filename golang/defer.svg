<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: defer Pages: 1 -->
<svg width="1094pt" height="454pt"
 viewBox="0.00 0.00 1093.64 454.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 450)">
<title>defer</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-450 1089.6377,-450 1089.6377,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_deferlink</title>
<path fill="none" stroke="#000000" d="M651.2842,-194C651.2842,-194 893.291,-194 893.291,-194 899.291,-194 905.291,-200 905.291,-206 905.291,-206 905.291,-426 905.291,-426 905.291,-432 899.291,-438 893.291,-438 893.291,-438 651.2842,-438 651.2842,-438 645.2842,-438 639.2842,-432 639.2842,-426 639.2842,-426 639.2842,-206 639.2842,-206 639.2842,-200 645.2842,-194 651.2842,-194"/>
<text text-anchor="middle" x="772.2876" y="-418" font-family="Times,serif" font-size="20.00" fill="#000000">defer link list</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_paniclink</title>
<path fill="none" stroke="#000000" d="M788.4189,-8C788.4189,-8 1065.6377,-8 1065.6377,-8 1071.6377,-8 1077.6377,-14 1077.6377,-20 1077.6377,-20 1077.6377,-174 1077.6377,-174 1077.6377,-180 1071.6377,-186 1065.6377,-186 1065.6377,-186 788.4189,-186 788.4189,-186 782.4189,-186 776.4189,-180 776.4189,-174 776.4189,-174 776.4189,-20 776.4189,-20 776.4189,-14 782.4189,-8 788.4189,-8"/>
<text text-anchor="middle" x="927.0283" y="-166" font-family="Times,serif" font-size="20.00" fill="#000000">panic link list</text>
</g>
<!-- g -->
<g id="node1" class="node">
<title>g</title>
<polygon fill="none" stroke="#000000" points="510.1494,-94 510.1494,-160 611.2842,-160 611.2842,-94 510.1494,-94"/>
<text text-anchor="middle" x="560.7168" y="-144.8" font-family="Times,serif" font-size="14.00" fill="#000000">g</text>
<polyline fill="none" stroke="#000000" points="510.1494,-138 611.2842,-138 "/>
<text text-anchor="start" x="518.1494" y="-122.8" font-family="Times,serif" font-size="14.00" fill="#000000">_defer *_defer</text>
<polyline fill="none" stroke="#000000" points="510.1494,-116 611.2842,-116 "/>
<text text-anchor="start" x="518.1494" y="-100.8" font-family="Times,serif" font-size="14.00" fill="#000000">_panic *_panic</text>
</g>
<!-- defer -->
<g id="node2" class="node">
<title>defer</title>
<polygon fill="none" stroke="#000000" points="647.2842,-203 647.2842,-401 748.4189,-401 748.4189,-203 647.2842,-203"/>
<text text-anchor="middle" x="697.8516" y="-385.8" font-family="Times,serif" font-size="14.00" fill="#000000">_defer</text>
<polyline fill="none" stroke="#000000" points="647.2842,-379 748.4189,-379 "/>
<text text-anchor="start" x="655.2842" y="-363.8" font-family="Times,serif" font-size="14.00" fill="#000000">size int32 </text>
<polyline fill="none" stroke="#000000" points="647.2842,-357 748.4189,-357 "/>
<text text-anchor="start" x="655.2842" y="-341.8" font-family="Times,serif" font-size="14.00" fill="#000000">started bool </text>
<polyline fill="none" stroke="#000000" points="647.2842,-335 748.4189,-335 "/>
<text text-anchor="start" x="655.2842" y="-319.8" font-family="Times,serif" font-size="14.00" fill="#000000">heap bool </text>
<polyline fill="none" stroke="#000000" points="647.2842,-313 748.4189,-313 "/>
<text text-anchor="start" x="655.2842" y="-297.8" font-family="Times,serif" font-size="14.00" fill="#000000">sp uintptr </text>
<polyline fill="none" stroke="#000000" points="647.2842,-291 748.4189,-291 "/>
<text text-anchor="start" x="655.2842" y="-275.8" font-family="Times,serif" font-size="14.00" fill="#000000">pc uintptr</text>
<polyline fill="none" stroke="#000000" points="647.2842,-269 748.4189,-269 "/>
<text text-anchor="start" x="655.2842" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#000000">fn *funcval</text>
<polyline fill="none" stroke="#000000" points="647.2842,-247 748.4189,-247 "/>
<text text-anchor="start" x="655.2842" y="-231.8" font-family="Times,serif" font-size="14.00" fill="#000000">_panic *_panic</text>
<polyline fill="none" stroke="#000000" points="647.2842,-225 748.4189,-225 "/>
<text text-anchor="start" x="655.2842" y="-209.8" font-family="Times,serif" font-size="14.00" fill="#000000">link *_defer</text>
</g>
<!-- g&#45;&gt;defer -->
<g id="edge5" class="edge">
<title>g:_defer&#45;&gt;defer</title>
<path fill="none" stroke="#000000" d="M611.5855,-160.3113C622.2687,-171.3706 632.244,-183.9697 641.3428,-196.9874"/>
<polygon fill="#000000" stroke="#000000" points="638.6761,-199.29 647.1941,-205.5903 644.4641,-195.3532 638.6761,-199.29"/>
</g>
<!-- panic -->
<g id="node4" class="node">
<title>panic</title>
<polygon fill="none" stroke="#000000" points="784.4189,-17 784.4189,-149 909.0283,-149 909.0283,-17 784.4189,-17"/>
<text text-anchor="middle" x="846.7236" y="-133.8" font-family="Times,serif" font-size="14.00" fill="#000000">panic</text>
<polyline fill="none" stroke="#000000" points="784.4189,-127 909.0283,-127 "/>
<text text-anchor="start" x="792.4189" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#000000">argp unsafe.Pointer</text>
<polyline fill="none" stroke="#000000" points="784.4189,-105 909.0283,-105 "/>
<text text-anchor="start" x="792.4189" y="-89.8" font-family="Times,serif" font-size="14.00" fill="#000000">arg interface{}</text>
<polyline fill="none" stroke="#000000" points="784.4189,-83 909.0283,-83 "/>
<text text-anchor="start" x="792.4189" y="-67.8" font-family="Times,serif" font-size="14.00" fill="#000000">link *_panic</text>
<polyline fill="none" stroke="#000000" points="784.4189,-61 909.0283,-61 "/>
<text text-anchor="start" x="792.4189" y="-45.8" font-family="Times,serif" font-size="14.00" fill="#000000">recovered bool</text>
<polyline fill="none" stroke="#000000" points="784.4189,-39 909.0283,-39 "/>
<text text-anchor="start" x="792.4189" y="-23.8" font-family="Times,serif" font-size="14.00" fill="#000000">abort</text>
</g>
<!-- g&#45;&gt;panic -->
<g id="edge1" class="edge">
<title>g:_panic&#45;&gt;panic</title>
<path fill="none" stroke="#000000" d="M611.5195,-119.1844C656.7414,-112.2273 723.4075,-101.9713 774.2281,-94.1529"/>
<polygon fill="#000000" stroke="#000000" points="774.8184,-97.6034 784.1699,-92.6234 773.7539,-90.6847 774.8184,-97.6034"/>
</g>
<!-- defer2 -->
<g id="node3" class="node">
<title>defer2</title>
<polygon fill="none" stroke="#000000" points="796.1563,-203 796.1563,-401 897.291,-401 897.291,-203 796.1563,-203"/>
<text text-anchor="middle" x="846.7236" y="-385.8" font-family="Times,serif" font-size="14.00" fill="#000000">_defer</text>
<polyline fill="none" stroke="#000000" points="796.1563,-379 897.291,-379 "/>
<text text-anchor="start" x="804.1563" y="-363.8" font-family="Times,serif" font-size="14.00" fill="#000000">size int32 </text>
<polyline fill="none" stroke="#000000" points="796.1563,-357 897.291,-357 "/>
<text text-anchor="start" x="804.1563" y="-341.8" font-family="Times,serif" font-size="14.00" fill="#000000">started bool </text>
<polyline fill="none" stroke="#000000" points="796.1563,-335 897.291,-335 "/>
<text text-anchor="start" x="804.1563" y="-319.8" font-family="Times,serif" font-size="14.00" fill="#000000">heap bool </text>
<polyline fill="none" stroke="#000000" points="796.1563,-313 897.291,-313 "/>
<text text-anchor="start" x="804.1563" y="-297.8" font-family="Times,serif" font-size="14.00" fill="#000000">sp uintptr </text>
<polyline fill="none" stroke="#000000" points="796.1563,-291 897.291,-291 "/>
<text text-anchor="start" x="804.1563" y="-275.8" font-family="Times,serif" font-size="14.00" fill="#000000">pc uintptr</text>
<polyline fill="none" stroke="#000000" points="796.1563,-269 897.291,-269 "/>
<text text-anchor="start" x="804.1563" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#000000">fn *funcval</text>
<polyline fill="none" stroke="#000000" points="796.1563,-247 897.291,-247 "/>
<text text-anchor="start" x="804.1563" y="-231.8" font-family="Times,serif" font-size="14.00" fill="#000000">_panic *_panic</text>
<polyline fill="none" stroke="#000000" points="796.1563,-225 897.291,-225 "/>
<text text-anchor="start" x="804.1563" y="-209.8" font-family="Times,serif" font-size="14.00" fill="#000000">link *_defer</text>
</g>
<!-- defer&#45;&gt;defer2 -->
<g id="edge3" class="edge">
<title>defer&#45;&gt;defer2</title>
<path fill="none" stroke="#000000" d="M748.6685,-302C760.6453,-302 773.5323,-302 785.9002,-302"/>
<polygon fill="#000000" stroke="#000000" points="786.1357,-305.5001 796.1357,-302 786.1357,-298.5001 786.1357,-305.5001"/>
</g>
<!-- defer&#45;&gt;panic -->
<g id="edge4" class="edge">
<title>defer&#45;&gt;panic</title>
<path fill="none" stroke="#000000" d="M748.4606,-227.551C763.7832,-205.0105 780.6117,-180.2547 795.9454,-157.6979"/>
<polygon fill="#000000" stroke="#000000" points="799.0154,-159.4075 801.7427,-149.1697 793.2263,-155.4721 799.0154,-159.4075"/>
</g>
<!-- panic2 -->
<g id="node5" class="node">
<title>panic2</title>
<polygon fill="none" stroke="#000000" points="945.0283,-17 945.0283,-149 1069.6377,-149 1069.6377,-17 945.0283,-17"/>
<text text-anchor="middle" x="1007.333" y="-133.8" font-family="Times,serif" font-size="14.00" fill="#000000">panic</text>
<polyline fill="none" stroke="#000000" points="945.0283,-127 1069.6377,-127 "/>
<text text-anchor="start" x="953.0283" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#000000">argp unsafe.Pointer</text>
<polyline fill="none" stroke="#000000" points="945.0283,-105 1069.6377,-105 "/>
<text text-anchor="start" x="953.0283" y="-89.8" font-family="Times,serif" font-size="14.00" fill="#000000">arg interface{}</text>
<polyline fill="none" stroke="#000000" points="945.0283,-83 1069.6377,-83 "/>
<text text-anchor="start" x="953.0283" y="-67.8" font-family="Times,serif" font-size="14.00" fill="#000000">link *_panic</text>
<polyline fill="none" stroke="#000000" points="945.0283,-61 1069.6377,-61 "/>
<text text-anchor="start" x="953.0283" y="-45.8" font-family="Times,serif" font-size="14.00" fill="#000000">recovered bool</text>
<polyline fill="none" stroke="#000000" points="945.0283,-39 1069.6377,-39 "/>
<text text-anchor="start" x="953.0283" y="-23.8" font-family="Times,serif" font-size="14.00" fill="#000000">abort</text>
</g>
<!-- panic&#45;&gt;panic2 -->
<g id="edge2" class="edge">
<title>panic&#45;&gt;panic2</title>
<path fill="none" stroke="#000000" d="M909.2793,-83C917.6076,-83 926.204,-83 934.6854,-83"/>
<polygon fill="#000000" stroke="#000000" points="934.9481,-86.5001 944.9481,-83 934.948,-79.5001 934.9481,-86.5001"/>
</g>
<!-- newdefer -->
<g id="node6" class="node">
<title>newdefer</title>
<polygon fill="none" stroke="#000000" points="304.5767,-74.4001 304.5767,-179.5999 440.3286,-179.5999 440.3286,-74.4001 304.5767,-74.4001"/>
<text text-anchor="middle" x="372.4526" y="-164.3999" font-family="Times,serif" font-size="14.00" fill="#000000">newdefer</text>
<polyline fill="none" stroke="#000000" points="304.5767,-157.5999 440.3286,-157.5999 "/>
<text text-anchor="start" x="312.5767" y="-142.3999" font-family="Times,serif" font-size="14.00" fill="#000000">新生成defer并</text>
<text text-anchor="middle" x="372.4526" y="-122.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 插到g._defer的队首</text>
<polyline fill="none" stroke="#000000" points="304.5767,-110.4001 440.3286,-110.4001 "/>
<text text-anchor="start" x="312.5767" y="-95.2001" font-family="Times,serif" font-size="14.00" fill="#000000">d.link = gp._defer</text>
<text text-anchor="start" x="312.5767" y="-81.2001" font-family="Times,serif" font-size="14.00" fill="#000000"> gp._defer = d</text>
</g>
<!-- newdefer&#45;&gt;g -->
<g id="edge8" class="edge">
<title>newdefer&#45;&gt;g</title>
<path fill="none" stroke="#000000" d="M440.4203,-127C459.8831,-127 480.9669,-127 499.9663,-127"/>
<polygon fill="#000000" stroke="#000000" points="499.9869,-130.5001 509.9868,-127 499.9868,-123.5001 499.9869,-130.5001"/>
</g>
<!-- defer_statement -->
<g id="node7" class="node">
<title>defer_statement</title>
<polygon fill="none" stroke="#000000" points="0,-81.4001 0,-172.5999 129.1279,-172.5999 129.1279,-81.4001 0,-81.4001"/>
<text text-anchor="middle" x="64.564" y="-157.3999" font-family="Times,serif" font-size="14.00" fill="#000000">defer_statement</text>
<polyline fill="none" stroke="#000000" points="0,-150.5999 129.1279,-150.5999 "/>
<text text-anchor="start" x="8" y="-135.3999" font-family="Times,serif" font-size="14.00" fill="#000000">defer func() {...}()</text>
<polyline fill="none" stroke="#000000" points="0,-128.5999 129.1279,-128.5999 "/>
<text text-anchor="start" x="8" y="-113.3999" font-family="Times,serif" font-size="14.00" fill="#000000">defer语句被编译为</text>
<text text-anchor="start" x="8" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 对deferproc的调用</text>
</g>
<!-- deferproc -->
<g id="node10" class="node">
<title>deferproc</title>
<polygon fill="none" stroke="#000000" points="234.5708,-145 165.313,-145 165.313,-109 234.5708,-109 234.5708,-145"/>
<text text-anchor="middle" x="199.9419" y="-122.8" font-family="Times,serif" font-size="14.00" fill="#000000">deferproc</text>
</g>
<!-- defer_statement&#45;&gt;deferproc -->
<g id="edge6" class="edge">
<title>defer_statement&#45;&gt;deferproc</title>
<path fill="none" stroke="#000000" d="M129.4773,-127C138.1612,-127 146.9061,-127 155.139,-127"/>
<polygon fill="#000000" stroke="#000000" points="155.2504,-130.5001 165.2504,-127 155.2504,-123.5001 155.2504,-130.5001"/>
</g>
<!-- beforeReturnCallDefer -->
<g id="node8" class="node">
<title>beforeReturnCallDefer</title>
<polygon fill="none" stroke="#000000" points="291.7388,-355.4001 291.7388,-402.5999 453.1665,-402.5999 453.1665,-355.4001 291.7388,-355.4001"/>
<text text-anchor="start" x="299.7388" y="-387.3999" font-family="Times,serif" font-size="14.00" fill="#000000">编译器在函数的return中</text>
<text text-anchor="start" x="299.7388" y="-367.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 添加deferreturn的调用</text>
</g>
<!-- deferreturn -->
<g id="node11" class="node">
<title>deferreturn</title>
<polygon fill="none" stroke="#000000" points="599.8967,-320 521.5369,-320 521.5369,-284 599.8967,-284 599.8967,-320"/>
<text text-anchor="middle" x="560.7168" y="-297.8" font-family="Times,serif" font-size="14.00" fill="#000000">deferreturn</text>
</g>
<!-- beforeReturnCallDefer&#45;&gt;deferreturn -->
<g id="edge13" class="edge">
<title>beforeReturnCallDefer&#45;&gt;deferreturn</title>
<path fill="none" stroke="#000000" d="M449.5493,-355.3989C457.92,-352.4174 466.2586,-349.2621 474.1494,-346 489.1027,-339.8182 505.0113,-332.0872 519.0572,-324.8374"/>
<polygon fill="#000000" stroke="#000000" points="520.7517,-327.901 527.9896,-320.1639 517.5065,-321.6987 520.7517,-327.901"/>
</g>
<!-- jmpdefer -->
<g id="node9" class="node">
<title>jmpdefer</title>
<polygon fill="none" stroke="#000000" points="270.7559,-267.4001 270.7559,-336.5999 474.1494,-336.5999 474.1494,-267.4001 270.7559,-267.4001"/>
<text text-anchor="middle" x="372.4526" y="-321.3999" font-family="Times,serif" font-size="14.00" fill="#000000">jmpdefer</text>
<polyline fill="none" stroke="#000000" points="270.7559,-314.5999 474.1494,-314.5999 "/>
<text text-anchor="start" x="278.7559" y="-299.3999" font-family="Times,serif" font-size="14.00" fill="#000000">跳转执行defer 中的fn</text>
<text text-anchor="start" x="278.7559" y="-279.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 执行完毕后再跳会deferreturn ?</text>
</g>
<!-- jmpdefer&#45;&gt;deferreturn -->
<g id="edge12" class="edge">
<title>jmpdefer&#45;&gt;deferreturn</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M474.2988,-295.2702C487.1674,-295.3377 499.8424,-295.5744 511.3531,-295.9803"/>
<polygon fill="#000000" stroke="#000000" points="511.4336,-299.4865 521.569,-296.4006 511.7214,-292.4924 511.4336,-299.4865"/>
</g>
<!-- deferproc&#45;&gt;newdefer -->
<g id="edge7" class="edge">
<title>deferproc&#45;&gt;newdefer</title>
<path fill="none" stroke="#000000" d="M234.852,-127C252.0275,-127 273.4735,-127 294.2859,-127"/>
<polygon fill="#000000" stroke="#000000" points="294.4305,-130.5001 304.4305,-127 294.4304,-123.5001 294.4305,-130.5001"/>
</g>
<!-- deferreturn&#45;&gt;defer -->
<g id="edge9" class="edge">
<title>deferreturn&#45;&gt;defer</title>
<path fill="none" stroke="#000000" d="M600.0141,-302C611.6301,-302 624.6258,-302 637.2558,-302"/>
<polygon fill="#000000" stroke="#000000" points="637.2731,-305.5001 647.2731,-302 637.273,-298.5001 637.2731,-305.5001"/>
</g>
<!-- deferreturn&#45;&gt;jmpdefer -->
<g id="edge10" class="edge">
<title>deferreturn&#45;&gt;jmpdefer</title>
<path fill="none" stroke="#000000" d="M521.569,-307.5994C510.425,-308.1297 497.6979,-308.4767 484.4821,-308.6404"/>
<polygon fill="#000000" stroke="#000000" points="484.2676,-305.142 474.2988,-308.7298 484.3292,-312.1417 484.2676,-305.142"/>
</g>
<!-- freedefer -->
<g id="node12" class="node">
<title>freedefer</title>
<polygon fill="none" stroke="#000000" points="405.4584,-249 339.4469,-249 339.4469,-213 405.4584,-213 405.4584,-249"/>
<text text-anchor="middle" x="372.4526" y="-226.8" font-family="Times,serif" font-size="14.00" fill="#000000">freedefer</text>
</g>
<!-- deferreturn&#45;&gt;freedefer -->
<g id="edge11" class="edge">
<title>deferreturn&#45;&gt;freedefer</title>
<path fill="none" stroke="#000000" d="M528.9778,-283.8342C512.9141,-275.1697 492.8909,-265.1589 474.1494,-258 455.2875,-250.7951 433.7551,-244.7785 415.3745,-240.2672"/>
<polygon fill="#000000" stroke="#000000" points="416.0635,-236.8334 405.5243,-237.9178 414.4394,-243.6424 416.0635,-236.8334"/>
</g>
</g>
</svg>
