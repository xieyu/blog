<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: pgm_work_stealing Pages: 1 -->
<svg width="1069pt" height="336pt"
 viewBox="0.00 0.00 1069.40 336.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 332)">
<title>pgm_work_stealing</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-332 1065.3968,-332 1065.3968,4 -4,4"/>
<g id="clust2" class="cluster">
<title>cluster_p1</title>
<polygon fill="none" stroke="#000000" points="8,-189 8,-320 1053.3968,-320 1053.3968,-189 8,-189"/>
<text text-anchor="middle" x="530.6984" y="-300" font-family="Times,serif" font-size="20.00" fill="#000000">p</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_p2</title>
<polygon fill="none" stroke="#000000" points="760.3968,-8 760.3968,-90 830.3968,-90 830.3968,-8 760.3968,-8"/>
<text text-anchor="middle" x="795.3968" y="-70" font-family="Times,serif" font-size="20.00" fill="#000000">p</text>
</g>
<!-- sched_runq -->
<g id="node1" class="node">
<title>sched_runq</title>
<polygon fill="#95e1d3" stroke="#000000" points="954.3968,-162 882.3968,-162 878.3968,-158 878.3968,-126 950.3968,-126 954.3968,-130 954.3968,-162"/>
<polyline fill="none" stroke="#000000" points="950.3968,-158 878.3968,-158 "/>
<polyline fill="none" stroke="#000000" points="950.3968,-158 950.3968,-126 "/>
<polyline fill="none" stroke="#000000" points="950.3968,-158 954.3968,-162 "/>
<text text-anchor="middle" x="916.3968" y="-140.3" font-family="Times,serif" font-size="14.00" fill="#000000">sched.runq</text>
</g>
<!-- runqget -->
<g id="node2" class="node">
<title>runqget</title>
<polygon fill="none" stroke="#000000" points="302.3968,-197 302.3968,-243 442.3968,-243 442.3968,-197 302.3968,-197"/>
<text text-anchor="middle" x="372.3968" y="-227.8" font-family="Times,serif" font-size="14.00" fill="#000000">runqget</text>
<polyline fill="none" stroke="#000000" points="302.3968,-220 442.3968,-220 "/>
<text text-anchor="start" x="310.3968" y="-204.8" font-family="Times,serif" font-size="14.00" fill="#000000">先从本地队列中取G</text>
</g>
<!-- runq -->
<g id="node9" class="node">
<title>runq</title>
<polygon fill="#95e1d3" stroke="#000000" points="1045.3968,-242 995.3968,-242 991.3968,-238 991.3968,-206 1041.3968,-206 1045.3968,-210 1045.3968,-242"/>
<polyline fill="none" stroke="#000000" points="1041.3968,-238 991.3968,-238 "/>
<polyline fill="none" stroke="#000000" points="1041.3968,-238 1041.3968,-206 "/>
<polyline fill="none" stroke="#000000" points="1041.3968,-238 1045.3968,-242 "/>
<text text-anchor="middle" x="1018.3968" y="-220.3" font-family="Times,serif" font-size="14.00" fill="#000000">runq</text>
</g>
<!-- runqget&#45;&gt;runq -->
<g id="edge8" class="edge">
<title>runqget&#45;&gt;runq</title>
<path fill="none" stroke="#000000" d="M442.616,-215.9821C503.6019,-212.8398 594.3054,-209 673.3968,-209 673.3968,-209 673.3968,-209 916.3968,-209 938.0928,-209 962.111,-212.363 981.3882,-215.9042"/>
<polygon fill="#000000" stroke="#000000" points="980.7996,-219.3551 991.2815,-217.8123 982.1253,-212.4818 980.7996,-219.3551"/>
</g>
<!-- globalrunqget -->
<g id="node3" class="node">
<title>globalrunqget</title>
<polygon fill="none" stroke="#000000" points="615.3968,-135 615.3968,-181 731.3968,-181 731.3968,-135 615.3968,-135"/>
<text text-anchor="middle" x="673.3968" y="-165.8" font-family="Times,serif" font-size="14.00" fill="#000000">globalrunqget</text>
<polyline fill="none" stroke="#000000" points="615.3968,-158 731.3968,-158 "/>
<text text-anchor="start" x="623.3968" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#000000">从全局队列中找</text>
</g>
<!-- globalrunqget&#45;&gt;sched_runq -->
<g id="edge9" class="edge">
<title>globalrunqget&#45;&gt;sched_runq</title>
<path fill="none" stroke="#000000" d="M731.6013,-154.6467C773.362,-152.2407 828.9637,-149.0373 868.2338,-146.7748"/>
<polygon fill="#000000" stroke="#000000" points="868.5666,-150.2615 878.3487,-146.1921 868.1639,-143.2731 868.5666,-150.2615"/>
</g>
<!-- netpollready -->
<g id="node4" class="node">
<title>netpollready</title>
<polygon fill="none" stroke="#000000" points="477.8968,-85.5 477.8968,-146.5 579.8968,-146.5 579.8968,-85.5 477.8968,-85.5"/>
<text text-anchor="middle" x="528.8968" y="-131.3" font-family="Times,serif" font-size="14.00" fill="#000000">netpollready</text>
<polyline fill="none" stroke="#000000" points="477.8968,-123.5 579.8968,-123.5 "/>
<text text-anchor="start" x="485.8968" y="-108.3" font-family="Times,serif" font-size="14.00" fill="#000000">将poll ready的</text>
<text text-anchor="start" x="485.8968" y="-93.3" font-family="Times,serif" font-size="14.00" fill="#000000">放入全局队列</text>
</g>
<!-- globalrunqput -->
<g id="node13" class="node">
<title>globalrunqput</title>
<polygon fill="none" stroke="#000000" points="841.3968,-134 749.3968,-134 749.3968,-98 841.3968,-98 841.3968,-134"/>
<text text-anchor="middle" x="795.3968" y="-112.3" font-family="Times,serif" font-size="14.00" fill="#000000">globalrunqput</text>
</g>
<!-- netpollready&#45;&gt;globalrunqput -->
<g id="edge11" class="edge">
<title>netpollready&#45;&gt;globalrunqput</title>
<path fill="none" stroke="#000000" d="M579.9653,-116C625.5866,-116 692.2938,-116 739.3676,-116"/>
<polygon fill="#000000" stroke="#000000" points="739.3966,-119.5001 749.3965,-116 739.3965,-112.5001 739.3966,-119.5001"/>
</g>
<!-- runqsteal -->
<g id="node5" class="node">
<title>runqsteal</title>
<polygon fill="none" stroke="#000000" points="484.8968,-5.5 484.8968,-66.5 572.8968,-66.5 572.8968,-5.5 484.8968,-5.5"/>
<text text-anchor="middle" x="528.8968" y="-51.3" font-family="Times,serif" font-size="14.00" fill="#000000">runqsteal</text>
<polyline fill="none" stroke="#000000" points="484.8968,-43.5 572.8968,-43.5 "/>
<text text-anchor="start" x="492.8968" y="-28.3" font-family="Times,serif" font-size="14.00" fill="#000000">从其他p的q</text>
<text text-anchor="start" x="492.8968" y="-13.3" font-family="Times,serif" font-size="14.00" fill="#000000">中偷取一批</text>
</g>
<!-- runq2 -->
<g id="node14" class="node">
<title>runq2</title>
<polygon fill="#95e1d3" stroke="#000000" points="822.3968,-52 772.3968,-52 768.3968,-48 768.3968,-16 818.3968,-16 822.3968,-20 822.3968,-52"/>
<polyline fill="none" stroke="#000000" points="818.3968,-48 768.3968,-48 "/>
<polyline fill="none" stroke="#000000" points="818.3968,-48 818.3968,-16 "/>
<polyline fill="none" stroke="#000000" points="818.3968,-48 822.3968,-52 "/>
<text text-anchor="middle" x="795.3968" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">runq</text>
</g>
<!-- runqsteal&#45;&gt;runq2 -->
<g id="edge14" class="edge">
<title>runqsteal&#45;&gt;runq2</title>
<path fill="none" stroke="#000000" d="M572.9038,-35.6697C624.5536,-35.2821 709.3108,-34.646 757.9449,-34.2811"/>
<polygon fill="#000000" stroke="#000000" points="758.0663,-37.7804 768.0398,-34.2053 758.0137,-30.7805 758.0663,-37.7804"/>
</g>
<!-- go -->
<g id="node6" class="node">
<title>go</title>
<polygon fill="#f38181" stroke="#000000" points="597.3968,-281.5 460.3968,-281.5 460.3968,-228.5 597.3968,-228.5 597.3968,-281.5"/>
<text text-anchor="start" x="468.3968" y="-266.3" font-family="Times,serif" font-size="14.00" fill="#000000">go func(){..}()</text>
<text text-anchor="start" x="468.3968" y="-251.3" font-family="Times,serif" font-size="14.00" fill="#000000">新生成的go routine</text>
<text text-anchor="middle" x="528.8968" y="-236.3" font-family="Times,serif" font-size="14.00" fill="#000000">放到p的局部队列中</text>
</g>
<!-- newproc -->
<g id="node7" class="node">
<title>newproc</title>
<polygon fill="none" stroke="#000000" points="826.8968,-268 763.8968,-268 763.8968,-232 826.8968,-232 826.8968,-268"/>
<text text-anchor="middle" x="795.3968" y="-246.3" font-family="Times,serif" font-size="14.00" fill="#000000">newproc</text>
</g>
<!-- go&#45;&gt;newproc -->
<g id="edge1" class="edge">
<title>go&#45;&gt;newproc</title>
<path fill="none" stroke="#000000" d="M597.5271,-253.7124C646.8616,-252.7868 711.789,-251.5686 753.5668,-250.7848"/>
<polygon fill="#000000" stroke="#000000" points="753.7334,-254.2824 763.6659,-250.5953 753.602,-247.2836 753.7334,-254.2824"/>
</g>
<!-- runqput -->
<g id="node8" class="node">
<title>runqput</title>
<polygon fill="none" stroke="#000000" points="945.8968,-266 886.8968,-266 886.8968,-230 945.8968,-230 945.8968,-266"/>
<text text-anchor="middle" x="916.3968" y="-244.3" font-family="Times,serif" font-size="14.00" fill="#000000">runqput</text>
</g>
<!-- newproc&#45;&gt;runqput -->
<g id="edge2" class="edge">
<title>newproc&#45;&gt;runqput</title>
<path fill="none" stroke="#000000" d="M827.1881,-249.4745C842.3518,-249.2239 860.6478,-248.9215 876.7135,-248.6559"/>
<polygon fill="#000000" stroke="#000000" points="876.9528,-252.1525 886.8936,-248.4877 876.8371,-245.1535 876.9528,-252.1525"/>
</g>
<!-- runqput&#45;&gt;runq -->
<g id="edge3" class="edge">
<title>runqput&#45;&gt;runq</title>
<path fill="none" stroke="#000000" d="M945.8994,-241.0582C956.912,-238.467 969.5615,-235.4906 981.1794,-232.757"/>
<polygon fill="#000000" stroke="#000000" points="982.1238,-236.1305 991.0564,-230.433 980.5205,-229.3165 982.1238,-236.1305"/>
</g>
<!-- m -->
<g id="node10" class="node">
<title>m</title>
<ellipse fill="#f38181" stroke="#000000" cx="38.1984" cy="-219" rx="18.3625" ry="18.3625"/>
<ellipse fill="none" stroke="#000000" cx="38.1984" cy="-219" rx="22.3986" ry="22.3986"/>
<text text-anchor="middle" x="38.1984" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#000000">m</text>
</g>
<!-- schedule -->
<g id="node11" class="node">
<title>schedule</title>
<polygon fill="none" stroke="#000000" points="161.3968,-237 97.3968,-237 97.3968,-201 161.3968,-201 161.3968,-237"/>
<text text-anchor="middle" x="129.3968" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#000000">schedule</text>
</g>
<!-- m&#45;&gt;schedule -->
<g id="edge4" class="edge">
<title>m&#45;&gt;schedule</title>
<path fill="none" stroke="#000000" d="M60.7418,-219C68.7132,-219 77.9602,-219 87.0354,-219"/>
<polygon fill="#000000" stroke="#000000" points="87.1314,-222.5001 97.1313,-219 87.1313,-215.5001 87.1314,-222.5001"/>
</g>
<!-- schedule&#45;&gt;runqget -->
<g id="edge5" class="edge">
<title>schedule&#45;&gt;runqget</title>
<path fill="none" stroke="#000000" d="M161.4147,-219.1318C194.474,-219.2678 247.3665,-219.4855 291.9204,-219.6688"/>
<polygon fill="#000000" stroke="#000000" points="292.1525,-223.1697 302.1668,-219.711 292.1814,-216.1698 292.1525,-223.1697"/>
</g>
<!-- schedule&#45;&gt;globalrunqget -->
<g id="edge6" class="edge">
<title>schedule&#45;&gt;globalrunqget</title>
<path fill="none" stroke="#000000" d="M161.5147,-213.3626C196.1847,-207.4237 253.0717,-198.103 302.3968,-192 407.6909,-178.9719 530.3713,-168.6801 604.9261,-162.9669"/>
<polygon fill="#000000" stroke="#000000" points="605.4143,-166.44 615.1199,-162.1914 604.8832,-159.4602 605.4143,-166.44"/>
</g>
<!-- findrunnable -->
<g id="node12" class="node">
<title>findrunnable</title>
<polygon fill="none" stroke="#000000" points="284.3968,-134 198.3968,-134 198.3968,-98 284.3968,-98 284.3968,-134"/>
<text text-anchor="middle" x="241.3968" y="-112.3" font-family="Times,serif" font-size="14.00" fill="#000000">findrunnable</text>
</g>
<!-- schedule&#45;&gt;findrunnable -->
<g id="edge7" class="edge">
<title>schedule&#45;&gt;findrunnable</title>
<path fill="none" stroke="#000000" d="M144.4192,-200.9251C153.9831,-189.8213 166.8856,-175.5598 179.3968,-164 188.2124,-155.8547 198.3103,-147.6262 207.7614,-140.338"/>
<polygon fill="#000000" stroke="#000000" points="209.9999,-143.0331 215.8519,-134.2011 205.7694,-137.456 209.9999,-143.0331"/>
</g>
<!-- execute -->
<g id="node15" class="node">
<title>execute</title>
<polygon fill="none" stroke="#000000" points="270.3968,-278 212.3968,-278 212.3968,-242 270.3968,-242 270.3968,-278"/>
<text text-anchor="middle" x="241.3968" y="-256.3" font-family="Times,serif" font-size="14.00" fill="#000000">execute</text>
</g>
<!-- schedule&#45;&gt;execute -->
<g id="edge15" class="edge">
<title>schedule&#45;&gt;execute</title>
<path fill="none" stroke="#000000" d="M161.4915,-230.749C174.3912,-235.4712 189.3744,-240.9561 202.8571,-245.8917"/>
<polygon fill="#000000" stroke="#000000" points="201.7645,-249.2188 212.3582,-249.3698 204.1708,-242.6454 201.7645,-249.2188"/>
</g>
<!-- findrunnable&#45;&gt;netpollready -->
<g id="edge10" class="edge">
<title>findrunnable&#45;&gt;netpollready</title>
<path fill="none" stroke="#000000" d="M284.4384,-116C333.0018,-116 412.3821,-116 467.4544,-116"/>
<polygon fill="#000000" stroke="#000000" points="467.7849,-119.5001 477.7849,-116 467.7848,-112.5001 467.7849,-119.5001"/>
</g>
<!-- findrunnable&#45;&gt;runqsteal -->
<g id="edge13" class="edge">
<title>findrunnable&#45;&gt;runqsteal</title>
<path fill="none" stroke="#000000" d="M284.4384,-104.0232C335.1673,-89.9073 419.5228,-66.4345 474.6718,-51.0887"/>
<polygon fill="#000000" stroke="#000000" points="475.9191,-54.3747 484.6148,-48.3219 474.0425,-47.6309 475.9191,-54.3747"/>
</g>
<!-- globalrunqput&#45;&gt;sched_runq -->
<g id="edge12" class="edge">
<title>globalrunqput&#45;&gt;sched_runq</title>
<path fill="none" stroke="#000000" d="M841.4869,-126.6655C850.3183,-128.7091 859.5847,-130.8534 868.4723,-132.91"/>
<polygon fill="#000000" stroke="#000000" points="867.7707,-136.3401 878.3023,-135.1848 869.3489,-129.5203 867.7707,-136.3401"/>
</g>
<!-- execute&#45;&gt;go -->
<g id="edge16" class="edge">
<title>execute&#45;&gt;go</title>
<path fill="none" stroke="#000000" d="M270.546,-259.4931C312.3126,-258.7667 390.7065,-257.4033 450.2292,-256.3681"/>
<polygon fill="#000000" stroke="#000000" points="450.4218,-259.8654 460.3594,-256.192 450.3,-252.8665 450.4218,-259.8654"/>
<text text-anchor="middle" x="372.3968" y="-261.8" font-family="Times,serif" font-size="14.00" fill="#000000">go函数中新起goroutine</text>
</g>
</g>
</svg>
