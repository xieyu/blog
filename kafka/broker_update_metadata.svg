<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: broker_update_metadata Pages: 1 -->
<svg width="1127pt" height="278pt"
 viewBox="0.00 0.00 1126.55 278.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 274)">
<title>broker_update_metadata</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-274 1122.5547,-274 1122.5547,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_BrokerServer</title>
<path fill="none" stroke="#000000" d="M232.7246,-8C232.7246,-8 1099.5547,-8 1099.5547,-8 1105.5547,-8 1111.5547,-14 1111.5547,-20 1111.5547,-20 1111.5547,-250 1111.5547,-250 1111.5547,-256 1105.5547,-262 1099.5547,-262 1099.5547,-262 232.7246,-262 232.7246,-262 226.7246,-262 220.7246,-256 220.7246,-250 220.7246,-250 220.7246,-20 220.7246,-20 220.7246,-14 226.7246,-8 232.7246,-8"/>
<text text-anchor="middle" x="666.1396" y="-242" font-family="Times,serif" font-size="20.00" fill="#000000">BrokerServer</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_MetaDataCache</title>
<path fill="none" stroke="#000000" d="M971.3682,-16C971.3682,-16 1091.5547,-16 1091.5547,-16 1097.5547,-16 1103.5547,-22 1103.5547,-28 1103.5547,-28 1103.5547,-214 1103.5547,-214 1103.5547,-220 1097.5547,-226 1091.5547,-226 1091.5547,-226 971.3682,-226 971.3682,-226 965.3682,-226 959.3682,-220 959.3682,-214 959.3682,-214 959.3682,-28 959.3682,-28 959.3682,-22 965.3682,-16 971.3682,-16"/>
<text text-anchor="middle" x="1031.4614" y="-206" font-family="Times,serif" font-size="20.00" fill="#000000">MetaDataCache</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_ReplicaManager</title>
<path fill="none" stroke="#000000" d="M467.6563,-100C467.6563,-100 919.3682,-100 919.3682,-100 925.3682,-100 931.3682,-106 931.3682,-112 931.3682,-112 931.3682,-168 931.3682,-168 931.3682,-174 925.3682,-180 919.3682,-180 919.3682,-180 467.6563,-180 467.6563,-180 461.6563,-180 455.6563,-174 455.6563,-168 455.6563,-168 455.6563,-112 455.6563,-112 455.6563,-106 461.6563,-100 467.6563,-100"/>
<text text-anchor="middle" x="693.5122" y="-160" font-family="Times,serif" font-size="20.00" fill="#000000">ReplicaManager</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_KafkaApi</title>
<path fill="none" stroke="#000000" d="M240.7246,-100C240.7246,-100 423.6563,-100 423.6563,-100 429.6563,-100 435.6563,-106 435.6563,-112 435.6563,-112 435.6563,-168 435.6563,-168 435.6563,-174 429.6563,-180 423.6563,-180 423.6563,-180 240.7246,-180 240.7246,-180 234.7246,-180 228.7246,-174 228.7246,-168 228.7246,-168 228.7246,-112 228.7246,-112 228.7246,-106 234.7246,-100 240.7246,-100"/>
<text text-anchor="middle" x="332.1904" y="-160" font-family="Times,serif" font-size="20.00" fill="#000000">KafkaApi</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_Controller</title>
<path fill="none" stroke="#000000" d="M20,-100C20,-100 196.7246,-100 196.7246,-100 202.7246,-100 208.7246,-106 208.7246,-112 208.7246,-112 208.7246,-168 208.7246,-168 208.7246,-174 202.7246,-180 196.7246,-180 196.7246,-180 20,-180 20,-180 14,-180 8,-174 8,-168 8,-168 8,-112 8,-112 8,-106 14,-100 20,-100"/>
<text text-anchor="middle" x="108.3623" y="-160" font-family="Times,serif" font-size="20.00" fill="#000000">Controller</text>
</g>
<!-- StateChangeLogger -->
<g id="node1" class="node">
<title>StateChangeLogger</title>
<polygon fill="none" stroke="#000000" points="1094.6481,-190 967.2748,-190 967.2748,-154 1094.6481,-154 1094.6481,-190"/>
<text text-anchor="middle" x="1030.9614" y="-167.8" font-family="Times,serif" font-size="14.00" fill="#000000">StateChangeLogger</text>
</g>
<!-- MetadataSnapshot -->
<g id="node2" class="node">
<title>MetadataSnapshot</title>
<polygon fill="#95e1d3" stroke="#000000" points="971.251,-25 971.251,-135 1090.6719,-135 1090.6719,-25 971.251,-25"/>
<text text-anchor="middle" x="1030.9614" y="-119.8" font-family="Times,serif" font-size="14.00" fill="#000000">MetadataSnapshot</text>
<polyline fill="none" stroke="#000000" points="971.251,-113 1090.6719,-113 "/>
<text text-anchor="start" x="979.251" y="-97.8" font-family="Times,serif" font-size="14.00" fill="#000000">partitionStates</text>
<polyline fill="none" stroke="#000000" points="971.251,-91 1090.6719,-91 "/>
<text text-anchor="start" x="979.251" y="-75.8" font-family="Times,serif" font-size="14.00" fill="#000000">controllerId</text>
<polyline fill="none" stroke="#000000" points="971.251,-69 1090.6719,-69 "/>
<text text-anchor="start" x="979.251" y="-53.8" font-family="Times,serif" font-size="14.00" fill="#000000">aliveBrokers</text>
<polyline fill="none" stroke="#000000" points="971.251,-47 1090.6719,-47 "/>
<text text-anchor="start" x="979.251" y="-31.8" font-family="Times,serif" font-size="14.00" fill="#000000">aliveNodes</text>
</g>
<!-- maybeUpdateMetadataCache -->
<g id="node3" class="node">
<title>maybeUpdateMetadataCache</title>
<polygon fill="none" stroke="#000000" points="644.3678,-144 463.7523,-144 463.7523,-108 644.3678,-108 644.3678,-144"/>
<text text-anchor="middle" x="554.0601" y="-121.8" font-family="Times,serif" font-size="14.00" fill="#000000">maybeUpdateMetadataCache</text>
</g>
<!-- updateMetadata -->
<g id="node5" class="node">
<title>updateMetadata</title>
<polygon fill="none" stroke="#000000" points="786.0652,-144 680.2629,-144 680.2629,-108 786.0652,-108 786.0652,-144"/>
<text text-anchor="middle" x="733.1641" y="-121.8" font-family="Times,serif" font-size="14.00" fill="#000000">updateMetadata</text>
</g>
<!-- maybeUpdateMetadataCache&#45;&gt;updateMetadata -->
<g id="edge1" class="edge">
<title>maybeUpdateMetadataCache&#45;&gt;updateMetadata</title>
<path fill="none" stroke="#000000" d="M644.3991,-126C653.1758,-126 661.9423,-126 670.3616,-126"/>
<polygon fill="#000000" stroke="#000000" points="670.4363,-129.5001 680.4362,-126 670.4362,-122.5001 670.4363,-129.5001"/>
</g>
<!-- metadataCache -->
<g id="node4" class="node">
<title>metadataCache</title>
<polygon fill="#95e1d3" stroke="#000000" points="923.1213,-144 826.1111,-144 822.1111,-140 822.1111,-108 919.1213,-108 923.1213,-112 923.1213,-144"/>
<polyline fill="none" stroke="#000000" points="919.1213,-140 822.1111,-140 "/>
<polyline fill="none" stroke="#000000" points="919.1213,-140 919.1213,-108 "/>
<polyline fill="none" stroke="#000000" points="919.1213,-140 923.1213,-144 "/>
<text text-anchor="middle" x="872.6162" y="-121.8" font-family="Times,serif" font-size="14.00" fill="#000000">metadataCache</text>
</g>
<!-- metadataCache&#45;&gt;StateChangeLogger -->
<g id="edge3" class="edge">
<title>metadataCache&#45;&gt;StateChangeLogger</title>
<path fill="none" stroke="#000000" d="M923.153,-140.6812C934.6512,-144.0214 947.0807,-147.6323 959.2715,-151.1738"/>
<polygon fill="#000000" stroke="#000000" points="958.3953,-154.5638 968.9747,-153.9926 960.3481,-147.8417 958.3953,-154.5638"/>
</g>
<!-- metadataCache&#45;&gt;MetadataSnapshot -->
<g id="edge4" class="edge">
<title>metadataCache&#45;&gt;MetadataSnapshot</title>
<path fill="none" stroke="#000000" d="M923.153,-111.3188C935.3421,-107.7779 948.5777,-103.9328 961.466,-100.1887"/>
<polygon fill="#000000" stroke="#000000" points="962.6044,-103.5028 971.231,-97.352 960.6516,-96.7807 962.6044,-103.5028"/>
</g>
<!-- updateMetadata&#45;&gt;metadataCache -->
<g id="edge2" class="edge">
<title>updateMetadata&#45;&gt;metadataCache</title>
<path fill="none" stroke="#000000" d="M785.8849,-126C794.2198,-126 802.8999,-126 811.4082,-126"/>
<polygon fill="#000000" stroke="#000000" points="811.6665,-129.5001 821.6665,-126 811.6665,-122.5001 811.6665,-129.5001"/>
</g>
<!-- handleUpdateMetadataRequest -->
<g id="node6" class="node">
<title>handleUpdateMetadataRequest</title>
<polygon fill="none" stroke="#000000" points="427.6221,-144 236.7588,-144 236.7588,-108 427.6221,-108 427.6221,-144"/>
<text text-anchor="middle" x="332.1904" y="-121.8" font-family="Times,serif" font-size="14.00" fill="#000000">handleUpdateMetadataRequest</text>
</g>
<!-- handleUpdateMetadataRequest&#45;&gt;maybeUpdateMetadataCache -->
<g id="edge6" class="edge">
<title>handleUpdateMetadataRequest&#45;&gt;maybeUpdateMetadataCache</title>
<path fill="none" stroke="#000000" d="M427.8929,-126C436.3144,-126 444.8552,-126 453.3163,-126"/>
<polygon fill="#000000" stroke="#000000" points="453.5841,-129.5001 463.5841,-126 453.584,-122.5001 453.5841,-129.5001"/>
</g>
<!-- sendUpdateMetadataRequests -->
<g id="node7" class="node">
<title>sendUpdateMetadataRequests</title>
<polygon fill="none" stroke="#000000" points="200.5871,-144 16.1375,-144 16.1375,-108 200.5871,-108 200.5871,-144"/>
<text text-anchor="middle" x="108.3623" y="-121.8" font-family="Times,serif" font-size="14.00" fill="#000000">sendUpdateMetadataRequests</text>
</g>
<!-- sendUpdateMetadataRequests&#45;&gt;handleUpdateMetadataRequest -->
<g id="edge5" class="edge">
<title>sendUpdateMetadataRequests&#45;&gt;handleUpdateMetadataRequest</title>
<path fill="none" stroke="#000000" d="M200.694,-126C209.1762,-126 217.8134,-126 226.4022,-126"/>
<polygon fill="#000000" stroke="#000000" points="226.4505,-129.5001 236.4505,-126 226.4504,-122.5001 226.4505,-129.5001"/>
</g>
</g>
</svg>
