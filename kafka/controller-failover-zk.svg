<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: controller_failover_zk Pages: 1 -->
<svg width="1211pt" height="620pt"
 viewBox="0.00 0.00 1211.20 620.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 616)">
<title>controller_failover_zk</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-616 1207.2021,-616 1207.2021,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_controllerContext</title>
<path fill="none" stroke="#000000" d="M454.1563,-286C454.1563,-286 887.043,-286 887.043,-286 893.043,-286 899.043,-292 899.043,-298 899.043,-298 899.043,-462 899.043,-462 899.043,-468 893.043,-474 887.043,-474 887.043,-474 454.1563,-474 454.1563,-474 448.1563,-474 442.1563,-468 442.1563,-462 442.1563,-462 442.1563,-298 442.1563,-298 442.1563,-292 448.1563,-286 454.1563,-286"/>
<text text-anchor="middle" x="670.5996" y="-454" font-family="Times,serif" font-size="20.00" fill="#000000">controllerContext</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_ControllerChannelManager</title>
<path fill="none" stroke="#000000" d="M439.6123,-69C439.6123,-69 651.1279,-69 651.1279,-69 657.1279,-69 663.1279,-75 663.1279,-81 663.1279,-81 663.1279,-220 663.1279,-220 663.1279,-226 657.1279,-232 651.1279,-232 651.1279,-232 439.6123,-232 439.6123,-232 433.6123,-232 427.6123,-226 427.6123,-220 427.6123,-220 427.6123,-81 427.6123,-81 427.6123,-75 433.6123,-69 439.6123,-69"/>
<text text-anchor="middle" x="545.3701" y="-212" font-family="Times,serif" font-size="20.00" fill="#000000">ControllerChannelManager</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_replicaStateMachine</title>
<path fill="none" stroke="#000000" d="M710.6875,-100C710.6875,-100 1183.1953,-100 1183.1953,-100 1189.1953,-100 1195.1953,-106 1195.1953,-112 1195.1953,-112 1195.1953,-182 1195.1953,-182 1195.1953,-188 1189.1953,-194 1183.1953,-194 1183.1953,-194 710.6875,-194 710.6875,-194 704.6875,-194 698.6875,-188 698.6875,-182 698.6875,-182 698.6875,-112 698.6875,-112 698.6875,-106 704.6875,-100 710.6875,-100"/>
<text text-anchor="middle" x="946.9414" y="-174" font-family="Times,serif" font-size="20.00" fill="#000000">replicaStateMachine</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_PartitionStateMachine</title>
<path fill="none" stroke="#000000" d="M972.2432,-432C972.2432,-432 1183.2021,-432 1183.2021,-432 1189.2021,-432 1195.2021,-438 1195.2021,-444 1195.2021,-444 1195.2021,-556 1195.2021,-556 1195.2021,-562 1189.2021,-568 1183.2021,-568 1183.2021,-568 972.2432,-568 972.2432,-568 966.2432,-568 960.2432,-562 960.2432,-556 960.2432,-556 960.2432,-444 960.2432,-444 960.2432,-438 966.2432,-432 972.2432,-432"/>
<text text-anchor="middle" x="1077.7227" y="-548" font-family="Times,serif" font-size="20.00" fill="#000000">PartitionStateMachine</text>
</g>
<!-- liveOrShuttingDownBrokerIds -->
<g id="node1" class="node">
<title>liveOrShuttingDownBrokerIds</title>
<polygon fill="none" stroke="#000000" points="639.7983,-384 449.9419,-384 449.9419,-348 639.7983,-348 639.7983,-384"/>
<text text-anchor="middle" x="544.8701" y="-361.8" font-family="Times,serif" font-size="14.00" fill="#000000">liveOrShuttingDownBrokerIds</text>
</g>
<!-- addLiveBrokersAndEpochs -->
<g id="node2" class="node">
<title>addLiveBrokersAndEpochs</title>
<polygon fill="none" stroke="#000000" points="630.3884,-330 459.3519,-330 459.3519,-294 630.3884,-294 630.3884,-330"/>
<text text-anchor="middle" x="544.8701" y="-307.8" font-family="Times,serif" font-size="14.00" fill="#000000">addLiveBrokersAndEpochs</text>
</g>
<!-- removeLiveBrokers -->
<g id="node3" class="node">
<title>removeLiveBrokers</title>
<polygon fill="none" stroke="#000000" points="608.8291,-438 480.9111,-438 480.9111,-402 608.8291,-402 608.8291,-438"/>
<text text-anchor="middle" x="544.8701" y="-415.8" font-family="Times,serif" font-size="14.00" fill="#000000">removeLiveBrokers</text>
</g>
<!-- replicasOnBrokers -->
<g id="node4" class="node">
<title>replicasOnBrokers</title>
<polygon fill="none" stroke="#000000" points="875.8467,-330 754.915,-330 754.915,-294 875.8467,-294 875.8467,-330"/>
<text text-anchor="middle" x="815.3809" y="-307.8" font-family="Times,serif" font-size="14.00" fill="#000000">replicasOnBrokers</text>
</g>
<!-- replicasOnOfflineDirs -->
<g id="node5" class="node">
<title>replicasOnOfflineDirs</title>
<polygon fill="none" stroke="#000000" points="885.7955,-384 744.9662,-384 744.9662,-348 885.7955,-348 885.7955,-384"/>
<text text-anchor="middle" x="815.3809" y="-361.8" font-family="Times,serif" font-size="14.00" fill="#000000">replicasOnOfflineDirs</text>
</g>
<!-- shuttingDownBrokerIds -->
<g id="node6" class="node">
<title>shuttingDownBrokerIds</title>
<polygon fill="none" stroke="#000000" points="891.2054,-438 739.5563,-438 739.5563,-402 891.2054,-402 891.2054,-438"/>
<text text-anchor="middle" x="815.3809" y="-415.8" font-family="Times,serif" font-size="14.00" fill="#000000">shuttingDownBrokerIds</text>
</g>
<!-- controllerChannelManager_removeBroker -->
<g id="node7" class="node">
<title>controllerChannelManager_removeBroker</title>
<polygon fill="none" stroke="#000000" points="469.6011,-146.2 469.6011,-195.8 620.1392,-195.8 620.1392,-146.2 469.6011,-146.2"/>
<text text-anchor="middle" x="544.8701" y="-180.6" font-family="Times,serif" font-size="14.00" fill="#000000">removeBroker</text>
<polyline fill="none" stroke="#000000" points="469.6011,-173.8 620.1392,-173.8 "/>
<text text-anchor="start" x="477.6011" y="-158.6" font-family="Times,serif" font-size="14.00" fill="#000000">删掉挂掉的broker通信</text>
</g>
<!-- controllerChannelManager_addBroker -->
<g id="node8" class="node">
<title>controllerChannelManager_addBroker</title>
<polygon fill="none" stroke="#000000" points="451.6123,-77.2 451.6123,-126.8 638.1279,-126.8 638.1279,-77.2 451.6123,-77.2"/>
<text text-anchor="middle" x="544.8701" y="-111.6" font-family="Times,serif" font-size="14.00" fill="#000000">addBroker</text>
<polyline fill="none" stroke="#000000" points="451.6123,-104.8 638.1279,-104.8 "/>
<text text-anchor="start" x="459.6123" y="-89.6" font-family="Times,serif" font-size="14.00" fill="#000000">新增broker, 创建通信channel</text>
</g>
<!-- replicaStateMachine_handleStateChanges_OnlineReplica -->
<g id="node9" class="node">
<title>replicaStateMachine_handleStateChanges_OnlineReplica</title>
<polygon fill="none" stroke="#000000" points="706.6875,-108.2 706.6875,-157.8 924.0742,-157.8 924.0742,-108.2 706.6875,-108.2"/>
<text text-anchor="middle" x="815.3809" y="-142.6" font-family="Times,serif" font-size="14.00" fill="#000000">handleStateChanges_OnlineReplica</text>
<polyline fill="none" stroke="#000000" points="706.6875,-135.8 924.0742,-135.8 "/>
<text text-anchor="middle" x="815.3809" y="-120.6" font-family="Times,serif" font-size="14.00" fill="#000000">将副本设置为在线状态</text>
</g>
<!-- replicaStateMachine_handleStateChanges_OfflineReplica -->
<g id="node10" class="node">
<title>replicaStateMachine_handleStateChanges_OfflineReplica</title>
<polygon fill="none" stroke="#000000" points="968.25,-108.2 968.25,-157.8 1187.1953,-157.8 1187.1953,-108.2 968.25,-108.2"/>
<text text-anchor="middle" x="1077.7227" y="-142.6" font-family="Times,serif" font-size="14.00" fill="#000000">handleStateChanges_OfflineReplica</text>
<polyline fill="none" stroke="#000000" points="968.25,-135.8 1187.1953,-135.8 "/>
<text text-anchor="middle" x="1077.7227" y="-120.6" font-family="Times,serif" font-size="14.00" fill="#000000">将副本设置为离线状态</text>
</g>
<!-- triggerOnlinePartitionStateChange -->
<g id="node11" class="node">
<title>triggerOnlinePartitionStateChange</title>
<polygon fill="none" stroke="#000000" points="1183.1234,-476 972.3219,-476 972.3219,-440 1183.1234,-440 1183.1234,-476"/>
<text text-anchor="middle" x="1077.7227" y="-453.8" font-family="Times,serif" font-size="14.00" fill="#000000">triggerOnlinePartitionStateChange</text>
</g>
<!-- partitionStateMachine_handleStateChange_OfflinePartition -->
<g id="node12" class="node">
<title>partitionStateMachine_handleStateChange_OfflinePartition</title>
<polygon fill="none" stroke="#000000" points="968.2432,-495 968.2432,-531 1187.2021,-531 1187.2021,-495 968.2432,-495"/>
<text text-anchor="middle" x="1077.7227" y="-508.8" font-family="Times,serif" font-size="14.00" fill="#000000">handleStateChange_OfflinePartition</text>
</g>
<!-- onControllerFailover -->
<g id="node13" class="node">
<title>onControllerFailover</title>
<polygon fill="none" stroke="#000000" points="137.3971,-357 2.9964,-357 2.9964,-321 137.3971,-321 137.3971,-357"/>
<text text-anchor="middle" x="70.1968" y="-334.8" font-family="Times,serif" font-size="14.00" fill="#000000">onControllerFailover</text>
</g>
<!-- registerZNodeChildChangeHandler -->
<g id="node14" class="node">
<title>registerZNodeChildChangeHandler</title>
<polygon fill="none" stroke="#000000" points="392.1358,-357 176.4794,-357 176.4794,-321 392.1358,-321 392.1358,-357"/>
<text text-anchor="middle" x="284.3076" y="-334.8" font-family="Times,serif" font-size="14.00" fill="#000000">registerZNodeChildChangeHandler</text>
</g>
<!-- onControllerFailover&#45;&gt;registerZNodeChildChangeHandler -->
<g id="edge1" class="edge">
<title>onControllerFailover&#45;&gt;registerZNodeChildChangeHandler</title>
<path fill="none" stroke="#000000" d="M137.3553,-339C146.5485,-339 156.1998,-339 165.9779,-339"/>
<polygon fill="#000000" stroke="#000000" points="166.1998,-342.5001 176.1998,-339 166.1998,-335.5001 166.1998,-342.5001"/>
</g>
<!-- brokerChangeHandler -->
<g id="node15" class="node">
<title>brokerChangeHandler</title>
<polygon fill="none" stroke="#000000" points="140.5909,-303 -.1973,-303 -.1973,-267 140.5909,-267 140.5909,-303"/>
<text text-anchor="middle" x="70.1968" y="-280.8" font-family="Times,serif" font-size="14.00" fill="#000000">brokerChangeHandler</text>
</g>
<!-- processBrokerChange -->
<g id="node16" class="node">
<title>processBrokerChange</title>
<polygon fill="none" stroke="#000000" points="353.936,-303 214.6792,-303 214.6792,-267 353.936,-267 353.936,-303"/>
<text text-anchor="middle" x="284.3076" y="-280.8" font-family="Times,serif" font-size="14.00" fill="#000000">processBrokerChange</text>
</g>
<!-- brokerChangeHandler&#45;&gt;processBrokerChange -->
<g id="edge2" class="edge">
<title>brokerChangeHandler&#45;&gt;processBrokerChange</title>
<path fill="none" stroke="#000000" d="M140.6012,-285C161.0265,-285 183.476,-285 204.4366,-285"/>
<polygon fill="#000000" stroke="#000000" points="204.5914,-288.5001 214.5914,-285 204.5914,-281.5001 204.5914,-288.5001"/>
</g>
<!-- processBrokerChange&#45;&gt;liveOrShuttingDownBrokerIds -->
<g id="edge3" class="edge">
<title>processBrokerChange&#45;&gt;liveOrShuttingDownBrokerIds</title>
<path fill="none" stroke="#000000" d="M353.9923,-298.0046C367.0327,-301.6651 380.3006,-306.2644 392.2217,-312 410.0495,-320.5776 409.7044,-330.5908 427.6123,-339 431.7664,-340.9507 436.071,-342.7654 440.4697,-344.4531"/>
<polygon fill="#000000" stroke="#000000" points="439.6333,-347.8712 450.2278,-347.9484 441.9939,-341.2812 439.6333,-347.8712"/>
</g>
<!-- processBrokerChange&#45;&gt;addLiveBrokersAndEpochs -->
<g id="edge4" class="edge">
<title>processBrokerChange&#45;&gt;addLiveBrokersAndEpochs</title>
<path fill="none" stroke="#000000" d="M354.1336,-292.2355C383.2428,-295.2519 417.5258,-298.8043 448.9395,-302.0595"/>
<polygon fill="#000000" stroke="#000000" points="448.7202,-305.5554 459.0277,-303.1048 449.4417,-298.5927 448.7202,-305.5554"/>
</g>
<!-- processBrokerChange&#45;&gt;removeLiveBrokers -->
<g id="edge5" class="edge">
<title>processBrokerChange&#45;&gt;removeLiveBrokers</title>
<path fill="none" stroke="#000000" d="M354.1186,-292.6256C367.8731,-296.705 381.3834,-302.8336 392.2217,-312 422.2183,-337.3695 397.3779,-367.9143 427.6123,-393 439.8112,-403.1215 455.0801,-409.615 470.5274,-413.7419"/>
<polygon fill="#000000" stroke="#000000" points="470.1382,-417.2458 480.6738,-416.1266 471.7398,-410.4314 470.1382,-417.2458"/>
</g>
<!-- processBrokerChange&#45;&gt;controllerChannelManager_removeBroker -->
<g id="edge6" class="edge">
<title>processBrokerChange&#45;&gt;controllerChannelManager_removeBroker</title>
<path fill="none" stroke="#000000" d="M325.5945,-266.9364C366.6263,-248.9843 430.2179,-221.1621 478.3739,-200.0931"/>
<polygon fill="#000000" stroke="#000000" points="480.0294,-203.1892 487.788,-195.9743 477.2235,-196.7761 480.0294,-203.1892"/>
</g>
<!-- processBrokerChange&#45;&gt;controllerChannelManager_addBroker -->
<g id="edge7" class="edge">
<title>processBrokerChange&#45;&gt;controllerChannelManager_addBroker</title>
<path fill="none" stroke="#000000" d="M297.1046,-266.6084C319.7958,-235.36 370.1416,-171.9037 427.6123,-137 432.2654,-134.1741 437.1618,-131.5632 442.2062,-129.1526"/>
<polygon fill="#000000" stroke="#000000" points="443.7275,-132.3064 451.4254,-125.0267 440.868,-125.917 443.7275,-132.3064"/>
</g>
<!-- getAllBrokerAndEpochsInCluster -->
<g id="node17" class="node">
<title>getAllBrokerAndEpochsInCluster</title>
<polygon fill="none" stroke="#000000" points="648.6672,-59 441.073,-59 441.073,-23 648.6672,-23 648.6672,-59"/>
<text text-anchor="middle" x="544.8701" y="-36.8" font-family="Times,serif" font-size="14.00" fill="#000000">getAllBrokerAndEpochsInCluster</text>
</g>
<!-- processBrokerChange&#45;&gt;getAllBrokerAndEpochsInCluster -->
<g id="edge8" class="edge">
<title>processBrokerChange&#45;&gt;getAllBrokerAndEpochsInCluster</title>
<path fill="none" stroke="#000000" d="M290.4703,-266.9964C306.053,-224.3653 351.3082,-116.9417 427.6123,-65 429.0589,-64.0152 430.5373,-63.0693 432.0437,-62.1607"/>
<polygon fill="#000000" stroke="#000000" points="433.8136,-65.1828 440.953,-57.3546 430.4902,-59.022 433.8136,-65.1828"/>
</g>
<!-- onBrokerStartup -->
<g id="node18" class="node">
<title>onBrokerStartup</title>
<polygon fill="none" stroke="#000000" points="599.688,-276 490.0523,-276 490.0523,-240 599.688,-240 599.688,-276"/>
<text text-anchor="middle" x="544.8701" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#000000">onBrokerStartup</text>
</g>
<!-- processBrokerChange&#45;&gt;onBrokerStartup -->
<g id="edge9" class="edge">
<title>processBrokerChange&#45;&gt;onBrokerStartup</title>
<path fill="none" stroke="#000000" d="M354.1336,-277.7645C393.2951,-273.7065 441.8207,-268.6782 480.1258,-264.7089"/>
<polygon fill="#000000" stroke="#000000" points="480.5501,-268.1838 490.136,-263.6717 479.8285,-261.2211 480.5501,-268.1838"/>
</g>
<!-- onBrokerFailure -->
<g id="node19" class="node">
<title>onBrokerFailure</title>
<polygon fill="none" stroke="#000000" points="598.9024,-518 490.8379,-518 490.8379,-482 598.9024,-482 598.9024,-518"/>
<text text-anchor="middle" x="544.8701" y="-495.8" font-family="Times,serif" font-size="14.00" fill="#000000">onBrokerFailure</text>
</g>
<!-- processBrokerChange&#45;&gt;onBrokerFailure -->
<g id="edge10" class="edge">
<title>processBrokerChange&#45;&gt;onBrokerFailure</title>
<path fill="none" stroke="#000000" d="M354.2154,-290.6131C368.3743,-294.7715 382.0269,-301.4408 392.2217,-312 444.6182,-366.2694 373.6194,-425.3186 427.6123,-478 441.6884,-491.7342 461.4534,-498.3069 480.7509,-501.1411"/>
<polygon fill="#000000" stroke="#000000" points="480.4309,-504.6273 490.767,-502.3005 481.2359,-497.6738 480.4309,-504.6273"/>
</g>
<!-- onBrokerStartup&#45;&gt;replicasOnBrokers -->
<g id="edge11" class="edge">
<title>onBrokerStartup&#45;&gt;replicasOnBrokers</title>
<path fill="none" stroke="#000000" d="M599.612,-268.9277C641.3786,-277.2653 699.2499,-288.8177 744.5451,-297.8596"/>
<polygon fill="#000000" stroke="#000000" points="744.1023,-301.3402 754.594,-299.8656 745.4726,-294.4756 744.1023,-301.3402"/>
</g>
<!-- onBrokerStartup&#45;&gt;replicaStateMachine_handleStateChanges_OnlineReplica -->
<g id="edge12" class="edge">
<title>onBrokerStartup&#45;&gt;replicaStateMachine_handleStateChanges_OnlineReplica</title>
<path fill="none" stroke="#000000" d="M599.7549,-255.7376C620.7332,-252.9 644.1529,-247.1956 663.1279,-236 684.4455,-223.4222 679.2451,-208.5299 698.5186,-193 712.9032,-181.4094 729.8844,-171.1466 746.3791,-162.5319"/>
<polygon fill="#000000" stroke="#000000" points="748.1392,-165.5637 755.4731,-157.9175 744.9717,-159.3213 748.1392,-165.5637"/>
</g>
<!-- onBrokerStartup&#45;&gt;triggerOnlinePartitionStateChange -->
<g id="edge13" class="edge">
<title>onBrokerStartup&#45;&gt;triggerOnlinePartitionStateChange</title>
<path fill="none" stroke="#000000" d="M599.6584,-256.1156C692.3737,-253.7918 875.6503,-253.1841 932.2432,-282 996.672,-314.8059 1043.1369,-390.1956 1064.5333,-430.844"/>
<polygon fill="#000000" stroke="#000000" points="1061.5087,-432.6158 1069.1923,-439.9105 1067.7347,-429.4164 1061.5087,-432.6158"/>
</g>
<!-- sendUpdateMetadataRequest -->
<g id="node20" class="node">
<title>sendUpdateMetadataRequest</title>
<polygon fill="none" stroke="#000000" points="905.1574,-238 725.6043,-238 725.6043,-202 905.1574,-202 905.1574,-238"/>
<text text-anchor="middle" x="815.3809" y="-215.8" font-family="Times,serif" font-size="14.00" fill="#000000">sendUpdateMetadataRequest</text>
</g>
<!-- onBrokerStartup&#45;&gt;sendUpdateMetadataRequest -->
<g id="edge14" class="edge">
<title>onBrokerStartup&#45;&gt;sendUpdateMetadataRequest</title>
<path fill="none" stroke="#000000" d="M599.612,-250.3101C632.7742,-245.6517 676.089,-239.567 715.2005,-234.0728"/>
<polygon fill="#000000" stroke="#000000" points="716.1589,-237.4727 725.5748,-232.6155 715.1851,-230.5407 716.1589,-237.4727"/>
</g>
<!-- maybeResumeReassignments -->
<g id="node21" class="node">
<title>maybeResumeReassignments</title>
<polygon fill="none" stroke="#000000" points="906.7954,-90 723.9663,-90 723.9663,-54 906.7954,-54 906.7954,-90"/>
<text text-anchor="middle" x="815.3809" y="-67.8" font-family="Times,serif" font-size="14.00" fill="#000000">maybeResumeReassignments</text>
</g>
<!-- onBrokerStartup&#45;&gt;maybeResumeReassignments -->
<g id="edge15" class="edge">
<title>onBrokerStartup&#45;&gt;maybeResumeReassignments</title>
<path fill="none" stroke="#000000" d="M599.7414,-260.0597C621.966,-258.0471 646.2997,-251.7894 663.1279,-236 709.9312,-192.0857 652.1262,-140.3481 698.5186,-96 703.4475,-91.2882 709.0415,-87.3914 715.0478,-84.1778"/>
<polygon fill="#000000" stroke="#000000" points="716.5345,-87.3465 724.1135,-79.9432 713.5719,-81.0043 716.5345,-87.3465"/>
</g>
<!-- registerBrokerModificationsHandler -->
<g id="node22" class="node">
<title>registerBrokerModificationsHandler</title>
<polygon fill="none" stroke="#000000" points="925.1056,-36 705.6561,-36 705.6561,0 925.1056,0 925.1056,-36"/>
<text text-anchor="middle" x="815.3809" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">registerBrokerModificationsHandler</text>
</g>
<!-- onBrokerStartup&#45;&gt;registerBrokerModificationsHandler -->
<g id="edge16" class="edge">
<title>onBrokerStartup&#45;&gt;registerBrokerModificationsHandler</title>
<path fill="none" stroke="#000000" d="M599.6371,-260.6279C622.1138,-258.7673 646.6691,-252.4707 663.1279,-236 724.1532,-174.9308 638.8241,-107.3707 698.5186,-45 699.3104,-44.1726 700.1222,-43.3683 700.9527,-42.5865"/>
<polygon fill="#000000" stroke="#000000" points="703.3377,-45.1586 708.8989,-36.1406 698.9278,-39.7223 703.3377,-45.1586"/>
</g>
<!-- onBrokerFailure&#45;&gt;replicasOnBrokers -->
<g id="edge17" class="edge">
<title>onBrokerFailure&#45;&gt;replicasOnBrokers</title>
<path fill="none" stroke="#000000" d="M599.1255,-502.0994C621.5096,-500.1432 646.1338,-493.9178 663.1279,-478 709.6543,-434.4202 652.9426,-383.5728 698.5186,-339 710.9632,-326.8293 727.7412,-319.728 744.6957,-315.6832"/>
<polygon fill="#000000" stroke="#000000" points="745.5735,-319.0762 754.6672,-313.6397 744.1681,-312.2187 745.5735,-319.0762"/>
</g>
<!-- onBrokerFailure&#45;&gt;replicasOnOfflineDirs -->
<g id="edge18" class="edge">
<title>onBrokerFailure&#45;&gt;replicasOnOfflineDirs</title>
<path fill="none" stroke="#000000" d="M598.9616,-500.791C620.9217,-498.5394 645.2674,-492.446 663.1279,-478 694.9448,-452.2657 667.2639,-419.4143 698.5186,-393 709.0127,-384.131 721.861,-378.0403 735.1526,-373.8848"/>
<polygon fill="#000000" stroke="#000000" points="736.1797,-377.2321 744.8819,-371.1889 734.3104,-370.4863 736.1797,-377.2321"/>
</g>
<!-- onBrokerFailure&#45;&gt;shuttingDownBrokerIds -->
<g id="edge19" class="edge">
<title>onBrokerFailure&#45;&gt;shuttingDownBrokerIds</title>
<path fill="none" stroke="#000000" d="M598.9119,-492.054C619.2324,-488.5171 642.4204,-483.8192 663.1279,-478 697.6241,-468.306 735.2619,-454.0036 764.4852,-442.0274"/>
<polygon fill="#000000" stroke="#000000" points="766.1556,-445.124 774.0564,-438.0651 763.4781,-438.6563 766.1556,-445.124"/>
</g>
<!-- onReplicasBecomeOffline -->
<g id="node23" class="node">
<title>onReplicasBecomeOffline</title>
<polygon fill="none" stroke="#000000" points="897.1193,-572 733.6424,-572 733.6424,-536 897.1193,-536 897.1193,-572"/>
<text text-anchor="middle" x="815.3809" y="-549.8" font-family="Times,serif" font-size="14.00" fill="#000000">onReplicasBecomeOffline</text>
</g>
<!-- onBrokerFailure&#45;&gt;onReplicasBecomeOffline -->
<g id="edge20" class="edge">
<title>onBrokerFailure&#45;&gt;onReplicasBecomeOffline</title>
<path fill="none" stroke="#000000" d="M598.9619,-510.7979C634.5755,-517.9072 682.1026,-527.3947 723.5456,-535.6676"/>
<polygon fill="#000000" stroke="#000000" points="722.8946,-539.1066 733.3863,-537.632 724.2649,-532.2421 722.8946,-539.1066"/>
</g>
<!-- unregisterBrokerModificationsHandler -->
<g id="node24" class="node">
<title>unregisterBrokerModificationsHandler</title>
<polygon fill="none" stroke="#000000" points="932.1056,-518 698.6561,-518 698.6561,-482 932.1056,-482 932.1056,-518"/>
<text text-anchor="middle" x="815.3809" y="-495.8" font-family="Times,serif" font-size="14.00" fill="#000000">unregisterBrokerModificationsHandler</text>
</g>
<!-- onBrokerFailure&#45;&gt;unregisterBrokerModificationsHandler -->
<g id="edge21" class="edge">
<title>onBrokerFailure&#45;&gt;unregisterBrokerModificationsHandler</title>
<path fill="none" stroke="#000000" d="M598.9619,-500C624.7698,-500 656.8339,-500 688.3053,-500"/>
<polygon fill="#000000" stroke="#000000" points="688.4939,-503.5001 698.4938,-500 688.4938,-496.5001 688.4939,-503.5001"/>
</g>
<!-- onReplicasBecomeOffline&#45;&gt;replicaStateMachine_handleStateChanges_OfflineReplica -->
<g id="edge22" class="edge">
<title>onReplicasBecomeOffline&#45;&gt;replicaStateMachine_handleStateChanges_OfflineReplica</title>
<path fill="none" stroke="#000000" d="M897.4006,-546.8293C910.2754,-542.5732 922.5183,-536.2636 932.2432,-527 965.3519,-495.4616 945.5425,-471.2984 960.2432,-428 992.8456,-331.9746 1039.2539,-221.629 1062.7928,-167.1261"/>
<polygon fill="#000000" stroke="#000000" points="1066.0139,-168.4952 1066.7774,-157.9279 1059.5907,-165.7126 1066.0139,-168.4952"/>
</g>
<!-- onReplicasBecomeOffline&#45;&gt;triggerOnlinePartitionStateChange -->
<g id="edge23" class="edge">
<title>onReplicasBecomeOffline&#45;&gt;triggerOnlinePartitionStateChange</title>
<path fill="none" stroke="#000000" d="M897.2434,-543.3405C909.6298,-539.4487 921.755,-534.1652 932.2432,-527 950.4633,-514.5526 942.0661,-498.5104 960.2432,-486 963.0066,-484.098 965.8836,-482.3245 968.849,-480.6706"/>
<polygon fill="#000000" stroke="#000000" points="970.635,-483.6898 977.9858,-476.0597 967.4813,-477.4404 970.635,-483.6898"/>
</g>
<!-- onReplicasBecomeOffline&#45;&gt;partitionStateMachine_handleStateChange_OfflinePartition -->
<g id="edge24" class="edge">
<title>onReplicasBecomeOffline&#45;&gt;partitionStateMachine_handleStateChange_OfflinePartition</title>
<path fill="none" stroke="#000000" d="M897.3083,-541.196C916.5589,-538.1874 937.4648,-534.9201 957.9941,-531.7117"/>
<polygon fill="#000000" stroke="#000000" points="958.6933,-535.145 968.0329,-530.1428 957.6124,-528.229 958.6933,-535.145"/>
</g>
<!-- partitionsWithoutLeader -->
<g id="node25" class="node">
<title>partitionsWithoutLeader</title>
<polygon fill="none" stroke="#000000" points="1154.2901,-612 1001.1553,-612 1001.1553,-576 1154.2901,-576 1154.2901,-612"/>
<text text-anchor="middle" x="1077.7227" y="-589.8" font-family="Times,serif" font-size="14.00" fill="#000000">partitionsWithoutLeader</text>
</g>
<!-- onReplicasBecomeOffline&#45;&gt;partitionsWithoutLeader -->
<g id="edge25" class="edge">
<title>onReplicasBecomeOffline&#45;&gt;partitionsWithoutLeader</title>
<path fill="none" stroke="#000000" d="M897.3083,-566.4917C927.024,-571.0225 960.6839,-576.1548 990.8142,-580.7488"/>
<polygon fill="#000000" stroke="#000000" points="990.4729,-584.2372 1000.8862,-582.2845 991.5281,-577.3171 990.4729,-584.2372"/>
</g>
</g>
</svg>
