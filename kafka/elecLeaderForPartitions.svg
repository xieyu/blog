<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: electLeaderForPartitions Pages: 1 -->
<svg width="1325pt" height="772pt"
 viewBox="0.00 0.00 1325.29 772.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 768)">
<title>electLeaderForPartitions</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-768 1321.2852,-768 1321.2852,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_zkClient</title>
<path fill="none" stroke="#000000" d="M247.4033,-258C247.4033,-258 411.5088,-258 411.5088,-258 417.5088,-258 423.5088,-264 423.5088,-270 423.5088,-270 423.5088,-326 423.5088,-326 423.5088,-332 417.5088,-338 411.5088,-338 411.5088,-338 247.4033,-338 247.4033,-338 241.4033,-338 235.4033,-332 235.4033,-326 235.4033,-326 235.4033,-270 235.4033,-270 235.4033,-264 241.4033,-258 247.4033,-258"/>
<text text-anchor="middle" x="329.4561" y="-318" font-family="Times,serif" font-size="20.00" fill="#000000">zkClient</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_ControllerContext</title>
<path fill="none" stroke="#000000" d="M509.9912,-62C509.9912,-62 1297.2852,-62 1297.2852,-62 1303.2852,-62 1309.2852,-68 1309.2852,-74 1309.2852,-74 1309.2852,-238 1309.2852,-238 1309.2852,-244 1303.2852,-250 1297.2852,-250 1297.2852,-250 509.9912,-250 509.9912,-250 503.9912,-250 497.9912,-244 497.9912,-238 497.9912,-238 497.9912,-74 497.9912,-74 497.9912,-68 503.9912,-62 509.9912,-62"/>
<text text-anchor="middle" x="903.6382" y="-230" font-family="Times,serif" font-size="20.00" fill="#000000">ControllerContext</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_Election</title>
<path fill="none" stroke="#000000" d="M240.3008,-8C240.3008,-8 418.6113,-8 418.6113,-8 424.6113,-8 430.6113,-14 430.6113,-20 430.6113,-20 430.6113,-238 430.6113,-238 430.6113,-244 424.6113,-250 418.6113,-250 418.6113,-250 240.3008,-250 240.3008,-250 234.3008,-250 228.3008,-244 228.3008,-238 228.3008,-238 228.3008,-20 228.3008,-20 228.3008,-14 234.3008,-8 240.3008,-8"/>
<text text-anchor="middle" x="329.4561" y="-230" font-family="Times,serif" font-size="20.00" fill="#000000">Election</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_PartitionStateMachine</title>
<path fill="none" stroke="#000000" d="M20,-346C20,-346 739.4502,-346 739.4502,-346 745.4502,-346 751.4502,-352 751.4502,-358 751.4502,-358 751.4502,-744 751.4502,-744 751.4502,-750 745.4502,-756 739.4502,-756 739.4502,-756 20,-756 20,-756 14,-756 8,-750 8,-744 8,-744 8,-358 8,-358 8,-352 14,-346 20,-346"/>
<text text-anchor="middle" x="379.7251" y="-736" font-family="Times,serif" font-size="20.00" fill="#000000">PartitionStateMachine</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_leaderStrategy</title>
<path fill="none" stroke="#000000" d="M476.1807,-354C476.1807,-354 731.4502,-354 731.4502,-354 737.4502,-354 743.4502,-360 743.4502,-366 743.4502,-366 743.4502,-708 743.4502,-708 743.4502,-714 737.4502,-720 731.4502,-720 731.4502,-720 476.1807,-720 476.1807,-720 470.1807,-720 464.1807,-714 464.1807,-708 464.1807,-708 464.1807,-366 464.1807,-366 464.1807,-360 470.1807,-354 476.1807,-354"/>
<text text-anchor="middle" x="603.8154" y="-700" font-family="Times,serif" font-size="20.00" fill="#000000">leader选举策略</text>
</g>
<!-- getTopicPartitionStatesRaw -->
<g id="node1" class="node">
<title>getTopicPartitionStatesRaw</title>
<polygon fill="none" stroke="#000000" points="415.5616,-302 243.3506,-302 243.3506,-266 415.5616,-266 415.5616,-302"/>
<text text-anchor="middle" x="329.4561" y="-279.8" font-family="Times,serif" font-size="14.00" fill="#000000">getTopicPartitionStatesRaw</text>
</g>
<!-- partitionReplicaAssignment -->
<g id="node2" class="node">
<title>partitionReplicaAssignment</title>
<polygon fill="none" stroke="#000000" points="690.3985,-106 517.2324,-106 517.2324,-70 690.3985,-70 690.3985,-106"/>
<text text-anchor="middle" x="603.8154" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">partitionReplicaAssignment</text>
</g>
<!-- partitionFullReplicaAssignment -->
<g id="node3" class="node">
<title>partitionFullReplicaAssignment</title>
<polygon fill="none" stroke="#000000" points="701.4642,-214 506.1667,-214 506.1667,-178 701.4642,-178 701.4642,-214"/>
<text text-anchor="middle" x="603.8154" y="-191.8" font-family="Times,serif" font-size="14.00" fill="#000000">partitionFullReplicaAssignment</text>
</g>
<!-- isReplicaOnline -->
<g id="node4" class="node">
<title>isReplicaOnline</title>
<polygon fill="none" stroke="#000000" points="657.0158,-160 550.615,-160 550.615,-124 657.0158,-124 657.0158,-160"/>
<text text-anchor="middle" x="603.8154" y="-137.8" font-family="Times,serif" font-size="14.00" fill="#000000">isReplicaOnline</text>
</g>
<!-- liveOrShuttingDownBrokerIds -->
<g id="node5" class="node">
<title>liveOrShuttingDownBrokerIds</title>
<polygon fill="none" stroke="#000000" points="961.0923,-106 771.2358,-106 771.2358,-70 961.0923,-70 961.0923,-106"/>
<text text-anchor="middle" x="866.1641" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">liveOrShuttingDownBrokerIds</text>
</g>
<!-- isReplicaOnline&#45;&gt;liveOrShuttingDownBrokerIds -->
<g id="edge1" class="edge">
<title>isReplicaOnline&#45;&gt;liveOrShuttingDownBrokerIds</title>
<path fill="none" stroke="#000000" d="M657.243,-132.8966C685.3458,-127.9398 720.334,-121.5029 751.4502,-115 761.391,-112.9225 771.7895,-110.6356 782.0946,-108.2985"/>
<polygon fill="#000000" stroke="#000000" points="782.961,-111.6908 791.928,-106.0477 781.3991,-104.8672 782.961,-111.6908"/>
</g>
<!-- replicasOnOfflineDirs -->
<g id="node6" class="node">
<title>replicasOnOfflineDirs</title>
<polygon fill="none" stroke="#000000" points="936.5787,-160 795.7494,-160 795.7494,-124 936.5787,-124 936.5787,-160"/>
<text text-anchor="middle" x="866.1641" y="-137.8" font-family="Times,serif" font-size="14.00" fill="#000000">replicasOnOfflineDirs</text>
</g>
<!-- isReplicaOnline&#45;&gt;replicasOnOfflineDirs -->
<g id="edge2" class="edge">
<title>isReplicaOnline&#45;&gt;replicasOnOfflineDirs</title>
<path fill="none" stroke="#000000" d="M657.2218,-142C694.1763,-142 744.0186,-142 785.7541,-142"/>
<polygon fill="#000000" stroke="#000000" points="785.9006,-145.5001 795.9005,-142 785.9005,-138.5001 785.9006,-145.5001"/>
</g>
<!-- liveBrokerIds -->
<g id="node7" class="node">
<title>liveBrokerIds</title>
<polygon fill="none" stroke="#000000" points="912.6436,-214 819.6846,-214 819.6846,-178 912.6436,-178 912.6436,-214"/>
<text text-anchor="middle" x="866.1641" y="-191.8" font-family="Times,serif" font-size="14.00" fill="#000000">liveBrokerIds</text>
</g>
<!-- isReplicaOnline&#45;&gt;liveBrokerIds -->
<g id="edge3" class="edge">
<title>isReplicaOnline&#45;&gt;liveBrokerIds</title>
<path fill="none" stroke="#000000" d="M657.243,-151.1034C685.3458,-156.0602 720.334,-162.4971 751.4502,-169 770.5483,-172.9913 791.3359,-177.7555 809.9041,-182.1631"/>
<polygon fill="#000000" stroke="#000000" points="809.1382,-185.5785 819.6778,-184.4984 810.765,-178.7702 809.1382,-185.5785"/>
</g>
<!-- liveBrokerEpochs -->
<g id="node8" class="node">
<title>liveBrokerEpochs</title>
<polygon fill="none" stroke="#000000" points="1114.0025,-106 996.8364,-106 996.8364,-70 1114.0025,-70 1114.0025,-106"/>
<text text-anchor="middle" x="1055.4194" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">liveBrokerEpochs</text>
</g>
<!-- liveOrShuttingDownBrokerIds&#45;&gt;liveBrokerEpochs -->
<g id="edge4" class="edge">
<title>liveOrShuttingDownBrokerIds&#45;&gt;liveBrokerEpochs</title>
<path fill="none" stroke="#000000" d="M961.069,-88C969.7241,-88 978.3761,-88 986.7354,-88"/>
<polygon fill="#000000" stroke="#000000" points="986.7673,-91.5001 996.7673,-88 986.7672,-84.5001 986.7673,-91.5001"/>
</g>
<!-- liveBrokerEpochs&#45;&gt;liveBrokerEpochs -->
<g id="edge5" class="edge">
<title>liveBrokerEpochs&#45;&gt;liveBrokerEpochs</title>
<path fill="none" stroke="#000000" d="M1024.665,-106.1527C1019.9336,-115.5391 1030.1851,-124 1055.4194,-124 1070.7966,-124 1080.6101,-120.8581 1084.8599,-116.2796"/>
<polygon fill="#000000" stroke="#000000" points="1088.3579,-116.52 1086.1738,-106.1527 1081.4161,-115.6192 1088.3579,-116.52"/>
</g>
<!-- shuttingDownBrokerIds -->
<g id="node9" class="node">
<title>shuttingDownBrokerIds</title>
<polygon fill="none" stroke="#000000" points="1301.4476,-106 1149.7985,-106 1149.7985,-70 1301.4476,-70 1301.4476,-106"/>
<text text-anchor="middle" x="1225.623" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">shuttingDownBrokerIds</text>
</g>
<!-- liveBrokerEpochs&#45;&gt;shuttingDownBrokerIds -->
<g id="edge6" class="edge">
<title>liveBrokerEpochs&#45;&gt;shuttingDownBrokerIds</title>
<path fill="none" stroke="#000000" d="M1113.9939,-88C1122.2876,-88 1130.9549,-88 1139.6345,-88"/>
<polygon fill="#000000" stroke="#000000" points="1139.8076,-91.5001 1149.8076,-88 1139.8076,-84.5001 1139.8076,-91.5001"/>
</g>
<!-- leaderForOffline -->
<g id="node10" class="node">
<title>leaderForOffline</title>
<polygon fill="none" stroke="#000000" points="384.2602,-106 274.6519,-106 274.6519,-70 384.2602,-70 384.2602,-106"/>
<text text-anchor="middle" x="329.4561" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">leaderForOffline</text>
</g>
<!-- leaderForOffline&#45;&gt;partitionReplicaAssignment -->
<g id="edge7" class="edge">
<title>leaderForOffline&#45;&gt;partitionReplicaAssignment</title>
<path fill="none" stroke="#000000" d="M384.3174,-88C419.4225,-88 465.9408,-88 507.1151,-88"/>
<polygon fill="#000000" stroke="#000000" points="507.1815,-91.5001 517.1815,-88 507.1815,-84.5001 507.1815,-91.5001"/>
</g>
<!-- leaderForOffline&#45;&gt;isReplicaOnline -->
<g id="edge8" class="edge">
<title>leaderForOffline&#45;&gt;isReplicaOnline</title>
<path fill="none" stroke="#000000" d="M384.1735,-99.0534C408.6431,-103.9739 437.8495,-109.8159 464.1807,-115 489.0881,-119.9039 516.5113,-125.2237 540.4121,-129.8344"/>
<polygon fill="#000000" stroke="#000000" points="539.9403,-133.3079 550.422,-131.7638 541.2652,-126.4344 539.9403,-133.3079"/>
</g>
<!-- offlinePartitionLeaderElection -->
<g id="node14" class="node">
<title>offlinePartitionLeaderElection</title>
<polygon fill="none" stroke="#000000" points="473.5479,-430.6001 473.5479,-519.3999 734.083,-519.3999 734.083,-430.6001 473.5479,-430.6001"/>
<text text-anchor="middle" x="603.8154" y="-504.1999" font-family="Times,serif" font-size="14.00" fill="#000000">offlinePartitionLeaderElection</text>
<polyline fill="none" stroke="#000000" points="473.5479,-497.3999 734.083,-497.3999 "/>
<text text-anchor="start" x="481.5479" y="-482.1999" font-family="Times,serif" font-size="14.00" fill="#000000">首先找在isr中且在线的replica</text>
<text text-anchor="start" x="481.5479" y="-462.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 如果uncleanLeaderElection配置打开的话</text>
<text text-anchor="middle" x="603.8154" y="-443" font-family="Times,serif" font-size="14.00" fill="#000000"> 从live的replica中选择一个</text>
</g>
<!-- leaderForOffline&#45;&gt;offlinePartitionLeaderElection -->
<g id="edge15" class="edge">
<title>leaderForOffline&#45;&gt;offlinePartitionLeaderElection</title>
<path fill="none" stroke="#000000" d="M384.2711,-89.3191C403.4252,-92.6699 423.3297,-99.9617 436.1807,-115 480.5417,-166.9116 423.0456,-366.4966 464.1807,-421 464.9733,-422.0503 465.7893,-423.0801 466.6272,-424.09"/>
<polygon fill="#000000" stroke="#000000" points="464.0916,-426.503 473.4626,-431.4463 469.2196,-421.7381 464.0916,-426.503"/>
</g>
<!-- leaderForReassign -->
<g id="node11" class="node">
<title>leaderForReassign</title>
<polygon fill="none" stroke="#000000" points="389.6496,-214 269.2625,-214 269.2625,-178 389.6496,-178 389.6496,-214"/>
<text text-anchor="middle" x="329.4561" y="-191.8" font-family="Times,serif" font-size="14.00" fill="#000000">leaderForReassign</text>
</g>
<!-- leaderForReassign&#45;&gt;partitionFullReplicaAssignment -->
<g id="edge9" class="edge">
<title>leaderForReassign&#45;&gt;partitionFullReplicaAssignment</title>
<path fill="none" stroke="#000000" d="M389.6654,-196C420.8089,-196 459.778,-196 495.9062,-196"/>
<polygon fill="#000000" stroke="#000000" points="496.012,-199.5001 506.012,-196 496.0119,-192.5001 496.012,-199.5001"/>
</g>
<!-- leaderForReassign&#45;&gt;isReplicaOnline -->
<g id="edge10" class="edge">
<title>leaderForReassign&#45;&gt;isReplicaOnline</title>
<path fill="none" stroke="#000000" d="M389.7978,-183.8162C413.0401,-179.1471 439.839,-173.7925 464.1807,-169 489.0881,-164.0961 516.5113,-158.7763 540.4121,-154.1656"/>
<polygon fill="#000000" stroke="#000000" points="541.2652,-157.5656 550.422,-152.2362 539.9403,-150.6921 541.2652,-157.5656"/>
</g>
<!-- reassignPartitionLeaderElection -->
<g id="node16" class="node">
<title>reassignPartitionLeaderElection</title>
<polygon fill="none" stroke="#000000" points="506.0151,-626.2 506.0151,-675.8 701.6157,-675.8 701.6157,-626.2 506.0151,-626.2"/>
<text text-anchor="middle" x="603.8154" y="-660.6" font-family="Times,serif" font-size="14.00" fill="#000000">reassignPartitionLeaderElection</text>
<polyline fill="none" stroke="#000000" points="506.0151,-653.8 701.6157,-653.8 "/>
<text text-anchor="middle" x="603.8154" y="-638.6" font-family="Times,serif" font-size="14.00" fill="#000000">replica要live而且在isr列表中</text>
</g>
<!-- leaderForReassign&#45;&gt;reassignPartitionLeaderElection -->
<g id="edge17" class="edge">
<title>leaderForReassign&#45;&gt;reassignPartitionLeaderElection</title>
<path fill="none" stroke="#000000" d="M386.1544,-214.1177C405.1643,-223.0748 424.4832,-235.9491 436.1807,-254 480.1795,-321.8965 411.7835,-555.3529 464.1807,-617 472.8722,-627.2259 484.0759,-634.6557 496.3523,-640.0128"/>
<polygon fill="#000000" stroke="#000000" points="495.3362,-643.3725 505.9255,-643.7174 497.8626,-636.8442 495.3362,-643.3725"/>
</g>
<!-- leaderForPreferredReplica -->
<g id="node12" class="node">
<title>leaderForPreferredReplica</title>
<polygon fill="none" stroke="#000000" points="411.9333,-52 246.9788,-52 246.9788,-16 411.9333,-16 411.9333,-52"/>
<text text-anchor="middle" x="329.4561" y="-29.8" font-family="Times,serif" font-size="14.00" fill="#000000">leaderForPreferredReplica</text>
</g>
<!-- leaderForPreferredReplica&#45;&gt;partitionReplicaAssignment -->
<g id="edge11" class="edge">
<title>leaderForPreferredReplica&#45;&gt;partitionReplicaAssignment</title>
<path fill="none" stroke="#000000" d="M411.7729,-50.2018C441.8249,-56.1167 476.0825,-62.8593 507.2624,-68.9962"/>
<polygon fill="#000000" stroke="#000000" points="506.7806,-72.4685 517.2683,-70.9656 508.1325,-65.6002 506.7806,-72.4685"/>
</g>
<!-- leaderForPreferredReplica&#45;&gt;isReplicaOnline -->
<g id="edge12" class="edge">
<title>leaderForPreferredReplica&#45;&gt;isReplicaOnline</title>
<path fill="none" stroke="#000000" d="M411.8214,-47.113C420.5729,-50.6982 428.9157,-55.2429 436.1807,-61 457.3689,-77.7905 442.5243,-98.8178 464.1807,-115 485.9201,-131.2443 514.7313,-138.5169 540.5347,-141.5273"/>
<polygon fill="#000000" stroke="#000000" points="540.3353,-145.0244 550.6278,-142.5119 541.0149,-138.0575 540.3353,-145.0244"/>
</g>
<!-- preferredReplicaPartitionLeaderElection -->
<g id="node17" class="node">
<title>preferredReplicaPartitionLeaderElection</title>
<polygon fill="none" stroke="#000000" points="481.9287,-362.2 481.9287,-411.8 725.7021,-411.8 725.7021,-362.2 481.9287,-362.2"/>
<text text-anchor="middle" x="603.8154" y="-396.6" font-family="Times,serif" font-size="14.00" fill="#000000">preferredReplicaPartitionLeaderElection</text>
<polyline fill="none" stroke="#000000" points="481.9287,-389.8 725.7021,-389.8 "/>
<text text-anchor="middle" x="603.8154" y="-374.6" font-family="Times,serif" font-size="14.00" fill="#000000">relica要live而且要在isr列表中</text>
</g>
<!-- leaderForPreferredReplica&#45;&gt;preferredReplicaPartitionLeaderElection -->
<g id="edge18" class="edge">
<title>leaderForPreferredReplica&#45;&gt;preferredReplicaPartitionLeaderElection</title>
<path fill="none" stroke="#000000" d="M411.8212,-43.9298C421.0119,-48.0148 429.4629,-53.5467 436.1807,-61 494.2104,-125.3835 424.3941,-176.9953 464.1807,-254 485.8351,-295.911 525.9559,-331.9788 557.6538,-355.9383"/>
<polygon fill="#000000" stroke="#000000" points="555.8111,-358.9289 565.9306,-362.067 559.9767,-353.3033 555.8111,-358.9289"/>
</g>
<!-- leaderForControlledShutdown -->
<g id="node13" class="node">
<title>leaderForControlledShutdown</title>
<polygon fill="none" stroke="#000000" points="422.7669,-160 236.1452,-160 236.1452,-124 422.7669,-124 422.7669,-160"/>
<text text-anchor="middle" x="329.4561" y="-137.8" font-family="Times,serif" font-size="14.00" fill="#000000">leaderForControlledShutdown</text>
</g>
<!-- leaderForControlledShutdown&#45;&gt;partitionReplicaAssignment -->
<g id="edge13" class="edge">
<title>leaderForControlledShutdown&#45;&gt;partitionReplicaAssignment</title>
<path fill="none" stroke="#000000" d="M418.9384,-123.9785C434.0364,-120.9632 449.5523,-117.8801 464.1807,-115 478.0577,-112.2679 492.7156,-109.4066 507.1102,-106.6108"/>
<polygon fill="#000000" stroke="#000000" points="507.8704,-110.0286 517.0207,-104.688 506.5371,-103.1567 507.8704,-110.0286"/>
</g>
<!-- leaderForControlledShutdown&#45;&gt;isReplicaOnline -->
<g id="edge14" class="edge">
<title>leaderForControlledShutdown&#45;&gt;isReplicaOnline</title>
<path fill="none" stroke="#000000" d="M422.7245,-142C461.4651,-142 505.429,-142 540.337,-142"/>
<polygon fill="#000000" stroke="#000000" points="540.3962,-145.5001 550.3961,-142 540.3961,-138.5001 540.3962,-145.5001"/>
</g>
<!-- controlledShutdownPartitionLeaderElection -->
<g id="node15" class="node">
<title>controlledShutdownPartitionLeaderElection</title>
<polygon fill="none" stroke="#000000" points="472.1807,-538.4001 472.1807,-607.5999 735.4502,-607.5999 735.4502,-538.4001 472.1807,-538.4001"/>
<text text-anchor="middle" x="603.8154" y="-592.3999" font-family="Times,serif" font-size="14.00" fill="#000000">controlledShutdownPartitionLeaderElection</text>
<polyline fill="none" stroke="#000000" points="472.1807,-585.5999 735.4502,-585.5999 "/>
<text text-anchor="start" x="480.1807" y="-570.3999" font-family="Times,serif" font-size="14.00" fill="#000000">relica要live而且要在isr列表中</text>
<text text-anchor="start" x="480.1807" y="-550.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 而且broker没有正在shutting down</text>
</g>
<!-- leaderForControlledShutdown&#45;&gt;controlledShutdownPartitionLeaderElection -->
<g id="edge16" class="edge">
<title>leaderForControlledShutdown&#45;&gt;controlledShutdownPartitionLeaderElection</title>
<path fill="none" stroke="#000000" d="M423.0161,-157.4094C427.9038,-160.6406 432.3624,-164.4696 436.1807,-169 487.893,-230.3559 414.2525,-466.1837 464.1807,-529 464.6699,-529.6156 465.1678,-530.2227 465.6739,-530.8215"/>
<polygon fill="#000000" stroke="#000000" points="463.2501,-533.3507 472.698,-538.1454 468.3022,-528.5055 463.2501,-533.3507"/>
</g>
<!-- doElectLeaderForPartitions -->
<g id="node18" class="node">
<title>doElectLeaderForPartitions</title>
<polygon fill="#f38181" stroke="#000000" points="16,-354.2 16,-403.8 186.7314,-403.8 186.7314,-354.2 16,-354.2"/>
<text text-anchor="middle" x="101.3657" y="-388.6" font-family="Times,serif" font-size="14.00" fill="#000000">doElectLeaderForPartitions</text>
<polyline fill="none" stroke="#000000" points="16,-381.8 186.7314,-381.8 "/>
<text text-anchor="start" x="24" y="-366.6" font-family="Times,serif" font-size="14.00" fill="#000000">根据选举策略选举</text>
</g>
<!-- doElectLeaderForPartitions&#45;&gt;getTopicPartitionStatesRaw -->
<g id="edge19" class="edge">
<title>doElectLeaderForPartitions&#45;&gt;getTopicPartitionStatesRaw</title>
<path fill="none" stroke="#000000" d="M160.9958,-354.164C196.8292,-339.2393 242.024,-320.4156 276.5787,-306.0235"/>
<polygon fill="#000000" stroke="#000000" points="278.1405,-309.1645 286.0261,-302.0887 275.449,-302.7026 278.1405,-309.1645"/>
</g>
<!-- doElectLeaderForPartitions&#45;&gt;leaderForOffline -->
<g id="edge20" class="edge">
<title>doElectLeaderForPartitions&#45;&gt;leaderForOffline</title>
<path fill="none" stroke="#000000" d="M105.4831,-353.9238C115.4903,-301.2478 146.1377,-178.7115 222.7314,-115 234.6642,-105.0742 249.7663,-98.7288 264.8261,-94.6911"/>
<polygon fill="#000000" stroke="#000000" points="265.7586,-98.0671 274.6827,-92.3565 264.1452,-91.2556 265.7586,-98.0671"/>
</g>
<!-- doElectLeaderForPartitions&#45;&gt;leaderForReassign -->
<g id="edge21" class="edge">
<title>doElectLeaderForPartitions&#45;&gt;leaderForReassign</title>
<path fill="none" stroke="#000000" d="M121.8105,-353.7879C144.517,-326.8485 183.2102,-283.9804 222.7314,-254 240.4905,-240.5282 261.7793,-228.2931 280.6553,-218.5703"/>
<polygon fill="#000000" stroke="#000000" points="282.3514,-221.6349 289.7019,-214.0047 279.1974,-215.3856 282.3514,-221.6349"/>
</g>
<!-- doElectLeaderForPartitions&#45;&gt;leaderForPreferredReplica -->
<g id="edge22" class="edge">
<title>doElectLeaderForPartitions&#45;&gt;leaderForPreferredReplica</title>
<path fill="none" stroke="#000000" d="M103.2926,-354.0052C109.3046,-293.9703 133.1022,-140.7274 222.7314,-61 227.2598,-56.9719 232.3039,-53.5274 237.6665,-50.5838"/>
<polygon fill="#000000" stroke="#000000" points="239.4801,-53.5945 246.9571,-46.0882 236.4311,-47.2934 239.4801,-53.5945"/>
</g>
<!-- doElectLeaderForPartitions&#45;&gt;leaderForControlledShutdown -->
<g id="edge23" class="edge">
<title>doElectLeaderForPartitions&#45;&gt;leaderForControlledShutdown</title>
<path fill="none" stroke="#000000" d="M108.6801,-353.943C122.9687,-309.5535 158.9073,-217.2455 222.7314,-169 224.5586,-167.6188 226.4486,-166.3077 228.3916,-165.0633"/>
<polygon fill="#000000" stroke="#000000" points="230.2706,-168.0208 237.219,-160.0227 226.7994,-161.9421 230.2706,-168.0208"/>
</g>
<!-- collectUncleanLeaderElectionState -->
<g id="node19" class="node">
<title>collectUncleanLeaderElectionState</title>
<polygon fill="none" stroke="#000000" points="436.4057,-397 222.5064,-397 222.5064,-361 436.4057,-361 436.4057,-397"/>
<text text-anchor="middle" x="329.4561" y="-374.8" font-family="Times,serif" font-size="14.00" fill="#000000">collectUncleanLeaderElectionState</text>
</g>
<!-- doElectLeaderForPartitions&#45;&gt;collectUncleanLeaderElectionState -->
<g id="edge24" class="edge">
<title>doElectLeaderForPartitions&#45;&gt;collectUncleanLeaderElectionState</title>
<path fill="none" stroke="#000000" d="M186.9471,-379C195.3059,-379 203.8826,-379 212.4816,-379"/>
<polygon fill="#000000" stroke="#000000" points="212.5746,-382.5001 222.5745,-379 212.5745,-375.5001 212.5746,-382.5001"/>
</g>
</g>
</svg>
