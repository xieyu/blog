<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: kafkaServer Pages: 1 -->
<svg width="1734pt" height="1079pt"
 viewBox="0.00 0.00 1734.00 1079.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1075)">
<title>kafkaServer</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1075 1730,-1075 1730,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_channel</title>
<polygon fill="none" stroke="#000000" points="1324,-93 1324,-175 1432,-175 1432,-93 1324,-93"/>
<text text-anchor="middle" x="1378" y="-155" font-family="Times,serif" font-size="20.00" fill="#000000">channel</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_FileRecords</title>
<polygon fill="none" stroke="#000000" points="1204,-209 1204,-376 1479,-376 1479,-209 1204,-209"/>
<text text-anchor="middle" x="1341.5" y="-356" font-family="Times,serif" font-size="20.00" fill="#000000">FileRecords</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_TimeIndex</title>
<polygon fill="none" stroke="#000000" points="1487,-209 1487,-376 1599,-376 1599,-209 1487,-209"/>
<text text-anchor="middle" x="1543" y="-356" font-family="Times,serif" font-size="20.00" fill="#000000">TimeIndex</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_OffsetIndex</title>
<polygon fill="none" stroke="#000000" points="1607,-294 1607,-376 1718,-376 1718,-294 1607,-294"/>
<text text-anchor="middle" x="1662.5" y="-356" font-family="Times,serif" font-size="20.00" fill="#000000">OffsetIndex</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_Segment</title>
<polygon fill="none" stroke="#000000" points="1078,-209 1078,-471.5 1196,-471.5 1196,-209 1078,-209"/>
<text text-anchor="middle" x="1137" y="-451.5" font-family="Times,serif" font-size="20.00" fill="#000000">LogSegment</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_log</title>
<polygon fill="none" stroke="#000000" points="946,-389 946,-628 1070,-628 1070,-389 946,-389"/>
<text text-anchor="middle" x="1008" y="-608" font-family="Times,serif" font-size="20.00" fill="#000000">log</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_logManager</title>
<polygon fill="none" stroke="#000000" points="494,-8 494,-188 883,-188 883,-8 494,-8"/>
<text text-anchor="middle" x="688.5" y="-168" font-family="Times,serif" font-size="20.00" fill="#000000">logManager</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_Partition</title>
<polygon fill="none" stroke="#000000" points="494,-196 494,-710 938,-710 938,-196 494,-196"/>
<text text-anchor="middle" x="716" y="-690" font-family="Times,serif" font-size="20.00" fill="#000000">Partition</text>
</g>
<g id="clust15" class="cluster">
<title>cluster_ReplicaManager</title>
<polygon fill="none" stroke="#000000" points="8,-80 8,-890 486,-890 486,-80 8,-80"/>
<text text-anchor="middle" x="247" y="-870" font-family="Times,serif" font-size="20.00" fill="#000000">ReplicaManager</text>
</g>
<g id="clust19" class="cluster">
<title>cluster_KafkaApi</title>
<polygon fill="none" stroke="#000000" points="146,-898 146,-1063 446,-1063 446,-898 146,-898"/>
<text text-anchor="middle" x="296" y="-1043" font-family="Times,serif" font-size="20.00" fill="#000000">KafkaApi: kafkaServer对外接口</text>
</g>
<!-- channel_write -->
<g id="node1" class="node">
<title>channel_write</title>
<polygon fill="none" stroke="#000000" points="1424.5,-137 1331.5,-137 1331.5,-101 1424.5,-101 1424.5,-137"/>
<text text-anchor="middle" x="1378" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#000000">channel_write</text>
</g>
<!-- FileRecords_append -->
<g id="node2" class="node">
<title>FileRecords_append</title>
<polygon fill="none" stroke="#000000" points="1337,-338 1281,-338 1281,-302 1337,-302 1337,-338"/>
<text text-anchor="middle" x="1309" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">append</text>
</g>
<!-- MemoryRecords_writeFullyTo -->
<g id="node4" class="node">
<title>MemoryRecords_writeFullyTo</title>
<polygon fill="none" stroke="#000000" points="1471.5,-253 1284.5,-253 1284.5,-217 1471.5,-217 1471.5,-253"/>
<text text-anchor="middle" x="1378" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">MemoryRecords_writeFullyTo</text>
</g>
<!-- FileRecords_append&#45;&gt;MemoryRecords_writeFullyTo -->
<g id="edge1" class="edge">
<title>FileRecords_append&#45;&gt;MemoryRecords_writeFullyTo</title>
<path fill="none" stroke="#000000" d="M1323.6331,-301.9737C1333.3301,-290.0282 1346.2035,-274.1696 1356.9892,-260.8829"/>
<polygon fill="#000000" stroke="#000000" points="1359.8028,-262.9702 1363.388,-253.0003 1354.3681,-258.5584 1359.8028,-262.9702"/>
</g>
<!-- FileRecords_slice -->
<g id="node3" class="node">
<title>FileRecords_slice</title>
<polygon fill="none" stroke="#000000" points="1266,-253 1212,-253 1212,-217 1266,-217 1266,-253"/>
<text text-anchor="middle" x="1239" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">slice</text>
</g>
<!-- MemoryRecords_writeFullyTo&#45;&gt;channel_write -->
<g id="edge2" class="edge">
<title>MemoryRecords_writeFullyTo&#45;&gt;channel_write</title>
<path fill="none" stroke="#000000" d="M1378,-216.875C1378,-198.3412 1378,-169.2787 1378,-147.6311"/>
<polygon fill="#000000" stroke="#000000" points="1381.5001,-147.3805 1378,-137.3805 1374.5001,-147.3806 1381.5001,-147.3805"/>
</g>
<!-- timeIndex_maybeAppend -->
<g id="node5" class="node">
<title>timeIndex_maybeAppend</title>
<polygon fill="none" stroke="#000000" points="1591,-338 1495,-338 1495,-302 1591,-302 1591,-338"/>
<text text-anchor="middle" x="1543" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">maybeAppend</text>
</g>
<!-- mmap -->
<g id="node6" class="node">
<title>mmap</title>
<polygon fill="none" stroke="#000000" points="1580,-253 1526,-253 1526,-217 1580,-217 1580,-253"/>
<text text-anchor="middle" x="1553" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">mmap</text>
</g>
<!-- timeIndex_maybeAppend&#45;&gt;mmap -->
<g id="edge3" class="edge">
<title>timeIndex_maybeAppend&#45;&gt;mmap</title>
<path fill="none" stroke="#000000" d="M1545.1207,-301.9737C1546.4466,-290.7043 1548.1821,-275.9524 1549.6867,-263.1627"/>
<polygon fill="#000000" stroke="#000000" points="1553.1898,-263.3408 1550.8823,-253.0003 1546.2378,-262.5229 1553.1898,-263.3408"/>
</g>
<!-- offsetIndex_append -->
<g id="node7" class="node">
<title>offsetIndex_append</title>
<polygon fill="none" stroke="#000000" points="1674.5,-338 1615.5,-338 1615.5,-302 1674.5,-302 1674.5,-338"/>
<text text-anchor="middle" x="1645" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">Append</text>
</g>
<!-- offsetIndex_append&#45;&gt;mmap -->
<g id="edge4" class="edge">
<title>offsetIndex_append&#45;&gt;mmap</title>
<path fill="none" stroke="#000000" d="M1625.4892,-301.9737C1612.3159,-289.8028 1594.7461,-273.5698 1580.2034,-260.1336"/>
<polygon fill="#000000" stroke="#000000" points="1582.2029,-257.2157 1572.4827,-253.0003 1577.4526,-262.3572 1582.2029,-257.2157"/>
</g>
<!-- segment_append -->
<g id="node8" class="node">
<title>segment_append</title>
<polygon fill="none" stroke="#000000" points="1132,-397 1132,-433 1188,-433 1188,-397 1132,-397"/>
<text text-anchor="middle" x="1160" y="-411.3" font-family="Times,serif" font-size="14.00" fill="#000000">append</text>
</g>
<!-- segment_append&#45;&gt;FileRecords_append -->
<g id="edge5" class="edge">
<title>segment_append&#45;&gt;FileRecords_append</title>
<path fill="none" stroke="#000000" d="M1188.0258,-397.1312C1211.8834,-381.92 1246.3279,-359.9587 1272.3663,-343.3571"/>
<polygon fill="#000000" stroke="#000000" points="1274.2967,-346.2772 1280.847,-337.9499 1270.5334,-340.3748 1274.2967,-346.2772"/>
</g>
<!-- segment_append&#45;&gt;timeIndex_maybeAppend -->
<g id="edge6" class="edge">
<title>segment_append&#45;&gt;timeIndex_maybeAppend</title>
<path fill="none" stroke="#000000" d="M1188.1011,-413.8351C1256.6715,-410.6402 1430.7654,-400.3073 1483,-376 1498.0097,-369.0152 1511.7541,-356.8354 1522.2899,-345.6149"/>
<polygon fill="#000000" stroke="#000000" points="1524.9792,-347.8584 1529.0474,-338.0758 1519.7666,-343.1862 1524.9792,-347.8584"/>
</g>
<!-- segment_append&#45;&gt;offsetIndex_append -->
<g id="edge7" class="edge">
<title>segment_append&#45;&gt;offsetIndex_append</title>
<path fill="none" stroke="#000000" d="M1188.2983,-413.8441C1280.2559,-409.9047 1566.817,-396.1232 1603,-376 1614.8654,-369.4011 1624.3734,-357.8967 1631.3218,-347.0252"/>
<polygon fill="#000000" stroke="#000000" points="1634.4833,-348.5544 1636.552,-338.1634 1628.455,-344.9964 1634.4833,-348.5544"/>
</g>
<!-- segment_read -->
<g id="node9" class="node">
<title>segment_read</title>
<polygon fill="none" stroke="#000000" points="1164,-338 1110,-338 1110,-302 1164,-302 1164,-338"/>
<text text-anchor="middle" x="1137" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">read</text>
</g>
<!-- segment_read&#45;&gt;FileRecords_slice -->
<g id="edge8" class="edge">
<title>segment_read&#45;&gt;FileRecords_slice</title>
<path fill="none" stroke="#000000" d="M1158.6316,-301.9737C1173.3719,-289.6901 1193.0774,-273.2688 1209.2867,-259.7611"/>
<polygon fill="#000000" stroke="#000000" points="1211.958,-262.091 1217.3996,-253.0003 1207.4767,-256.7134 1211.958,-262.091"/>
</g>
<!-- translateOffset -->
<g id="node10" class="node">
<title>translateOffset</title>
<polygon fill="none" stroke="#000000" points="1185,-253 1089,-253 1089,-217 1185,-217 1185,-253"/>
<text text-anchor="middle" x="1137" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">translateOffset</text>
</g>
<!-- segment_read&#45;&gt;translateOffset -->
<g id="edge9" class="edge">
<title>segment_read&#45;&gt;translateOffset</title>
<path fill="none" stroke="#000000" d="M1137,-301.9737C1137,-290.7043 1137,-275.9524 1137,-263.1627"/>
<polygon fill="#000000" stroke="#000000" points="1140.5001,-263.0003 1137,-253.0003 1133.5001,-263.0004 1140.5001,-263.0003"/>
</g>
<!-- appendAsLeader -->
<g id="node11" class="node">
<title>appendAsLeader</title>
<polygon fill="none" stroke="#000000" points="1062,-590 954,-590 954,-554 1062,-554 1062,-590"/>
<text text-anchor="middle" x="1008" y="-568.3" font-family="Times,serif" font-size="14.00" fill="#000000">appendAsLeader</text>
</g>
<!-- append -->
<g id="node12" class="node">
<title>append</title>
<polygon fill="none" stroke="#000000" points="1049,-518 993,-518 993,-482 1049,-482 1049,-518"/>
<text text-anchor="middle" x="1021" y="-496.3" font-family="Times,serif" font-size="14.00" fill="#000000">append</text>
</g>
<!-- appendAsLeader&#45;&gt;append -->
<g id="edge10" class="edge">
<title>appendAsLeader&#45;&gt;append</title>
<path fill="none" stroke="#000000" d="M1011.2804,-553.8314C1012.6708,-546.131 1014.3241,-536.9743 1015.8692,-528.4166"/>
<polygon fill="#000000" stroke="#000000" points="1019.3428,-528.8761 1017.6754,-518.4133 1012.4542,-527.6322 1019.3428,-528.8761"/>
</g>
<!-- append&#45;&gt;segment_append -->
<g id="edge11" class="edge">
<title>append&#45;&gt;segment_append</title>
<path fill="none" stroke="#000000" d="M1049.0388,-485.5146C1057.1725,-481.1538 1066.0121,-476.2591 1074,-471.5 1091.0628,-461.3341 1109.5257,-449.3416 1124.9543,-439.0265"/>
<polygon fill="#000000" stroke="#000000" points="1127.3109,-441.6594 1133.6543,-433.1734 1123.4035,-435.8515 1127.3109,-441.6594"/>
</g>
<!-- localLog_read -->
<g id="node13" class="node">
<title>localLog_read</title>
<polygon fill="none" stroke="#000000" points="1035,-433 981,-433 981,-397 1035,-397 1035,-433"/>
<text text-anchor="middle" x="1008" y="-411.3" font-family="Times,serif" font-size="14.00" fill="#000000">read</text>
</g>
<!-- localLog_read&#45;&gt;segment_read -->
<g id="edge12" class="edge">
<title>localLog_read&#45;&gt;segment_read</title>
<path fill="none" stroke="#000000" d="M1032.5676,-396.9076C1052.9213,-381.9184 1082.0215,-360.4881 1104.3362,-344.0547"/>
<polygon fill="#000000" stroke="#000000" points="1106.5472,-346.7732 1112.5239,-338.025 1102.3963,-341.1367 1106.5472,-346.7732"/>
</g>
<!-- logCreationOrDeletionLock -->
<g id="node14" class="node">
<title>logCreationOrDeletionLock</title>
<polygon fill="#95e1d3" stroke="#000000" points="670.5,-52 505.5,-52 501.5,-48 501.5,-16 666.5,-16 670.5,-20 670.5,-52"/>
<polyline fill="none" stroke="#000000" points="666.5,-48 501.5,-48 "/>
<polyline fill="none" stroke="#000000" points="666.5,-48 666.5,-16 "/>
<polyline fill="none" stroke="#000000" points="666.5,-48 670.5,-52 "/>
<text text-anchor="middle" x="586" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">logCreationOrDeletionLock</text>
</g>
<!-- getOrCreateLog -->
<g id="node15" class="node">
<title>getOrCreateLog</title>
<polygon fill="none" stroke="#000000" points="667,-88.5 667,-149.5 811,-149.5 811,-88.5 667,-88.5"/>
<text text-anchor="middle" x="739" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#000000">getOrCreateLog</text>
<polyline fill="none" stroke="#000000" points="667,-126.5 811,-126.5 "/>
<text text-anchor="start" x="675" y="-111.3" font-family="Times,serif" font-size="14.00" fill="#000000">创建存储该partition</text>
<text text-anchor="start" x="675" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000"> log segment的文件夹</text>
</g>
<!-- getOrCreateLog&#45;&gt;logCreationOrDeletionLock -->
<g id="edge13" class="edge">
<title>getOrCreateLog&#45;&gt;logCreationOrDeletionLock</title>
<path fill="none" stroke="#000000" d="M683.7635,-88.313C665.1036,-77.9465 644.6103,-66.5613 627.2276,-56.9042"/>
<polygon fill="#000000" stroke="#000000" points="628.8887,-53.8232 618.4474,-52.0263 625.4892,-59.9423 628.8887,-53.8232"/>
</g>
<!-- preferredLogDirs -->
<g id="node16" class="node">
<title>preferredLogDirs</title>
<polygon fill="none" stroke="#000000" points="799.5,-52 688.5,-52 688.5,-16 799.5,-16 799.5,-52"/>
<text text-anchor="middle" x="744" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">preferredLogDirs</text>
</g>
<!-- getOrCreateLog&#45;&gt;preferredLogDirs -->
<g id="edge14" class="edge">
<title>getOrCreateLog&#45;&gt;preferredLogDirs</title>
<path fill="none" stroke="#000000" d="M740.8051,-88.313C741.3086,-79.7535 741.853,-70.4995 742.3472,-62.0972"/>
<polygon fill="#000000" stroke="#000000" points="745.8463,-62.2146 742.9396,-52.0263 738.8584,-61.8035 745.8463,-62.2146"/>
</g>
<!-- logDirs -->
<g id="node17" class="node">
<title>logDirs</title>
<polygon fill="none" stroke="#000000" points="874.5,-52 817.5,-52 817.5,-16 874.5,-16 874.5,-52"/>
<text text-anchor="middle" x="846" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">logDirs</text>
</g>
<!-- getOrCreateLog&#45;&gt;logDirs -->
<g id="edge15" class="edge">
<title>getOrCreateLog&#45;&gt;logDirs</title>
<path fill="none" stroke="#000000" d="M777.6295,-88.313C789.9608,-78.5171 803.4372,-67.8116 815.1409,-58.5142"/>
<polygon fill="#000000" stroke="#000000" points="817.655,-60.987 823.3081,-52.0263 813.3009,-55.506 817.655,-60.987"/>
</g>
<!-- finishedInitializingLog -->
<g id="node18" class="node">
<title>finishedInitializingLog</title>
<polygon fill="none" stroke="#000000" points="643.5,-137 502.5,-137 502.5,-101 643.5,-101 643.5,-137"/>
<text text-anchor="middle" x="573" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#000000">finishedInitializingLog</text>
</g>
<!-- appendRecordsToLeader -->
<g id="node19" class="node">
<title>appendRecordsToLeader</title>
<polygon fill="none" stroke="#000000" points="792,-672 640,-672 640,-636 792,-636 792,-672"/>
<text text-anchor="middle" x="716" y="-650.3" font-family="Times,serif" font-size="14.00" fill="#000000">appendRecordsToLeader</text>
</g>
<!-- appendRecordsToLeader&#45;&gt;appendAsLeader -->
<g id="edge16" class="edge">
<title>appendRecordsToLeader&#45;&gt;appendAsLeader</title>
<path fill="none" stroke="#000000" d="M792.0598,-650.8391C849.4401,-647.4755 922.7627,-640.7981 950,-628 964.5774,-621.1505 977.7684,-609.1441 987.8742,-598.0007"/>
<polygon fill="#000000" stroke="#000000" points="990.7849,-599.9847 994.6632,-590.1252 985.4829,-595.4142 990.7849,-599.9847"/>
</g>
<!-- partition_readRecords -->
<g id="node20" class="node">
<title>partition_readRecords</title>
<polygon fill="none" stroke="#000000" points="737,-518 653,-518 653,-482 737,-482 737,-518"/>
<text text-anchor="middle" x="695" y="-496.3" font-family="Times,serif" font-size="14.00" fill="#000000">readRecords</text>
</g>
<!-- partition_readRecords&#45;&gt;localLog_read -->
<g id="edge17" class="edge">
<title>partition_readRecords&#45;&gt;localLog_read</title>
<path fill="none" stroke="#000000" d="M737.2103,-498.1044C797.8466,-494.8798 906.244,-487.1019 942,-471.5 958.217,-464.4238 973.4299,-451.9694 985.1538,-440.5514"/>
<polygon fill="#000000" stroke="#000000" points="987.8067,-442.8456 992.3297,-433.2647 982.8192,-437.9339 987.8067,-442.8456"/>
</g>
<!-- localLogWithEpochOrException -->
<g id="node21" class="node">
<title>localLogWithEpochOrException</title>
<polygon fill="none" stroke="#000000" points="793,-433 597,-433 597,-397 793,-397 793,-433"/>
<text text-anchor="middle" x="695" y="-411.3" font-family="Times,serif" font-size="14.00" fill="#000000">localLogWithEpochOrException</text>
</g>
<!-- partition_readRecords&#45;&gt;localLogWithEpochOrException -->
<g id="edge18" class="edge">
<title>partition_readRecords&#45;&gt;localLogWithEpochOrException</title>
<path fill="none" stroke="#000000" d="M695,-481.9737C695,-470.7043 695,-455.9524 695,-443.1627"/>
<polygon fill="#000000" stroke="#000000" points="698.5001,-443.0003 695,-433.0003 691.5001,-443.0004 698.5001,-443.0003"/>
</g>
<!-- getLocalLog -->
<g id="node23" class="node">
<title>getLocalLog</title>
<polygon fill="none" stroke="#000000" points="740,-338 654,-338 654,-302 740,-302 740,-338"/>
<text text-anchor="middle" x="697" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">getLocalLog</text>
</g>
<!-- localLogWithEpochOrException&#45;&gt;getLocalLog -->
<g id="edge20" class="edge">
<title>localLogWithEpochOrException&#45;&gt;getLocalLog</title>
<path fill="none" stroke="#000000" d="M695.3856,-396.683C695.6734,-383.0149 696.0719,-364.0833 696.401,-348.4508"/>
<polygon fill="#000000" stroke="#000000" points="699.9042,-348.3322 696.6156,-338.2607 692.9058,-348.1848 699.9042,-348.3322"/>
</g>
<!-- fetchOffsetSnapshot -->
<g id="node22" class="node">
<title>fetchOffsetSnapshot</title>
<polygon fill="none" stroke="#000000" points="632.5,-518 505.5,-518 505.5,-482 632.5,-482 632.5,-518"/>
<text text-anchor="middle" x="569" y="-496.3" font-family="Times,serif" font-size="14.00" fill="#000000">fetchOffsetSnapshot</text>
</g>
<!-- fetchOffsetSnapshot&#45;&gt;localLogWithEpochOrException -->
<g id="edge19" class="edge">
<title>fetchOffsetSnapshot&#45;&gt;localLogWithEpochOrException</title>
<path fill="none" stroke="#000000" d="M595.7214,-481.9737C614.4312,-469.352 639.6167,-452.3618 659.9386,-438.6525"/>
<polygon fill="#000000" stroke="#000000" points="661.9845,-441.4944 668.3172,-433.0003 658.0698,-435.6913 661.9845,-441.4944"/>
</g>
<!-- checkCurrentLeaderEpoch -->
<g id="node24" class="node">
<title>checkCurrentLeaderEpoch</title>
<polygon fill="none" stroke="#000000" points="929.5,-253 768.5,-253 768.5,-217 929.5,-217 929.5,-253"/>
<text text-anchor="middle" x="849" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">checkCurrentLeaderEpoch</text>
</g>
<!-- getLocalLog&#45;&gt;checkCurrentLeaderEpoch -->
<g id="edge21" class="edge">
<title>getLocalLog&#45;&gt;checkCurrentLeaderEpoch</title>
<path fill="none" stroke="#000000" d="M729.2353,-301.9737C752.2089,-289.1266 783.276,-271.7536 808.0113,-257.9213"/>
<polygon fill="#000000" stroke="#000000" points="809.7915,-260.936 816.8112,-253.0003 806.3749,-254.8264 809.7915,-260.936"/>
</g>
<!-- log -->
<g id="node25" class="node">
<title>log</title>
<polygon fill="#95e1d3" stroke="#000000" points="592,-204.5 592,-265.5 750,-265.5 750,-204.5 592,-204.5"/>
<text text-anchor="middle" x="671" y="-250.3" font-family="Times,serif" font-size="14.00" fill="#000000">log</text>
<polyline fill="none" stroke="#000000" points="592,-242.5 750,-242.5 "/>
<text text-anchor="start" x="600" y="-227.3" font-family="Times,serif" font-size="14.00" fill="#000000">日志对象在parition加入</text>
<text text-anchor="middle" x="671" y="-212.3" font-family="Times,serif" font-size="14.00" fill="#000000"> allpartions的时候创建</text>
</g>
<!-- getLocalLog&#45;&gt;log -->
<g id="edge22" class="edge">
<title>getLocalLog&#45;&gt;log</title>
<path fill="none" stroke="#000000" d="M691.4861,-301.9737C689.0964,-294.1613 686.1948,-284.6752 683.3361,-275.3294"/>
<polygon fill="#000000" stroke="#000000" points="686.6678,-274.2558 680.3958,-265.717 679.974,-276.3034 686.6678,-274.2558"/>
</g>
<!-- createLogIfNotExists -->
<g id="node26" class="node">
<title>createLogIfNotExists</title>
<polygon fill="none" stroke="#000000" points="635.5,-338 502.5,-338 502.5,-302 635.5,-302 635.5,-338"/>
<text text-anchor="middle" x="569" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">createLogIfNotExists</text>
</g>
<!-- createLogIfNotExists&#45;&gt;log -->
<g id="edge23" class="edge">
<title>createLogIfNotExists&#45;&gt;log</title>
<path fill="none" stroke="#000000" d="M590.6316,-301.9737C600.9933,-293.3389 613.8085,-282.6596 626.1381,-272.3849"/>
<polygon fill="#000000" stroke="#000000" points="628.698,-274.8076 634.1396,-265.717 624.2167,-269.4301 628.698,-274.8076"/>
</g>
<!-- createLog -->
<g id="node27" class="node">
<title>createLog</title>
<polygon fill="none" stroke="#000000" points="573.5,-253 502.5,-253 502.5,-217 573.5,-217 573.5,-253"/>
<text text-anchor="middle" x="538" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">createLog</text>
</g>
<!-- createLogIfNotExists&#45;&gt;createLog -->
<g id="edge24" class="edge">
<title>createLogIfNotExists&#45;&gt;createLog</title>
<path fill="none" stroke="#000000" d="M562.4257,-301.9737C558.2335,-290.4789 552.7199,-275.3609 547.9921,-262.3977"/>
<polygon fill="#000000" stroke="#000000" points="551.2793,-261.1958 544.5648,-253.0003 544.703,-263.5943 551.2793,-261.1958"/>
</g>
<!-- createLog&#45;&gt;getOrCreateLog -->
<g id="edge25" class="edge">
<title>createLog&#45;&gt;getOrCreateLog</title>
<path fill="none" stroke="#000000" d="M554.2205,-216.6972C562.1103,-209.0025 572.2137,-200.7492 583,-196 611.2546,-183.5595 623.4812,-199.8221 652,-188 669.8807,-180.5878 687.1186,-168.3756 701.4673,-156.2689"/>
<polygon fill="#000000" stroke="#000000" points="703.8937,-158.7969 709.1273,-149.5849 699.2914,-153.5225 703.8937,-158.7969"/>
</g>
<!-- createLog&#45;&gt;finishedInitializingLog -->
<g id="edge26" class="edge">
<title>createLog&#45;&gt;finishedInitializingLog</title>
<path fill="none" stroke="#000000" d="M543.4688,-216.875C549.1119,-198.172 557.9901,-168.747 564.5397,-147.0399"/>
<polygon fill="#000000" stroke="#000000" points="567.9163,-147.9653 567.4541,-137.3805 561.2147,-145.9432 567.9163,-147.9653"/>
</g>
<!-- appendToLocalLog -->
<g id="node28" class="node">
<title>appendToLocalLog</title>
<polygon fill="none" stroke="#000000" points="162,-718.5 162,-779.5 286,-779.5 286,-718.5 162,-718.5"/>
<text text-anchor="middle" x="224" y="-764.3" font-family="Times,serif" font-size="14.00" fill="#000000">appendToLocalLog</text>
<polyline fill="none" stroke="#000000" points="162,-756.5 286,-756.5 "/>
<text text-anchor="start" x="170" y="-741.3" font-family="Times,serif" font-size="14.00" fill="#000000">将日志写入该</text>
<text text-anchor="start" x="170" y="-726.3" font-family="Times,serif" font-size="14.00" fill="#000000"> parition的leader中</text>
</g>
<!-- appendToLocalLog&#45;&gt;appendRecordsToLeader -->
<g id="edge32" class="edge">
<title>appendToLocalLog&#45;&gt;appendRecordsToLeader</title>
<path fill="none" stroke="#000000" d="M286.13,-726.3013C297.2772,-722.9884 308.8853,-720.0189 320,-718 394.4214,-704.4818 415.1542,-720.9263 490,-710 543.3624,-702.21 602.484,-687.3307 646.87,-674.8668"/>
<polygon fill="#000000" stroke="#000000" points="648.0138,-678.1805 656.6791,-672.0844 646.1035,-671.4462 648.0138,-678.1805"/>
</g>
<!-- getPartitionOrException -->
<g id="node34" class="node">
<title>getPartitionOrException</title>
<polygon fill="none" stroke="#000000" points="15.5,-384.5 15.5,-445.5 164.5,-445.5 164.5,-384.5 15.5,-384.5"/>
<text text-anchor="middle" x="90" y="-430.3" font-family="Times,serif" font-size="14.00" fill="#000000">getPartitionOrException</text>
<polyline fill="none" stroke="#000000" points="15.5,-422.5 164.5,-422.5 "/>
<text text-anchor="start" x="23.5" y="-407.3" font-family="Times,serif" font-size="14.00" fill="#000000">从allPartions中找到</text>
<text text-anchor="start" x="23.5" y="-392.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 对应的partion对象</text>
</g>
<!-- appendToLocalLog&#45;&gt;getPartitionOrException -->
<g id="edge33" class="edge">
<title>appendToLocalLog&#45;&gt;getPartitionOrException</title>
<path fill="none" stroke="#000000" d="M211.7532,-718.4743C187.4907,-657.9993 133.3206,-522.9783 106.1673,-455.2976"/>
<polygon fill="#000000" stroke="#000000" points="109.3358,-453.7951 102.3639,-445.8174 102.8391,-456.4016 109.3358,-453.7951"/>
</g>
<!-- fetchMessages -->
<g id="node29" class="node">
<title>fetchMessages</title>
<polygon fill="none" stroke="#000000" points="423.5,-852 326.5,-852 326.5,-816 423.5,-816 423.5,-852"/>
<text text-anchor="middle" x="375" y="-830.3" font-family="Times,serif" font-size="14.00" fill="#000000">fetchMessages</text>
</g>
<!-- readFromLog -->
<g id="node30" class="node">
<title>readFromLog</title>
<polygon fill="none" stroke="#000000" points="421,-767 329,-767 329,-731 421,-731 421,-767"/>
<text text-anchor="middle" x="375" y="-745.3" font-family="Times,serif" font-size="14.00" fill="#000000">readFromLog</text>
</g>
<!-- fetchMessages&#45;&gt;readFromLog -->
<g id="edge27" class="edge">
<title>fetchMessages&#45;&gt;readFromLog</title>
<path fill="none" stroke="#000000" d="M375,-815.9737C375,-804.7043 375,-789.9524 375,-777.1627"/>
<polygon fill="#000000" stroke="#000000" points="378.5001,-777.0003 375,-767.0003 371.5001,-777.0004 378.5001,-777.0003"/>
</g>
<!-- readFromLocalLog -->
<g id="node31" class="node">
<title>readFromLocalLog</title>
<polygon fill="none" stroke="#000000" points="436,-672 314,-672 314,-636 436,-636 436,-672"/>
<text text-anchor="middle" x="375" y="-650.3" font-family="Times,serif" font-size="14.00" fill="#000000">readFromLocalLog</text>
</g>
<!-- readFromLog&#45;&gt;readFromLocalLog -->
<g id="edge28" class="edge">
<title>readFromLog&#45;&gt;readFromLocalLog</title>
<path fill="none" stroke="#000000" d="M375,-730.683C375,-717.0149 375,-698.0833 375,-682.4508"/>
<polygon fill="#000000" stroke="#000000" points="378.5001,-682.2607 375,-672.2607 371.5001,-682.2608 378.5001,-682.2607"/>
</g>
<!-- read -->
<g id="node32" class="node">
<title>read</title>
<polygon fill="none" stroke="#000000" points="402,-590 348,-590 348,-554 402,-554 402,-590"/>
<text text-anchor="middle" x="375" y="-568.3" font-family="Times,serif" font-size="14.00" fill="#000000">read</text>
</g>
<!-- readFromLocalLog&#45;&gt;read -->
<g id="edge29" class="edge">
<title>readFromLocalLog&#45;&gt;read</title>
<path fill="none" stroke="#000000" d="M375,-635.8015C375,-625.3976 375,-612.1215 375,-600.3768"/>
<polygon fill="#000000" stroke="#000000" points="378.5001,-600.1476 375,-590.1476 371.5001,-600.1476 378.5001,-600.1476"/>
</g>
<!-- read&#45;&gt;partition_readRecords -->
<g id="edge30" class="edge">
<title>read&#45;&gt;partition_readRecords</title>
<path fill="none" stroke="#000000" d="M402.0579,-567.6266C450.4248,-559.5614 554.7275,-541.0444 641,-518 641.734,-517.804 642.4725,-517.6034 643.2148,-517.3989"/>
<polygon fill="#000000" stroke="#000000" points="644.3724,-520.7073 652.9946,-514.5503 642.4148,-513.9866 644.3724,-520.7073"/>
</g>
<!-- read&#45;&gt;fetchOffsetSnapshot -->
<g id="edge34" class="edge">
<title>read&#45;&gt;fetchOffsetSnapshot</title>
<path fill="none" stroke="#000000" d="M402.384,-561.8369C430.4762,-551.4109 475.0334,-534.8742 511.0043,-521.5242"/>
<polygon fill="#000000" stroke="#000000" points="512.2667,-524.789 520.424,-518.0282 509.831,-518.2264 512.2667,-524.789"/>
</g>
<!-- read&#45;&gt;getPartitionOrException -->
<g id="edge35" class="edge">
<title>read&#45;&gt;getPartitionOrException</title>
<path fill="none" stroke="#000000" d="M347.9569,-562.2275C321.4258,-552.2829 280.1012,-535.8318 246,-518 211.9116,-500.1749 205.1255,-492.659 173,-471.5 163.3169,-465.1224 153.0623,-458.2446 143.187,-451.5571"/>
<polygon fill="#000000" stroke="#000000" points="144.8693,-448.4688 134.6301,-445.7466 140.9369,-454.2599 144.8693,-448.4688"/>
</g>
<!-- findPreferredReadReplica -->
<g id="node35" class="node">
<title>findPreferredReadReplica</title>
<polygon fill="none" stroke="#000000" points="413,-518 255,-518 255,-482 413,-482 413,-518"/>
<text text-anchor="middle" x="334" y="-496.3" font-family="Times,serif" font-size="14.00" fill="#000000">findPreferredReadReplica</text>
</g>
<!-- read&#45;&gt;findPreferredReadReplica -->
<g id="edge36" class="edge">
<title>read&#45;&gt;findPreferredReadReplica</title>
<path fill="none" stroke="#000000" d="M364.654,-553.8314C360.0763,-545.7925 354.5948,-536.1666 349.5412,-527.2918"/>
<polygon fill="#000000" stroke="#000000" points="352.4752,-525.3712 344.4853,-518.4133 346.3923,-528.8351 352.4752,-525.3712"/>
</g>
<!-- appendRecords -->
<g id="node33" class="node">
<title>appendRecords</title>
<polygon fill="none" stroke="#000000" points="274,-852 174,-852 174,-816 274,-816 274,-852"/>
<text text-anchor="middle" x="224" y="-830.3" font-family="Times,serif" font-size="14.00" fill="#000000">appendRecords</text>
</g>
<!-- appendRecords&#45;&gt;appendToLocalLog -->
<g id="edge31" class="edge">
<title>appendRecords&#45;&gt;appendToLocalLog</title>
<path fill="none" stroke="#000000" d="M224,-815.9737C224,-808.3257 224,-799.0739 224,-789.9199"/>
<polygon fill="#000000" stroke="#000000" points="227.5001,-789.717 224,-779.717 220.5001,-789.717 227.5001,-789.717"/>
</g>
<!-- getPartitionOrError -->
<g id="node38" class="node">
<title>getPartitionOrError</title>
<polygon fill="none" stroke="#000000" points="166,-338 44,-338 44,-302 166,-302 166,-338"/>
<text text-anchor="middle" x="105" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">getPartitionOrError</text>
</g>
<!-- getPartitionOrException&#45;&gt;getPartitionOrError -->
<g id="edge40" class="edge">
<title>getPartitionOrException&#45;&gt;getPartitionOrError</title>
<path fill="none" stroke="#000000" d="M94.8287,-384.4185C96.6778,-372.7075 98.7761,-359.4182 100.5846,-347.9642"/>
<polygon fill="#000000" stroke="#000000" points="104.046,-348.4827 102.1486,-338.0591 97.1317,-347.3909 104.046,-348.4827"/>
</g>
<!-- findPreferredReadReplica&#45;&gt;getPartitionOrException -->
<g id="edge37" class="edge">
<title>findPreferredReadReplica&#45;&gt;getPartitionOrException</title>
<path fill="none" stroke="#000000" d="M254.6082,-489.1177C221.8476,-483.9721 188.0526,-477.6248 173,-471.5 160.3909,-466.3694 147.751,-459.1113 136.2723,-451.5011"/>
<polygon fill="#000000" stroke="#000000" points="137.9654,-448.418 127.7406,-445.6423 134.0028,-454.1884 137.9654,-448.418"/>
</g>
<!-- getPartitionReplicaEndpoints -->
<g id="node36" class="node">
<title>getPartitionReplicaEndpoints</title>
<polygon fill="none" stroke="#000000" points="358,-433 182,-433 182,-397 358,-397 358,-433"/>
<text text-anchor="middle" x="270" y="-411.3" font-family="Times,serif" font-size="14.00" fill="#000000">getPartitionReplicaEndpoints</text>
</g>
<!-- findPreferredReadReplica&#45;&gt;getPartitionReplicaEndpoints -->
<g id="edge38" class="edge">
<title>findPreferredReadReplica&#45;&gt;getPartitionReplicaEndpoints</title>
<path fill="none" stroke="#000000" d="M320.4272,-481.9737C311.5178,-470.1409 299.7174,-454.4685 289.7719,-441.2596"/>
<polygon fill="#000000" stroke="#000000" points="292.3643,-438.8838 283.5532,-433.0003 286.7722,-443.0943 292.3643,-438.8838"/>
</g>
<!-- remoteReplicas -->
<g id="node37" class="node">
<title>remoteReplicas</title>
<polygon fill="none" stroke="#000000" points="477.5,-433 376.5,-433 376.5,-397 477.5,-397 477.5,-433"/>
<text text-anchor="middle" x="427" y="-411.3" font-family="Times,serif" font-size="14.00" fill="#000000">remoteReplicas</text>
</g>
<!-- findPreferredReadReplica&#45;&gt;remoteReplicas -->
<g id="edge39" class="edge">
<title>findPreferredReadReplica&#45;&gt;remoteReplicas</title>
<path fill="none" stroke="#000000" d="M355.4196,-481.7358C359.2993,-478.3613 363.2898,-474.8462 367,-471.5 378.2859,-461.3213 390.5358,-449.8624 401.0067,-439.938"/>
<polygon fill="#000000" stroke="#000000" points="403.4434,-442.4507 408.2775,-433.0229 398.6193,-437.3784 403.4434,-442.4507"/>
</g>
<!-- getPartition -->
<g id="node39" class="node">
<title>getPartition</title>
<polygon fill="none" stroke="#000000" points="176,-253 96,-253 96,-217 176,-217 176,-253"/>
<text text-anchor="middle" x="136" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">getPartition</text>
</g>
<!-- getPartitionOrError&#45;&gt;getPartition -->
<g id="edge41" class="edge">
<title>getPartitionOrError&#45;&gt;getPartition</title>
<path fill="none" stroke="#000000" d="M111.5743,-301.9737C115.7665,-290.4789 121.2801,-275.3609 126.0079,-262.3977"/>
<polygon fill="#000000" stroke="#000000" points="129.297,-263.5943 129.4352,-253.0003 122.7207,-261.1958 129.297,-263.5943"/>
</g>
<!-- allPartitions -->
<g id="node40" class="node">
<title>allPartitions</title>
<polygon fill="#95e1d3" stroke="#000000" points="16,-88.5 16,-149.5 288,-149.5 288,-88.5 16,-88.5"/>
<text text-anchor="middle" x="152" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#000000">allPartitions</text>
<polyline fill="none" stroke="#000000" points="16,-126.5 288,-126.5 "/>
<text text-anchor="start" x="24" y="-111.3" font-family="Times,serif" font-size="14.00" fill="#000000">replicaManager本地缓存的所有parition集合</text>
<text text-anchor="start" x="24" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 由KafkaController来同步</text>
</g>
<!-- getPartition&#45;&gt;allPartitions -->
<g id="edge42" class="edge">
<title>getPartition&#45;&gt;allPartitions</title>
<path fill="none" stroke="#000000" d="M138.5,-216.875C140.6106,-201.5731 143.7112,-179.0942 146.4087,-159.5368"/>
<polygon fill="#000000" stroke="#000000" points="149.876,-160.0138 147.7753,-149.6294 142.9416,-159.0573 149.876,-160.0138"/>
</g>
<!-- handle -->
<g id="node41" class="node">
<title>handle</title>
<polygon fill="none" stroke="#000000" points="215,-978.5 215,-1024.5 377,-1024.5 377,-978.5 215,-978.5"/>
<text text-anchor="middle" x="296" y="-1009.3" font-family="Times,serif" font-size="14.00" fill="#000000">handle</text>
<polyline fill="none" stroke="#000000" points="215,-1001.5 377,-1001.5 "/>
<text text-anchor="start" x="223" y="-986.3" font-family="Times,serif" font-size="14.00" fill="#000000">KafkaServer api处理入口</text>
</g>
<!-- handleProduceRequest -->
<g id="node42" class="node">
<title>handleProduceRequest</title>
<polygon fill="none" stroke="#000000" points="294,-942 154,-942 154,-906 294,-906 294,-942"/>
<text text-anchor="middle" x="224" y="-920.3" font-family="Times,serif" font-size="14.00" fill="#000000">handleProduceRequest</text>
</g>
<!-- handle&#45;&gt;handleProduceRequest -->
<g id="edge43" class="edge">
<title>handle&#45;&gt;handleProduceRequest</title>
<path fill="none" stroke="#000000" d="M274.3976,-978.2474C265.9838,-969.1909 256.3137,-958.7821 247.7084,-949.5195"/>
<polygon fill="#000000" stroke="#000000" points="250.152,-947.0074 240.7814,-942.0633 245.0236,-951.7718 250.152,-947.0074"/>
</g>
<!-- handleFetchRequest -->
<g id="node43" class="node">
<title>handleFetchRequest</title>
<polygon fill="none" stroke="#000000" points="438,-942 312,-942 312,-906 438,-906 438,-942"/>
<text text-anchor="middle" x="375" y="-920.3" font-family="Times,serif" font-size="14.00" fill="#000000">handleFetchRequest</text>
</g>
<!-- handle&#45;&gt;handleFetchRequest -->
<g id="edge44" class="edge">
<title>handle&#45;&gt;handleFetchRequest</title>
<path fill="none" stroke="#000000" d="M319.7026,-978.2474C329.0268,-969.1003 339.757,-958.5738 349.2695,-949.242"/>
<polygon fill="#000000" stroke="#000000" points="351.8996,-951.5648 356.5871,-942.0633 346.9975,-946.5678 351.8996,-951.5648"/>
</g>
<!-- handleProduceRequest&#45;&gt;appendRecords -->
<g id="edge46" class="edge">
<title>handleProduceRequest&#45;&gt;appendRecords</title>
<path fill="none" stroke="#000000" d="M224,-905.7872C224,-893.3443 224,-876.6053 224,-862.4211"/>
<polygon fill="#000000" stroke="#000000" points="227.5001,-862.1857 224,-852.1858 220.5001,-862.1858 227.5001,-862.1857"/>
</g>
<!-- handleFetchRequest&#45;&gt;fetchMessages -->
<g id="edge45" class="edge">
<title>handleFetchRequest&#45;&gt;fetchMessages</title>
<path fill="none" stroke="#000000" d="M375,-905.7872C375,-893.3443 375,-876.6053 375,-862.4211"/>
<polygon fill="#000000" stroke="#000000" points="378.5001,-862.1857 375,-852.1858 371.5001,-862.1858 378.5001,-862.1857"/>
</g>
</g>
</svg>
