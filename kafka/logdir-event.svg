<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: logdir_event Pages: 1 -->
<svg width="912pt" height="299pt"
 viewBox="0.00 0.00 912.18 299.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 295)">
<title>logdir_event</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-295 908.1807,-295 908.1807,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_zkClient</title>
<path fill="none" stroke="#000000" d="M238.7383,-120C238.7383,-120 429.4834,-120 429.4834,-120 435.4834,-120 441.4834,-126 441.4834,-132 441.4834,-132 441.4834,-271 441.4834,-271 441.4834,-277 435.4834,-283 429.4834,-283 429.4834,-283 238.7383,-283 238.7383,-283 232.7383,-283 226.7383,-277 226.7383,-271 226.7383,-271 226.7383,-132 226.7383,-132 226.7383,-126 232.7383,-120 238.7383,-120"/>
<text text-anchor="middle" x="334.1108" y="-263" font-family="Times,serif" font-size="20.00" fill="#000000">zkClient</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_controllerContext</title>
<path fill="none" stroke="#000000" d="M490.187,-110C490.187,-110 884.1807,-110 884.1807,-110 890.1807,-110 896.1807,-116 896.1807,-122 896.1807,-122 896.1807,-192 896.1807,-192 896.1807,-198 890.1807,-204 884.1807,-204 884.1807,-204 490.187,-204 490.187,-204 484.187,-204 478.187,-198 478.187,-192 478.187,-192 478.187,-122 478.187,-122 478.187,-116 484.187,-110 490.187,-110"/>
<text text-anchor="middle" x="687.1838" y="-184" font-family="Times,serif" font-size="20.00" fill="#000000">controllerContext</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_ReplicaStateMachine</title>
<path fill="none" stroke="#000000" d="M473.4834,-8C473.4834,-8 712.4082,-8 712.4082,-8 718.4082,-8 724.4082,-14 724.4082,-20 724.4082,-20 724.4082,-90 724.4082,-90 724.4082,-96 718.4082,-102 712.4082,-102 712.4082,-102 473.4834,-102 473.4834,-102 467.4834,-102 461.4834,-96 461.4834,-90 461.4834,-90 461.4834,-20 461.4834,-20 461.4834,-14 467.4834,-8 473.4834,-8"/>
<text text-anchor="middle" x="592.9458" y="-82" font-family="Times,serif" font-size="20.00" fill="#000000">ReplicaStateMachine</text>
</g>
<!-- getBrokerIdsFromLogDirEvents -->
<g id="node1" class="node">
<title>getBrokerIdsFromLogDirEvents</title>
<polygon fill="none" stroke="#000000" points="234.7383,-197.2 234.7383,-246.8 433.4834,-246.8 433.4834,-197.2 234.7383,-197.2"/>
<text text-anchor="middle" x="334.1108" y="-231.6" font-family="Times,serif" font-size="14.00" fill="#000000">getBrokerIdsFromLogDirEvents</text>
<polyline fill="none" stroke="#000000" points="234.7383,-224.8 433.4834,-224.8 "/>
<text text-anchor="start" x="242.7383" y="-209.6" font-family="Times,serif" font-size="14.00" fill="#000000">获取broker列表</text>
</g>
<!-- deleteLogDirEventNotifications -->
<g id="node2" class="node">
<title>deleteLogDirEventNotifications</title>
<polygon fill="none" stroke="#000000" points="236.3003,-128.2 236.3003,-177.8 431.9214,-177.8 431.9214,-128.2 236.3003,-128.2"/>
<text text-anchor="middle" x="334.1108" y="-162.6" font-family="Times,serif" font-size="14.00" fill="#000000">deleteLogDirEventNotifications</text>
<polyline fill="none" stroke="#000000" points="236.3003,-155.8 431.9214,-155.8 "/>
<text text-anchor="middle" x="334.1108" y="-140.6" font-family="Times,serif" font-size="14.00" fill="#000000">处理完毕，清理掉通知</text>
</g>
<!-- replicasOnBrokers -->
<g id="node3" class="node">
<title>replicasOnBrokers</title>
<polygon fill="none" stroke="#000000" points="486.187,-118.2 486.187,-167.8 699.7046,-167.8 699.7046,-118.2 486.187,-118.2"/>
<text text-anchor="middle" x="592.9458" y="-152.6" font-family="Times,serif" font-size="14.00" fill="#000000">replicasOnBrokers</text>
<polyline fill="none" stroke="#000000" points="486.187,-145.8 699.7046,-145.8 "/>
<text text-anchor="middle" x="592.9458" y="-130.6" font-family="Times,serif" font-size="14.00" fill="#000000">获取brokers上的所有replicas列表</text>
</g>
<!-- partitionAssignments -->
<g id="node4" class="node">
<title>partitionAssignments</title>
<polygon fill="#95e1d3" stroke="#000000" points="888.0671,-161 756.5218,-161 752.5218,-157 752.5218,-125 884.0671,-125 888.0671,-129 888.0671,-161"/>
<polyline fill="none" stroke="#000000" points="884.0671,-157 752.5218,-157 "/>
<polyline fill="none" stroke="#000000" points="884.0671,-157 884.0671,-125 "/>
<polyline fill="none" stroke="#000000" points="884.0671,-157 888.0671,-161 "/>
<text text-anchor="middle" x="820.2944" y="-138.8" font-family="Times,serif" font-size="14.00" fill="#000000">partitionAssignments</text>
</g>
<!-- replicasOnBrokers&#45;&gt;partitionAssignments -->
<g id="edge1" class="edge">
<title>replicasOnBrokers&#45;&gt;partitionAssignments</title>
<path fill="none" stroke="#000000" d="M699.9629,-143C714.1882,-143 728.5531,-143 742.1623,-143"/>
<polygon fill="#000000" stroke="#000000" points="742.4072,-146.5001 752.4071,-143 742.4071,-139.5001 742.4072,-146.5001"/>
</g>
<!-- rm_OnlineReplica -->
<g id="node5" class="node">
<title>rm_OnlineReplica</title>
<polygon fill="none" stroke="#000000" points="469.4834,-16.2 469.4834,-65.8 716.4082,-65.8 716.4082,-16.2 469.4834,-16.2"/>
<text text-anchor="middle" x="592.9458" y="-50.6" font-family="Times,serif" font-size="14.00" fill="#000000">handleStateChanges(OnlineReplica)</text>
<polyline fill="none" stroke="#000000" points="469.4834,-43.8 716.4082,-43.8 "/>
<text text-anchor="middle" x="592.9458" y="-28.6" font-family="Times,serif" font-size="14.00" fill="#000000">向这些replica发送LeaderAndIsrRequest</text>
</g>
<!-- processLogDirEventNotification -->
<g id="node6" class="node">
<title>processLogDirEventNotification</title>
<polygon fill="none" stroke="#000000" points="198.6076,-171 .1307,-171 .1307,-135 198.6076,-135 198.6076,-171"/>
<text text-anchor="middle" x="99.3691" y="-148.8" font-family="Times,serif" font-size="14.00" fill="#000000">processLogDirEventNotification</text>
</g>
<!-- processLogDirEventNotification&#45;&gt;getBrokerIdsFromLogDirEvents -->
<g id="edge2" class="edge">
<title>processLogDirEventNotification&#45;&gt;getBrokerIdsFromLogDirEvents</title>
<path fill="none" stroke="#000000" d="M160.7381,-171.0388C184.9353,-178.1513 213.2801,-186.483 239.958,-194.3247"/>
<polygon fill="#000000" stroke="#000000" points="239.1193,-197.7262 249.7005,-197.1884 241.0935,-191.0103 239.1193,-197.7262"/>
</g>
<!-- processLogDirEventNotification&#45;&gt;deleteLogDirEventNotifications -->
<g id="edge3" class="edge">
<title>processLogDirEventNotification&#45;&gt;deleteLogDirEventNotifications</title>
<path fill="none" stroke="#000000" d="M198.9208,-153C207.909,-153 217.04,-153 226.0962,-153"/>
<polygon fill="#000000" stroke="#000000" points="226.2776,-156.5001 236.2776,-153 226.2776,-149.5001 226.2776,-156.5001"/>
</g>
<!-- onBrokerLogDirFailure -->
<g id="node7" class="node">
<title>onBrokerLogDirFailure</title>
<polygon fill="none" stroke="#000000" points="408.8562,-110 259.3655,-110 259.3655,-74 408.8562,-74 408.8562,-110"/>
<text text-anchor="middle" x="334.1108" y="-87.8" font-family="Times,serif" font-size="14.00" fill="#000000">onBrokerLogDirFailure</text>
</g>
<!-- processLogDirEventNotification&#45;&gt;onBrokerLogDirFailure -->
<g id="edge4" class="edge">
<title>processLogDirEventNotification&#45;&gt;onBrokerLogDirFailure</title>
<path fill="none" stroke="#000000" d="M158.4505,-134.9997C179.8777,-128.6935 204.3233,-121.7548 226.7383,-116 234.0064,-114.134 241.5724,-112.2755 249.1737,-110.4662"/>
<polygon fill="#000000" stroke="#000000" points="250.2299,-113.8134 259.1646,-108.1194 248.6292,-106.9989 250.2299,-113.8134"/>
</g>
<!-- onBrokerLogDirFailure&#45;&gt;replicasOnBrokers -->
<g id="edge5" class="edge">
<title>onBrokerLogDirFailure&#45;&gt;replicasOnBrokers</title>
<path fill="none" stroke="#000000" d="M408.9766,-106.7513C429.916,-110.8771 453.1874,-115.4625 475.9422,-119.946"/>
<polygon fill="#000000" stroke="#000000" points="475.513,-123.4286 486.001,-121.9279 476.8663,-116.5607 475.513,-123.4286"/>
</g>
<!-- onBrokerLogDirFailure&#45;&gt;rm_OnlineReplica -->
<g id="edge6" class="edge">
<title>onBrokerLogDirFailure&#45;&gt;rm_OnlineReplica</title>
<path fill="none" stroke="#000000" d="M408.9766,-77.2487C424.8274,-74.1255 442.0145,-70.739 459.3022,-67.3327"/>
<polygon fill="#000000" stroke="#000000" points="460.3486,-70.6939 469.4833,-65.3267 458.9953,-63.826 460.3486,-70.6939"/>
</g>
</g>
</svg>
