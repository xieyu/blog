<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: replica_state_machine Pages: 1 -->
<svg width="1003pt" height="247pt"
 viewBox="0.00 0.00 1003.00 247.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 243)">
<title>replica_state_machine</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-243 999,-243 999,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_ReplicaState</title>
<polygon fill="none" stroke="#000000" points="8,-8 8,-231 987,-231 987,-8 8,-8"/>
<text text-anchor="middle" x="497.5" y="-211" font-family="Times,serif" font-size="20.00" fill="#000000">Replica State Machine</text>
</g>
<!-- NewReplica -->
<g id="node1" class="node">
<title>NewReplica</title>
<polygon fill="none" stroke="#000000" points="16,-118.5 16,-179.5 139,-179.5 139,-118.5 16,-118.5"/>
<text text-anchor="middle" x="77.5" y="-164.3" font-family="Times,serif" font-size="14.00" fill="#000000">NewReplica</text>
<polyline fill="none" stroke="#000000" points="16,-156.5 139,-156.5 "/>
<text text-anchor="start" x="24" y="-141.3" font-family="Times,serif" font-size="14.00" fill="#000000">刚创建时候状态</text>
<text text-anchor="start" x="24" y="-126.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 只能作为follower</text>
</g>
<!-- OnlineReplica -->
<g id="node2" class="node">
<title>OnlineReplica</title>
<polygon fill="none" stroke="#000000" points="175,-50.5 175,-111.5 345,-111.5 345,-50.5 175,-50.5"/>
<text text-anchor="middle" x="260" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000">onlineReplicas</text>
<polyline fill="none" stroke="#000000" points="175,-88.5 345,-88.5 "/>
<text text-anchor="start" x="183" y="-73.3" font-family="Times,serif" font-size="14.00" fill="#000000">replica开始后的状态</text>
<text text-anchor="start" x="183" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 可以作为leader和follower</text>
</g>
<!-- NewReplica&#45;&gt;OnlineReplica -->
<g id="edge2" class="edge">
<title>NewReplica&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M139.0317,-126.0731C148.5204,-122.5376 158.4903,-118.8228 168.4647,-115.1063"/>
<polygon fill="#000000" stroke="#000000" points="169.865,-118.3197 178.0136,-111.5483 167.4209,-111.7602 169.865,-118.3197"/>
</g>
<!-- OfflineReplica -->
<g id="node3" class="node">
<title>OfflineReplica</title>
<polygon fill="none" stroke="#000000" points="381,-50.5 381,-111.5 573,-111.5 573,-50.5 381,-50.5"/>
<text text-anchor="middle" x="477" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000">OfflineReplica</text>
<polyline fill="none" stroke="#000000" points="381,-88.5 573,-88.5 "/>
<text text-anchor="start" x="389" y="-73.3" font-family="Times,serif" font-size="14.00" fill="#000000">replica下线了,由于</text>
<text text-anchor="start" x="389" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 存储该replica的broker下线了</text>
</g>
<!-- NewReplica&#45;&gt;OfflineReplica -->
<g id="edge5" class="edge">
<title>NewReplica&#45;&gt;OfflineReplica</title>
<path fill="none" stroke="#000000" d="M139.1769,-153.1841C193.953,-155.3739 275.812,-154.8851 345,-139 367.2142,-133.8998 390.3253,-125.0901 410.885,-115.8549"/>
<polygon fill="#000000" stroke="#000000" points="412.52,-118.9554 420.1394,-111.5936 409.5922,-112.597 412.52,-118.9554"/>
</g>
<!-- OnlineReplica&#45;&gt;OnlineReplica -->
<g id="edge3" class="edge">
<title>OnlineReplica&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M225.875,-111.625C225.875,-121.8333 237.25,-130 260,-130 274.9297,-130 284.9606,-126.4829 290.0927,-121.1798"/>
<polygon fill="#000000" stroke="#000000" points="293.4614,-122.199 294.125,-111.625 287.0122,-119.4773 293.4614,-122.199"/>
</g>
<!-- OnlineReplica&#45;&gt;OfflineReplica -->
<g id="edge6" class="edge">
<title>OnlineReplica&#45;&gt;OfflineReplica</title>
<path fill="none" stroke="#000000" d="M345.1413,-74.391C353.5903,-74.2875 362.2376,-74.241 370.865,-74.2514"/>
<polygon fill="#000000" stroke="#000000" points="370.9573,-77.7517 380.9705,-74.2898 370.9839,-70.7518 370.9573,-77.7517"/>
</g>
<!-- OfflineReplica&#45;&gt;OnlineReplica -->
<g id="edge4" class="edge">
<title>OfflineReplica&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M380.9705,-87.7102C372.4854,-87.7646 363.8972,-87.7632 355.4172,-87.7062"/>
<polygon fill="#000000" stroke="#000000" points="355.174,-84.2038 345.1413,-87.609 355.1077,-91.2035 355.174,-84.2038"/>
</g>
<!-- ReplicaDeletionStarted -->
<g id="node4" class="node">
<title>ReplicaDeletionStarted</title>
<polygon fill="none" stroke="#000000" points="609,-70 609,-116 776,-116 776,-70 609,-70"/>
<text text-anchor="middle" x="692.5" y="-100.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReplicaDeletionStarted</text>
<polyline fill="none" stroke="#000000" points="609,-93 776,-93 "/>
<text text-anchor="start" x="617" y="-77.8" font-family="Times,serif" font-size="14.00" fill="#000000">replica开始进入删除状态</text>
</g>
<!-- OfflineReplica&#45;&gt;ReplicaDeletionStarted -->
<g id="edge7" class="edge">
<title>OfflineReplica&#45;&gt;ReplicaDeletionStarted</title>
<path fill="none" stroke="#000000" d="M573.0904,-86.3507C581.5487,-86.8217 590.104,-87.2981 598.5444,-87.7681"/>
<polygon fill="#000000" stroke="#000000" points="598.5896,-91.276 608.7688,-88.3375 598.9789,-84.2868 598.5896,-91.276"/>
</g>
<!-- ReplicaDeletionIneligible -->
<g id="node6" class="node">
<title>ReplicaDeletionIneligible</title>
<polygon fill="none" stroke="#000000" points="817.5,-16 817.5,-62 973.5,-62 973.5,-16 817.5,-16"/>
<text text-anchor="middle" x="895.5" y="-46.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReplicaDeletionIneligible</text>
<polyline fill="none" stroke="#000000" points="817.5,-39 973.5,-39 "/>
<text text-anchor="start" x="825.5" y="-23.8" font-family="Times,serif" font-size="14.00" fill="#000000">replica删除失败</text>
</g>
<!-- OfflineReplica&#45;&gt;ReplicaDeletionIneligible -->
<g id="edge9" class="edge">
<title>OfflineReplica&#45;&gt;ReplicaDeletionIneligible</title>
<path fill="none" stroke="#000000" d="M573.1348,-65.5906C585.1923,-63.9067 597.3703,-62.3257 609,-61 675.2789,-53.4445 750.4874,-47.7796 807.2126,-44.0916"/>
<polygon fill="#000000" stroke="#000000" points="807.4693,-47.5825 817.2244,-43.4487 807.0206,-40.5968 807.4693,-47.5825"/>
</g>
<!-- ReplicaDeletionSuccessful -->
<g id="node5" class="node">
<title>ReplicaDeletionSuccessful</title>
<polygon fill="none" stroke="#000000" points="812,-81 812,-127 979,-127 979,-81 812,-81"/>
<text text-anchor="middle" x="895.5" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReplicaDeletionSuccessful</text>
<polyline fill="none" stroke="#000000" points="812,-104 979,-104 "/>
<text text-anchor="start" x="820" y="-88.8" font-family="Times,serif" font-size="14.00" fill="#000000">replica删除请求返回成功</text>
</g>
<!-- ReplicaDeletionStarted&#45;&gt;ReplicaDeletionSuccessful -->
<g id="edge8" class="edge">
<title>ReplicaDeletionStarted&#45;&gt;ReplicaDeletionSuccessful</title>
<path fill="none" stroke="#000000" d="M776.2399,-97.5376C784.7178,-97.997 793.3663,-98.4657 801.9388,-98.9302"/>
<polygon fill="#000000" stroke="#000000" points="801.7778,-102.4265 811.9526,-99.4728 802.1566,-95.4368 801.7778,-102.4265"/>
</g>
<!-- ReplicaDeletionStarted&#45;&gt;ReplicaDeletionIneligible -->
<g id="edge10" class="edge">
<title>ReplicaDeletionStarted&#45;&gt;ReplicaDeletionIneligible</title>
<path fill="none" stroke="#000000" d="M776.2399,-70.7244C786.5855,-67.9723 797.1853,-65.1527 807.591,-62.3847"/>
<polygon fill="#000000" stroke="#000000" points="808.7293,-65.7037 817.4935,-59.7505 806.9298,-58.9389 808.7293,-65.7037"/>
</g>
<!-- NonExistentReplica -->
<g id="node7" class="node">
<title>NonExistentReplica</title>
<polygon fill="none" stroke="#000000" points="833,-146 833,-192 958,-192 958,-146 833,-146"/>
<text text-anchor="middle" x="895.5" y="-176.8" font-family="Times,serif" font-size="14.00" fill="#000000">NonExistentReplica</text>
<polyline fill="none" stroke="#000000" points="833,-169 958,-169 "/>
<text text-anchor="start" x="841" y="-153.8" font-family="Times,serif" font-size="14.00" fill="#000000">replica删除成功</text>
</g>
<!-- ReplicaDeletionStarted&#45;&gt;NonExistentReplica -->
<g id="edge11" class="edge">
<title>ReplicaDeletionStarted&#45;&gt;NonExistentReplica</title>
<path fill="none" stroke="#000000" d="M753.9576,-116.0088C776.1152,-124.3042 801.3047,-133.7348 824.2301,-142.3177"/>
<polygon fill="#000000" stroke="#000000" points="823.3089,-145.71 833.9013,-145.9384 825.7633,-139.1543 823.3089,-145.71"/>
</g>
<!-- NonExistentReplica&#45;&gt;NewReplica -->
<g id="edge1" class="edge">
<title>NonExistentReplica&#45;&gt;NewReplica</title>
<path fill="none" stroke="#000000" d="M832.8114,-167.4673C683.515,-163.817 307.6045,-154.626 149.4181,-150.7584"/>
<polygon fill="#000000" stroke="#000000" points="149.4009,-147.257 139.3183,-150.5114 149.2297,-154.2549 149.4009,-147.257"/>
</g>
</g>
</svg>
