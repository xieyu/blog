<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: replica_target_state Pages: 1 -->
<svg width="1893pt" height="704pt"
 viewBox="0.00 0.00 1893.00 703.94" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 699.9389)">
<title>replica_target_state</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-699.9389 1889,-699.9389 1889,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_ReplicaState</title>
<polygon fill="none" stroke="#000000" points="718,-199.5 718,-422.5 1877,-422.5 1877,-199.5 718,-199.5"/>
<text text-anchor="middle" x="1297.5" y="-402.5" font-family="Times,serif" font-size="20.00" fill="#000000">Replica State Machine</text>
</g>
<g id="clust16" class="cluster">
<title>cluster_zk</title>
<polygon fill="none" stroke="#000000" points="8,-290.5 8,-426.5 207,-426.5 207,-290.5 8,-290.5"/>
<text text-anchor="middle" x="107.5" y="-406.5" font-family="Times,serif" font-size="20.00" fill="#000000">zk</text>
</g>
<g id="clust17" class="cluster">
<title>cluster_TopicDeletionManager</title>
<polygon fill="none" stroke="#000000" points="1005,-109.5 1005,-191.5 1206,-191.5 1206,-109.5 1005,-109.5"/>
<text text-anchor="middle" x="1105.5" y="-171.5" font-family="Times,serif" font-size="20.00" fill="#000000">TopicDeletionManager</text>
</g>
<!-- NewReplica -->
<g id="node1" class="node">
<title>NewReplica</title>
<polygon fill="none" stroke="#000000" points="771,-289 771,-350 894,-350 894,-289 771,-289"/>
<text text-anchor="middle" x="832.5" y="-334.8" font-family="Times,serif" font-size="14.00" fill="#000000">NewReplica</text>
<polyline fill="none" stroke="#000000" points="771,-327 894,-327 "/>
<text text-anchor="start" x="779" y="-311.8" font-family="Times,serif" font-size="14.00" fill="#000000">刚创建时候状态</text>
<text text-anchor="start" x="779" y="-296.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 只能作为follower</text>
</g>
<!-- OnlineReplica -->
<g id="node2" class="node">
<title>OnlineReplica</title>
<polygon fill="none" stroke="#000000" points="1020,-305 1020,-366 1190,-366 1190,-305 1020,-305"/>
<text text-anchor="middle" x="1105" y="-350.8" font-family="Times,serif" font-size="14.00" fill="#000000">onlineReplicas</text>
<polyline fill="none" stroke="#000000" points="1020,-343 1190,-343 "/>
<text text-anchor="start" x="1028" y="-327.8" font-family="Times,serif" font-size="14.00" fill="#000000">replica开始后的状态</text>
<text text-anchor="start" x="1028" y="-312.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 可以作为leader和follower</text>
</g>
<!-- NewReplica&#45;&gt;OnlineReplica -->
<g id="edge2" class="edge">
<title>NewReplica&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M894.3345,-323.1306C928.4254,-325.1323 971.4824,-327.6604 1009.7723,-329.9087"/>
<polygon fill="#000000" stroke="#000000" points="1009.7253,-333.4118 1019.9133,-330.5041 1010.1357,-326.4239 1009.7253,-333.4118"/>
</g>
<!-- OfflineReplica -->
<g id="node3" class="node">
<title>OfflineReplica</title>
<polygon fill="none" stroke="#000000" points="1271,-265 1271,-326 1463,-326 1463,-265 1271,-265"/>
<text text-anchor="middle" x="1367" y="-310.8" font-family="Times,serif" font-size="14.00" fill="#000000">OfflineReplica</text>
<polyline fill="none" stroke="#000000" points="1271,-303 1463,-303 "/>
<text text-anchor="start" x="1279" y="-287.8" font-family="Times,serif" font-size="14.00" fill="#000000">replica下线了,由于</text>
<text text-anchor="start" x="1279" y="-272.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 存储该replica的broker下线了</text>
</g>
<!-- NewReplica&#45;&gt;OfflineReplica -->
<g id="edge5" class="edge">
<title>NewReplica&#45;&gt;OfflineReplica</title>
<path fill="none" stroke="#000000" d="M894.2916,-306.783C919.2396,-302.2541 948.3742,-297.7265 975,-295.5 1071.3836,-287.4402 1181.5642,-288.3293 1260.5181,-290.7152"/>
<polygon fill="#000000" stroke="#000000" points="1260.8543,-294.2275 1270.9598,-291.0449 1261.0753,-287.2309 1260.8543,-294.2275"/>
</g>
<!-- OnlineReplica&#45;&gt;OnlineReplica -->
<g id="edge3" class="edge">
<title>OnlineReplica&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M1055.875,-366.125C1055.875,-376.3333 1072.25,-384.5 1105,-384.5 1127.5156,-384.5 1142.2915,-380.64 1149.3276,-374.9102"/>
<polygon fill="#000000" stroke="#000000" points="1152.4041,-376.5792 1154.125,-366.125 1146.2604,-373.2242 1152.4041,-376.5792"/>
</g>
<!-- OnlineReplica&#45;&gt;OfflineReplica -->
<g id="edge6" class="edge">
<title>OnlineReplica&#45;&gt;OfflineReplica</title>
<path fill="none" stroke="#000000" d="M1190.0639,-316.1464C1212.5514,-312.3229 1237.1067,-308.4818 1260.5711,-305.1054"/>
<polygon fill="#000000" stroke="#000000" points="1261.1427,-308.5594 1270.5512,-303.6882 1260.1585,-301.6289 1261.1427,-308.5594"/>
</g>
<!-- OfflineReplica&#45;&gt;OnlineReplica -->
<g id="edge4" class="edge">
<title>OfflineReplica&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M1270.5512,-316.7618C1247.566,-320.5608 1223.0525,-324.2977 1200.1271,-327.4966"/>
<polygon fill="#000000" stroke="#000000" points="1199.4941,-324.0506 1190.0639,-328.8799 1200.4474,-330.9854 1199.4941,-324.0506"/>
</g>
<!-- ReplicaDeletionStarted -->
<g id="node4" class="node">
<title>ReplicaDeletionStarted</title>
<polygon fill="none" stroke="#000000" points="1499,-272.5 1499,-318.5 1666,-318.5 1666,-272.5 1499,-272.5"/>
<text text-anchor="middle" x="1582.5" y="-303.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReplicaDeletionStarted</text>
<polyline fill="none" stroke="#000000" points="1499,-295.5 1666,-295.5 "/>
<text text-anchor="start" x="1507" y="-280.3" font-family="Times,serif" font-size="14.00" fill="#000000">replica开始进入删除状态</text>
</g>
<!-- OfflineReplica&#45;&gt;ReplicaDeletionStarted -->
<g id="edge7" class="edge">
<title>OfflineReplica&#45;&gt;ReplicaDeletionStarted</title>
<path fill="none" stroke="#000000" d="M1463.0904,-295.5C1471.5487,-295.5 1480.104,-295.5 1488.5444,-295.5"/>
<polygon fill="#000000" stroke="#000000" points="1488.7688,-299.0001 1498.7688,-295.5 1488.7687,-292.0001 1488.7688,-299.0001"/>
</g>
<!-- ReplicaDeletionIneligible -->
<g id="node6" class="node">
<title>ReplicaDeletionIneligible</title>
<polygon fill="none" stroke="#000000" points="1707.5,-207.5 1707.5,-253.5 1863.5,-253.5 1863.5,-207.5 1707.5,-207.5"/>
<text text-anchor="middle" x="1785.5" y="-238.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReplicaDeletionIneligible</text>
<polyline fill="none" stroke="#000000" points="1707.5,-230.5 1863.5,-230.5 "/>
<text text-anchor="start" x="1715.5" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#000000">replica删除失败</text>
</g>
<!-- OfflineReplica&#45;&gt;ReplicaDeletionIneligible -->
<g id="edge9" class="edge">
<title>OfflineReplica&#45;&gt;ReplicaDeletionIneligible</title>
<path fill="none" stroke="#000000" d="M1463.3123,-270.7013C1475.2837,-268.0479 1487.3924,-265.5674 1499,-263.5 1565.0311,-251.7395 1640.4049,-243.2511 1697.2639,-237.8305"/>
<polygon fill="#000000" stroke="#000000" points="1697.6708,-241.3078 1707.2993,-236.8873 1697.0157,-234.3385 1697.6708,-241.3078"/>
</g>
<!-- ReplicaDeletionSuccessful -->
<g id="node5" class="node">
<title>ReplicaDeletionSuccessful</title>
<polygon fill="none" stroke="#000000" points="1702,-337.5 1702,-383.5 1869,-383.5 1869,-337.5 1702,-337.5"/>
<text text-anchor="middle" x="1785.5" y="-368.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReplicaDeletionSuccessful</text>
<polyline fill="none" stroke="#000000" points="1702,-360.5 1869,-360.5 "/>
<text text-anchor="start" x="1710" y="-345.3" font-family="Times,serif" font-size="14.00" fill="#000000">replica删除请求返回成功</text>
</g>
<!-- ReplicaDeletionStarted&#45;&gt;ReplicaDeletionSuccessful -->
<g id="edge8" class="edge">
<title>ReplicaDeletionStarted&#45;&gt;ReplicaDeletionSuccessful</title>
<path fill="none" stroke="#000000" d="M1654.3559,-318.508C1670.3737,-323.6369 1687.4711,-329.1114 1703.8508,-334.3562"/>
<polygon fill="#000000" stroke="#000000" points="1702.8074,-337.6971 1713.3984,-337.4133 1704.9421,-331.0305 1702.8074,-337.6971"/>
</g>
<!-- ReplicaDeletionStarted&#45;&gt;ReplicaDeletionIneligible -->
<g id="edge10" class="edge">
<title>ReplicaDeletionStarted&#45;&gt;ReplicaDeletionIneligible</title>
<path fill="none" stroke="#000000" d="M1654.3559,-272.492C1670.3737,-267.3631 1687.4711,-261.8886 1703.8508,-256.6438"/>
<polygon fill="#000000" stroke="#000000" points="1704.9421,-259.9695 1713.3984,-253.5867 1702.8074,-253.3029 1704.9421,-259.9695"/>
</g>
<!-- NonExistentReplica -->
<g id="node7" class="node">
<title>NonExistentReplica</title>
<polygon fill="none" stroke="#000000" points="1723,-272.5 1723,-318.5 1848,-318.5 1848,-272.5 1723,-272.5"/>
<text text-anchor="middle" x="1785.5" y="-303.3" font-family="Times,serif" font-size="14.00" fill="#000000">NonExistentReplica</text>
<polyline fill="none" stroke="#000000" points="1723,-295.5 1848,-295.5 "/>
<text text-anchor="start" x="1731" y="-280.3" font-family="Times,serif" font-size="14.00" fill="#000000">replica删除成功</text>
</g>
<!-- ReplicaDeletionStarted&#45;&gt;NonExistentReplica -->
<g id="edge11" class="edge">
<title>ReplicaDeletionStarted&#45;&gt;NonExistentReplica</title>
<path fill="none" stroke="#000000" d="M1666.2399,-295.5C1681.5916,-295.5 1697.5027,-295.5 1712.5091,-295.5"/>
<polygon fill="#000000" stroke="#000000" points="1712.7356,-299.0001 1722.7356,-295.5 1712.7355,-292.0001 1712.7356,-299.0001"/>
</g>
<!-- NonExistentReplica&#45;&gt;NewReplica -->
<g id="edge1" class="edge">
<title>NonExistentReplica&#45;&gt;NewReplica</title>
<path fill="none" stroke="#000000" d="M1722.7967,-275.9057C1704.6466,-271.0009 1684.6865,-266.3341 1666,-263.5 1362.221,-217.4279 1277.8625,-232.7442 975,-284.5 951.7043,-288.481 926.5789,-294.173 904.0092,-299.8132"/>
<polygon fill="#000000" stroke="#000000" points="903.0044,-296.4571 894.1716,-302.308 904.7252,-303.2424 903.0044,-296.4571"/>
</g>
<!-- startup -->
<g id="node8" class="node">
<title>startup</title>
<polygon fill="none" stroke="#000000" points="726,-209 726,-270 939,-270 939,-209 726,-209"/>
<text text-anchor="middle" x="832.5" y="-254.8" font-family="Times,serif" font-size="14.00" fill="#000000">startup</text>
<polyline fill="none" stroke="#000000" points="726,-247 939,-247 "/>
<text text-anchor="start" x="734" y="-231.8" font-family="Times,serif" font-size="14.00" fill="#000000">将存活的副本状态设置为online</text>
<text text-anchor="middle" x="832.5" y="-216.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 将离线的副本状态设置为offline</text>
</g>
<!-- startup&#45;&gt;OnlineReplica -->
<g id="edge18" class="edge">
<title>startup&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M919.0951,-270.0069C948.0638,-280.2124 980.5017,-291.6401 1010.0716,-302.0573"/>
<polygon fill="#000000" stroke="#000000" points="1008.9686,-305.3795 1019.5634,-305.4012 1011.2946,-298.7773 1008.9686,-305.3795"/>
</g>
<!-- startup&#45;&gt;OfflineReplica -->
<g id="edge19" class="edge">
<title>startup&#45;&gt;OfflineReplica</title>
<path fill="none" stroke="#000000" d="M939.0591,-250.6643C1032.5007,-260.4542 1167.6291,-274.6118 1260.9261,-284.3866"/>
<polygon fill="#000000" stroke="#000000" points="1260.6436,-287.876 1270.9539,-285.4372 1261.3731,-280.9141 1260.6436,-287.876"/>
</g>
<!-- onlineAndOfflineReplicas -->
<g id="node9" class="node">
<title>onlineAndOfflineReplicas</title>
<polygon fill="none" stroke="#000000" points="1025.5,-52.5 1025.5,-98.5 1184.5,-98.5 1184.5,-52.5 1025.5,-52.5"/>
<text text-anchor="middle" x="1105" y="-83.3" font-family="Times,serif" font-size="14.00" fill="#000000">onlineAndOfflineReplicas</text>
<polyline fill="none" stroke="#000000" points="1025.5,-75.5 1184.5,-75.5 "/>
<text text-anchor="middle" x="1105" y="-60.3" font-family="Times,serif" font-size="14.00" fill="#000000">获取和离线副本</text>
</g>
<!-- startup&#45;&gt;onlineAndOfflineReplicas -->
<g id="edge12" class="edge">
<title>startup&#45;&gt;onlineAndOfflineReplicas</title>
<path fill="none" stroke="#000000" d="M856.6431,-208.7682C882.5749,-177.912 926.6276,-131.3468 975,-105.5 987.532,-98.8038 1001.5226,-93.5941 1015.5532,-89.5431"/>
<polygon fill="#000000" stroke="#000000" points="1016.516,-92.9085 1025.2557,-86.9196 1014.6888,-86.1512 1016.516,-92.9085"/>
</g>
<!-- isReplicaOnline -->
<g id="node10" class="node">
<title>isReplicaOnline</title>
<polygon fill="none" stroke="#000000" points="1297.5,-.5 1297.5,-46.5 1436.5,-46.5 1436.5,-.5 1297.5,-.5"/>
<text text-anchor="middle" x="1367" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#000000">isReplicaOnline</text>
<polyline fill="none" stroke="#000000" points="1297.5,-23.5 1436.5,-23.5 "/>
<text text-anchor="middle" x="1367" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#000000">判断replica是否在线</text>
</g>
<!-- onlineAndOfflineReplicas&#45;&gt;isReplicaOnline -->
<g id="edge13" class="edge">
<title>onlineAndOfflineReplicas&#45;&gt;isReplicaOnline</title>
<path fill="none" stroke="#000000" d="M1184.6758,-59.6865C1217.284,-53.2146 1254.9319,-45.7425 1287.52,-39.2747"/>
<polygon fill="#000000" stroke="#000000" points="1288.3326,-42.6817 1297.4599,-37.3019 1286.9698,-35.8157 1288.3326,-42.6817"/>
</g>
<!-- partitionAssignments -->
<g id="node13" class="node">
<title>partitionAssignments</title>
<polygon fill="#95e1d3" stroke="#000000" points="1433.5,-101.5 1304.5,-101.5 1300.5,-97.5 1300.5,-65.5 1429.5,-65.5 1433.5,-69.5 1433.5,-101.5"/>
<polyline fill="none" stroke="#000000" points="1429.5,-97.5 1300.5,-97.5 "/>
<polyline fill="none" stroke="#000000" points="1429.5,-97.5 1429.5,-65.5 "/>
<polyline fill="none" stroke="#000000" points="1429.5,-97.5 1433.5,-101.5 "/>
<text text-anchor="middle" x="1367" y="-79.8" font-family="Times,serif" font-size="14.00" fill="#000000">partitionAssignments</text>
</g>
<!-- onlineAndOfflineReplicas&#45;&gt;partitionAssignments -->
<g id="edge14" class="edge">
<title>onlineAndOfflineReplicas&#45;&gt;partitionAssignments</title>
<path fill="none" stroke="#000000" d="M1184.6758,-77.9328C1218.2391,-78.9577 1257.1415,-80.1455 1290.3701,-81.1602"/>
<polygon fill="#000000" stroke="#000000" points="1290.3859,-84.6622 1300.4881,-81.4691 1290.5996,-77.6654 1290.3859,-84.6622"/>
</g>
<!-- stopRemovedReplicasOfReassignedPartition -->
<g id="node11" class="node">
<title>stopRemovedReplicasOfReassignedPartition</title>
<polygon fill="none" stroke="#000000" points="975,-485.5 975,-531.5 1235,-531.5 1235,-485.5 975,-485.5"/>
<text text-anchor="middle" x="1105" y="-516.3" font-family="Times,serif" font-size="14.00" fill="#000000">stopRemovedReplicasOfReassignedPartition</text>
<polyline fill="none" stroke="#000000" points="975,-508.5 1235,-508.5 "/>
<text text-anchor="start" x="983" y="-493.3" font-family="Times,serif" font-size="14.00" fill="#000000">副本迁移时，下线旧的replica</text>
</g>
<!-- stopRemovedReplicasOfReassignedPartition&#45;&gt;OfflineReplica -->
<g id="edge26" class="edge">
<title>stopRemovedReplicasOfReassignedPartition&#45;&gt;OfflineReplica</title>
<path fill="none" stroke="#000000" d="M1221.8275,-485.3161C1226.5,-482.4087 1230.9235,-479.1504 1235,-475.5 1268.9467,-445.1015 1245.0688,-416.9702 1271,-379.5 1282.9124,-362.2867 1299.1158,-346.3329 1314.8175,-333.0552"/>
<polygon fill="#000000" stroke="#000000" points="1317.4554,-335.4175 1322.9573,-326.3633 1313.0099,-330.0103 1317.4554,-335.4175"/>
</g>
<!-- stopRemovedReplicasOfReassignedPartition&#45;&gt;ReplicaDeletionStarted -->
<g id="edge27" class="edge">
<title>stopRemovedReplicasOfReassignedPartition&#45;&gt;ReplicaDeletionStarted</title>
<path fill="none" stroke="#000000" d="M1215.3691,-485.3918C1222.1909,-482.4748 1228.7975,-479.1926 1235,-475.5 1255.269,-463.433 1251.8731,-450.306 1271,-436.5 1342.4531,-384.9243 1435.7829,-345.7513 1501.5909,-321.9397"/>
<polygon fill="#000000" stroke="#000000" points="1502.8589,-325.2033 1511.0947,-318.5383 1500.5001,-318.6127 1502.8589,-325.2033"/>
</g>
<!-- stopRemovedReplicasOfReassignedPartition&#45;&gt;ReplicaDeletionSuccessful -->
<g id="edge28" class="edge">
<title>stopRemovedReplicasOfReassignedPartition&#45;&gt;ReplicaDeletionSuccessful</title>
<path fill="none" stroke="#000000" d="M1235.1363,-520.83C1352.4311,-526.8022 1527.2635,-522.7018 1666,-464.5 1703.7603,-448.659 1738.019,-416.0664 1760.0769,-391.5654"/>
<polygon fill="#000000" stroke="#000000" points="1762.8203,-393.7458 1766.7987,-383.9263 1757.5651,-389.1216 1762.8203,-393.7458"/>
</g>
<!-- stopRemovedReplicasOfReassignedPartition&#45;&gt;NonExistentReplica -->
<g id="edge29" class="edge">
<title>stopRemovedReplicasOfReassignedPartition&#45;&gt;NonExistentReplica</title>
<path fill="none" stroke="#000000" d="M1198.9271,-485.4331C1211.0966,-482.2171 1223.3673,-478.8603 1235,-475.5 1408.0699,-425.5052 1608.5156,-357.3287 1713.2567,-320.9044"/>
<polygon fill="#000000" stroke="#000000" points="1714.4898,-324.1812 1722.7827,-317.5874 1712.1879,-317.5705 1714.4898,-324.1812"/>
</g>
<!-- onPartitionReassignment -->
<g id="node12" class="node">
<title>onPartitionReassignment</title>
<polygon fill="none" stroke="#000000" points="248.5,-471.5 248.5,-517.5 401.5,-517.5 401.5,-471.5 248.5,-471.5"/>
<text text-anchor="middle" x="325" y="-502.3" font-family="Times,serif" font-size="14.00" fill="#000000">onPartitionReassignment</text>
<polyline fill="none" stroke="#000000" points="248.5,-494.5 401.5,-494.5 "/>
<text text-anchor="start" x="256.5" y="-479.3" font-family="Times,serif" font-size="14.00" fill="#000000">Partition replica迁移</text>
</g>
<!-- onPartitionReassignment&#45;&gt;OnlineReplica -->
<g id="edge20" class="edge">
<title>onPartitionReassignment&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M401.6267,-500.6714C545.3399,-510.8695 848.9656,-525.4915 939,-475.5 964.2178,-461.4978 954.5677,-441.8598 975,-421.5 994.038,-402.5296 1017.8704,-385.3347 1039.9118,-371.393"/>
<polygon fill="#000000" stroke="#000000" points="1041.9264,-374.262 1048.5793,-366.0164 1038.2365,-368.3136 1041.9264,-374.262"/>
</g>
<!-- onPartitionReassignment&#45;&gt;stopRemovedReplicasOfReassignedPartition -->
<g id="edge35" class="edge">
<title>onPartitionReassignment&#45;&gt;stopRemovedReplicasOfReassignedPartition</title>
<path fill="none" stroke="#000000" d="M361.3408,-517.5474C428.5627,-558.6586 578.2419,-643.171 718,-673.5 813.988,-694.3304 848.1978,-710.9509 939,-673.5 1004.4439,-646.508 1057.6932,-579.838 1085.0368,-539.9952"/>
<polygon fill="#000000" stroke="#000000" points="1087.9506,-541.9343 1090.632,-531.6844 1082.1439,-538.025 1087.9506,-541.9343"/>
</g>
<!-- startNewReplicasForReassignedPartition -->
<g id="node17" class="node">
<title>startNewReplicasForReassignedPartition</title>
<polygon fill="none" stroke="#000000" points="451,-364.5 451,-410.5 690,-410.5 690,-364.5 451,-364.5"/>
<text text-anchor="middle" x="570.5" y="-395.3" font-family="Times,serif" font-size="14.00" fill="#000000">startNewReplicasForReassignedPartition</text>
<polyline fill="none" stroke="#000000" points="451,-387.5 690,-387.5 "/>
<text text-anchor="middle" x="570.5" y="-372.3" font-family="Times,serif" font-size="14.00" fill="#000000">副本迁移中，新增的副本</text>
</g>
<!-- onPartitionReassignment&#45;&gt;startNewReplicasForReassignedPartition -->
<g id="edge36" class="edge">
<title>onPartitionReassignment&#45;&gt;startNewReplicasForReassignedPartition</title>
<path fill="none" stroke="#000000" d="M359.361,-471.4615C384.0352,-455.7104 418.5326,-435.2711 451,-421.5 457.2706,-418.8403 463.8126,-416.3194 470.4634,-413.9436"/>
<polygon fill="#000000" stroke="#000000" points="471.9516,-417.1329 480.2668,-410.5672 469.6721,-410.5144 471.9516,-417.1329"/>
</g>
<!-- onBrokerStartup -->
<g id="node14" class="node">
<title>onBrokerStartup</title>
<polygon fill="none" stroke="#000000" points="750,-523 750,-584 915,-584 915,-523 750,-523"/>
<text text-anchor="middle" x="832.5" y="-568.8" font-family="Times,serif" font-size="14.00" fill="#000000">onBrokerStartup</text>
<polyline fill="none" stroke="#000000" points="750,-561 915,-561 "/>
<text text-anchor="start" x="758" y="-545.8" font-family="Times,serif" font-size="14.00" fill="#000000">将该broker节点的replicas</text>
<text text-anchor="middle" x="832.5" y="-530.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 设置为在线装状态</text>
</g>
<!-- onBrokerStartup&#45;&gt;OnlineReplica -->
<g id="edge21" class="edge">
<title>onBrokerStartup&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M915.1977,-526.5069C923.8931,-521.4375 932.0712,-515.4805 939,-508.5 968.4795,-478.8003 948.3844,-453.7912 975,-421.5 991.2621,-401.7702 1013.2282,-384.8894 1034.4729,-371.4421"/>
<polygon fill="#000000" stroke="#000000" points="1036.5091,-374.2989 1043.1961,-366.081 1032.8439,-368.3352 1036.5091,-374.2989"/>
</g>
<!-- onNewPartitionCreation -->
<g id="node15" class="node">
<title>onNewPartitionCreation</title>
<polygon fill="none" stroke="#000000" points="496,-298.5 496,-344.5 645,-344.5 645,-298.5 496,-298.5"/>
<text text-anchor="middle" x="570.5" y="-329.3" font-family="Times,serif" font-size="14.00" fill="#000000">onNewPartitionCreation</text>
<polyline fill="none" stroke="#000000" points="496,-321.5 645,-321.5 "/>
<text text-anchor="middle" x="570.5" y="-306.3" font-family="Times,serif" font-size="14.00" fill="#000000">新建partition</text>
</g>
<!-- onNewPartitionCreation&#45;&gt;NewReplica -->
<g id="edge15" class="edge">
<title>onNewPartitionCreation&#45;&gt;NewReplica</title>
<path fill="none" stroke="#000000" d="M645.2281,-320.9296C681.433,-320.6532 724.718,-320.3228 760.5493,-320.0492"/>
<polygon fill="#000000" stroke="#000000" points="760.9555,-323.5463 770.9284,-319.97 760.902,-316.5465 760.9555,-323.5463"/>
</g>
<!-- onNewPartitionCreation&#45;&gt;OnlineReplica -->
<g id="edge16" class="edge">
<title>onNewPartitionCreation&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M644.8276,-344.538C668.0271,-350.6729 693.8648,-356.441 718,-359.5 815.4427,-371.8503 841.0308,-366.5455 939,-359.5 962.0231,-357.8443 986.7044,-354.9128 1009.8095,-351.6544"/>
<polygon fill="#000000" stroke="#000000" points="1010.5559,-355.083 1019.9529,-350.1894 1009.5553,-348.1549 1010.5559,-355.083"/>
</g>
<!-- onBrokerFailure -->
<g id="node16" class="node">
<title>onBrokerFailure</title>
<polygon fill="none" stroke="#000000" points="747,-603 747,-664 918,-664 918,-603 747,-603"/>
<text text-anchor="middle" x="832.5" y="-648.8" font-family="Times,serif" font-size="14.00" fill="#000000">onBrokerFailure</text>
<polyline fill="none" stroke="#000000" points="747,-641 918,-641 "/>
<text text-anchor="start" x="755" y="-625.8" font-family="Times,serif" font-size="14.00" fill="#000000">broker下线，将该broker</text>
<text text-anchor="middle" x="832.5" y="-610.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 上的replica设为离线状态</text>
</g>
<!-- onReplicasBecomeOffline -->
<g id="node20" class="node">
<title>onReplicasBecomeOffline</title>
<polygon fill="none" stroke="#000000" points="1185.5,-466.5 1024.5,-466.5 1024.5,-430.5 1185.5,-430.5 1185.5,-466.5"/>
<text text-anchor="middle" x="1105" y="-444.8" font-family="Times,serif" font-size="14.00" fill="#000000">onReplicasBecomeOffline</text>
</g>
<!-- onBrokerFailure&#45;&gt;onReplicasBecomeOffline -->
<g id="edge25" class="edge">
<title>onBrokerFailure&#45;&gt;onReplicasBecomeOffline</title>
<path fill="none" stroke="#000000" d="M918.1314,-609.8125C925.8298,-605.285 932.9769,-599.9008 939,-593.5 976.2839,-553.8779 934.9045,-513.2744 975,-476.5 986.1657,-466.2591 1000.1497,-459.4287 1014.7732,-454.9332"/>
<polygon fill="#000000" stroke="#000000" points="1015.7195,-458.3031 1024.4521,-452.3038 1013.8843,-451.5479 1015.7195,-458.3031"/>
</g>
<!-- startNewReplicasForReassignedPartition&#45;&gt;NewReplica -->
<g id="edge17" class="edge">
<title>startNewReplicasForReassignedPartition&#45;&gt;NewReplica</title>
<path fill="none" stroke="#000000" d="M659.2012,-364.4783C692.2884,-355.8908 729.4085,-346.2566 760.7805,-338.1142"/>
<polygon fill="#000000" stroke="#000000" points="761.9518,-341.4263 770.7518,-335.5263 760.1932,-334.6508 761.9518,-341.4263"/>
</g>
<!-- onBrokerLogDirFailure -->
<g id="node18" class="node">
<title>onBrokerLogDirFailure</title>
<polygon fill="none" stroke="#000000" points="905.5,-466.5 759.5,-466.5 759.5,-430.5 905.5,-430.5 905.5,-466.5"/>
<text text-anchor="middle" x="832.5" y="-444.8" font-family="Times,serif" font-size="14.00" fill="#000000">onBrokerLogDirFailure</text>
</g>
<!-- onBrokerLogDirFailure&#45;&gt;OnlineReplica -->
<g id="edge22" class="edge">
<title>onBrokerLogDirFailure&#45;&gt;OnlineReplica</title>
<path fill="none" stroke="#000000" d="M905.7807,-436.3695C917.0624,-433.6436 928.4575,-430.3792 939,-426.5 977.6249,-412.2877 1018.1828,-390.205 1049.5404,-371.3525"/>
<polygon fill="#000000" stroke="#000000" points="1051.4046,-374.3152 1058.1316,-366.13 1047.7685,-368.3337 1051.4046,-374.3152"/>
</g>
<!-- processLogDirEventNotification -->
<g id="node19" class="node">
<title>processLogDirEventNotification</title>
<polygon fill="none" stroke="#000000" points="667.5,-466.5 473.5,-466.5 473.5,-430.5 667.5,-430.5 667.5,-466.5"/>
<text text-anchor="middle" x="570.5" y="-444.8" font-family="Times,serif" font-size="14.00" fill="#000000">processLogDirEventNotification</text>
</g>
<!-- processLogDirEventNotification&#45;&gt;onBrokerLogDirFailure -->
<g id="edge23" class="edge">
<title>processLogDirEventNotification&#45;&gt;onBrokerLogDirFailure</title>
<path fill="none" stroke="#000000" d="M667.6868,-448.5C694.4281,-448.5 723.1873,-448.5 749.0774,-448.5"/>
<polygon fill="#000000" stroke="#000000" points="749.2245,-452.0001 759.2245,-448.5 749.2244,-445.0001 749.2245,-452.0001"/>
</g>
<!-- onReplicasBecomeOffline&#45;&gt;OfflineReplica -->
<g id="edge24" class="edge">
<title>onReplicasBecomeOffline&#45;&gt;OfflineReplica</title>
<path fill="none" stroke="#000000" d="M1185.6724,-444.4167C1202.82,-440.9935 1220.1983,-435.421 1235,-426.5 1257.5359,-412.9177 1253.0105,-398.7022 1271,-379.5 1286.2238,-363.2499 1304.2981,-346.8066 1320.6352,-332.8287"/>
<polygon fill="#000000" stroke="#000000" points="1323.1233,-335.3083 1328.4956,-326.1766 1318.6012,-329.9649 1323.1233,-335.3083"/>
</g>
<!-- startReplicaDeletion -->
<g id="node21" class="node">
<title>startReplicaDeletion</title>
<polygon fill="none" stroke="#000000" points="1169,-153.5 1041,-153.5 1041,-117.5 1169,-117.5 1169,-153.5"/>
<text text-anchor="middle" x="1105" y="-131.8" font-family="Times,serif" font-size="14.00" fill="#000000">startReplicaDeletion</text>
</g>
<!-- startReplicaDeletion&#45;&gt;OfflineReplica -->
<g id="edge30" class="edge">
<title>startReplicaDeletion&#45;&gt;OfflineReplica</title>
<path fill="none" stroke="#000000" d="M1150.8253,-153.6061C1176.3349,-164.4275 1208.2453,-179.2168 1235,-195.5 1252.3151,-206.0381 1254.8915,-211.1964 1271,-223.5 1286.087,-235.0234 1302.5971,-247.4659 1317.6055,-258.7131"/>
<polygon fill="#000000" stroke="#000000" points="1315.6675,-261.6344 1325.7705,-264.8252 1319.8624,-256.0306 1315.6675,-261.6344"/>
</g>
<!-- startReplicaDeletion&#45;&gt;ReplicaDeletionStarted -->
<g id="edge31" class="edge">
<title>startReplicaDeletion&#45;&gt;ReplicaDeletionStarted</title>
<path fill="none" stroke="#000000" d="M1158.8471,-153.543C1243.1145,-181.7792 1406.5651,-236.548 1503.963,-269.184"/>
<polygon fill="#000000" stroke="#000000" points="1502.874,-272.5102 1513.4679,-272.3688 1505.0981,-265.8729 1502.874,-272.5102"/>
</g>
<!-- startReplicaDeletion&#45;&gt;ReplicaDeletionIneligible -->
<g id="edge32" class="edge">
<title>startReplicaDeletion&#45;&gt;ReplicaDeletionIneligible</title>
<path fill="none" stroke="#000000" d="M1169.0198,-144.4374C1291.2742,-161.5045 1558.1517,-198.7614 1697.2336,-218.1777"/>
<polygon fill="#000000" stroke="#000000" points="1697.043,-221.685 1707.4309,-219.6013 1698.0109,-214.7522 1697.043,-221.685"/>
</g>
<!-- processTopicChange -->
<g id="node22" class="node">
<title>processTopicChange</title>
<polygon fill="none" stroke="#000000" points="390,-334.5 260,-334.5 260,-298.5 390,-298.5 390,-334.5"/>
<text text-anchor="middle" x="325" y="-312.8" font-family="Times,serif" font-size="14.00" fill="#000000">processTopicChange</text>
</g>
<!-- processTopicChange&#45;&gt;onNewPartitionCreation -->
<g id="edge33" class="edge">
<title>processTopicChange&#45;&gt;onNewPartitionCreation</title>
<path fill="none" stroke="#000000" d="M390.145,-317.8268C419.4981,-318.4246 454.5349,-319.1382 485.8864,-319.7767"/>
<polygon fill="#000000" stroke="#000000" points="485.8549,-323.2767 495.9241,-319.9811 485.9975,-316.2781 485.8549,-323.2767"/>
</g>
<!-- processPartitionModifications -->
<g id="node23" class="node">
<title>processPartitionModifications</title>
<polygon fill="none" stroke="#000000" points="415,-388.5 235,-388.5 235,-352.5 415,-352.5 415,-388.5"/>
<text text-anchor="middle" x="325" y="-366.8" font-family="Times,serif" font-size="14.00" fill="#000000">processPartitionModifications</text>
</g>
<!-- processPartitionModifications&#45;&gt;onNewPartitionCreation -->
<g id="edge34" class="edge">
<title>processPartitionModifications&#45;&gt;onNewPartitionCreation</title>
<path fill="none" stroke="#000000" d="M415.0211,-352.5324C438.1472,-347.9167 462.9452,-342.9671 485.7922,-338.4071"/>
<polygon fill="#000000" stroke="#000000" points="486.6736,-341.8003 495.795,-336.4106 485.3034,-334.9357 486.6736,-341.8003"/>
</g>
<!-- TopicChangeHandler -->
<g id="node24" class="node">
<title>TopicChangeHandler</title>
<polygon fill="none" stroke="#000000" points="174,-334.5 41,-334.5 41,-298.5 174,-298.5 174,-334.5"/>
<text text-anchor="middle" x="107.5" y="-312.8" font-family="Times,serif" font-size="14.00" fill="#000000">TopicChangeHandler</text>
</g>
<!-- TopicChangeHandler&#45;&gt;processTopicChange -->
<g id="edge37" class="edge">
<title>TopicChangeHandler&#45;&gt;processTopicChange</title>
<path fill="none" stroke="#000000" d="M174.2353,-316.5C198.1612,-316.5 225.2933,-316.5 249.8813,-316.5"/>
<polygon fill="#000000" stroke="#000000" points="249.8845,-320.0001 259.8844,-316.5 249.8844,-313.0001 249.8845,-320.0001"/>
</g>
<!-- PartitionModificationsHandler -->
<g id="node25" class="node">
<title>PartitionModificationsHandler</title>
<polygon fill="none" stroke="#000000" points="199,-388.5 16,-388.5 16,-352.5 199,-352.5 199,-388.5"/>
<text text-anchor="middle" x="107.5" y="-366.8" font-family="Times,serif" font-size="14.00" fill="#000000">PartitionModificationsHandler</text>
</g>
<!-- PartitionModificationsHandler&#45;&gt;processPartitionModifications -->
<g id="edge38" class="edge">
<title>PartitionModificationsHandler&#45;&gt;processPartitionModifications</title>
<path fill="none" stroke="#000000" d="M199.1092,-370.5C207.6205,-370.5 216.2755,-370.5 224.8585,-370.5"/>
<polygon fill="#000000" stroke="#000000" points="224.8883,-374.0001 234.8883,-370.5 224.8882,-367.0001 224.8883,-374.0001"/>
</g>
</g>
</svg>
