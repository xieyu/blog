<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: topic_change Pages: 1 -->
<svg width="1743pt" height="912pt"
 viewBox="0.00 0.00 1742.81 912.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 908)">
<title>topic_change</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-908 1738.8057,-908 1738.8057,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_zkClient</title>
<path fill="none" stroke="#000000" d="M265.4736,-324C265.4736,-324 1714.8057,-324 1714.8057,-324 1720.8057,-324 1726.8057,-330 1726.8057,-336 1726.8057,-336 1726.8057,-588 1726.8057,-588 1726.8057,-594 1720.8057,-600 1714.8057,-600 1714.8057,-600 265.4736,-600 265.4736,-600 259.4736,-600 253.4736,-594 253.4736,-588 253.4736,-588 253.4736,-336 253.4736,-336 253.4736,-330 259.4736,-324 265.4736,-324"/>
<text text-anchor="middle" x="990.1396" y="-580" font-family="Times,serif" font-size="20.00" fill="#000000">zkClient</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_controllerContext</title>
<path fill="none" stroke="#000000" d="M250.5986,-726C250.5986,-726 1705.9702,-726 1705.9702,-726 1711.9702,-726 1717.9702,-732 1717.9702,-738 1717.9702,-738 1717.9702,-884 1717.9702,-884 1717.9702,-890 1711.9702,-896 1705.9702,-896 1705.9702,-896 250.5986,-896 250.5986,-896 244.5986,-896 238.5986,-890 238.5986,-884 238.5986,-884 238.5986,-738 238.5986,-738 238.5986,-732 244.5986,-726 250.5986,-726"/>
<text text-anchor="middle" x="978.2844" y="-876" font-family="Times,serif" font-size="20.00" fill="#000000">controllerContext</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_partitionStateMachine</title>
<path fill="none" stroke="#000000" d="M1297.3887,-153C1297.3887,-153 1514.5615,-153 1514.5615,-153 1520.5615,-153 1526.5615,-159 1526.5615,-165 1526.5615,-165 1526.5615,-304 1526.5615,-304 1526.5615,-310 1520.5615,-316 1514.5615,-316 1514.5615,-316 1297.3887,-316 1297.3887,-316 1291.3887,-316 1285.3887,-310 1285.3887,-304 1285.3887,-304 1285.3887,-165 1285.3887,-165 1285.3887,-159 1291.3887,-153 1297.3887,-153"/>
<text text-anchor="middle" x="1405.9751" y="-296" font-family="Times,serif" font-size="20.00" fill="#000000">partitionStateMachine</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_ReplicaStateMachine</title>
<path fill="none" stroke="#000000" d="M1300.1196,-8C1300.1196,-8 1511.8306,-8 1511.8306,-8 1517.8306,-8 1523.8306,-14 1523.8306,-20 1523.8306,-20 1523.8306,-133 1523.8306,-133 1523.8306,-139 1517.8306,-145 1511.8306,-145 1511.8306,-145 1300.1196,-145 1300.1196,-145 1294.1196,-145 1288.1196,-139 1288.1196,-133 1288.1196,-133 1288.1196,-20 1288.1196,-20 1288.1196,-14 1294.1196,-8 1300.1196,-8"/>
<text text-anchor="middle" x="1405.9751" y="-125" font-family="Times,serif" font-size="20.00" fill="#000000">ReplicaStateMachine</text>
</g>
<!-- getFullReplicaAssignmentForTopics -->
<g id="node1" class="node">
<title>getFullReplicaAssignmentForTopics</title>
<polygon fill="none" stroke="#000000" points="1295.0293,-332.4001 1295.0293,-401.5999 1516.9209,-401.5999 1516.9209,-332.4001 1295.0293,-332.4001"/>
<text text-anchor="middle" x="1405.9751" y="-386.3999" font-family="Times,serif" font-size="14.00" fill="#000000">getFullReplicaAssignmentForTopics</text>
<polyline fill="none" stroke="#000000" points="1295.0293,-379.5999 1516.9209,-379.5999 "/>
<text text-anchor="start" x="1303.0293" y="-364.3999" font-family="Times,serif" font-size="14.00" fill="#000000">获取该topic的partion</text>
<text text-anchor="start" x="1303.0293" y="-344.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 副本的assignment信息</text>
</g>
<!-- GetDataRequest -->
<g id="node2" class="node">
<title>GetDataRequest</title>
<polygon fill="none" stroke="#000000" points="1565.3623,-369.2 1565.3623,-418.8 1718.8057,-418.8 1718.8057,-369.2 1565.3623,-369.2"/>
<text text-anchor="middle" x="1642.084" y="-403.6" font-family="Times,serif" font-size="14.00" fill="#000000">GetDataRequest</text>
<polyline fill="none" stroke="#000000" points="1565.3623,-396.8 1718.8057,-396.8 "/>
<text text-anchor="middle" x="1642.084" y="-381.6" font-family="Times,serif" font-size="14.00" fill="#000000">获取TopicZnode下信息</text>
</g>
<!-- getFullReplicaAssignmentForTopics&#45;&gt;GetDataRequest -->
<g id="edge1" class="edge">
<title>getFullReplicaAssignmentForTopics&#45;&gt;GetDataRequest</title>
<path fill="none" stroke="#000000" d="M1517.1158,-379.7094C1529.8242,-381.1626 1542.6397,-382.6282 1554.9708,-384.0383"/>
<polygon fill="#000000" stroke="#000000" points="1554.8689,-387.5493 1565.2018,-385.2082 1555.6643,-380.5947 1554.8689,-387.5493"/>
</g>
<!-- getAllTopicsInCluster -->
<g id="node3" class="node">
<title>getAllTopicsInCluster</title>
<polygon fill="none" stroke="#000000" points="401.8078,-533 261.3621,-533 261.3621,-497 401.8078,-497 401.8078,-533"/>
<text text-anchor="middle" x="331.585" y="-510.8" font-family="Times,serif" font-size="14.00" fill="#000000">getAllTopicsInCluster</text>
</g>
<!-- GetChildrenRequest -->
<g id="node4" class="node">
<title>GetChildrenRequest</title>
<polygon fill="none" stroke="#000000" points="484.8438,-460.2 484.8438,-509.8 689.6045,-509.8 689.6045,-460.2 484.8438,-460.2"/>
<text text-anchor="middle" x="587.2241" y="-494.6" font-family="Times,serif" font-size="14.00" fill="#000000">GetChildrenRequest</text>
<polyline fill="none" stroke="#000000" points="484.8438,-487.8 689.6045,-487.8 "/>
<text text-anchor="start" x="492.8438" y="-472.6" font-family="Times,serif" font-size="14.00" fill="#000000">获取TopicsZnode下所有children</text>
</g>
<!-- getAllTopicsInCluster&#45;&gt;GetChildrenRequest -->
<g id="edge2" class="edge">
<title>getAllTopicsInCluster&#45;&gt;GetChildrenRequest</title>
<path fill="none" stroke="#000000" d="M401.7776,-506.7627C424.2524,-504.1252 449.7336,-501.1349 474.4533,-498.234"/>
<polygon fill="#000000" stroke="#000000" points="475.0937,-501.6829 484.6176,-497.0412 474.2778,-494.7306 475.0937,-501.6829"/>
</g>
<!-- registerZNodeChangeHandler -->
<g id="node5" class="node">
<title>registerZNodeChangeHandler</title>
<polygon fill="none" stroke="#000000" points="679.4353,-564 495.013,-564 495.013,-528 679.4353,-528 679.4353,-564"/>
<text text-anchor="middle" x="587.2241" y="-541.8" font-family="Times,serif" font-size="14.00" fill="#000000">registerZNodeChangeHandler</text>
</g>
<!-- getChildren -->
<g id="node6" class="node">
<title>getChildren</title>
<polygon fill="none" stroke="#000000" points="1447.0718,-476 1364.8784,-476 1364.8784,-440 1447.0718,-440 1447.0718,-476"/>
<text text-anchor="middle" x="1405.9751" y="-453.8" font-family="Times,serif" font-size="14.00" fill="#000000">getChildren</text>
</g>
<!-- setTopicAssignmentRaw -->
<g id="node7" class="node">
<title>setTopicAssignmentRaw</title>
<polygon fill="none" stroke="#000000" points="1328.0845,-494.4001 1328.0845,-563.5999 1483.8657,-563.5999 1483.8657,-494.4001 1328.0845,-494.4001"/>
<text text-anchor="middle" x="1405.9751" y="-548.3999" font-family="Times,serif" font-size="14.00" fill="#000000">setTopicAssignmentRaw</text>
<polyline fill="none" stroke="#000000" points="1328.0845,-541.5999 1483.8657,-541.5999 "/>
<text text-anchor="start" x="1336.0845" y="-526.3999" font-family="Times,serif" font-size="14.00" fill="#000000">更新zk中topic partition</text>
<text text-anchor="middle" x="1405.9751" y="-506.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 的assignment</text>
</g>
<!-- getReplicaAssignmentForTopics -->
<g id="node8" class="node">
<title>getReplicaAssignmentForTopics</title>
<polygon fill="none" stroke="#000000" points="1003.5151,-396.2 1003.5151,-445.8 1238.4292,-445.8 1238.4292,-396.2 1003.5151,-396.2"/>
<text text-anchor="middle" x="1120.9722" y="-430.6" font-family="Times,serif" font-size="14.00" fill="#000000">getReplicaAssignmentForTopics</text>
<polyline fill="none" stroke="#000000" points="1003.5151,-423.8 1238.4292,-423.8 "/>
<text text-anchor="middle" x="1120.9722" y="-408.6" font-family="Times,serif" font-size="14.00" fill="#000000">从zk中获取topic的replica Assignment</text>
</g>
<!-- getReplicaAssignmentForTopics&#45;&gt;getFullReplicaAssignmentForTopics -->
<g id="edge3" class="edge">
<title>getReplicaAssignmentForTopics&#45;&gt;getFullReplicaAssignmentForTopics</title>
<path fill="none" stroke="#000000" d="M1238.5392,-398.7244C1253.7589,-395.8407 1269.3702,-392.8828 1284.6493,-389.9878"/>
<polygon fill="#000000" stroke="#000000" points="1285.4608,-393.3964 1294.6344,-388.0959 1284.1577,-386.5188 1285.4608,-393.3964"/>
</g>
<!-- getReplicaAssignmentForTopics&#45;&gt;GetDataRequest -->
<g id="edge4" class="edge">
<title>getReplicaAssignmentForTopics&#45;&gt;GetDataRequest</title>
<path fill="none" stroke="#000000" d="M1238.6965,-422.0118C1320.4019,-421.7613 1431.6838,-419.5278 1529.3623,-411 1537.7231,-410.2701 1546.4071,-409.3155 1555.0777,-408.2307"/>
<polygon fill="#000000" stroke="#000000" points="1555.7682,-411.6703 1565.2299,-406.9031 1554.8605,-404.7294 1555.7682,-411.6703"/>
</g>
<!-- partitionLeadershipInfo -->
<g id="node9" class="node">
<title>partitionLeadershipInfo</title>
<polygon fill="#95e1d3" stroke="#000000" points="512.748,-751 512.748,-787 661.7002,-787 661.7002,-751 512.748,-751"/>
<text text-anchor="middle" x="587.2241" y="-764.8" font-family="Times,serif" font-size="14.00" fill="#000000">partitionLeadershipInfo</text>
</g>
<!-- updateReplicaAssignmentForPartition -->
<g id="node10" class="node">
<title>updateReplicaAssignmentForPartition</title>
<polygon fill="none" stroke="#000000" points="995.3564,-734.2 995.3564,-783.8 1246.5879,-783.8 1246.5879,-734.2 995.3564,-734.2"/>
<text text-anchor="middle" x="1120.9722" y="-768.6" font-family="Times,serif" font-size="14.00" fill="#000000">updateReplicaAssignmentForPartition</text>
<polyline fill="none" stroke="#000000" points="995.3564,-761.8 1246.5879,-761.8 "/>
<text text-anchor="middle" x="1120.9722" y="-746.6" font-family="Times,serif" font-size="14.00" fill="#000000">更新partition replica 分配 更新内存和zk</text>
</g>
<!-- updateReplicaAssignmentForPartition&#45;&gt;setTopicAssignmentRaw -->
<g id="edge5" class="edge">
<title>updateReplicaAssignmentForPartition&#45;&gt;setTopicAssignmentRaw</title>
<path fill="none" stroke="#000000" d="M1196.5942,-734.1202C1213.8128,-726.745 1231.4704,-717.7127 1246.5879,-707 1299.5135,-669.4952 1347.253,-611.3918 1376.3939,-571.8494"/>
<polygon fill="#000000" stroke="#000000" points="1379.2661,-573.851 1382.3252,-563.7073 1373.6081,-569.7293 1379.2661,-573.851"/>
</g>
<!-- partitionFullReplicaAssignmentForTopic -->
<g id="node12" class="node">
<title>partitionFullReplicaAssignmentForTopic</title>
<polygon fill="none" stroke="#000000" points="1529.2496,-781 1282.7006,-781 1282.7006,-745 1529.2496,-745 1529.2496,-781"/>
<text text-anchor="middle" x="1405.9751" y="-758.8" font-family="Times,serif" font-size="14.00" fill="#000000">partitionFullReplicaAssignmentForTopic</text>
</g>
<!-- updateReplicaAssignmentForPartition&#45;&gt;partitionFullReplicaAssignmentForTopic -->
<g id="edge6" class="edge">
<title>updateReplicaAssignmentForPartition&#45;&gt;partitionFullReplicaAssignmentForTopic</title>
<path fill="none" stroke="#000000" d="M1246.8082,-760.7661C1255.1833,-760.8836 1263.6362,-761.0023 1272.0491,-761.1204"/>
<polygon fill="#000000" stroke="#000000" points="1272.2351,-764.6232 1282.2833,-761.264 1272.3334,-757.6239 1272.2351,-764.6232"/>
</g>
<!-- updatePartitionFullReplicaAssignment -->
<g id="node11" class="node">
<title>updatePartitionFullReplicaAssignment</title>
<polygon fill="none" stroke="#000000" points="725.6045,-734.4001 725.6045,-803.5999 959.3564,-803.5999 959.3564,-734.4001 725.6045,-734.4001"/>
<text text-anchor="middle" x="842.4805" y="-788.3999" font-family="Times,serif" font-size="14.00" fill="#000000">updatePartitionFullReplicaAssignment</text>
<polyline fill="none" stroke="#000000" points="725.6045,-781.5999 959.3564,-781.5999 "/>
<text text-anchor="start" x="733.6045" y="-766.3999" font-family="Times,serif" font-size="14.00" fill="#000000">新增的topic刷新</text>
<text text-anchor="start" x="733.6045" y="-746.8" font-family="Times,serif" font-size="14.00" fill="#000000"> assignment信息</text>
</g>
<!-- partitionAssignments -->
<g id="node13" class="node">
<title>partitionAssignments</title>
<polygon fill="#95e1d3" stroke="#000000" points="1574.1978,-785 1574.1978,-821 1709.9702,-821 1709.9702,-785 1574.1978,-785"/>
<text text-anchor="middle" x="1642.084" y="-798.8" font-family="Times,serif" font-size="14.00" fill="#000000">partitionAssignments</text>
</g>
<!-- updatePartitionFullReplicaAssignment&#45;&gt;partitionAssignments -->
<g id="edge8" class="edge">
<title>updatePartitionFullReplicaAssignment&#45;&gt;partitionAssignments</title>
<path fill="none" stroke="#000000" d="M959.5453,-789.0915C971.6116,-790.6485 983.7125,-792.001 995.3564,-793 1199.7368,-810.5358 1441.7436,-808.1372 1563.6092,-805.3246"/>
<polygon fill="#000000" stroke="#000000" points="1564.0409,-808.8154 1573.9547,-805.0781 1563.8741,-801.8174 1564.0409,-808.8154"/>
</g>
<!-- partitionFullReplicaAssignmentForTopic&#45;&gt;partitionAssignments -->
<g id="edge7" class="edge">
<title>partitionFullReplicaAssignmentForTopic&#45;&gt;partitionAssignments</title>
<path fill="none" stroke="#000000" d="M1512.2875,-781.0107C1529.6207,-783.9472 1547.2948,-786.9414 1563.7954,-789.7369"/>
<polygon fill="#000000" stroke="#000000" points="1563.46,-793.2298 1573.9042,-791.4494 1564.6293,-786.3282 1563.46,-793.2298"/>
</g>
<!-- allTopics -->
<g id="node14" class="node">
<title>allTopics</title>
<polygon fill="#95e1d3" stroke="#000000" points="298.0254,-823 298.0254,-859 365.1445,-859 365.1445,-823 298.0254,-823"/>
<text text-anchor="middle" x="331.585" y="-836.8" font-family="Times,serif" font-size="14.00" fill="#000000">allTopics</text>
</g>
<!-- removeTopic -->
<g id="node15" class="node">
<title>removeTopic</title>
<polygon fill="none" stroke="#000000" points="246.5986,-734.4001 246.5986,-803.5999 416.5713,-803.5999 416.5713,-734.4001 246.5986,-734.4001"/>
<text text-anchor="start" x="254.5986" y="-788.3999" font-family="Times,serif" font-size="14.00" fill="#000000">removeTopic</text>
<polyline fill="none" stroke="#000000" points="246.5986,-781.5999 416.5713,-781.5999 "/>
<text text-anchor="start" x="254.5986" y="-766.3999" font-family="Times,serif" font-size="14.00" fill="#000000">从assignments和leadership</text>
<text text-anchor="start" x="254.5986" y="-746.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 中删掉该topic消息</text>
</g>
<!-- removeTopic&#45;&gt;partitionLeadershipInfo -->
<g id="edge9" class="edge">
<title>removeTopic&#45;&gt;partitionLeadershipInfo</title>
<path fill="none" stroke="#000000" d="M416.7091,-769C444.1417,-769 474.5387,-769 501.98,-769"/>
<polygon fill="#000000" stroke="#000000" points="502.3401,-772.5001 512.34,-769 502.34,-765.5001 502.3401,-772.5001"/>
</g>
<!-- removeTopic&#45;&gt;partitionAssignments -->
<g id="edge10" class="edge">
<title>removeTopic&#45;&gt;partitionAssignments</title>
<path fill="none" stroke="#000000" d="M416.8788,-786.0469C438.951,-790.0555 462.7289,-794.022 484.8438,-797 642.7873,-818.2685 683.1113,-823 842.4805,-823 842.4805,-823 842.4805,-823 1120.9722,-823 1302.5572,-823 1348.0052,-820.0961 1529.3623,-811 1540.577,-810.4375 1552.4114,-809.7267 1564.0279,-808.9619"/>
<polygon fill="#000000" stroke="#000000" points="1564.4175,-812.4437 1574.1592,-808.2784 1563.9463,-805.4596 1564.4175,-812.4437"/>
</g>
<!-- pm_NewPartition -->
<g id="node16" class="node">
<title>pm_NewPartition</title>
<polygon fill="none" stroke="#000000" points="1299.2231,-230.2 1299.2231,-279.8 1512.7271,-279.8 1512.7271,-230.2 1299.2231,-230.2"/>
<text text-anchor="start" x="1307.2231" y="-264.6" font-family="Times,serif" font-size="14.00" fill="#000000">handleStateChanges(NewPartition)</text>
<polyline fill="none" stroke="#000000" points="1299.2231,-257.8 1512.7271,-257.8 "/>
<text text-anchor="middle" x="1405.9751" y="-242.6" font-family="Times,serif" font-size="14.00" fill="#000000">新建partition</text>
</g>
<!-- pm_OnlinePartition -->
<g id="node17" class="node">
<title>pm_OnlinePartition</title>
<polygon fill="none" stroke="#000000" points="1293.3887,-161.2 1293.3887,-210.8 1518.5615,-210.8 1518.5615,-161.2 1293.3887,-161.2"/>
<text text-anchor="start" x="1301.3887" y="-195.6" font-family="Times,serif" font-size="14.00" fill="#000000">handleStateChanges(OnlinePartition)</text>
<polyline fill="none" stroke="#000000" points="1293.3887,-188.8 1518.5615,-188.8 "/>
<text text-anchor="middle" x="1405.9751" y="-173.6" font-family="Times,serif" font-size="14.00" fill="#000000">将paritition设置为在线</text>
</g>
<!-- rm_NewReplica -->
<g id="node18" class="node">
<title>rm_NewReplica</title>
<polygon fill="none" stroke="#000000" points="1301.9541,-72 1301.9541,-108 1509.9961,-108 1509.9961,-72 1301.9541,-72"/>
<text text-anchor="middle" x="1405.9751" y="-85.8" font-family="Times,serif" font-size="14.00" fill="#000000">handleStateChanges(NewReplica)</text>
</g>
<!-- rm_OnlineReplica -->
<g id="node19" class="node">
<title>rm_OnlineReplica</title>
<polygon fill="none" stroke="#000000" points="1296.1196,-17 1296.1196,-53 1515.8306,-53 1515.8306,-17 1296.1196,-17"/>
<text text-anchor="middle" x="1405.9751" y="-30.8" font-family="Times,serif" font-size="14.00" fill="#000000">handleStateChanges(OnlineReplica)</text>
</g>
<!-- onNewPartitionCreation -->
<g id="node20" class="node">
<title>onNewPartitionCreation</title>
<polygon fill="none" stroke="#000000" points="1044.541,-196.2 1044.541,-245.8 1197.4033,-245.8 1197.4033,-196.2 1044.541,-196.2"/>
<text text-anchor="middle" x="1120.9722" y="-230.6" font-family="Times,serif" font-size="14.00" fill="#000000">onNewPartitionCreation</text>
<polyline fill="none" stroke="#000000" points="1044.541,-223.8 1197.4033,-223.8 "/>
<text text-anchor="middle" x="1120.9722" y="-208.6" font-family="Times,serif" font-size="14.00" fill="#000000">创建新的partition</text>
</g>
<!-- onNewPartitionCreation&#45;&gt;pm_NewPartition -->
<g id="edge20" class="edge">
<title>onNewPartitionCreation&#45;&gt;pm_NewPartition</title>
<path fill="none" stroke="#000000" d="M1197.7226,-230.1561C1225.8401,-233.5104 1258.3318,-237.3866 1289.1641,-241.0648"/>
<polygon fill="#000000" stroke="#000000" points="1288.7644,-244.5418 1299.1086,-242.2511 1289.5936,-237.5911 1288.7644,-244.5418"/>
</g>
<!-- onNewPartitionCreation&#45;&gt;pm_OnlinePartition -->
<g id="edge21" class="edge">
<title>onNewPartitionCreation&#45;&gt;pm_OnlinePartition</title>
<path fill="none" stroke="#000000" d="M1197.7226,-211.5746C1223.9744,-208.3507 1254.0391,-204.6586 1283.0063,-201.1013"/>
<polygon fill="#000000" stroke="#000000" points="1283.6997,-204.5425 1293.1985,-199.8496 1282.8464,-197.5947 1283.6997,-204.5425"/>
</g>
<!-- onNewPartitionCreation&#45;&gt;rm_NewReplica -->
<g id="edge22" class="edge">
<title>onNewPartitionCreation&#45;&gt;rm_NewReplica</title>
<path fill="none" stroke="#000000" d="M1175.2499,-196.0516C1227.8566,-171.8712 1306.9098,-135.5348 1357.4682,-112.2959"/>
<polygon fill="#000000" stroke="#000000" points="1358.9398,-115.4716 1366.5642,-108.115 1356.0163,-109.1113 1358.9398,-115.4716"/>
</g>
<!-- onNewPartitionCreation&#45;&gt;rm_OnlineReplica -->
<g id="edge23" class="edge">
<title>onNewPartitionCreation&#45;&gt;rm_OnlineReplica</title>
<path fill="none" stroke="#000000" d="M1138.9993,-195.9038C1166.0002,-160.2792 1220.4609,-95.645 1282.5879,-62 1285.9171,-60.1971 1289.3585,-58.5145 1292.8818,-56.9443"/>
<polygon fill="#000000" stroke="#000000" points="1294.4576,-60.0809 1302.3786,-53.0447 1291.7986,-53.6055 1294.4576,-60.0809"/>
</g>
<!-- processTopicChange -->
<g id="node21" class="node">
<title>processTopicChange</title>
<polygon fill="none" stroke="#000000" points="0,-608.4001 0,-677.5999 178.3262,-677.5999 178.3262,-608.4001 0,-608.4001"/>
<text text-anchor="middle" x="89.1631" y="-662.3999" font-family="Times,serif" font-size="14.00" fill="#000000">processTopicChange</text>
<polyline fill="none" stroke="#000000" points="0,-655.5999 178.3262,-655.5999 "/>
<text text-anchor="start" x="8" y="-640.3999" font-family="Times,serif" font-size="14.00" fill="#000000">比较allTopics和zk中的topic</text>
<text text-anchor="start" x="8" y="-620.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 计算出删除和新增的topic</text>
</g>
<!-- processTopicChange&#45;&gt;getFullReplicaAssignmentForTopics -->
<g id="edge11" class="edge">
<title>processTopicChange&#45;&gt;getFullReplicaAssignmentForTopics</title>
<path fill="none" stroke="#000000" d="M108.9249,-608.1733C130.538,-573.0627 168.3067,-519.6617 214.3262,-488 357.8726,-389.2391 412.985,-367 587.2241,-367 587.2241,-367 587.2241,-367 842.4805,-367 994.8958,-367 1170.5006,-367 1284.6184,-367"/>
<polygon fill="#000000" stroke="#000000" points="1284.7806,-370.5001 1294.7806,-367 1284.7806,-363.5001 1284.7806,-370.5001"/>
</g>
<!-- processTopicChange&#45;&gt;getAllTopicsInCluster -->
<g id="edge12" class="edge">
<title>processTopicChange&#45;&gt;getAllTopicsInCluster</title>
<path fill="none" stroke="#000000" d="M154.7659,-608.3614C197.1659,-585.9739 251.156,-557.4669 288.2583,-537.8767"/>
<polygon fill="#000000" stroke="#000000" points="290.1011,-540.8617 297.3099,-533.0974 286.8326,-534.6716 290.1011,-540.8617"/>
</g>
<!-- processTopicChange&#45;&gt;updatePartitionFullReplicaAssignment -->
<g id="edge13" class="edge">
<title>processTopicChange&#45;&gt;updatePartitionFullReplicaAssignment</title>
<path fill="none" stroke="#000000" d="M178.3557,-677.0567C190.3286,-680.8297 202.5429,-684.2829 214.3262,-687 421.5332,-734.7798 479.1918,-711.2724 689.6045,-742 698.0333,-743.2309 706.7111,-744.5694 715.4478,-745.9702"/>
<polygon fill="#000000" stroke="#000000" points="714.8948,-749.4262 725.3268,-747.5758 716.0178,-742.5168 714.8948,-749.4262"/>
</g>
<!-- processTopicChange&#45;&gt;allTopics -->
<g id="edge14" class="edge">
<title>processTopicChange&#45;&gt;allTopics</title>
<path fill="none" stroke="#000000" d="M105.3491,-677.7443C125.3628,-716.7744 163.1544,-779.0868 214.3262,-813 236.0583,-827.4026 264.4043,-834.4185 287.7823,-837.8261"/>
<polygon fill="#000000" stroke="#000000" points="287.4322,-841.3098 297.797,-839.1141 288.3251,-834.367 287.4322,-841.3098"/>
</g>
<!-- processTopicChange&#45;&gt;removeTopic -->
<g id="edge15" class="edge">
<title>processTopicChange&#45;&gt;removeTopic</title>
<path fill="none" stroke="#000000" d="M141.402,-677.6544C163.457,-691.618 189.6929,-707.3731 214.3262,-720 221.6645,-723.7616 229.3594,-727.4692 237.1504,-731.0585"/>
<polygon fill="#000000" stroke="#000000" points="235.7716,-734.2762 246.3249,-735.2138 238.6596,-727.8997 235.7716,-734.2762"/>
</g>
<!-- processTopicChange&#45;&gt;onNewPartitionCreation -->
<g id="edge16" class="edge">
<title>processTopicChange&#45;&gt;onNewPartitionCreation</title>
<path fill="none" stroke="#000000" d="M91.3012,-608.3688C97.5044,-540.6822 121.558,-391.2481 214.3262,-320 459.9273,-131.3726 859.4357,-173.1769 1034.3398,-203.4182"/>
<polygon fill="#000000" stroke="#000000" points="1033.814,-206.8794 1044.2692,-205.1646 1035.0266,-199.9852 1033.814,-206.8794"/>
</g>
<!-- registerPartitionModificationsHandlers -->
<g id="node22" class="node">
<title>registerPartitionModificationsHandlers</title>
<polygon fill="none" stroke="#000000" points="214.3262,-608.4001 214.3262,-677.5999 448.8438,-677.5999 448.8438,-608.4001 214.3262,-608.4001"/>
<text text-anchor="middle" x="331.585" y="-662.3999" font-family="Times,serif" font-size="14.00" fill="#000000">registerPartitionModificationsHandlers</text>
<polyline fill="none" stroke="#000000" points="214.3262,-655.5999 448.8438,-655.5999 "/>
<text text-anchor="start" x="222.3262" y="-640.3999" font-family="Times,serif" font-size="14.00" fill="#000000">给新增的topic注册</text>
<text text-anchor="start" x="222.3262" y="-620.8" font-family="Times,serif" font-size="14.00" fill="#000000"> PartitionModification处理函数</text>
</g>
<!-- processTopicChange&#45;&gt;registerPartitionModificationsHandlers -->
<g id="edge17" class="edge">
<title>processTopicChange&#45;&gt;registerPartitionModificationsHandlers</title>
<path fill="none" stroke="#000000" d="M178.3993,-643C186.7442,-643 195.307,-643 203.9133,-643"/>
<polygon fill="#000000" stroke="#000000" points="204.0259,-646.5001 214.0259,-643 204.0259,-639.5001 204.0259,-646.5001"/>
</g>
<!-- registerPartitionModificationsHandlers&#45;&gt;registerZNodeChangeHandler -->
<g id="edge18" class="edge">
<title>registerPartitionModificationsHandlers&#45;&gt;registerZNodeChangeHandler</title>
<path fill="none" stroke="#000000" d="M437.1892,-608.2948C441.1316,-606.8665 445.0274,-605.4321 448.8438,-604 478.3845,-592.9148 510.9498,-579.3352 537.0644,-568.1032"/>
<polygon fill="#000000" stroke="#000000" points="538.5843,-571.2593 546.3761,-564.0803 535.8081,-564.8333 538.5843,-571.2593"/>
</g>
<!-- PartitionModificationsHandler -->
<g id="node23" class="node">
<title>PartitionModificationsHandler</title>
<polygon fill="none" stroke="#000000" points="680.814,-658 493.6343,-658 493.6343,-622 680.814,-622 680.814,-658"/>
<text text-anchor="middle" x="587.2241" y="-635.8" font-family="Times,serif" font-size="14.00" fill="#000000">PartitionModificationsHandler</text>
</g>
<!-- registerPartitionModificationsHandlers&#45;&gt;PartitionModificationsHandler -->
<g id="edge19" class="edge">
<title>registerPartitionModificationsHandlers&#45;&gt;PartitionModificationsHandler</title>
<path fill="none" stroke="#000000" d="M448.9298,-641.6229C460.386,-641.4885 471.9552,-641.3527 483.266,-641.22"/>
<polygon fill="#000000" stroke="#000000" points="483.6118,-644.7163 493.5701,-641.0991 483.5296,-637.7167 483.6118,-644.7163"/>
</g>
<!-- processPartitionModifications -->
<g id="node24" class="node">
<title>processPartitionModifications</title>
<polygon fill="none" stroke="#000000" points="750.4873,-613.2 750.4873,-662.8 934.4736,-662.8 934.4736,-613.2 750.4873,-613.2"/>
<text text-anchor="middle" x="842.4805" y="-647.6" font-family="Times,serif" font-size="14.00" fill="#000000">processPartitionModifications</text>
<polyline fill="none" stroke="#000000" points="750.4873,-640.8 934.4736,-640.8 "/>
<text text-anchor="start" x="758.4873" y="-625.6" font-family="Times,serif" font-size="14.00" fill="#000000">zk partition数据改变回调</text>
</g>
<!-- PartitionModificationsHandler&#45;&gt;processPartitionModifications -->
<g id="edge24" class="edge">
<title>PartitionModificationsHandler&#45;&gt;processPartitionModifications</title>
<path fill="none" stroke="#000000" d="M680.8227,-639.2666C700.0879,-639.1157 720.4691,-638.956 740.0287,-638.8027"/>
<polygon fill="#000000" stroke="#000000" points="740.1998,-642.3016 750.172,-638.7233 740.1449,-635.3018 740.1998,-642.3016"/>
</g>
<!-- processPartitionModifications&#45;&gt;getReplicaAssignmentForTopics -->
<g id="edge25" class="edge">
<title>processPartitionModifications&#45;&gt;getReplicaAssignmentForTopics</title>
<path fill="none" stroke="#000000" d="M934.6743,-620.9696C943.3211,-617.6624 951.7018,-613.7139 959.3564,-609 1022.9978,-569.8086 1074.6625,-497.2847 1101.3164,-454.6804"/>
<polygon fill="#000000" stroke="#000000" points="1104.3576,-456.4166 1106.6197,-446.066 1098.3967,-452.7468 1104.3576,-456.4166"/>
</g>
<!-- processPartitionModifications&#45;&gt;updateReplicaAssignmentForPartition -->
<g id="edge26" class="edge">
<title>processPartitionModifications&#45;&gt;updateReplicaAssignmentForPartition</title>
<path fill="none" stroke="#000000" d="M896.4213,-662.8452C925.6101,-676.1633 962.3495,-692.7236 995.3564,-707 1013.1586,-714.6999 1032.4752,-722.8146 1050.4998,-730.2843"/>
<polygon fill="#000000" stroke="#000000" points="1049.2142,-733.5401 1059.7929,-734.1261 1051.8886,-727.0711 1049.2142,-733.5401"/>
</g>
<!-- processPartitionModifications&#45;&gt;onNewPartitionCreation -->
<g id="edge27" class="edge">
<title>processPartitionModifications&#45;&gt;onNewPartitionCreation</title>
<path fill="none" stroke="#000000" d="M934.53,-626.9434C943.9061,-622.5722 952.4881,-616.7407 959.3564,-609 1045.264,-512.1812 931.7579,-432.7351 995.3564,-320 1011.4752,-291.4278 1039.4705,-268.1424 1064.9471,-251.3495"/>
<polygon fill="#000000" stroke="#000000" points="1066.9266,-254.2382 1073.4697,-245.9052 1063.1582,-248.3391 1066.9266,-254.2382"/>
</g>
<!-- isTopicQueuedUpForDeletion -->
<g id="node25" class="node">
<title>isTopicQueuedUpForDeletion</title>
<polygon fill="none" stroke="#000000" points="1213.7918,-644 1028.1526,-644 1028.1526,-608 1213.7918,-608 1213.7918,-644"/>
<text text-anchor="middle" x="1120.9722" y="-621.8" font-family="Times,serif" font-size="14.00" fill="#000000">isTopicQueuedUpForDeletion</text>
</g>
<!-- processPartitionModifications&#45;&gt;isTopicQueuedUpForDeletion -->
<g id="edge28" class="edge">
<title>processPartitionModifications&#45;&gt;isTopicQueuedUpForDeletion</title>
<path fill="none" stroke="#000000" d="M934.8273,-634.0208C961.3623,-632.8775 990.4699,-631.6232 1017.6231,-630.4532"/>
<polygon fill="#000000" stroke="#000000" points="1018.0846,-633.9367 1027.9247,-630.0093 1017.7832,-626.9432 1018.0846,-633.9367"/>
</g>
<!-- restorePartitionReplicaAssignment -->
<g id="node26" class="node">
<title>restorePartitionReplicaAssignment</title>
<polygon fill="none" stroke="#000000" points="1226.9312,-698 1015.0132,-698 1015.0132,-662 1226.9312,-662 1226.9312,-698"/>
<text text-anchor="middle" x="1120.9722" y="-675.8" font-family="Times,serif" font-size="14.00" fill="#000000">restorePartitionReplicaAssignment</text>
</g>
<!-- processPartitionModifications&#45;&gt;restorePartitionReplicaAssignment -->
<g id="edge29" class="edge">
<title>processPartitionModifications&#45;&gt;restorePartitionReplicaAssignment</title>
<path fill="none" stroke="#000000" d="M934.8273,-651.9271C957.271,-655.3118 981.5552,-658.9742 1004.9405,-662.501"/>
<polygon fill="#000000" stroke="#000000" points="1004.4896,-665.9725 1014.8997,-664.003 1005.5335,-659.0507 1004.4896,-665.9725"/>
</g>
<!-- restorePartitionReplicaAssignment&#45;&gt;getChildren -->
<g id="edge30" class="edge">
<title>restorePartitionReplicaAssignment&#45;&gt;getChildren</title>
<path fill="none" stroke="#000000" d="M1226.9618,-667.1915C1234.1648,-663.4246 1240.8326,-658.7589 1246.5879,-653 1300.5669,-598.9872 1228.7092,-539.1128 1282.5879,-485 1301.2857,-466.221 1329.8269,-459.155 1354.7512,-456.9282"/>
<polygon fill="#000000" stroke="#000000" points="1355.0638,-460.4153 1364.8121,-456.2654 1354.6036,-453.4305 1355.0638,-460.4153"/>
</g>
</g>
</svg>
