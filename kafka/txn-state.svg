<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: txn_state Pages: 1 -->
<svg width="1391pt" height="356pt"
 viewBox="0.00 0.00 1391.02 356.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 352)">
<title>txn_state</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-352 1387.0186,-352 1387.0186,4 -4,4"/>
<g id="clust5" class="cluster">
<title>cluster_TransactionMetadata</title>
<path fill="none" stroke="#000000" d="M222.978,-206C222.978,-206 549.5215,-206 549.5215,-206 555.5215,-206 561.5215,-212 561.5215,-218 561.5215,-218 561.5215,-328 561.5215,-328 561.5215,-334 555.5215,-340 549.5215,-340 549.5215,-340 222.978,-340 222.978,-340 216.978,-340 210.978,-334 210.978,-328 210.978,-328 210.978,-218 210.978,-218 210.978,-212 216.978,-206 222.978,-206"/>
<text text-anchor="middle" x="386.2498" y="-320" font-family="Times,serif" font-size="20.00" fill="#000000">TransactionMetadata</text>
</g>
<!-- recv_all_p_ack -->
<g id="node1" class="node">
<title>recv_all_p_ack</title>
<polygon fill="none" stroke="#000000" points="997.9766,-24.6001 997.9766,-91.3999 1190.5079,-91.3999 1190.5079,-24.6001 997.9766,-24.6001"/>
<text text-anchor="start" x="1005.9766" y="-76.1999" font-family="Times,serif" font-size="14.00" fill="#000000">coordinator收到事务涉及到的</text>
<text text-anchor="start" x="1005.9766" y="-56.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 所有partition的对于</text>
<text text-anchor="start" x="1005.9766" y="-37" font-family="Times,serif" font-size="14.00" fill="#000000"> writeMark请求的ack</text>
</g>
<!-- CompleteCommit -->
<g id="node10" class="node">
<title>CompleteCommit</title>
<polygon fill="#95e1d3" stroke="#000000" points="1311.9821,-67.0493 1316.7616,-67.1479 1321.4917,-67.2953 1326.1531,-67.4913 1330.7268,-67.7353 1335.1946,-68.0266 1339.5387,-68.3645 1343.7424,-68.7479 1347.7896,-69.1759 1351.6653,-69.6472 1355.3555,-70.1606 1358.8474,-70.7147 1362.1294,-71.308 1365.1911,-71.9388 1368.0233,-72.6054 1370.6184,-73.3059 1372.9699,-74.0385 1375.0727,-74.8012 1376.9232,-75.5918 1378.5189,-76.4082 1379.859,-77.2481 1380.9436,-78.1093 1381.7742,-78.9894 1382.3535,-79.886 1382.6854,-80.7965 1382.7747,-81.7186 1382.6272,-82.6497 1382.2499,-83.5873 1381.6501,-84.5287 1380.8363,-85.4713 1379.8173,-86.4127 1378.6025,-87.3503 1377.2019,-88.2814 1375.6257,-89.2035 1373.8842,-90.114 1371.9881,-91.0106 1369.9479,-91.8907 1367.7741,-92.7519 1365.4774,-93.5918 1363.0678,-94.4082 1360.5552,-95.1988 1357.9494,-95.9615 1355.2596,-96.6941 1352.4943,-97.3946 1349.6621,-98.0612 1346.7706,-98.692 1343.827,-99.2853 1340.8381,-99.8394 1337.8099,-100.3528 1334.748,-100.8241 1331.6575,-101.2521 1328.543,-101.6355 1325.4084,-101.9734 1322.2575,-102.2647 1319.0934,-102.5087 1315.919,-102.7047 1312.7369,-102.8521 1309.5495,-102.9507 1306.359,-103 1303.1674,-103 1299.9769,-102.9507 1296.7895,-102.8521 1293.6074,-102.7047 1290.433,-102.5087 1287.2689,-102.2647 1284.118,-101.9734 1280.9834,-101.6355 1277.8689,-101.2521 1274.7784,-100.8241 1271.7165,-100.3528 1268.6883,-99.8394 1265.6994,-99.2853 1262.7558,-98.692 1259.8643,-98.0612 1257.0321,-97.3946 1254.2669,-96.6941 1251.577,-95.9615 1248.9712,-95.1988 1246.4587,-94.4082 1244.049,-93.5918 1241.7523,-92.7519 1239.5786,-91.8907 1237.5383,-91.0106 1235.6422,-90.114 1233.9007,-89.2035 1232.3245,-88.2814 1230.9239,-87.3503 1229.7091,-86.4127 1228.6901,-85.4713 1227.8763,-84.5287 1227.2765,-83.5873 1226.8992,-82.6497 1226.7517,-81.7186 1226.841,-80.7965 1227.1729,-79.886 1227.7522,-78.9894 1228.5828,-78.1093 1229.6674,-77.2481 1231.0075,-76.4082 1232.6032,-75.5918 1234.4537,-74.8012 1236.5565,-74.0385 1238.908,-73.3059 1241.5031,-72.6054 1244.3353,-71.9388 1247.397,-71.308 1250.679,-70.7147 1254.1709,-70.1606 1257.8611,-69.6472 1261.7368,-69.1759 1265.784,-68.7479 1269.9877,-68.3645 1274.3319,-68.0266 1278.7996,-67.7353 1283.3733,-67.4913 1288.0347,-67.2953 1292.7648,-67.1479 1297.5443,-67.0493 1302.3536,-67 1307.1728,-67 1311.9821,-67.0493"/>
<text text-anchor="middle" x="1304.7632" y="-80.8" font-family="Times,serif" font-size="14.00" fill="#000000">CompleteCommit</text>
</g>
<!-- recv_all_p_ack&#45;&gt;CompleteCommit -->
<g id="edge14" class="edge">
<title>recv_all_p_ack&#45;&gt;CompleteCommit</title>
<path fill="none" stroke="#000000" d="M1190.5693,-70.3543C1201.0441,-71.6977 1211.6378,-73.0564 1221.9314,-74.3766"/>
<polygon fill="#000000" stroke="#000000" points="1221.7454,-77.8813 1232.1095,-75.6819 1222.636,-70.9382 1221.7454,-77.8813"/>
</g>
<!-- CompleteAbort -->
<g id="node11" class="node">
<title>CompleteAbort</title>
<polygon fill="#95e1d3" stroke="#000000" points="1311.1672,-13.0493 1315.4073,-13.1479 1319.6034,-13.2953 1323.7386,-13.4913 1327.796,-13.7353 1331.7595,-14.0266 1335.6133,-14.3645 1339.3425,-14.7479 1342.9328,-15.1759 1346.371,-15.6472 1349.6447,-16.1606 1352.7425,-16.7147 1355.654,-17.308 1358.37,-17.9388 1360.8826,-18.6054 1363.1847,-19.3059 1365.2708,-20.0385 1367.1362,-20.8012 1368.7778,-21.5918 1370.1935,-22.4082 1371.3823,-23.2481 1372.3444,-24.1093 1373.0813,-24.9894 1373.5952,-25.886 1373.8896,-26.7965 1373.9688,-27.7186 1373.838,-28.6497 1373.5032,-29.5873 1372.9712,-30.5287 1372.2492,-31.4713 1371.3452,-32.4127 1370.2676,-33.3503 1369.0251,-34.2814 1367.6268,-35.2035 1366.0819,-36.114 1364.3998,-37.0106 1362.5899,-37.8907 1360.6615,-38.7519 1358.624,-39.5918 1356.4864,-40.4082 1354.2575,-41.1988 1351.9458,-41.9615 1349.5596,-42.6941 1347.1065,-43.3946 1344.594,-44.0612 1342.0288,-44.692 1339.4175,-45.2853 1336.766,-45.8394 1334.0796,-46.3528 1331.3634,-46.8241 1328.6217,-47.2521 1325.8588,-47.6355 1323.078,-47.9734 1320.2828,-48.2647 1317.4758,-48.5087 1314.6597,-48.7047 1311.8368,-48.8521 1309.0092,-48.9507 1306.1789,-49 1303.3476,-49 1300.5172,-48.9507 1297.6896,-48.8521 1294.8667,-48.7047 1292.0506,-48.5087 1289.2437,-48.2647 1286.4484,-47.9734 1283.6676,-47.6355 1280.9047,-47.2521 1278.163,-46.8241 1275.4468,-46.3528 1272.7604,-45.8394 1270.1089,-45.2853 1267.4976,-44.692 1264.9324,-44.0612 1262.4199,-43.3946 1259.9668,-42.6941 1257.5806,-41.9615 1255.2689,-41.1988 1253.04,-40.4082 1250.9024,-39.5918 1248.8649,-38.7519 1246.9365,-37.8907 1245.1266,-37.0106 1243.4445,-36.114 1241.8996,-35.2035 1240.5013,-34.2814 1239.2588,-33.3503 1238.1812,-32.4127 1237.2772,-31.4713 1236.5552,-30.5287 1236.0232,-29.5873 1235.6884,-28.6497 1235.5576,-27.7186 1235.6368,-26.7965 1235.9312,-25.886 1236.4451,-24.9894 1237.182,-24.1093 1238.1441,-23.2481 1239.3329,-22.4082 1240.7486,-21.5918 1242.3902,-20.8012 1244.2556,-20.0385 1246.3417,-19.3059 1248.6438,-18.6054 1251.1564,-17.9388 1253.8724,-17.308 1256.7839,-16.7147 1259.8817,-16.1606 1263.1554,-15.6472 1266.5936,-15.1759 1270.1839,-14.7479 1273.9131,-14.3645 1277.7669,-14.0266 1281.7304,-13.7353 1285.7878,-13.4913 1289.923,-13.2953 1294.1192,-13.1479 1298.3592,-13.0493 1302.6256,-13 1306.9008,-13 1311.1672,-13.0493"/>
<text text-anchor="middle" x="1304.7632" y="-26.8" font-family="Times,serif" font-size="14.00" fill="#000000">CompleteAbort</text>
</g>
<!-- recv_all_p_ack&#45;&gt;CompleteAbort -->
<g id="edge16" class="edge">
<title>recv_all_p_ack&#45;&gt;CompleteAbort</title>
<path fill="none" stroke="#000000" d="M1190.5693,-45.6457C1206.4033,-43.615 1222.509,-41.5494 1237.4391,-39.6345"/>
<polygon fill="#000000" stroke="#000000" points="1238.0963,-43.079 1247.5698,-38.3352 1237.2057,-36.1359 1238.0963,-43.079"/>
</g>
<!-- Empty -->
<g id="node2" class="node">
<title>Empty</title>
<polygon fill="#95e1d3" stroke="#000000" points="74.3083,-27.0493 76.4987,-27.1479 78.6664,-27.2953 80.8027,-27.4913 82.8987,-27.7353 84.9462,-28.0266 86.9371,-28.3645 88.8636,-28.7479 90.7184,-29.1759 92.4945,-29.6472 94.1857,-30.1606 95.786,-30.7147 97.2901,-31.308 98.6932,-31.9388 99.9912,-32.6054 101.1805,-33.3059 102.2581,-34.0385 103.2218,-34.8012 104.0699,-35.5918 104.8012,-36.4082 105.4153,-37.2481 105.9124,-38.1093 106.293,-38.9894 106.5585,-39.886 106.7106,-40.7965 106.7515,-41.7186 106.684,-42.6497 106.511,-43.5873 106.2362,-44.5287 105.8632,-45.4713 105.3962,-46.4127 104.8395,-47.3503 104.1976,-48.2814 103.4753,-49.2035 102.6772,-50.114 101.8082,-51.0106 100.8732,-51.8907 99.877,-52.7519 98.8244,-53.5918 97.7201,-54.4082 96.5687,-55.1988 95.3745,-55.9615 94.1417,-56.6941 92.8745,-57.3946 91.5765,-58.0612 90.2514,-58.692 88.9024,-59.2853 87.5326,-59.8394 86.1448,-60.3528 84.7416,-60.8241 83.3253,-61.2521 81.8979,-61.6355 80.4614,-61.9734 79.0174,-62.2647 77.5673,-62.5087 76.1125,-62.7047 74.6542,-62.8521 73.1935,-62.9507 71.7313,-63 70.2687,-63 68.8065,-62.9507 67.3458,-62.8521 65.8875,-62.7047 64.4327,-62.5087 62.9826,-62.2647 61.5386,-61.9734 60.1021,-61.6355 58.6747,-61.2521 57.2584,-60.8241 55.8552,-60.3528 54.4674,-59.8394 53.0976,-59.2853 51.7486,-58.692 50.4235,-58.0612 49.1255,-57.3946 47.8583,-56.6941 46.6255,-55.9615 45.4313,-55.1988 44.2799,-54.4082 43.1756,-53.5918 42.123,-52.7519 41.1268,-51.8907 40.1918,-51.0106 39.3228,-50.114 38.5247,-49.2035 37.8024,-48.2814 37.1605,-47.3503 36.6038,-46.4127 36.1368,-45.4713 35.7638,-44.5287 35.489,-43.5873 35.316,-42.6497 35.2485,-41.7186 35.2894,-40.7965 35.4415,-39.886 35.707,-38.9894 36.0876,-38.1093 36.5847,-37.2481 37.1988,-36.4082 37.9301,-35.5918 38.7782,-34.8012 39.7419,-34.0385 40.8195,-33.3059 42.0088,-32.6054 43.3068,-31.9388 44.7099,-31.308 46.214,-30.7147 47.8143,-30.1606 49.5055,-29.6472 51.2816,-29.1759 53.1364,-28.7479 55.0629,-28.3645 57.0538,-28.0266 59.1013,-27.7353 61.1973,-27.4913 63.3336,-27.2953 65.5013,-27.1479 67.6917,-27.0493 69.8957,-27 72.1043,-27 74.3083,-27.0493"/>
<text text-anchor="middle" x="71" y="-40.8" font-family="Times,serif" font-size="14.00" fill="#000000">Empty</text>
</g>
<!-- AddPartitionsToTxnRequest -->
<g id="node3" class="node">
<title>AddPartitionsToTxnRequest</title>
<polygon fill="none" stroke="#000000" points="371.7866,-90 195.769,-90 195.769,-54 371.7866,-54 371.7866,-90"/>
<text text-anchor="middle" x="283.7778" y="-67.8" font-family="Times,serif" font-size="14.00" fill="#000000">AddPartitionsToTxnRequest</text>
</g>
<!-- Empty&#45;&gt;AddPartitionsToTxnRequest -->
<g id="edge1" class="edge">
<title>Empty&#45;&gt;AddPartitionsToTxnRequest</title>
<path fill="none" stroke="#000000" d="M103.7802,-49.1596C125.7745,-51.9505 156.0012,-55.7861 185.4065,-59.5174"/>
<polygon fill="#000000" stroke="#000000" points="184.973,-62.9904 195.3341,-60.7771 185.8543,-56.046 184.973,-62.9904"/>
</g>
<!-- AddOffsetsToTxnRequest -->
<g id="node4" class="node">
<title>AddOffsetsToTxnRequest</title>
<polygon fill="none" stroke="#000000" points="364.8068,-36 202.7488,-36 202.7488,0 364.8068,0 364.8068,-36"/>
<text text-anchor="middle" x="283.7778" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">AddOffsetsToTxnRequest</text>
</g>
<!-- Empty&#45;&gt;AddOffsetsToTxnRequest -->
<g id="edge2" class="edge">
<title>Empty&#45;&gt;AddOffsetsToTxnRequest</title>
<path fill="none" stroke="#000000" d="M107.0949,-40.4198C130.5304,-37.446 162.203,-33.427 192.2602,-29.6129"/>
<polygon fill="#000000" stroke="#000000" points="192.8976,-33.0602 202.3774,-28.3291 192.0163,-26.1159 192.8976,-33.0602"/>
</g>
<!-- Ongoing -->
<g id="node5" class="node">
<title>Ongoing</title>
<polygon fill="#95e1d3" stroke="#000000" points="511.885,-22.0493 514.5778,-22.1479 517.2427,-22.2953 519.8689,-22.4913 522.4457,-22.7353 524.9629,-23.0266 527.4103,-23.3645 529.7787,-23.7479 532.0589,-24.1759 534.2424,-24.6472 536.3215,-25.1606 538.2889,-25.7147 540.1379,-26.308 541.8629,-26.9388 543.4585,-27.6054 544.9206,-28.3059 546.2454,-29.0385 547.4301,-29.8012 548.4727,-30.5918 549.3718,-31.4082 550.1267,-32.2481 550.7378,-33.1093 551.2057,-33.9894 551.5321,-34.886 551.7191,-35.7965 551.7694,-36.7186 551.6864,-37.6497 551.4737,-38.5873 551.1358,-39.5287 550.6773,-40.4713 550.1032,-41.4127 549.4188,-42.3503 548.6298,-43.2814 547.7417,-44.2035 546.7606,-45.114 545.6923,-46.0106 544.5428,-46.8907 543.3182,-47.7519 542.0242,-48.5918 540.6666,-49.4082 539.251,-50.1988 537.7829,-50.9615 536.2674,-51.6941 534.7095,-52.3946 533.1139,-53.0612 531.4848,-53.692 529.8264,-54.2853 528.1424,-54.8394 526.4363,-55.3528 524.7113,-55.8241 522.9701,-56.2521 521.2154,-56.6355 519.4494,-56.9734 517.6741,-57.2647 515.8915,-57.5087 514.103,-57.7047 512.3102,-57.8521 510.5145,-57.9507 508.7169,-58 506.9188,-58 505.1213,-57.9507 503.3255,-57.8521 501.5327,-57.7047 499.7443,-57.5087 497.9616,-57.2647 496.1864,-56.9734 494.4204,-56.6355 492.6656,-56.2521 490.9245,-55.8241 489.1994,-55.3528 487.4933,-54.8394 485.8094,-54.2853 484.151,-53.692 482.5219,-53.0612 480.9262,-52.3946 479.3683,-51.6941 477.8528,-50.9615 476.3847,-50.1988 474.9692,-49.4082 473.6116,-48.5918 472.3176,-47.7519 471.0929,-46.8907 469.9435,-46.0106 468.8752,-45.114 467.894,-44.2035 467.006,-43.2814 466.2169,-42.3503 465.5325,-41.4127 464.9584,-40.4713 464.4999,-39.5287 464.162,-38.5873 463.9494,-37.6497 463.8663,-36.7186 463.9166,-35.7965 464.1036,-34.886 464.43,-33.9894 464.898,-33.1093 465.509,-32.2481 466.264,-31.4082 467.163,-30.5918 468.2056,-29.8012 469.3903,-29.0385 470.7151,-28.3059 472.1772,-27.6054 473.7729,-26.9388 475.4978,-26.308 477.3469,-25.7147 479.3142,-25.1606 481.3933,-24.6472 483.5769,-24.1759 485.857,-23.7479 488.2254,-23.3645 490.6729,-23.0266 493.19,-22.7353 495.7669,-22.4913 498.3931,-22.2953 501.058,-22.1479 503.7507,-22.0493 506.4603,-22 509.1754,-22 511.885,-22.0493"/>
<text text-anchor="middle" x="507.8179" y="-35.8" font-family="Times,serif" font-size="14.00" fill="#000000">Ongoing</text>
</g>
<!-- AddPartitionsToTxnRequest&#45;&gt;Ongoing -->
<g id="edge3" class="edge">
<title>AddPartitionsToTxnRequest&#45;&gt;Ongoing</title>
<path fill="none" stroke="#000000" d="M331.291,-53.9417C367.1006,-46.0272 416.2515,-38.8457 453.5975,-35.9888"/>
<polygon fill="#000000" stroke="#000000" points="454.0554,-39.466 463.797,-35.3007 453.5841,-32.4818 454.0554,-39.466"/>
</g>
<!-- AddPartitionsToTxnRequest&#45;&gt;Ongoing -->
<g id="edge11" class="edge">
<title>AddPartitionsToTxnRequest&#45;&gt;Ongoing</title>
<path fill="none" stroke="#000000" d="M372.0028,-72.6243C406.7482,-68.474 444.6957,-62.0622 471.6244,-55.4198"/>
<polygon fill="#000000" stroke="#000000" points="472.5884,-58.7854 481.376,-52.867 470.8156,-52.0136 472.5884,-58.7854"/>
</g>
<!-- AddOffsetsToTxnRequest&#45;&gt;Ongoing -->
<g id="edge4" class="edge">
<title>AddOffsetsToTxnRequest&#45;&gt;Ongoing</title>
<path fill="none" stroke="#000000" d="M364.9782,-12.9384C398.5489,-15.1983 436.124,-19.5854 464.307,-24.7842"/>
<polygon fill="#000000" stroke="#000000" points="463.7535,-28.2423 474.2404,-26.7338 465.1017,-21.3733 463.7535,-28.2423"/>
</g>
<!-- AddOffsetsToTxnRequest&#45;&gt;Ongoing -->
<g id="edge12" class="edge">
<title>AddOffsetsToTxnRequest&#45;&gt;Ongoing</title>
<path fill="none" stroke="#000000" d="M343.8165,-36.0105C380.4654,-41.7113 426.6523,-45.9563 460.6655,-46.6134"/>
<polygon fill="#000000" stroke="#000000" points="460.777,-50.1144 470.8065,-46.6998 460.8367,-43.1147 460.777,-50.1144"/>
</g>
<!-- Ongoing&#45;&gt;AddPartitionsToTxnRequest -->
<g id="edge9" class="edge">
<title>Ongoing&#45;&gt;AddPartitionsToTxnRequest</title>
<path fill="none" stroke="#000000" d="M469.1022,-45.5298C444.9701,-48.9767 412.7464,-53.5792 381.9422,-57.979"/>
<polygon fill="#000000" stroke="#000000" points="381.4074,-54.5198 372.0028,-59.3987 382.3972,-61.4495 381.4074,-54.5198"/>
</g>
<!-- Ongoing&#45;&gt;AddOffsetsToTxnRequest -->
<g id="edge10" class="edge">
<title>Ongoing&#45;&gt;AddOffsetsToTxnRequest</title>
<path fill="none" stroke="#000000" d="M463.9665,-35.6939C438.6803,-33.2109 405.9168,-29.9937 375.2747,-26.9847"/>
<polygon fill="#000000" stroke="#000000" points="375.2724,-23.4677 364.9782,-25.9736 374.5883,-30.4342 375.2724,-23.4677"/>
</g>
<!-- EndTxnRequest_Commit -->
<g id="node6" class="node">
<title>EndTxnRequest_Commit</title>
<polygon fill="none" stroke="#000000" points="785.2354,-103 626.0283,-103 626.0283,-67 785.2354,-67 785.2354,-103"/>
<text text-anchor="middle" x="705.6318" y="-80.8" font-family="Times,serif" font-size="14.00" fill="#000000">EndTxnRequest_Commit</text>
</g>
<!-- Ongoing&#45;&gt;EndTxnRequest_Commit -->
<g id="edge5" class="edge">
<title>Ongoing&#45;&gt;EndTxnRequest_Commit</title>
<path fill="none" stroke="#000000" d="M543.183,-48.0451C563.6795,-52.7078 590.4893,-58.8066 616.4042,-64.7019"/>
<polygon fill="#000000" stroke="#000000" points="615.7503,-68.1425 626.2775,-66.948 617.3031,-61.3169 615.7503,-68.1425"/>
</g>
<!-- EndTxnRequest_Abort -->
<g id="node8" class="node">
<title>EndTxnRequest_Abort</title>
<polygon fill="none" stroke="#000000" points="778.501,-49 632.7626,-49 632.7626,-13 778.501,-13 778.501,-49"/>
<text text-anchor="middle" x="705.6318" y="-26.8" font-family="Times,serif" font-size="14.00" fill="#000000">EndTxnRequest_Abort</text>
</g>
<!-- Ongoing&#45;&gt;EndTxnRequest_Abort -->
<g id="edge7" class="edge">
<title>Ongoing&#45;&gt;EndTxnRequest_Abort</title>
<path fill="none" stroke="#000000" d="M551.7192,-38.0026C572.5347,-37.0556 598.116,-35.8917 622.4032,-34.7867"/>
<polygon fill="#000000" stroke="#000000" points="622.8845,-38.2685 632.7151,-34.3175 622.5663,-31.2757 622.8845,-38.2685"/>
</g>
<!-- PrepareCommit -->
<g id="node7" class="node">
<title>PrepareCommit</title>
<polygon fill="#95e1d3" stroke="#000000" points="898.0848,-67.0493 902.3914,-67.1479 906.6535,-67.2953 910.8537,-67.4913 914.9749,-67.7353 919.0006,-68.0266 922.915,-68.3645 926.7028,-68.7479 930.3495,-69.1759 933.8418,-69.6472 937.1669,-70.1606 940.3134,-70.7147 943.2706,-71.308 946.0294,-71.9388 948.5814,-72.6054 950.9197,-73.3059 953.0385,-74.0385 954.9333,-74.8012 956.6007,-75.5918 958.0386,-76.4082 959.2461,-77.2481 960.2233,-78.1093 960.9718,-78.9894 961.4938,-79.886 961.7928,-80.7965 961.8733,-81.7186 961.7404,-82.6497 961.4004,-83.5873 960.86,-84.5287 960.1266,-85.4713 959.2085,-86.4127 958.1139,-87.3503 956.8519,-88.2814 955.4316,-89.2035 953.8624,-90.114 952.1539,-91.0106 950.3155,-91.8907 948.3569,-92.7519 946.2873,-93.5918 944.1161,-94.4082 941.8522,-95.1988 939.5042,-95.9615 937.0804,-96.6941 934.5888,-97.3946 932.0368,-98.0612 929.4314,-98.692 926.779,-99.2853 924.0858,-99.8394 921.3572,-100.3528 918.5983,-100.8241 915.8136,-101.2521 913.0072,-101.6355 910.1827,-101.9734 907.3435,-102.2647 904.4925,-102.5087 901.6322,-102.7047 898.7649,-102.8521 895.8929,-102.9507 893.018,-103 890.1422,-103 887.2673,-102.9507 884.3953,-102.8521 881.528,-102.7047 878.6677,-102.5087 875.8167,-102.2647 872.9775,-101.9734 870.153,-101.6355 867.3466,-101.2521 864.5619,-100.8241 861.803,-100.3528 859.0744,-99.8394 856.3812,-99.2853 853.7288,-98.692 851.1234,-98.0612 848.5714,-97.3946 846.0798,-96.6941 843.656,-95.9615 841.308,-95.1988 839.0441,-94.4082 836.8729,-93.5918 834.8033,-92.7519 832.8447,-91.8907 831.0063,-91.0106 829.2978,-90.114 827.7286,-89.2035 826.3083,-88.2814 825.0463,-87.3503 823.9517,-86.4127 823.0336,-85.4713 822.3002,-84.5287 821.7598,-83.5873 821.4198,-82.6497 821.2869,-81.7186 821.3674,-80.7965 821.6664,-79.886 822.1884,-78.9894 822.9369,-78.1093 823.9141,-77.2481 825.1216,-76.4082 826.5595,-75.5918 828.2269,-74.8012 830.1217,-74.0385 832.2405,-73.3059 834.5788,-72.6054 837.1308,-71.9388 839.8896,-71.308 842.8468,-70.7147 845.9933,-70.1606 849.3184,-69.6472 852.8107,-69.1759 856.4574,-68.7479 860.2452,-68.3645 864.1596,-68.0266 868.1853,-67.7353 872.3065,-67.4913 876.5067,-67.2953 880.7688,-67.1479 885.0754,-67.0493 889.4089,-67 893.7513,-67 898.0848,-67.0493"/>
<text text-anchor="middle" x="891.5801" y="-80.8" font-family="Times,serif" font-size="14.00" fill="#000000">PrepareCommit</text>
</g>
<!-- EndTxnRequest_Commit&#45;&gt;PrepareCommit -->
<g id="edge6" class="edge">
<title>EndTxnRequest_Commit&#45;&gt;PrepareCommit</title>
<path fill="none" stroke="#000000" d="M785.2998,-85C794.3239,-85 803.5187,-85 812.5348,-85"/>
<polygon fill="#000000" stroke="#000000" points="812.6196,-88.5001 822.6196,-85 812.6195,-81.5001 812.6196,-88.5001"/>
</g>
<!-- PrepareCommit&#45;&gt;recv_all_p_ack -->
<g id="edge13" class="edge">
<title>PrepareCommit&#45;&gt;recv_all_p_ack</title>
<path fill="none" stroke="#000000" d="M957.9393,-76.1592C967.5496,-74.8788 977.6382,-73.5348 987.7956,-72.1815"/>
<polygon fill="#000000" stroke="#000000" points="988.5105,-75.6173 997.9607,-70.8273 987.586,-68.6786 988.5105,-75.6173"/>
</g>
<!-- PrepareAbort -->
<g id="node9" class="node">
<title>PrepareAbort</title>
<polygon fill="#95e1d3" stroke="#000000" points="897.2699,-13.0493 901.0371,-13.1479 904.7653,-13.2953 908.4393,-13.4913 912.0443,-13.7353 915.5657,-14.0266 918.9897,-14.3645 922.303,-14.7479 925.4929,-15.1759 928.5477,-15.6472 931.4563,-16.1606 934.2086,-16.7147 936.7954,-17.308 939.2086,-17.9388 941.4409,-18.6054 943.4863,-19.3059 945.3397,-20.0385 946.9971,-20.8012 948.4556,-21.5918 949.7134,-22.4082 950.7696,-23.2481 951.6245,-24.1093 952.2791,-24.9894 952.7358,-25.886 952.9973,-26.7965 953.0677,-27.7186 952.9515,-28.6497 952.6541,-29.5873 952.1814,-30.5287 951.5399,-31.4713 950.7367,-32.4127 949.7793,-33.3503 948.6754,-34.2814 947.433,-35.2035 946.0604,-36.114 944.5659,-37.0106 942.9578,-37.8907 941.2445,-38.7519 939.4342,-39.5918 937.535,-40.4082 935.5547,-41.1988 933.5008,-41.9615 931.3807,-42.6941 929.2012,-43.3946 926.9688,-44.0612 924.6898,-44.692 922.3697,-45.2853 920.0138,-45.8394 917.6271,-46.3528 915.2137,-46.8241 912.7779,-47.2521 910.323,-47.6355 907.8524,-47.9734 905.3689,-48.2647 902.875,-48.5087 900.3729,-48.7047 897.8649,-48.8521 895.3526,-48.9507 892.8379,-49 890.3223,-49 887.8076,-48.9507 885.2953,-48.8521 882.7873,-48.7047 880.2852,-48.5087 877.7913,-48.2647 875.3078,-47.9734 872.8372,-47.6355 870.3823,-47.2521 867.9465,-46.8241 865.5331,-46.3528 863.1464,-45.8394 860.7905,-45.2853 858.4704,-44.692 856.1914,-44.0612 853.959,-43.3946 851.7795,-42.6941 849.6594,-41.9615 847.6055,-41.1988 845.6252,-40.4082 843.726,-39.5918 841.9157,-38.7519 840.2024,-37.8907 838.5943,-37.0106 837.0998,-36.114 835.7272,-35.2035 834.4848,-34.2814 833.3809,-33.3503 832.4235,-32.4127 831.6203,-31.4713 830.9788,-30.5287 830.5061,-29.5873 830.2087,-28.6497 830.0925,-27.7186 830.1629,-26.7965 830.4244,-25.886 830.8811,-24.9894 831.5357,-24.1093 832.3906,-23.2481 833.4468,-22.4082 834.7046,-21.5918 836.1631,-20.8012 837.8205,-20.0385 839.6739,-19.3059 841.7193,-18.6054 843.9516,-17.9388 846.3648,-17.308 848.9516,-16.7147 851.7039,-16.1606 854.6125,-15.6472 857.6673,-15.1759 860.8572,-14.7479 864.1705,-14.3645 867.5945,-14.0266 871.1159,-13.7353 874.7209,-13.4913 878.3949,-13.2953 882.1231,-13.1479 885.8903,-13.0493 889.6809,-13 893.4793,-13 897.2699,-13.0493"/>
<text text-anchor="middle" x="891.5801" y="-26.8" font-family="Times,serif" font-size="14.00" fill="#000000">PrepareAbort</text>
</g>
<!-- EndTxnRequest_Abort&#45;&gt;PrepareAbort -->
<g id="edge8" class="edge">
<title>EndTxnRequest_Abort&#45;&gt;PrepareAbort</title>
<path fill="none" stroke="#000000" d="M778.5898,-31C792.4544,-31 806.9425,-31 820.74,-31"/>
<polygon fill="#000000" stroke="#000000" points="821.1348,-34.5001 831.1348,-31 821.1347,-27.5001 821.1348,-34.5001"/>
</g>
<!-- PrepareAbort&#45;&gt;recv_all_p_ack -->
<g id="edge15" class="edge">
<title>PrepareAbort&#45;&gt;recv_all_p_ack</title>
<path fill="none" stroke="#000000" d="M943.2447,-37.8831C956.9051,-39.703 972.1655,-41.7361 987.5907,-43.7912"/>
<polygon fill="#000000" stroke="#000000" points="987.3613,-47.2915 997.736,-45.1428 988.2858,-40.3528 987.3613,-47.2915"/>
</g>
<!-- prepareTransitionTo -->
<g id="node12" class="node">
<title>prepareTransitionTo</title>
<polygon fill="none" stroke="#000000" points="348.3781,-251 219.1776,-251 219.1776,-215 348.3781,-215 348.3781,-251"/>
<text text-anchor="middle" x="283.7778" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#000000">prepareTransitionTo</text>
</g>
<!-- pendingState -->
<g id="node13" class="node">
<title>pendingState</title>
<polygon fill="none" stroke="#000000" points="552.4146,-304 463.2211,-304 463.2211,-268 552.4146,-268 552.4146,-304"/>
<text text-anchor="middle" x="507.8179" y="-281.8" font-family="Times,serif" font-size="14.00" fill="#000000">pendingState</text>
</g>
<!-- prepareTransitionTo&#45;&gt;pendingState -->
<g id="edge17" class="edge">
<title>prepareTransitionTo&#45;&gt;pendingState</title>
<path fill="none" stroke="#000000" d="M348.5795,-248.3298C381.6976,-256.1644 421.5555,-265.5933 453.1097,-273.058"/>
<polygon fill="#000000" stroke="#000000" points="452.5065,-276.5118 463.0437,-275.408 454.118,-269.6998 452.5065,-276.5118"/>
</g>
<!-- newMetadata -->
<g id="node14" class="node">
<title>newMetadata</title>
<polygon fill="none" stroke="#000000" points="553.726,-250 461.9097,-250 461.9097,-214 553.726,-214 553.726,-250"/>
<text text-anchor="middle" x="507.8179" y="-227.8" font-family="Times,serif" font-size="14.00" fill="#000000">newMetadata</text>
</g>
<!-- prepareTransitionTo&#45;&gt;newMetadata -->
<g id="edge18" class="edge">
<title>prepareTransitionTo&#45;&gt;newMetadata</title>
<path fill="none" stroke="#000000" d="M348.5795,-232.7108C381.2059,-232.5651 420.3735,-232.3903 451.6988,-232.2505"/>
<polygon fill="#000000" stroke="#000000" points="452.0165,-235.7492 462.0008,-232.2045 451.9852,-228.7493 452.0165,-235.7492"/>
</g>
<!-- handle -->
<g id="node15" class="node">
<title>handle</title>
<polygon fill="none" stroke="#000000" points="0,-172.2 0,-221.8 142,-221.8 142,-172.2 0,-172.2"/>
<text text-anchor="middle" x="71" y="-206.6" font-family="Times,serif" font-size="14.00" fill="#000000">handle</text>
<polyline fill="none" stroke="#000000" points="0,-199.8 142,-199.8 "/>
<text text-anchor="middle" x="71" y="-184.6" font-family="Times,serif" font-size="14.00" fill="#000000">需要设置状态的函数</text>
</g>
<!-- handle&#45;&gt;prepareTransitionTo -->
<g id="edge19" class="edge">
<title>handle&#45;&gt;prepareTransitionTo</title>
<path fill="none" stroke="#000000" d="M142.1478,-209.0375C163.7298,-212.689 187.4931,-216.7095 209.2882,-220.3971"/>
<polygon fill="#000000" stroke="#000000" points="208.705,-223.8481 219.1488,-222.0654 209.8728,-216.9461 208.705,-223.8481"/>
</g>
<!-- appendTransactionToLog -->
<g id="node16" class="node">
<title>appendTransactionToLog</title>
<polygon fill="none" stroke="#000000" points="178,-127.4001 178,-196.5999 389.5557,-196.5999 389.5557,-127.4001 178,-127.4001"/>
<text text-anchor="middle" x="283.7778" y="-181.3999" font-family="Times,serif" font-size="14.00" fill="#000000">appendTransactionToLog</text>
<polyline fill="none" stroke="#000000" points="178,-174.5999 389.5557,-174.5999 "/>
<text text-anchor="start" x="186" y="-159.3999" font-family="Times,serif" font-size="14.00" fill="#000000">将事务日志写入topic中</text>
<text text-anchor="start" x="186" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 成功后回调updateCacheCallback</text>
</g>
<!-- handle&#45;&gt;appendTransactionToLog -->
<g id="edge20" class="edge">
<title>handle&#45;&gt;appendTransactionToLog</title>
<path fill="none" stroke="#000000" d="M142.1478,-185.2968C150.4867,-183.9252 159.1512,-182.4999 167.902,-181.0605"/>
<polygon fill="#000000" stroke="#000000" points="168.5066,-184.5082 177.8059,-179.4314 167.3704,-177.601 168.5066,-184.5082"/>
</g>
<!-- appendTransactionToLog&#45;&gt;newMetadata -->
<g id="edge21" class="edge">
<title>appendTransactionToLog&#45;&gt;newMetadata</title>
<path fill="none" stroke="#000000" d="M389.5652,-195.0527C411.2733,-201.8352 433.2944,-208.7156 452.3543,-214.6707"/>
<polygon fill="#000000" stroke="#000000" points="451.4453,-218.0535 462.0341,-217.6951 453.5329,-211.372 451.4453,-218.0535"/>
</g>
<!-- updateCacheCallback -->
<g id="node17" class="node">
<title>updateCacheCallback</title>
<polygon fill="none" stroke="#000000" points="425.5557,-126.4001 425.5557,-195.5999 590.0801,-195.5999 590.0801,-126.4001 425.5557,-126.4001"/>
<text text-anchor="middle" x="507.8179" y="-180.3999" font-family="Times,serif" font-size="14.00" fill="#000000">updateCacheCallback</text>
<polyline fill="none" stroke="#000000" points="425.5557,-173.5999 590.0801,-173.5999 "/>
<text text-anchor="start" x="433.5557" y="-158.3999" font-family="Times,serif" font-size="14.00" fill="#000000">在回调中内存中metadata</text>
<text text-anchor="start" x="433.5557" y="-138.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 设置为新的metadata </text>
</g>
<!-- appendTransactionToLog&#45;&gt;updateCacheCallback -->
<g id="edge22" class="edge">
<title>appendTransactionToLog&#45;&gt;updateCacheCallback</title>
<path fill="none" stroke="#000000" d="M389.5652,-161.5278C398.1033,-161.4897 406.6898,-161.4514 415.1255,-161.4137"/>
<polygon fill="#000000" stroke="#000000" points="415.3427,-164.9129 425.327,-161.3682 415.3114,-157.913 415.3427,-164.9129"/>
</g>
<!-- completeTransitionTo -->
<g id="node18" class="node">
<title>completeTransitionTo</title>
<polygon fill="none" stroke="#000000" points="775.0762,-179 636.1875,-179 636.1875,-143 775.0762,-143 775.0762,-179"/>
<text text-anchor="middle" x="705.6318" y="-156.8" font-family="Times,serif" font-size="14.00" fill="#000000">completeTransitionTo</text>
</g>
<!-- updateCacheCallback&#45;&gt;completeTransitionTo -->
<g id="edge23" class="edge">
<title>updateCacheCallback&#45;&gt;completeTransitionTo</title>
<path fill="none" stroke="#000000" d="M590.2764,-161C602.0834,-161 614.2122,-161 625.9641,-161"/>
<polygon fill="#000000" stroke="#000000" points="626.1769,-164.5001 636.1769,-161 626.1768,-157.5001 626.1769,-164.5001"/>
</g>
</g>
</svg>
