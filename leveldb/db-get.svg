<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: db_get Pages: 1 -->
<svg width="2532pt" height="1594pt"
 viewBox="0.00 0.00 2531.62 1594.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1590)">
<title>db_get</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1590 2527.6182,-1590 2527.6182,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_VersionSet</title>
<path fill="none" stroke="#000000" d="M211.2139,-1276C211.2139,-1276 660.6265,-1276 660.6265,-1276 666.6265,-1276 672.6265,-1282 672.6265,-1288 672.6265,-1288 672.6265,-1424 672.6265,-1424 672.6265,-1430 666.6265,-1436 660.6265,-1436 660.6265,-1436 211.2139,-1436 211.2139,-1436 205.2139,-1436 199.2139,-1430 199.2139,-1424 199.2139,-1424 199.2139,-1288 199.2139,-1288 199.2139,-1282 205.2139,-1276 211.2139,-1276"/>
<text text-anchor="middle" x="435.9202" y="-1416" font-family="Times,serif" font-size="20.00" fill="#000000">VersionSet</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_Table</title>
<path fill="none" stroke="#000000" d="M1517.3516,-341C1517.3516,-341 2503.6182,-341 2503.6182,-341 2509.6182,-341 2515.6182,-347 2515.6182,-353 2515.6182,-353 2515.6182,-878 2515.6182,-878 2515.6182,-884 2509.6182,-890 2503.6182,-890 2503.6182,-890 1517.3516,-890 1517.3516,-890 1511.3516,-890 1505.3516,-884 1505.3516,-878 1505.3516,-878 1505.3516,-353 1505.3516,-353 1505.3516,-347 1511.3516,-341 1517.3516,-341"/>
<text text-anchor="middle" x="2010.4849" y="-870" font-family="Times,serif" font-size="20.00" fill="#000000">Table</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_Footer</title>
<path fill="none" stroke="#000000" d="M2123.5571,-349C2123.5571,-349 2204.647,-349 2204.647,-349 2210.647,-349 2216.647,-355 2216.647,-361 2216.647,-361 2216.647,-431 2216.647,-431 2216.647,-437 2210.647,-443 2204.647,-443 2204.647,-443 2123.5571,-443 2123.5571,-443 2117.5571,-443 2111.5571,-437 2111.5571,-431 2111.5571,-431 2111.5571,-361 2111.5571,-361 2111.5571,-355 2117.5571,-349 2123.5571,-349"/>
<text text-anchor="middle" x="2164.1021" y="-423" font-family="Times,serif" font-size="20.00" fill="#000000">Footer</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_SkipList</title>
<path fill="none" stroke="#000000" d="M777.3506,-1276C777.3506,-1276 1388.104,-1276 1388.104,-1276 1394.104,-1276 1400.104,-1282 1400.104,-1288 1400.104,-1288 1400.104,-1452 1400.104,-1452 1400.104,-1458 1394.104,-1464 1388.104,-1464 1388.104,-1464 777.3506,-1464 777.3506,-1464 771.3506,-1464 765.3506,-1458 765.3506,-1452 765.3506,-1452 765.3506,-1288 765.3506,-1288 765.3506,-1282 771.3506,-1276 777.3506,-1276"/>
<text text-anchor="middle" x="1082.7273" y="-1444" font-family="Times,serif" font-size="20.00" fill="#000000">SkipList</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_MemTable</title>
<path fill="none" stroke="#000000" d="M247.188,-1106C247.188,-1106 883.7129,-1106 883.7129,-1106 889.7129,-1106 895.7129,-1112 895.7129,-1118 895.7129,-1118 895.7129,-1256 895.7129,-1256 895.7129,-1262 889.7129,-1268 883.7129,-1268 883.7129,-1268 247.188,-1268 247.188,-1268 241.188,-1268 235.188,-1262 235.188,-1256 235.188,-1256 235.188,-1118 235.188,-1118 235.188,-1112 241.188,-1106 247.188,-1106"/>
<text text-anchor="middle" x="565.4504" y="-1248" font-family="Times,serif" font-size="20.00" fill="#000000">MemTable</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_TableCache</title>
<path fill="none" stroke="#000000" d="M1201.5596,-8C1201.5596,-8 2054.8623,-8 2054.8623,-8 2060.8623,-8 2066.8623,-14 2066.8623,-20 2066.8623,-20 2066.8623,-321 2066.8623,-321 2066.8623,-327 2060.8623,-333 2054.8623,-333 2054.8623,-333 1201.5596,-333 1201.5596,-333 1195.5596,-333 1189.5596,-327 1189.5596,-321 1189.5596,-321 1189.5596,-20 1189.5596,-20 1189.5596,-14 1195.5596,-8 1201.5596,-8"/>
<text text-anchor="middle" x="1628.2109" y="-313" font-family="Times,serif" font-size="20.00" fill="#000000">TableCache</text>
</g>
<g id="clust15" class="cluster">
<title>cluster_Version</title>
<path fill="none" stroke="#000000" d="M212.9775,-898C212.9775,-898 2383.9663,-898 2383.9663,-898 2389.9663,-898 2395.9663,-904 2395.9663,-910 2395.9663,-910 2395.9663,-1086 2395.9663,-1086 2395.9663,-1092 2389.9663,-1098 2383.9663,-1098 2383.9663,-1098 212.9775,-1098 212.9775,-1098 206.9775,-1098 200.9775,-1092 200.9775,-1086 200.9775,-1086 200.9775,-910 200.9775,-910 200.9775,-904 206.9775,-898 212.9775,-898"/>
<text text-anchor="middle" x="1298.4719" y="-1078" font-family="Times,serif" font-size="20.00" fill="#000000">Version</text>
</g>
<g id="clust19" class="cluster">
<title>cluster_DBImpl</title>
<path fill="none" stroke="#000000" d="M20,-1444C20,-1444 427.8193,-1444 427.8193,-1444 433.8193,-1444 439.8193,-1450 439.8193,-1456 439.8193,-1456 439.8193,-1566 439.8193,-1566 439.8193,-1572 433.8193,-1578 427.8193,-1578 427.8193,-1578 20,-1578 20,-1578 14,-1578 8,-1572 8,-1566 8,-1566 8,-1456 8,-1456 8,-1450 14,-1444 20,-1444"/>
<text text-anchor="middle" x="223.9097" y="-1558" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<!-- VersionSet_LastSequence -->
<g id="node1" class="node">
<title>VersionSet_LastSequence</title>
<polygon fill="none" stroke="#000000" points="207.2139,-1352.4001 207.2139,-1399.5999 481.7969,-1399.5999 481.7969,-1352.4001 207.2139,-1352.4001"/>
<text text-anchor="start" x="215.2139" y="-1384.3999" font-family="Times,serif" font-size="14.00" fill="#000000">LastSequence 如果Options中没指定snapshot</text>
<text text-anchor="start" x="215.2139" y="-1364.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 就以version的LastSequnce为准</text>
</g>
<!-- last_sequence_ -->
<g id="node3" class="node">
<title>last_sequence_</title>
<polygon fill="none" stroke="#000000" points="664.4993,-1394 564.0085,-1394 564.0085,-1358 664.4993,-1358 664.4993,-1394"/>
<text text-anchor="middle" x="614.2539" y="-1371.8" font-family="Times,serif" font-size="14.00" fill="#000000">last_sequence_</text>
</g>
<!-- VersionSet_LastSequence&#45;&gt;last_sequence_ -->
<g id="edge1" class="edge">
<title>VersionSet_LastSequence&#45;&gt;last_sequence_</title>
<path fill="none" stroke="#000000" d="M482.1454,-1376C507.2605,-1376 532.2477,-1376 553.6215,-1376"/>
<polygon fill="#000000" stroke="#000000" points="553.8087,-1379.5001 563.8086,-1376 553.8086,-1372.5001 553.8087,-1379.5001"/>
</g>
<!-- VersionSet_current -->
<g id="node2" class="node">
<title>VersionSet_current</title>
<polygon fill="none" stroke="#000000" points="273.1226,-1284.2 273.1226,-1333.8 415.8882,-1333.8 415.8882,-1284.2 273.1226,-1284.2"/>
<text text-anchor="middle" x="344.5054" y="-1318.6" font-family="Times,serif" font-size="14.00" fill="#000000">VersionSet_current</text>
<polyline fill="none" stroke="#000000" points="273.1226,-1311.8 415.8882,-1311.8 "/>
<text text-anchor="middle" x="344.5054" y="-1296.6" font-family="Times,serif" font-size="14.00" fill="#000000">使用当前的versionset</text>
</g>
<!-- current_ -->
<g id="node4" class="node">
<title>current_</title>
<polygon fill="none" stroke="#000000" points="645.3965,-1327 583.1113,-1327 583.1113,-1291 645.3965,-1291 645.3965,-1327"/>
<text text-anchor="middle" x="614.2539" y="-1304.8" font-family="Times,serif" font-size="14.00" fill="#000000">current_</text>
</g>
<!-- VersionSet_current&#45;&gt;current_ -->
<g id="edge2" class="edge">
<title>VersionSet_current&#45;&gt;current_</title>
<path fill="none" stroke="#000000" d="M416.0848,-1309C466.1581,-1309 531.2843,-1309 572.9401,-1309"/>
<polygon fill="#000000" stroke="#000000" points="573.0015,-1312.5001 583.0014,-1309 573.0014,-1305.5001 573.0015,-1312.5001"/>
</g>
<!-- SkipList_Iterator_Seek -->
<g id="node5" class="node">
<title>SkipList_Iterator_Seek</title>
<polygon fill="none" stroke="#000000" points="773.3506,-1288 773.3506,-1324 920.7715,-1324 920.7715,-1288 773.3506,-1288"/>
<text text-anchor="middle" x="847.061" y="-1301.8" font-family="Times,serif" font-size="14.00" fill="#000000">SkipList::Iterator::Seek</text>
</g>
<!-- FindGreaterOrEqual -->
<g id="node6" class="node">
<title>FindGreaterOrEqual</title>
<polygon fill="none" stroke="#000000" points="1006.9507,-1307.2 1006.9507,-1356.8 1138.02,-1356.8 1138.02,-1307.2 1006.9507,-1307.2"/>
<text text-anchor="middle" x="1072.4854" y="-1341.6" font-family="Times,serif" font-size="14.00" fill="#000000">FindGreaterOrEqual</text>
<polyline fill="none" stroke="#000000" points="1006.9507,-1334.8 1138.02,-1334.8 "/>
<text text-anchor="middle" x="1072.4854" y="-1319.6" font-family="Times,serif" font-size="14.00" fill="#000000">在skiplist中查找</text>
</g>
<!-- SkipList_Iterator_Seek&#45;&gt;FindGreaterOrEqual -->
<g id="edge3" class="edge">
<title>SkipList_Iterator_Seek&#45;&gt;FindGreaterOrEqual</title>
<path fill="none" stroke="#000000" d="M920.8734,-1314.5134C945.2502,-1317.3249 972.394,-1320.4557 996.9014,-1323.2823"/>
<polygon fill="#000000" stroke="#000000" points="996.5316,-1326.7628 1006.8668,-1324.4317 997.3338,-1319.8089 996.5316,-1326.7628"/>
</g>
<!-- GetMaxHeight -->
<g id="node7" class="node">
<title>GetMaxHeight</title>
<polygon fill="none" stroke="#000000" points="1387.4351,-1320 1287.4761,-1320 1287.4761,-1284 1387.4351,-1284 1387.4351,-1320"/>
<text text-anchor="middle" x="1337.4556" y="-1297.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetMaxHeight</text>
</g>
<!-- FindGreaterOrEqual&#45;&gt;GetMaxHeight -->
<g id="edge4" class="edge">
<title>FindGreaterOrEqual&#45;&gt;GetMaxHeight</title>
<path fill="none" stroke="#000000" d="M1138.3241,-1324.5457C1180.9442,-1319.7203 1236.007,-1313.486 1277.4254,-1308.7966"/>
<polygon fill="#000000" stroke="#000000" points="1277.8349,-1312.2727 1287.3776,-1307.6698 1277.0473,-1305.3172 1277.8349,-1312.2727"/>
</g>
<!-- KeyIsAfterNode -->
<g id="node8" class="node">
<title>KeyIsAfterNode</title>
<polygon fill="none" stroke="#000000" points="1392.2528,-1374 1282.6583,-1374 1282.6583,-1338 1392.2528,-1338 1392.2528,-1374"/>
<text text-anchor="middle" x="1337.4556" y="-1351.8" font-family="Times,serif" font-size="14.00" fill="#000000">KeyIsAfterNode</text>
</g>
<!-- FindGreaterOrEqual&#45;&gt;KeyIsAfterNode -->
<g id="edge5" class="edge">
<title>FindGreaterOrEqual&#45;&gt;KeyIsAfterNode</title>
<path fill="none" stroke="#000000" d="M1138.3241,-1337.9634C1179.2999,-1341.6749 1231.7767,-1346.428 1272.572,-1350.1231"/>
<polygon fill="#000000" stroke="#000000" points="1272.4029,-1353.622 1282.6779,-1351.0384 1273.0344,-1346.6506 1272.4029,-1353.622"/>
</g>
<!-- Next -->
<g id="node9" class="node">
<title>Next</title>
<polygon fill="none" stroke="#000000" points="1364.4556,-1428 1310.4556,-1428 1310.4556,-1392 1364.4556,-1392 1364.4556,-1428"/>
<text text-anchor="middle" x="1337.4556" y="-1405.8" font-family="Times,serif" font-size="14.00" fill="#000000">Next</text>
</g>
<!-- FindGreaterOrEqual&#45;&gt;Next -->
<g id="edge6" class="edge">
<title>FindGreaterOrEqual&#45;&gt;Next</title>
<path fill="none" stroke="#000000" d="M1122.5238,-1356.8248C1142.9174,-1366.1372 1166.9731,-1376.1194 1189.5596,-1383 1226.4116,-1394.2264 1269.932,-1401.4827 1300.1813,-1405.6151"/>
<polygon fill="#000000" stroke="#000000" points="1299.9231,-1409.1112 1310.2947,-1406.9479 1300.8377,-1402.1712 1299.9231,-1409.1112"/>
</g>
<!-- MemTable_Get -->
<g id="node10" class="node">
<title>MemTable_Get</title>
<polygon fill="none" stroke="#000000" points="243.188,-1182.2 243.188,-1231.8 445.8228,-1231.8 445.8228,-1182.2 243.188,-1182.2"/>
<text text-anchor="middle" x="344.5054" y="-1216.6" font-family="Times,serif" font-size="14.00" fill="#000000">Get</text>
<polyline fill="none" stroke="#000000" points="243.188,-1209.8 445.8228,-1209.8 "/>
<text text-anchor="start" x="251.188" y="-1194.6" font-family="Times,serif" font-size="14.00" fill="#000000">在Memtalbe和immutable中查找</text>
</g>
<!-- memtable_key -->
<g id="node11" class="node">
<title>memtable_key</title>
<polygon fill="none" stroke="#000000" points="542.3037,-1114.2 542.3037,-1177.8 686.2041,-1177.8 686.2041,-1114.2 542.3037,-1114.2"/>
<text text-anchor="middle" x="614.2539" y="-1162.6" font-family="Times,serif" font-size="14.00" fill="#000000">memtable_key</text>
<polyline fill="none" stroke="#000000" points="542.3037,-1155.8 686.2041,-1155.8 "/>
<text text-anchor="start" x="550.3037" y="-1140.6" font-family="Times,serif" font-size="14.00" fill="#000000">将key设为slice</text>
<text text-anchor="start" x="550.3037" y="-1121" font-family="Times,serif" font-size="14.00" fill="#000000"> Slice(start, end &#45; start)</text>
</g>
<!-- MemTable_Get&#45;&gt;memtable_key -->
<g id="edge7" class="edge">
<title>MemTable_Get&#45;&gt;memtable_key</title>
<path fill="none" stroke="#000000" d="M446.1013,-1184.0254C474.5659,-1177.5886 505.1397,-1170.6747 532.3081,-1164.5309"/>
<polygon fill="#000000" stroke="#000000" points="533.1715,-1167.9242 542.1532,-1162.3046 531.6274,-1161.0966 533.1715,-1167.9242"/>
</g>
<!-- MemTableIterator_Seek -->
<g id="node12" class="node">
<title>MemTableIterator_Seek</title>
<polygon fill="none" stroke="#000000" points="690.1046,-1232 538.4032,-1232 538.4032,-1196 690.1046,-1196 690.1046,-1232"/>
<text text-anchor="middle" x="614.2539" y="-1209.8" font-family="Times,serif" font-size="14.00" fill="#000000">MemTableIterator_Seek</text>
</g>
<!-- MemTable_Get&#45;&gt;MemTableIterator_Seek -->
<g id="edge8" class="edge">
<title>MemTable_Get&#45;&gt;MemTableIterator_Seek</title>
<path fill="none" stroke="#000000" d="M446.1013,-1209.6364C472.9978,-1210.3344 501.7775,-1211.0812 527.7878,-1211.7562"/>
<polygon fill="#000000" stroke="#000000" points="527.9012,-1215.2602 537.9886,-1212.0209 528.0828,-1208.2626 527.9012,-1215.2602"/>
</g>
<!-- MemTableIterator_Seek&#45;&gt;SkipList_Iterator_Seek -->
<g id="edge9" class="edge">
<title>MemTableIterator_Seek&#45;&gt;SkipList_Iterator_Seek</title>
<path fill="none" stroke="#000000" d="M653.0084,-1232.0215C679.2227,-1243.9506 714.7592,-1259.6181 746.7109,-1272 757.8329,-1276.31 769.7588,-1280.6179 781.368,-1284.6484"/>
<polygon fill="#000000" stroke="#000000" points="780.4259,-1288.0254 791.0206,-1287.9627 782.6992,-1281.4048 780.4259,-1288.0254"/>
</g>
<!-- EncodeKey -->
<g id="node13" class="node">
<title>EncodeKey</title>
<polygon fill="none" stroke="#000000" points="887.8653,-1232 806.2568,-1232 806.2568,-1196 887.8653,-1196 887.8653,-1232"/>
<text text-anchor="middle" x="847.061" y="-1209.8" font-family="Times,serif" font-size="14.00" fill="#000000">EncodeKey</text>
</g>
<!-- MemTableIterator_Seek&#45;&gt;EncodeKey -->
<g id="edge10" class="edge">
<title>MemTableIterator_Seek&#45;&gt;EncodeKey</title>
<path fill="none" stroke="#000000" d="M690.1615,-1214C724.8529,-1214 765.0263,-1214 796.0374,-1214"/>
<polygon fill="#000000" stroke="#000000" points="796.1818,-1217.5001 806.1818,-1214 796.1817,-1210.5001 796.1818,-1217.5001"/>
</g>
<!-- footer_DecodeFrom -->
<g id="node14" class="node">
<title>footer_DecodeFrom</title>
<polygon fill="none" stroke="#000000" points="2119.5571,-357.2 2119.5571,-406.8 2208.647,-406.8 2208.647,-357.2 2119.5571,-357.2"/>
<text text-anchor="middle" x="2164.1021" y="-391.6" font-family="Times,serif" font-size="14.00" fill="#000000">DecodeFrom</text>
<polyline fill="none" stroke="#000000" points="2119.5571,-384.8 2208.647,-384.8 "/>
<text text-anchor="middle" x="2164.1021" y="-369.6" font-family="Times,serif" font-size="14.00" fill="#000000">解析Footer</text>
</g>
<!-- Table_Open -->
<g id="node15" class="node">
<title>Table_Open</title>
<polygon fill="none" stroke="#000000" points="1842.5215,-349.4001 1842.5215,-418.5999 2038.3271,-418.5999 2038.3271,-349.4001 1842.5215,-349.4001"/>
<text text-anchor="middle" x="1940.4243" y="-403.3999" font-family="Times,serif" font-size="14.00" fill="#000000">Table_Open</text>
<polyline fill="none" stroke="#000000" points="1842.5215,-396.5999 2038.3271,-396.5999 "/>
<text text-anchor="start" x="1850.5215" y="-381.3999" font-family="Times,serif" font-size="14.00" fill="#000000">将Table的索引, Filter Metadata</text>
<text text-anchor="start" x="1850.5215" y="-361.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 加载到内存中</text>
</g>
<!-- Table_Open&#45;&gt;footer_DecodeFrom -->
<g id="edge11" class="edge">
<title>Table_Open&#45;&gt;footer_DecodeFrom</title>
<path fill="none" stroke="#000000" d="M2038.5326,-383.1228C2062.7426,-382.9063 2087.8241,-382.682 2109.1463,-382.4914"/>
<polygon fill="#000000" stroke="#000000" points="2109.323,-385.99 2119.2913,-382.4007 2109.2603,-378.9903 2109.323,-385.99"/>
</g>
<!-- ReadBlock_index -->
<g id="node16" class="node">
<title>ReadBlock_index</title>
<polygon fill="none" stroke="#000000" points="2094.8623,-451.2 2094.8623,-500.8 2233.3418,-500.8 2233.3418,-451.2 2094.8623,-451.2"/>
<text text-anchor="middle" x="2164.1021" y="-485.6" font-family="Times,serif" font-size="14.00" fill="#000000">ReadBlock</text>
<polyline fill="none" stroke="#000000" points="2094.8623,-478.8 2233.3418,-478.8 "/>
<text text-anchor="middle" x="2164.1021" y="-463.6" font-family="Times,serif" font-size="14.00" fill="#000000">读取Index block内容</text>
</g>
<!-- Table_Open&#45;&gt;ReadBlock_index -->
<g id="edge12" class="edge">
<title>Table_Open&#45;&gt;ReadBlock_index</title>
<path fill="none" stroke="#000000" d="M2038.476,-415.2387C2048.2131,-419.1947 2057.8279,-423.4614 2066.8623,-428 2078.0961,-433.6436 2080.8739,-438.1235 2093.7437,-445.979"/>
<polygon fill="#000000" stroke="#000000" points="2092.2043,-449.1299 2102.6276,-451.0286 2095.6634,-443.0442 2092.2043,-449.1299"/>
</g>
<!-- file_Read -->
<g id="node17" class="node">
<title>file_Read</title>
<polygon fill="none" stroke="#000000" points="2198.7582,-555 2129.4459,-555 2129.4459,-519 2198.7582,-519 2198.7582,-555"/>
<text text-anchor="middle" x="2164.1021" y="-532.8" font-family="Times,serif" font-size="14.00" fill="#000000">file_Read</text>
</g>
<!-- Table_Open&#45;&gt;file_Read -->
<g id="edge13" class="edge">
<title>Table_Open&#45;&gt;file_Read</title>
<path fill="none" stroke="#000000" d="M2038.3606,-407.6109C2048.8529,-413.0582 2058.669,-419.7587 2066.8623,-428 2094.0137,-455.3105 2068.2197,-482.193 2094.8623,-510 2101.686,-517.1219 2110.6085,-522.398 2119.7679,-526.2956"/>
<polygon fill="#000000" stroke="#000000" points="2118.7285,-529.6438 2129.3207,-529.8779 2121.1864,-523.0895 2118.7285,-529.6438"/>
</g>
<!-- ReadMeta -->
<g id="node18" class="node">
<title>ReadMeta</title>
<polygon fill="none" stroke="#000000" points="2200.6348,-609 2127.5693,-609 2127.5693,-573 2200.6348,-573 2200.6348,-609"/>
<text text-anchor="middle" x="2164.1021" y="-586.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReadMeta</text>
</g>
<!-- Table_Open&#45;&gt;ReadMeta -->
<g id="edge14" class="edge">
<title>Table_Open&#45;&gt;ReadMeta</title>
<path fill="none" stroke="#000000" d="M2038.4697,-406.1391C2049.1431,-411.8355 2058.9744,-418.9969 2066.8623,-428 2107.5301,-474.4169 2055.0583,-516.8403 2094.8623,-564 2100.9126,-571.1684 2109.1109,-576.4429 2117.7491,-580.321"/>
<polygon fill="#000000" stroke="#000000" points="2116.6257,-583.6395 2127.2143,-584.0047 2119.1645,-577.1161 2116.6257,-583.6395"/>
</g>
<!-- ReadBlock -->
<g id="node19" class="node">
<title>ReadBlock</title>
<polygon fill="none" stroke="#000000" points="2507.722,-590 2429.3073,-590 2429.3073,-554 2507.722,-554 2507.722,-590"/>
<text text-anchor="middle" x="2468.5146" y="-567.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReadBlock</text>
</g>
<!-- ReadMeta&#45;&gt;ReadBlock -->
<g id="edge15" class="edge">
<title>ReadMeta&#45;&gt;ReadBlock</title>
<path fill="none" stroke="#000000" d="M2200.6789,-579.2038C2220.72,-573.3556 2246.1364,-566.9293 2269.3418,-564 2325.1763,-556.9518 2339.7736,-560.9111 2395.9663,-564 2403.4441,-564.411 2411.3359,-565.0587 2419.052,-565.8118"/>
<polygon fill="#000000" stroke="#000000" points="2418.7363,-569.2977 2429.0448,-566.8515 2419.4607,-562.3353 2418.7363,-569.2977"/>
</g>
<!-- ReadFilter -->
<g id="node20" class="node">
<title>ReadFilter</title>
<polygon fill="none" stroke="#000000" points="2368.9732,-609 2293.7797,-609 2293.7797,-573 2368.9732,-573 2368.9732,-609"/>
<text text-anchor="middle" x="2331.3765" y="-586.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReadFilter</text>
</g>
<!-- ReadMeta&#45;&gt;ReadFilter -->
<g id="edge16" class="edge">
<title>ReadMeta&#45;&gt;ReadFilter</title>
<path fill="none" stroke="#000000" d="M2200.8111,-591C2225.093,-591 2257.1774,-591 2283.4641,-591"/>
<polygon fill="#000000" stroke="#000000" points="2283.594,-594.5001 2293.594,-591 2283.594,-587.5001 2283.594,-594.5001"/>
</g>
<!-- Block_NewIterator -->
<g id="node21" class="node">
<title>Block_NewIterator</title>
<polygon fill="none" stroke="#000000" points="2393.4458,-663 2269.3071,-663 2269.3071,-627 2393.4458,-627 2393.4458,-663"/>
<text text-anchor="middle" x="2331.3765" y="-640.8" font-family="Times,serif" font-size="14.00" fill="#000000">Block_NewIterator</text>
</g>
<!-- ReadMeta&#45;&gt;Block_NewIterator -->
<g id="edge17" class="edge">
<title>ReadMeta&#45;&gt;Block_NewIterator</title>
<path fill="none" stroke="#000000" d="M2200.8111,-602.8505C2219.828,-608.9896 2243.6306,-616.6736 2265.6858,-623.7936"/>
<polygon fill="#000000" stroke="#000000" points="2264.7495,-627.1691 2275.3412,-626.9105 2266.9001,-620.5076 2264.7495,-627.1691"/>
</g>
<!-- ReadFilter&#45;&gt;ReadBlock -->
<g id="edge18" class="edge">
<title>ReadFilter&#45;&gt;ReadBlock</title>
<path fill="none" stroke="#000000" d="M2369.2131,-585.7579C2384.7077,-583.6112 2402.842,-581.0987 2419.3433,-578.8125"/>
<polygon fill="#000000" stroke="#000000" points="2419.9433,-582.2629 2429.3684,-577.4236 2418.9826,-575.3291 2419.9433,-582.2629"/>
</g>
<!-- IndexBlock_Iter_Seek -->
<g id="node22" class="node">
<title>IndexBlock_Iter_Seek</title>
<polygon fill="none" stroke="#000000" points="1824.9121,-804.2 1824.9121,-853.8 2055.9365,-853.8 2055.9365,-804.2 1824.9121,-804.2"/>
<text text-anchor="middle" x="1940.4243" y="-838.6" font-family="Times,serif" font-size="14.00" fill="#000000">IndexBlock_Iter_Seek</text>
<polyline fill="none" stroke="#000000" points="1824.9121,-831.8 2055.9365,-831.8 "/>
<text text-anchor="middle" x="1940.4243" y="-816.6" font-family="Times,serif" font-size="14.00" fill="#000000">从block index中找到包含key的block</text>
</g>
<!-- filter_KeyMayMatch -->
<g id="node23" class="node">
<title>filter_KeyMayMatch</title>
<polygon fill="none" stroke="#000000" points="1834.4517,-437.4001 1834.4517,-506.5999 2046.397,-506.5999 2046.397,-437.4001 1834.4517,-437.4001"/>
<text text-anchor="middle" x="1940.4243" y="-491.3999" font-family="Times,serif" font-size="14.00" fill="#000000">FilterBlockReader::KeyMayMatch</text>
<polyline fill="none" stroke="#000000" points="1834.4517,-484.5999 2046.397,-484.5999 "/>
<text text-anchor="start" x="1842.4517" y="-469.3999" font-family="Times,serif" font-size="14.00" fill="#000000">先用filter快速判断</text>
<text text-anchor="start" x="1842.4517" y="-449.8" font-family="Times,serif" font-size="14.00" fill="#000000"> key是否不存在</text>
</g>
<!-- BlockReader_block -->
<g id="node24" class="node">
<title>BlockReader_block</title>
<polygon fill="none" stroke="#000000" points="1854.269,-525.2 1854.269,-574.8 2026.5796,-574.8 2026.5796,-525.2 1854.269,-525.2"/>
<text text-anchor="middle" x="1940.4243" y="-559.6" font-family="Times,serif" font-size="14.00" fill="#000000">BlockReader</text>
<polyline fill="none" stroke="#000000" points="1854.269,-552.8 2026.5796,-552.8 "/>
<text text-anchor="middle" x="1940.4243" y="-537.6" font-family="Times,serif" font-size="14.00" fill="#000000">读取该Block返回BlockIter</text>
</g>
<!-- BlockIter_Seek -->
<g id="node25" class="node">
<title>BlockIter_Seek</title>
<polygon fill="none" stroke="#000000" points="1877.5967,-594.2 1877.5967,-643.8 2003.252,-643.8 2003.252,-594.2 1877.5967,-594.2"/>
<text text-anchor="middle" x="1940.4243" y="-628.6" font-family="Times,serif" font-size="14.00" fill="#000000">BlockIter::Seek</text>
<polyline fill="none" stroke="#000000" points="1877.5967,-621.8 2003.252,-621.8 "/>
<text text-anchor="start" x="1885.5967" y="-606.6" font-family="Times,serif" font-size="14.00" fill="#000000">在Block中查找key</text>
</g>
<!-- handle_result -->
<g id="node26" class="node">
<title>handle_result</title>
<polygon fill="none" stroke="#000000" points="1874.6743,-662.4001 1874.6743,-731.5999 2006.1743,-731.5999 2006.1743,-662.4001 1874.6743,-662.4001"/>
<text text-anchor="middle" x="1940.4243" y="-716.3999" font-family="Times,serif" font-size="14.00" fill="#000000">handle_result</text>
<polyline fill="none" stroke="#000000" points="1874.6743,-709.5999 2006.1743,-709.5999 "/>
<text text-anchor="start" x="1882.6743" y="-694.3999" font-family="Times,serif" font-size="14.00" fill="#000000">查找成功</text>
<text text-anchor="start" x="1882.6743" y="-674.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 调用参数中的回调</text>
</g>
<!-- SaveValue -->
<g id="node29" class="node">
<title>SaveValue</title>
<polygon fill="none" stroke="#000000" points="2201.6919,-942 2126.5122,-942 2126.5122,-906 2201.6919,-906 2201.6919,-942"/>
<text text-anchor="middle" x="2164.1021" y="-919.8" font-family="Times,serif" font-size="14.00" fill="#000000">SaveValue</text>
</g>
<!-- handle_result&#45;&gt;SaveValue -->
<g id="edge25" class="edge">
<title>handle_result&#45;&gt;SaveValue</title>
<path fill="none" stroke="#000000" d="M2006.2228,-706.1598C2028.4587,-712.4603 2051.5126,-723.0859 2066.8623,-741 2111.8421,-793.4946 2051.8544,-839.8781 2094.8623,-894 2100.6682,-901.3062 2108.6041,-906.8692 2117.0351,-911.0935"/>
<polygon fill="#000000" stroke="#000000" points="2115.7378,-914.3465 2126.3006,-915.1709 2118.5574,-907.9394 2115.7378,-914.3465"/>
</g>
<!-- Table_InternalGet -->
<g id="node27" class="node">
<title>Table_InternalGet</title>
<polygon fill="none" stroke="#000000" points="1513.3516,-574.6001 1513.3516,-663.3999 1785.9863,-663.3999 1785.9863,-574.6001 1513.3516,-574.6001"/>
<text text-anchor="middle" x="1649.6689" y="-648.1999" font-family="Times,serif" font-size="14.00" fill="#000000">InternalGet</text>
<polyline fill="none" stroke="#000000" points="1513.3516,-641.3999 1785.9863,-641.3999 "/>
<text text-anchor="start" x="1521.3516" y="-626.1999" font-family="Times,serif" font-size="14.00" fill="#000000">1.根据BlockIndex找到可能包含key的 block</text>
<text text-anchor="start" x="1521.3516" y="-606.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 2.根据filter做快速不存在判断</text>
<text text-anchor="start" x="1521.3516" y="-587" font-family="Times,serif" font-size="14.00" fill="#000000"> 3. 读取block内容, 在block中查找key</text>
</g>
<!-- Table_InternalGet&#45;&gt;IndexBlock_Iter_Seek -->
<g id="edge19" class="edge">
<title>Table_InternalGet&#45;&gt;IndexBlock_Iter_Seek</title>
<path fill="none" stroke="#000000" d="M1682.3881,-663.7155C1713.8975,-703.6907 1765.0598,-761.0495 1821.9863,-795 1824.7882,-796.671 1827.6766,-798.2636 1830.6312,-799.7812"/>
<polygon fill="#000000" stroke="#000000" points="1829.1427,-802.949 1839.6735,-804.1123 1832.1667,-796.6358 1829.1427,-802.949"/>
</g>
<!-- Table_InternalGet&#45;&gt;filter_KeyMayMatch -->
<g id="edge20" class="edge">
<title>Table_InternalGet&#45;&gt;filter_KeyMayMatch</title>
<path fill="none" stroke="#000000" d="M1717.6625,-574.4323C1748.74,-555.0967 1786.4757,-533.0323 1821.9863,-516 1825.7689,-514.1858 1829.6472,-512.397 1833.586,-510.6401"/>
<polygon fill="#000000" stroke="#000000" points="1835.096,-513.8001 1842.8696,-506.6013 1832.3035,-507.3812 1835.096,-513.8001"/>
</g>
<!-- Table_InternalGet&#45;&gt;BlockReader_block -->
<g id="edge21" class="edge">
<title>Table_InternalGet&#45;&gt;BlockReader_block</title>
<path fill="none" stroke="#000000" d="M1786.1075,-586.6214C1805.7431,-581.9616 1825.5969,-577.25 1844.229,-572.8284"/>
<polygon fill="#000000" stroke="#000000" points="1845.2265,-576.189 1854.1481,-570.4745 1843.6101,-569.3781 1845.2265,-576.189"/>
</g>
<!-- Table_InternalGet&#45;&gt;BlockIter_Seek -->
<g id="edge22" class="edge">
<title>Table_InternalGet&#45;&gt;BlockIter_Seek</title>
<path fill="none" stroke="#000000" d="M1786.1075,-619C1813.9935,-619 1842.3197,-619 1866.9613,-619"/>
<polygon fill="#000000" stroke="#000000" points="1867.2844,-622.5001 1877.2843,-619 1867.2843,-615.5001 1867.2844,-622.5001"/>
</g>
<!-- Table_InternalGet&#45;&gt;handle_result -->
<g id="edge23" class="edge">
<title>Table_InternalGet&#45;&gt;handle_result</title>
<path fill="none" stroke="#000000" d="M1786.1075,-655.6019C1813.2102,-662.8727 1840.7288,-670.255 1864.8763,-676.733"/>
<polygon fill="#000000" stroke="#000000" points="1864.0899,-680.1457 1874.6553,-679.3564 1865.9037,-673.3848 1864.0899,-680.1457"/>
</g>
<!-- IndexBlock_NewIterator -->
<g id="node28" class="node">
<title>IndexBlock_NewIterator</title>
<polygon fill="none" stroke="#000000" points="2018.3696,-786 1862.479,-786 1862.479,-750 2018.3696,-750 2018.3696,-786"/>
<text text-anchor="middle" x="1940.4243" y="-763.8" font-family="Times,serif" font-size="14.00" fill="#000000">IndexBlock_NewIterator</text>
</g>
<!-- Table_InternalGet&#45;&gt;IndexBlock_NewIterator -->
<g id="edge24" class="edge">
<title>Table_InternalGet&#45;&gt;IndexBlock_NewIterator</title>
<path fill="none" stroke="#000000" d="M1701.0675,-663.5495C1733.7121,-689.6875 1777.9762,-721.3408 1821.9863,-741 1831.6428,-745.3135 1842.061,-748.9732 1852.5718,-752.0696"/>
<polygon fill="#000000" stroke="#000000" points="1851.6592,-755.4486 1862.2315,-754.7575 1853.5358,-748.7048 1851.6592,-755.4486"/>
</g>
<!-- ParseInternalKey -->
<g id="node46" class="node">
<title>ParseInternalKey</title>
<polygon fill="none" stroke="#000000" points="2388.0563,-942 2274.6966,-942 2274.6966,-906 2388.0563,-906 2388.0563,-942"/>
<text text-anchor="middle" x="2331.3765" y="-919.8" font-family="Times,serif" font-size="14.00" fill="#000000">ParseInternalKey</text>
</g>
<!-- SaveValue&#45;&gt;ParseInternalKey -->
<g id="edge43" class="edge">
<title>SaveValue&#45;&gt;ParseInternalKey</title>
<path fill="none" stroke="#000000" d="M2202.0592,-924C2220.4491,-924 2243.0892,-924 2264.2588,-924"/>
<polygon fill="#000000" stroke="#000000" points="2264.508,-927.5001 2274.5079,-924 2264.5079,-920.5001 2264.508,-927.5001"/>
</g>
<!-- Saver_assign -->
<g id="node47" class="node">
<title>Saver_assign</title>
<polygon fill="none" stroke="#000000" points="2376.2525,-996 2286.5004,-996 2286.5004,-960 2376.2525,-960 2376.2525,-996"/>
<text text-anchor="middle" x="2331.3765" y="-973.8" font-family="Times,serif" font-size="14.00" fill="#000000">Saver_assign</text>
</g>
<!-- SaveValue&#45;&gt;Saver_assign -->
<g id="edge44" class="edge">
<title>SaveValue&#45;&gt;Saver_assign</title>
<path fill="none" stroke="#000000" d="M2202.0592,-936.2534C2224.1843,-943.3959 2252.4615,-952.5245 2276.9282,-960.4229"/>
<polygon fill="#000000" stroke="#000000" points="2275.8552,-963.7543 2286.4469,-963.4957 2278.0057,-957.0928 2275.8552,-963.7543"/>
</g>
<!-- TableCache_Get -->
<g id="node30" class="node">
<title>TableCache_Get</title>
<polygon fill="none" stroke="#000000" points="1197.5596,-207.6001 1197.5596,-296.3999 1477.3516,-296.3999 1477.3516,-207.6001 1197.5596,-207.6001"/>
<text text-anchor="middle" x="1337.4556" y="-281.1999" font-family="Times,serif" font-size="14.00" fill="#000000">Get</text>
<polyline fill="none" stroke="#000000" points="1197.5596,-274.3999 1477.3516,-274.3999 "/>
<text text-anchor="start" x="1205.5596" y="-259.1999" font-family="Times,serif" font-size="14.00" fill="#000000">1.先从cache中查找,如果失败FindTable</text>
<text text-anchor="start" x="1205.5596" y="-239.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 2.FindTable: 找到table, 加载index和metadata</text>
<text text-anchor="start" x="1205.5596" y="-220" font-family="Times,serif" font-size="14.00" fill="#000000"> 3.加入到Cache中</text>
</g>
<!-- TableCache_Get&#45;&gt;Table_InternalGet -->
<g id="edge26" class="edge">
<title>TableCache_Get&#45;&gt;Table_InternalGet</title>
<path fill="none" stroke="#000000" d="M1375.4269,-296.6345C1433.3635,-364.7377 1543.5815,-494.2966 1605.1828,-566.7075"/>
<polygon fill="#000000" stroke="#000000" points="1602.5724,-569.0406 1611.718,-574.3895 1607.9041,-564.5049 1602.5724,-569.0406"/>
</g>
<!-- FindTable -->
<g id="node33" class="node">
<title>FindTable</title>
<polygon fill="none" stroke="#000000" points="1685.7376,-229 1613.6003,-229 1613.6003,-193 1685.7376,-193 1685.7376,-229"/>
<text text-anchor="middle" x="1649.6689" y="-206.8" font-family="Times,serif" font-size="14.00" fill="#000000">FindTable</text>
</g>
<!-- TableCache_Get&#45;&gt;FindTable -->
<g id="edge27" class="edge">
<title>TableCache_Get&#45;&gt;FindTable</title>
<path fill="none" stroke="#000000" d="M1477.5802,-233.5988C1522.9755,-227.6374 1570.1926,-221.4369 1603.6592,-217.042"/>
<polygon fill="#000000" stroke="#000000" points="1604.1275,-220.5107 1613.5867,-215.7383 1603.2161,-213.5702 1604.1275,-220.5107"/>
</g>
<!-- cache_Release -->
<g id="node34" class="node">
<title>cache_Release</title>
<polygon fill="none" stroke="#000000" points="1699.0564,-283 1600.2815,-283 1600.2815,-247 1699.0564,-247 1699.0564,-283"/>
<text text-anchor="middle" x="1649.6689" y="-260.8" font-family="Times,serif" font-size="14.00" fill="#000000">cache_Release</text>
</g>
<!-- TableCache_Get&#45;&gt;cache_Release -->
<g id="edge28" class="edge">
<title>TableCache_Get&#45;&gt;cache_Release</title>
<path fill="none" stroke="#000000" d="M1477.5802,-257.8345C1517.2213,-259.4851 1558.2516,-261.1935 1590.3017,-262.5281"/>
<polygon fill="#000000" stroke="#000000" points="1590.2418,-266.0285 1600.3788,-262.9476 1590.5331,-259.0346 1590.2418,-266.0285"/>
</g>
<!-- TableFileName -->
<g id="node31" class="node">
<title>TableFileName</title>
<polygon fill="none" stroke="#000000" points="1821.9863,-16.2 1821.9863,-65.8 2058.8623,-65.8 2058.8623,-16.2 1821.9863,-16.2"/>
<text text-anchor="middle" x="1940.4243" y="-50.6" font-family="Times,serif" font-size="14.00" fill="#000000">TableFileName</text>
<polyline fill="none" stroke="#000000" points="1821.9863,-43.8 2058.8623,-43.8 "/>
<text text-anchor="middle" x="1940.4243" y="-28.6" font-family="Times,serif" font-size="14.00" fill="#000000">命名格式为: dbname/$file_number.ldb</text>
</g>
<!-- SSTTableFileName -->
<g id="node32" class="node">
<title>SSTTableFileName</title>
<polygon fill="none" stroke="#000000" points="1823.5381,-85.2 1823.5381,-134.8 2057.3105,-134.8 2057.3105,-85.2 1823.5381,-85.2"/>
<text text-anchor="middle" x="1940.4243" y="-119.6" font-family="Times,serif" font-size="14.00" fill="#000000">SSTTableFileName</text>
<polyline fill="none" stroke="#000000" points="1823.5381,-112.8 2057.3105,-112.8 "/>
<text text-anchor="middle" x="1940.4243" y="-97.6" font-family="Times,serif" font-size="14.00" fill="#000000">命名格式为: dbname/$file_number.sst</text>
</g>
<!-- FindTable&#45;&gt;Table_Open -->
<g id="edge29" class="edge">
<title>FindTable&#45;&gt;Table_Open</title>
<path fill="none" stroke="#000000" d="M1685.997,-208.9354C1716.1537,-209.1886 1758.4217,-214.3658 1785.9863,-238 1821.5291,-268.4748 1789.364,-303.4175 1821.9863,-337 1825.6496,-340.7711 1829.6534,-344.247 1833.903,-347.4502"/>
<polygon fill="#000000" stroke="#000000" points="1832.1345,-350.4822 1842.3534,-353.2796 1836.1094,-344.7202 1832.1345,-350.4822"/>
</g>
<!-- FindTable&#45;&gt;TableFileName -->
<g id="edge30" class="edge">
<title>FindTable&#45;&gt;TableFileName</title>
<path fill="none" stroke="#000000" d="M1668.1437,-192.5737C1698.0045,-163.7633 1759.8309,-108.0393 1821.9863,-76 1826.2298,-73.8126 1830.631,-71.741 1835.1305,-69.7815"/>
<polygon fill="#000000" stroke="#000000" points="1836.5799,-72.9697 1844.4851,-65.9158 1833.9064,-66.5003 1836.5799,-72.9697"/>
</g>
<!-- FindTable&#45;&gt;SSTTableFileName -->
<g id="edge31" class="edge">
<title>FindTable&#45;&gt;SSTTableFileName</title>
<path fill="none" stroke="#000000" d="M1685.955,-195.777C1720.5855,-181.515 1774.3857,-160.049 1821.9863,-144 1828.0393,-141.9592 1834.2915,-139.9319 1840.6141,-137.9428"/>
<polygon fill="#000000" stroke="#000000" points="1842.0732,-141.1549 1850.5892,-134.8519 1840.0013,-134.4685 1842.0732,-141.1549"/>
</g>
<!-- NewRandomAccessFile -->
<g id="node35" class="node">
<title>NewRandomAccessFile</title>
<polygon fill="none" stroke="#000000" points="2016.2283,-189 1864.6203,-189 1864.6203,-153 2016.2283,-153 2016.2283,-189"/>
<text text-anchor="middle" x="1940.4243" y="-166.8" font-family="Times,serif" font-size="14.00" fill="#000000">NewRandomAccessFile</text>
</g>
<!-- FindTable&#45;&gt;NewRandomAccessFile -->
<g id="edge32" class="edge">
<title>FindTable&#45;&gt;NewRandomAccessFile</title>
<path fill="none" stroke="#000000" d="M1685.9054,-206.0148C1727.9108,-200.2361 1798.5643,-190.5161 1854.7869,-182.7814"/>
<polygon fill="#000000" stroke="#000000" points="1855.3189,-186.2412 1864.7486,-181.4109 1854.3649,-179.3065 1855.3189,-186.2412"/>
</g>
<!-- cache_Insert -->
<g id="node36" class="node">
<title>cache_Insert</title>
<polygon fill="none" stroke="#000000" points="1983.6562,-243 1897.1925,-243 1897.1925,-207 1983.6562,-207 1983.6562,-243"/>
<text text-anchor="middle" x="1940.4243" y="-220.8" font-family="Times,serif" font-size="14.00" fill="#000000">cache_Insert</text>
</g>
<!-- FindTable&#45;&gt;cache_Insert -->
<g id="edge33" class="edge">
<title>FindTable&#45;&gt;cache_Insert</title>
<path fill="none" stroke="#000000" d="M1685.9054,-212.7448C1736.4555,-215.1788 1828.4943,-219.6105 1886.9431,-222.4249"/>
<polygon fill="#000000" stroke="#000000" points="1886.9348,-225.9284 1897.0916,-222.9135 1887.2716,-218.9365 1886.9348,-225.9284"/>
</g>
<!-- cache_Loopup -->
<g id="node37" class="node">
<title>cache_Loopup</title>
<polygon fill="none" stroke="#000000" points="1989.8324,-297 1891.0162,-297 1891.0162,-261 1989.8324,-261 1989.8324,-297"/>
<text text-anchor="middle" x="1940.4243" y="-274.8" font-family="Times,serif" font-size="14.00" fill="#000000">cache_Loopup</text>
</g>
<!-- FindTable&#45;&gt;cache_Loopup -->
<g id="edge34" class="edge">
<title>FindTable&#45;&gt;cache_Loopup</title>
<path fill="none" stroke="#000000" d="M1685.96,-216.4073C1713.667,-220.9623 1752.629,-228.2918 1785.9863,-238 1802.4697,-242.7973 1805.5732,-246.9675 1821.9863,-252 1840.9578,-257.8169 1861.983,-263.0053 1880.9894,-267.2413"/>
<polygon fill="#000000" stroke="#000000" points="1880.5013,-270.7171 1891.0178,-269.431 1881.9947,-263.8782 1880.5013,-270.7171"/>
</g>
<!-- FileMetaData -->
<g id="node38" class="node">
<title>FileMetaData</title>
<polygon fill="#95e1d3" stroke="#000000" points="1581.605,-907 1581.605,-1061 1717.7329,-1061 1717.7329,-907 1581.605,-907"/>
<text text-anchor="middle" x="1649.6689" y="-1045.8" font-family="Times,serif" font-size="14.00" fill="#000000">FileMetaData</text>
<polyline fill="none" stroke="#000000" points="1581.605,-1039 1717.7329,-1039 "/>
<text text-anchor="start" x="1589.605" y="-1023.8" font-family="Times,serif" font-size="14.00" fill="#000000">int refs;</text>
<polyline fill="none" stroke="#000000" points="1581.605,-1017 1717.7329,-1017 "/>
<text text-anchor="start" x="1589.605" y="-1001.8" font-family="Times,serif" font-size="14.00" fill="#000000">int allowed_seeks;</text>
<polyline fill="none" stroke="#000000" points="1581.605,-995 1717.7329,-995 "/>
<text text-anchor="start" x="1589.605" y="-979.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t number;</text>
<polyline fill="none" stroke="#000000" points="1581.605,-973 1717.7329,-973 "/>
<text text-anchor="start" x="1589.605" y="-957.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t file_size;</text>
<polyline fill="none" stroke="#000000" points="1581.605,-951 1717.7329,-951 "/>
<text text-anchor="start" x="1589.605" y="-935.8" font-family="Times,serif" font-size="14.00" fill="#000000">InternalKey smallest;</text>
<polyline fill="none" stroke="#000000" points="1581.605,-929 1717.7329,-929 "/>
<text text-anchor="start" x="1589.605" y="-913.8" font-family="Times,serif" font-size="14.00" fill="#000000">InternalKey largest;</text>
</g>
<!-- files_ -->
<g id="node39" class="node">
<title>files_</title>
<polygon fill="#95e1d3" stroke="#000000" points="983.4111,-975 983.4111,-1033 1161.5596,-1033 1161.5596,-975 983.4111,-975"/>
<text text-anchor="middle" x="1072.4854" y="-1017.8" font-family="Times,serif" font-size="14.00" fill="#000000">files_</text>
<polyline fill="none" stroke="#000000" points="983.4111,-1011 1161.5596,-1011 "/>
<text text-anchor="start" x="991.4111" y="-995.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::Vector&lt;FileMetaData*&gt;</text>
<text text-anchor="middle" x="1072.4854" y="-981.8" font-family="Times,serif" font-size="14.00" fill="#000000"> files_[config::kNumLevels];</text>
</g>
<!-- levels -->
<g id="node40" class="node">
<title>levels</title>
<polygon fill="none" stroke="#000000" points="1220.0225,-950 1220.0225,-1038 1454.8887,-1038 1454.8887,-950 1220.0225,-950"/>
<text text-anchor="middle" x="1337.4556" y="-1022.8" font-family="Times,serif" font-size="14.00" fill="#000000">levels</text>
<polyline fill="none" stroke="#000000" points="1220.0225,-1016 1454.8887,-1016 "/>
<text text-anchor="start" x="1228.0225" y="-1000.8" font-family="Times,serif" font-size="14.00" fill="#000000">level0: [FileMetaData .. FileMetaData]</text>
<polyline fill="none" stroke="#000000" points="1220.0225,-994 1454.8887,-994 "/>
<text text-anchor="start" x="1228.0225" y="-978.8" font-family="Times,serif" font-size="14.00" fill="#000000">level1: [FileMetaData .. FileMetaData]</text>
<polyline fill="none" stroke="#000000" points="1220.0225,-972 1454.8887,-972 "/>
<text text-anchor="start" x="1228.0225" y="-956.8" font-family="Times,serif" font-size="14.00" fill="#000000">... levelN</text>
</g>
<!-- files_&#45;&gt;levels -->
<g id="edge35" class="edge">
<title>files_&#45;&gt;levels</title>
<path fill="none" stroke="#000000" d="M1161.8228,-1000.6284C1177.2507,-1000.0461 1193.555,-999.4308 1209.7634,-998.8191"/>
<polygon fill="#000000" stroke="#000000" points="1209.9736,-1002.3138 1219.8344,-998.439 1209.7095,-995.3188 1209.9736,-1002.3138"/>
</g>
<!-- levels&#45;&gt;FileMetaData -->
<g id="edge36" class="edge">
<title>levels&#45;&gt;FileMetaData</title>
<path fill="none" stroke="#000000" d="M1455.0452,-990.2337C1493.905,-988.989 1536.1614,-987.6356 1571.3398,-986.5088"/>
<polygon fill="#000000" stroke="#000000" points="1571.6577,-990.0005 1581.5405,-986.1821 1571.4335,-983.0041 1571.6577,-990.0005"/>
</g>
<!-- FindFile -->
<g id="node41" class="node">
<title>FindFile</title>
<polygon fill="none" stroke="#000000" points="746.7109,-906.6001 746.7109,-995.3999 947.4111,-995.3999 947.4111,-906.6001 746.7109,-906.6001"/>
<text text-anchor="middle" x="847.061" y="-980.1999" font-family="Times,serif" font-size="14.00" fill="#000000">FindFile</text>
<polyline fill="none" stroke="#000000" points="746.7109,-973.3999 947.4111,-973.3999 "/>
<text text-anchor="start" x="754.7109" y="-958.1999" font-family="Times,serif" font-size="14.00" fill="#000000">使用二分查找法</text>
<text text-anchor="start" x="754.7109" y="-938.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 查找files_中除了level_0</text>
<text text-anchor="start" x="754.7109" y="-919" font-family="Times,serif" font-size="14.00" fill="#000000"> 其他level的可能包含key的File</text>
</g>
<!-- FindFile&#45;&gt;files_ -->
<g id="edge40" class="edge">
<title>FindFile&#45;&gt;files_</title>
<path fill="none" stroke="#000000" d="M947.5766,-974.6324C956.0998,-976.6363 964.717,-978.6624 973.2304,-980.6639"/>
<polygon fill="#000000" stroke="#000000" points="972.629,-984.1179 983.1647,-982.9996 974.2312,-977.3037 972.629,-984.1179"/>
</g>
<!-- State_Match -->
<g id="node45" class="node">
<title>State_Match</title>
<polygon fill="none" stroke="#000000" points="991.3784,-906.2 991.3784,-955.8 1153.5923,-955.8 1153.5923,-906.2 991.3784,-906.2"/>
<text text-anchor="middle" x="1072.4854" y="-940.6" font-family="Times,serif" font-size="14.00" fill="#000000">Get::Match</text>
<polyline fill="none" stroke="#000000" points="991.3784,-933.8 1153.5923,-933.8 "/>
<text text-anchor="middle" x="1072.4854" y="-918.6" font-family="Times,serif" font-size="14.00" fill="#000000">找到包含key文件后回调</text>
</g>
<!-- FindFile&#45;&gt;State_Match -->
<g id="edge41" class="edge">
<title>FindFile&#45;&gt;State_Match</title>
<path fill="none" stroke="#000000" d="M947.5766,-942.0821C958.7231,-941.0932 970.0306,-940.09 981.0561,-939.1118"/>
<polygon fill="#000000" stroke="#000000" points="981.438,-942.5917 991.0896,-938.2216 980.8193,-935.6191 981.438,-942.5917"/>
</g>
<!-- ForEachOverlapping -->
<g id="node42" class="node">
<title>ForEachOverlapping</title>
<polygon fill="none" stroke="#000000" points="517.7969,-934.0002 517.7969,-1061.9998 710.7109,-1061.9998 710.7109,-934.0002 517.7969,-934.0002"/>
<text text-anchor="middle" x="614.2539" y="-1046.7998" font-family="Times,serif" font-size="14.00" fill="#000000">ForEachOverlapping</text>
<polyline fill="none" stroke="#000000" points="517.7969,-1039.9998 710.7109,-1039.9998 "/>
<text text-anchor="start" x="525.7969" y="-1024.7998" font-family="Times,serif" font-size="14.00" fill="#000000">查遍历查找每个level_0</text>
<text text-anchor="start" x="525.7969" y="-1005.1999" font-family="Times,serif" font-size="14.00" fill="#000000"> 中的是否包含key</text>
<text text-anchor="start" x="525.7969" y="-985.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 因为level0中每个table之间的</text>
<text text-anchor="start" x="525.7969" y="-966" font-family="Times,serif" font-size="14.00" fill="#000000"> key范围是有覆盖的</text>
<text text-anchor="start" x="525.7969" y="-946.4001" font-family="Times,serif" font-size="14.00" fill="#000000"> 然后搜索其他level的table</text>
</g>
<!-- ForEachOverlapping&#45;&gt;files_ -->
<g id="edge38" class="edge">
<title>ForEachOverlapping&#45;&gt;files_</title>
<path fill="none" stroke="#000000" d="M710.8082,-1003.6969C722.8927,-1004.2348 735.0858,-1004.693 746.7109,-1005 835.8799,-1007.3545 858.2118,-1005.3566 947.4111,-1005 955.7611,-1004.9666 964.4247,-1004.9207 973.1191,-1004.8668"/>
<polygon fill="#000000" stroke="#000000" points="973.346,-1008.3655 983.3229,-1004.8001 973.3002,-1001.3656 973.346,-1008.3655"/>
</g>
<!-- ForEachOverlapping&#45;&gt;FindFile -->
<g id="edge39" class="edge">
<title>ForEachOverlapping&#45;&gt;FindFile</title>
<path fill="none" stroke="#000000" d="M710.9626,-978.4761C719.4031,-976.7721 727.9858,-975.0394 736.5264,-973.3152"/>
<polygon fill="#000000" stroke="#000000" points="737.4122,-976.707 746.5218,-971.2973 736.0269,-969.8455 737.4122,-976.707"/>
</g>
<!-- Version_Get -->
<g id="node43" class="node">
<title>Version_Get</title>
<polygon fill="none" stroke="#000000" points="208.9775,-972.6001 208.9775,-1061.3999 480.0332,-1061.3999 480.0332,-972.6001 208.9775,-972.6001"/>
<text text-anchor="start" x="216.9775" y="-1046.1999" font-family="Times,serif" font-size="14.00" fill="#000000">Get</text>
<polyline fill="none" stroke="#000000" points="208.9775,-1039.3999 480.0332,-1039.3999 "/>
<text text-anchor="start" x="216.9775" y="-1024.1999" font-family="Times,serif" font-size="14.00" fill="#000000">从数据库文件中查找</text>
<text text-anchor="start" x="216.9775" y="-1004.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 使用了LRU cache，bloom filter blockIndex</text>
<text text-anchor="start" x="216.9775" y="-985" font-family="Times,serif" font-size="14.00" fill="#000000"> 等优化方法</text>
</g>
<!-- Version_Get&#45;&gt;ForEachOverlapping -->
<g id="edge37" class="edge">
<title>Version_Get&#45;&gt;ForEachOverlapping</title>
<path fill="none" stroke="#000000" d="M480.1699,-1007.4443C489.3209,-1006.7998 498.467,-1006.1556 507.4398,-1005.5236"/>
<polygon fill="#000000" stroke="#000000" points="507.7583,-1009.0099 517.4876,-1004.8158 507.2664,-1002.0272 507.7583,-1009.0099"/>
</g>
<!-- Version_UpdateStats -->
<g id="node44" class="node">
<title>Version_UpdateStats</title>
<polygon fill="none" stroke="#000000" points="277.7915,-910 277.7915,-954 411.2192,-954 411.2192,-910 277.7915,-910"/>
<text text-anchor="middle" x="344.5054" y="-938.8" font-family="Times,serif" font-size="14.00" fill="#000000">Version_UpdateStats</text>
<polyline fill="none" stroke="#000000" points="277.7915,-932 411.2192,-932 "/>
<text text-anchor="middle" x="344.5054" y="-916.8" font-family="Times,serif" font-size="14.00" fill="#000000">UpdateStats</text>
</g>
<!-- State_Match&#45;&gt;TableCache_Get -->
<g id="edge42" class="edge">
<title>State_Match&#45;&gt;TableCache_Get</title>
<path fill="none" stroke="#000000" d="M1082.23,-906.0288C1120.6621,-807.5447 1262.2597,-444.6933 1316.3037,-306.2028"/>
<polygon fill="#000000" stroke="#000000" points="1319.666,-307.2141 1320.0409,-296.6259 1313.145,-304.6693 1319.666,-307.2141"/>
</g>
<!-- Get -->
<g id="node48" class="node">
<title>Get</title>
<polygon fill="none" stroke="#000000" points="16,-1452.6001 16,-1541.3999 171.2139,-1541.3999 171.2139,-1452.6001 16,-1452.6001"/>
<text text-anchor="middle" x="93.6069" y="-1526.1999" font-family="Times,serif" font-size="14.00" fill="#000000">Get</text>
<polyline fill="none" stroke="#000000" points="16,-1519.3999 171.2139,-1519.3999 "/>
<text text-anchor="start" x="24" y="-1504.1999" font-family="Times,serif" font-size="14.00" fill="#000000">1.先从mem_中查找</text>
<text text-anchor="start" x="24" y="-1484.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 2.然后从imm_中查找</text>
<text text-anchor="start" x="24" y="-1465" font-family="Times,serif" font-size="14.00" fill="#000000"> 3.从当前version中查找</text>
</g>
<!-- Get&#45;&gt;VersionSet_LastSequence -->
<g id="edge45" class="edge">
<title>Get&#45;&gt;VersionSet_LastSequence</title>
<path fill="none" stroke="#000000" d="M171.3881,-1454.1135C180.7086,-1449.2435 190.1368,-1444.44 199.2139,-1440 224.7913,-1427.489 253.3847,-1414.6537 278.3952,-1403.793"/>
<polygon fill="#000000" stroke="#000000" points="280.0007,-1406.9121 287.7915,-1399.732 277.2236,-1400.4865 280.0007,-1406.9121"/>
</g>
<!-- Get&#45;&gt;VersionSet_current -->
<g id="edge46" class="edge">
<title>Get&#45;&gt;VersionSet_current</title>
<path fill="none" stroke="#000000" d="M112.9887,-1452.3605C130.5001,-1417.3223 159.6086,-1370.0828 199.2139,-1343 217.9433,-1330.1925 240.8639,-1322.1688 262.9154,-1317.1548"/>
<polygon fill="#000000" stroke="#000000" points="263.894,-1320.526 272.9678,-1315.0565 262.4636,-1313.6737 263.894,-1320.526"/>
</g>
<!-- Get&#45;&gt;MemTable_Get -->
<g id="edge47" class="edge">
<title>Get&#45;&gt;MemTable_Get</title>
<path fill="none" stroke="#000000" d="M104.5083,-1452.1848C118.6973,-1402.3753 147.951,-1322.3398 199.2139,-1272 214.3624,-1257.1242 233.5052,-1245.3227 252.8802,-1236.0901"/>
<polygon fill="#000000" stroke="#000000" points="254.4392,-1239.2261 262.088,-1231.8949 251.5369,-1232.8561 254.4392,-1239.2261"/>
</g>
<!-- Get&#45;&gt;Version_Get -->
<g id="edge48" class="edge">
<title>Get&#45;&gt;Version_Get</title>
<path fill="none" stroke="#000000" d="M101.0948,-1452.5891C117.1366,-1361.5409 156.8238,-1157.6051 199.2139,-1102 209.1909,-1088.9126 221.8089,-1077.47 235.4232,-1067.5818"/>
<polygon fill="#000000" stroke="#000000" points="237.7905,-1070.1995 244.014,-1061.6251 233.8019,-1064.447 237.7905,-1070.1995"/>
</g>
<!-- Get&#45;&gt;Version_UpdateStats -->
<g id="edge49" class="edge">
<title>Get&#45;&gt;Version_UpdateStats</title>
<path fill="none" stroke="#000000" d="M96.2728,-1452.2026C104.0818,-1336.6006 130.8188,-1032.4264 199.2139,-963 217.0318,-944.9134 242.6293,-936.1527 267.389,-932.22"/>
<polygon fill="#000000" stroke="#000000" points="268.1064,-935.6552 277.5528,-930.8576 267.1764,-928.7172 268.1064,-935.6552"/>
</g>
<!-- sequence_number -->
<g id="node49" class="node">
<title>sequence_number</title>
<polygon fill="none" stroke="#000000" points="403.0747,-1488 285.936,-1488 285.936,-1452 403.0747,-1452 403.0747,-1488"/>
<text text-anchor="middle" x="344.5054" y="-1465.8" font-family="Times,serif" font-size="14.00" fill="#000000">sequence_number</text>
</g>
<!-- Get&#45;&gt;sequence_number -->
<g id="edge50" class="edge">
<title>Get&#45;&gt;sequence_number</title>
<path fill="none" stroke="#000000" d="M171.2745,-1488.6419C204.6496,-1485.0503 243.3294,-1480.8879 275.6618,-1477.4085"/>
<polygon fill="#000000" stroke="#000000" points="276.3534,-1480.8544 285.9215,-1476.3044 275.6044,-1473.8945 276.3534,-1480.8544"/>
</g>
<!-- MaybeScheduleCompaction -->
<g id="node50" class="node">
<title>MaybeScheduleCompaction</title>
<polygon fill="none" stroke="#000000" points="431.6337,-1542 257.377,-1542 257.377,-1506 431.6337,-1506 431.6337,-1542"/>
<text text-anchor="middle" x="344.5054" y="-1519.8" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeScheduleCompaction</text>
</g>
<!-- Get&#45;&gt;MaybeScheduleCompaction -->
<g id="edge51" class="edge">
<title>Get&#45;&gt;MaybeScheduleCompaction</title>
<path fill="none" stroke="#000000" d="M171.2745,-1505.3581C195.1813,-1507.9308 221.81,-1510.7963 246.8779,-1513.494"/>
<polygon fill="#000000" stroke="#000000" points="246.8221,-1517.0081 257.1392,-1514.5982 247.5711,-1510.0483 246.8221,-1517.0081"/>
</g>
</g>
</svg>
