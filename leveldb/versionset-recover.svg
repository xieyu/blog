<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: versionset_recover Pages: 1 -->
<svg width="2204pt" height="811pt"
 viewBox="0.00 0.00 2204.35 811.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 807)">
<title>versionset_recover</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-807 2200.3545,-807 2200.3545,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_Log</title>
<path fill="none" stroke="#000000" d="M1092.6152,-8C1092.6152,-8 1263.1465,-8 1263.1465,-8 1269.1465,-8 1275.1465,-14 1275.1465,-20 1275.1465,-20 1275.1465,-130 1275.1465,-130 1275.1465,-136 1269.1465,-142 1263.1465,-142 1263.1465,-142 1092.6152,-142 1092.6152,-142 1086.6152,-142 1080.6152,-136 1080.6152,-130 1080.6152,-130 1080.6152,-20 1080.6152,-20 1080.6152,-14 1086.6152,-8 1092.6152,-8"/>
<text text-anchor="middle" x="1177.8809" y="-122" font-family="Times,serif" font-size="20.00" fill="#000000">Log</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_VersionSet</title>
<path fill="none" stroke="#000000" d="M541.7578,-150C541.7578,-150 2176.3545,-150 2176.3545,-150 2182.3545,-150 2188.3545,-156 2188.3545,-162 2188.3545,-162 2188.3545,-575 2188.3545,-575 2188.3545,-581 2182.3545,-587 2176.3545,-587 2176.3545,-587 541.7578,-587 541.7578,-587 535.7578,-587 529.7578,-581 529.7578,-575 529.7578,-575 529.7578,-162 529.7578,-162 529.7578,-156 535.7578,-150 541.7578,-150"/>
<text text-anchor="middle" x="1359.0562" y="-567" font-family="Times,serif" font-size="20.00" fill="#000000">VersionSet</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_Version</title>
<path fill="none" stroke="#000000" d="M20,-595C20,-595 633.1426,-595 633.1426,-595 639.1426,-595 645.1426,-601 645.1426,-607 645.1426,-607 645.1426,-783 645.1426,-783 645.1426,-789 639.1426,-795 633.1426,-795 633.1426,-795 20,-795 20,-795 14,-795 8,-789 8,-783 8,-783 8,-607 8,-607 8,-601 14,-595 20,-595"/>
<text text-anchor="middle" x="326.5713" y="-775" font-family="Times,serif" font-size="20.00" fill="#000000">Version</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_DBImpl</title>
<path fill="none" stroke="#000000" d="M82.0742,-339C82.0742,-339 459.48,-339 459.48,-339 465.48,-339 471.48,-345 471.48,-351 471.48,-351 471.48,-481 471.48,-481 471.48,-487 465.48,-493 459.48,-493 459.48,-493 82.0742,-493 82.0742,-493 76.0742,-493 70.0742,-487 70.0742,-481 70.0742,-481 70.0742,-351 70.0742,-351 70.0742,-345 76.0742,-339 82.0742,-339"/>
<text text-anchor="middle" x="270.7771" y="-473" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<!-- ReadRecord -->
<g id="node1" class="node">
<title>ReadRecord</title>
<polygon fill="none" stroke="#000000" points="1088.6152,-16.6001 1088.6152,-105.3999 1267.1465,-105.3999 1267.1465,-16.6001 1088.6152,-16.6001"/>
<text text-anchor="middle" x="1177.8809" y="-90.1999" font-family="Times,serif" font-size="14.00" fill="#000000">ReadRecord</text>
<polyline fill="none" stroke="#000000" points="1088.6152,-83.3999 1267.1465,-83.3999 "/>
<text text-anchor="start" x="1096.6152" y="-68.1999" font-family="Times,serif" font-size="14.00" fill="#000000">循环读取VersionEditRecord</text>
<text text-anchor="start" x="1096.6152" y="-48.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 然后用builder Apply</text>
<text text-anchor="start" x="1096.6152" y="-29" font-family="Times,serif" font-size="14.00" fill="#000000"> 更新version</text>
</g>
<!-- VersionEditRecord -->
<g id="node3" class="node">
<title>VersionEditRecord</title>
<polygon fill="none" stroke="#000000" points="1303.1465,-159 1303.1465,-467 1476.6055,-467 1476.6055,-159 1303.1465,-159"/>
<text text-anchor="middle" x="1389.876" y="-451.8" font-family="Times,serif" font-size="14.00" fill="#000000">VersionEditRecord</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-445 1476.6055,-445 "/>
<text text-anchor="start" x="1311.1465" y="-429.8" font-family="Times,serif" font-size="14.00" fill="#000000">kComparator varInt32</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-423 1476.6055,-423 "/>
<text text-anchor="start" x="1311.1465" y="-407.8" font-family="Times,serif" font-size="14.00" fill="#000000">comparator_</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-401 1476.6055,-401 "/>
<text text-anchor="start" x="1311.1465" y="-385.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt32 kLogNumber</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-379 1476.6055,-379 "/>
<text text-anchor="start" x="1311.1465" y="-363.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt64 log_number_</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-357 1476.6055,-357 "/>
<text text-anchor="start" x="1311.1465" y="-341.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt32 kPrevLogNumber</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-335 1476.6055,-335 "/>
<text text-anchor="start" x="1311.1465" y="-319.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt64 prev_log_number_</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-313 1476.6055,-313 "/>
<text text-anchor="start" x="1311.1465" y="-297.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt32 kNextFileNumber </text>
<polyline fill="none" stroke="#000000" points="1303.1465,-291 1476.6055,-291 "/>
<text text-anchor="start" x="1311.1465" y="-275.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt64 next_file_number_</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-269 1476.6055,-269 "/>
<text text-anchor="start" x="1311.1465" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt32 kLastSequence</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-247 1476.6055,-247 "/>
<text text-anchor="start" x="1311.1465" y="-231.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt64 last_sequence_</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-225 1476.6055,-225 "/>
<text text-anchor="start" x="1311.1465" y="-209.8" font-family="Times,serif" font-size="14.00" fill="#000000">compact_pointers_</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-203 1476.6055,-203 "/>
<text text-anchor="start" x="1311.1465" y="-187.8" font-family="Times,serif" font-size="14.00" fill="#000000">deleted_files_</text>
<polyline fill="none" stroke="#000000" points="1303.1465,-181 1476.6055,-181 "/>
<text text-anchor="start" x="1311.1465" y="-165.8" font-family="Times,serif" font-size="14.00" fill="#000000">new_files_</text>
</g>
<!-- ReadRecord&#45;&gt;VersionEditRecord -->
<g id="edge3" class="edge">
<title>ReadRecord&#45;&gt;VersionEditRecord</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1233.6418,-105.4945C1247.8452,-117.9397 1262.6226,-131.9284 1275.1465,-146 1282.472,-154.2308 1289.7225,-162.9476 1296.8067,-171.9084"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="1294.0797,-174.1031 1302.9872,-179.8397 1299.6013,-169.8004 1294.0797,-174.1031"/>
</g>
<!-- ReadFileToString -->
<g id="node2" class="node">
<title>ReadFileToString</title>
<polygon fill="none" stroke="#000000" points="673.1426,-273.4001 673.1426,-342.5999 838.8496,-342.5999 838.8496,-273.4001 673.1426,-273.4001"/>
<text text-anchor="middle" x="755.9961" y="-327.3999" font-family="Times,serif" font-size="14.00" fill="#000000">ReadFileToString</text>
<polyline fill="none" stroke="#000000" points="673.1426,-320.5999 838.8496,-320.5999 "/>
<text text-anchor="start" x="681.1426" y="-305.3999" font-family="Times,serif" font-size="14.00" fill="#000000">读取current文件</text>
<text text-anchor="start" x="681.1426" y="-285.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 获得当前manifest文件名</text>
</g>
<!-- NewSequentialFile -->
<g id="node6" class="node">
<title>NewSequentialFile</title>
<polygon fill="none" stroke="#000000" points="874.8496,-276.2 874.8496,-339.8 1052.6152,-339.8 1052.6152,-276.2 874.8496,-276.2"/>
<text text-anchor="middle" x="963.7324" y="-324.6" font-family="Times,serif" font-size="14.00" fill="#000000">NewSequentialFile</text>
<polyline fill="none" stroke="#000000" points="874.8496,-317.8 1052.6152,-317.8 "/>
<text text-anchor="start" x="882.8496" y="-302.6" font-family="Times,serif" font-size="14.00" fill="#000000">打开Manifest文件开始读取</text>
<text text-anchor="start" x="882.8496" y="-283" font-family="Times,serif" font-size="14.00" fill="#000000"> VersionEditRecord</text>
</g>
<!-- ReadFileToString&#45;&gt;NewSequentialFile -->
<g id="edge1" class="edge">
<title>ReadFileToString&#45;&gt;NewSequentialFile</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M838.9946,-308C847.4423,-308 856.0821,-308 864.6779,-308"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="864.7342,-311.5001 874.7342,-308 864.7342,-304.5001 864.7342,-311.5001"/>
</g>
<!-- deleted_files_ -->
<g id="node4" class="node">
<title>deleted_files_</title>
<polygon fill="none" stroke="#000000" points="1539.252,-314 1539.252,-408 1678.4902,-408 1678.4902,-314 1539.252,-314"/>
<text text-anchor="middle" x="1608.8711" y="-392.8" font-family="Times,serif" font-size="14.00" fill="#000000">deleted_files_</text>
<polyline fill="none" stroke="#000000" points="1539.252,-386 1678.4902,-386 "/>
<text text-anchor="start" x="1547.252" y="-370.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt32 kDeletedFile</text>
<text text-anchor="start" x="1547.252" y="-356.8" font-family="Times,serif" font-size="14.00" fill="#000000"> varInt32 level</text>
<text text-anchor="start" x="1547.252" y="-342.8" font-family="Times,serif" font-size="14.00" fill="#000000"> varInt64 fileNumber</text>
<polyline fill="none" stroke="#000000" points="1539.252,-336 1678.4902,-336 "/>
<text text-anchor="middle" x="1608.8711" y="-320.8" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
</g>
<!-- VersionEditRecord&#45;&gt;deleted_files_ -->
<g id="edge8" class="edge">
<title>VersionEditRecord:deleted_files_&#45;&gt;deleted_files_</title>
<path fill="none" stroke="#000000" d="M1476.6055,-192C1529.3148,-192 1479.6194,-263.8881 1512.6055,-305 1517.9106,-311.612 1524.2221,-317.6017 1531.0398,-322.9884"/>
<polygon fill="#000000" stroke="#000000" points="1529.1192,-325.9208 1539.2457,-329.0361 1533.2722,-320.2858 1529.1192,-325.9208"/>
</g>
<!-- r_new_files_ -->
<g id="node5" class="node">
<title>r_new_files_</title>
<polygon fill="none" stroke="#000000" points="1541.7744,-159 1541.7744,-295 1675.9678,-295 1675.9678,-159 1541.7744,-159"/>
<text text-anchor="middle" x="1608.8711" y="-279.8" font-family="Times,serif" font-size="14.00" fill="#000000">new_files_</text>
<polyline fill="none" stroke="#000000" points="1541.7744,-273 1675.9678,-273 "/>
<text text-anchor="start" x="1549.7744" y="-257.8" font-family="Times,serif" font-size="14.00" fill="#000000">varInt32 kNewFile</text>
<text text-anchor="start" x="1549.7744" y="-243.8" font-family="Times,serif" font-size="14.00" fill="#000000"> varInt32 level</text>
<text text-anchor="start" x="1549.7744" y="-229.8" font-family="Times,serif" font-size="14.00" fill="#000000"> varInt64 fileNumber</text>
<text text-anchor="start" x="1549.7744" y="-215.8" font-family="Times,serif" font-size="14.00" fill="#000000"> varInt64 fileSize</text>
<text text-anchor="start" x="1549.7744" y="-201.8" font-family="Times,serif" font-size="14.00" fill="#000000"> Slice smallest</text>
<text text-anchor="start" x="1549.7744" y="-187.8" font-family="Times,serif" font-size="14.00" fill="#000000"> Slice largest</text>
<polyline fill="none" stroke="#000000" points="1541.7744,-181 1675.9678,-181 "/>
<text text-anchor="middle" x="1608.8711" y="-165.8" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
</g>
<!-- VersionEditRecord&#45;&gt;r_new_files_ -->
<g id="edge9" class="edge">
<title>VersionEditRecord:new_files_&#45;&gt;r_new_files_</title>
<path fill="none" stroke="#000000" d="M1476.6055,-170C1495.2767,-170 1514.3089,-174.8496 1531.903,-181.7198"/>
<polygon fill="#000000" stroke="#000000" points="1530.9412,-185.1106 1541.5181,-185.7264 1533.6337,-178.6492 1530.9412,-185.1106"/>
</g>
<!-- DecodeFrom -->
<g id="node7" class="node">
<title>DecodeFrom</title>
<polygon fill="none" stroke="#000000" points="1512.6055,-427.2 1512.6055,-490.8 1705.1367,-490.8 1705.1367,-427.2 1512.6055,-427.2"/>
<text text-anchor="middle" x="1608.8711" y="-475.6" font-family="Times,serif" font-size="14.00" fill="#000000">DecodeFrom</text>
<polyline fill="none" stroke="#000000" points="1512.6055,-468.8 1705.1367,-468.8 "/>
<text text-anchor="start" x="1520.6055" y="-453.6" font-family="Times,serif" font-size="14.00" fill="#000000">从VersionEditRecord中解析出</text>
<text text-anchor="start" x="1520.6055" y="-434" font-family="Times,serif" font-size="14.00" fill="#000000"> VersionEdit</text>
</g>
<!-- VersionEditRecord&#45;&gt;DecodeFrom -->
<g id="edge4" class="edge">
<title>VersionEditRecord&#45;&gt;DecodeFrom</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1476.8987,-392.9253C1488.5095,-401.9309 1500.5715,-410.5361 1512.6055,-418 1514.9488,-419.4534 1517.3527,-420.8786 1519.8017,-422.2739"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="1518.3824,-425.4861 1528.8391,-427.1915 1521.7282,-419.3375 1518.3824,-425.4861"/>
</g>
<!-- NewSequentialFile&#45;&gt;ReadRecord -->
<g id="edge2" class="edge">
<title>NewSequentialFile&#45;&gt;ReadRecord</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M983.7294,-275.9408C1005.5711,-242.0408 1042.5476,-187.7916 1080.6152,-146 1091.0831,-134.5081 1103.0133,-123.0077 1114.8464,-112.3459"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="1117.4377,-114.7257 1122.5922,-105.4692 1112.7903,-109.491 1117.4377,-114.7257"/>
</g>
<!-- Builder_Apply -->
<g id="node8" class="node">
<title>Builder_Apply</title>
<polygon fill="none" stroke="#000000" points="1741.1367,-441.4001 1741.1367,-510.5999 1944.1611,-510.5999 1944.1611,-441.4001 1741.1367,-441.4001"/>
<text text-anchor="middle" x="1842.6489" y="-495.3999" font-family="Times,serif" font-size="14.00" fill="#000000">Builder_Apply</text>
<polyline fill="none" stroke="#000000" points="1741.1367,-488.5999 1944.1611,-488.5999 "/>
<text text-anchor="start" x="1749.1367" y="-473.3999" font-family="Times,serif" font-size="14.00" fill="#000000">将version_edit apply到version上</text>
<text text-anchor="start" x="1749.1367" y="-453.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 得到新的version</text>
</g>
<!-- DecodeFrom&#45;&gt;Builder_Apply -->
<g id="edge5" class="edge">
<title>DecodeFrom&#45;&gt;Builder_Apply</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1705.3072,-466.0127C1713.8049,-466.6306 1722.4514,-467.2594 1731.0595,-467.8854"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="1730.9083,-471.3835 1741.1358,-468.6181 1731.416,-464.402 1730.9083,-471.3835"/>
</g>
<!-- Finalize -->
<g id="node9" class="node">
<title>Finalize</title>
<polygon fill="none" stroke="#000000" points="2041.3062,-531 1980.1127,-531 1980.1127,-495 2041.3062,-495 2041.3062,-531"/>
<text text-anchor="middle" x="2010.7095" y="-508.8" font-family="Times,serif" font-size="14.00" fill="#000000">Finalize</text>
</g>
<!-- Builder_Apply&#45;&gt;Finalize -->
<g id="edge6" class="edge">
<title>Builder_Apply&#45;&gt;Finalize</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1944.2875,-498.3766C1953.2275,-500.3448 1961.8891,-502.2518 1969.8425,-504.0028"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="1969.3353,-507.4749 1979.854,-506.2069 1970.8404,-500.6386 1969.3353,-507.4749"/>
</g>
<!-- AppendVersion -->
<g id="node10" class="node">
<title>AppendVersion</title>
<polygon fill="none" stroke="#000000" points="2180.4029,-541 2077.2094,-541 2077.2094,-505 2180.4029,-505 2180.4029,-541"/>
<text text-anchor="middle" x="2128.8062" y="-518.8" font-family="Times,serif" font-size="14.00" fill="#000000">AppendVersion</text>
</g>
<!-- Finalize&#45;&gt;AppendVersion -->
<g id="edge7" class="edge">
<title>Finalize&#45;&gt;AppendVersion</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M2041.4297,-515.6013C2049.3745,-516.274 2058.2161,-517.0227 2067.1375,-517.7781"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="2066.9408,-521.2739 2077.2005,-518.6302 2067.5315,-514.2989 2066.9408,-521.2739"/>
</g>
<!-- Recover -->
<g id="node11" class="node">
<title>Recover</title>
<polygon fill="none" stroke="#000000" points="600.2212,-420 537.936,-420 537.936,-384 600.2212,-384 600.2212,-420"/>
<text text-anchor="middle" x="569.0786" y="-397.8" font-family="Times,serif" font-size="14.00" fill="#000000">Recover</text>
</g>
<!-- Recover&#45;&gt;ReadRecord -->
<g id="edge10" class="edge">
<title>Recover&#45;&gt;ReadRecord</title>
<path fill="none" stroke="#000000" d="M578.4819,-383.8317C594.35,-354.7896 629.0691,-297.7516 673.1426,-264 796.7617,-169.3321 970.476,-112.408 1078.5043,-83.874"/>
<polygon fill="#000000" stroke="#000000" points="1079.6342,-87.1964 1088.4261,-81.2843 1077.8664,-80.4233 1079.6342,-87.1964"/>
</g>
<!-- Recover&#45;&gt;ReadFileToString -->
<g id="edge11" class="edge">
<title>Recover&#45;&gt;ReadFileToString</title>
<path fill="none" stroke="#000000" d="M600.3644,-386.2665C621.5599,-375.6074 650.5634,-361.0216 677.7916,-347.3287"/>
<polygon fill="#000000" stroke="#000000" points="679.5822,-350.3459 686.9436,-342.7262 676.4372,-344.0922 679.5822,-350.3459"/>
</g>
<!-- Recover&#45;&gt;NewSequentialFile -->
<g id="edge12" class="edge">
<title>Recover&#45;&gt;NewSequentialFile</title>
<path fill="none" stroke="#000000" d="M600.3464,-393.7448C620.9303,-388.4947 648.5232,-381.8051 673.1426,-377 746.2442,-362.7322 766.5792,-370.0112 838.8496,-352 849.1814,-349.4251 859.8629,-346.3415 870.4292,-343.0176"/>
<polygon fill="#000000" stroke="#000000" points="871.643,-346.3038 880.0873,-339.9051 869.4958,-339.6412 871.643,-346.3038"/>
</g>
<!-- Recover&#45;&gt;DecodeFrom -->
<g id="edge13" class="edge">
<title>Recover&#45;&gt;DecodeFrom</title>
<path fill="none" stroke="#000000" d="M600.486,-400.0977C621.1272,-398.9445 648.7315,-397.5861 673.1426,-397 746.7689,-395.2322 765.2119,-395.7946 838.8496,-397 1032.937,-400.177 1114.5291,-307.9952 1275.1465,-417 1299.496,-433.5251 1278.3253,-461.1923 1303.1465,-477 1335.3362,-497.5004 1427.5603,-489.349 1502.3668,-478.2331"/>
<polygon fill="#000000" stroke="#000000" points="1502.9692,-481.6818 1512.3304,-476.7202 1501.9183,-474.7611 1502.9692,-481.6818"/>
</g>
<!-- Recover&#45;&gt;Builder_Apply -->
<g id="edge14" class="edge">
<title>Recover&#45;&gt;Builder_Apply</title>
<path fill="none" stroke="#000000" d="M600.2393,-403.6327C650.4722,-406.2872 752.4633,-411.7697 838.8496,-417 1033.2576,-428.7706 1101.5279,-369.7412 1275.1465,-458 1291.4048,-466.2649 1286.6339,-480.2555 1303.1465,-488 1387.5681,-527.5944 1419.3981,-497.3322 1512.6055,-500 1598.1399,-502.4481 1619.8864,-507.3836 1705.1367,-500 1713.4664,-499.2786 1722.0485,-498.3157 1730.6636,-497.1896"/>
<polygon fill="#000000" stroke="#000000" points="1731.3497,-500.6282 1740.7791,-495.7973 1730.3952,-493.6936 1731.3497,-500.6282"/>
</g>
<!-- Recover&#45;&gt;Finalize -->
<g id="edge15" class="edge">
<title>Recover&#45;&gt;Finalize</title>
<path fill="none" stroke="#000000" d="M600.4427,-406.9697C621.0661,-410.1266 648.6669,-414.1416 673.1426,-417 841.3297,-436.6416 885.1115,-426.197 1052.6152,-451 1165.109,-467.6575 1190.2675,-489.1917 1303.1465,-503 1496.514,-526.6543 1546.3645,-516.2215 1741.1367,-520 1831.3528,-521.7501 1854.0519,-524.7261 1944.1611,-520 1952.4914,-519.5631 1961.3842,-518.8206 1969.8685,-517.9782"/>
<polygon fill="#000000" stroke="#000000" points="1970.372,-521.4446 1979.9498,-516.9151 1969.6378,-514.4832 1970.372,-521.4446"/>
</g>
<!-- Recover&#45;&gt;AppendVersion -->
<g id="edge16" class="edge">
<title>Recover&#45;&gt;AppendVersion</title>
<path fill="none" stroke="#000000" d="M600.3042,-410.7355C620.8707,-416.2574 648.4602,-423.2267 673.1426,-428 690.4874,-431.3543 1285.5519,-513.4107 1303.1465,-515 1395.9474,-523.3826 1419.496,-520.4066 1512.6055,-524 1720.3749,-532.0185 1772.2674,-536.4439 1980.1611,-540 2007.3112,-540.4644 2014.2285,-542.6 2041.2578,-540 2049.6767,-539.1902 2058.4889,-537.9519 2067.1432,-536.505"/>
<polygon fill="#000000" stroke="#000000" points="2067.9611,-539.9147 2077.1971,-534.7237 2066.7398,-533.022 2067.9611,-539.9147"/>
</g>
<!-- MarkFileNumberUsed -->
<g id="node12" class="node">
<title>MarkFileNumberUsed</title>
<polygon fill="none" stroke="#000000" points="827.2483,-497 684.7439,-497 684.7439,-461 827.2483,-461 827.2483,-497"/>
<text text-anchor="middle" x="755.9961" y="-474.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkFileNumberUsed</text>
</g>
<!-- Recover&#45;&gt;MarkFileNumberUsed -->
<g id="edge17" class="edge">
<title>Recover&#45;&gt;MarkFileNumberUsed</title>
<path fill="none" stroke="#000000" d="M600.3635,-415.9123C620.9544,-424.9739 648.5487,-436.9377 673.1426,-447 681.3342,-450.3515 690.0177,-453.8088 698.5606,-457.156"/>
<polygon fill="#000000" stroke="#000000" points="697.524,-460.5083 708.1125,-460.8767 700.0648,-453.9857 697.524,-460.5083"/>
</g>
<!-- ReuseManifest -->
<g id="node13" class="node">
<title>ReuseManifest</title>
<polygon fill="none" stroke="#000000" points="805.9756,-551 706.0166,-551 706.0166,-515 805.9756,-515 805.9756,-551"/>
<text text-anchor="middle" x="755.9961" y="-528.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReuseManifest</text>
</g>
<!-- Recover&#45;&gt;ReuseManifest -->
<g id="edge18" class="edge">
<title>Recover&#45;&gt;ReuseManifest</title>
<path fill="none" stroke="#000000" d="M582.6077,-420.0246C600.7957,-443.0714 635.2547,-482.7677 673.1426,-506 680.2804,-510.3768 688.2043,-514.1231 696.2408,-517.3069"/>
<polygon fill="#000000" stroke="#000000" points="695.093,-520.6139 705.6863,-520.7901 697.515,-514.0463 695.093,-520.6139"/>
</g>
<!-- FileMetaData -->
<g id="node14" class="node">
<title>FileMetaData</title>
<polygon fill="#95e1d3" stroke="#000000" points="501.0146,-604 501.0146,-758 637.1426,-758 637.1426,-604 501.0146,-604"/>
<text text-anchor="middle" x="569.0786" y="-742.8" font-family="Times,serif" font-size="14.00" fill="#000000">FileMetaData</text>
<polyline fill="none" stroke="#000000" points="501.0146,-736 637.1426,-736 "/>
<text text-anchor="start" x="509.0146" y="-720.8" font-family="Times,serif" font-size="14.00" fill="#000000">int refs;</text>
<polyline fill="none" stroke="#000000" points="501.0146,-714 637.1426,-714 "/>
<text text-anchor="start" x="509.0146" y="-698.8" font-family="Times,serif" font-size="14.00" fill="#000000">int allowed_seeks;</text>
<polyline fill="none" stroke="#000000" points="501.0146,-692 637.1426,-692 "/>
<text text-anchor="start" x="509.0146" y="-676.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t number;</text>
<polyline fill="none" stroke="#000000" points="501.0146,-670 637.1426,-670 "/>
<text text-anchor="start" x="509.0146" y="-654.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t file_size;</text>
<polyline fill="none" stroke="#000000" points="501.0146,-648 637.1426,-648 "/>
<text text-anchor="start" x="509.0146" y="-632.8" font-family="Times,serif" font-size="14.00" fill="#000000">InternalKey smallest;</text>
<polyline fill="none" stroke="#000000" points="501.0146,-626 637.1426,-626 "/>
<text text-anchor="start" x="509.0146" y="-610.8" font-family="Times,serif" font-size="14.00" fill="#000000">InternalKey largest;</text>
</g>
<!-- files_ -->
<g id="node15" class="node">
<title>files_</title>
<polygon fill="#95e1d3" stroke="#000000" points="16,-652 16,-710 194.1484,-710 194.1484,-652 16,-652"/>
<text text-anchor="middle" x="105.0742" y="-694.8" font-family="Times,serif" font-size="14.00" fill="#000000">files_</text>
<polyline fill="none" stroke="#000000" points="16,-688 194.1484,-688 "/>
<text text-anchor="start" x="24" y="-672.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::Vector&lt;FileMetaData*&gt;</text>
<text text-anchor="middle" x="105.0742" y="-658.8" font-family="Times,serif" font-size="14.00" fill="#000000"> files_[config::kNumLevels];</text>
</g>
<!-- levels -->
<g id="node16" class="node">
<title>levels</title>
<polygon fill="none" stroke="#000000" points="230.1484,-637 230.1484,-725 465.0146,-725 465.0146,-637 230.1484,-637"/>
<text text-anchor="middle" x="347.5815" y="-709.8" font-family="Times,serif" font-size="14.00" fill="#000000">levels</text>
<polyline fill="none" stroke="#000000" points="230.1484,-703 465.0146,-703 "/>
<text text-anchor="start" x="238.1484" y="-687.8" font-family="Times,serif" font-size="14.00" fill="#000000">level0: [FileMetaData .. FileMetaData]</text>
<polyline fill="none" stroke="#000000" points="230.1484,-681 465.0146,-681 "/>
<text text-anchor="start" x="238.1484" y="-665.8" font-family="Times,serif" font-size="14.00" fill="#000000">level1: [FileMetaData .. FileMetaData]</text>
<polyline fill="none" stroke="#000000" points="230.1484,-659 465.0146,-659 "/>
<text text-anchor="start" x="238.1484" y="-643.8" font-family="Times,serif" font-size="14.00" fill="#000000">... levelN</text>
</g>
<!-- files_&#45;&gt;levels -->
<g id="edge19" class="edge">
<title>files_&#45;&gt;levels</title>
<path fill="none" stroke="#000000" d="M194.3419,-681C202.6898,-681 211.2555,-681 219.8649,-681"/>
<polygon fill="#000000" stroke="#000000" points="219.9811,-684.5001 229.981,-681 219.981,-677.5001 219.9811,-684.5001"/>
</g>
<!-- levels&#45;&gt;FileMetaData -->
<g id="edge20" class="edge">
<title>levels&#45;&gt;FileMetaData</title>
<path fill="none" stroke="#000000" d="M465.1399,-681C473.8261,-681 482.4563,-681 490.8156,-681"/>
<polygon fill="#000000" stroke="#000000" points="490.8633,-684.5001 500.8632,-681 490.8632,-677.5001 490.8633,-684.5001"/>
</g>
<!-- DBImpl_Recover -->
<g id="node17" class="node">
<title>DBImpl_Recover</title>
<polygon fill="none" stroke="#000000" points="231.6831,-347.8002 231.6831,-456.1998 463.48,-456.1998 463.48,-347.8002 231.6831,-347.8002"/>
<text text-anchor="middle" x="347.5815" y="-440.9998" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl::Recover</text>
<polyline fill="none" stroke="#000000" points="231.6831,-434.1998 463.48,-434.1998 "/>
<text text-anchor="start" x="239.6831" y="-418.9998" font-family="Times,serif" font-size="14.00" fill="#000000">从current中获取当前Manifest文件名</text>
<text text-anchor="start" x="239.6831" y="-399.3999" font-family="Times,serif" font-size="14.00" fill="#000000"> 读取Manifest中的VersionEditRecord</text>
<text text-anchor="start" x="239.6831" y="-379.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 不断的apply versionEdit</text>
<text text-anchor="start" x="239.6831" y="-360.2001" font-family="Times,serif" font-size="14.00" fill="#000000"> 最后获得当前最新version</text>
</g>
<!-- DBImpl_Recover&#45;&gt;Recover -->
<g id="edge22" class="edge">
<title>DBImpl_Recover&#45;&gt;Recover</title>
<path fill="none" stroke="#000000" d="M463.5197,-402C486.5514,-402 509.2831,-402 527.7188,-402"/>
<polygon fill="#000000" stroke="#000000" points="527.7694,-405.5001 537.7693,-402 527.7693,-398.5001 527.7694,-405.5001"/>
</g>
<!-- Open -->
<g id="node18" class="node">
<title>Open</title>
<polygon fill="none" stroke="#000000" points="132.0742,-420 78.0742,-420 78.0742,-384 132.0742,-384 132.0742,-420"/>
<text text-anchor="middle" x="105.0742" y="-397.8" font-family="Times,serif" font-size="14.00" fill="#000000">Open</text>
</g>
<!-- Open&#45;&gt;DBImpl_Recover -->
<g id="edge21" class="edge">
<title>Open&#45;&gt;DBImpl_Recover</title>
<path fill="none" stroke="#000000" d="M132.4215,-402C154.5924,-402 187.5561,-402 221.0573,-402"/>
<polygon fill="#000000" stroke="#000000" points="221.4601,-405.5001 231.4601,-402 221.4601,-398.5001 221.4601,-405.5001"/>
</g>
</g>
</svg>
