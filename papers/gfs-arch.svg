<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: gfs_arch Pages: 1 -->
<svg width="1933pt" height="1063pt"
 viewBox="0.00 0.00 1933.36 1063.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1059)">
<title>gfs_arch</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1059 1929.3574,-1059 1929.3574,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_Client</title>
<polygon fill="none" stroke="#000000" points="8,-855 8,-1047 1035.0737,-1047 1035.0737,-855 8,-855"/>
<text text-anchor="middle" x="521.5369" y="-1027" font-family="Times,serif" font-size="20.00" fill="#000000">Client</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_Server</title>
<polygon fill="none" stroke="#000000" points="796.001,-8 796.001,-847 1917.3574,-847 1917.3574,-8 796.001,-8"/>
<text text-anchor="middle" x="1356.6792" y="-827" font-family="Times,serif" font-size="20.00" fill="#000000">Server</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Master</title>
<polygon fill="none" stroke="#000000" points="804.001,-436 804.001,-811 1732.6953,-811 1732.6953,-436 804.001,-436"/>
<text text-anchor="middle" x="1268.3481" y="-791" font-family="Times,serif" font-size="20.00" fill="#000000">Master</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_ChunkServers</title>
<polygon fill="none" stroke="#000000" points="1323.6362,-16 1323.6362,-262 1702.4106,-262 1702.4106,-16 1323.6362,-16"/>
<text text-anchor="middle" x="1513.0234" y="-242" font-family="Times,serif" font-size="20.00" fill="#000000">ChunkServer1</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_Linux_fs</title>
<polygon fill="none" stroke="#000000" points="1545.7485,-24 1545.7485,-226 1694.4106,-226 1694.4106,-24 1545.7485,-24"/>
<text text-anchor="middle" x="1620.0796" y="-206" font-family="Times,serif" font-size="20.00" fill="#000000">Linux fs</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_ChunkServer2</title>
<polygon fill="none" stroke="#000000" points="1323.6362,-270 1323.6362,-428 1909.3574,-428 1909.3574,-270 1323.6362,-270"/>
<text text-anchor="middle" x="1616.4968" y="-408" font-family="Times,serif" font-size="20.00" fill="#000000">ChunkServer2</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_Linux_fs</title>
<polygon fill="none" stroke="#000000" points="1562.4658,-278 1562.4658,-392 1901.3574,-392 1901.3574,-278 1562.4658,-278"/>
<text text-anchor="middle" x="1731.9116" y="-372" font-family="Times,serif" font-size="20.00" fill="#000000">Linux fs</text>
</g>
<!-- AppCode -->
<g id="node1" class="node">
<title>AppCode</title>
<polygon fill="none" stroke="#000000" points="16,-898.2 16,-975.8 169.9766,-975.8 169.9766,-898.2 16,-898.2"/>
<text text-anchor="middle" x="92.9883" y="-960.6" font-family="Times,serif" font-size="14.00" fill="#000000">AppCode</text>
<polyline fill="none" stroke="#000000" points="16,-953.8 169.9766,-953.8 "/>
<text text-anchor="start" x="24" y="-938.6" font-family="Times,serif" font-size="14.00" fill="#000000">使用封装好的GFS接口</text>
<text text-anchor="start" x="24" y="-919" font-family="Times,serif" font-size="14.00" fill="#000000"> create/delete/open/close</text>
<text text-anchor="start" x="24" y="-905" font-family="Times,serif" font-size="14.00" fill="#000000"> read/write</text>
</g>
<!-- Client -->
<g id="node2" class="node">
<title>Client</title>
<polygon fill="none" stroke="#000000" points="205.9766,-863.2003 205.9766,-1010.7997 558.0107,-1010.7997 558.0107,-863.2003 205.9766,-863.2003"/>
<text text-anchor="middle" x="381.9937" y="-995.5997" font-family="Times,serif" font-size="14.00" fill="#000000">GFS Client lib</text>
<polyline fill="none" stroke="#000000" points="205.9766,-988.7997 558.0107,-988.7997 "/>
<text text-anchor="start" x="213.9766" y="-973.5997" font-family="Times,serif" font-size="14.00" fill="#000000">封装和master/chunk server通信</text>
<text text-anchor="start" x="213.9766" y="-953.9998" font-family="Times,serif" font-size="14.00" fill="#000000"> 1.client和master通信获取Metadata</text>
<text text-anchor="start" x="213.9766" y="-934.3999" font-family="Times,serif" font-size="14.00" fill="#000000"> 2.client和chunk server通信读写数据</text>
<text text-anchor="start" x="213.9766" y="-914.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 3.处理chunk边界等问题</text>
<text text-anchor="start" x="213.9766" y="-895.2001" font-family="Times,serif" font-size="14.00" fill="#000000"> 4.client会缓存 (filename,chunkindex) &#45;&gt; chunkhandle信息</text>
<text text-anchor="start" x="213.9766" y="-875.6002" font-family="Times,serif" font-size="14.00" fill="#000000"> 减小和master的通信负担</text>
</g>
<!-- AppCode&#45;&gt;Client -->
<g id="edge1" class="edge">
<title>AppCode&#45;&gt;Client</title>
<path fill="none" stroke="#666666" d="M170.0568,-937C178.3182,-937 186.9587,-937 195.8282,-937"/>
<polygon fill="#666666" stroke="#666666" points="195.9314,-940.5001 205.9314,-937 195.9314,-933.5001 195.9314,-940.5001"/>
</g>
<!-- Cache -->
<g id="node3" class="node">
<title>Cache</title>
<polygon fill="#a6b1e1" stroke="#000000" points="816.2563,-916.4001 816.2563,-985.5999 1027.0737,-985.5999 1027.0737,-916.4001 816.2563,-916.4001"/>
<text text-anchor="middle" x="921.665" y="-970.3999" font-family="Times,serif" font-size="14.00" fill="#000000">Cache</text>
<polyline fill="none" stroke="#000000" points="816.2563,-963.5999 1027.0737,-963.5999 "/>
<text text-anchor="start" x="824.2563" y="-948.3999" font-family="Times,serif" font-size="14.00" fill="#000000">缓存Master返回的chunk信息</text>
<text text-anchor="start" x="824.2563" y="-928.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 避免每次都要去master获取信息</text>
</g>
<!-- Client&#45;&gt;Cache -->
<g id="edge2" class="edge">
<title>Client&#45;&gt;Cache</title>
<path fill="none" stroke="#666666" d="M558.1379,-993.4822C570.1951,-996.0648 582.2309,-998.2869 594.0107,-1000 674.0533,-1011.6406 696.1787,-1013.066 776.001,-1000 791.8098,-997.4123 808.2155,-993.3432 824.0684,-988.6299"/>
<polygon fill="#666666" stroke="#666666" points="825.328,-991.9044 833.8574,-985.6194 823.2703,-985.2136 825.328,-991.9044"/>
</g>
<!-- client_req -->
<g id="node4" class="node">
<title>client_req</title>
<polygon fill="#95e1d3" stroke="#000000" points="621.7988,-863.2 621.7988,-990.8 748.2129,-990.8 748.2129,-863.2 621.7988,-863.2"/>
<text text-anchor="middle" x="685.0059" y="-975.6" font-family="Times,serif" font-size="14.00" fill="#000000">client和master通信</text>
<polyline fill="none" stroke="#000000" points="621.7988,-963.2 748.2129,-963.2 "/>
<text text-anchor="start" x="629.7988" y="-948" font-family="Times,serif" font-size="14.00" fill="#000000">req:</text>
<text text-anchor="start" x="629.7988" y="-934" font-family="Times,serif" font-size="14.00" fill="#000000"> filename</text>
<text text-anchor="start" x="629.7988" y="-920" font-family="Times,serif" font-size="14.00" fill="#000000"> chunk index</text>
<polyline fill="none" stroke="#000000" points="621.7988,-913.2 748.2129,-913.2 "/>
<text text-anchor="start" x="629.7988" y="-898" font-family="Times,serif" font-size="14.00" fill="#000000">resp:</text>
<text text-anchor="start" x="629.7988" y="-884" font-family="Times,serif" font-size="14.00" fill="#000000"> chunk handle</text>
<text text-anchor="start" x="629.7988" y="-870" font-family="Times,serif" font-size="14.00" fill="#000000"> chunk location</text>
</g>
<!-- Client&#45;&gt;client_req -->
<g id="edge23" class="edge">
<title>Client&#45;&gt;client_req</title>
<path fill="none" stroke="#666666" d="M558.2571,-931.183C576.9097,-930.5674 595.0478,-929.9688 611.4988,-929.4259"/>
<polygon fill="#666666" stroke="#666666" points="611.6343,-932.9234 621.5134,-929.0954 611.4034,-925.9272 611.6343,-932.9234"/>
</g>
<!-- data -->
<g id="node21" class="node">
<title>data</title>
<polygon fill="#95e1d3" stroke="#000000" points="594.0107,-572.4001 594.0107,-649.5999 776.001,-649.5999 776.001,-572.4001 594.0107,-572.4001"/>
<text text-anchor="middle" x="685.0059" y="-634.3999" font-family="Times,serif" font-size="14.00" fill="#000000">client 和chunk之间通信</text>
<polyline fill="none" stroke="#000000" points="594.0107,-622 776.001,-622 "/>
<text text-anchor="start" x="602.0107" y="-606.8" font-family="Times,serif" font-size="14.00" fill="#000000">req: chunk handle, byte range</text>
<polyline fill="none" stroke="#000000" points="594.0107,-600 776.001,-600 "/>
<text text-anchor="start" x="602.0107" y="-584.8" font-family="Times,serif" font-size="14.00" fill="#000000">resp: chunk数据</text>
</g>
<!-- Client&#45;&gt;data -->
<g id="edge25" class="edge">
<title>Client&#45;&gt;data</title>
<path fill="none" stroke="#17b978" d="M450.7518,-863.0256C509.5005,-799.8199 592.1947,-710.8522 641.9942,-657.2747"/>
<polygon fill="#17b978" stroke="#17b978" points="644.8517,-659.3413 649.0962,-649.6339 639.7245,-654.5757 644.8517,-659.3413"/>
</g>
<!-- client_req&#45;&gt;Cache -->
<g id="edge3" class="edge">
<title>client_req&#45;&gt;Cache</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M748.4262,-933.4316C766.2296,-935.237 786.1639,-937.2586 805.9983,-939.27"/>
<polygon fill="#666666" stroke="#666666" points="805.73,-942.7607 816.0321,-940.2876 806.4363,-935.7964 805.73,-942.7607"/>
</g>
<!-- Master -->
<g id="node5" class="node">
<title>Master</title>
<polygon fill="none" stroke="#000000" points="812.001,-612.2 812.001,-745.8 1031.3291,-745.8 1031.3291,-612.2 812.001,-612.2"/>
<text text-anchor="middle" x="921.665" y="-730.6" font-family="Times,serif" font-size="14.00" fill="#000000">Master</text>
<polyline fill="none" stroke="#000000" points="812.001,-723.8 1031.3291,-723.8 "/>
<text text-anchor="start" x="820.001" y="-708.6" font-family="Times,serif" font-size="14.00" fill="#000000">Master Server维护系统的metadata:</text>
<text text-anchor="start" x="820.001" y="-689" font-family="Times,serif" font-size="14.00" fill="#000000"> 1.namespace, access control</text>
<text text-anchor="start" x="820.001" y="-675" font-family="Times,serif" font-size="14.00" fill="#000000"> 2.map from files to chunks</text>
<text text-anchor="start" x="820.001" y="-661" font-family="Times,serif" font-size="14.00" fill="#000000"> 3.locations of chunks</text>
<text text-anchor="start" x="820.001" y="-647" font-family="Times,serif" font-size="14.00" fill="#000000"> 4.chunk lease management</text>
<text text-anchor="start" x="820.001" y="-633" font-family="Times,serif" font-size="14.00" fill="#000000"> 5.gc of orphaned chunks</text>
<text text-anchor="start" x="820.001" y="-619" font-family="Times,serif" font-size="14.00" fill="#000000"> 6.chunk migration</text>
</g>
<!-- client_req&#45;&gt;Master -->
<g id="edge24" class="edge">
<title>client_req&#45;&gt;Master</title>
<path fill="none" stroke="#666666" d="M745.9515,-863.1338C777.9163,-829.6372 817.2526,-788.416 850.5972,-753.4735"/>
<polygon fill="#666666" stroke="#666666" points="853.2451,-755.7684 857.6168,-746.1175 848.1809,-750.9357 853.2451,-755.7684"/>
</g>
<!-- Namespace -->
<g id="node6" class="node">
<title>Namespace</title>
<polygon fill="#a6b1e1" stroke="#000000" points="1121.979,-556.2 1121.979,-605.8 1202.4966,-605.8 1202.4966,-556.2 1121.979,-556.2"/>
<text text-anchor="middle" x="1162.2378" y="-590.6" font-family="Times,serif" font-size="14.00" fill="#000000">Namespace</text>
<polyline fill="none" stroke="#000000" points="1121.979,-583.8 1202.4966,-583.8 "/>
<text text-anchor="middle" x="1162.2378" y="-568.6" font-family="Times,serif" font-size="14.00" fill="#000000">文件树</text>
</g>
<!-- Master&#45;&gt;Namespace -->
<g id="edge4" class="edge">
<title>Master&#45;&gt;Namespace</title>
<path fill="none" stroke="#666666" d="M1031.3915,-634.3017C1059.7098,-622.7659 1088.8149,-610.9097 1112.3633,-601.3169"/>
<polygon fill="#666666" stroke="#666666" points="1113.823,-604.5017 1121.7636,-597.4876 1111.1821,-598.0189 1113.823,-604.5017"/>
</g>
<!-- FileToChunkMapping -->
<g id="node7" class="node">
<title>FileToChunkMapping</title>
<polygon fill="#a6b1e1" stroke="#000000" points="1092.1162,-633.4001 1092.1162,-724.5999 1232.3594,-724.5999 1232.3594,-633.4001 1092.1162,-633.4001"/>
<text text-anchor="middle" x="1162.2378" y="-709.3999" font-family="Times,serif" font-size="14.00" fill="#000000">FileToChunkMapping</text>
<polyline fill="none" stroke="#000000" points="1092.1162,-702.5999 1232.3594,-702.5999 "/>
<text text-anchor="start" x="1100.1162" y="-687.3999" font-family="Times,serif" font-size="14.00" fill="#000000">每个文件由哪些</text>
<text text-anchor="start" x="1100.1162" y="-667.8" font-family="Times,serif" font-size="14.00" fill="#000000"> chunkHanle组成</text>
<polyline fill="none" stroke="#000000" points="1092.1162,-655.4001 1232.3594,-655.4001 "/>
<text text-anchor="start" x="1100.1162" y="-640.2001" font-family="Times,serif" font-size="14.00" fill="#000000">file &#45;&gt; []chunkHandle</text>
</g>
<!-- Master&#45;&gt;FileToChunkMapping -->
<g id="edge5" class="edge">
<title>Master&#45;&gt;FileToChunkMapping</title>
<path fill="none" stroke="#666666" d="M1031.3915,-679C1048.2663,-679 1065.4205,-679 1081.5118,-679"/>
<polygon fill="#666666" stroke="#666666" points="1081.919,-682.5001 1091.9189,-679 1081.9189,-675.5001 1081.919,-682.5001"/>
</g>
<!-- ChunkLocation -->
<g id="node8" class="node">
<title>ChunkLocation</title>
<polygon fill="none" stroke="#000000" points="1515.4639,-652.6001 1515.4639,-741.3999 1724.6953,-741.3999 1724.6953,-652.6001 1515.4639,-652.6001"/>
<text text-anchor="middle" x="1620.0796" y="-726.1999" font-family="Times,serif" font-size="14.00" fill="#000000">ChunkLocation</text>
<polyline fill="none" stroke="#000000" points="1515.4639,-719.3999 1724.6953,-719.3999 "/>
<text text-anchor="start" x="1523.4639" y="-704.1999" font-family="Times,serif" font-size="14.00" fill="#000000">master通过定期询问chunk server</text>
<text text-anchor="start" x="1523.4639" y="-684.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 获取chunk location信息</text>
<text text-anchor="start" x="1523.4639" y="-665" font-family="Times,serif" font-size="14.00" fill="#000000"> 并重建文件&#45;chunk映射表</text>
</g>
<!-- Master&#45;&gt;ChunkLocation -->
<g id="edge6" class="edge">
<title>Master&#45;&gt;ChunkLocation</title>
<path fill="none" stroke="#666666" d="M1031.3677,-723.4486C1043.3827,-727.4066 1055.5328,-731.0312 1067.3291,-734 1245.4308,-778.8237 1300.3285,-804.4959 1479.4639,-764 1497.3792,-759.95 1515.6866,-753.3327 1532.9168,-745.7954"/>
<polygon fill="#666666" stroke="#666666" points="1534.6976,-748.8315 1542.3689,-741.5238 1531.8149,-742.4526 1534.6976,-748.8315"/>
</g>
<!-- master_chunk -->
<g id="node11" class="node">
<title>master_chunk</title>
<polygon fill="#95e1d3" stroke="#000000" points="1067.3291,-444.6001 1067.3291,-527.3999 1257.1465,-527.3999 1257.1465,-444.6001 1067.3291,-444.6001"/>
<text text-anchor="start" x="1075.3291" y="-512.1999" font-family="Times,serif" font-size="14.00" fill="#000000">master和chunk之间通信</text>
<polyline fill="none" stroke="#000000" points="1067.3291,-499.8 1257.1465,-499.8 "/>
<text text-anchor="start" x="1075.3291" y="-484.6" font-family="Times,serif" font-size="14.00" fill="#000000">1.master发送心跳信息和指令</text>
<polyline fill="none" stroke="#000000" points="1067.3291,-472.2 1257.1465,-472.2 "/>
<text text-anchor="start" x="1075.3291" y="-457" font-family="Times,serif" font-size="14.00" fill="#000000">2.收集chunk server信息</text>
</g>
<!-- Master&#45;&gt;master_chunk -->
<g id="edge20" class="edge">
<title>Master&#45;&gt;master_chunk</title>
<path fill="none" stroke="#666666" d="M990.7625,-612.115C1014.3356,-590.4685 1041.3215,-566.9248 1067.3291,-547 1073.3967,-542.3515 1079.8198,-537.7028 1086.349,-533.162"/>
<polygon fill="#666666" stroke="#666666" points="1088.3816,-536.0121 1094.6574,-527.476 1084.4282,-530.2354 1088.3816,-536.0121"/>
</g>
<!-- Persistent -->
<g id="node9" class="node">
<title>Persistent</title>
<polygon fill="none" stroke="#000000" points="1294.3052,-464.2003 1294.3052,-619.7997 1478.3052,-619.7997 1478.3052,-464.2003 1294.3052,-464.2003"/>
<text text-anchor="middle" x="1386.3052" y="-604.5997" font-family="Times,serif" font-size="14.00" fill="#000000">Persistent</text>
<polyline fill="none" stroke="#000000" points="1294.3052,-597.7997 1478.3052,-597.7997 "/>
<text text-anchor="start" x="1302.3052" y="-582.5997" font-family="Times,serif" font-size="14.00" fill="#000000">通过Operationlog</text>
<text text-anchor="start" x="1302.3052" y="-562.9998" font-family="Times,serif" font-size="14.00" fill="#000000"> 和checkPoint</text>
<text text-anchor="start" x="1302.3052" y="-543.3999" font-family="Times,serif" font-size="14.00" fill="#000000"> 持久化存储在</text>
<text text-anchor="start" x="1302.3052" y="-523.8" font-family="Times,serif" font-size="14.00" fill="#000000"> local disk并复制</text>
<text text-anchor="start" x="1302.3052" y="-504.2001" font-family="Times,serif" font-size="14.00" fill="#000000"> 到remote server上</text>
<polyline fill="none" stroke="#000000" points="1294.3052,-491.8002 1478.3052,-491.8002 "/>
<text text-anchor="start" x="1302.3052" y="-476.6002" font-family="Times,serif" font-size="14.00" fill="#000000">先持久化，再响应客户请求</text>
</g>
<!-- Namespace&#45;&gt;Persistent -->
<g id="edge7" class="edge">
<title>Namespace&#45;&gt;Persistent</title>
<path fill="none" stroke="#666666" d="M1202.5553,-573.9825C1225.4351,-570.0002 1255.1992,-564.8196 1284.0862,-559.7917"/>
<polygon fill="#666666" stroke="#666666" points="1285.003,-563.1848 1294.2546,-558.0218 1283.8026,-556.2885 1285.003,-563.1848"/>
</g>
<!-- FileToChunkMapping&#45;&gt;Persistent -->
<g id="edge8" class="edge">
<title>FileToChunkMapping&#45;&gt;Persistent</title>
<path fill="none" stroke="#666666" d="M1232.5193,-636.0282C1249.2841,-625.7778 1267.5045,-614.6375 1285.3466,-603.7284"/>
<polygon fill="#666666" stroke="#666666" points="1287.3611,-606.5992 1294.0669,-598.3966 1283.7095,-600.627 1287.3611,-606.5992"/>
</g>
<!-- ChunkHandle -->
<g id="node10" class="node">
<title>ChunkHandle</title>
<polygon fill="#a6b1e1" stroke="#000000" points="1293.1465,-639.2 1293.1465,-754.8 1479.4639,-754.8 1479.4639,-639.2 1293.1465,-639.2"/>
<text text-anchor="middle" x="1386.3052" y="-739.6" font-family="Times,serif" font-size="14.00" fill="#000000">ChunkHandle</text>
<polyline fill="none" stroke="#000000" points="1293.1465,-732.8 1479.4639,-732.8 "/>
<text text-anchor="start" x="1301.1465" y="-717.6" font-family="Times,serif" font-size="14.00" fill="#000000">list of chunk servers (v)</text>
<polyline fill="none" stroke="#000000" points="1293.1465,-710.8 1479.4639,-710.8 "/>
<text text-anchor="start" x="1301.1465" y="-695.6" font-family="Times,serif" font-size="14.00" fill="#000000">version num (nv):需要持久化</text>
<polyline fill="none" stroke="#000000" points="1293.1465,-683.2 1479.4639,-683.2 "/>
<text text-anchor="start" x="1301.1465" y="-668" font-family="Times,serif" font-size="14.00" fill="#000000">primary (v)</text>
<polyline fill="none" stroke="#000000" points="1293.1465,-661.2 1479.4639,-661.2 "/>
<text text-anchor="start" x="1301.1465" y="-646" font-family="Times,serif" font-size="14.00" fill="#000000">lease experation (v)</text>
</g>
<!-- FileToChunkMapping&#45;&gt;ChunkHandle -->
<g id="edge9" class="edge">
<title>FileToChunkMapping&#45;&gt;ChunkHandle</title>
<path fill="none" stroke="#666666" d="M1232.5193,-684.6459C1248.5051,-685.9301 1265.8142,-687.3206 1282.8569,-688.6897"/>
<polygon fill="#666666" stroke="#666666" points="1282.6003,-692.1803 1292.8485,-689.4923 1283.1609,-685.2027 1282.6003,-692.1803"/>
</g>
<!-- OperationLog -->
<g id="node12" class="node">
<title>OperationLog</title>
<polygon fill="#d2c6b2" stroke="#000000" points="1561.9209,-548.4001 1561.9209,-617.5999 1678.2383,-617.5999 1678.2383,-548.4001 1561.9209,-548.4001"/>
<text text-anchor="middle" x="1620.0796" y="-602.3999" font-family="Times,serif" font-size="14.00" fill="#000000">OperationLog</text>
<polyline fill="none" stroke="#000000" points="1561.9209,-595.5999 1678.2383,-595.5999 "/>
<text text-anchor="start" x="1569.9209" y="-580.3999" font-family="Times,serif" font-size="14.00" fill="#000000">记录操作, master</text>
<text text-anchor="start" x="1569.9209" y="-560.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 通过replay恢复</text>
</g>
<!-- Persistent&#45;&gt;OperationLog -->
<g id="edge12" class="edge">
<title>Persistent&#45;&gt;OperationLog</title>
<path fill="none" stroke="#666666" d="M1478.3634,-558.1454C1502.8496,-562.4399 1528.8598,-567.0016 1551.8227,-571.0289"/>
<polygon fill="#666666" stroke="#666666" points="1551.3477,-574.499 1561.802,-572.7791 1552.557,-567.6042 1551.3477,-574.499"/>
</g>
<!-- CheckPoint -->
<g id="node13" class="node">
<title>CheckPoint</title>
<polygon fill="#d2c6b2" stroke="#000000" points="1545.2002,-460.4001 1545.2002,-529.5999 1694.959,-529.5999 1694.959,-460.4001 1545.2002,-460.4001"/>
<text text-anchor="middle" x="1620.0796" y="-514.3999" font-family="Times,serif" font-size="14.00" fill="#000000">CheckPoint</text>
<polyline fill="none" stroke="#000000" points="1545.2002,-507.5999 1694.959,-507.5999 "/>
<text text-anchor="start" x="1553.2002" y="-492.3999" font-family="Times,serif" font-size="14.00" fill="#000000">降低master starup从</text>
<text text-anchor="start" x="1553.2002" y="-472.8" font-family="Times,serif" font-size="14.00" fill="#000000"> operation log恢复时间</text>
</g>
<!-- Persistent&#45;&gt;CheckPoint -->
<g id="edge13" class="edge">
<title>Persistent&#45;&gt;CheckPoint</title>
<path fill="none" stroke="#666666" d="M1478.3634,-523.4918C1497.1004,-519.7248 1516.7298,-515.7783 1535.2033,-512.0643"/>
<polygon fill="#666666" stroke="#666666" points="1535.9258,-515.4891 1545.0397,-510.0867 1534.546,-508.6264 1535.9258,-515.4891"/>
</g>
<!-- ChunkHandle&#45;&gt;ChunkLocation -->
<g id="edge10" class="edge">
<title>ChunkHandle&#45;&gt;ChunkLocation</title>
<path fill="none" stroke="#666666" d="M1479.7069,-697C1488.1165,-697 1496.6954,-697 1505.2594,-697"/>
<polygon fill="#666666" stroke="#666666" points="1505.2951,-700.5001 1515.295,-697 1505.295,-693.5001 1505.2951,-700.5001"/>
</g>
<!-- master_chunk&#45;&gt;ChunkLocation -->
<g id="edge11" class="edge">
<title>master_chunk&#45;&gt;ChunkLocation</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1257.227,-460.7879C1269.2442,-458.4029 1281.4315,-456.3682 1293.1465,-455 1334.2708,-450.1972 1447.3277,-428.8936 1479.4639,-455 1540.083,-504.245 1471.771,-562.2645 1515.4639,-627 1519.9339,-633.6227 1525.261,-639.7816 1531.1093,-645.474"/>
<polygon fill="#666666" stroke="#666666" points="1529.0155,-648.3006 1538.7705,-652.4347 1533.7227,-643.1196 1529.0155,-648.3006"/>
</g>
<!-- ChunkServer1 -->
<g id="node14" class="node">
<title>ChunkServer1</title>
<polygon fill="none" stroke="#000000" points="1331.6362,-147.2 1331.6362,-196.8 1440.9741,-196.8 1440.9741,-147.2 1331.6362,-147.2"/>
<text text-anchor="middle" x="1386.3052" y="-181.6" font-family="Times,serif" font-size="14.00" fill="#000000">ChunkServer1</text>
<polyline fill="none" stroke="#000000" points="1331.6362,-174.8 1440.9741,-174.8 "/>
<text text-anchor="middle" x="1386.3052" y="-159.6" font-family="Times,serif" font-size="14.00" fill="#000000">存储Chunk数据</text>
</g>
<!-- master_chunk&#45;&gt;ChunkServer1 -->
<g id="edge21" class="edge">
<title>master_chunk&#45;&gt;ChunkServer1</title>
<path fill="none" stroke="#666666" d="M1183.0836,-444.3477C1206.847,-398.6167 1248.2518,-323.9856 1293.1465,-266 1310.2541,-243.9039 1332.1337,-221.586 1350.3895,-204.2444"/>
<polygon fill="#666666" stroke="#666666" points="1353.0709,-206.5279 1357.9671,-197.1322 1348.2804,-201.4239 1353.0709,-206.5279"/>
</g>
<!-- ChunkServer2 -->
<g id="node18" class="node">
<title>ChunkServer2</title>
<polygon fill="none" stroke="#000000" points="1331.6362,-313.2 1331.6362,-362.8 1440.9741,-362.8 1440.9741,-313.2 1331.6362,-313.2"/>
<text text-anchor="middle" x="1386.3052" y="-347.6" font-family="Times,serif" font-size="14.00" fill="#000000">ChunkServer2</text>
<polyline fill="none" stroke="#000000" points="1331.6362,-340.8 1440.9741,-340.8 "/>
<text text-anchor="middle" x="1386.3052" y="-325.6" font-family="Times,serif" font-size="14.00" fill="#000000">存储Chunk数据</text>
</g>
<!-- master_chunk&#45;&gt;ChunkServer2 -->
<g id="edge22" class="edge">
<title>master_chunk&#45;&gt;ChunkServer2</title>
<path fill="none" stroke="#666666" d="M1224.951,-444.5769C1261.4369,-420.4774 1306.6421,-390.6187 1339.9141,-368.642"/>
<polygon fill="#666666" stroke="#666666" points="1342.1181,-371.3809 1348.5332,-362.9489 1338.2601,-365.54 1342.1181,-371.3809"/>
</g>
<!-- ChunkFile1 -->
<g id="node15" class="node">
<title>ChunkFile1</title>
<polygon fill="#d2c6b2" stroke="#000000" points="1553.7485,-86.2 1553.7485,-135.8 1686.4106,-135.8 1686.4106,-86.2 1553.7485,-86.2"/>
<text text-anchor="middle" x="1620.0796" y="-120.6" font-family="Times,serif" font-size="14.00" fill="#000000">ChunkFile1</text>
<polyline fill="none" stroke="#000000" points="1553.7485,-113.8 1686.4106,-113.8 "/>
<text text-anchor="start" x="1561.7485" y="-98.6" font-family="Times,serif" font-size="14.00" fill="#000000">每个chunk文件64M</text>
</g>
<!-- ChunkServer1&#45;&gt;ChunkFile1 -->
<g id="edge14" class="edge">
<title>ChunkServer1&#45;&gt;ChunkFile1</title>
<path fill="none" stroke="#666666" d="M1441.1149,-157.6982C1471.6995,-149.7176 1510.2722,-139.6526 1543.7691,-130.9121"/>
<polygon fill="#666666" stroke="#666666" points="1544.7355,-134.2772 1553.5278,-128.3657 1542.9681,-127.504 1544.7355,-134.2772"/>
</g>
<!-- ChunkFile2 -->
<g id="node16" class="node">
<title>ChunkFile2</title>
<polygon fill="none" stroke="#000000" points="1661.1969,-68 1578.9623,-68 1578.9623,-32 1661.1969,-32 1661.1969,-68"/>
<text text-anchor="middle" x="1620.0796" y="-45.8" font-family="Times,serif" font-size="14.00" fill="#000000">ChunkFile2</text>
</g>
<!-- ChunkServer1&#45;&gt;ChunkFile2 -->
<g id="edge15" class="edge">
<title>ChunkServer1&#45;&gt;ChunkFile2</title>
<path fill="none" stroke="#666666" d="M1413.5224,-147.1118C1438.3724,-125.6351 1476.9931,-95.2702 1515.4639,-77 1532.1066,-69.0962 1551.379,-63.2827 1568.8131,-59.1191"/>
<polygon fill="#666666" stroke="#666666" points="1569.8494,-62.4733 1578.8319,-56.855 1568.3063,-55.6455 1569.8494,-62.4733"/>
</g>
<!-- ChunkFileN -->
<g id="node17" class="node">
<title>ChunkFileN</title>
<polygon fill="none" stroke="#000000" points="1662.8074,-190 1577.3517,-190 1577.3517,-154 1662.8074,-154 1662.8074,-190"/>
<text text-anchor="middle" x="1620.0796" y="-167.8" font-family="Times,serif" font-size="14.00" fill="#000000">ChunkFileN</text>
</g>
<!-- ChunkServer1&#45;&gt;ChunkFileN -->
<g id="edge16" class="edge">
<title>ChunkServer1&#45;&gt;ChunkFileN</title>
<path fill="none" stroke="#666666" d="M1441.1149,-172C1479.1088,-172 1529.43,-172 1567.0342,-172"/>
<polygon fill="#666666" stroke="#666666" points="1567.2826,-175.5001 1577.2825,-172 1567.2825,-168.5001 1567.2826,-175.5001"/>
</g>
<!-- ChunkFile2_1 -->
<g id="node19" class="node">
<title>ChunkFile2_1</title>
<polygon fill="#d2c6b2" stroke="#000000" points="1760.6953,-286.4001 1760.6953,-355.5999 1893.3574,-355.5999 1893.3574,-286.4001 1760.6953,-286.4001"/>
<text text-anchor="middle" x="1827.0264" y="-340.3999" font-family="Times,serif" font-size="14.00" fill="#000000">ChunkFile2_1</text>
<polyline fill="none" stroke="#000000" points="1760.6953,-333.5999 1893.3574,-333.5999 "/>
<text text-anchor="start" x="1768.6953" y="-318.3999" font-family="Times,serif" font-size="14.00" fill="#000000">每个chunk文件64M</text>
<text text-anchor="start" x="1768.6953" y="-298.8" font-family="Times,serif" font-size="14.00" fill="#000000"> chunkfile1副本</text>
</g>
<!-- ChunkFile1&#45;&gt;ChunkFile2_1 -->
<g id="edge19" class="edge">
<title>ChunkFile1&#45;&gt;ChunkFile2_1</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1686.594,-121.7939C1702.9313,-126.8251 1719.4998,-134.1977 1732.6953,-145 1774.453,-179.1842 1800.3062,-236.8709 1814.1572,-276.8386"/>
<polygon fill="#666666" stroke="#666666" points="1810.8451,-277.9704 1817.3408,-286.3404 1817.4825,-275.7465 1810.8451,-277.9704"/>
</g>
<!-- ChunkServer2&#45;&gt;ChunkFile2_1 -->
<g id="edge17" class="edge">
<title>ChunkServer2&#45;&gt;ChunkFile2_1</title>
<path fill="none" stroke="#666666" d="M1441.2215,-323.9133C1464.0216,-318.7478 1490.8543,-313.5447 1515.4639,-311 1611.4991,-301.0695 1636.2826,-305.9039 1732.6953,-311 1738.4899,-311.3063 1744.4763,-311.7177 1750.492,-312.1995"/>
<polygon fill="#666666" stroke="#666666" points="1750.3517,-315.7002 1760.615,-313.0706 1750.9519,-308.726 1750.3517,-315.7002"/>
</g>
<!-- ChunkFile2_N -->
<g id="node20" class="node">
<title>ChunkFile2_N</title>
<polygon fill="none" stroke="#000000" points="1669.8074,-356 1570.3518,-356 1570.3518,-320 1669.8074,-320 1669.8074,-356"/>
<text text-anchor="middle" x="1620.0796" y="-333.8" font-family="Times,serif" font-size="14.00" fill="#000000">ChunkFile2_N</text>
</g>
<!-- ChunkServer2&#45;&gt;ChunkFile2_N -->
<g id="edge18" class="edge">
<title>ChunkServer2&#45;&gt;ChunkFile2_N</title>
<path fill="none" stroke="#666666" d="M1441.1149,-338C1476.8884,-338 1523.5904,-338 1560.316,-338"/>
<polygon fill="#666666" stroke="#666666" points="1560.3926,-341.5001 1570.3926,-338 1560.3925,-334.5001 1560.3926,-341.5001"/>
</g>
<!-- data&#45;&gt;ChunkServer1 -->
<g id="edge26" class="edge">
<title>data&#45;&gt;ChunkServer1</title>
<path fill="none" stroke="#17b978" d="M700.8239,-572.0358C718.7135,-532.2119 751.2837,-470.8507 796.001,-432 956.9977,-292.1248 1205.1538,-216.4707 1321.6825,-186.8981"/>
<polygon fill="#17b978" stroke="#17b978" points="1322.6819,-190.256 1331.5306,-184.4293 1320.9797,-183.4661 1322.6819,-190.256"/>
</g>
</g>
</svg>
