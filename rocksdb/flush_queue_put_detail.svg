<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: flush_queue_put_detail Pages: 1 -->
<svg width="2043pt" height="576pt"
 viewBox="0.00 0.00 2043.17 576.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 572)">
<title>flush_queue_put_detail</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-572 2039.1719,-572 2039.1719,4 -4,4"/>
<g id="clust4" class="cluster">
<title>cluster_MemTableInsert</title>
<polygon fill="none" stroke="#000000" points="117.7568,-16 117.7568,-204 609.7109,-204 609.7109,-16 117.7568,-16"/>
<text text-anchor="middle" x="363.7339" y="-184" font-family="Times,serif" font-size="20.00" fill="#000000">MemTableInserter</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_FlushScheduler</title>
<polygon fill="none" stroke="#000000" points="695.0215,-8 695.0215,-208 1409.6631,-208 1409.6631,-8 695.0215,-8"/>
<text text-anchor="middle" x="1052.3423" y="-188" font-family="Times,serif" font-size="20.00" fill="#000000">FlushScheduler</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="8,-216 8,-560 2027.1719,-560 2027.1719,-216 8,-216"/>
<text text-anchor="middle" x="1017.5859" y="-540" font-family="Times,serif" font-size="20.00" fill="#000000">Dbimpl</text>
</g>
<!-- PreprocessWrite -->
<g id="node1" class="node">
<title>PreprocessWrite</title>
<polygon fill="none" stroke="#000000" points="262.8442,-273 154.9165,-273 154.9165,-237 262.8442,-237 262.8442,-273"/>
<text text-anchor="middle" x="208.8804" y="-250.8" font-family="Times,serif" font-size="14.00" fill="#000000">PreprocessWrite</text>
</g>
<!-- ScheduleFlushes -->
<g id="node2" class="node">
<title>ScheduleFlushes</title>
<polygon fill="none" stroke="#000000" points="637.7109,-263.6001 637.7109,-352.3999 866.4111,-352.3999 866.4111,-263.6001 637.7109,-263.6001"/>
<text text-anchor="middle" x="752.061" y="-337.1999" font-family="Times,serif" font-size="14.00" fill="#000000">ScheduleFlushes</text>
<polyline fill="none" stroke="#000000" points="637.7109,-330.3999 866.4111,-330.3999 "/>
<text text-anchor="start" x="645.7109" y="-315.1999" font-family="Times,serif" font-size="14.00" fill="#000000">生成flush请求放入</text>
<text text-anchor="start" x="645.7109" y="-295.6" font-family="Times,serif" font-size="14.00" fill="#000000"> flush_queue_队列中</text>
<text text-anchor="start" x="645.7109" y="-276" font-family="Times,serif" font-size="14.00" fill="#000000"> 由后台线程将memtable刷到磁盘上</text>
</g>
<!-- PreprocessWrite&#45;&gt;ScheduleFlushes -->
<g id="edge1" class="edge">
<title>PreprocessWrite&#45;&gt;ScheduleFlushes</title>
<path fill="none" stroke="#666666" d="M262.9484,-260.2756C347.279,-268.504 512.3584,-284.6114 627.288,-295.8255"/>
<polygon fill="#666666" stroke="#666666" points="627.2608,-299.3393 637.5534,-296.8271 627.9406,-292.3724 627.2608,-299.3393"/>
</g>
<!-- FlushScheduler -->
<g id="node3" class="node">
<title>FlushScheduler</title>
<polygon fill="none" stroke="#000000" points="938.2827,-105 938.2827,-171 1102.6499,-171 1102.6499,-105 938.2827,-105"/>
<text text-anchor="middle" x="1020.4663" y="-155.8" font-family="Times,serif" font-size="14.00" fill="#000000">flush_scheduler_</text>
<polyline fill="none" stroke="#000000" points="938.2827,-149 1102.6499,-149 "/>
<text text-anchor="start" x="946.2827" y="-133.8" font-family="Times,serif" font-size="14.00" fill="#000000">FlushScheduler</text>
<polyline fill="none" stroke="#000000" points="938.2827,-127 1102.6499,-127 "/>
<text text-anchor="middle" x="1020.4663" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::aomic&lt;Node*&gt; head_</text>
</g>
<!-- ScheduleFlushes&#45;&gt;FlushScheduler -->
<g id="edge2" class="edge">
<title>ScheduleFlushes&#45;&gt;FlushScheduler</title>
<path fill="none" stroke="#b83b5e" d="M821.5982,-263.4295C846.9991,-247.1936 875.9777,-228.7232 902.4111,-212 920.6811,-200.4415 940.5834,-187.9341 958.7515,-176.5491"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="960.8992,-179.3338 967.5163,-171.0594 957.1835,-173.4014 960.8992,-179.3338"/>
</g>
<!-- SelectColumnFamiliesForAtomicFlush -->
<g id="node4" class="node">
<title>SelectColumnFamiliesForAtomicFlush</title>
<polygon fill="none" stroke="#000000" points="902.4111,-224.4001 902.4111,-293.5999 1138.5215,-293.5999 1138.5215,-224.4001 902.4111,-224.4001"/>
<text text-anchor="middle" x="1020.4663" y="-278.3999" font-family="Times,serif" font-size="14.00" fill="#000000">SelectColumnFamiliesForAtomicFlush</text>
<polyline fill="none" stroke="#000000" points="902.4111,-271.5999 1138.5215,-271.5999 "/>
<text text-anchor="start" x="910.4111" y="-256.3999" font-family="Times,serif" font-size="14.00" fill="#000000">如果immutable_db_options_.</text>
<text text-anchor="start" x="910.4111" y="-236.8" font-family="Times,serif" font-size="14.00" fill="#000000">attomic_flush 为true</text>
</g>
<!-- ScheduleFlushes&#45;&gt;SelectColumnFamiliesForAtomicFlush -->
<g id="edge3" class="edge">
<title>ScheduleFlushes&#45;&gt;SelectColumnFamiliesForAtomicFlush</title>
<path fill="none" stroke="#b83b5e" d="M866.6676,-287.0775C875.1676,-285.5257 883.7749,-283.9544 892.3489,-282.3891"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="893.1816,-285.795 902.3905,-280.5559 891.9244,-278.9088 893.1816,-285.795"/>
</g>
<!-- TakeNextColumnFamily -->
<g id="node5" class="node">
<title>TakeNextColumnFamily</title>
<polygon fill="none" stroke="#000000" points="942.4663,-36.2 942.4663,-85.8 1098.4663,-85.8 1098.4663,-36.2 942.4663,-36.2"/>
<text text-anchor="middle" x="1020.4663" y="-70.6" font-family="Times,serif" font-size="14.00" fill="#000000">TakeNextColumnFamily</text>
<polyline fill="none" stroke="#000000" points="942.4663,-63.8 1098.4663,-63.8 "/>
<text text-anchor="middle" x="1020.4663" y="-48.6" font-family="Times,serif" font-size="14.00" fill="#000000">从链表头取出一个节点</text>
</g>
<!-- ScheduleFlushes&#45;&gt;TakeNextColumnFamily -->
<g id="edge4" class="edge">
<title>ScheduleFlushes&#45;&gt;TakeNextColumnFamily</title>
<path fill="none" stroke="#b83b5e" d="M817.9561,-263.5145C835.7288,-248.865 853.5683,-231.3201 866.4111,-212 896.2945,-167.0449 863.9989,-133.9273 902.4111,-96 911.0272,-87.4927 921.6098,-81.0365 932.8668,-76.1404"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="934.4194,-79.2912 942.453,-72.3838 931.8654,-72.7737 934.4194,-79.2912"/>
</g>
<!-- SwitchMemtable -->
<g id="node6" class="node">
<title>SwitchMemtable</title>
<polygon fill="none" stroke="#000000" points="920.1196,-312.4001 920.1196,-381.5999 1120.813,-381.5999 1120.813,-312.4001 920.1196,-312.4001"/>
<text text-anchor="middle" x="1020.4663" y="-366.3999" font-family="Times,serif" font-size="14.00" fill="#000000">SwitchMemtable</text>
<polyline fill="none" stroke="#000000" points="920.1196,-359.5999 1120.813,-359.5999 "/>
<text text-anchor="start" x="928.1196" y="-344.3999" font-family="Times,serif" font-size="14.00" fill="#000000">将memtable加到immtable list中</text>
<text text-anchor="start" x="928.1196" y="-324.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 并创建新的memtable</text>
</g>
<!-- ScheduleFlushes&#45;&gt;SwitchMemtable -->
<g id="edge5" class="edge">
<title>ScheduleFlushes&#45;&gt;SwitchMemtable</title>
<path fill="none" stroke="#b83b5e" d="M866.6676,-324.6526C880.8848,-326.7184 895.4019,-328.8278 909.562,-330.8853"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="909.4009,-334.3986 919.8002,-332.373 910.4075,-327.4713 909.4009,-334.3986"/>
</g>
<!-- GenerateFlushRequest -->
<g id="node7" class="node">
<title>GenerateFlushRequest</title>
<polygon fill="none" stroke="#000000" points="939.3662,-400.4001 939.3662,-483.5999 1101.5664,-483.5999 1101.5664,-400.4001 939.3662,-400.4001"/>
<text text-anchor="middle" x="1020.4663" y="-468.3999" font-family="Times,serif" font-size="14.00" fill="#000000">GenerateFlushRequest</text>
<polyline fill="none" stroke="#000000" points="939.3662,-461.5999 1101.5664,-461.5999 "/>
<text text-anchor="start" x="947.3662" y="-446.3999" font-family="Times,serif" font-size="14.00" fill="#000000">遍历cfds, 获取每个cfd的</text>
<text text-anchor="start" x="947.3662" y="-426.8" font-family="Times,serif" font-size="14.00" fill="#000000"> LastestMemTableID</text>
<text text-anchor="start" x="947.3662" y="-412.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 生成FlushRequest</text>
</g>
<!-- ScheduleFlushes&#45;&gt;GenerateFlushRequest -->
<g id="edge6" class="edge">
<title>ScheduleFlushes&#45;&gt;GenerateFlushRequest</title>
<path fill="none" stroke="#b83b5e" d="M829.3401,-352.5288C852.5853,-365.4136 878.32,-379.1809 902.4111,-391 911.2807,-395.3514 920.6112,-399.7223 929.9784,-403.9759"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="928.7861,-407.2772 939.342,-408.1853 931.6563,-400.8927 928.7861,-407.2772"/>
</g>
<!-- SchedulePendingFlush -->
<g id="node8" class="node">
<title>SchedulePendingFlush</title>
<polygon fill="none" stroke="#000000" points="1360.4237,-460 1215.7608,-460 1215.7608,-424 1360.4237,-424 1360.4237,-460"/>
<text text-anchor="middle" x="1288.0923" y="-437.8" font-family="Times,serif" font-size="14.00" fill="#000000">SchedulePendingFlush</text>
</g>
<!-- ScheduleFlushes&#45;&gt;SchedulePendingFlush -->
<g id="edge7" class="edge">
<title>ScheduleFlushes&#45;&gt;SchedulePendingFlush</title>
<path fill="none" stroke="#b83b5e" d="M773.2763,-352.4426C797.4709,-397.3477 841.6829,-464.0997 902.4111,-493 1015.1429,-546.6485 1166.1553,-496.2345 1241.3943,-464.0643"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1242.8519,-467.2471 1250.6235,-460.0462 1240.0576,-460.829 1242.8519,-467.2471"/>
</g>
<!-- MaybeScheduleFlushOrCompaction -->
<g id="node9" class="node">
<title>MaybeScheduleFlushOrCompaction</title>
<polygon fill="none" stroke="#000000" points="1452.562,-454.4001 1452.562,-523.5999 1673.0864,-523.5999 1673.0864,-454.4001 1452.562,-454.4001"/>
<text text-anchor="middle" x="1562.8242" y="-508.3999" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeScheduleFlushOrCompaction</text>
<polyline fill="none" stroke="#000000" points="1452.562,-501.5999 1673.0864,-501.5999 "/>
<text text-anchor="start" x="1460.562" y="-486.3999" font-family="Times,serif" font-size="14.00" fill="#000000">将memtable flush到磁盘上</text>
<text text-anchor="start" x="1460.562" y="-466.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 触发后台线程压缩</text>
</g>
<!-- ScheduleFlushes&#45;&gt;MaybeScheduleFlushOrCompaction -->
<g id="edge8" class="edge">
<title>ScheduleFlushes&#45;&gt;MaybeScheduleFlushOrCompaction</title>
<path fill="none" stroke="#b83b5e" d="M770.553,-352.6111C793.4487,-401.2577 837.5343,-476.5099 902.4111,-509 1074.4377,-595.1504 1304.534,-559.8287 1442.7655,-525.2253"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1443.7275,-528.5921 1452.5573,-522.7368 1442.0033,-521.8078 1443.7275,-528.5921"/>
</g>
<!-- _Node -->
<g id="node18" class="node">
<title>_Node</title>
<polygon fill="none" stroke="#000000" points="1174.5215,-28 1174.5215,-94 1401.6631,-94 1401.6631,-28 1174.5215,-28"/>
<text text-anchor="middle" x="1288.0923" y="-78.8" font-family="Times,serif" font-size="14.00" fill="#000000">Node</text>
<polyline fill="none" stroke="#000000" points="1174.5215,-72 1401.6631,-72 "/>
<text text-anchor="start" x="1182.5215" y="-56.8" font-family="Times,serif" font-size="14.00" fill="#000000">ColumnFamilyData* column_family;</text>
<polyline fill="none" stroke="#000000" points="1174.5215,-50 1401.6631,-50 "/>
<text text-anchor="start" x="1182.5215" y="-34.8" font-family="Times,serif" font-size="14.00" fill="#000000">Node* next;</text>
</g>
<!-- FlushScheduler&#45;&gt;_Node -->
<g id="edge21" class="edge">
<title>FlushScheduler&#45;&gt;_Node</title>
<path fill="none" stroke="#666666" d="M1102.9467,-114.2692C1122.4368,-108.6616 1143.6394,-102.5612 1164.5083,-96.557"/>
<polygon fill="#666666" stroke="#666666" points="1165.7478,-99.8424 1174.3902,-93.7138 1163.8122,-93.1153 1165.7478,-99.8424"/>
</g>
<!-- TakeNextColumnFamily&#45;&gt;_Node -->
<g id="edge20" class="edge">
<title>TakeNextColumnFamily&#45;&gt;_Node</title>
<path fill="none" stroke="#666666" d="M1098.5943,-61C1119.0646,-61 1141.6511,-61 1163.8822,-61"/>
<polygon fill="#666666" stroke="#666666" points="1164.0627,-64.5001 1174.0627,-61 1164.0626,-57.5001 1164.0627,-64.5001"/>
</g>
<!-- GenerateFlushRequest&#45;&gt;SchedulePendingFlush -->
<g id="edge24" class="edge">
<title>GenerateFlushRequest&#45;&gt;SchedulePendingFlush</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1101.853,-442C1134.7434,-442 1172.6531,-442 1205.6496,-442"/>
<polygon fill="#666666" stroke="#666666" points="1205.7212,-445.5001 1215.7212,-442 1205.7212,-438.5001 1205.7212,-445.5001"/>
</g>
<!-- flush_queue_ -->
<g id="node10" class="node">
<title>flush_queue_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1437.6631,-336.4001 1437.6631,-435.5999 1687.9854,-435.5999 1687.9854,-336.4001 1437.6631,-336.4001"/>
<text text-anchor="middle" x="1562.8242" y="-420.3999" font-family="Times,serif" font-size="14.00" fill="#000000">flush队列: flush_queue_</text>
<polyline fill="none" stroke="#000000" points="1437.6631,-408 1687.9854,-408 "/>
<text text-anchor="start" x="1445.6631" y="-392.8" font-family="Times,serif" font-size="14.00" fill="#000000">放入条件:cfd&#45;&gt;imm()&#45;&gt;IsFlushPending()</text>
<polyline fill="none" stroke="#000000" points="1437.6631,-380.4001 1687.9854,-380.4001 "/>
<text text-anchor="middle" x="1562.8242" y="-365.2001" font-family="Times,serif" font-size="14.00" fill="#000000">std::deque&lt;FlushRequest&gt; flush_queue_;</text>
<polyline fill="none" stroke="#000000" points="1437.6631,-358.4001 1687.9854,-358.4001 "/>
<text text-anchor="middle" x="1562.8242" y="-343.2001" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
</g>
<!-- SchedulePendingFlush&#45;&gt;flush_queue_ -->
<g id="edge9" class="edge">
<title>SchedulePendingFlush&#45;&gt;flush_queue_</title>
<path fill="none" stroke="#666666" d="M1360.2749,-427.2867C1381.002,-423.0617 1404.3068,-418.3114 1427.5325,-413.5772"/>
<polygon fill="#666666" stroke="#666666" points="1428.3743,-416.9777 1437.4737,-411.5508 1426.9762,-410.1187 1428.3743,-416.9777"/>
</g>
<!-- BackgroundFlush -->
<g id="node20" class="node">
<title>BackgroundFlush</title>
<polygon fill="none" stroke="#000000" points="1767.3457,-414.8002 1767.3457,-523.1998 1975.8115,-523.1998 1975.8115,-414.8002 1767.3457,-414.8002"/>
<text text-anchor="middle" x="1871.5786" y="-507.9998" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundFlush</text>
<polyline fill="none" stroke="#000000" points="1767.3457,-501.1998 1975.8115,-501.1998 "/>
<text text-anchor="start" x="1775.3457" y="-485.9998" font-family="Times,serif" font-size="14.00" fill="#000000">遍历flush_queue_</text>
<text text-anchor="start" x="1775.3457" y="-466.3999" font-family="Times,serif" font-size="14.00" fill="#000000"> 将需要刷新的columnfamilyData</text>
<text text-anchor="start" x="1775.3457" y="-446.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 的memtable</text>
<text text-anchor="start" x="1775.3457" y="-427.2001" font-family="Times,serif" font-size="14.00" fill="#000000"> 刷到磁盘上</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;BackgroundFlush -->
<g id="edge25" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;BackgroundFlush</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1673.4196,-481.836C1700.6198,-480.0741 1729.7969,-478.1841 1757.173,-476.4108"/>
<polygon fill="#666666" stroke="#666666" points="1757.4176,-479.9024 1767.1704,-475.7632 1756.965,-472.917 1757.4176,-479.9024"/>
</g>
<!-- FlushRequest -->
<g id="node19" class="node">
<title>FlushRequest</title>
<polygon fill="#95e1d3" stroke="#000000" points="1723.9854,-282 1723.9854,-396 2019.1719,-396 2019.1719,-282 1723.9854,-282"/>
<text text-anchor="middle" x="1871.5786" y="-380.8" font-family="Times,serif" font-size="14.00" fill="#000000">FlushRequest</text>
<polyline fill="none" stroke="#000000" points="1723.9854,-374 2019.1719,-374 "/>
<text text-anchor="start" x="1731.9854" y="-358.8" font-family="Times,serif" font-size="14.00" fill="#000000">A flush request specifies</text>
<text text-anchor="start" x="1731.9854" y="-344.8" font-family="Times,serif" font-size="14.00" fill="#000000"> the column families to flush</text>
<text text-anchor="start" x="1731.9854" y="-330.8" font-family="Times,serif" font-size="14.00" fill="#000000"> as well as the largest memtable</text>
<text text-anchor="start" x="1731.9854" y="-316.8" font-family="Times,serif" font-size="14.00" fill="#000000"> id to persist for each column family</text>
<text text-anchor="start" x="1731.9854" y="-302.8" font-family="Times,serif" font-size="14.00" fill="#000000"> typedef std::vector&lt;std::pair</text>
<text text-anchor="middle" x="1871.5786" y="-288.8" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;ColumnFamilyData*, uint64_t&gt;&gt; FlushRequest;</text>
</g>
<!-- flush_queue_&#45;&gt;FlushRequest -->
<g id="edge22" class="edge">
<title>flush_queue_:FlushRequest&#45;&gt;FlushRequest</title>
<path fill="none" stroke="#666666" d="M1687.8242,-369C1696.2462,-369 1704.8572,-368.6892 1713.5316,-368.131"/>
<polygon fill="#666666" stroke="#666666" points="1714.026,-371.6039 1723.7362,-367.3658 1713.5025,-364.6234 1714.026,-371.6039"/>
</g>
<!-- flush_queue_&#45;&gt;BackgroundFlush -->
<g id="edge23" class="edge">
<title>flush_queue_&#45;&gt;BackgroundFlush</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1688.4065,-419.7593C1711.2393,-425.8973 1734.9435,-432.2695 1757.4244,-438.3128"/>
<polygon fill="#666666" stroke="#666666" points="1756.7517,-441.7562 1767.3175,-440.9723 1758.569,-434.9962 1756.7517,-441.7562"/>
</g>
<!-- WriteBatchInternal_Iterate -->
<g id="node11" class="node">
<title>WriteBatchInternal_Iterate</title>
<polygon fill="none" stroke="#000000" points="125.7568,-79.4001 125.7568,-148.5999 292.0039,-148.5999 292.0039,-79.4001 125.7568,-79.4001"/>
<text text-anchor="middle" x="208.8804" y="-133.3999" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchInternal_Iterate</text>
<polyline fill="none" stroke="#000000" points="125.7568,-126.5999 292.0039,-126.5999 "/>
<text text-anchor="start" x="133.7568" y="-111.3999" font-family="Times,serif" font-size="14.00" fill="#000000">迭代遍历WAL日志内容</text>
<text text-anchor="start" x="133.7568" y="-91.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 插入memtable中</text>
</g>
<!-- PutCFImpl -->
<g id="node12" class="node">
<title>PutCFImpl</title>
<polygon fill="none" stroke="#000000" points="406.7318,-60 328.2487,-60 328.2487,-24 406.7318,-24 406.7318,-60"/>
<text text-anchor="middle" x="367.4902" y="-37.8" font-family="Times,serif" font-size="14.00" fill="#000000">PutCFImpl</text>
</g>
<!-- WriteBatchInternal_Iterate&#45;&gt;PutCFImpl -->
<g id="edge10" class="edge">
<title>WriteBatchInternal_Iterate&#45;&gt;PutCFImpl</title>
<path fill="none" stroke="#666666" d="M285.3977,-79.2654C296.9165,-74.0365 308.5138,-68.772 319.216,-63.9138"/>
<polygon fill="#666666" stroke="#666666" points="320.707,-67.0808 328.366,-59.7602 317.8135,-60.7068 320.707,-67.0808"/>
</g>
<!-- DeleteImpl -->
<g id="node13" class="node">
<title>DeleteImpl</title>
<polygon fill="none" stroke="#000000" points="406.9629,-114 328.0176,-114 328.0176,-78 406.9629,-78 406.9629,-114"/>
<text text-anchor="middle" x="367.4902" y="-91.8" font-family="Times,serif" font-size="14.00" fill="#000000">DeleteImpl</text>
</g>
<!-- WriteBatchInternal_Iterate&#45;&gt;DeleteImpl -->
<g id="edge11" class="edge">
<title>WriteBatchInternal_Iterate&#45;&gt;DeleteImpl</title>
<path fill="none" stroke="#666666" d="M292.3657,-104.5256C301.0765,-103.537 309.7199,-102.5561 317.874,-101.6308"/>
<polygon fill="#666666" stroke="#666666" points="318.3674,-105.0973 327.9089,-100.4919 317.578,-98.142 318.3674,-105.0973"/>
</g>
<!-- MergeCF -->
<g id="node14" class="node">
<title>MergeCF</title>
<polygon fill="none" stroke="#000000" points="402.4075,-168 332.573,-168 332.573,-132 402.4075,-132 402.4075,-168"/>
<text text-anchor="middle" x="367.4902" y="-145.8" font-family="Times,serif" font-size="14.00" fill="#000000">MergeCF</text>
</g>
<!-- WriteBatchInternal_Iterate&#45;&gt;MergeCF -->
<g id="edge12" class="edge">
<title>WriteBatchInternal_Iterate&#45;&gt;MergeCF</title>
<path fill="none" stroke="#666666" d="M292.3657,-132.9488C302.7791,-135.3124 313.096,-137.654 322.5958,-139.8102"/>
<polygon fill="#666666" stroke="#666666" points="322.0225,-143.2691 332.5492,-142.0694 323.572,-136.4427 322.0225,-143.2691"/>
</g>
<!-- CheckMemtableFull -->
<g id="node15" class="node">
<title>CheckMemtableFull</title>
<polygon fill="none" stroke="#000000" points="442.9766,-29.4001 442.9766,-98.5999 601.7109,-98.5999 601.7109,-29.4001 442.9766,-29.4001"/>
<text text-anchor="middle" x="522.3438" y="-83.3999" font-family="Times,serif" font-size="14.00" fill="#000000">CheckMemtableFull</text>
<polyline fill="none" stroke="#000000" points="442.9766,-76.5999 601.7109,-76.5999 "/>
<text text-anchor="start" x="450.9766" y="-61.3999" font-family="Times,serif" font-size="14.00" fill="#000000">如果memtable满了，</text>
<text text-anchor="start" x="450.9766" y="-41.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 需要flush，则放入队列</text>
</g>
<!-- PutCFImpl&#45;&gt;CheckMemtableFull -->
<g id="edge13" class="edge">
<title>PutCFImpl&#45;&gt;CheckMemtableFull</title>
<path fill="none" stroke="#666666" d="M406.967,-47.6085C414.975,-48.7461 423.7026,-49.9861 432.6545,-51.2579"/>
<polygon fill="#666666" stroke="#666666" points="432.4376,-54.7621 442.8305,-52.7036 433.4222,-47.8317 432.4376,-54.7621"/>
</g>
<!-- DeleteImpl&#45;&gt;CheckMemtableFull -->
<g id="edge14" class="edge">
<title>DeleteImpl&#45;&gt;CheckMemtableFull</title>
<path fill="none" stroke="#666666" d="M406.967,-87.8423C415.0611,-86.1696 423.8903,-84.3451 432.9434,-82.4743"/>
<polygon fill="#666666" stroke="#666666" points="433.7457,-85.8825 442.8305,-80.4312 432.3291,-79.0274 433.7457,-85.8825"/>
</g>
<!-- MergeCF&#45;&gt;CheckMemtableFull -->
<g id="edge15" class="edge">
<title>MergeCF&#45;&gt;CheckMemtableFull</title>
<path fill="none" stroke="#666666" d="M399.9526,-131.9716C414.7551,-123.7508 432.9131,-113.6665 450.6657,-103.8074"/>
<polygon fill="#666666" stroke="#666666" points="452.8494,-106.5982 459.8924,-98.6832 449.4508,-100.4786 452.8494,-106.5982"/>
</g>
<!-- ScheduleWork -->
<g id="node17" class="node">
<title>ScheduleWork</title>
<polygon fill="none" stroke="#000000" points="801.1402,-79 702.9819,-79 702.9819,-43 801.1402,-43 801.1402,-79"/>
<text text-anchor="middle" x="752.061" y="-56.8" font-family="Times,serif" font-size="14.00" fill="#000000">ScheduleWork</text>
</g>
<!-- CheckMemtableFull&#45;&gt;ScheduleWork -->
<g id="edge18" class="edge">
<title>CheckMemtableFull&#45;&gt;ScheduleWork</title>
<path fill="none" stroke="#666666" d="M601.7211,-62.9634C631.5046,-62.5744 664.8176,-62.1394 692.5014,-61.7778"/>
<polygon fill="#666666" stroke="#666666" points="692.8633,-65.2735 702.8167,-61.6431 692.7718,-58.2741 692.8633,-65.2735"/>
</g>
<!-- WriteImpl -->
<g id="node16" class="node">
<title>WriteImpl</title>
<polygon fill="none" stroke="#000000" points="89.6357,-260 16.1212,-260 16.1212,-224 89.6357,-224 89.6357,-260"/>
<text text-anchor="middle" x="52.8784" y="-237.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl</text>
</g>
<!-- WriteImpl&#45;&gt;PreprocessWrite -->
<g id="edge16" class="edge">
<title>WriteImpl&#45;&gt;PreprocessWrite</title>
<path fill="none" stroke="#666666" d="M89.8487,-245.0808C106.1937,-246.4429 125.8989,-248.085 144.5314,-249.6377"/>
<polygon fill="#666666" stroke="#666666" points="144.4882,-253.1461 154.7443,-250.4887 145.0695,-246.1703 144.4882,-253.1461"/>
</g>
<!-- WriteImpl&#45;&gt;WriteBatchInternal_Iterate -->
<g id="edge17" class="edge">
<title>WriteImpl&#45;&gt;WriteBatchInternal_Iterate</title>
<path fill="none" stroke="#666666" d="M74.8988,-223.9322C96.5481,-206.1689 130.3578,-178.4279 158.5964,-155.2581"/>
<polygon fill="#666666" stroke="#666666" points="160.888,-157.9053 166.3987,-148.8563 156.4478,-152.4937 160.888,-157.9053"/>
</g>
<!-- ScheduleWork&#45;&gt;TakeNextColumnFamily -->
<g id="edge26" class="edge">
<title>ScheduleWork&#45;&gt;TakeNextColumnFamily</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M801.2907,-61C837.8659,-61 888.7457,-61 932.2769,-61"/>
<polygon fill="#666666" stroke="#666666" points="932.3055,-64.5001 942.3055,-61 932.3055,-57.5001 932.3055,-64.5001"/>
</g>
<!-- ScheduleWork&#45;&gt;_Node -->
<g id="edge19" class="edge">
<title>ScheduleWork&#45;&gt;_Node</title>
<path fill="none" stroke="#666666" d="M801.3633,-46.9394C830.4867,-39.3677 868.2349,-30.8161 902.4111,-27 1006.7009,-15.355 1034.2382,-15.2966 1138.5215,-27 1146.8906,-27.9392 1155.4745,-29.1653 1164.0924,-30.593"/>
<polygon fill="#666666" stroke="#666666" points="1163.7616,-34.088 1174.214,-32.3564 1164.9631,-27.1918 1163.7616,-34.088"/>
</g>
</g>
</svg>
