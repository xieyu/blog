<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: level_compactoin_picker Pages: 1 -->
<svg width="3820pt" height="1644pt"
 viewBox="0.00 0.00 3820.00 1644.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1640)">
<title>level_compactoin_picker</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1640 3816,-1640 3816,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_FileMetadata</title>
<polygon fill="none" stroke="#000000" points="2966.5,-8 2966.5,-90 3804,-90 3804,-8 2966.5,-8"/>
<text text-anchor="middle" x="3385.25" y="-70" font-family="Times,serif" font-size="20.00" fill="#000000">FileMetadata</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_VersionStorageInfo</title>
<polygon fill="none" stroke="#000000" points="569.5,-98 569.5,-828 3676,-828 3676,-98 569.5,-98"/>
<text text-anchor="middle" x="2122.75" y="-808" font-family="Times,serif" font-size="20.00" fill="#000000">VersionStorageInfo</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_Compaction</title>
<polygon fill="none" stroke="#000000" points="2905,-935 2905,-1135 3212,-1135 3212,-935 2905,-935"/>
<text text-anchor="middle" x="3058.5" y="-1115" font-family="Times,serif" font-size="20.00" fill="#000000">Compaction</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_CompactionPicker</title>
<polygon fill="none" stroke="#000000" points="1069.5,-836 1069.5,-1140 2844.5,-1140 2844.5,-836 1069.5,-836"/>
<text text-anchor="middle" x="1957" y="-1120" font-family="Times,serif" font-size="20.00" fill="#000000">CompactionPicker</text>
</g>
<g id="clust20" class="cluster">
<title>cluster_LevelCompactionBuilder</title>
<polygon fill="none" stroke="#000000" points="229,-1148 229,-1628 2530,-1628 2530,-1148 229,-1148"/>
<text text-anchor="middle" x="1379.5" y="-1608" font-family="Times,serif" font-size="20.00" fill="#000000">LevelCompactionBuilder</text>
</g>
<g id="clust33" class="cluster">
<title>cluster_LevelCompactionPicker</title>
<polygon fill="none" stroke="#000000" points="0,-1456 0,-1538 209,-1538 209,-1456 0,-1456"/>
<text text-anchor="middle" x="104.5" y="-1518" font-family="Times,serif" font-size="20.00" fill="#000000">LevelCompactionPicker</text>
</g>
<!-- FileMetaData -->
<g id="node1" class="node">
<title>FileMetaData</title>
<polygon fill="none" stroke="#000000" points="3796,-52 3704,-52 3704,-16 3796,-16 3796,-52"/>
<text text-anchor="middle" x="3750" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">FileMetaData</text>
</g>
<!-- TryGetOldestAncesterTime -->
<g id="node2" class="node">
<title>TryGetOldestAncesterTime</title>
<polygon fill="none" stroke="#000000" points="3142.5,-52 2974.5,-52 2974.5,-16 3142.5,-16 3142.5,-52"/>
<text text-anchor="middle" x="3058.5" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">TryGetOldestAncesterTime</text>
</g>
<!-- GetOverlappingInputs -->
<g id="node3" class="node">
<title>GetOverlappingInputs</title>
<polygon fill="none" stroke="#000000" points="2124,-673 2124,-787 2321,-787 2321,-673 2124,-673"/>
<text text-anchor="start" x="2132" y="-771.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetOverlappingInputs</text>
<polyline fill="none" stroke="#000000" points="2124,-764 2321,-764 "/>
<text text-anchor="start" x="2132" y="-748.8" font-family="Times,serif" font-size="14.00" fill="#000000">搜索指定level中和</text>
<text text-anchor="start" x="2132" y="-733.8" font-family="Times,serif" font-size="14.00" fill="#000000"> KeyRange (begin, end)</text>
<text text-anchor="start" x="2132" y="-718.8" font-family="Times,serif" font-size="14.00" fill="#000000"> overlap的vector&lt;FileMetadata&gt;</text>
<polyline fill="none" stroke="#000000" points="2124,-711 2321,-711 "/>
<text text-anchor="start" x="2132" y="-695.8" font-family="Times,serif" font-size="14.00" fill="#000000">分别处理level0</text>
<text text-anchor="start" x="2132" y="-680.8" font-family="Times,serif" font-size="14.00" fill="#000000"> level&gt;0情况</text>
</g>
<!-- switch_level -->
<g id="node4" class="node">
<title>switch_level</title>
<polygon fill="none" stroke="#000000" points="2364.5,-135.5 2364.5,-234.5 2543.5,-234.5 2543.5,-135.5 2364.5,-135.5"/>
<text text-anchor="middle" x="2454" y="-219.3" font-family="Times,serif" font-size="14.00" fill="#000000">switch</text>
<polyline fill="none" stroke="#000000" points="2364.5,-211.5 2543.5,-211.5 "/>
<text text-anchor="middle" x="2454" y="-196.3" font-family="Times,serif" font-size="14.00" fill="#000000">level &gt; 0 使用二分查找</text>
<polyline fill="none" stroke="#000000" points="2364.5,-188.5 2543.5,-188.5 "/>
<text text-anchor="start" x="2372.5" y="-173.3" font-family="Times,serif" font-size="14.00" fill="#000000">level == 0 迭代遍历查找</text>
<text text-anchor="start" x="2372.5" y="-158.3" font-family="Times,serif" font-size="14.00" fill="#000000"> level0由于文件之间overlap</text>
<text text-anchor="start" x="2372.5" y="-143.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 所以要特殊处理</text>
</g>
<!-- GetOverlappingInputs&#45;&gt;switch_level -->
<g id="edge1" class="edge">
<title>GetOverlappingInputs&#45;&gt;switch_level</title>
<path fill="none" stroke="#666666" d="M2231.1342,-672.7607C2246.2443,-584.9182 2283.1587,-413.7458 2357,-287 2366.2377,-271.1438 2378.4023,-255.8133 2390.9819,-242.0645"/>
<polygon fill="#666666" stroke="#666666" points="2393.702,-244.2808 2397.9973,-234.5957 2388.5998,-239.4884 2393.702,-244.2808"/>
</g>
<!-- GetOverlappingInputsRangeBinarySearch -->
<g id="node5" class="node">
<title>GetOverlappingInputsRangeBinarySearch</title>
<polygon fill="none" stroke="#000000" points="2609.5,-181 2609.5,-257 2854.5,-257 2854.5,-181 2609.5,-181"/>
<text text-anchor="middle" x="2732" y="-241.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetOverlappingInputsRangeBinarySearch</text>
<polyline fill="none" stroke="#000000" points="2609.5,-234 2854.5,-234 "/>
<text text-anchor="start" x="2617.5" y="-218.8" font-family="Times,serif" font-size="14.00" fill="#000000">搜索指定level中和</text>
<text text-anchor="start" x="2617.5" y="-203.8" font-family="Times,serif" font-size="14.00" fill="#000000"> KeyRange (begin, end)</text>
<text text-anchor="start" x="2617.5" y="-188.8" font-family="Times,serif" font-size="14.00" fill="#000000"> overlap的vector&lt;FileMetadata&gt;</text>
</g>
<!-- switch_level&#45;&gt;GetOverlappingInputsRangeBinarySearch -->
<g id="edge2" class="edge">
<title>switch_level:case_1&#45;&gt;GetOverlappingInputsRangeBinarySearch</title>
<path fill="none" stroke="#666666" d="M2544,-200C2561.8532,-200 2580.6119,-200.8587 2599.0843,-202.2109"/>
<polygon fill="#666666" stroke="#666666" points="2599.0673,-205.7202 2609.3098,-203.0106 2599.6132,-198.7415 2599.0673,-205.7202"/>
</g>
<!-- level_files_brief_ -->
<g id="node6" class="node">
<title>level_files_brief_</title>
<polygon fill="#95e1d3" stroke="#000000" points="2941,-107 2941,-183 3176,-183 3176,-107 2941,-107"/>
<text text-anchor="middle" x="3058.5" y="-167.8" font-family="Times,serif" font-size="14.00" fill="#000000">level_files_brief_</text>
<polyline fill="none" stroke="#000000" points="2941,-160 3176,-160 "/>
<text text-anchor="start" x="2949" y="-144.8" font-family="Times,serif" font-size="14.00" fill="#000000">autovector&lt;ROCKSDB_NAMESPACE</text>
<text text-anchor="start" x="2949" y="-129.8" font-family="Times,serif" font-size="14.00" fill="#000000">::LevelFilesBrief&gt;</text>
<text text-anchor="start" x="2949" y="-114.8" font-family="Times,serif" font-size="14.00" fill="#000000"> level_files_brief_</text>
</g>
<!-- switch_level&#45;&gt;level_files_brief_ -->
<g id="edge3" class="edge">
<title>switch_level:case_2&#45;&gt;level_files_brief_</title>
<path fill="none" stroke="#666666" d="M2544,-162C2571.6629,-162 2561.5648,-127.8758 2587,-117 2705.5097,-66.3266 2748.4884,-107.1455 2877,-117 2894.4347,-118.3369 2912.7294,-120.3861 2930.7153,-122.781"/>
<polygon fill="#666666" stroke="#666666" points="2930.2857,-126.2548 2940.6683,-124.1447 2931.236,-119.3196 2930.2857,-126.2548"/>
</g>
<!-- CompareWithoutTimestamp -->
<g id="node7" class="node">
<title>CompareWithoutTimestamp</title>
<polygon fill="none" stroke="#000000" points="2819,-162 2645,-162 2645,-126 2819,-126 2819,-162"/>
<text text-anchor="middle" x="2732" y="-140.3" font-family="Times,serif" font-size="14.00" fill="#000000">CompareWithoutTimestamp</text>
</g>
<!-- switch_level&#45;&gt;CompareWithoutTimestamp -->
<g id="edge4" class="edge">
<title>switch_level:case_2&#45;&gt;CompareWithoutTimestamp</title>
<path fill="none" stroke="#666666" d="M2544,-162C2573.4767,-162 2605.4352,-159.7802 2634.4973,-156.8996"/>
<polygon fill="#666666" stroke="#666666" points="2635.0578,-160.3605 2644.6473,-155.8558 2634.3416,-153.3973 2635.0578,-160.3605"/>
</g>
<!-- GetOverlappingInputsRangeBinarySearch&#45;&gt;level_files_brief_ -->
<g id="edge6" class="edge">
<title>GetOverlappingInputsRangeBinarySearch&#45;&gt;level_files_brief_</title>
<path fill="none" stroke="#666666" d="M2854.5055,-191.2346C2879.5054,-185.5685 2905.8671,-179.5937 2931.0354,-173.8894"/>
<polygon fill="#666666" stroke="#666666" points="2932.0101,-177.2573 2940.9891,-171.6334 2930.4628,-170.4305 2932.0101,-177.2573"/>
</g>
<!-- lower_bound -->
<g id="node9" class="node">
<title>lower_bound</title>
<polygon fill="none" stroke="#000000" points="2986,-202.5 2986,-263.5 3131,-263.5 3131,-202.5 2986,-202.5"/>
<text text-anchor="middle" x="3058.5" y="-248.3" font-family="Times,serif" font-size="14.00" fill="#000000">lower_bound</text>
<polyline fill="none" stroke="#000000" points="2986,-240.5 3131,-240.5 "/>
<text text-anchor="start" x="2994" y="-225.3" font-family="Times,serif" font-size="14.00" fill="#000000">使用标准库二分查找</text>
<text text-anchor="start" x="2994" y="-210.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 定位到start_index</text>
</g>
<!-- GetOverlappingInputsRangeBinarySearch&#45;&gt;lower_bound -->
<g id="edge7" class="edge">
<title>GetOverlappingInputsRangeBinarySearch&#45;&gt;lower_bound</title>
<path fill="none" stroke="#666666" d="M2854.5055,-224.2529C2894.8627,-225.9834 2938.7689,-227.866 2975.4742,-229.4399"/>
<polygon fill="#666666" stroke="#666666" points="2975.4863,-232.9436 2985.6271,-229.8753 2975.7862,-225.95 2975.4863,-232.9436"/>
</g>
<!-- upper_bound -->
<g id="node10" class="node">
<title>upper_bound</title>
<polygon fill="none" stroke="#000000" points="2986,-336.5 2986,-397.5 3131,-397.5 3131,-336.5 2986,-336.5"/>
<text text-anchor="middle" x="3058.5" y="-382.3" font-family="Times,serif" font-size="14.00" fill="#000000">upper_bound</text>
<polyline fill="none" stroke="#000000" points="2986,-374.5 3131,-374.5 "/>
<text text-anchor="start" x="2994" y="-359.3" font-family="Times,serif" font-size="14.00" fill="#000000">使用标准库二分查找</text>
<text text-anchor="start" x="2994" y="-344.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 定位到end_index</text>
</g>
<!-- GetOverlappingInputsRangeBinarySearch&#45;&gt;upper_bound -->
<g id="edge8" class="edge">
<title>GetOverlappingInputsRangeBinarySearch&#45;&gt;upper_bound</title>
<path fill="none" stroke="#666666" d="M2854.6202,-255.8077C2862.6139,-260.5822 2870.18,-265.9558 2877,-272 2897.5282,-290.1931 2883.6267,-309.8076 2905,-327 2925.1752,-343.2287 2951.2357,-352.9323 2976.1372,-358.7146"/>
<polygon fill="#666666" stroke="#666666" points="2975.4655,-362.15 2985.976,-360.8162 2976.9277,-355.3044 2975.4655,-362.15"/>
</g>
<!-- sstableKeyCompare -->
<g id="node11" class="node">
<title>sstableKeyCompare</title>
<polygon fill="none" stroke="#000000" points="3121.5,-318 2995.5,-318 2995.5,-282 3121.5,-282 3121.5,-318"/>
<text text-anchor="middle" x="3058.5" y="-296.3" font-family="Times,serif" font-size="14.00" fill="#000000">sstableKeyCompare</text>
</g>
<!-- GetOverlappingInputsRangeBinarySearch&#45;&gt;sstableKeyCompare -->
<g id="edge9" class="edge">
<title>GetOverlappingInputsRangeBinarySearch&#45;&gt;sstableKeyCompare</title>
<path fill="none" stroke="#666666" d="M2846.8148,-257.0977C2866.1223,-262.8525 2886.0438,-268.3945 2905,-273 2930.9977,-279.3162 2959.8114,-284.7811 2985.3877,-289.1101"/>
<polygon fill="#666666" stroke="#666666" points="2984.9489,-292.5851 2995.3876,-290.7733 2986.0974,-285.6799 2984.9489,-292.5851"/>
</g>
<!-- LevelFilesBrief -->
<g id="node12" class="node">
<title>LevelFilesBrief</title>
<polygon fill="#95e1d3" stroke="#000000" points="3269.5,-180.5 3269.5,-249.5 3422.5,-249.5 3422.5,-180.5 3269.5,-180.5"/>
<text text-anchor="middle" x="3346" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#000000">LevelFilesBrief</text>
<polyline fill="none" stroke="#000000" points="3269.5,-226.5 3422.5,-226.5 "/>
<text text-anchor="start" x="3277.5" y="-211.3" font-family="Times,serif" font-size="14.00" fill="#000000">size_t num_files;</text>
<polyline fill="none" stroke="#000000" points="3269.5,-203.5 3422.5,-203.5 "/>
<text text-anchor="start" x="3277.5" y="-188.3" font-family="Times,serif" font-size="14.00" fill="#000000">FdWithKeyRange* files;</text>
</g>
<!-- level_files_brief_&#45;&gt;LevelFilesBrief -->
<g id="edge12" class="edge">
<title>level_files_brief_&#45;&gt;LevelFilesBrief</title>
<path fill="none" stroke="#666666" d="M3176.2668,-173.6737C3204.0429,-180.4365 3233.1578,-187.5254 3259.2754,-193.8844"/>
<polygon fill="#666666" stroke="#666666" points="3258.5853,-197.3186 3269.1294,-196.2837 3260.2413,-190.5173 3258.5853,-197.3186"/>
</g>
<!-- GetCleanInputsWithinInterval -->
<g id="node8" class="node">
<title>GetCleanInputsWithinInterval</title>
<polygon fill="none" stroke="#000000" points="2545,-332 2363,-332 2363,-296 2545,-296 2545,-332"/>
<text text-anchor="middle" x="2454" y="-310.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetCleanInputsWithinInterval</text>
</g>
<!-- GetCleanInputsWithinInterval&#45;&gt;GetOverlappingInputsRangeBinarySearch -->
<g id="edge5" class="edge">
<title>GetCleanInputsWithinInterval&#45;&gt;GetOverlappingInputsRangeBinarySearch</title>
<path fill="none" stroke="#666666" d="M2506.944,-295.9076C2536.4454,-285.8262 2574.4732,-272.8311 2610.8439,-260.4023"/>
<polygon fill="#666666" stroke="#666666" points="2612.2164,-263.632 2620.5473,-257.0863 2609.9528,-257.0081 2612.2164,-263.632"/>
</g>
<!-- lower_bound&#45;&gt;LevelFilesBrief -->
<g id="edge10" class="edge">
<title>lower_bound&#45;&gt;LevelFilesBrief</title>
<path fill="none" stroke="#666666" d="M3131.0484,-228.4578C3169.9995,-226.0192 3218.2816,-222.9963 3259.2131,-220.4336"/>
<polygon fill="#666666" stroke="#666666" points="3259.6891,-223.9108 3269.4509,-219.7926 3259.2517,-216.9244 3259.6891,-223.9108"/>
</g>
<!-- upper_bound&#45;&gt;LevelFilesBrief -->
<g id="edge11" class="edge">
<title>upper_bound&#45;&gt;LevelFilesBrief</title>
<path fill="none" stroke="#666666" d="M3131.2016,-354.952C3157.5858,-348.8231 3187.0269,-339.8607 3212,-327 3246.9326,-309.0104 3280.8371,-280.5327 3305.8024,-256.7958"/>
<polygon fill="#666666" stroke="#666666" points="3308.4931,-259.0629 3313.2545,-249.5982 3303.6301,-254.0279 3308.4931,-259.0629"/>
</g>
<!-- FdWithKeyRange -->
<g id="node13" class="node">
<title>FdWithKeyRange</title>
<polygon fill="#95e1d3" stroke="#000000" points="3488,-140.5 3488,-255.5 3668,-255.5 3668,-140.5 3488,-140.5"/>
<text text-anchor="middle" x="3578" y="-240.3" font-family="Times,serif" font-size="14.00" fill="#000000">FdWithKeyRange</text>
<polyline fill="none" stroke="#000000" points="3488,-232.5 3668,-232.5 "/>
<text text-anchor="start" x="3496" y="-217.3" font-family="Times,serif" font-size="14.00" fill="#000000">FileDescriptor fd;</text>
<polyline fill="none" stroke="#000000" points="3488,-209.5 3668,-209.5 "/>
<text text-anchor="start" x="3496" y="-194.3" font-family="Times,serif" font-size="14.00" fill="#000000">FileMetaData* file_metadata;</text>
<polyline fill="none" stroke="#000000" points="3488,-186.5 3668,-186.5 "/>
<text text-anchor="start" x="3496" y="-171.3" font-family="Times,serif" font-size="14.00" fill="#000000">Slice smallest_key;</text>
<polyline fill="none" stroke="#000000" points="3488,-163.5 3668,-163.5 "/>
<text text-anchor="start" x="3496" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#000000">Slice largest_key;</text>
</g>
<!-- LevelFilesBrief&#45;&gt;FdWithKeyRange -->
<g id="edge13" class="edge">
<title>LevelFilesBrief&#45;&gt;FdWithKeyRange</title>
<path fill="none" stroke="#666666" d="M3422.6084,-209.3865C3440.2037,-208.0971 3459.1711,-206.7073 3477.6032,-205.3567"/>
<polygon fill="#666666" stroke="#666666" points="3478.0586,-208.8328 3487.776,-204.6112 3477.547,-201.8515 3478.0586,-208.8328"/>
</g>
<!-- FdWithKeyRange&#45;&gt;FileMetaData -->
<g id="edge14" class="edge">
<title>FdWithKeyRange&#45;&gt;FileMetaData</title>
<path fill="none" stroke="#666666" d="M3668.2349,-142.9078C3670.9077,-140.6464 3673.5042,-138.342 3676,-136 3699.7309,-113.7311 3720.8681,-82.9034 3734.4137,-60.9817"/>
<polygon fill="#666666" stroke="#666666" points="3737.5555,-62.5501 3739.7395,-52.1829 3731.5671,-58.9254 3737.5555,-62.5501"/>
</g>
<!-- ComputeCompactionScore -->
<g id="node14" class="node">
<title>ComputeCompactionScore</title>
<polygon fill="none" stroke="#000000" points="2536,-613 2372,-613 2372,-577 2536,-577 2536,-613"/>
<text text-anchor="middle" x="2454" y="-591.3" font-family="Times,serif" font-size="14.00" fill="#000000">ComputeCompactionScore</text>
</g>
<!-- files_ -->
<g id="node15" class="node">
<title>files_</title>
<polygon fill="#95e1d3" stroke="#000000" points="3240,-584 3240,-630 3452,-630 3452,-584 3240,-584"/>
<text text-anchor="middle" x="3346" y="-614.8" font-family="Times,serif" font-size="14.00" fill="#000000">files_</text>
<polyline fill="none" stroke="#000000" points="3240,-607 3452,-607 "/>
<text text-anchor="middle" x="3346" y="-591.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::vector&lt;FileMetaData*&gt;* files_</text>
</g>
<!-- ComputeCompactionScore&#45;&gt;files_ -->
<g id="edge15" class="edge">
<title>ComputeCompactionScore&#45;&gt;files_</title>
<path fill="none" stroke="#666666" d="M2493.5074,-613.0973C2512.2551,-622.9023 2534.1782,-636.2437 2551,-652 2571.7828,-671.4664 2561.8358,-691.6723 2587,-705 2643.9501,-735.1624 2812.7612,-710.1443 2877,-705 3027.3296,-692.9616 3065.4596,-686.6346 3212,-651 3231.9467,-646.1495 3253.1999,-639.7571 3272.7647,-633.3529"/>
<polygon fill="#666666" stroke="#666666" points="3274.1344,-636.5861 3282.5221,-630.1133 3271.9286,-629.9427 3274.1344,-636.5861"/>
</g>
<!-- MaxBytesForLevel -->
<g id="node16" class="node">
<title>MaxBytesForLevel</title>
<polygon fill="none" stroke="#000000" points="2793,-770 2671,-770 2671,-734 2793,-734 2793,-770"/>
<text text-anchor="middle" x="2732" y="-748.3" font-family="Times,serif" font-size="14.00" fill="#000000">MaxBytesForLevel</text>
</g>
<!-- ComputeCompactionScore&#45;&gt;MaxBytesForLevel -->
<g id="edge16" class="edge">
<title>ComputeCompactionScore&#45;&gt;MaxBytesForLevel</title>
<path fill="none" stroke="#666666" d="M2495.7324,-613.0546C2514.3216,-622.6171 2535.4729,-635.7682 2551,-652 2574.638,-676.7109 2559.7884,-699.2899 2587,-720 2608.0075,-735.9883 2635.4108,-744.3058 2660.7314,-748.5311"/>
<polygon fill="#666666" stroke="#666666" points="2660.2798,-752.0023 2670.6848,-750.0058 2661.3058,-745.0779 2660.2798,-752.0023"/>
</g>
<!-- ComputeFilesMarkedForCompaction -->
<g id="node17" class="node">
<title>ComputeFilesMarkedForCompaction</title>
<polygon fill="none" stroke="#000000" points="2842.5,-534 2621.5,-534 2621.5,-498 2842.5,-498 2842.5,-534"/>
<text text-anchor="middle" x="2732" y="-512.3" font-family="Times,serif" font-size="14.00" fill="#000000">ComputeFilesMarkedForCompaction</text>
</g>
<!-- ComputeCompactionScore&#45;&gt;ComputeFilesMarkedForCompaction -->
<g id="edge17" class="edge">
<title>ComputeCompactionScore&#45;&gt;ComputeFilesMarkedForCompaction</title>
<path fill="none" stroke="#666666" d="M2494.356,-576.923C2520.3752,-565.8463 2555.1766,-552.0959 2587,-543 2595.318,-540.6225 2603.966,-538.4023 2612.712,-536.3392"/>
<polygon fill="#666666" stroke="#666666" points="2613.6463,-539.716 2622.6157,-534.0768 2612.0873,-532.8918 2613.6463,-539.716"/>
</g>
<!-- ComputeExpiredTtlFiles -->
<g id="node18" class="node">
<title>ComputeExpiredTtlFiles</title>
<polygon fill="none" stroke="#000000" points="2808,-642 2656,-642 2656,-606 2808,-606 2808,-642"/>
<text text-anchor="middle" x="2732" y="-620.3" font-family="Times,serif" font-size="14.00" fill="#000000">ComputeExpiredTtlFiles</text>
</g>
<!-- ComputeCompactionScore&#45;&gt;ComputeExpiredTtlFiles -->
<g id="edge18" class="edge">
<title>ComputeCompactionScore&#45;&gt;ComputeExpiredTtlFiles</title>
<path fill="none" stroke="#666666" d="M2536.2808,-603.5832C2570.6716,-607.1708 2610.6536,-611.3416 2645.4827,-614.9748"/>
<polygon fill="#666666" stroke="#666666" points="2645.3268,-618.4775 2655.6359,-616.034 2646.0531,-611.5152 2645.3268,-618.4775"/>
</g>
<!-- ComputeBottommostFilesMarkedForCompaction -->
<g id="node19" class="node">
<title>ComputeBottommostFilesMarkedForCompaction</title>
<polygon fill="none" stroke="#000000" points="2877,-480 2587,-480 2587,-444 2877,-444 2877,-480"/>
<text text-anchor="middle" x="2732" y="-458.3" font-family="Times,serif" font-size="14.00" fill="#000000">ComputeBottommostFilesMarkedForCompaction</text>
</g>
<!-- ComputeCompactionScore&#45;&gt;ComputeBottommostFilesMarkedForCompaction -->
<g id="edge19" class="edge">
<title>ComputeCompactionScore&#45;&gt;ComputeBottommostFilesMarkedForCompaction</title>
<path fill="none" stroke="#666666" d="M2470.999,-576.741C2494.5939,-552.597 2539.7315,-510.5927 2587,-489 2591.4253,-486.9785 2595.9925,-485.1083 2600.6561,-483.3781"/>
<polygon fill="#666666" stroke="#666666" points="2602.0464,-486.6006 2610.3495,-480.0197 2599.7547,-479.9863 2602.0464,-486.6006"/>
</g>
<!-- ComputeFilesMarkedForPeriodicCompaction -->
<g id="node20" class="node">
<title>ComputeFilesMarkedForPeriodicCompaction</title>
<polygon fill="none" stroke="#000000" points="2865,-588 2599,-588 2599,-552 2865,-552 2865,-588"/>
<text text-anchor="middle" x="2732" y="-566.3" font-family="Times,serif" font-size="14.00" fill="#000000">ComputeFilesMarkedForPeriodicCompaction</text>
</g>
<!-- ComputeCompactionScore&#45;&gt;ComputeFilesMarkedForPeriodicCompaction -->
<g id="edge20" class="edge">
<title>ComputeCompactionScore&#45;&gt;ComputeFilesMarkedForPeriodicCompaction</title>
<path fill="none" stroke="#666666" d="M2536.2808,-587.6006C2552.897,-586.1064 2570.8185,-584.4947 2588.8334,-582.8747"/>
<polygon fill="#666666" stroke="#666666" points="2589.1973,-586.3562 2598.8436,-581.9745 2588.5703,-579.3843 2589.1973,-586.3562"/>
</g>
<!-- EstimateCompactionBytesNeeded -->
<g id="node21" class="node">
<title>EstimateCompactionBytesNeeded</title>
<polygon fill="none" stroke="#000000" points="2833.5,-696 2630.5,-696 2630.5,-660 2833.5,-660 2833.5,-696"/>
<text text-anchor="middle" x="2732" y="-674.3" font-family="Times,serif" font-size="14.00" fill="#000000">EstimateCompactionBytesNeeded</text>
</g>
<!-- ComputeCompactionScore&#45;&gt;EstimateCompactionBytesNeeded -->
<g id="edge21" class="edge">
<title>ComputeCompactionScore&#45;&gt;EstimateCompactionBytesNeeded</title>
<path fill="none" stroke="#666666" d="M2490.7632,-613.0003C2517.0375,-625.2354 2553.5227,-640.9622 2587,-651 2597.7183,-654.2138 2609.0025,-657.1171 2620.347,-659.7224"/>
<polygon fill="#666666" stroke="#666666" points="2619.7985,-663.1857 2630.3193,-661.9354 2621.315,-656.352 2619.7985,-663.1857"/>
</g>
<!-- compaction_score_ -->
<g id="node22" class="node">
<title>compaction_score_</title>
<polygon fill="none" stroke="#000000" points="2793,-426 2671,-426 2671,-390 2793,-390 2793,-426"/>
<text text-anchor="middle" x="2732" y="-404.3" font-family="Times,serif" font-size="14.00" fill="#000000">compaction_score_</text>
</g>
<!-- ComputeCompactionScore&#45;&gt;compaction_score_ -->
<g id="edge22" class="edge">
<title>ComputeCompactionScore&#45;&gt;compaction_score_</title>
<path fill="none" stroke="#666666" d="M2463.4204,-576.8467C2482.0466,-542.9286 2527.03,-470.1933 2587,-435 2609.1275,-422.0145 2636.1458,-415.0578 2660.837,-411.3998"/>
<polygon fill="#666666" stroke="#666666" points="2661.4373,-414.851 2670.8913,-410.0686 2660.5184,-407.9115 2661.4373,-414.851"/>
</g>
<!-- compaction_level_ -->
<g id="node23" class="node">
<title>compaction_level_</title>
<polygon fill="none" stroke="#000000" points="2792,-352 2672,-352 2672,-316 2792,-316 2792,-352"/>
<text text-anchor="middle" x="2732" y="-330.3" font-family="Times,serif" font-size="14.00" fill="#000000">compaction_level_</text>
</g>
<!-- ComputeCompactionScore&#45;&gt;compaction_level_ -->
<g id="edge23" class="edge">
<title>ComputeCompactionScore&#45;&gt;compaction_level_</title>
<path fill="none" stroke="#666666" d="M2460.3044,-576.8087C2475.4701,-535.7077 2517.9336,-435.0565 2587,-381 2608.5245,-364.1533 2636.2845,-353.2499 2661.7443,-346.2362"/>
<polygon fill="#666666" stroke="#666666" points="2662.9402,-349.542 2671.7416,-343.644 2661.1832,-342.766 2662.9402,-349.542"/>
</g>
<!-- files_&#45;&gt;FileMetaData -->
<g id="edge24" class="edge">
<title>files_&#45;&gt;FileMetaData</title>
<path fill="none" stroke="#666666" d="M3452.1505,-596.5359C3526.7287,-583.2701 3622.4,-553.1919 3676,-485 3728.2475,-418.5287 3744.7885,-150.1847 3748.8643,-62.1369"/>
<polygon fill="#666666" stroke="#666666" points="3752.3634,-62.234 3749.311,-52.0885 3745.3703,-61.9232 3752.3634,-62.234"/>
</g>
<!-- files_marked_for_compaction_ -->
<g id="node33" class="node">
<title>files_marked_for_compaction_</title>
<polygon fill="none" stroke="#000000" points="3152.5,-524 2964.5,-524 2964.5,-488 3152.5,-488 3152.5,-524"/>
<text text-anchor="middle" x="3058.5" y="-502.3" font-family="Times,serif" font-size="14.00" fill="#000000">files_marked_for_compaction_</text>
</g>
<!-- ComputeFilesMarkedForCompaction&#45;&gt;files_marked_for_compaction_ -->
<g id="edge33" class="edge">
<title>ComputeFilesMarkedForCompaction&#45;&gt;files_marked_for_compaction_</title>
<path fill="none" stroke="#666666" d="M2842.538,-512.6145C2878.5712,-511.5108 2918.4424,-510.2897 2954.0171,-509.2001"/>
<polygon fill="#666666" stroke="#666666" points="2954.5305,-512.6861 2964.4186,-508.8815 2954.3161,-505.6894 2954.5305,-512.6861"/>
</g>
<!-- ComputeExpiredTtlFiles&#45;&gt;TryGetOldestAncesterTime -->
<g id="edge30" class="edge">
<title>ComputeExpiredTtlFiles&#45;&gt;TryGetOldestAncesterTime</title>
<path fill="none" stroke="#666666" d="M2808.3198,-627.6537C2833.7525,-624.7237 2859.9243,-616.4238 2877,-597 2950.9157,-512.9199 2839.3261,-184.6638 2905,-94 2919.5313,-73.9393 2941.7888,-60.5849 2964.8851,-51.6952"/>
<polygon fill="#666666" stroke="#666666" points="2966.2248,-54.9333 2974.4614,-48.2692 2963.8668,-48.3424 2966.2248,-54.9333"/>
</g>
<!-- expired_ttl_files_ -->
<g id="node31" class="node">
<title>expired_ttl_files_</title>
<polygon fill="none" stroke="#000000" points="3114.5,-780 3002.5,-780 3002.5,-744 3114.5,-744 3114.5,-780"/>
<text text-anchor="middle" x="3058.5" y="-758.3" font-family="Times,serif" font-size="14.00" fill="#000000">expired_ttl_files_</text>
</g>
<!-- ComputeExpiredTtlFiles&#45;&gt;expired_ttl_files_ -->
<g id="edge31" class="edge">
<title>ComputeExpiredTtlFiles&#45;&gt;expired_ttl_files_</title>
<path fill="none" stroke="#666666" d="M2808.3226,-632.851C2830.9058,-636.8888 2855.3652,-642.6959 2877,-651 2933.5847,-672.719 2992.2016,-712.2012 3026.9966,-737.7507"/>
<polygon fill="#666666" stroke="#666666" points="3025.1986,-740.7751 3035.3138,-743.9269 3029.3719,-735.1551 3025.1986,-740.7751"/>
</g>
<!-- GetCurrentTime -->
<g id="node32" class="node">
<title>GetCurrentTime</title>
<polygon fill="none" stroke="#000000" points="3112,-642 3005,-642 3005,-606 3112,-606 3112,-642"/>
<text text-anchor="middle" x="3058.5" y="-620.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetCurrentTime</text>
</g>
<!-- ComputeExpiredTtlFiles&#45;&gt;GetCurrentTime -->
<g id="edge32" class="edge">
<title>ComputeExpiredTtlFiles&#45;&gt;GetCurrentTime</title>
<path fill="none" stroke="#666666" d="M2808.1377,-624C2864.7856,-624 2941.2246,-624 2994.6839,-624"/>
<polygon fill="#666666" stroke="#666666" points="2994.7224,-627.5001 3004.7224,-624 2994.7223,-620.5001 2994.7224,-627.5001"/>
</g>
<!-- bottommost_files_marked_for_compaction_ -->
<g id="node37" class="node">
<title>bottommost_files_marked_for_compaction_</title>
<polygon fill="none" stroke="#000000" points="3188.5,-456 2928.5,-456 2928.5,-420 3188.5,-420 3188.5,-456"/>
<text text-anchor="middle" x="3058.5" y="-434.3" font-family="Times,serif" font-size="14.00" fill="#000000">bottommost_files_marked_for_compaction_</text>
</g>
<!-- ComputeBottommostFilesMarkedForCompaction&#45;&gt;bottommost_files_marked_for_compaction_ -->
<g id="edge38" class="edge">
<title>ComputeBottommostFilesMarkedForCompaction&#45;&gt;bottommost_files_marked_for_compaction_</title>
<path fill="none" stroke="#666666" d="M2877.1091,-451.3335C2890.6808,-450.3359 2904.422,-449.3258 2917.951,-448.3313"/>
<polygon fill="#666666" stroke="#666666" points="2918.5326,-451.7981 2928.249,-447.5743 2918.0193,-444.8169 2918.5326,-451.7981"/>
</g>
<!-- files_marked_for_periodic_compaction_ -->
<g id="node36" class="node">
<title>files_marked_for_periodic_compaction_</title>
<polygon fill="none" stroke="#000000" points="3178,-585 2939,-585 2939,-549 3178,-549 3178,-585"/>
<text text-anchor="middle" x="3058.5" y="-563.3" font-family="Times,serif" font-size="14.00" fill="#000000">files_marked_for_periodic_compaction_</text>
</g>
<!-- ComputeFilesMarkedForPeriodicCompaction&#45;&gt;files_marked_for_periodic_compaction_ -->
<g id="edge36" class="edge">
<title>ComputeFilesMarkedForPeriodicCompaction&#45;&gt;files_marked_for_periodic_compaction_</title>
<path fill="none" stroke="#666666" d="M2865.271,-568.7755C2886.1826,-568.5833 2907.7738,-568.3849 2928.6079,-568.1935"/>
<polygon fill="#666666" stroke="#666666" points="2928.801,-571.692 2938.7684,-568.1001 2928.7366,-564.6923 2928.801,-571.692"/>
</g>
<!-- CompactionScore -->
<g id="node24" class="node">
<title>CompactionScore</title>
<polygon fill="none" stroke="#000000" points="707,-790 593,-790 593,-754 707,-754 707,-790"/>
<text text-anchor="middle" x="650" y="-768.3" font-family="Times,serif" font-size="14.00" fill="#000000">CompactionScore</text>
</g>
<!-- CompactionScore&#45;&gt;compaction_score_ -->
<g id="edge25" class="edge">
<title>CompactionScore&#45;&gt;compaction_score_</title>
<path fill="none" stroke="#666666" d="M707.1176,-759.6281C719.3535,-755.8354 731.9225,-751.0238 743,-745 966.1036,-623.6798 921.0437,-371 1175,-371 1175,-371 1175,-371 2222.5,-371 2379.2513,-371 2562.4189,-388.6367 2660.8084,-399.5569"/>
<polygon fill="#666666" stroke="#666666" points="2660.6034,-403.0558 2670.9307,-400.69 2661.3821,-396.0992 2660.6034,-403.0558"/>
</g>
<!-- start_level_ -->
<g id="node66" class="node">
<title>start_level_</title>
<polygon fill="none" stroke="#000000" points="825.5,-1172 825.5,-1218 971.5,-1218 971.5,-1172 825.5,-1172"/>
<text text-anchor="middle" x="898.5" y="-1202.8" font-family="Times,serif" font-size="14.00" fill="#000000">start_level_</text>
<polyline fill="none" stroke="#000000" points="825.5,-1195 971.5,-1195 "/>
<text text-anchor="middle" x="898.5" y="-1179.8" font-family="Times,serif" font-size="14.00" fill="#000000">确定要compact的level</text>
</g>
<!-- CompactionScore&#45;&gt;start_level_ -->
<g id="edge90" class="edge">
<title>CompactionScore&#45;&gt;start_level_</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M660.6777,-790.1758C699.0915,-855.5642 830.576,-1079.3788 879.7454,-1163.0756"/>
<polygon fill="#666666" stroke="#666666" points="876.8357,-1165.0326 884.9188,-1171.8819 882.8712,-1161.4868 876.8357,-1165.0326"/>
</g>
<!-- CompactionScoreLevel -->
<g id="node25" class="node">
<title>CompactionScoreLevel</title>
<polygon fill="none" stroke="#000000" points="722.5,-736 577.5,-736 577.5,-700 722.5,-700 722.5,-736"/>
<text text-anchor="middle" x="650" y="-714.3" font-family="Times,serif" font-size="14.00" fill="#000000">CompactionScoreLevel</text>
</g>
<!-- CompactionScoreLevel&#45;&gt;compaction_level_ -->
<g id="edge26" class="edge">
<title>CompactionScoreLevel&#45;&gt;compaction_level_</title>
<path fill="none" stroke="#666666" d="M661.7232,-699.9163C680.9,-669.6984 719.2177,-606.5715 743,-549 765.0731,-495.566 736.5953,-463.2971 779,-424 910.266,-302.3535 996.0345,-351 1175,-351 1175,-351 1175,-351 2222.5,-351 2379.354,-351 2563.2196,-342.8523 2661.5204,-337.8382"/>
<polygon fill="#666666" stroke="#666666" points="2661.8234,-341.3273 2671.6304,-337.3181 2661.4637,-334.3366 2661.8234,-341.3273"/>
</g>
<!-- CompactionScoreLevel&#45;&gt;start_level_ -->
<g id="edge91" class="edge">
<title>CompactionScoreLevel&#45;&gt;start_level_</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M722.8364,-731.494C730.228,-735.0134 737.1524,-739.4385 743,-745 758.9243,-760.145 855.7286,-1060.7574 888.0236,-1162.0266"/>
<polygon fill="#666666" stroke="#666666" points="884.7463,-1163.2698 891.1168,-1171.7354 891.4159,-1161.1448 884.7463,-1163.2698"/>
</g>
<!-- NextCompactionIndex -->
<g id="node26" class="node">
<title>NextCompactionIndex</title>
<polygon fill="none" stroke="#000000" points="1375,-406 1375,-452 1564,-452 1564,-406 1375,-406"/>
<text text-anchor="middle" x="1469.5" y="-436.8" font-family="Times,serif" font-size="14.00" fill="#000000">NextCompactionIndex</text>
<polyline fill="none" stroke="#000000" points="1375,-429 1564,-429 "/>
<text text-anchor="start" x="1383" y="-413.8" font-family="Times,serif" font-size="14.00" fill="#000000">从上次被选择的index开始选</text>
</g>
<!-- next_file_to_compact_by_size_ -->
<g id="node28" class="node">
<title>next_file_to_compact_by_size_</title>
<polygon fill="none" stroke="#000000" points="1835,-426 1645,-426 1645,-390 1835,-390 1835,-426"/>
<text text-anchor="middle" x="1740" y="-404.3" font-family="Times,serif" font-size="14.00" fill="#000000">next_file_to_compact_by_size_</text>
</g>
<!-- NextCompactionIndex&#45;&gt;next_file_to_compact_by_size_ -->
<g id="edge27" class="edge">
<title>NextCompactionIndex&#45;&gt;next_file_to_compact_by_size_</title>
<path fill="none" stroke="#666666" d="M1564.1078,-421.6552C1586.9344,-419.8831 1611.4638,-417.9788 1634.7446,-416.1714"/>
<polygon fill="#666666" stroke="#666666" points="1635.2893,-419.6397 1644.9884,-415.3761 1634.7475,-412.6607 1635.2893,-419.6397"/>
</g>
<!-- SetNextCompactionIndex -->
<g id="node27" class="node">
<title>SetNextCompactionIndex</title>
<polygon fill="none" stroke="#000000" points="1357.5,-575 1357.5,-621 1581.5,-621 1581.5,-575 1357.5,-575"/>
<text text-anchor="middle" x="1469.5" y="-605.8" font-family="Times,serif" font-size="14.00" fill="#000000">SetNextCompactionIndex</text>
<polyline fill="none" stroke="#000000" points="1357.5,-598 1581.5,-598 "/>
<text text-anchor="start" x="1365.5" y="-582.8" font-family="Times,serif" font-size="14.00" fill="#000000">设置下一次compaction开始的index</text>
</g>
<!-- SetNextCompactionIndex&#45;&gt;next_file_to_compact_by_size_ -->
<g id="edge28" class="edge">
<title>SetNextCompactionIndex&#45;&gt;next_file_to_compact_by_size_</title>
<path fill="none" stroke="#666666" d="M1489.0542,-574.8391C1518.9604,-540.7757 1579.3275,-477.1927 1643,-440 1649.3689,-436.2798 1656.2288,-432.9237 1663.2521,-429.9116"/>
<polygon fill="#666666" stroke="#666666" points="1664.9379,-433.0055 1672.8998,-426.0156 1662.3168,-426.5148 1664.9379,-433.0055"/>
</g>
<!-- BottommostFilesMarkedForCompaction -->
<g id="node29" class="node">
<title>BottommostFilesMarkedForCompaction</title>
<polygon fill="none" stroke="#000000" points="1018,-313 779,-313 779,-277 1018,-277 1018,-313"/>
<text text-anchor="middle" x="898.5" y="-291.3" font-family="Times,serif" font-size="14.00" fill="#000000">BottommostFilesMarkedForCompaction</text>
</g>
<!-- BottommostFilesMarkedForCompaction&#45;&gt;bottommost_files_marked_for_compaction_ -->
<g id="edge37" class="edge">
<title>BottommostFilesMarkedForCompaction&#45;&gt;bottommost_files_marked_for_compaction_</title>
<path fill="none" stroke="#666666" d="M1018.2214,-289.0313C1133.7319,-283.7916 1313.5376,-277 1469.5,-277 1469.5,-277 1469.5,-277 2454,-277 2501.0033,-277 2840.4849,-252.4035 2877,-282 2921.2286,-317.8485 2864.3206,-367.1695 2905,-407 2909.4179,-411.3257 2914.2623,-415.1275 2919.4225,-418.4643"/>
<polygon fill="#666666" stroke="#666666" points="2917.9771,-421.6717 2928.3853,-423.6514 2921.4834,-415.6131 2917.9771,-421.6717"/>
</g>
<!-- ExpiredTtlFiles -->
<g id="node30" class="node">
<title>ExpiredTtlFiles</title>
<polygon fill="none" stroke="#000000" points="1790.5,-710 1689.5,-710 1689.5,-674 1790.5,-674 1790.5,-710"/>
<text text-anchor="middle" x="1740" y="-688.3" font-family="Times,serif" font-size="14.00" fill="#000000">ExpiredTtlFiles</text>
</g>
<!-- ExpiredTtlFiles&#45;&gt;expired_ttl_files_ -->
<g id="edge29" class="edge">
<title>ExpiredTtlFiles&#45;&gt;expired_ttl_files_</title>
<path fill="none" stroke="#666666" d="M1790.5624,-687.1345C1863.939,-680.3417 2004.2621,-668.3597 2124,-664 2211.4976,-660.8142 2235.2606,-646.2596 2321,-664 2447.1261,-690.0969 2460.8739,-752.9031 2587,-779 2713.2154,-805.1153 2748.2516,-785.0164 2877,-779 2915.1046,-777.2194 2957.5622,-773.347 2991.827,-769.7473"/>
<polygon fill="#666666" stroke="#666666" points="2992.6121,-773.1834 3002.1839,-768.6415 2991.8689,-766.223 2992.6121,-773.1834"/>
</g>
<!-- FilesMarkedForCompaction -->
<g id="node34" class="node">
<title>FilesMarkedForCompaction</title>
<polygon fill="none" stroke="#000000" points="1825.5,-598 1654.5,-598 1654.5,-562 1825.5,-562 1825.5,-598"/>
<text text-anchor="middle" x="1740" y="-576.3" font-family="Times,serif" font-size="14.00" fill="#000000">FilesMarkedForCompaction</text>
</g>
<!-- FilesMarkedForCompaction&#45;&gt;files_marked_for_compaction_ -->
<g id="edge34" class="edge">
<title>FilesMarkedForCompaction&#45;&gt;files_marked_for_compaction_</title>
<path fill="none" stroke="#666666" d="M1825.7067,-568.2488C1979.5936,-544.3178 2309.2094,-479.9896 2551,-341 2570.0801,-330.0321 2566.5492,-315.1308 2587,-307 2646.885,-283.191 2827.6149,-265.5972 2877,-307 2931.6512,-352.8177 2856.7759,-412.4599 2905,-465 2918.1832,-479.363 2935.7876,-488.9203 2954.3671,-495.2307"/>
<polygon fill="#666666" stroke="#666666" points="2953.5665,-498.6462 2964.1536,-498.2429 2955.6257,-491.956 2953.5665,-498.6462"/>
</g>
<!-- FilesMarkedForPeriodicCompaction -->
<g id="node35" class="node">
<title>FilesMarkedForPeriodicCompaction</title>
<polygon fill="none" stroke="#000000" points="1577.5,-683 1361.5,-683 1361.5,-647 1577.5,-647 1577.5,-683"/>
<text text-anchor="middle" x="1469.5" y="-661.3" font-family="Times,serif" font-size="14.00" fill="#000000">FilesMarkedForPeriodicCompaction</text>
</g>
<!-- FilesMarkedForPeriodicCompaction&#45;&gt;files_marked_for_periodic_compaction_ -->
<g id="edge35" class="edge">
<title>FilesMarkedForPeriodicCompaction&#45;&gt;files_marked_for_periodic_compaction_</title>
<path fill="none" stroke="#666666" d="M1577.6711,-648.4413C1588.2523,-643.9164 1598.2788,-638.2038 1607,-631 1636.4371,-606.6847 1612.8212,-576.3884 1643,-553 1980.0834,-291.7618 2162.2674,-419.3779 2587,-381 2651.183,-375.2006 2827.4749,-339.7647 2877,-381 2929.7895,-424.9533 2857.3047,-483.5654 2905,-533 2912.107,-540.3662 2920.4256,-546.3038 2929.4484,-551.0734"/>
<polygon fill="#666666" stroke="#666666" points="2928.1527,-554.3328 2938.6871,-555.4634 2931.157,-548.0102 2928.1527,-554.3328"/>
</g>
<!-- Compaction -->
<g id="node38" class="node">
<title>Compaction</title>
<polygon fill="#95e1d3" stroke="#000000" points="2913,-943.5 2913,-1096.5 3204,-1096.5 3204,-943.5 2913,-943.5"/>
<text text-anchor="middle" x="3058.5" y="-1081.3" font-family="Times,serif" font-size="14.00" fill="#000000">Compaction</text>
<polyline fill="none" stroke="#000000" points="2913,-1073.5 3204,-1073.5 "/>
<text text-anchor="start" x="2921" y="-1058.3" font-family="Times,serif" font-size="14.00" fill="#000000">VersionStorageInfo* input_vstorage_;</text>
<polyline fill="none" stroke="#000000" points="2913,-1050.5 3204,-1050.5 "/>
<text text-anchor="start" x="2921" y="-1035.3" font-family="Times,serif" font-size="14.00" fill="#000000">const int start_level_;</text>
<polyline fill="none" stroke="#000000" points="2913,-1027.5 3204,-1027.5 "/>
<text text-anchor="start" x="2921" y="-1012.3" font-family="Times,serif" font-size="14.00" fill="#000000">const int output_level_;</text>
<polyline fill="none" stroke="#000000" points="2913,-1004.5 3204,-1004.5 "/>
<text text-anchor="start" x="2921" y="-989.3" font-family="Times,serif" font-size="14.00" fill="#000000">ColumnFamilyData* cfd_;</text>
<polyline fill="none" stroke="#000000" points="2913,-981.5 3204,-981.5 "/>
<text text-anchor="start" x="2921" y="-966.3" font-family="Times,serif" font-size="14.00" fill="#000000">const std::vector&lt;CompactionInputFiles&gt; inputs_;</text>
<text text-anchor="start" x="2921" y="-951.3" font-family="Times,serif" font-size="14.00" fill="#000000"> std::vector&lt;FileMetaData*&gt; grandparents_;</text>
</g>
<!-- SetupOtherInputs -->
<g id="node39" class="node">
<title>SetupOtherInputs</title>
<polygon fill="none" stroke="#000000" points="2036.5,-1028 1924.5,-1028 1924.5,-992 2036.5,-992 2036.5,-1028"/>
<text text-anchor="middle" x="1980.5" y="-1006.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetupOtherInputs</text>
</g>
<!-- SetupOtherInputs&#45;&gt;GetOverlappingInputs -->
<g id="edge39" class="edge">
<title>SetupOtherInputs&#45;&gt;GetOverlappingInputs</title>
<path fill="none" stroke="#3f72af" d="M2025.0038,-991.9431C2046.9993,-980.8831 2072.1564,-964.6517 2088,-943 2126.1937,-890.8047 2087.7596,-855.57 2124,-802 2125.5059,-799.774 2127.1044,-797.5919 2128.7828,-795.4546"/>
<polygon fill="#3f72af" stroke="#3f72af" points="2131.7963,-797.315 2135.6247,-787.4361 2126.4713,-792.7714 2131.7963,-797.315"/>
</g>
<!-- SetupOtherInputs&#45;&gt;GetCleanInputsWithinInterval -->
<g id="edge40" class="edge">
<title>SetupOtherInputs&#45;&gt;GetCleanInputsWithinInterval</title>
<path fill="none" stroke="#3f72af" d="M2019.8568,-991.9446C2041.934,-980.3428 2068.809,-963.5928 2088,-943 2111.3139,-917.9831 2098.5281,-897.8159 2124,-875 2194.1439,-812.1702 2262.1643,-870.5263 2321,-797 2385.3707,-716.5567 2330.4774,-667.5554 2357,-568 2379.6419,-483.0111 2420.7107,-387.1812 2441.3879,-341.3149"/>
<polygon fill="#3f72af" stroke="#3f72af" points="2444.6473,-342.602 2445.5947,-332.0496 2438.2735,-339.708 2444.6473,-342.602"/>
</g>
<!-- ExpandInputsToCleanCut -->
<g id="node40" class="node">
<title>ExpandInputsToCleanCut</title>
<polygon fill="none" stroke="#000000" points="2301.5,-1102 2143.5,-1102 2143.5,-1066 2301.5,-1066 2301.5,-1102"/>
<text text-anchor="middle" x="2222.5" y="-1080.3" font-family="Times,serif" font-size="14.00" fill="#000000">ExpandInputsToCleanCut</text>
</g>
<!-- SetupOtherInputs&#45;&gt;ExpandInputsToCleanCut -->
<g id="edge41" class="edge">
<title>SetupOtherInputs&#45;&gt;ExpandInputsToCleanCut</title>
<path fill="none" stroke="#3f72af" d="M2036.5557,-1023.0647C2053.1985,-1027.2162 2071.4102,-1032.029 2088,-1037 2113.4068,-1044.6129 2141.1266,-1054.094 2164.7645,-1062.5427"/>
<polygon fill="#3f72af" stroke="#3f72af" points="2163.6912,-1065.8761 2174.2856,-1065.9685 2166.0611,-1059.2895 2163.6912,-1065.8761"/>
</g>
<!-- TotalCompensatedFileSize -->
<g id="node41" class="node">
<title>TotalCompensatedFileSize</title>
<polygon fill="none" stroke="#000000" points="2304.5,-974 2140.5,-974 2140.5,-938 2304.5,-938 2304.5,-974"/>
<text text-anchor="middle" x="2222.5" y="-952.3" font-family="Times,serif" font-size="14.00" fill="#000000">TotalCompensatedFileSize</text>
</g>
<!-- SetupOtherInputs&#45;&gt;TotalCompensatedFileSize -->
<g id="edge42" class="edge">
<title>SetupOtherInputs&#45;&gt;TotalCompensatedFileSize</title>
<path fill="none" stroke="#3f72af" d="M2036.6279,-997.4756C2064.8458,-991.179 2099.7464,-983.3913 2131.6579,-976.2706"/>
<polygon fill="#3f72af" stroke="#3f72af" points="2132.4571,-979.6784 2141.4548,-974.0845 2130.9326,-972.8464 2132.4571,-979.6784"/>
</g>
<!-- GetRange -->
<g id="node42" class="node">
<title>GetRange</title>
<polygon fill="none" stroke="#000000" points="2258,-1028 2187,-1028 2187,-992 2258,-992 2258,-1028"/>
<text text-anchor="middle" x="2222.5" y="-1006.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetRange</text>
</g>
<!-- SetupOtherInputs&#45;&gt;GetRange -->
<g id="edge43" class="edge">
<title>SetupOtherInputs&#45;&gt;GetRange</title>
<path fill="none" stroke="#3f72af" d="M2036.6279,-1010C2079.1816,-1010 2136.9331,-1010 2176.7122,-1010"/>
<polygon fill="#3f72af" stroke="#3f72af" points="2176.9221,-1013.5001 2186.9221,-1010 2176.9221,-1006.5001 2176.9221,-1013.5001"/>
</g>
<!-- AreFilesInCompaction -->
<g id="node43" class="node">
<title>AreFilesInCompaction</title>
<polygon fill="none" stroke="#000000" points="2293,-920 2152,-920 2152,-884 2293,-884 2293,-920"/>
<text text-anchor="middle" x="2222.5" y="-898.3" font-family="Times,serif" font-size="14.00" fill="#000000">AreFilesInCompaction</text>
</g>
<!-- SetupOtherInputs&#45;&gt;AreFilesInCompaction -->
<g id="edge44" class="edge">
<title>SetupOtherInputs&#45;&gt;AreFilesInCompaction</title>
<path fill="none" stroke="#3f72af" d="M2036.625,-1000.5824C2054.1678,-995.7981 2072.8719,-988.6465 2088,-978 2110.0995,-962.4474 2101.7325,-944.311 2124,-929 2129.6446,-925.1188 2135.8287,-921.7942 2142.261,-918.9464"/>
<polygon fill="#3f72af" stroke="#3f72af" points="2143.8521,-922.0793 2151.8288,-915.1062 2141.2447,-915.583 2143.8521,-922.0793"/>
</g>
<!-- FileMetaData_being_compacted -->
<g id="node49" class="node">
<title>FileMetaData_being_compacted</title>
<polygon fill="none" stroke="#000000" points="2551,-920 2357,-920 2357,-884 2551,-884 2551,-920"/>
<text text-anchor="middle" x="2454" y="-898.3" font-family="Times,serif" font-size="14.00" fill="#000000">FileMetaData_being_compacted</text>
</g>
<!-- AreFilesInCompaction&#45;&gt;FileMetaData_being_compacted -->
<g id="edge50" class="edge">
<title>AreFilesInCompaction&#45;&gt;FileMetaData_being_compacted</title>
<path fill="none" stroke="#666666" d="M2293.2155,-902C2310.1566,-902 2328.6224,-902 2346.8051,-902"/>
<polygon fill="#666666" stroke="#666666" points="2346.8661,-905.5001 2356.866,-902 2346.866,-898.5001 2346.8661,-905.5001"/>
</g>
<!-- GetOverlappingL0Files -->
<g id="node44" class="node">
<title>GetOverlappingL0Files</title>
<polygon fill="none" stroke="#000000" points="1643,-877 1643,-953 1837,-953 1837,-877 1643,-877"/>
<text text-anchor="middle" x="1740" y="-937.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetOverlappingL0Files</text>
<polyline fill="none" stroke="#000000" points="1643,-930 1837,-930 "/>
<text text-anchor="start" x="1651" y="-914.8" font-family="Times,serif" font-size="14.00" fill="#000000">获取VersionStorage level0中和</text>
<text text-anchor="start" x="1651" y="-899.8" font-family="Times,serif" font-size="14.00" fill="#000000"> CompactionInputfiles</text>
<text text-anchor="start" x="1651" y="-884.8" font-family="Times,serif" font-size="14.00" fill="#000000"> overlap的files</text>
</g>
<!-- GetOverlappingL0Files&#45;&gt;GetOverlappingInputs -->
<g id="edge45" class="edge">
<title>GetOverlappingL0Files&#45;&gt;GetOverlappingInputs</title>
<path fill="none" stroke="#b83b5e" d="M1793.7847,-876.8564C1817.1756,-861.8312 1845.4856,-845.6547 1873,-835 1963.8724,-799.8104 1995.3368,-822.16 2088,-792 2096.6185,-789.1948 2105.4137,-785.9867 2114.1735,-782.5397"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="2115.6914,-785.7015 2123.6549,-778.7134 2113.0717,-779.2101 2115.6914,-785.7015"/>
</g>
<!-- IsRangeInCompaction -->
<g id="node45" class="node">
<title>IsRangeInCompaction</title>
<polygon fill="none" stroke="#000000" points="2050,-934 1911,-934 1911,-898 2050,-898 2050,-934"/>
<text text-anchor="middle" x="1980.5" y="-912.3" font-family="Times,serif" font-size="14.00" fill="#000000">IsRangeInCompaction</text>
</g>
<!-- GetOverlappingL0Files&#45;&gt;IsRangeInCompaction -->
<g id="edge46" class="edge">
<title>GetOverlappingL0Files&#45;&gt;IsRangeInCompaction</title>
<path fill="none" stroke="#b83b5e" d="M1837.1273,-915.4039C1858.2054,-915.4915 1880.2686,-915.5832 1900.5926,-915.6677"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1900.7173,-919.1682 1910.7318,-915.7099 1900.7465,-912.1683 1900.7173,-919.1682"/>
</g>
<!-- level0_compactions_in_progress_ -->
<g id="node46" class="node">
<title>level0_compactions_in_progress_</title>
<polygon fill="#95e1d3" stroke="#000000" points="2627.5,-873.5 2627.5,-934.5 2836.5,-934.5 2836.5,-873.5 2627.5,-873.5"/>
<text text-anchor="middle" x="2732" y="-919.3" font-family="Times,serif" font-size="14.00" fill="#000000">level0_compactions_in_progress_</text>
<polyline fill="none" stroke="#000000" points="2627.5,-911.5 2836.5,-911.5 "/>
<text text-anchor="start" x="2635.5" y="-896.3" font-family="Times,serif" font-size="14.00" fill="#000000">std::set&lt;Compaction*&gt; </text>
<text text-anchor="middle" x="2732" y="-881.3" font-family="Times,serif" font-size="14.00" fill="#000000"> level0_compactions_in_progress_;</text>
</g>
<!-- GetOverlappingL0Files&#45;&gt;level0_compactions_in_progress_ -->
<g id="edge47" class="edge">
<title>GetOverlappingL0Files&#45;&gt;level0_compactions_in_progress_</title>
<path fill="none" stroke="#b83b5e" d="M1837.3279,-937.9031C1849.2852,-940.0017 1861.3826,-941.7904 1873,-943 1920.5209,-947.948 2048.056,-969.2143 2088,-943 2121.6165,-920.9383 2090.3835,-882.0617 2124,-860 2203.3307,-807.9371 2456.7848,-848.7128 2551,-860 2572.7188,-862.602 2595.5966,-866.9007 2617.5047,-871.8179"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="2616.9645,-875.285 2627.4947,-874.1168 2618.5343,-868.4633 2616.9645,-875.285"/>
</g>
<!-- IsRangeInCompaction&#45;&gt;GetOverlappingInputs -->
<g id="edge51" class="edge">
<title>IsRangeInCompaction&#45;&gt;GetOverlappingInputs</title>
<path fill="none" stroke="#666666" d="M2050.1829,-908.4919C2063.8756,-904.4048 2077.295,-898.2435 2088,-889 2119.6728,-861.6514 2098.1466,-834.9046 2124,-802 2126.0284,-799.4183 2128.1723,-796.8853 2130.4103,-794.4046"/>
<polygon fill="#666666" stroke="#666666" points="2132.9955,-796.7655 2137.3849,-787.1226 2127.9402,-791.9236 2132.9955,-796.7655"/>
</g>
<!-- IsRangeInCompaction&#45;&gt;AreFilesInCompaction -->
<g id="edge52" class="edge">
<title>IsRangeInCompaction&#45;&gt;AreFilesInCompaction</title>
<path fill="none" stroke="#666666" d="M2050.1718,-911.9694C2078.6501,-910.3219 2111.785,-908.405 2141.3476,-906.6948"/>
<polygon fill="#666666" stroke="#666666" points="2141.8606,-910.171 2151.6418,-906.0992 2141.4563,-903.1827 2141.8606,-910.171"/>
</g>
<!-- level0_compactions_in_progress_&#45;&gt;Compaction -->
<g id="edge57" class="edge">
<title>level0_compactions_in_progress_&#45;&gt;Compaction</title>
<path fill="none" stroke="#666666" d="M2818.2111,-934.6294C2844.3798,-943.9267 2873.9754,-954.4415 2903.2285,-964.8346"/>
<polygon fill="#666666" stroke="#666666" points="2902.1147,-968.1532 2912.7094,-968.203 2904.4582,-961.5571 2902.1147,-968.1532"/>
</g>
<!-- FilesRangeOverlapWithCompaction -->
<g id="node47" class="node">
<title>FilesRangeOverlapWithCompaction</title>
<polygon fill="none" stroke="#000000" points="2088,-1082 1873,-1082 1873,-1046 2088,-1046 2088,-1082"/>
<text text-anchor="middle" x="1980.5" y="-1060.3" font-family="Times,serif" font-size="14.00" fill="#000000">FilesRangeOverlapWithCompaction</text>
</g>
<!-- FilesRangeOverlapWithCompaction&#45;&gt;GetRange -->
<g id="edge48" class="edge">
<title>FilesRangeOverlapWithCompaction&#45;&gt;GetRange</title>
<path fill="none" stroke="#666666" d="M2061.4189,-1045.9437C2099.8547,-1037.3671 2144.3732,-1027.4333 2176.8553,-1020.1852"/>
<polygon fill="#666666" stroke="#666666" points="2177.9579,-1023.5253 2186.9556,-1017.9314 2176.4334,-1016.6933 2177.9579,-1023.5253"/>
</g>
<!-- RangeOverlapWithCompaction -->
<g id="node48" class="node">
<title>RangeOverlapWithCompaction</title>
<polygon fill="none" stroke="#000000" points="2548.5,-1065 2359.5,-1065 2359.5,-1029 2548.5,-1029 2548.5,-1065"/>
<text text-anchor="middle" x="2454" y="-1043.3" font-family="Times,serif" font-size="14.00" fill="#000000">RangeOverlapWithCompaction</text>
</g>
<!-- FilesRangeOverlapWithCompaction&#45;&gt;RangeOverlapWithCompaction -->
<g id="edge49" class="edge">
<title>FilesRangeOverlapWithCompaction&#45;&gt;RangeOverlapWithCompaction</title>
<path fill="none" stroke="#666666" d="M2088.2318,-1058.5296C2100.2969,-1057.9809 2112.4106,-1057.4582 2124,-1057 2199.2953,-1054.0229 2284.2854,-1051.4663 2349.1556,-1049.6834"/>
<polygon fill="#666666" stroke="#666666" points="2349.4889,-1053.1757 2359.3896,-1049.404 2349.2977,-1046.1783 2349.4889,-1053.1757"/>
</g>
<!-- compactions_in_progress_ -->
<g id="node50" class="node">
<title>compactions_in_progress_</title>
<polygon fill="#95e1d3" stroke="#000000" points="2629,-982 2629,-1058 2835,-1058 2835,-982 2629,-982"/>
<text text-anchor="middle" x="2732" y="-1042.8" font-family="Times,serif" font-size="14.00" fill="#000000">compactions_in_progress_</text>
<polyline fill="none" stroke="#000000" points="2629,-1035 2835,-1035 "/>
<text text-anchor="start" x="2637" y="-1019.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unordered_set&lt;Compaction*&gt;</text>
<text text-anchor="start" x="2637" y="-1004.8" font-family="Times,serif" font-size="14.00" fill="#000000"> compactions_in_progress_</text>
<text text-anchor="middle" x="2732" y="-989.8" font-family="Times,serif" font-size="14.00" fill="#000000">;</text>
</g>
<!-- RangeOverlapWithCompaction&#45;&gt;compactions_in_progress_ -->
<g id="edge53" class="edge">
<title>RangeOverlapWithCompaction&#45;&gt;compactions_in_progress_</title>
<path fill="none" stroke="#666666" d="M2548.506,-1037.8214C2570.9932,-1035.6374 2595.2171,-1033.2847 2618.4579,-1031.0275"/>
<polygon fill="#666666" stroke="#666666" points="2619.0874,-1034.4829 2628.7022,-1030.0325 2618.4107,-1027.5157 2619.0874,-1034.4829"/>
</g>
<!-- compactions_in_progress_&#45;&gt;Compaction -->
<g id="edge58" class="edge">
<title>compactions_in_progress_&#45;&gt;Compaction</title>
<path fill="none" stroke="#666666" d="M2835.3066,-1020C2856.7886,-1020 2879.8786,-1020 2902.7711,-1020"/>
<polygon fill="#666666" stroke="#666666" points="2902.9153,-1023.5001 2912.9152,-1020 2902.9152,-1016.5001 2902.9153,-1023.5001"/>
</g>
<!-- GetGrandparents -->
<g id="node51" class="node">
<title>GetGrandparents</title>
<polygon fill="none" stroke="#000000" points="2035,-880 1926,-880 1926,-844 2035,-844 2035,-880"/>
<text text-anchor="middle" x="1980.5" y="-858.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetGrandparents</text>
</g>
<!-- GetGrandparents&#45;&gt;GetOverlappingInputs -->
<g id="edge54" class="edge">
<title>GetGrandparents&#45;&gt;GetOverlappingInputs</title>
<path fill="none" stroke="#666666" d="M2035.2369,-851.4804C2052.6963,-846.8936 2071.702,-840.5563 2088,-832 2106.4405,-822.3188 2107.5846,-814.8184 2124,-802 2127.7173,-799.0973 2131.533,-796.1548 2135.402,-793.2015"/>
<polygon fill="#666666" stroke="#666666" points="2137.5507,-795.9647 2143.404,-787.1334 2133.3211,-790.387 2137.5507,-795.9647"/>
</g>
<!-- RegisterCompaction -->
<g id="node52" class="node">
<title>RegisterCompaction</title>
<polygon fill="none" stroke="#000000" points="2518,-1011 2390,-1011 2390,-975 2518,-975 2518,-1011"/>
<text text-anchor="middle" x="2454" y="-989.3" font-family="Times,serif" font-size="14.00" fill="#000000">RegisterCompaction</text>
</g>
<!-- RegisterCompaction&#45;&gt;level0_compactions_in_progress_ -->
<g id="edge55" class="edge">
<title>RegisterCompaction&#45;&gt;level0_compactions_in_progress_</title>
<path fill="none" stroke="#666666" d="M2510.2574,-974.9895C2543.7491,-964.2674 2587.3172,-950.3193 2626.9597,-937.628"/>
<polygon fill="#666666" stroke="#666666" points="2628.2209,-940.8993 2636.6776,-934.5169 2626.0866,-934.2326 2628.2209,-940.8993"/>
</g>
<!-- RegisterCompaction&#45;&gt;compactions_in_progress_ -->
<g id="edge56" class="edge">
<title>RegisterCompaction&#45;&gt;compactions_in_progress_</title>
<path fill="none" stroke="#666666" d="M2518.1279,-999.2282C2548.0466,-1002.134 2584.5619,-1005.6805 2618.8926,-1009.0147"/>
<polygon fill="#666666" stroke="#666666" points="2618.6953,-1012.512 2628.9869,-1009.9951 2619.3721,-1005.5448 2618.6953,-1012.512"/>
</g>
<!-- PickFilesMarkedForCompaction -->
<g id="node53" class="node">
<title>PickFilesMarkedForCompaction</title>
<polygon fill="none" stroke="#000000" points="1077.5,-1055 1077.5,-1101 1272.5,-1101 1272.5,-1055 1077.5,-1055"/>
<text text-anchor="middle" x="1175" y="-1085.8" font-family="Times,serif" font-size="14.00" fill="#000000">PickFilesMarkedForCompaction</text>
<polyline fill="none" stroke="#000000" points="1077.5,-1078 1272.5,-1078 "/>
<text text-anchor="start" x="1085.5" y="-1062.8" font-family="Times,serif" font-size="14.00" fill="#000000">选择被标记为compaction的</text>
</g>
<!-- PickFilesMarkedForCompaction&#45;&gt;FilesMarkedForCompaction -->
<g id="edge59" class="edge">
<title>PickFilesMarkedForCompaction&#45;&gt;FilesMarkedForCompaction</title>
<path fill="none" stroke="#666666" d="M1187.1439,-1054.8914C1209.6932,-1011.6494 1259.0916,-915.3373 1296,-832 1313.6127,-792.2314 1298.3229,-768.5247 1332,-741 1428.1257,-662.4354 1494.5779,-744.6671 1607,-692 1618.9445,-686.4043 1676.5747,-636.2425 1711.9401,-604.977"/>
<polygon fill="#666666" stroke="#666666" points="1714.3871,-607.4852 1719.5527,-598.2349 1709.746,-602.2449 1714.3871,-607.4852"/>
</g>
<!-- PickFilesMarkedForCompaction&#45;&gt;ExpandInputsToCleanCut -->
<g id="edge60" class="edge">
<title>PickFilesMarkedForCompaction&#45;&gt;ExpandInputsToCleanCut</title>
<path fill="none" stroke="#666666" d="M1272.6367,-1081.9663C1439.6864,-1088.1754 1791.0679,-1098.7216 2088,-1091 2102.5286,-1090.6222 2117.9311,-1090.0152 2132.9266,-1089.3126"/>
<polygon fill="#666666" stroke="#666666" points="2133.4089,-1092.7934 2143.2274,-1088.8125 2133.0694,-1085.8016 2133.4089,-1092.7934"/>
</g>
<!-- PickFilesMarkedForCompaction&#45;&gt;level0_compactions_in_progress_ -->
<g id="edge61" class="edge">
<title>PickFilesMarkedForCompaction&#45;&gt;level0_compactions_in_progress_</title>
<path fill="none" stroke="#666666" d="M1272.6764,-1064.6684C1407.6458,-1046.2553 1658.796,-1012.0232 1873,-983 1920.7739,-976.527 2049.2916,-982.7386 2088,-954 2118.9799,-930.9993 2091.5489,-895.8738 2124,-875 2163.9023,-849.3333 2503.7052,-871.2352 2551,-875 2572.4583,-876.7081 2595.2133,-879.5382 2617.0816,-882.7781"/>
<polygon fill="#666666" stroke="#666666" points="2616.6469,-886.2521 2627.059,-884.2929 2617.6977,-879.3314 2616.6469,-886.2521"/>
</g>
<!-- start_level_inputs_ -->
<g id="node59" class="node">
<title>start_level_inputs_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1332,-1392 1332,-1522 1607,-1522 1607,-1392 1332,-1392"/>
<text text-anchor="start" x="1340" y="-1506.8" font-family="Times,serif" font-size="14.00" fill="#000000">start_level_inputs_</text>
<polyline fill="none" stroke="#000000" points="1332,-1499 1607,-1499 "/>
<text text-anchor="start" x="1340" y="-1483.8" font-family="Times,serif" font-size="14.00" fill="#000000">类型: CompactionInputFiles</text>
<polyline fill="none" stroke="#000000" points="1332,-1476 1607,-1476 "/>
<text text-anchor="start" x="1340" y="-1460.8" font-family="Times,serif" font-size="14.00" fill="#000000">int level;</text>
<polyline fill="none" stroke="#000000" points="1332,-1453 1607,-1453 "/>
<text text-anchor="start" x="1340" y="-1437.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::vector&lt;FileMetaData*&gt; files;</text>
<polyline fill="none" stroke="#000000" points="1332,-1430 1607,-1430 "/>
<text text-anchor="start" x="1340" y="-1414.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::vector&lt;AtomicCompactionUnitBoundary&gt;</text>
<text text-anchor="start" x="1340" y="-1399.8" font-family="Times,serif" font-size="14.00" fill="#000000"> atomic_compaction_unit_boundaries;</text>
</g>
<!-- PickFilesMarkedForCompaction&#45;&gt;start_level_inputs_ -->
<g id="edge111" class="edge">
<title>PickFilesMarkedForCompaction&#45;&gt;start_level_inputs_</title>
<path fill="none" stroke="#666666" d="M1242.2828,-1101.0597C1262.5236,-1111.1908 1282.8313,-1125.1776 1296,-1144 1357.5797,-1232.0176 1270.1732,-1295.1558 1332,-1383 1332.2048,-1383.291 1332.4111,-1383.5809 1332.6189,-1383.8698"/>
<polygon fill="#666666" stroke="#666666" points="1330.0845,-1386.3064 1339.0447,-1391.9601 1335.5659,-1381.9527 1330.0845,-1386.3064"/>
</g>
<!-- LevelCompactionBuilder_PickCompaction -->
<g id="node54" class="node">
<title>LevelCompactionBuilder_PickCompaction</title>
<polygon fill="none" stroke="#000000" points="237,-1464 237,-1500 344,-1500 344,-1464 237,-1464"/>
<text text-anchor="middle" x="290.5" y="-1478.3" font-family="Times,serif" font-size="14.00" fill="#000000">PickCompaction</text>
</g>
<!-- SetupOtherL0FilesIfNeeded -->
<g id="node55" class="node">
<title>SetupOtherL0FilesIfNeeded</title>
<polygon fill="none" stroke="#000000" points="1054,-1398.5 1054,-1489.5 1296,-1489.5 1296,-1398.5 1054,-1398.5"/>
<text text-anchor="middle" x="1175" y="-1474.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetupOtherL0FilesIfNeeded</text>
<polyline fill="none" stroke="#000000" points="1054,-1466.5 1296,-1466.5 "/>
<text text-anchor="start" x="1062" y="-1451.3" font-family="Times,serif" font-size="14.00" fill="#000000">如果start_level_为0 </text>
<text text-anchor="start" x="1062" y="-1436.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 且output level不为0</text>
<text text-anchor="start" x="1062" y="-1421.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 选择level0中其他和start_level_inputs_</text>
<text text-anchor="start" x="1062" y="-1406.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 重叠的file</text>
</g>
<!-- LevelCompactionBuilder_PickCompaction&#45;&gt;SetupOtherL0FilesIfNeeded -->
<g id="edge62" class="edge">
<title>LevelCompactionBuilder_PickCompaction&#45;&gt;SetupOtherL0FilesIfNeeded</title>
<path fill="none" stroke="#b83b5e" d="M338.7501,-1463.9095C391.4803,-1445.169 478.8811,-1417.1006 557,-1406 570.5911,-1404.0687 1016.9486,-1404.8714 1018,-1405 1026.507,-1406.0408 1035.2167,-1407.3876 1043.9599,-1408.9527"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1043.3623,-1412.4016 1053.8365,-1410.8078 1044.6545,-1405.5219 1043.3623,-1412.4016"/>
</g>
<!-- SetupOtherInputsIfNeeded -->
<g id="node56" class="node">
<title>SetupOtherInputsIfNeeded</title>
<polygon fill="none" stroke="#000000" points="1821,-1423 1659,-1423 1659,-1387 1821,-1387 1821,-1423"/>
<text text-anchor="middle" x="1740" y="-1401.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetupOtherInputsIfNeeded</text>
</g>
<!-- LevelCompactionBuilder_PickCompaction&#45;&gt;SetupOtherInputsIfNeeded -->
<g id="edge63" class="edge">
<title>LevelCompactionBuilder_PickCompaction&#45;&gt;SetupOtherInputsIfNeeded</title>
<path fill="none" stroke="#b83b5e" d="M335.0606,-1500.0265C402.1856,-1525.5093 533.7712,-1569 650,-1569 650,-1569 650,-1569 898.5,-1569 1014.4365,-1569 1559.1751,-1552.6896 1607,-1532 1656.6052,-1510.5402 1698.7647,-1461.9256 1721.6337,-1431.4547"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1724.739,-1433.1388 1727.8307,-1423.0051 1719.0943,-1428.9989 1724.739,-1433.1388"/>
</g>
<!-- GetCompaction -->
<g id="node57" class="node">
<title>GetCompaction</title>
<polygon fill="none" stroke="#000000" points="2274,-1207 2171,-1207 2171,-1171 2274,-1171 2274,-1207"/>
<text text-anchor="middle" x="2222.5" y="-1185.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetCompaction</text>
</g>
<!-- LevelCompactionBuilder_PickCompaction&#45;&gt;GetCompaction -->
<g id="edge64" class="edge">
<title>LevelCompactionBuilder_PickCompaction&#45;&gt;GetCompaction</title>
<path fill="none" stroke="#b83b5e" d="M312.2496,-1500.0209C329.5496,-1513.4052 354.9334,-1531.006 380,-1541 493.2149,-1586.1386 528.1185,-1589 650,-1589 650,-1589 650,-1589 898.5,-1589 1030.8079,-1589 1980.5205,-1611.1591 2088,-1534 2194.0817,-1457.8444 2216.4986,-1285.3261 2221.2332,-1217.3196"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="2224.7268,-1217.5302 2221.8514,-1207.333 2217.7402,-1217.0977 2224.7268,-1217.5302"/>
</g>
<!-- SetupInitialFiles -->
<g id="node58" class="node">
<title>SetupInitialFiles</title>
<polygon fill="none" stroke="#000000" points="380,-1230.5 380,-1291.5 521,-1291.5 521,-1230.5 380,-1230.5"/>
<text text-anchor="middle" x="450.5" y="-1276.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetupInitialFiles</text>
<polyline fill="none" stroke="#000000" points="380,-1268.5 521,-1268.5 "/>
<text text-anchor="start" x="388" y="-1253.3" font-family="Times,serif" font-size="14.00" fill="#000000">根据compaction score</text>
<text text-anchor="start" x="388" y="-1238.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 选择start_level_</text>
</g>
<!-- LevelCompactionBuilder_PickCompaction&#45;&gt;SetupInitialFiles -->
<g id="edge65" class="edge">
<title>LevelCompactionBuilder_PickCompaction&#45;&gt;SetupInitialFiles</title>
<path fill="none" stroke="#b83b5e" d="M303.5935,-1463.9146C329.4328,-1428.2241 387.4991,-1348.0201 422.3939,-1299.8215"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="425.3874,-1301.6551 428.4167,-1291.5025 419.7174,-1297.55 425.3874,-1301.6551"/>
</g>
<!-- SetupOtherL0FilesIfNeeded&#45;&gt;GetOverlappingL0Files -->
<g id="edge66" class="edge">
<title>SetupOtherL0FilesIfNeeded&#45;&gt;GetOverlappingL0Files</title>
<path fill="none" stroke="#666666" d="M1284.2644,-1398.4129C1288.3646,-1395.439 1292.2981,-1392.3029 1296,-1389 1319.2048,-1368.2961 1309.7732,-1350.7504 1332,-1329 1432.589,-1230.567 1509.554,-1273.5455 1607,-1172 1665.7383,-1110.7906 1704.8545,-1018.5119 1724.6781,-962.7832"/>
<polygon fill="#666666" stroke="#666666" points="1728.0477,-963.7498 1728.0402,-953.155 1721.4391,-961.4421 1728.0477,-963.7498"/>
</g>
<!-- SetupOtherL0FilesIfNeeded&#45;&gt;start_level_inputs_ -->
<g id="edge67" class="edge">
<title>SetupOtherL0FilesIfNeeded&#45;&gt;start_level_inputs_</title>
<path fill="none" stroke="#666666" d="M1296.0593,-1442.6897C1304.4974,-1442.9998 1313.0539,-1443.3456 1321.6134,-1443.722"/>
<polygon fill="#666666" stroke="#666666" points="1321.5075,-1447.2207 1331.6558,-1444.1775 1321.8247,-1440.2278 1321.5075,-1447.2207"/>
</g>
<!-- SetupOtherInputsIfNeeded&#45;&gt;SetupOtherInputs -->
<g id="edge68" class="edge">
<title>SetupOtherInputsIfNeeded&#45;&gt;SetupOtherInputs</title>
<path fill="none" stroke="#666666" d="M1747.0187,-1386.7186C1763.2717,-1344.2565 1804.5794,-1235.5963 1837,-1144 1853.7417,-1096.7005 1836.1564,-1071.06 1873,-1037 1884.4172,-1026.4454 1899.3365,-1019.8637 1914.4098,-1015.7984"/>
<polygon fill="#666666" stroke="#666666" points="1915.3678,-1019.1687 1924.302,-1013.4739 1913.7665,-1012.3543 1915.3678,-1019.1687"/>
</g>
<!-- SetupOtherInputsIfNeeded&#45;&gt;FilesRangeOverlapWithCompaction -->
<g id="edge69" class="edge">
<title>SetupOtherInputsIfNeeded&#45;&gt;FilesRangeOverlapWithCompaction</title>
<path fill="none" stroke="#666666" d="M1753.0287,-1386.9021C1773.089,-1358.4334 1811.8492,-1300.9642 1837,-1248 1857.9816,-1203.8155 1844.0988,-1183.4615 1873,-1144 1890.0499,-1120.7202 1915.8139,-1101.219 1937.8453,-1087.2997"/>
<polygon fill="#666666" stroke="#666666" points="1939.699,-1090.2687 1946.3924,-1082.0559 1936.0384,-1084.3021 1939.699,-1090.2687"/>
</g>
<!-- SetupOtherInputsIfNeeded&#45;&gt;GetGrandparents -->
<g id="edge70" class="edge">
<title>SetupOtherInputsIfNeeded&#45;&gt;GetGrandparents</title>
<path fill="none" stroke="#666666" d="M1748.3453,-1386.7654C1767.1822,-1344.8383 1813.2051,-1237.9567 1837,-1144 1851.0498,-1088.5229 1834.7301,-931.5502 1873,-889 1884.0826,-876.6778 1899.8754,-869.5907 1915.9547,-865.6109"/>
<polygon fill="#666666" stroke="#666666" points="1916.8933,-868.9904 1925.9639,-863.5154 1915.4588,-862.1389 1916.8933,-868.9904"/>
</g>
<!-- compaction_inputs_ -->
<g id="node60" class="node">
<title>compaction_inputs_</title>
<polygon fill="none" stroke="#000000" points="2044,-1525 1917,-1525 1917,-1489 2044,-1489 2044,-1525"/>
<text text-anchor="middle" x="1980.5" y="-1503.3" font-family="Times,serif" font-size="14.00" fill="#000000">compaction_inputs_</text>
</g>
<!-- SetupOtherInputsIfNeeded&#45;&gt;compaction_inputs_ -->
<g id="edge71" class="edge">
<title>SetupOtherInputsIfNeeded&#45;&gt;compaction_inputs_</title>
<path fill="none" stroke="#666666" d="M1782.443,-1423.0008C1823.1474,-1440.2642 1884.6963,-1466.3681 1928.3641,-1484.8883"/>
<polygon fill="#666666" stroke="#666666" points="1927.0995,-1488.1537 1937.6724,-1488.8361 1929.8327,-1481.7093 1927.0995,-1488.1537"/>
</g>
<!-- GetCompaction&#45;&gt;ComputeCompactionScore -->
<g id="edge73" class="edge">
<title>GetCompaction&#45;&gt;ComputeCompactionScore</title>
<path fill="none" stroke="#f08a5d" d="M2274.0511,-1176.678C2291.6209,-1169.907 2309.669,-1159.5876 2321,-1144 2362.0376,-1087.5462 2339.6193,-899.5945 2357,-832 2377.3289,-752.9397 2418.3964,-665.3693 2439.9955,-622.1675"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="2443.1656,-623.6543 2444.5447,-613.1496 2436.9158,-620.5015 2443.1656,-623.6543"/>
</g>
<!-- GetCompaction&#45;&gt;Compaction -->
<g id="edge74" class="edge">
<title>GetCompaction&#45;&gt;Compaction</title>
<path fill="none" stroke="#f08a5d" d="M2274.2087,-1184.0748C2299.2064,-1181.7734 2329.6507,-1179.0875 2357,-1177 2472.4522,-1168.1878 2767.511,-1181.6701 2877,-1144 2905.2064,-1134.2955 2933.1087,-1118.9572 2958.2632,-1102.33"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="2960.3527,-1105.1425 2966.6849,-1096.6482 2956.4377,-1099.3396 2960.3527,-1105.1425"/>
</g>
<!-- GetCompaction&#45;&gt;RegisterCompaction -->
<g id="edge75" class="edge">
<title>GetCompaction&#45;&gt;RegisterCompaction</title>
<path fill="none" stroke="#f08a5d" d="M2274.2175,-1174.982C2291.1696,-1168.1072 2308.7722,-1158.1571 2321,-1144 2358.5112,-1100.5703 2316.1974,-1060.3532 2357,-1020 2363.6174,-1013.4555 2371.6779,-1008.4654 2380.2951,-1004.6661"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="2381.7503,-1007.8563 2389.8222,-1000.9937 2379.2325,-1001.3247 2381.7503,-1007.8563"/>
</g>
<!-- MaxFileSizeForLevel -->
<g id="node61" class="node">
<title>MaxFileSizeForLevel</title>
<polygon fill="none" stroke="#000000" points="2522,-1222 2386,-1222 2386,-1186 2522,-1186 2522,-1222"/>
<text text-anchor="middle" x="2454" y="-1200.3" font-family="Times,serif" font-size="14.00" fill="#000000">MaxFileSizeForLevel</text>
</g>
<!-- GetCompaction&#45;&gt;MaxFileSizeForLevel -->
<g id="edge76" class="edge">
<title>GetCompaction&#45;&gt;MaxFileSizeForLevel</title>
<path fill="none" stroke="#f08a5d" d="M2274.165,-1192.3476C2303.994,-1194.2804 2342.1144,-1196.7504 2375.5748,-1198.9185"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="2375.5897,-1202.4267 2385.7951,-1199.5807 2376.0423,-1195.4413 2375.5897,-1202.4267"/>
</g>
<!-- SetupInitialFiles&#45;&gt;CompactionScore -->
<g id="edge77" class="edge">
<title>SetupInitialFiles&#45;&gt;CompactionScore</title>
<path fill="none" stroke="#3f72af" d="M462.9796,-1230.4109C499.211,-1141.6032 604.0318,-884.674 638.7107,-799.6715"/>
<polygon fill="#3f72af" stroke="#3f72af" points="642.046,-800.7617 642.5828,-790.1805 635.5646,-798.1174 642.046,-800.7617"/>
</g>
<!-- SetupInitialFiles&#45;&gt;CompactionScoreLevel -->
<g id="edge78" class="edge">
<title>SetupInitialFiles&#45;&gt;CompactionScoreLevel</title>
<path fill="none" stroke="#3f72af" d="M452.7402,-1230.3966C460.6456,-1130.625 490.4247,-817.0553 557,-745 560.3872,-741.334 564.2394,-738.1552 568.4034,-735.3999"/>
<polygon fill="#3f72af" stroke="#3f72af" points="570.3763,-738.3043 577.3389,-730.3185 566.916,-732.2194 570.3763,-738.3043"/>
</g>
<!-- SetupInitialFiles&#45;&gt;BottommostFilesMarkedForCompaction -->
<g id="edge79" class="edge">
<title>SetupInitialFiles&#45;&gt;BottommostFilesMarkedForCompaction</title>
<path fill="none" stroke="#3f72af" d="M452.0942,-1230.1883C457.4855,-1142.712 479.3007,-886.5296 557,-691 624.3346,-521.553 639.6829,-463.6307 779,-346 793.2512,-333.9671 810.7634,-324.3867 827.9431,-316.9299"/>
<polygon fill="#3f72af" stroke="#3f72af" points="829.5288,-320.0616 837.4304,-313.0036 826.852,-313.5936 829.5288,-320.0616"/>
</g>
<!-- SetupInitialFiles&#45;&gt;ExpandInputsToCleanCut -->
<g id="edge80" class="edge">
<title>SetupInitialFiles&#45;&gt;ExpandInputsToCleanCut</title>
<path fill="none" stroke="#3f72af" d="M453.6486,-1291.7042C461.0847,-1347.9988 484.9219,-1467.9145 557,-1533 673.9256,-1638.5822 740.9589,-1628 898.5,-1628 898.5,-1628 898.5,-1628 1740,-1628 1900.2097,-1628 1984.8498,-1656.5855 2088,-1534 2144.0371,-1467.4045 2077.9256,-1217.8394 2124,-1144 2133.8381,-1128.2333 2149.4896,-1116.0125 2165.4461,-1106.8389"/>
<polygon fill="#3f72af" stroke="#3f72af" points="2167.172,-1109.8847 2174.3073,-1102.0528 2163.8453,-1103.7257 2167.172,-1109.8847"/>
</g>
<!-- SetupInitialFiles&#45;&gt;PickFilesMarkedForCompaction -->
<g id="edge81" class="edge">
<title>SetupInitialFiles&#45;&gt;PickFilesMarkedForCompaction</title>
<path fill="none" stroke="#3f72af" d="M506.6069,-1230.4178C522.5559,-1222.6086 540.1712,-1214.7934 557,-1209 731.0441,-1149.0844 942.4984,-1111.4256 1067.5089,-1092.5924"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1068.0996,-1096.043 1077.4725,-1091.1036 1067.0651,-1089.1199 1068.0996,-1096.043"/>
</g>
<!-- SetupInitialFiles&#45;&gt;start_level_inputs_ -->
<g id="edge82" class="edge">
<title>SetupInitialFiles&#45;&gt;start_level_inputs_</title>
<path fill="none" stroke="#3f72af" d="M454.7353,-1291.6637C463.6346,-1343.6043 489.3686,-1448.3655 557,-1501 686.6566,-1601.9059 1135.3314,-1557.3285 1296,-1523 1304.5869,-1521.1653 1313.3112,-1518.9736 1322.0466,-1516.5215"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1323.2858,-1519.8061 1331.9069,-1513.6477 1321.327,-1513.0857 1323.2858,-1519.8061"/>
</g>
<!-- PickIntraL0Compaction -->
<g id="node62" class="node">
<title>PickIntraL0Compaction</title>
<polygon fill="none" stroke="#000000" points="557,-1415 557,-1491 743,-1491 743,-1415 557,-1415"/>
<text text-anchor="middle" x="650" y="-1475.8" font-family="Times,serif" font-size="14.00" fill="#000000">PickIntraL0Compaction</text>
<polyline fill="none" stroke="#000000" points="557,-1468 743,-1468 "/>
<text text-anchor="start" x="565" y="-1452.8" font-family="Times,serif" font-size="14.00" fill="#000000">level 0 file之间compaction</text>
<text text-anchor="start" x="565" y="-1437.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 输出还是level 0</text>
<text text-anchor="start" x="565" y="-1422.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 增加read效率，降低写放大</text>
</g>
<!-- SetupInitialFiles&#45;&gt;PickIntraL0Compaction -->
<g id="edge83" class="edge">
<title>SetupInitialFiles&#45;&gt;PickIntraL0Compaction</title>
<path fill="none" stroke="#3f72af" d="M482.5531,-1291.8481C515.1835,-1323.2517 566.1132,-1372.2668 603.2414,-1407.9992"/>
<polygon fill="#3f72af" stroke="#3f72af" points="600.8412,-1410.5469 610.4735,-1414.9594 605.6953,-1405.5032 600.8412,-1410.5469"/>
</g>
<!-- PickFileToCompact -->
<g id="node63" class="node">
<title>PickFileToCompact</title>
<polygon fill="none" stroke="#000000" points="1062.5,-1157 1062.5,-1233 1287.5,-1233 1287.5,-1157 1062.5,-1157"/>
<text text-anchor="middle" x="1175" y="-1217.8" font-family="Times,serif" font-size="14.00" fill="#000000">PickFileToCompact</text>
<polyline fill="none" stroke="#000000" points="1062.5,-1210 1287.5,-1210 "/>
<text text-anchor="start" x="1070.5" y="-1194.8" font-family="Times,serif" font-size="14.00" fill="#000000">选择start_level_中</text>
<text text-anchor="start" x="1070.5" y="-1179.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 需要compact的file</text>
<text text-anchor="start" x="1070.5" y="-1164.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 以及下一层和该file overlap的文件</text>
</g>
<!-- SetupInitialFiles&#45;&gt;PickFileToCompact -->
<g id="edge84" class="edge">
<title>SetupInitialFiles&#45;&gt;PickFileToCompact</title>
<path fill="none" stroke="#3f72af" d="M521.1563,-1260.2684C628.8197,-1258.393 840.2049,-1251.7202 1018,-1228 1029.1036,-1226.5186 1040.5933,-1224.6882 1052.0739,-1222.655"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1052.9396,-1226.055 1062.1506,-1220.8197 1051.6853,-1219.1683 1052.9396,-1226.055"/>
</g>
<!-- PickExpiredTtlFiles -->
<g id="node64" class="node">
<title>PickExpiredTtlFiles</title>
<polygon fill="none" stroke="#000000" points="1112.5,-1333 1112.5,-1379 1237.5,-1379 1237.5,-1333 1112.5,-1333"/>
<text text-anchor="middle" x="1175" y="-1363.8" font-family="Times,serif" font-size="14.00" fill="#000000">PickExpiredTtlFiles</text>
<polyline fill="none" stroke="#000000" points="1112.5,-1356 1237.5,-1356 "/>
<text text-anchor="start" x="1120.5" y="-1340.8" font-family="Times,serif" font-size="14.00" fill="#000000">选择过期的文件</text>
</g>
<!-- SetupInitialFiles&#45;&gt;PickExpiredTtlFiles -->
<g id="edge85" class="edge">
<title>SetupInitialFiles&#45;&gt;PickExpiredTtlFiles</title>
<path fill="none" stroke="#3f72af" d="M521.2872,-1270.282C659.1922,-1288.3647 962.5333,-1328.1403 1102.1052,-1346.4417"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1101.9005,-1349.9447 1112.2707,-1347.7746 1102.8107,-1343.0041 1101.9005,-1349.9447"/>
</g>
<!-- PickFilesMarkedForPeriodicCompaction -->
<g id="node65" class="node">
<title>PickFilesMarkedForPeriodicCompaction</title>
<polygon fill="none" stroke="#000000" points="1055,-1252.5 1055,-1313.5 1295,-1313.5 1295,-1252.5 1055,-1252.5"/>
<text text-anchor="middle" x="1175" y="-1298.3" font-family="Times,serif" font-size="14.00" fill="#000000">PickFilesMarkedForPeriodicCompaction</text>
<polyline fill="none" stroke="#000000" points="1055,-1290.5 1295,-1290.5 "/>
<text text-anchor="start" x="1063" y="-1275.3" font-family="Times,serif" font-size="14.00" fill="#000000">选择标记为需要</text>
<text text-anchor="start" x="1063" y="-1260.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 周期性compact的文件</text>
</g>
<!-- SetupInitialFiles&#45;&gt;PickFilesMarkedForPeriodicCompaction -->
<g id="edge86" class="edge">
<title>SetupInitialFiles&#45;&gt;PickFilesMarkedForPeriodicCompaction</title>
<path fill="none" stroke="#3f72af" d="M521.2872,-1263.1495C642.4132,-1266.8276 891.1669,-1274.3812 1044.4795,-1279.0366"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1044.792,-1282.5477 1054.8936,-1279.3529 1045.0045,-1275.5509 1044.792,-1282.5477"/>
</g>
<!-- SetupInitialFiles&#45;&gt;start_level_ -->
<g id="edge87" class="edge">
<title>SetupInitialFiles&#45;&gt;start_level_</title>
<path fill="none" stroke="#3f72af" d="M521.135,-1246.417C533.0819,-1244.1386 545.3773,-1241.9097 557,-1240 644.8803,-1225.5607 746.0849,-1212.6923 815.3704,-1204.4536"/>
<polygon fill="#3f72af" stroke="#3f72af" points="815.8365,-1207.9229 825.3559,-1203.272 815.0138,-1200.9714 815.8365,-1207.9229"/>
</g>
<!-- start_level_inputs_&#45;&gt;SetupOtherL0FilesIfNeeded -->
<g id="edge98" class="edge">
<title>start_level_inputs_&#45;&gt;SetupOtherL0FilesIfNeeded</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1331.6558,-1457.6529C1323.2047,-1457.3019 1314.7121,-1456.9193 1306.29,-1456.5101"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="1306.2218,-1453.0024 1296.0593,-1455.9981 1305.8718,-1459.9937 1306.2218,-1453.0024"/>
</g>
<!-- start_level_inputs_&#45;&gt;SetupOtherInputsIfNeeded -->
<g id="edge99" class="edge">
<title>start_level_inputs_&#45;&gt;SetupOtherInputsIfNeeded</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1607.1273,-1430.543C1621.2718,-1427.8239 1635.3816,-1425.1115 1648.8377,-1422.5247"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="1649.8305,-1425.898 1658.99,-1420.5731 1648.509,-1419.0239 1649.8305,-1425.898"/>
</g>
<!-- start_level_inputs_&#45;&gt;compaction_inputs_ -->
<g id="edge100" class="edge">
<title>start_level_inputs_&#45;&gt;compaction_inputs_</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1607.1108,-1470.4649C1703.4399,-1479.8904 1828.4036,-1492.1178 1906.5307,-1499.7623"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="1906.4706,-1503.273 1916.7639,-1500.7636 1907.1523,-1496.3063 1906.4706,-1503.273"/>
</g>
<!-- compaction_inputs_&#45;&gt;GetCompaction -->
<g id="edge72" class="edge">
<title>compaction_inputs_&#45;&gt;GetCompaction</title>
<path fill="none" stroke="#666666" d="M2044.0783,-1497.5184C2059.7612,-1492.7768 2075.5984,-1485.6653 2088,-1475 2169.4872,-1404.922 2205.0178,-1274.6472 2217.2124,-1217.3201"/>
<polygon fill="#666666" stroke="#666666" points="2220.7113,-1217.6791 2219.2855,-1207.1807 2213.8532,-1216.2769 2220.7113,-1217.6791"/>
</g>
<!-- FindIntraL0Compaction -->
<g id="node67" class="node">
<title>FindIntraL0Compaction</title>
<polygon fill="none" stroke="#000000" points="804,-1468.5 804,-1529.5 993,-1529.5 993,-1468.5 804,-1468.5"/>
<text text-anchor="middle" x="898.5" y="-1514.3" font-family="Times,serif" font-size="14.00" fill="#000000">FindIntraL0Compaction</text>
<polyline fill="none" stroke="#000000" points="804,-1506.5 993,-1506.5 "/>
<text text-anchor="start" x="812" y="-1491.3" font-family="Times,serif" font-size="14.00" fill="#000000">将Level0中需要compaction的</text>
<text text-anchor="start" x="812" y="-1476.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 放到start_level_inputs中</text>
</g>
<!-- PickIntraL0Compaction&#45;&gt;FindIntraL0Compaction -->
<g id="edge101" class="edge">
<title>PickIntraL0Compaction&#45;&gt;FindIntraL0Compaction</title>
<path fill="none" stroke="#666666" d="M743.2392,-1470.2596C759.8173,-1473.3284 777.1823,-1476.5428 794.0477,-1479.6648"/>
<polygon fill="#666666" stroke="#666666" points="793.4404,-1483.1117 803.9104,-1481.4905 794.7145,-1476.2287 793.4404,-1483.1117"/>
</g>
<!-- level0_file_num_compaction_trigger -->
<g id="node68" class="node">
<title>level0_file_num_compaction_trigger</title>
<polygon fill="none" stroke="#000000" points="1008,-1450 789,-1450 789,-1414 1008,-1414 1008,-1450"/>
<text text-anchor="middle" x="898.5" y="-1428.3" font-family="Times,serif" font-size="14.00" fill="#000000">level0_file_num_compaction_trigger</text>
</g>
<!-- PickIntraL0Compaction&#45;&gt;level0_file_num_compaction_trigger -->
<g id="edge102" class="edge">
<title>PickIntraL0Compaction&#45;&gt;level0_file_num_compaction_trigger</title>
<path fill="none" stroke="#666666" d="M743.2392,-1445.1206C754.8594,-1444.1386 766.8661,-1443.124 778.8165,-1442.1141"/>
<polygon fill="#666666" stroke="#666666" points="779.1621,-1445.5975 788.8318,-1441.2677 778.5726,-1438.6223 779.1621,-1445.5975"/>
</g>
<!-- PickFileToCompact&#45;&gt;GetOverlappingInputs -->
<g id="edge92" class="edge">
<title>PickFileToCompact&#45;&gt;GetOverlappingInputs</title>
<path fill="none" stroke="#17b978" d="M1273.1982,-1156.9753C1281.0834,-1152.9152 1288.7826,-1148.5816 1296,-1144 1471.0957,-1032.8495 1456.5484,-922.8226 1643,-832 1795.1907,-757.8663 1993.1773,-736.9688 2113.8965,-731.4495"/>
<polygon fill="#17b978" stroke="#17b978" points="2114.0514,-734.9462 2123.8917,-731.0196 2113.7505,-727.9526 2114.0514,-734.9462"/>
</g>
<!-- PickFileToCompact&#45;&gt;NextCompactionIndex -->
<g id="edge93" class="edge">
<title>PickFileToCompact&#45;&gt;NextCompactionIndex</title>
<path fill="none" stroke="#17b978" d="M1284.4566,-1156.9482C1288.7422,-1153.0438 1292.6363,-1148.7411 1296,-1144 1370.4665,-1039.0394 1278.9709,-683.2599 1332,-566 1352.267,-521.1849 1394.1202,-482.9381 1426.357,-458.3376"/>
<polygon fill="#17b978" stroke="#17b978" points="1428.8269,-460.8615 1434.7465,-452.0746 1424.6394,-455.2521 1428.8269,-460.8615"/>
</g>
<!-- PickFileToCompact&#45;&gt;SetNextCompactionIndex -->
<g id="edge94" class="edge">
<title>PickFileToCompact&#45;&gt;SetNextCompactionIndex</title>
<path fill="none" stroke="#17b978" d="M1284.4058,-1156.912C1288.7046,-1153.017 1292.6154,-1148.7262 1296,-1144 1361.6337,-1052.3487 1261.1728,-725.6998 1332,-638 1336.7788,-632.0828 1342.3792,-627.0086 1348.5365,-622.6604"/>
<polygon fill="#17b978" stroke="#17b978" points="1350.657,-625.4612 1357.2532,-617.1701 1346.9263,-619.5382 1350.657,-625.4612"/>
</g>
<!-- PickFileToCompact&#45;&gt;ExpandInputsToCleanCut -->
<g id="edge95" class="edge">
<title>PickFileToCompact&#45;&gt;ExpandInputsToCleanCut</title>
<path fill="none" stroke="#17b978" d="M1286.8478,-1233.0529C1290.1617,-1236.1161 1293.234,-1239.4253 1296,-1243 1375.2103,-1345.3704 1234.982,-1446.3175 1332,-1532 1423.6101,-1612.9065 1487.314,-1556.7697 1607,-1532 1835.0765,-1484.7983 1941.5442,-1505.1011 2088,-1324 2139.301,-1260.5634 2077.2269,-1210.8451 2124,-1144 2134.8967,-1128.4271 2151.2549,-1116.1537 2167.5263,-1106.8739"/>
<polygon fill="#17b978" stroke="#17b978" points="2169.3802,-1109.8507 2176.5218,-1102.0245 2166.0585,-1103.689 2169.3802,-1109.8507"/>
</g>
<!-- PickFileToCompact&#45;&gt;FilesRangeOverlapWithCompaction -->
<g id="edge96" class="edge">
<title>PickFileToCompact&#45;&gt;FilesRangeOverlapWithCompaction</title>
<path fill="none" stroke="#17b978" d="M1287.6567,-1196.0079C1375.2864,-1195.1083 1499.6171,-1190.1385 1607,-1172 1720.8592,-1152.7675 1849.3322,-1111.0121 1922.0448,-1085.4233"/>
<polygon fill="#17b978" stroke="#17b978" points="1923.2364,-1088.7144 1931.4952,-1082.0779 1920.9004,-1082.1156 1923.2364,-1088.7144"/>
</g>
<!-- PickFileToCompact&#45;&gt;start_level_inputs_ -->
<g id="edge97" class="edge">
<title>PickFileToCompact&#45;&gt;start_level_inputs_</title>
<path fill="none" stroke="#17b978" d="M1285.7581,-1233.0833C1289.4246,-1236.1403 1292.862,-1239.4396 1296,-1243 1338.4797,-1291.1983 1292.3875,-1332.4189 1332,-1383 1332.303,-1383.3868 1332.6085,-1383.7719 1332.9166,-1384.1552"/>
<polygon fill="#17b978" stroke="#17b978" points="1330.5214,-1386.7326 1339.744,-1391.9476 1335.7864,-1382.1196 1330.5214,-1386.7326"/>
</g>
<!-- PickExpiredTtlFiles&#45;&gt;ExpiredTtlFiles -->
<g id="edge104" class="edge">
<title>PickExpiredTtlFiles&#45;&gt;ExpiredTtlFiles</title>
<path fill="none" stroke="#666666" d="M1237.5848,-1351.7811C1258.6965,-1347.3222 1280.7479,-1338.8436 1296,-1323 1345.0482,-1272.0495 1300.0704,-1231.1045 1332,-1168 1432.9874,-968.4117 1634.7715,-782.5134 1710.4352,-716.9509"/>
<polygon fill="#666666" stroke="#666666" points="1712.9003,-719.4469 1718.1928,-710.2686 1708.3318,-714.1432 1712.9003,-719.4469"/>
</g>
<!-- PickExpiredTtlFiles&#45;&gt;ExpandInputsToCleanCut -->
<g id="edge105" class="edge">
<title>PickExpiredTtlFiles&#45;&gt;ExpandInputsToCleanCut</title>
<path fill="none" stroke="#666666" d="M1237.5361,-1345.5217C1386.9804,-1319.5995 1775.6562,-1246.9552 2088,-1143 2118.4898,-1132.8523 2151.5551,-1118.3976 2177.2714,-1106.3356"/>
<polygon fill="#666666" stroke="#666666" points="2178.8569,-1109.4574 2186.395,-1102.0124 2175.8594,-1103.1317 2178.8569,-1109.4574"/>
</g>
<!-- PickExpiredTtlFiles&#45;&gt;start_level_inputs_ -->
<g id="edge106" class="edge">
<title>PickExpiredTtlFiles&#45;&gt;start_level_inputs_</title>
<path fill="none" stroke="#666666" d="M1237.5605,-1371.6897C1256.4643,-1376.7981 1277.1907,-1382.7691 1296,-1389 1304.5703,-1391.8391 1313.3339,-1394.8672 1322.1466,-1398.0095"/>
<polygon fill="#666666" stroke="#666666" points="1321.1276,-1401.3625 1331.7219,-1401.4604 1323.501,-1394.7772 1321.1276,-1401.3625"/>
</g>
<!-- PickFilesMarkedForPeriodicCompaction&#45;&gt;FilesMarkedForPeriodicCompaction -->
<g id="edge107" class="edge">
<title>PickFilesMarkedForPeriodicCompaction&#45;&gt;FilesMarkedForPeriodicCompaction</title>
<path fill="none" stroke="#666666" d="M1287.459,-1252.1568C1290.5517,-1249.3618 1293.4174,-1246.3169 1296,-1243 1364.7099,-1154.7527 1271.7664,-835.2367 1332,-741 1347.7647,-716.3358 1374.4766,-698.9944 1400.1866,-687.1707"/>
<polygon fill="#666666" stroke="#666666" points="1401.8295,-690.2724 1409.5913,-683.0609 1399.0265,-683.8581 1401.8295,-690.2724"/>
</g>
<!-- PickFilesMarkedForPeriodicCompaction&#45;&gt;ExpandInputsToCleanCut -->
<g id="edge108" class="edge">
<title>PickFilesMarkedForPeriodicCompaction&#45;&gt;ExpandInputsToCleanCut</title>
<path fill="none" stroke="#666666" d="M1295.1616,-1260.1722C1507.7914,-1219.7776 1945.5992,-1136.6045 2133.568,-1100.895"/>
<polygon fill="#666666" stroke="#666666" points="2134.2441,-1104.3292 2143.4151,-1099.0242 2132.9375,-1097.4522 2134.2441,-1104.3292"/>
</g>
<!-- PickFilesMarkedForPeriodicCompaction&#45;&gt;start_level_inputs_ -->
<g id="edge109" class="edge">
<title>PickFilesMarkedForPeriodicCompaction&#45;&gt;start_level_inputs_</title>
<path fill="none" stroke="#666666" d="M1280.728,-1313.5744C1286.1017,-1316.7242 1291.2374,-1320.1893 1296,-1324 1319.9854,-1343.1913 1309.699,-1361.8748 1332,-1383 1332.8118,-1383.769 1333.6332,-1384.5325 1334.4636,-1385.2904"/>
<polygon fill="#666666" stroke="#666666" points="1332.3155,-1388.0601 1342.1666,-1391.9597 1336.8975,-1382.768 1332.3155,-1388.0601"/>
</g>
<!-- level0_compactions_in_progress -->
<g id="node69" class="node">
<title>level0_compactions_in_progress</title>
<polygon fill="none" stroke="#000000" points="1567,-1374 1372,-1374 1372,-1338 1567,-1338 1567,-1374"/>
<text text-anchor="middle" x="1469.5" y="-1352.3" font-family="Times,serif" font-size="14.00" fill="#000000">level0_compactions_in_progress</text>
</g>
<!-- PickFilesMarkedForPeriodicCompaction&#45;&gt;level0_compactions_in_progress -->
<g id="edge110" class="edge">
<title>PickFilesMarkedForPeriodicCompaction&#45;&gt;level0_compactions_in_progress</title>
<path fill="none" stroke="#666666" d="M1295.2092,-1312.7972C1325.9402,-1320.4147 1358.2984,-1328.4356 1386.6791,-1335.4706"/>
<polygon fill="#666666" stroke="#666666" points="1385.9943,-1338.9067 1396.5427,-1337.9155 1387.6785,-1332.1123 1385.9943,-1338.9067"/>
</g>
<!-- start_level_&#45;&gt;start_level_inputs_ -->
<g id="edge88" class="edge">
<title>start_level_&#45;&gt;start_level_inputs_</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M913.1313,-1218.0011C936.9405,-1255.99 984.7472,-1334.6496 1018,-1405 1037.1178,-1445.4462 1017.141,-1473.6466 1054,-1499 1076.154,-1514.2386 1269.3005,-1502.1856 1296,-1499 1304.4963,-1497.9863 1313.178,-1496.7027 1321.9063,-1495.2192"/>
<polygon fill="#666666" stroke="#666666" points="1322.5413,-1498.6613 1331.7733,-1493.4632 1321.3147,-1491.7696 1322.5413,-1498.6613"/>
</g>
<!-- start_level_&#45;&gt;PickFileToCompact -->
<g id="edge89" class="edge">
<title>start_level_&#45;&gt;PickFileToCompact</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M971.5088,-1195C996.3035,-1195 1024.7308,-1195 1052.3204,-1195"/>
<polygon fill="#666666" stroke="#666666" points="1052.4388,-1198.5001 1062.4387,-1195 1052.4387,-1191.5001 1052.4388,-1198.5001"/>
</g>
<!-- FindIntraL0Compaction&#45;&gt;start_level_inputs_ -->
<g id="edge103" class="edge">
<title>FindIntraL0Compaction&#45;&gt;start_level_inputs_</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M993.0956,-1512.9121C1074.0297,-1522.3547 1193.3717,-1530.4264 1296,-1514 1304.5299,-1512.6347 1313.2095,-1510.9144 1321.9101,-1508.9301"/>
<polygon fill="#666666" stroke="#666666" points="1322.8228,-1512.3106 1331.7356,-1506.5824 1321.196,-1505.5023 1322.8228,-1512.3106"/>
</g>
<!-- PickCompaction -->
<g id="node70" class="node">
<title>PickCompaction</title>
<polygon fill="none" stroke="#000000" points="158,-1500 51,-1500 51,-1464 158,-1464 158,-1500"/>
<text text-anchor="middle" x="104.5" y="-1478.3" font-family="Times,serif" font-size="14.00" fill="#000000">PickCompaction</text>
</g>
<!-- PickCompaction&#45;&gt;LevelCompactionBuilder_PickCompaction -->
<g id="edge112" class="edge">
<title>PickCompaction&#45;&gt;LevelCompactionBuilder_PickCompaction</title>
<path fill="none" stroke="#666666" d="M158.2989,-1482C179.6984,-1482 204.4874,-1482 226.7775,-1482"/>
<polygon fill="#666666" stroke="#666666" points="226.822,-1485.5001 236.822,-1482 226.822,-1478.5001 226.822,-1485.5001"/>
</g>
</g>
</svg>
