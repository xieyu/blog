<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: optimistic_transaction Pages: 1 -->
<svg width="1653pt" height="866pt"
 viewBox="0.00 0.00 1653.00 865.52" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 861.5215)">
<title>optimistic_transaction</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-861.5215 1649,-861.5215 1649,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="405,-376 405,-460 936.5,-460 936.5,-376 405,-376"/>
<text text-anchor="middle" x="670.75" y="-440" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_OptimisticTransactionDB</title>
<polygon fill="none" stroke="#000000" points="15,-8 15,-144 1209,-144 1209,-8 15,-8"/>
<text text-anchor="middle" x="612" y="-124" font-family="Times,serif" font-size="20.00" fill="#000000">OptimisticTransactionDB</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_TransactionBaseImpl</title>
<polygon fill="none" stroke="#000000" points="10,-468 10,-812 1459,-812 1459,-468 10,-468"/>
<text text-anchor="middle" x="734.5" y="-792" font-family="Times,serif" font-size="20.00" fill="#000000">TransactionBaseImpl</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_KvOperation</title>
<polygon fill="none" stroke="#000000" points="18,-476 18,-774 159,-774 159,-476 18,-476"/>
<text text-anchor="middle" x="88.5" y="-754" font-family="Times,serif" font-size="20.00" fill="#000000">KV Write 操作</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_TransactionUtil</title>
<polygon fill="none" stroke="#000000" points="1479,-648 1479,-741 1637,-741 1637,-648 1479,-648"/>
<text text-anchor="middle" x="1558" y="-721" font-family="Times,serif" font-size="20.00" fill="#000000">TransactionUtil</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_OptimisticTransaction</title>
<polygon fill="none" stroke="#000000" points="8,-152 8,-368 1001,-368 1001,-152 8,-152"/>
<text text-anchor="middle" x="504.5" y="-348" font-family="Times,serif" font-size="20.00" fill="#000000">OptimisticTransaction</text>
</g>
<!-- DBImpl_Write -->
<g id="node1" class="node">
<title>DBImpl_Write</title>
<polygon fill="none" stroke="#000000" points="874.5,-385 874.5,-421 928.5,-421 928.5,-385 874.5,-385"/>
<text text-anchor="middle" x="901.5" y="-399.3" font-family="Times,serif" font-size="14.00" fill="#000000">Write</text>
</g>
<!-- DBImpl_WriteWithCallback -->
<g id="node2" class="node">
<title>DBImpl_WriteWithCallback</title>
<polygon fill="none" stroke="#000000" points="413,-385 413,-421 537,-421 537,-385 413,-385"/>
<text text-anchor="middle" x="475" y="-399.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteWithCallback</text>
</g>
<!-- DBImpl_WriteWithCallback&#45;&gt;DBImpl_Write -->
<g id="edge1" class="edge">
<title>DBImpl_WriteWithCallback&#45;&gt;DBImpl_Write</title>
<path fill="none" stroke="#666666" d="M537.0168,-403C626.8596,-403 790.4878,-403 863.9903,-403"/>
<polygon fill="#666666" stroke="#666666" points="864.1615,-406.5001 874.1615,-403 864.1615,-399.5001 864.1615,-406.5001"/>
</g>
<!-- OptimisticTransactionCallback -->
<g id="node28" class="node">
<title>OptimisticTransactionCallback</title>
<polygon fill="none" stroke="#000000" points="770,-330 584,-330 584,-294 770,-294 770,-330"/>
<text text-anchor="middle" x="677" y="-308.3" font-family="Times,serif" font-size="14.00" fill="#000000">OptimisticTransactionCallback</text>
</g>
<!-- DBImpl_WriteWithCallback&#45;&gt;OptimisticTransactionCallback -->
<g id="edge33" class="edge">
<title>DBImpl_WriteWithCallback&#45;&gt;OptimisticTransactionCallback</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M533.9673,-384.945C537.3832,-383.6683 540.7487,-382.3502 544,-381 576.1272,-367.6581 610.9833,-349.426 636.9498,-335.0537"/>
<polygon fill="#666666" stroke="#666666" points="638.7182,-338.075 645.7447,-330.1454 635.3069,-331.9625 638.7182,-338.075"/>
</g>
<!-- BeginTransaction -->
<g id="node3" class="node">
<title>BeginTransaction</title>
<polygon fill="none" stroke="#000000" points="23,-55 23,-101 154,-101 154,-55 23,-55"/>
<text text-anchor="middle" x="88.5" y="-85.8" font-family="Times,serif" font-size="14.00" fill="#000000">BeginTransaction</text>
<polyline fill="none" stroke="#000000" points="23,-78 154,-78 "/>
<text text-anchor="middle" x="88.5" y="-62.8" font-family="Times,serif" font-size="14.00" fill="#000000">创建一个乐观事务</text>
</g>
<!-- ReinitializeTransaction -->
<g id="node4" class="node">
<title>ReinitializeTransaction</title>
<polygon fill="none" stroke="#000000" points="197,-44.5 197,-105.5 370,-105.5 370,-44.5 197,-44.5"/>
<text text-anchor="middle" x="283.5" y="-90.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReinitializeTransaction</text>
<polyline fill="none" stroke="#000000" points="197,-82.5 370,-82.5 "/>
<text text-anchor="start" x="205" y="-67.3" font-family="Times,serif" font-size="14.00" fill="#000000">复用参数中传过来的事务</text>
<text text-anchor="start" x="205" y="-52.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 重新初始化</text>
</g>
<!-- BeginTransaction&#45;&gt;ReinitializeTransaction -->
<g id="edge2" class="edge">
<title>BeginTransaction&#45;&gt;ReinitializeTransaction</title>
<path fill="none" stroke="#666666" d="M154.2463,-76.9885C164.7433,-76.827 175.7915,-76.6571 186.8256,-76.4873"/>
<polygon fill="#666666" stroke="#666666" points="186.9939,-79.9852 196.9389,-76.3317 186.8862,-72.986 186.9939,-79.9852"/>
</g>
<!-- OptimisticTransaction -->
<g id="node8" class="node">
<title>OptimisticTransaction</title>
<polygon fill="none" stroke="#000000" points="406,-246 406,-292 544,-292 544,-246 406,-246"/>
<text text-anchor="middle" x="475" y="-276.8" font-family="Times,serif" font-size="14.00" fill="#000000">OptimisticTransaction</text>
<polyline fill="none" stroke="#000000" points="406,-269 544,-269 "/>
<text text-anchor="middle" x="475" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#000000">构造函数</text>
</g>
<!-- BeginTransaction&#45;&gt;OptimisticTransaction -->
<g id="edge5" class="edge">
<title>BeginTransaction&#45;&gt;OptimisticTransaction</title>
<path fill="none" stroke="#666666" d="M129.7613,-101.2408C187.8063,-133.517 297.5505,-193.024 404.759,-241.7556"/>
<polygon fill="#666666" stroke="#666666" points="403.5711,-245.0595 414.1252,-245.9881 406.4537,-238.6806 403.5711,-245.0595"/>
</g>
<!-- OptimisticTransaction_Reinitialize -->
<g id="node9" class="node">
<title>OptimisticTransaction_Reinitialize</title>
<polygon fill="none" stroke="#000000" points="435.5,-191 435.5,-227 514.5,-227 514.5,-191 435.5,-191"/>
<text text-anchor="middle" x="475" y="-205.3" font-family="Times,serif" font-size="14.00" fill="#000000">Reinitialize</text>
</g>
<!-- ReinitializeTransaction&#45;&gt;OptimisticTransaction_Reinitialize -->
<g id="edge6" class="edge">
<title>ReinitializeTransaction&#45;&gt;OptimisticTransaction_Reinitialize</title>
<path fill="none" stroke="#666666" d="M347.3329,-105.7635C355.4747,-111.19 363.2926,-117.2827 370,-124 392.3584,-146.3916 380.5385,-165.9272 405,-186 411.1187,-191.0209 418.3689,-194.9583 425.8462,-198.0427"/>
<polygon fill="#666666" stroke="#666666" points="424.7769,-201.3781 435.3709,-201.5108 427.1719,-194.8006 424.7769,-201.3781"/>
</g>
<!-- GetLockBucketsSize -->
<g id="node5" class="node">
<title>GetLockBucketsSize</title>
<polygon fill="none" stroke="#000000" points="967,-106 836,-106 836,-70 967,-70 967,-106"/>
<text text-anchor="middle" x="901.5" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetLockBucketsSize</text>
</g>
<!-- bucketed_locks_ -->
<g id="node6" class="node">
<title>bucketed_locks_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1029,-23 1029,-99 1201,-99 1201,-23 1029,-23"/>
<text text-anchor="middle" x="1115" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">bucketed_locks_</text>
<polyline fill="none" stroke="#000000" points="1029,-76 1201,-76 "/>
<text text-anchor="start" x="1037" y="-60.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::vector&lt;std::unique_ptr&lt;</text>
<text text-anchor="start" x="1037" y="-45.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::mutex&gt;&gt;</text>
<text text-anchor="middle" x="1115" y="-30.8" font-family="Times,serif" font-size="14.00" fill="#000000"> bucketed_locks_;</text>
</g>
<!-- GetLockBucketsSize&#45;&gt;bucketed_locks_ -->
<g id="edge3" class="edge">
<title>GetLockBucketsSize&#45;&gt;bucketed_locks_</title>
<path fill="none" stroke="#666666" d="M967.008,-79.7156C983.3001,-77.6553 1001.1068,-75.4034 1018.5437,-73.1982"/>
<polygon fill="#666666" stroke="#666666" points="1019.2715,-76.6341 1028.7534,-71.9071 1018.3932,-69.6895 1019.2715,-76.6341"/>
</g>
<!-- LockBucket -->
<g id="node7" class="node">
<title>LockBucket</title>
<polygon fill="none" stroke="#000000" points="943,-52 860,-52 860,-16 943,-16 943,-52"/>
<text text-anchor="middle" x="901.5" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">LockBucket</text>
</g>
<!-- LockBucket&#45;&gt;bucketed_locks_ -->
<g id="edge4" class="edge">
<title>LockBucket&#45;&gt;bucketed_locks_</title>
<path fill="none" stroke="#666666" d="M943.1718,-39.27C964.8005,-42.0052 992.1928,-45.4693 1018.7151,-48.8235"/>
<polygon fill="#666666" stroke="#666666" points="1018.4635,-52.3194 1028.8236,-50.1018 1019.3418,-45.3747 1018.4635,-52.3194"/>
</g>
<!-- Initialize -->
<g id="node24" class="node">
<title>Initialize</title>
<polygon fill="none" stroke="#000000" points="709.5,-276 644.5,-276 644.5,-240 709.5,-240 709.5,-276"/>
<text text-anchor="middle" x="677" y="-254.3" font-family="Times,serif" font-size="14.00" fill="#000000">Initialize</text>
</g>
<!-- OptimisticTransaction&#45;&gt;Initialize -->
<g id="edge20" class="edge">
<title>OptimisticTransaction&#45;&gt;Initialize</title>
<path fill="none" stroke="#666666" d="M544.2343,-265.2298C574.0469,-263.6064 607.9704,-261.759 634.0639,-260.3381"/>
<polygon fill="#666666" stroke="#666666" points="634.5772,-263.8154 644.3721,-259.7768 634.1965,-256.8258 634.5772,-263.8154"/>
</g>
<!-- TransactionBaseImpl_Reinitialize -->
<g id="node12" class="node">
<title>TransactionBaseImpl_Reinitialize</title>
<polygon fill="none" stroke="#000000" points="637.5,-545 637.5,-581 716.5,-581 716.5,-545 637.5,-545"/>
<text text-anchor="middle" x="677" y="-559.3" font-family="Times,serif" font-size="14.00" fill="#000000">Reinitialize</text>
</g>
<!-- OptimisticTransaction_Reinitialize&#45;&gt;TransactionBaseImpl_Reinitialize -->
<g id="edge38" class="edge">
<title>OptimisticTransaction_Reinitialize&#45;&gt;TransactionBaseImpl_Reinitialize</title>
<path fill="none" stroke="#666666" d="M484.0369,-227.1466C498.4917,-256.7992 526.9197,-317.7767 544,-372 567.0732,-445.2483 526.055,-486.3409 580,-541 592.2548,-553.4171 609.9447,-559.4598 626.871,-562.2255"/>
<polygon fill="#666666" stroke="#666666" points="626.8931,-565.7567 637.256,-563.5518 627.7799,-558.8131 626.8931,-565.7567"/>
</g>
<!-- OptimisticTransaction_Reinitialize&#45;&gt;Initialize -->
<g id="edge39" class="edge">
<title>OptimisticTransaction_Reinitialize&#45;&gt;Initialize</title>
<path fill="none" stroke="#666666" d="M514.8206,-219.5261C534.4174,-224.633 558.4125,-230.7775 580,-236 597.6519,-240.2704 617.1716,-244.7451 634.0451,-248.5355"/>
<polygon fill="#666666" stroke="#666666" points="633.6462,-252.0327 644.169,-250.7993 635.1738,-245.2014 633.6462,-252.0327"/>
</g>
<!-- tracked_keys_ -->
<g id="node10" class="node">
<title>tracked_keys_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1237,-656 1237,-702 1451,-702 1451,-656 1237,-656"/>
<text text-anchor="middle" x="1344" y="-686.8" font-family="Times,serif" font-size="14.00" fill="#000000">tracked_keys_</text>
<polyline fill="none" stroke="#000000" points="1237,-679 1451,-679 "/>
<text text-anchor="middle" x="1344" y="-663.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap tracked_keys_;</text>
</g>
<!-- CheckKeyForConflicts -->
<g id="node11" class="node">
<title>CheckKeyForConflicts</title>
<polygon fill="#f38181" stroke="#000000" points="1487,-656 1487,-702 1629,-702 1629,-656 1487,-656"/>
<text text-anchor="middle" x="1558" y="-686.8" font-family="Times,serif" font-size="14.00" fill="#000000">CheckKeyForConflicts</text>
<polyline fill="none" stroke="#000000" points="1487,-679 1629,-679 "/>
<text text-anchor="middle" x="1558" y="-663.8" font-family="Times,serif" font-size="14.00" fill="#000000">检查key冲突</text>
</g>
<!-- tracked_keys_&#45;&gt;CheckKeyForConflicts -->
<g id="edge7" class="edge">
<title>tracked_keys_&#45;&gt;CheckKeyForConflicts</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1451.3135,-679C1459.914,-679 1468.5117,-679 1476.8845,-679"/>
<polygon fill="#666666" stroke="#666666" points="1476.9711,-682.5001 1486.971,-679 1476.971,-675.5001 1476.9711,-682.5001"/>
</g>
<!-- TransactionBaseImpl_Clear -->
<g id="node13" class="node">
<title>TransactionBaseImpl_Clear</title>
<polygon fill="none" stroke="#000000" points="874.5,-531 874.5,-567 928.5,-567 928.5,-531 874.5,-531"/>
<text text-anchor="middle" x="901.5" y="-545.3" font-family="Times,serif" font-size="14.00" fill="#000000">Clear</text>
</g>
<!-- TransactionBaseImpl_Reinitialize&#45;&gt;TransactionBaseImpl_Clear -->
<g id="edge8" class="edge">
<title>TransactionBaseImpl_Reinitialize&#45;&gt;TransactionBaseImpl_Clear</title>
<path fill="none" stroke="#666666" d="M716.6193,-560.5293C758.3065,-557.9297 823.4152,-553.8694 864.2054,-551.3257"/>
<polygon fill="#666666" stroke="#666666" points="864.5106,-554.8136 874.2733,-550.6979 864.0748,-547.8272 864.5106,-554.8136"/>
</g>
<!-- ClearSnapshot -->
<g id="node14" class="node">
<title>ClearSnapshot</title>
<polygon fill="none" stroke="#000000" points="1162.5,-640 1067.5,-640 1067.5,-604 1162.5,-604 1162.5,-640"/>
<text text-anchor="middle" x="1115" y="-618.3" font-family="Times,serif" font-size="14.00" fill="#000000">ClearSnapshot</text>
</g>
<!-- TransactionBaseImpl_Reinitialize&#45;&gt;ClearSnapshot -->
<g id="edge9" class="edge">
<title>TransactionBaseImpl_Reinitialize&#45;&gt;ClearSnapshot</title>
<path fill="none" stroke="#666666" d="M716.6421,-568.3399C794.3018,-578.8009 966.7605,-602.0317 1057.1622,-614.2091"/>
<polygon fill="#666666" stroke="#666666" points="1056.8608,-617.7 1067.2386,-615.5664 1057.7954,-610.7627 1056.8608,-617.7"/>
</g>
<!-- TransactionBaseImpl_Clear&#45;&gt;tracked_keys_ -->
<g id="edge11" class="edge">
<title>TransactionBaseImpl_Clear&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M928.7289,-555.2974C954.4556,-561.0699 994.1856,-569.5277 1029,-575 1108.516,-587.4988 1132.946,-568.6409 1209,-595 1214.0104,-596.7365 1261.6556,-626.6595 1298.9417,-650.3019"/>
<polygon fill="#666666" stroke="#666666" points="1297.3636,-653.4457 1307.6822,-655.8492 1301.1146,-647.5355 1297.3636,-653.4457"/>
</g>
<!-- snapshot_ -->
<g id="node18" class="node">
<title>snapshot_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1308.5,-565 1308.5,-601 1379.5,-601 1379.5,-565 1308.5,-565"/>
<text text-anchor="middle" x="1344" y="-579.3" font-family="Times,serif" font-size="14.00" fill="#000000">snapshot_</text>
</g>
<!-- ClearSnapshot&#45;&gt;snapshot_ -->
<g id="edge14" class="edge">
<title>ClearSnapshot&#45;&gt;snapshot_</title>
<path fill="none" stroke="#666666" d="M1162.7272,-613.8718C1202.5557,-607.0888 1258.9533,-597.4839 1298.227,-590.7954"/>
<polygon fill="#666666" stroke="#666666" points="1299.051,-594.2056 1308.3214,-589.0763 1297.8757,-587.3049 1299.051,-594.2056"/>
</g>
<!-- GetTrackedKeys -->
<g id="node15" class="node">
<title>GetTrackedKeys</title>
<polygon fill="none" stroke="#000000" points="1169,-512 1061,-512 1061,-476 1169,-476 1169,-512"/>
<text text-anchor="middle" x="1115" y="-490.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetTrackedKeys</text>
</g>
<!-- GetTrackedKeys&#45;&gt;tracked_keys_ -->
<g id="edge10" class="edge">
<title>GetTrackedKeys&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M1169.0254,-499.9876C1183.5455,-503.949 1198.1981,-510.4322 1209,-521 1238.9443,-550.2951 1211.5433,-577.7311 1237,-611 1249.2442,-627.0018 1266.4138,-640.2546 1283.4205,-650.6783"/>
<polygon fill="#666666" stroke="#666666" points="1281.8757,-653.8298 1292.2721,-655.8709 1285.4177,-647.7921 1281.8757,-653.8298"/>
</g>
<!-- SetSnapshot -->
<g id="node16" class="node">
<title>SetSnapshot</title>
<polygon fill="none" stroke="#000000" points="943,-512 860,-512 860,-476 943,-476 943,-512"/>
<text text-anchor="middle" x="901.5" y="-490.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetSnapshot</text>
</g>
<!-- SetSnapshotInternal -->
<g id="node17" class="node">
<title>SetSnapshotInternal</title>
<polygon fill="none" stroke="#000000" points="1177.5,-566 1052.5,-566 1052.5,-530 1177.5,-530 1177.5,-566"/>
<text text-anchor="middle" x="1115" y="-544.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetSnapshotInternal</text>
</g>
<!-- SetSnapshot&#45;&gt;SetSnapshotInternal -->
<g id="edge12" class="edge">
<title>SetSnapshot&#45;&gt;SetSnapshotInternal</title>
<path fill="none" stroke="#666666" d="M943.1718,-504.5399C971.3255,-511.6608 1009.2451,-521.2517 1042.2996,-529.6121"/>
<polygon fill="#666666" stroke="#666666" points="1041.8326,-533.1041 1052.3855,-532.1631 1043.5491,-526.3178 1041.8326,-533.1041"/>
</g>
<!-- SetSnapshotInternal&#45;&gt;snapshot_ -->
<g id="edge13" class="edge">
<title>SetSnapshotInternal&#45;&gt;snapshot_</title>
<path fill="none" stroke="#666666" d="M1177.5753,-557.5639C1215.6191,-563.3785 1263.3657,-570.676 1297.9495,-575.9617"/>
<polygon fill="#666666" stroke="#666666" points="1297.8204,-579.4826 1308.2345,-577.5337 1298.8781,-572.5629 1297.8204,-579.4826"/>
</g>
<!-- GetForUpdate -->
<g id="node19" class="node">
<title>GetForUpdate</title>
<polygon fill="none" stroke="#000000" points="135.5,-736 41.5,-736 41.5,-700 135.5,-700 135.5,-736"/>
<text text-anchor="middle" x="88.5" y="-714.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetForUpdate</text>
</g>
<!-- GetForUpdate&#45;&gt;tracked_keys_ -->
<g id="edge15" class="edge">
<title>GetForUpdate&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M135.7561,-722.2244C208.5489,-728.3567 352.5286,-739 475,-739 475,-739 475,-739 901.5,-739 1038.5484,-739 1073.9523,-739.3322 1209,-716 1225.7152,-713.1121 1243.3517,-709.0483 1260.1643,-704.6646"/>
<polygon fill="#666666" stroke="#666666" points="1261.1948,-708.0122 1269.9549,-702.053 1259.3906,-701.2487 1261.1948,-708.0122"/>
</g>
<!-- MultiGetForUpdate -->
<g id="node20" class="node">
<title>MultiGetForUpdate</title>
<polygon fill="none" stroke="#000000" points="151,-520 26,-520 26,-484 151,-484 151,-520"/>
<text text-anchor="middle" x="88.5" y="-498.3" font-family="Times,serif" font-size="14.00" fill="#000000">MultiGetForUpdate</text>
</g>
<!-- MultiGetForUpdate&#45;&gt;tracked_keys_ -->
<g id="edge16" class="edge">
<title>MultiGetForUpdate&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M139.5066,-520.1368C146.7758,-522.9699 154.1168,-525.9676 161,-529 272.5055,-578.1238 287.6451,-621.2213 405,-654 435.0406,-662.3907 443.8096,-659 475,-659 475,-659 475,-659 901.5,-659 1011.8309,-659 1137.4782,-665.2817 1226.621,-670.8041"/>
<polygon fill="#666666" stroke="#666666" points="1226.5628,-674.3073 1236.7619,-671.4389 1227.0001,-667.3209 1226.5628,-674.3073"/>
</g>
<!-- Put -->
<g id="node21" class="node">
<title>Put</title>
<polygon fill="none" stroke="#000000" points="115.5,-574 61.5,-574 61.5,-538 115.5,-538 115.5,-574"/>
<text text-anchor="middle" x="88.5" y="-552.3" font-family="Times,serif" font-size="14.00" fill="#000000">Put</text>
</g>
<!-- Put&#45;&gt;tracked_keys_ -->
<g id="edge17" class="edge">
<title>Put&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M115.7075,-560.7579C130.6319,-564.58 148.5719,-571.3163 161,-583 189.7031,-609.9839 164.5578,-641.6505 197,-664 222.4741,-681.5491 444.0662,-679 475,-679 475,-679 475,-679 901.5,-679 1011.7184,-679 1137.3792,-679 1226.5558,-679"/>
<polygon fill="#666666" stroke="#666666" points="1226.7007,-682.5001 1236.7007,-679 1226.7007,-675.5001 1226.7007,-682.5001"/>
</g>
<!-- Merge -->
<g id="node22" class="node">
<title>Merge</title>
<polygon fill="none" stroke="#000000" points="115.5,-628 61.5,-628 61.5,-592 115.5,-592 115.5,-628"/>
<text text-anchor="middle" x="88.5" y="-606.3" font-family="Times,serif" font-size="14.00" fill="#000000">Merge</text>
</g>
<!-- Merge&#45;&gt;tracked_keys_ -->
<g id="edge18" class="edge">
<title>Merge&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M115.7685,-616.2333C130.1814,-620.452 147.6098,-627.0962 161,-637 182.1548,-652.6467 173.7286,-671.7205 197,-684 251.7174,-712.8724 413.1324,-699 475,-699 475,-699 475,-699 901.5,-699 1011.8309,-699 1137.4782,-692.7183 1226.621,-687.1959"/>
<polygon fill="#666666" stroke="#666666" points="1227.0001,-690.6791 1236.7619,-686.5611 1226.5628,-683.6927 1227.0001,-690.6791"/>
</g>
<!-- Delete -->
<g id="node23" class="node">
<title>Delete</title>
<polygon fill="none" stroke="#000000" points="115.5,-682 61.5,-682 61.5,-646 115.5,-646 115.5,-682"/>
<text text-anchor="middle" x="88.5" y="-660.3" font-family="Times,serif" font-size="14.00" fill="#000000">Delete</text>
</g>
<!-- Delete&#45;&gt;tracked_keys_ -->
<g id="edge19" class="edge">
<title>Delete&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M115.7465,-674.1575C147.1938,-685.8647 194.8987,-703.5663 197,-704 318.1807,-729.0133 351.2647,-719 475,-719 475,-719 475,-719 901.5,-719 1038.3292,-719 1073.0892,-719.8266 1209,-704 1214.8395,-703.32 1220.8068,-702.539 1226.8232,-701.6827"/>
<polygon fill="#666666" stroke="#666666" points="1227.603,-705.1054 1236.9808,-700.1752 1226.5753,-698.1812 1227.603,-705.1054"/>
</g>
<!-- Initialize&#45;&gt;SetSnapshot -->
<g id="edge21" class="edge">
<title>Initialize&#45;&gt;SetSnapshot</title>
<path fill="none" stroke="#666666" d="M683.7499,-276.0924C699.5487,-315.9954 742.7605,-412.1202 810,-464 821.6092,-472.9572 836.0043,-479.2983 849.9136,-483.7644"/>
<polygon fill="#666666" stroke="#666666" points="849.3283,-487.24 859.9091,-486.6956 851.2982,-480.5229 849.3283,-487.24"/>
</g>
<!-- Commit -->
<g id="node25" class="node">
<title>Commit</title>
<polygon fill="none" stroke="#000000" points="16,-181.5 16,-242.5 161,-242.5 161,-181.5 16,-181.5"/>
<text text-anchor="middle" x="88.5" y="-227.3" font-family="Times,serif" font-size="14.00" fill="#000000">Commit</text>
<polyline fill="none" stroke="#000000" points="16,-219.5 161,-219.5 "/>
<text text-anchor="start" x="24" y="-204.3" font-family="Times,serif" font-size="14.00" fill="#000000">有两种提交方式并行</text>
<text text-anchor="start" x="24" y="-189.3" font-family="Times,serif" font-size="14.00" fill="#000000">和串行的验证</text>
</g>
<!-- CommitWithParallelValidate -->
<g id="node26" class="node">
<title>CommitWithParallelValidate</title>
<polygon fill="none" stroke="#000000" points="580,-160.5 580,-221.5 774,-221.5 774,-160.5 580,-160.5"/>
<text text-anchor="middle" x="677" y="-206.3" font-family="Times,serif" font-size="14.00" fill="#000000">CommitWithParallelValidate</text>
<polyline fill="none" stroke="#000000" points="580,-198.5 774,-198.5 "/>
<text text-anchor="start" x="588" y="-183.3" font-family="Times,serif" font-size="14.00" fill="#000000">并行的验证</text>
<text text-anchor="start" x="588" y="-168.3" font-family="Times,serif" font-size="14.00" fill="#000000"> TODO: 这块逻辑还不太明白</text>
</g>
<!-- Commit&#45;&gt;CommitWithParallelValidate -->
<g id="edge22" class="edge">
<title>Commit&#45;&gt;CommitWithParallelValidate</title>
<path fill="none" stroke="#17b978" d="M161.2519,-209.4039C263.7463,-205.7465 451.344,-199.0523 569.8186,-194.8247"/>
<polygon fill="#17b978" stroke="#17b978" points="570.1289,-198.3159 579.9977,-194.4614 569.8792,-191.3204 570.1289,-198.3159"/>
</g>
<!-- CommitWithSerialValidate -->
<g id="node27" class="node">
<title>CommitWithSerialValidate</title>
<polygon fill="none" stroke="#000000" points="200,-268.5 200,-329.5 367,-329.5 367,-268.5 200,-268.5"/>
<text text-anchor="middle" x="283.5" y="-314.3" font-family="Times,serif" font-size="14.00" fill="#000000">CommitWithSerialValidate</text>
<polyline fill="none" stroke="#000000" points="200,-306.5 367,-306.5 "/>
<text text-anchor="start" x="208" y="-291.3" font-family="Times,serif" font-size="14.00" fill="#000000">串行验证，在callback中</text>
<text text-anchor="start" x="208" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#000000"> check key的冲突</text>
</g>
<!-- Commit&#45;&gt;CommitWithSerialValidate -->
<g id="edge23" class="edge">
<title>Commit&#45;&gt;CommitWithSerialValidate</title>
<path fill="none" stroke="#17b978" d="M156.9755,-242.5506C172.6624,-249.5494 189.4523,-257.0403 205.5065,-264.2029"/>
<polygon fill="#17b978" stroke="#17b978" points="204.3017,-267.4979 214.8601,-268.376 207.1539,-261.1053 204.3017,-267.4979"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;DBImpl_Write -->
<g id="edge24" class="edge">
<title>CommitWithParallelValidate&#45;&gt;DBImpl_Write</title>
<path fill="none" stroke="#b83b5e" d="M715.6933,-221.8504C735.14,-238.877 757.9234,-261.3348 774,-285 797.5148,-319.6145 779.4546,-343.3977 810,-372 824.8751,-385.9288 846.2412,-393.619 864.5863,-397.8549"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="863.9072,-401.2884 874.4068,-399.8704 865.3146,-394.4313 863.9072,-401.2884"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;GetLockBucketsSize -->
<g id="edge25" class="edge">
<title>CommitWithParallelValidate&#45;&gt;GetLockBucketsSize</title>
<path fill="none" stroke="#b83b5e" d="M763.7187,-160.4207C767.2072,-158.9662 770.6461,-157.4902 774,-156 804.2189,-142.5731 837.1209,-124.9453 861.9315,-111.0022"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="863.7078,-114.0186 870.6862,-106.0466 860.2596,-107.9268 863.7078,-114.0186"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;LockBucket -->
<g id="edge26" class="edge">
<title>CommitWithParallelValidate&#45;&gt;LockBucket</title>
<path fill="none" stroke="#b83b5e" d="M769.2076,-160.3305C770.8681,-158.9496 772.4688,-157.507 774,-156 806.1809,-124.3281 776.8936,-91.7032 810,-61 820.9524,-50.8427 835.544,-44.4911 849.8514,-40.5244"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="850.7713,-43.9028 859.663,-38.1418 849.1194,-37.1005 850.7713,-43.9028"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;CheckKeyForConflicts -->
<g id="edge27" class="edge">
<title>CommitWithParallelValidate&#45;&gt;CheckKeyForConflicts</title>
<path fill="none" stroke="#b83b5e" d="M711.6093,-221.8767C730.7738,-239.6156 754.5754,-262.7349 774,-285 791.7654,-305.3633 787.202,-319.4907 810,-334 883.019,-380.4714 944.0136,-306.8547 1001,-372 1066.0914,-446.4106 956.9272,-748.3292 1029,-816 1098.6618,-881.4071 1373.9151,-859.4906 1459,-816 1501.5694,-794.2409 1530.0519,-744.6913 1545.1365,-711.5354"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1548.4027,-712.8022 1549.2127,-702.2384 1541.9918,-709.9914 1548.4027,-712.8022"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;TransactionBaseImpl_Clear -->
<g id="edge28" class="edge">
<title>CommitWithParallelValidate&#45;&gt;TransactionBaseImpl_Clear</title>
<path fill="none" stroke="#b83b5e" d="M719.6152,-221.6407C739.3475,-238.144 761.2068,-260.1993 774,-285 822.6415,-379.2957 740.6296,-440.7165 810,-521 823.3799,-536.4848 845.0702,-543.5505 863.9748,-546.7141"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="863.7387,-550.2143 874.1202,-548.0989 864.6855,-543.2786 863.7387,-550.2143"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;GetTrackedKeys -->
<g id="edge29" class="edge">
<title>CommitWithParallelValidate&#45;&gt;GetTrackedKeys</title>
<path fill="none" stroke="#b83b5e" d="M706.3842,-221.6908C731.6132,-246.2414 770.1266,-279.6535 810,-299 888.2853,-336.9839 927.949,-294.7252 1001,-342 1013.8301,-350.3029 1067.8243,-426.2376 1096.6619,-467.5358"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1093.8215,-469.5817 1102.4098,-475.7859 1099.565,-465.5801 1093.8215,-469.5817"/>
</g>
<!-- CommitWithSerialValidate&#45;&gt;DBImpl_WriteWithCallback -->
<g id="edge30" class="edge">
<title>CommitWithSerialValidate&#45;&gt;DBImpl_WriteWithCallback</title>
<path fill="none" stroke="#3f72af" d="M322.5125,-329.5925C343.6313,-345.1297 370.8564,-363.5906 404.66,-380.4791"/>
<polygon fill="#3f72af" stroke="#3f72af" points="403.3568,-383.7373 413.8802,-384.9658 406.4197,-377.443 403.3568,-383.7373"/>
</g>
<!-- CommitWithSerialValidate&#45;&gt;TransactionBaseImpl_Clear -->
<g id="edge31" class="edge">
<title>CommitWithSerialValidate&#45;&gt;TransactionBaseImpl_Clear</title>
<path fill="none" stroke="#3f72af" d="M297.0166,-329.5957C315.5504,-367.693 352.6235,-431.6843 405,-464 444.2099,-488.1921 755.3031,-530.1529 864.0955,-544.236"/>
<polygon fill="#3f72af" stroke="#3f72af" points="863.9078,-547.7407 874.2733,-545.5485 864.8031,-540.7982 863.9078,-547.7407"/>
</g>
<!-- CommitWithSerialValidate&#45;&gt;OptimisticTransactionCallback -->
<g id="edge32" class="edge">
<title>CommitWithSerialValidate&#45;&gt;OptimisticTransactionCallback</title>
<path fill="none" stroke="#3f72af" d="M367.1319,-305.0288C379.8141,-305.7918 392.75,-306.4844 405,-307 460.7413,-309.3461 522.9542,-310.5917 573.7983,-311.2528"/>
<polygon fill="#3f72af" stroke="#3f72af" points="573.7674,-314.7526 583.8102,-311.3774 573.8546,-307.7532 573.7674,-314.7526"/>
</g>
<!-- CheckTransactionForConflicts -->
<g id="node29" class="node">
<title>CheckTransactionForConflicts</title>
<polygon fill="none" stroke="#000000" points="993,-290 810,-290 810,-254 993,-254 993,-290"/>
<text text-anchor="middle" x="901.5" y="-268.3" font-family="Times,serif" font-size="14.00" fill="#000000">CheckTransactionForConflicts</text>
</g>
<!-- OptimisticTransactionCallback&#45;&gt;CheckTransactionForConflicts -->
<g id="edge34" class="edge">
<title>OptimisticTransactionCallback&#45;&gt;CheckTransactionForConflicts</title>
<path fill="none" stroke="#666666" d="M770.2579,-295.3839C780.1064,-293.6292 790.1557,-291.8386 800.0908,-290.0685"/>
<polygon fill="#666666" stroke="#666666" points="800.7451,-293.5071 809.976,-288.3072 799.5171,-286.6156 800.7451,-293.5071"/>
</g>
<!-- CheckTransactionForConflicts&#45;&gt;CheckKeyForConflicts -->
<g id="edge35" class="edge">
<title>CheckTransactionForConflicts&#45;&gt;CheckKeyForConflicts</title>
<path fill="none" stroke="#666666" d="M993.0839,-280.83C1114.0408,-297.0487 1327.1069,-342.0164 1459,-464 1512.9913,-513.9348 1539.8767,-599.1263 1551.1684,-645.876"/>
<polygon fill="#666666" stroke="#666666" points="1547.7991,-646.8407 1553.4677,-655.7916 1554.6182,-645.2594 1547.7991,-646.8407"/>
</g>
<!-- CheckTransactionForConflicts&#45;&gt;GetTrackedKeys -->
<g id="edge36" class="edge">
<title>CheckTransactionForConflicts&#45;&gt;GetTrackedKeys</title>
<path fill="none" stroke="#666666" d="M980.6893,-290.029C988.0834,-293.829 995.0294,-298.4297 1001,-304 1025.5006,-326.8579 1012.9013,-344.613 1029,-374 1047.7544,-408.2348 1074.6314,-444.2065 1093.329,-467.7322"/>
<polygon fill="#666666" stroke="#666666" points="1090.8263,-470.2055 1099.8173,-475.8101 1096.2838,-465.8219 1090.8263,-470.2055"/>
</g>
<!-- Rollback -->
<g id="node30" class="node">
<title>Rollback</title>
<polygon fill="none" stroke="#000000" points="51.5,-283 51.5,-329 125.5,-329 125.5,-283 51.5,-283"/>
<text text-anchor="middle" x="88.5" y="-313.8" font-family="Times,serif" font-size="14.00" fill="#000000">Rollback</text>
<polyline fill="none" stroke="#000000" points="51.5,-306 125.5,-306 "/>
<text text-anchor="middle" x="88.5" y="-290.8" font-family="Times,serif" font-size="14.00" fill="#000000">事务回滚</text>
</g>
<!-- Rollback&#45;&gt;TransactionBaseImpl_Clear -->
<g id="edge37" class="edge">
<title>Rollback&#45;&gt;TransactionBaseImpl_Clear</title>
<path fill="none" stroke="#666666" d="M115.8997,-329.2083C168.1597,-371.972 287.3819,-462.444 405,-502 569.0906,-557.1851 779.7387,-554.8375 864.1159,-551.1639"/>
<polygon fill="#666666" stroke="#666666" points="864.4107,-554.654 874.2359,-550.6896 864.083,-547.6617 864.4107,-554.654"/>
</g>
</g>
</svg>
