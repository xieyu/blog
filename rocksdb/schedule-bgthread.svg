<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: schedule_bgthread Pages: 1 -->
<svg width="1308pt" height="330pt"
 viewBox="0.00 0.00 1308.00 330.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 326)">
<title>schedule_bgthread</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-326 1304,-326 1304,4 -4,4"/>
<g id="clust2" class="cluster">
<title>cluster_ThreadPoolImpl</title>
<polygon fill="none" stroke="#000000" points="116,-8 116,-314 1292,-314 1292,-8 116,-8"/>
<text text-anchor="middle" x="704" y="-294" font-family="Times,serif" font-size="20.00" fill="#000000">ThreadPoolImpl</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_bsignal_</title>
<polygon fill="none" stroke="#000000" points="579.5,-174 579.5,-276 1102.5,-276 1102.5,-174 579.5,-174"/>
<text text-anchor="middle" x="841" y="-256" font-family="Times,serif" font-size="20.00" fill="#000000">bsignal_</text>
</g>
<!-- Schedule -->
<g id="node1" class="node">
<title>Schedule</title>
<polygon fill="none" stroke="#000000" points="0,-106 0,-152 88,-152 88,-106 0,-106"/>
<text text-anchor="middle" x="44" y="-136.8" font-family="Times,serif" font-size="14.00" fill="#000000">Schedule</text>
<polyline fill="none" stroke="#000000" points="0,-129 88,-129 "/>
<text text-anchor="middle" x="44" y="-113.8" font-family="Times,serif" font-size="14.00" fill="#000000">线程池调度</text>
</g>
<!-- ThreadPoolImpl_Schedule -->
<g id="node2" class="node">
<title>ThreadPoolImpl_Schedule</title>
<polygon fill="none" stroke="#000000" points="124,-106 124,-152 287,-152 287,-106 124,-106"/>
<text text-anchor="middle" x="205.5" y="-136.8" font-family="Times,serif" font-size="14.00" fill="#000000">ThreadPoolImpl::Schedule</text>
<polyline fill="none" stroke="#000000" points="124,-129 287,-129 "/>
<text text-anchor="start" x="132" y="-113.8" font-family="Times,serif" font-size="14.00" fill="#000000">线程池调度</text>
</g>
<!-- Schedule&#45;&gt;ThreadPoolImpl_Schedule -->
<g id="edge1" class="edge">
<title>Schedule&#45;&gt;ThreadPoolImpl_Schedule</title>
<path fill="none" stroke="#666666" d="M88.1306,-129C96.2054,-129 104.9001,-129 113.7749,-129"/>
<polygon fill="#666666" stroke="#666666" points="113.8481,-132.5001 123.8481,-129 113.8481,-125.5001 113.8481,-132.5001"/>
</g>
<!-- Submit -->
<g id="node3" class="node">
<title>Submit</title>
<polygon fill="none" stroke="#000000" points="323,-91 323,-167 543,-167 543,-91 323,-91"/>
<text text-anchor="middle" x="433" y="-151.8" font-family="Times,serif" font-size="14.00" fill="#000000">Submit</text>
<polyline fill="none" stroke="#000000" points="323,-144 543,-144 "/>
<text text-anchor="start" x="331" y="-128.8" font-family="Times,serif" font-size="14.00" fill="#000000">1.将任务放入任务队列</text>
<text text-anchor="start" x="331" y="-113.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 2.如果需要的话:启动后台新线程</text>
<text text-anchor="start" x="331" y="-98.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 3.唤醒后台线程</text>
</g>
<!-- ThreadPoolImpl_Schedule&#45;&gt;Submit -->
<g id="edge2" class="edge">
<title>ThreadPoolImpl_Schedule&#45;&gt;Submit</title>
<path fill="none" stroke="#666666" d="M287.3113,-129C295.6432,-129 304.2239,-129 312.8538,-129"/>
<polygon fill="#666666" stroke="#666666" points="312.9953,-132.5001 322.9952,-129 312.9952,-125.5001 312.9953,-132.5001"/>
</g>
<!-- StartBGThreads -->
<g id="node4" class="node">
<title>StartBGThreads</title>
<polygon fill="none" stroke="#000000" points="579,-30.5 579,-91.5 724,-91.5 724,-30.5 579,-30.5"/>
<text text-anchor="middle" x="651.5" y="-76.3" font-family="Times,serif" font-size="14.00" fill="#000000">StartBGThreads</text>
<polyline fill="none" stroke="#000000" points="579,-68.5 724,-68.5 "/>
<text text-anchor="start" x="587" y="-53.3" font-family="Times,serif" font-size="14.00" fill="#000000">保证线程池中线程为</text>
<text text-anchor="middle" x="651.5" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#000000"> total_threads_limit_</text>
</g>
<!-- Submit&#45;&gt;StartBGThreads -->
<g id="edge3" class="edge">
<title>Submit&#45;&gt;StartBGThreads</title>
<path fill="none" stroke="#666666" d="M543.2102,-94.7012C551.9005,-91.9966 560.5828,-89.2946 569.037,-86.6636"/>
<polygon fill="#666666" stroke="#666666" points="570.3352,-89.9252 578.8435,-83.6116 568.2551,-83.2414 570.3352,-89.9252"/>
</g>
<!-- queque_ -->
<g id="node5" class="node">
<title>queque_</title>
<polygon fill="none" stroke="#000000" points="809.5,-117 809.5,-163 883.5,-163 883.5,-117 809.5,-117"/>
<text text-anchor="middle" x="846.5" y="-147.8" font-family="Times,serif" font-size="14.00" fill="#000000">queque_</text>
<polyline fill="none" stroke="#000000" points="809.5,-140 883.5,-140 "/>
<text text-anchor="start" x="817.5" y="-124.8" font-family="Times,serif" font-size="14.00" fill="#000000">任务队列</text>
</g>
<!-- Submit&#45;&gt;queque_ -->
<g id="edge4" class="edge">
<title>Submit&#45;&gt;queque_</title>
<path fill="none" stroke="#666666" d="M543.3348,-120.5539C597.7854,-117.7635 664.4133,-116.4065 724,-121 749.0279,-122.9294 776.6786,-127.0448 799.3668,-130.9537"/>
<polygon fill="#666666" stroke="#666666" points="798.9586,-134.4356 809.4147,-132.7265 800.175,-127.5421 798.9586,-134.4356"/>
</g>
<!-- WakeUpAllThreads -->
<g id="node6" class="node">
<title>WakeUpAllThreads</title>
<polygon fill="none" stroke="#000000" points="714.5,-166 588.5,-166 588.5,-130 714.5,-130 714.5,-166"/>
<text text-anchor="middle" x="651.5" y="-144.3" font-family="Times,serif" font-size="14.00" fill="#000000">WakeUpAllThreads</text>
</g>
<!-- Submit&#45;&gt;WakeUpAllThreads -->
<g id="edge5" class="edge">
<title>Submit&#45;&gt;WakeUpAllThreads</title>
<path fill="none" stroke="#666666" d="M543.2102,-138.5835C555.0658,-139.6144 566.9063,-140.644 578.1732,-141.6238"/>
<polygon fill="#666666" stroke="#666666" points="578.0775,-145.1286 588.3431,-142.5081 578.684,-138.1549 578.0775,-145.1286"/>
</g>
<!-- bsignal__notify_one -->
<g id="node7" class="node">
<title>bsignal__notify_one</title>
<polygon fill="none" stroke="#000000" points="715.5,-229 587.5,-229 587.5,-193 715.5,-193 715.5,-229"/>
<text text-anchor="middle" x="651.5" y="-207.3" font-family="Times,serif" font-size="14.00" fill="#000000">bsignal__notify_one</text>
</g>
<!-- Submit&#45;&gt;bsignal__notify_one -->
<g id="edge6" class="edge">
<title>Submit&#45;&gt;bsignal__notify_one</title>
<path fill="none" stroke="#666666" d="M521.655,-167.0107C540.4596,-174.6283 560.2844,-182.3318 579,-189 579.5808,-189.2069 580.1647,-189.4137 580.7512,-189.6201"/>
<polygon fill="#666666" stroke="#666666" points="579.85,-193.0108 590.4446,-192.9321 582.1133,-186.3868 579.85,-193.0108"/>
</g>
<!-- BGThreadWrapper -->
<g id="node8" class="node">
<title>BGThreadWrapper</title>
<polygon fill="none" stroke="#000000" points="969,-71 969,-117 1128,-117 1128,-71 969,-71"/>
<text text-anchor="middle" x="1048.5" y="-101.8" font-family="Times,serif" font-size="14.00" fill="#000000">BGThreadWrapper</text>
<polyline fill="none" stroke="#000000" points="969,-94 1128,-94 "/>
<text text-anchor="start" x="977" y="-78.8" font-family="Times,serif" font-size="14.00" fill="#000000">注册线程，进入主循环</text>
</g>
<!-- StartBGThreads&#45;&gt;BGThreadWrapper -->
<g id="edge7" class="edge">
<title>StartBGThreads&#45;&gt;BGThreadWrapper</title>
<path fill="none" stroke="#666666" d="M724.0604,-80.6142C735.9903,-83.1951 748.2835,-85.4715 760,-87 826.1991,-95.6363 901.6464,-97.1786 958.7794,-96.6721"/>
<polygon fill="#666666" stroke="#666666" points="958.906,-100.171 968.8664,-96.5597 958.828,-93.1714 958.906,-100.171"/>
</g>
<!-- port_Thread -->
<g id="node9" class="node">
<title>port_Thread</title>
<polygon fill="none" stroke="#000000" points="760,-16.5 760,-77.5 933,-77.5 933,-16.5 760,-16.5"/>
<text text-anchor="middle" x="846.5" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#000000">port_Thread</text>
<polyline fill="none" stroke="#000000" points="760,-54.5 933,-54.5 "/>
<text text-anchor="start" x="768" y="-39.3" font-family="Times,serif" font-size="14.00" fill="#000000">启动新线程，线程入口为</text>
<text text-anchor="start" x="768" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#000000"> BGThreadWrapper</text>
</g>
<!-- StartBGThreads&#45;&gt;port_Thread -->
<g id="edge8" class="edge">
<title>StartBGThreads&#45;&gt;port_Thread</title>
<path fill="none" stroke="#666666" d="M724.1108,-55.7869C732.5163,-55.1834 741.1863,-54.561 749.8474,-53.9392"/>
<polygon fill="#666666" stroke="#666666" points="750.2707,-57.4179 759.9943,-53.2107 749.7693,-50.4358 750.2707,-57.4179"/>
</g>
<!-- BGThread -->
<g id="node12" class="node">
<title>BGThread</title>
<polygon fill="none" stroke="#000000" points="1164,-124.5 1164,-185.5 1284,-185.5 1284,-124.5 1164,-124.5"/>
<text text-anchor="middle" x="1224" y="-170.3" font-family="Times,serif" font-size="14.00" fill="#000000">BGThread</text>
<polyline fill="none" stroke="#000000" points="1164,-162.5 1284,-162.5 "/>
<text text-anchor="start" x="1172" y="-147.3" font-family="Times,serif" font-size="14.00" fill="#000000">后台线程主循环</text>
<text text-anchor="start" x="1172" y="-132.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 从队列中取任务</text>
</g>
<!-- queque_&#45;&gt;BGThread -->
<g id="edge15" class="edge">
<title>queque_&#45;&gt;BGThread</title>
<path fill="none" stroke="#b3b3b3" stroke-dasharray="5,2" d="M883.7293,-141.4793C946.3027,-143.9657 1073.54,-149.0215 1153.4579,-152.197"/>
<polygon fill="#b3b3b3" stroke="#b3b3b3" points="1153.795,-155.7131 1163.9261,-152.613 1154.073,-148.7186 1153.795,-155.7131"/>
</g>
<!-- bsignal__notify_all -->
<g id="node10" class="node">
<title>bsignal__notify_all</title>
<polygon fill="none" stroke="#000000" points="907.5,-218 785.5,-218 785.5,-182 907.5,-182 907.5,-218"/>
<text text-anchor="middle" x="846.5" y="-196.3" font-family="Times,serif" font-size="14.00" fill="#000000">bsignal__notify_all</text>
</g>
<!-- WakeUpAllThreads&#45;&gt;bsignal__notify_all -->
<g id="edge9" class="edge">
<title>WakeUpAllThreads&#45;&gt;bsignal__notify_all</title>
<path fill="none" stroke="#666666" d="M714.5505,-165.6708C729.438,-169.7774 745.266,-174.0898 760,-178 765.0196,-179.3321 770.2076,-180.6926 775.4337,-182.051"/>
<polygon fill="#666666" stroke="#666666" points="774.9388,-185.5381 785.4966,-184.653 776.6913,-178.761 774.9388,-185.5381"/>
</g>
<!-- bsignal__wait -->
<g id="node11" class="node">
<title>bsignal__wait</title>
<polygon fill="none" stroke="#000000" points="1094.5,-218 1002.5,-218 1002.5,-182 1094.5,-182 1094.5,-218"/>
<text text-anchor="middle" x="1048.5" y="-196.3" font-family="Times,serif" font-size="14.00" fill="#000000">bsignal__wait</text>
</g>
<!-- bsignal__notify_one&#45;&gt;bsignal__wait -->
<g id="edge10" class="edge">
<title>bsignal__notify_one&#45;&gt;bsignal__wait</title>
<path fill="none" stroke="#7f7f7f" stroke-dasharray="5,2" d="M715.585,-222.0371C730.1423,-224.1015 745.568,-225.9416 760,-227 836.683,-232.6236 856.6174,-235.8091 933,-227 952.5949,-224.7402 973.696,-220.3915 992.4331,-215.8335"/>
<polygon fill="#7f7f7f" stroke="#7f7f7f" points="993.4338,-219.1911 1002.284,-213.3666 991.7333,-212.4007 993.4338,-219.1911"/>
</g>
<!-- BGThreadWrapper&#45;&gt;BGThread -->
<g id="edge13" class="edge">
<title>BGThreadWrapper&#45;&gt;BGThread</title>
<path fill="none" stroke="#666666" d="M1114.849,-117.0615C1127.6892,-121.5245 1141.1805,-126.2137 1154.1294,-130.7145"/>
<polygon fill="#666666" stroke="#666666" points="1153.3111,-134.1354 1163.9059,-134.1126 1155.6093,-127.5234 1153.3111,-134.1354"/>
</g>
<!-- RegisterThread -->
<g id="node13" class="node">
<title>RegisterThread</title>
<polygon fill="none" stroke="#000000" points="1274,-106 1174,-106 1174,-70 1274,-70 1274,-106"/>
<text text-anchor="middle" x="1224" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#000000">RegisterThread</text>
</g>
<!-- BGThreadWrapper&#45;&gt;RegisterThread -->
<g id="edge14" class="edge">
<title>BGThreadWrapper&#45;&gt;RegisterThread</title>
<path fill="none" stroke="#666666" d="M1128.0341,-91.2809C1139.9774,-90.8726 1152.1253,-90.4573 1163.5827,-90.0655"/>
<polygon fill="#666666" stroke="#666666" points="1164.0104,-93.5531 1173.8849,-89.7133 1163.7711,-86.5572 1164.0104,-93.5531"/>
</g>
<!-- port_Thread&#45;&gt;BGThreadWrapper -->
<g id="edge12" class="edge">
<title>port_Thread&#45;&gt;BGThreadWrapper</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M933.0452,-67.1368C941.5884,-69.1245 950.2725,-71.1451 958.8461,-73.1399"/>
<polygon fill="#666666" stroke="#666666" points="958.3119,-76.6091 968.8449,-75.4664 959.8983,-69.7912 958.3119,-76.6091"/>
</g>
<!-- bsignal__notify_all&#45;&gt;bsignal__wait -->
<g id="edge11" class="edge">
<title>bsignal__notify_all&#45;&gt;bsignal__wait</title>
<path fill="none" stroke="#7f7f7f" stroke-dasharray="5,2" d="M907.6548,-200C934.5132,-200 965.8486,-200 992.1347,-200"/>
<polygon fill="#7f7f7f" stroke="#7f7f7f" points="992.3135,-203.5001 1002.3134,-200 992.3134,-196.5001 992.3135,-203.5001"/>
</g>
<!-- bsignal__wait&#45;&gt;BGThread -->
<g id="edge16" class="edge">
<title>bsignal__wait&#45;&gt;BGThread</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1094.6106,-188.1768C1112.8513,-183.4997 1134.2171,-178.0213 1154.2706,-172.8793"/>
<polygon fill="#666666" stroke="#666666" points="1155.1729,-176.2613 1163.9902,-170.3871 1153.4343,-169.4806 1155.1729,-176.2613"/>
</g>
</g>
</svg>
