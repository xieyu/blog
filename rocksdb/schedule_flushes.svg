<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: schedule_flushes Pages: 1 -->
<svg width="3517pt" height="1084pt"
 viewBox="0.00 0.00 3517.00 1084.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1080)">
<title>schedule_flushes</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1080 3513,-1080 3513,4 -4,4"/>
<g id="clust7" class="cluster">
<title>cluster_MemTableList</title>
<polygon fill="none" stroke="#000000" points="2535,-428 2535,-566 3501,-566 3501,-428 2535,-428"/>
<text text-anchor="middle" x="3018" y="-546" font-family="Times,serif" font-size="20.00" fill="#000000">MemTableList</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_FlushJob</title>
<polygon fill="none" stroke="#000000" points="2973,-625 2973,-772 3326,-772 3326,-625 2973,-625"/>
<text text-anchor="middle" x="3149.5" y="-752" font-family="Times,serif" font-size="20.00" fill="#000000">FlushJob</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_WriteThread</title>
<polygon fill="none" stroke="#000000" points="1018.5,-268 1018.5,-566 1431.5,-566 1431.5,-268 1018.5,-268"/>
<text text-anchor="middle" x="1225" y="-546" font-family="Times,serif" font-size="20.00" fill="#000000">WriteThread</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_MemTableInsert</title>
<polygon fill="none" stroke="#000000" points="177,-878 177,-1068 667,-1068 667,-878 177,-878"/>
<text text-anchor="middle" x="422" y="-1048" font-family="Times,serif" font-size="20.00" fill="#000000">MemTableInserter</text>
</g>
<g id="clust15" class="cluster">
<title>cluster_VersionSet</title>
<polygon fill="none" stroke="#000000" points="1514,-484 1514,-566 1667,-566 1667,-484 1514,-484"/>
<text text-anchor="middle" x="1590.5" y="-546" font-family="Times,serif" font-size="20.00" fill="#000000">VersionSet</text>
</g>
<g id="clust16" class="cluster">
<title>cluster_FlushScheduler</title>
<polygon fill="none" stroke="#000000" points="754,-860 754,-1061 1462,-1061 1462,-860 754,-860"/>
<text text-anchor="middle" x="1108" y="-1041" font-family="Times,serif" font-size="20.00" fill="#000000">FlushScheduler</text>
</g>
<g id="clust17" class="cluster">
<title>cluster_ColumnFamily</title>
<polygon fill="none" stroke="#000000" points="8,-8 8,-260 1894,-260 1894,-8 8,-8"/>
<text text-anchor="middle" x="951" y="-240" font-family="Times,serif" font-size="20.00" fill="#000000">ColumnFamily</text>
</g>
<g id="clust18" class="cluster">
<title>cluster_ColumnFamilyData</title>
<polygon fill="none" stroke="#000000" points="16,-16 16,-152 1886,-152 1886,-16 16,-16"/>
<text text-anchor="middle" x="951" y="-132" font-family="Times,serif" font-size="20.00" fill="#000000">ColumnFamilyData</text>
</g>
<g id="clust20" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="41.5,-574 41.5,-852 2946.5,-852 2946.5,-574 41.5,-574"/>
<text text-anchor="middle" x="1494" y="-832" font-family="Times,serif" font-size="20.00" fill="#000000">Dbimpl</text>
</g>
<!-- PreprocessWrite -->
<g id="node1" class="node">
<title>PreprocessWrite</title>
<polygon fill="none" stroke="#000000" points="632,-734 525,-734 525,-698 632,-698 632,-734"/>
<text text-anchor="middle" x="578.5" y="-712.3" font-family="Times,serif" font-size="14.00" fill="#000000">PreprocessWrite</text>
</g>
<!-- ScheduleFlushes -->
<g id="node2" class="node">
<title>ScheduleFlushes</title>
<polygon fill="none" stroke="#000000" points="695,-655 695,-731 927,-731 927,-655 695,-655"/>
<text text-anchor="middle" x="811" y="-715.8" font-family="Times,serif" font-size="14.00" fill="#000000">ScheduleFlushes</text>
<polyline fill="none" stroke="#000000" points="695,-708 927,-708 "/>
<text text-anchor="start" x="703" y="-692.8" font-family="Times,serif" font-size="14.00" fill="#000000">生成flush请求放入</text>
<text text-anchor="start" x="703" y="-677.8" font-family="Times,serif" font-size="14.00" fill="#000000"> flush_queue_队列中</text>
<text text-anchor="start" x="703" y="-662.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 由后台线程将memtable刷到磁盘上</text>
</g>
<!-- PreprocessWrite&#45;&gt;ScheduleFlushes -->
<g id="edge1" class="edge">
<title>PreprocessWrite&#45;&gt;ScheduleFlushes</title>
<path fill="none" stroke="#666666" d="M632.1321,-710.6945C648.0469,-709.1201 666.1934,-707.325 684.6821,-705.496"/>
<polygon fill="#666666" stroke="#666666" points="685.066,-708.9752 694.6728,-704.5076 684.3768,-702.0092 685.066,-708.9752"/>
</g>
<!-- FlushScheduler -->
<g id="node3" class="node">
<title>FlushScheduler</title>
<polygon fill="none" stroke="#000000" points="997.5,-868.5 997.5,-937.5 1159.5,-937.5 1159.5,-868.5 997.5,-868.5"/>
<text text-anchor="middle" x="1078.5" y="-922.3" font-family="Times,serif" font-size="14.00" fill="#000000">flush_scheduler_</text>
<polyline fill="none" stroke="#000000" points="997.5,-914.5 1159.5,-914.5 "/>
<text text-anchor="start" x="1005.5" y="-899.3" font-family="Times,serif" font-size="14.00" fill="#000000">FlushScheduler</text>
<polyline fill="none" stroke="#000000" points="997.5,-891.5 1159.5,-891.5 "/>
<text text-anchor="middle" x="1078.5" y="-876.3" font-family="Times,serif" font-size="14.00" fill="#000000">std::aomic&lt;Node*&gt; head_</text>
</g>
<!-- ScheduleFlushes&#45;&gt;FlushScheduler -->
<g id="edge2" class="edge">
<title>ScheduleFlushes&#45;&gt;FlushScheduler</title>
<path fill="none" stroke="#3f72af" d="M838.639,-731.1212C866.5583,-767.3502 912.6596,-821.3097 963,-856 970.8058,-861.3791 979.3206,-866.2932 988.0735,-870.7439"/>
<polygon fill="#3f72af" stroke="#3f72af" points="986.7378,-873.9863 997.2613,-875.2144 989.8005,-867.6919 986.7378,-873.9863"/>
</g>
<!-- SelectColumnFamiliesForAtomicFlush -->
<g id="node4" class="node">
<title>SelectColumnFamiliesForAtomicFlush</title>
<polygon fill="none" stroke="#000000" points="963,-582.5 963,-643.5 1194,-643.5 1194,-582.5 963,-582.5"/>
<text text-anchor="middle" x="1078.5" y="-628.3" font-family="Times,serif" font-size="14.00" fill="#000000">SelectColumnFamiliesForAtomicFlush</text>
<polyline fill="none" stroke="#000000" points="963,-620.5 1194,-620.5 "/>
<text text-anchor="start" x="971" y="-605.3" font-family="Times,serif" font-size="14.00" fill="#000000">如果immutable_db_options_.</text>
<text text-anchor="start" x="971" y="-590.3" font-family="Times,serif" font-size="14.00" fill="#000000">attomic_flush 为true</text>
</g>
<!-- ScheduleFlushes&#45;&gt;SelectColumnFamiliesForAtomicFlush -->
<g id="edge3" class="edge">
<title>ScheduleFlushes&#45;&gt;SelectColumnFamiliesForAtomicFlush</title>
<path fill="none" stroke="#3f72af" d="M927.1623,-658.2599C940.1958,-654.362 953.456,-650.3963 966.4362,-646.5144"/>
<polygon fill="#3f72af" stroke="#3f72af" points="967.7215,-649.7833 976.2993,-643.5647 965.7157,-643.0768 967.7215,-649.7833"/>
</g>
<!-- TakeNextColumnFamily -->
<g id="node5" class="node">
<title>TakeNextColumnFamily</title>
<polygon fill="none" stroke="#000000" points="999,-956 999,-1002 1158,-1002 1158,-956 999,-956"/>
<text text-anchor="middle" x="1078.5" y="-986.8" font-family="Times,serif" font-size="14.00" fill="#000000">TakeNextColumnFamily</text>
<polyline fill="none" stroke="#000000" points="999,-979 1158,-979 "/>
<text text-anchor="middle" x="1078.5" y="-963.8" font-family="Times,serif" font-size="14.00" fill="#000000">从链表头取出一个节点</text>
</g>
<!-- ScheduleFlushes&#45;&gt;TakeNextColumnFamily -->
<g id="edge4" class="edge">
<title>ScheduleFlushes&#45;&gt;TakeNextColumnFamily</title>
<path fill="none" stroke="#3f72af" d="M823.4407,-731.1169C843.6583,-787.0042 889.0025,-890.6409 963,-947 970.9455,-953.0516 979.9719,-957.9588 989.3947,-961.938"/>
<polygon fill="#3f72af" stroke="#3f72af" points="988.3347,-965.2805 998.9242,-965.616 990.8552,-958.75 988.3347,-965.2805"/>
</g>
<!-- MaybeFlushStatsCF -->
<g id="node6" class="node">
<title>MaybeFlushStatsCF</title>
<polygon fill="none" stroke="#000000" points="1406,-648 1278,-648 1278,-612 1406,-612 1406,-648"/>
<text text-anchor="middle" x="1342" y="-626.3" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeFlushStatsCF</text>
</g>
<!-- ScheduleFlushes&#45;&gt;MaybeFlushStatsCF -->
<g id="edge5" class="edge">
<title>ScheduleFlushes&#45;&gt;MaybeFlushStatsCF</title>
<path fill="none" stroke="#3f72af" d="M927.1081,-681.5195C1020.5095,-672.1636 1144.1106,-659.4776 1194,-653 1218.1425,-649.8654 1244.4216,-645.9472 1268.0453,-642.2379"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1268.663,-645.6838 1277.9931,-640.6639 1267.569,-638.7698 1268.663,-645.6838"/>
</g>
<!-- EnterUnbatched -->
<g id="node7" class="node">
<title>EnterUnbatched</title>
<polygon fill="none" stroke="#000000" points="1130.5,-501 1026.5,-501 1026.5,-465 1130.5,-465 1130.5,-501"/>
<text text-anchor="middle" x="1078.5" y="-479.3" font-family="Times,serif" font-size="14.00" fill="#000000">EnterUnbatched</text>
</g>
<!-- ScheduleFlushes&#45;&gt;EnterUnbatched -->
<g id="edge6" class="edge">
<title>ScheduleFlushes&#45;&gt;EnterUnbatched</title>
<path fill="none" stroke="#3f72af" d="M922.6409,-654.8216C924.1349,-653.5874 925.5895,-652.3139 927,-651 955.8258,-624.1472 938.4828,-600.8368 963,-570 983.5238,-544.1859 1013.3981,-521.9556 1037.6219,-506.4285"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1039.6454,-509.2911 1046.263,-501.0171 1035.9301,-503.3584 1039.6454,-509.2911"/>
</g>
<!-- SwitchMemtable -->
<g id="node8" class="node">
<title>SwitchMemtable</title>
<polygon fill="none" stroke="#000000" points="1490,-582.5 1490,-643.5 1691,-643.5 1691,-582.5 1490,-582.5"/>
<text text-anchor="middle" x="1590.5" y="-628.3" font-family="Times,serif" font-size="14.00" fill="#000000">SwitchMemtable</text>
<polyline fill="none" stroke="#000000" points="1490,-620.5 1691,-620.5 "/>
<text text-anchor="start" x="1498" y="-605.3" font-family="Times,serif" font-size="14.00" fill="#000000">将memtable加到immtable list中</text>
<text text-anchor="start" x="1498" y="-590.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 并创建新的memtable</text>
</g>
<!-- ScheduleFlushes&#45;&gt;SwitchMemtable -->
<g id="edge7" class="edge">
<title>ScheduleFlushes&#45;&gt;SwitchMemtable</title>
<path fill="none" stroke="#3f72af" d="M927.0872,-690.5679C1113.436,-686.6308 1458.9174,-679.1809 1462,-678 1477.3057,-672.1368 1476.0097,-662.5389 1490,-654 1493.2044,-652.0442 1496.5187,-650.1446 1499.9063,-648.3041"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1501.7574,-651.2868 1509.02,-643.5728 1498.532,-645.0741 1501.7574,-651.2868"/>
</g>
<!-- UnrefAndTryDelete -->
<g id="node9" class="node">
<title>UnrefAndTryDelete</title>
<polygon fill="none" stroke="#000000" points="1141.5,-114 1015.5,-114 1015.5,-78 1141.5,-78 1141.5,-114"/>
<text text-anchor="middle" x="1078.5" y="-92.3" font-family="Times,serif" font-size="14.00" fill="#000000">UnrefAndTryDelete</text>
</g>
<!-- ScheduleFlushes&#45;&gt;UnrefAndTryDelete -->
<g id="edge8" class="edge">
<title>ScheduleFlushes&#45;&gt;UnrefAndTryDelete</title>
<path fill="none" stroke="#3f72af" d="M923.7168,-654.9372C924.8563,-653.6676 925.952,-652.3556 927,-651 979.8248,-582.666 933.5846,-345.208 963,-264 983.2498,-208.0956 1026.6584,-153.2192 1054.1123,-122.0942"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1056.9971,-124.1193 1061.0621,-114.3353 1051.783,-119.4488 1056.9971,-124.1193"/>
</g>
<!-- ExitUnbatched -->
<g id="node10" class="node">
<title>ExitUnbatched</title>
<polygon fill="none" stroke="#000000" points="1127.5,-366 1029.5,-366 1029.5,-330 1127.5,-330 1127.5,-366"/>
<text text-anchor="middle" x="1078.5" y="-344.3" font-family="Times,serif" font-size="14.00" fill="#000000">ExitUnbatched</text>
</g>
<!-- ScheduleFlushes&#45;&gt;ExitUnbatched -->
<g id="edge9" class="edge">
<title>ScheduleFlushes&#45;&gt;ExitUnbatched</title>
<path fill="none" stroke="#3f72af" d="M923.5484,-654.8009C924.7405,-653.5738 925.8922,-652.3072 927,-651 983.9767,-583.7633 920.6896,-533.3107 963,-456 981.9686,-421.3401 1016.1151,-391.5163 1042.3779,-372.0458"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1044.5505,-374.7939 1050.5986,-366.095 1040.4458,-369.1236 1044.5505,-374.7939"/>
</g>
<!-- GenerateFlushRequest -->
<g id="node11" class="node">
<title>GenerateFlushRequest</title>
<polygon fill="none" stroke="#000000" points="1508.5,-663 1508.5,-739 1672.5,-739 1672.5,-663 1508.5,-663"/>
<text text-anchor="middle" x="1590.5" y="-723.8" font-family="Times,serif" font-size="14.00" fill="#000000">GenerateFlushRequest</text>
<polyline fill="none" stroke="#000000" points="1508.5,-716 1672.5,-716 "/>
<text text-anchor="start" x="1516.5" y="-700.8" font-family="Times,serif" font-size="14.00" fill="#000000">遍历cfds, 获取每个cfd的</text>
<text text-anchor="start" x="1516.5" y="-685.8" font-family="Times,serif" font-size="14.00" fill="#000000"> LastestMemTableID</text>
<text text-anchor="start" x="1516.5" y="-670.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 生成FlushRequest</text>
</g>
<!-- ScheduleFlushes&#45;&gt;GenerateFlushRequest -->
<g id="edge10" class="edge">
<title>ScheduleFlushes&#45;&gt;GenerateFlushRequest</title>
<path fill="none" stroke="#3f72af" d="M927.0466,-694.4972C1011.1534,-695.5549 1127.6121,-696.9631 1230,-698 1321.1558,-698.9232 1425.2792,-699.767 1498.1077,-700.3229"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1498.1454,-703.8232 1508.1718,-700.3994 1498.1987,-696.8234 1498.1454,-703.8232"/>
</g>
<!-- SchedulePendingFlush -->
<g id="node12" class="node">
<title>SchedulePendingFlush</title>
<polygon fill="none" stroke="#000000" points="1872.5,-719 1732.5,-719 1732.5,-683 1872.5,-683 1872.5,-719"/>
<text text-anchor="middle" x="1802.5" y="-697.3" font-family="Times,serif" font-size="14.00" fill="#000000">SchedulePendingFlush</text>
</g>
<!-- ScheduleFlushes&#45;&gt;SchedulePendingFlush -->
<g id="edge11" class="edge">
<title>ScheduleFlushes&#45;&gt;SchedulePendingFlush</title>
<path fill="none" stroke="#3f72af" d="M927.1394,-720.5103C1096.9725,-756.231 1422.1135,-807.4851 1691,-749 1714.9305,-743.7949 1740.1097,-733.4252 1760.4732,-723.6519"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1762.0425,-726.7806 1769.4688,-719.2242 1758.9511,-720.5002 1762.0425,-726.7806"/>
</g>
<!-- MaybeScheduleFlushOrCompaction -->
<g id="node13" class="node">
<title>MaybeScheduleFlushOrCompaction</title>
<polygon fill="none" stroke="#000000" points="1930.5,-748.5 1930.5,-809.5 2145.5,-809.5 2145.5,-748.5 1930.5,-748.5"/>
<text text-anchor="middle" x="2038" y="-794.3" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeScheduleFlushOrCompaction</text>
<polyline fill="none" stroke="#000000" points="1930.5,-786.5 2145.5,-786.5 "/>
<text text-anchor="start" x="1938.5" y="-771.3" font-family="Times,serif" font-size="14.00" fill="#000000">将memtable flush到磁盘上</text>
<text text-anchor="start" x="1938.5" y="-756.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 触发后台线程压缩</text>
</g>
<!-- ScheduleFlushes&#45;&gt;MaybeScheduleFlushOrCompaction -->
<g id="edge12" class="edge">
<title>ScheduleFlushes&#45;&gt;MaybeScheduleFlushOrCompaction</title>
<path fill="none" stroke="#3f72af" d="M898.5224,-731.1414C919.3146,-738.8671 941.6632,-746.1114 963,-751 1127.6375,-788.721 1173.0965,-779 1342,-779 1342,-779 1342,-779 1590.5,-779 1702.3378,-779 1829.8976,-779 1920.1354,-779"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1920.3992,-782.5001 1930.3992,-779 1920.3992,-775.5001 1920.3992,-782.5001"/>
</g>
<!-- _Node -->
<g id="node43" class="node">
<title>_Node</title>
<polygon fill="none" stroke="#000000" points="1230,-944.5 1230,-1013.5 1454,-1013.5 1454,-944.5 1230,-944.5"/>
<text text-anchor="middle" x="1342" y="-998.3" font-family="Times,serif" font-size="14.00" fill="#000000">Node</text>
<polyline fill="none" stroke="#000000" points="1230,-990.5 1454,-990.5 "/>
<text text-anchor="start" x="1238" y="-975.3" font-family="Times,serif" font-size="14.00" fill="#000000">ColumnFamilyData* column_family;</text>
<polyline fill="none" stroke="#000000" points="1230,-967.5 1454,-967.5 "/>
<text text-anchor="start" x="1238" y="-952.3" font-family="Times,serif" font-size="14.00" fill="#000000">Node* next;</text>
</g>
<!-- FlushScheduler&#45;&gt;_Node -->
<g id="edge45" class="edge">
<title>FlushScheduler&#45;&gt;_Node</title>
<path fill="none" stroke="#666666" d="M1159.7088,-926.4226C1178.7679,-931.9198 1199.4902,-937.8966 1219.9019,-943.7839"/>
<polygon fill="#666666" stroke="#666666" points="1218.9903,-947.1635 1229.5686,-946.572 1220.9302,-940.4377 1218.9903,-947.1635"/>
</g>
<!-- SelectColumnFamiliesForAtomicFlush&#45;&gt;MaybeFlushStatsCF -->
<g id="edge55" class="edge">
<title>SelectColumnFamiliesForAtomicFlush&#45;&gt;MaybeFlushStatsCF</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1194.0749,-620.4564C1219.1295,-622.0729 1244.9763,-623.7404 1267.9171,-625.2205"/>
<polygon fill="#666666" stroke="#666666" points="1267.694,-628.7133 1277.8986,-625.8644 1268.1448,-621.7278 1267.694,-628.7133"/>
</g>
<!-- GetColumnFamilySet -->
<g id="node16" class="node">
<title>GetColumnFamilySet</title>
<polygon fill="none" stroke="#000000" points="1659,-528 1522,-528 1522,-492 1659,-492 1659,-528"/>
<text text-anchor="middle" x="1590.5" y="-506.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetColumnFamilySet</text>
</g>
<!-- SelectColumnFamiliesForAtomicFlush&#45;&gt;GetColumnFamilySet -->
<g id="edge15" class="edge">
<title>SelectColumnFamiliesForAtomicFlush&#45;&gt;GetColumnFamilySet</title>
<path fill="none" stroke="#666666" d="M1194.0549,-609.804C1271.1593,-605.3088 1374.1279,-594.7218 1462,-570 1492.8937,-561.3084 1525.6413,-545.9125 1550.3456,-532.893"/>
<polygon fill="#666666" stroke="#666666" points="1552.2402,-535.8485 1559.3992,-528.0384 1548.9323,-529.6794 1552.2402,-535.8485"/>
</g>
<!-- TakeNextColumnFamily&#45;&gt;MaybeFlushStatsCF -->
<g id="edge56" class="edge">
<title>TakeNextColumnFamily&#45;&gt;MaybeFlushStatsCF</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1158.0496,-967.4549C1171.1625,-962.7541 1183.7866,-956.1804 1194,-947 1226.3475,-917.9244 1212.3281,-895.7424 1230,-856 1262.4349,-783.0573 1305.4705,-699.3965 1327.5614,-657.2717"/>
<polygon fill="#666666" stroke="#666666" points="1330.7708,-658.6884 1332.3276,-648.2086 1324.5753,-655.4303 1330.7708,-658.6884"/>
</g>
<!-- TakeNextColumnFamily&#45;&gt;_Node -->
<g id="edge44" class="edge">
<title>TakeNextColumnFamily&#45;&gt;_Node</title>
<path fill="none" stroke="#666666" d="M1158.2738,-979C1177.6696,-979 1198.8552,-979 1219.7224,-979"/>
<polygon fill="#666666" stroke="#666666" points="1219.9314,-982.5001 1229.9314,-979 1219.9314,-975.5001 1219.9314,-982.5001"/>
</g>
<!-- MaybeFlushStatsCF&#45;&gt;SwitchMemtable -->
<g id="edge57" class="edge">
<title>MaybeFlushStatsCF&#45;&gt;SwitchMemtable</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1406.3181,-625.6C1428.6898,-624.0695 1454.4701,-622.3059 1479.5224,-620.592"/>
<polygon fill="#666666" stroke="#666666" points="1480.0873,-624.0617 1489.825,-619.8872 1479.6095,-617.078 1480.0873,-624.0617"/>
</g>
<!-- MaybeFlushStatsCF&#45;&gt;GenerateFlushRequest -->
<g id="edge58" class="edge">
<title>MaybeFlushStatsCF&#45;&gt;GenerateFlushRequest</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1405.0283,-648.0081C1433.3134,-656.0896 1467.2418,-665.7834 1498.3019,-674.6577"/>
<polygon fill="#666666" stroke="#666666" points="1497.698,-678.1251 1508.2748,-677.5071 1499.6211,-671.3945 1497.698,-678.1251"/>
</g>
<!-- MaybeFlushStatsCF&#45;&gt;GetColumnFamilySet -->
<g id="edge16" class="edge">
<title>MaybeFlushStatsCF&#45;&gt;GetColumnFamilySet</title>
<path fill="none" stroke="#666666" d="M1406.2998,-627.196C1425.3296,-624.0724 1445.4752,-618.3267 1462,-608 1479.7904,-596.8824 1474.4656,-584.099 1490,-570 1505.761,-555.6954 1525.4488,-543.0521 1543.2117,-533.1052"/>
<polygon fill="#666666" stroke="#666666" points="1545.1886,-536.0139 1552.294,-528.1549 1541.8385,-529.8675 1545.1886,-536.0139"/>
</g>
<!-- GetColumnFamily -->
<g id="node17" class="node">
<title>GetColumnFamily</title>
<polygon fill="none" stroke="#000000" points="1504.5,-160.5 1504.5,-221.5 1676.5,-221.5 1676.5,-160.5 1504.5,-160.5"/>
<text text-anchor="middle" x="1590.5" y="-206.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetColumnFamily</text>
<polyline fill="none" stroke="#000000" points="1504.5,-198.5 1676.5,-198.5 "/>
<text text-anchor="start" x="1512.5" y="-183.3" font-family="Times,serif" font-size="14.00" fill="#000000">根据columnID获取对应的</text>
<text text-anchor="start" x="1512.5" y="-168.3" font-family="Times,serif" font-size="14.00" fill="#000000"> ColumnFamliyData</text>
</g>
<!-- MaybeFlushStatsCF&#45;&gt;GetColumnFamily -->
<g id="edge17" class="edge">
<title>MaybeFlushStatsCF&#45;&gt;GetColumnFamily</title>
<path fill="none" stroke="#666666" d="M1406.2746,-631.6059C1426.4211,-628.8948 1447.2273,-622.2783 1462,-608 1503.8725,-567.529 1474.1859,-536.0457 1490,-480 1515.4478,-389.812 1553.5462,-286.6881 1574.7765,-231.2823"/>
<polygon fill="#666666" stroke="#666666" points="1578.0882,-232.4215 1578.4117,-221.8316 1571.5549,-229.9083 1578.0882,-232.4215"/>
</g>
<!-- GetLogNumber -->
<g id="node18" class="node">
<title>GetLogNumber</title>
<polygon fill="none" stroke="#000000" points="1642,-114 1539,-114 1539,-78 1642,-78 1642,-114"/>
<text text-anchor="middle" x="1590.5" y="-92.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetLogNumber</text>
</g>
<!-- MaybeFlushStatsCF&#45;&gt;GetLogNumber -->
<g id="edge18" class="edge">
<title>MaybeFlushStatsCF&#45;&gt;GetLogNumber</title>
<path fill="none" stroke="#666666" d="M1406.0697,-633.0995C1426.8183,-630.6395 1448.0518,-623.7984 1462,-608 1534.1852,-526.2394 1419.2228,-200.9825 1490,-118 1499.7471,-106.5721 1513.9351,-100.2782 1528.5946,-96.9785"/>
<polygon fill="#666666" stroke="#666666" points="1529.5487,-100.363 1538.7701,-95.1461 1528.3081,-93.4739 1529.5487,-100.363"/>
</g>
<!-- InstrumentedMutex -->
<g id="node31" class="node">
<title>InstrumentedMutex</title>
<polygon fill="none" stroke="#000000" points="1404.5,-528 1279.5,-528 1279.5,-492 1404.5,-492 1404.5,-528"/>
<text text-anchor="middle" x="1342" y="-506.3" font-family="Times,serif" font-size="14.00" fill="#000000">InstrumentedMutex</text>
</g>
<!-- EnterUnbatched&#45;&gt;InstrumentedMutex -->
<g id="edge29" class="edge">
<title>EnterUnbatched&#45;&gt;InstrumentedMutex</title>
<path fill="none" stroke="#666666" d="M1130.5591,-488.3343C1170.2156,-492.3978 1225.3016,-498.0423 1269.3054,-502.5512"/>
<polygon fill="#666666" stroke="#666666" points="1269.0694,-506.0453 1279.3741,-503.5829 1269.783,-499.0817 1269.0694,-506.0453"/>
</g>
<!-- AwaitState -->
<g id="node32" class="node">
<title>AwaitState</title>
<polygon fill="none" stroke="#000000" points="1380.5,-420 1303.5,-420 1303.5,-384 1380.5,-384 1380.5,-420"/>
<text text-anchor="middle" x="1342" y="-398.3" font-family="Times,serif" font-size="14.00" fill="#000000">AwaitState</text>
</g>
<!-- EnterUnbatched&#45;&gt;AwaitState -->
<g id="edge30" class="edge">
<title>EnterUnbatched&#45;&gt;AwaitState</title>
<path fill="none" stroke="#666666" d="M1130.5591,-466.997C1177.9281,-452.4358 1247.3117,-431.1072 1293.5266,-416.9007"/>
<polygon fill="#666666" stroke="#666666" points="1294.7775,-420.1779 1303.3077,-413.894 1292.7207,-413.4869 1294.7775,-420.1779"/>
</g>
<!-- WaitForPendingWrites -->
<g id="node33" class="node">
<title>WaitForPendingWrites</title>
<polygon fill="none" stroke="#000000" points="1413.5,-474 1270.5,-474 1270.5,-438 1413.5,-438 1413.5,-474"/>
<text text-anchor="middle" x="1342" y="-452.3" font-family="Times,serif" font-size="14.00" fill="#000000">WaitForPendingWrites</text>
</g>
<!-- EnterUnbatched&#45;&gt;WaitForPendingWrites -->
<g id="edge31" class="edge">
<title>EnterUnbatched&#45;&gt;WaitForPendingWrites</title>
<path fill="none" stroke="#666666" d="M1130.5591,-477.6657C1167.4939,-473.8811 1217.813,-468.725 1260.0972,-464.3923"/>
<polygon fill="#666666" stroke="#666666" points="1260.5097,-467.8685 1270.1008,-463.3673 1259.7961,-460.9049 1260.5097,-467.8685"/>
</g>
<!-- WriteRecoverableState -->
<g id="node19" class="node">
<title>WriteRecoverableState</title>
<polygon fill="none" stroke="#000000" points="1874,-950 1731,-950 1731,-914 1874,-914 1874,-950"/>
<text text-anchor="middle" x="1802.5" y="-928.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteRecoverableState</text>
</g>
<!-- SwitchMemtable&#45;&gt;WriteRecoverableState -->
<g id="edge19" class="edge">
<title>SwitchMemtable&#45;&gt;WriteRecoverableState</title>
<path fill="none" stroke="#666666" d="M1681.2297,-643.8334C1684.8091,-646.908 1688.1006,-650.2869 1691,-654 1760.3589,-742.8256 1655.708,-817.7183 1727,-905 1727.5972,-905.7311 1728.2157,-906.4424 1728.854,-907.1345"/>
<polygon fill="#666666" stroke="#666666" points="1726.5841,-909.7998 1736.3796,-913.8371 1731.2398,-904.5725 1726.5841,-909.7998"/>
</g>
<!-- ConstructNewMemtable -->
<g id="node20" class="node">
<title>ConstructNewMemtable</title>
<polygon fill="none" stroke="#000000" points="1878,-114 1727,-114 1727,-78 1878,-78 1878,-114"/>
<text text-anchor="middle" x="1802.5" y="-92.3" font-family="Times,serif" font-size="14.00" fill="#000000">ConstructNewMemtable</text>
</g>
<!-- SwitchMemtable&#45;&gt;ConstructNewMemtable -->
<g id="edge20" class="edge">
<title>SwitchMemtable&#45;&gt;ConstructNewMemtable</title>
<path fill="none" stroke="#666666" d="M1678.3192,-582.3046C1682.9905,-578.6448 1687.2818,-574.5592 1691,-570 1741.4602,-508.1252 1709.1908,-471.8303 1727,-394 1749.8316,-294.2207 1780.8284,-176.6909 1794.9419,-124.0083"/>
<polygon fill="#666666" stroke="#666666" points="1798.3973,-124.6358 1797.6103,-114.0702 1791.6367,-122.8205 1798.3973,-124.6358"/>
</g>
<!-- CreateWAL -->
<g id="node21" class="node">
<title>CreateWAL</title>
<polygon fill="none" stroke="#000000" points="1844,-631 1761,-631 1761,-595 1844,-595 1844,-631"/>
<text text-anchor="middle" x="1802.5" y="-609.3" font-family="Times,serif" font-size="14.00" fill="#000000">CreateWAL</text>
</g>
<!-- SwitchMemtable&#45;&gt;CreateWAL -->
<g id="edge21" class="edge">
<title>SwitchMemtable&#45;&gt;CreateWAL</title>
<path fill="none" stroke="#666666" d="M1691.2226,-613C1711.7633,-613 1732.5689,-613 1750.5438,-613"/>
<polygon fill="#666666" stroke="#666666" points="1750.7768,-616.5001 1760.7767,-613 1750.7767,-609.5001 1750.7768,-616.5001"/>
</g>
<!-- SetMemtable -->
<g id="node22" class="node">
<title>SetMemtable</title>
<polygon fill="none" stroke="#000000" points="1847.5,-60 1757.5,-60 1757.5,-24 1847.5,-24 1847.5,-60"/>
<text text-anchor="middle" x="1802.5" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetMemtable</text>
</g>
<!-- SwitchMemtable&#45;&gt;SetMemtable -->
<g id="edge22" class="edge">
<title>SwitchMemtable&#45;&gt;SetMemtable</title>
<path fill="none" stroke="#666666" d="M1679.4581,-582.4739C1683.7863,-578.777 1687.696,-574.6366 1691,-570 1755.7753,-479.0975 1659.4895,-157.89 1727,-69 1732.3832,-61.912 1739.787,-56.6804 1747.8662,-52.8199"/>
<polygon fill="#666666" stroke="#666666" points="1749.2615,-56.0309 1757.2033,-49.0181 1746.6217,-49.5477 1749.2615,-56.0309"/>
</g>
<!-- MemTableList_Add -->
<g id="node23" class="node">
<title>MemTableList_Add</title>
<polygon fill="none" stroke="#000000" points="2751,-436 2751,-482 2945,-482 2945,-436 2751,-436"/>
<text text-anchor="middle" x="2848" y="-466.8" font-family="Times,serif" font-size="14.00" fill="#000000">MemTableList::Add</text>
<polyline fill="none" stroke="#000000" points="2751,-459 2945,-459 "/>
<text text-anchor="start" x="2759" y="-443.8" font-family="Times,serif" font-size="14.00" fill="#000000">将memtabl加到memtablelist中</text>
</g>
<!-- SwitchMemtable&#45;&gt;MemTableList_Add -->
<g id="edge23" class="edge">
<title>SwitchMemtable&#45;&gt;MemTableList_Add</title>
<path fill="none" stroke="#666666" d="M1662.8115,-582.3945C1672.3132,-578.2753 1681.9047,-574.0676 1691,-570 1846.3716,-500.515 1867.7987,-408 2038,-408 2038,-408 2038,-408 2343,-408 2508.5488,-408 2551.1545,-403.3133 2715,-427 2727.2409,-428.7696 2740.0055,-431.1435 2752.5742,-433.8027"/>
<polygon fill="#666666" stroke="#666666" points="2752.0819,-437.2775 2762.5982,-435.9903 2753.5745,-430.4385 2752.0819,-437.2775"/>
</g>
<!-- alive_log_files_ -->
<g id="node24" class="node">
<title>alive_log_files_</title>
<polygon fill="none" stroke="#000000" points="1854.5,-896 1750.5,-896 1750.5,-860 1854.5,-860 1854.5,-896"/>
<text text-anchor="middle" x="1802.5" y="-874.3" font-family="Times,serif" font-size="14.00" fill="#000000">alive_log_files_</text>
</g>
<!-- SwitchMemtable&#45;&gt;alive_log_files_ -->
<g id="edge24" class="edge">
<title>SwitchMemtable&#45;&gt;alive_log_files_</title>
<path fill="none" stroke="#666666" d="M1680.6413,-643.5911C1684.4283,-646.7311 1687.9196,-650.19 1691,-654 1748.3345,-724.9141 1666.0636,-788.156 1727,-856 1730.9742,-860.4247 1735.7821,-863.9806 1741.0248,-866.8352"/>
<polygon fill="#666666" stroke="#666666" points="1739.6367,-870.0489 1750.1881,-871.0069 1742.5371,-863.678 1739.6367,-870.0489"/>
</g>
<!-- SetState -->
<g id="node34" class="node">
<title>SetState</title>
<polygon fill="none" stroke="#000000" points="1372.5,-366 1311.5,-366 1311.5,-330 1372.5,-330 1372.5,-366"/>
<text text-anchor="middle" x="1342" y="-344.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetState</text>
</g>
<!-- ExitUnbatched&#45;&gt;SetState -->
<g id="edge32" class="edge">
<title>ExitUnbatched&#45;&gt;SetState</title>
<path fill="none" stroke="#666666" d="M1127.7532,-348C1177.8846,-348 1254.6804,-348 1301.4265,-348"/>
<polygon fill="#666666" stroke="#666666" points="1301.4927,-351.5001 1311.4926,-348 1301.4926,-344.5001 1301.4927,-351.5001"/>
</g>
<!-- CreateMissingNewerLinks -->
<g id="node35" class="node">
<title>CreateMissingNewerLinks</title>
<polygon fill="none" stroke="#000000" points="1423.5,-312 1260.5,-312 1260.5,-276 1423.5,-276 1423.5,-312"/>
<text text-anchor="middle" x="1342" y="-290.3" font-family="Times,serif" font-size="14.00" fill="#000000">CreateMissingNewerLinks</text>
</g>
<!-- ExitUnbatched&#45;&gt;CreateMissingNewerLinks -->
<g id="edge33" class="edge">
<title>ExitUnbatched&#45;&gt;CreateMissingNewerLinks</title>
<path fill="none" stroke="#666666" d="M1127.7532,-337.9064C1162.2288,-330.8411 1209.3152,-321.1916 1250.5663,-312.7378"/>
<polygon fill="#666666" stroke="#666666" points="1251.2717,-316.1661 1260.3654,-310.7297 1249.8663,-309.3086 1251.2717,-316.1661"/>
</g>
<!-- GenerateFlushRequest&#45;&gt;SchedulePendingFlush -->
<g id="edge59" class="edge">
<title>GenerateFlushRequest&#45;&gt;SchedulePendingFlush</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1672.7682,-701C1688.9036,-701 1705.8125,-701 1721.8929,-701"/>
<polygon fill="#666666" stroke="#666666" points="1722.324,-704.5001 1732.324,-701 1722.3239,-697.5001 1722.324,-704.5001"/>
</g>
<!-- GetLatestMemTableID -->
<g id="node15" class="node">
<title>GetLatestMemTableID</title>
<polygon fill="none" stroke="#000000" points="1874.5,-1004 1730.5,-1004 1730.5,-968 1874.5,-968 1874.5,-1004"/>
<text text-anchor="middle" x="1802.5" y="-982.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetLatestMemTableID</text>
</g>
<!-- GenerateFlushRequest&#45;&gt;GetLatestMemTableID -->
<g id="edge14" class="edge">
<title>GenerateFlushRequest&#45;&gt;GetLatestMemTableID</title>
<path fill="none" stroke="#666666" d="M1601.0743,-739.4591C1618.3605,-795.4165 1657.8621,-899.1152 1727,-959 1728.3383,-960.1592 1729.73,-961.2698 1731.1664,-962.3339"/>
<polygon fill="#666666" stroke="#666666" points="1729.5254,-965.4408 1739.823,-967.9326 1733.3269,-959.5629 1729.5254,-965.4408"/>
</g>
<!-- flush_queue_ -->
<g id="node14" class="node">
<title>flush_queue_</title>
<polygon fill="#3fc1c9" stroke="#000000" points="1914,-637 1914,-729 2162,-729 2162,-637 1914,-637"/>
<text text-anchor="middle" x="2038" y="-713.8" font-family="Times,serif" font-size="14.00" fill="#000000">flush队列: flush_queue_</text>
<polyline fill="none" stroke="#000000" points="1914,-706 2162,-706 "/>
<text text-anchor="start" x="1922" y="-690.8" font-family="Times,serif" font-size="14.00" fill="#000000">放入条件:cfd&#45;&gt;imm()&#45;&gt;IsFlushPending()</text>
<polyline fill="none" stroke="#000000" points="1914,-683 2162,-683 "/>
<text text-anchor="middle" x="2038" y="-667.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::deque&lt;FlushRequest&gt; flush_queue_;</text>
<polyline fill="none" stroke="#000000" points="1914,-660 2162,-660 "/>
<text text-anchor="middle" x="2038" y="-644.8" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
</g>
<!-- SchedulePendingFlush&#45;&gt;flush_queue_ -->
<g id="edge13" class="edge">
<title>SchedulePendingFlush&#45;&gt;flush_queue_</title>
<path fill="none" stroke="#666666" d="M1872.5201,-695.6481C1882.3839,-694.8942 1892.7855,-694.0992 1903.373,-693.29"/>
<polygon fill="#666666" stroke="#666666" points="1903.8652,-696.7626 1913.5694,-692.5106 1903.3317,-689.783 1903.8652,-696.7626"/>
</g>
<!-- BackgroundFlush -->
<g id="node47" class="node">
<title>BackgroundFlush</title>
<polygon fill="none" stroke="#000000" points="2238.5,-722.5 2238.5,-813.5 2447.5,-813.5 2447.5,-722.5 2238.5,-722.5"/>
<text text-anchor="middle" x="2343" y="-798.3" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundFlush</text>
<polyline fill="none" stroke="#000000" points="2238.5,-790.5 2447.5,-790.5 "/>
<text text-anchor="start" x="2246.5" y="-775.3" font-family="Times,serif" font-size="14.00" fill="#000000">遍历flush_queue_</text>
<text text-anchor="start" x="2246.5" y="-760.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 将需要刷新的columnfamilyData</text>
<text text-anchor="start" x="2246.5" y="-745.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 的memtable</text>
<text text-anchor="start" x="2246.5" y="-730.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 刷到磁盘上</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;BackgroundFlush -->
<g id="edge60" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;BackgroundFlush</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M2145.5316,-775.1218C2172.2973,-774.1565 2201.0927,-773.118 2228.1937,-772.1406"/>
<polygon fill="#666666" stroke="#666666" points="2228.6224,-775.6275 2238.4897,-771.7692 2228.37,-768.632 2228.6224,-775.6275"/>
</g>
<!-- FlushRequest -->
<g id="node46" class="node">
<title>FlushRequest</title>
<polygon fill="#3fc1c9" stroke="#000000" points="2198,-582.5 2198,-703.5 2488,-703.5 2488,-582.5 2198,-582.5"/>
<text text-anchor="middle" x="2343" y="-688.3" font-family="Times,serif" font-size="14.00" fill="#000000">FlushRequest</text>
<polyline fill="none" stroke="#000000" points="2198,-680.5 2488,-680.5 "/>
<text text-anchor="start" x="2206" y="-665.3" font-family="Times,serif" font-size="14.00" fill="#000000">A flush request specifies</text>
<text text-anchor="start" x="2206" y="-650.3" font-family="Times,serif" font-size="14.00" fill="#000000"> the column families to flush</text>
<text text-anchor="start" x="2206" y="-635.3" font-family="Times,serif" font-size="14.00" fill="#000000"> as well as the largest memtable</text>
<text text-anchor="start" x="2206" y="-620.3" font-family="Times,serif" font-size="14.00" fill="#000000"> id to persist for each column family</text>
<text text-anchor="start" x="2206" y="-605.3" font-family="Times,serif" font-size="14.00" fill="#000000"> typedef std::vector&lt;std::pair</text>
<text text-anchor="middle" x="2343" y="-590.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;ColumnFamilyData*, uint64_t&gt;&gt; FlushRequest;</text>
</g>
<!-- flush_queue_&#45;&gt;FlushRequest -->
<g id="edge48" class="edge">
<title>flush_queue_:FlushRequest&#45;&gt;FlushRequest</title>
<path fill="none" stroke="#666666" d="M2162,-671C2170.3418,-671 2178.8748,-670.706 2187.4721,-670.1781"/>
<polygon fill="#666666" stroke="#666666" points="2187.8617,-673.6593 2197.5865,-669.4547 2187.3623,-666.6771 2187.8617,-673.6593"/>
</g>
<!-- flush_queue_&#45;&gt;BackgroundFlush -->
<g id="edge54" class="edge">
<title>flush_queue_&#45;&gt;BackgroundFlush</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M2162.0552,-717.5728C2183.9372,-723.671 2206.6293,-729.995 2228.2422,-736.0183"/>
<polygon fill="#666666" stroke="#666666" points="2227.5171,-739.4496 2238.0897,-738.7627 2229.3964,-732.7065 2227.5171,-739.4496"/>
</g>
<!-- current_ -->
<g id="node26" class="node">
<title>current_</title>
<polygon fill="#95e1d3" stroke="#000000" points="3357,-451.5 3357,-512.5 3493,-512.5 3493,-451.5 3357,-451.5"/>
<text text-anchor="middle" x="3425" y="-497.3" font-family="Times,serif" font-size="14.00" fill="#000000">current_</text>
<polyline fill="none" stroke="#000000" points="3357,-489.5 3493,-489.5 "/>
<text text-anchor="start" x="3365" y="-474.3" font-family="Times,serif" font-size="14.00" fill="#000000">ColumnFamilyData</text>
<text text-anchor="start" x="3365" y="-459.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 对应的immtable list</text>
</g>
<!-- MemTableList_Add&#45;&gt;current_ -->
<g id="edge25" class="edge">
<title>MemTableList_Add&#45;&gt;current_</title>
<path fill="none" stroke="#666666" d="M2945.019,-451.3732C3041.8989,-445.4511 3194.8529,-440.6969 3326,-457 3332.7961,-457.8448 3339.7957,-459.004 3346.7824,-460.3635"/>
<polygon fill="#666666" stroke="#666666" points="3346.4814,-463.8757 3356.9845,-462.4852 3347.9067,-457.0223 3346.4814,-463.8757"/>
</g>
<!-- IsFlushPending -->
<g id="node25" class="node">
<title>IsFlushPending</title>
<polygon fill="none" stroke="#000000" points="2543,-436.5 2543,-527.5 2696,-527.5 2696,-436.5 2543,-436.5"/>
<text text-anchor="middle" x="2619.5" y="-512.3" font-family="Times,serif" font-size="14.00" fill="#000000">IsFlushPending</text>
<polyline fill="none" stroke="#000000" points="2543,-504.5 2696,-504.5 "/>
<text text-anchor="start" x="2551" y="-489.3" font-family="Times,serif" font-size="14.00" fill="#000000">Returns true if there </text>
<text text-anchor="start" x="2551" y="-474.3" font-family="Times,serif" font-size="14.00" fill="#000000"> is at least one memtable</text>
<text text-anchor="start" x="2551" y="-459.3" font-family="Times,serif" font-size="14.00" fill="#000000"> on which flush has</text>
<text text-anchor="start" x="2551" y="-444.3" font-family="Times,serif" font-size="14.00" fill="#000000"> not yet started.</text>
</g>
<!-- PickMemtablesToFlush -->
<g id="node27" class="node">
<title>PickMemtablesToFlush</title>
<polygon fill="none" stroke="#000000" points="3172,-466.5 3172,-527.5 3321,-527.5 3321,-466.5 3172,-466.5"/>
<text text-anchor="middle" x="3246.5" y="-512.3" font-family="Times,serif" font-size="14.00" fill="#000000">PickMemtablesToFlush</text>
<polyline fill="none" stroke="#000000" points="3172,-504.5 3321,-504.5 "/>
<text text-anchor="start" x="3180" y="-489.3" font-family="Times,serif" font-size="14.00" fill="#000000">遍历current list</text>
<text text-anchor="start" x="3180" y="-474.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 返回要flush的memlist</text>
</g>
<!-- PickMemtablesToFlush&#45;&gt;current_ -->
<g id="edge26" class="edge">
<title>PickMemtablesToFlush&#45;&gt;current_</title>
<path fill="none" stroke="#666666" d="M3321.1658,-490.7256C3329.5878,-490.0178 3338.1878,-489.2951 3346.6549,-488.5836"/>
<polygon fill="#666666" stroke="#666666" points="3347.2244,-492.0482 3356.8961,-487.723 3346.6381,-485.0728 3347.2244,-492.0482"/>
</g>
<!-- FlushJob_PickMemTable -->
<g id="node28" class="node">
<title>FlushJob_PickMemTable</title>
<polygon fill="none" stroke="#000000" points="2981,-633 2981,-679 3136,-679 3136,-633 2981,-633"/>
<text text-anchor="middle" x="3058.5" y="-663.8" font-family="Times,serif" font-size="14.00" fill="#000000">PickMemTable</text>
<polyline fill="none" stroke="#000000" points="2981,-656 3136,-656 "/>
<text text-anchor="middle" x="3058.5" y="-640.8" font-family="Times,serif" font-size="14.00" fill="#000000">获取要flush的memtable</text>
</g>
<!-- FlushJob_PickMemTable&#45;&gt;PickMemtablesToFlush -->
<g id="edge27" class="edge">
<title>FlushJob_PickMemTable&#45;&gt;PickMemtablesToFlush</title>
<path fill="none" stroke="#666666" d="M3085.8368,-632.88C3116.4178,-607.0163 3166.3929,-564.7502 3202.4932,-534.2185"/>
<polygon fill="#666666" stroke="#666666" points="3205.0564,-536.6347 3210.4316,-527.5046 3200.536,-531.2899 3205.0564,-536.6347"/>
</g>
<!-- FlushJob_Run -->
<g id="node29" class="node">
<title>FlushJob_Run</title>
<polygon fill="none" stroke="#000000" points="3106,-734 3011,-734 3011,-698 3106,-698 3106,-734"/>
<text text-anchor="middle" x="3058.5" y="-712.3" font-family="Times,serif" font-size="14.00" fill="#000000">FlushJob_Run</text>
</g>
<!-- WriteLevel0Table -->
<g id="node30" class="node">
<title>WriteLevel0Table</title>
<polygon fill="none" stroke="#000000" points="3175,-687 3175,-733 3318,-733 3318,-687 3175,-687"/>
<text text-anchor="middle" x="3246.5" y="-717.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteLevel0Table</text>
<polyline fill="none" stroke="#000000" points="3175,-710 3318,-710 "/>
<text text-anchor="middle" x="3246.5" y="-694.8" font-family="Times,serif" font-size="14.00" fill="#000000">将memtable写入文件</text>
</g>
<!-- FlushJob_Run&#45;&gt;WriteLevel0Table -->
<g id="edge28" class="edge">
<title>FlushJob_Run&#45;&gt;WriteLevel0Table</title>
<path fill="none" stroke="#666666" d="M3106.4268,-714.4704C3124.2022,-713.9031 3144.8979,-713.2426 3164.8397,-712.6062"/>
<polygon fill="#666666" stroke="#666666" points="3164.9816,-716.1035 3174.8648,-712.2862 3164.7583,-709.1071 3164.9816,-716.1035"/>
</g>
<!-- WriteBatchInternal_Iterate -->
<g id="node36" class="node">
<title>WriteBatchInternal_Iterate</title>
<polygon fill="none" stroke="#000000" points="185,-906.5 185,-967.5 348,-967.5 348,-906.5 185,-906.5"/>
<text text-anchor="middle" x="266.5" y="-952.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchInternal_Iterate</text>
<polyline fill="none" stroke="#000000" points="185,-944.5 348,-944.5 "/>
<text text-anchor="start" x="193" y="-929.3" font-family="Times,serif" font-size="14.00" fill="#000000">迭代遍历WAL日志内容</text>
<text text-anchor="start" x="193" y="-914.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 插入memtable中</text>
</g>
<!-- PutCFImpl -->
<g id="node37" class="node">
<title>PutCFImpl</title>
<polygon fill="none" stroke="#000000" points="461.5,-1030 384.5,-1030 384.5,-994 461.5,-994 461.5,-1030"/>
<text text-anchor="middle" x="423" y="-1008.3" font-family="Times,serif" font-size="14.00" fill="#000000">PutCFImpl</text>
</g>
<!-- WriteBatchInternal_Iterate&#45;&gt;PutCFImpl -->
<g id="edge34" class="edge">
<title>WriteBatchInternal_Iterate&#45;&gt;PutCFImpl</title>
<path fill="none" stroke="#666666" d="M330.1545,-967.5054C345.4267,-974.8243 361.4678,-982.5117 375.8384,-989.3986"/>
<polygon fill="#666666" stroke="#666666" points="374.4853,-992.6313 385.0159,-993.7967 377.5105,-986.3187 374.4853,-992.6313"/>
</g>
<!-- DeleteImpl -->
<g id="node38" class="node">
<title>DeleteImpl</title>
<polygon fill="none" stroke="#000000" points="462,-922 384,-922 384,-886 462,-886 462,-922"/>
<text text-anchor="middle" x="423" y="-900.3" font-family="Times,serif" font-size="14.00" fill="#000000">DeleteImpl</text>
</g>
<!-- WriteBatchInternal_Iterate&#45;&gt;DeleteImpl -->
<g id="edge35" class="edge">
<title>WriteBatchInternal_Iterate&#45;&gt;DeleteImpl</title>
<path fill="none" stroke="#666666" d="M348.4168,-919.7268C357.0488,-917.9066 365.6212,-916.099 373.7125,-914.3929"/>
<polygon fill="#666666" stroke="#666666" points="374.6099,-917.7807 383.6726,-912.2927 373.1656,-910.9313 374.6099,-917.7807"/>
</g>
<!-- MergeCF -->
<g id="node39" class="node">
<title>MergeCF</title>
<polygon fill="none" stroke="#000000" points="457.5,-976 388.5,-976 388.5,-940 457.5,-940 457.5,-976"/>
<text text-anchor="middle" x="423" y="-954.3" font-family="Times,serif" font-size="14.00" fill="#000000">MergeCF</text>
</g>
<!-- WriteBatchInternal_Iterate&#45;&gt;MergeCF -->
<g id="edge36" class="edge">
<title>WriteBatchInternal_Iterate&#45;&gt;MergeCF</title>
<path fill="none" stroke="#666666" d="M348.4168,-947.992C358.6261,-949.362 368.7521,-950.7207 378.0974,-951.9747"/>
<polygon fill="#666666" stroke="#666666" points="377.903,-955.4799 388.2797,-953.341 378.8341,-948.5421 377.903,-955.4799"/>
</g>
<!-- CheckMemtableFull -->
<g id="node40" class="node">
<title>CheckMemtableFull</title>
<polygon fill="none" stroke="#000000" points="498,-934.5 498,-995.5 659,-995.5 659,-934.5 498,-934.5"/>
<text text-anchor="middle" x="578.5" y="-980.3" font-family="Times,serif" font-size="14.00" fill="#000000">CheckMemtableFull</text>
<polyline fill="none" stroke="#000000" points="498,-972.5 659,-972.5 "/>
<text text-anchor="start" x="506" y="-957.3" font-family="Times,serif" font-size="14.00" fill="#000000">如果memtable满了，</text>
<text text-anchor="start" x="506" y="-942.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 需要flush，则放入队列</text>
</g>
<!-- PutCFImpl&#45;&gt;CheckMemtableFull -->
<g id="edge37" class="edge">
<title>PutCFImpl&#45;&gt;CheckMemtableFull</title>
<path fill="none" stroke="#666666" d="M461.8381,-1000.2612C470.0502,-997.779 479.0426,-995.0611 488.276,-992.2703"/>
<polygon fill="#666666" stroke="#666666" points="489.4032,-995.586 497.9629,-989.3424 487.3779,-988.8854 489.4032,-995.586"/>
</g>
<!-- DeleteImpl&#45;&gt;CheckMemtableFull -->
<g id="edge38" class="edge">
<title>DeleteImpl&#45;&gt;CheckMemtableFull</title>
<path fill="none" stroke="#666666" d="M462.2392,-919.3929C471.1029,-922.8699 480.8598,-926.6974 490.8382,-930.6118"/>
<polygon fill="#666666" stroke="#666666" points="489.8635,-933.989 500.451,-934.3827 492.4199,-927.4725 489.8635,-933.989"/>
</g>
<!-- MergeCF&#45;&gt;CheckMemtableFull -->
<g id="edge39" class="edge">
<title>MergeCF&#45;&gt;CheckMemtableFull</title>
<path fill="none" stroke="#666666" d="M457.5105,-959.5535C466.6643,-959.9656 476.9905,-960.4304 487.6552,-960.9105"/>
<polygon fill="#666666" stroke="#666666" points="487.8093,-964.4209 497.9566,-961.3743 488.1242,-957.428 487.8093,-964.4209"/>
</g>
<!-- ScheduleWork -->
<g id="node42" class="node">
<title>ScheduleWork</title>
<polygon fill="none" stroke="#000000" points="860,-997 762,-997 762,-961 860,-961 860,-997"/>
<text text-anchor="middle" x="811" y="-975.3" font-family="Times,serif" font-size="14.00" fill="#000000">ScheduleWork</text>
</g>
<!-- CheckMemtableFull&#45;&gt;ScheduleWork -->
<g id="edge42" class="edge">
<title>CheckMemtableFull&#45;&gt;ScheduleWork</title>
<path fill="none" stroke="#666666" d="M659.1647,-969.8572C689.6522,-971.693 723.7535,-973.7464 751.903,-975.4415"/>
<polygon fill="#666666" stroke="#666666" points="751.7945,-978.9412 761.9868,-976.0487 752.2153,-971.9538 751.7945,-978.9412"/>
</g>
<!-- WriteImpl -->
<g id="node41" class="node">
<title>WriteImpl</title>
<polygon fill="none" stroke="#000000" points="123.5,-802 49.5,-802 49.5,-766 123.5,-766 123.5,-802"/>
<text text-anchor="middle" x="86.5" y="-780.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl</text>
</g>
<!-- WriteImpl&#45;&gt;PreprocessWrite -->
<g id="edge40" class="edge">
<title>WriteImpl&#45;&gt;PreprocessWrite</title>
<path fill="none" stroke="#666666" d="M123.8838,-778.8331C207.5459,-767.2701 410.6646,-739.1968 514.7314,-724.8135"/>
<polygon fill="#666666" stroke="#666666" points="515.3634,-728.2596 524.79,-723.4233 514.405,-721.3255 515.3634,-728.2596"/>
</g>
<!-- WriteImpl&#45;&gt;WriteBatchInternal_Iterate -->
<g id="edge41" class="edge">
<title>WriteImpl&#45;&gt;WriteBatchInternal_Iterate</title>
<path fill="none" stroke="#666666" d="M96.1117,-802.0671C109.6599,-826.0571 136.5411,-868.6605 176.941,-901.2741"/>
<polygon fill="#666666" stroke="#666666" points="174.8697,-904.0968 184.9207,-907.4477 179.1531,-898.5603 174.8697,-904.0968"/>
</g>
<!-- ScheduleWork&#45;&gt;TakeNextColumnFamily -->
<g id="edge61" class="edge">
<title>ScheduleWork&#45;&gt;TakeNextColumnFamily</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M860.0636,-979C895.95,-979 945.6539,-979 988.5839,-979"/>
<polygon fill="#666666" stroke="#666666" points="988.7676,-982.5001 998.7676,-979 988.7675,-975.5001 988.7676,-982.5001"/>
</g>
<!-- ScheduleWork&#45;&gt;_Node -->
<g id="edge43" class="edge">
<title>ScheduleWork&#45;&gt;_Node</title>
<path fill="none" stroke="#666666" d="M860.1941,-992.477C889.7415,-999.8683 928.2299,-1008.2691 963,-1012 1065.0807,-1022.9535 1091.9504,-1023.2392 1194,-1012 1202.3694,-1011.0782 1210.9577,-1009.8717 1219.5796,-1008.4659"/>
<polygon fill="#666666" stroke="#666666" points="1220.4409,-1011.8694 1229.7053,-1006.7292 1219.2575,-1004.9701 1220.4409,-1011.8694"/>
</g>
<!-- ColumnFamilyData -->
<g id="node44" class="node">
<title>ColumnFamilyData</title>
<polygon fill="none" stroke="#000000" points="24,-45 24,-91 149,-91 149,-45 24,-45"/>
<text text-anchor="middle" x="86.5" y="-75.8" font-family="Times,serif" font-size="14.00" fill="#000000">ColumnFamilyData</text>
<polyline fill="none" stroke="#000000" points="24,-68 149,-68 "/>
<text text-anchor="start" x="32" y="-52.8" font-family="Times,serif" font-size="14.00" fill="#000000">field </text>
</g>
<!-- CreateNewMemtable -->
<g id="node45" class="node">
<title>CreateNewMemtable</title>
<polygon fill="none" stroke="#000000" points="1657.5,-60 1523.5,-60 1523.5,-24 1657.5,-24 1657.5,-60"/>
<text text-anchor="middle" x="1590.5" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#000000">CreateNewMemtable</text>
</g>
<!-- CreateNewMemtable&#45;&gt;ConstructNewMemtable -->
<g id="edge46" class="edge">
<title>CreateNewMemtable&#45;&gt;ConstructNewMemtable</title>
<path fill="none" stroke="#666666" d="M1657.5781,-59.0859C1677.8943,-64.2608 1700.4256,-69.9999 1721.5491,-75.3804"/>
<polygon fill="#666666" stroke="#666666" points="1720.9103,-78.8294 1731.4649,-77.9061 1722.6382,-72.046 1720.9103,-78.8294"/>
</g>
<!-- CreateNewMemtable&#45;&gt;SetMemtable -->
<g id="edge47" class="edge">
<title>CreateNewMemtable&#45;&gt;SetMemtable</title>
<path fill="none" stroke="#666666" d="M1657.5781,-42C1686.4057,-42 1719.6933,-42 1747.0905,-42"/>
<polygon fill="#666666" stroke="#666666" points="1747.2807,-45.5001 1757.2807,-42 1747.2807,-38.5001 1747.2807,-45.5001"/>
</g>
<!-- BackgroundFlush&#45;&gt;IsFlushPending -->
<g id="edge49" class="edge">
<title>BackgroundFlush&#45;&gt;IsFlushPending</title>
<path fill="none" stroke="#666666" d="M2447.8486,-742.4136C2462.901,-734.9661 2476.9896,-725.3669 2488,-713 2531.5804,-664.0505 2490.5048,-626.3328 2524,-570 2531.4896,-557.4038 2541.3326,-545.5309 2551.8511,-534.8261"/>
<polygon fill="#666666" stroke="#666666" points="2554.5261,-537.1052 2559.2205,-527.6071 2549.6276,-532.1047 2554.5261,-537.1052"/>
</g>
<!-- FlushMemTablesToOutputFiles -->
<g id="node48" class="node">
<title>FlushMemTablesToOutputFiles</title>
<polygon fill="none" stroke="#000000" points="2715,-760 2524,-760 2524,-724 2715,-724 2715,-760"/>
<text text-anchor="middle" x="2619.5" y="-738.3" font-family="Times,serif" font-size="14.00" fill="#000000">FlushMemTablesToOutputFiles</text>
</g>
<!-- BackgroundFlush&#45;&gt;FlushMemTablesToOutputFiles -->
<g id="edge50" class="edge">
<title>BackgroundFlush&#45;&gt;FlushMemTablesToOutputFiles</title>
<path fill="none" stroke="#666666" d="M2447.5328,-758.1705C2469.1843,-756.1346 2492.0108,-753.9881 2513.707,-751.948"/>
<polygon fill="#666666" stroke="#666666" points="2514.2925,-755.4085 2523.9209,-750.9875 2513.6371,-748.4392 2514.2925,-755.4085"/>
</g>
<!-- FlushMemTableToOutputFile -->
<g id="node49" class="node">
<title>FlushMemTableToOutputFile</title>
<polygon fill="none" stroke="#000000" points="2938.5,-734 2757.5,-734 2757.5,-698 2938.5,-698 2938.5,-734"/>
<text text-anchor="middle" x="2848" y="-712.3" font-family="Times,serif" font-size="14.00" fill="#000000">FlushMemTableToOutputFile</text>
</g>
<!-- FlushMemTablesToOutputFiles&#45;&gt;FlushMemTableToOutputFile -->
<g id="edge51" class="edge">
<title>FlushMemTablesToOutputFiles&#45;&gt;FlushMemTableToOutputFile</title>
<path fill="none" stroke="#666666" d="M2715.0806,-731.1243C2725.6457,-729.9221 2736.4298,-728.6951 2747.0581,-727.4857"/>
<polygon fill="#666666" stroke="#666666" points="2747.648,-730.9413 2757.1881,-726.3331 2746.8565,-723.9862 2747.648,-730.9413"/>
</g>
<!-- FlushMemTableToOutputFile&#45;&gt;FlushJob_PickMemTable -->
<g id="edge52" class="edge">
<title>FlushMemTableToOutputFile&#45;&gt;FlushJob_PickMemTable</title>
<path fill="none" stroke="#666666" d="M2911.1569,-697.998C2929.9939,-692.6288 2950.9847,-686.6457 2971.0819,-680.9173"/>
<polygon fill="#666666" stroke="#666666" points="2972.2052,-684.2366 2980.8627,-678.1294 2970.2863,-677.5047 2972.2052,-684.2366"/>
</g>
<!-- FlushMemTableToOutputFile&#45;&gt;FlushJob_Run -->
<g id="edge53" class="edge">
<title>FlushMemTableToOutputFile&#45;&gt;FlushJob_Run</title>
<path fill="none" stroke="#666666" d="M2938.7983,-716C2959.8319,-716 2981.6504,-716 3000.8072,-716"/>
<polygon fill="#666666" stroke="#666666" points="3000.8581,-719.5001 3010.8581,-716 3000.8581,-712.5001 3000.8581,-719.5001"/>
</g>
</g>
</svg>
