<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: two_phase_commit_recover Pages: 1 -->
<svg width="2384pt" height="777pt"
 viewBox="0.00 0.00 2384.00 777.45" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 773.45)">
<title>two_phase_commit_recover</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-773.45 2380,-773.45 2380,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="1186,-530.45 1186,-692.45 2368,-692.45 2368,-530.45 1186,-530.45"/>
<text text-anchor="middle" x="1777" y="-672.45" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_WriteBatch</title>
<polygon fill="none" stroke="#000000" points="8,-530.45 8,-761.45 691.5,-761.45 691.5,-530.45 8,-530.45"/>
<text text-anchor="middle" x="349.75" y="-741.45" font-family="Times,serif" font-size="20.00" fill="#000000">WriteBatch</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_MemTable</title>
<polygon fill="none" stroke="#000000" points="863.5,-128.45 863.5,-210.45 986.5,-210.45 986.5,-128.45 863.5,-128.45"/>
<text text-anchor="middle" x="925" y="-190.45" font-family="Times,serif" font-size="20.00" fill="#000000">MemTable</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_MemTableInserter</title>
<polygon fill="none" stroke="#000000" points="436,-218.45 436,-522.45 1646,-522.45 1646,-218.45 436,-218.45"/>
<text text-anchor="middle" x="1041" y="-502.45" font-family="Times,serif" font-size="20.00" fill="#000000"> MemTableInserter</text>
</g>
<!-- InsertRecoveredTransaction -->
<g id="node1" class="node">
<title>InsertRecoveredTransaction</title>
<polygon fill="none" stroke="#000000" points="1363,-574.45 1194,-574.45 1194,-538.45 1363,-538.45 1363,-574.45"/>
<text text-anchor="middle" x="1278.5" y="-552.75" font-family="Times,serif" font-size="14.00" fill="#000000">InsertRecoveredTransaction</text>
</g>
<!-- recovered_transactions_ -->
<g id="node2" class="node">
<title>recovered_transactions_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1699,-561.45 1699,-645.45 2031,-645.45 2031,-561.45 1699,-561.45"/>
<text text-anchor="middle" x="1865" y="-630.25" font-family="Times,serif" font-size="14.00" fill="#000000">recovered_transactions_</text>
<polyline fill="none" stroke="#000000" points="1699,-622.45 2031,-622.45 "/>
<text text-anchor="start" x="1707" y="-607.25" font-family="Times,serif" font-size="14.00" fill="#000000">key为事务name</text>
<polyline fill="none" stroke="#000000" points="1699,-599.45 2031,-599.45 "/>
<text text-anchor="start" x="1707" y="-584.25" font-family="Times,serif" font-size="14.00" fill="#000000">std::unordered_map&lt;std::string, RecoveredTransaction*&gt;</text>
<text text-anchor="start" x="1707" y="-569.25" font-family="Times,serif" font-size="14.00" fill="#000000"> recovered_transactions_;</text>
</g>
<!-- InsertRecoveredTransaction&#45;&gt;recovered_transactions_ -->
<g id="edge1" class="edge">
<title>InsertRecoveredTransaction&#45;&gt;recovered_transactions_</title>
<path fill="none" stroke="#ff0000" d="M1313.634,-574.5038C1354.6791,-594.4925 1425.2381,-625.4729 1490,-637.45 1554.3728,-649.3551 1625.7664,-646.7433 1688.8374,-639.1503"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1689.3993,-642.6073 1698.8861,-637.8903 1688.5284,-635.6617 1689.3993,-642.6073"/>
</g>
<!-- RecoveredTransaction -->
<g id="node5" class="node">
<title>RecoveredTransaction</title>
<polygon fill="#95e1d3" stroke="#000000" points="2067,-538.95 2067,-653.95 2360,-653.95 2360,-538.95 2067,-538.95"/>
<text text-anchor="middle" x="2213.5" y="-638.75" font-family="Times,serif" font-size="14.00" fill="#000000">RecoveredTransaction</text>
<polyline fill="none" stroke="#000000" points="2067,-630.95 2360,-630.95 "/>
<text text-anchor="start" x="2075" y="-615.75" font-family="Times,serif" font-size="14.00" fill="#000000">std::string name_;</text>
<polyline fill="none" stroke="#000000" points="2067,-607.95 2360,-607.95 "/>
<text text-anchor="start" x="2075" y="-592.75" font-family="Times,serif" font-size="14.00" fill="#000000">bool unprepared_;</text>
<polyline fill="none" stroke="#000000" points="2067,-584.95 2360,-584.95 "/>
<text text-anchor="start" x="2075" y="-569.75" font-family="Times,serif" font-size="14.00" fill="#000000">std::map&lt;SequenceNumber, BatchInfo&gt; batches_;</text>
<polyline fill="none" stroke="#000000" points="2067,-561.95 2360,-561.95 "/>
<text text-anchor="middle" x="2213.5" y="-546.75" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
</g>
<!-- recovered_transactions_&#45;&gt;RecoveredTransaction -->
<g id="edge4" class="edge">
<title>recovered_transactions_&#45;&gt;RecoveredTransaction</title>
<path fill="none" stroke="#666666" d="M2031.0847,-600.114C2039.5599,-599.9437 2048.061,-599.773 2056.5075,-599.6033"/>
<polygon fill="#666666" stroke="#666666" points="2056.8501,-603.0972 2066.7778,-599.397 2056.7095,-596.0987 2056.8501,-603.0972"/>
</g>
<!-- DeleteRecoveredTransaction -->
<g id="node3" class="node">
<title>DeleteRecoveredTransaction</title>
<polygon fill="none" stroke="#000000" points="1663,-628.45 1490,-628.45 1490,-592.45 1663,-592.45 1663,-628.45"/>
<text text-anchor="middle" x="1576.5" y="-606.75" font-family="Times,serif" font-size="14.00" fill="#000000">DeleteRecoveredTransaction</text>
</g>
<!-- DeleteRecoveredTransaction&#45;&gt;recovered_transactions_ -->
<g id="edge2" class="edge">
<title>DeleteRecoveredTransaction&#45;&gt;recovered_transactions_</title>
<path fill="none" stroke="#ff0000" d="M1663.0595,-608.3497C1671.2909,-608.15 1679.8223,-607.943 1688.5184,-607.732"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1688.8823,-611.2243 1698.7944,-607.4827 1688.7124,-604.2264 1688.8823,-611.2243"/>
</g>
<!-- GetRecoveredTransaction -->
<g id="node4" class="node">
<title>GetRecoveredTransaction</title>
<polygon fill="none" stroke="#000000" points="1655.5,-574.45 1497.5,-574.45 1497.5,-538.45 1655.5,-538.45 1655.5,-574.45"/>
<text text-anchor="middle" x="1576.5" y="-552.75" font-family="Times,serif" font-size="14.00" fill="#000000">GetRecoveredTransaction</text>
</g>
<!-- GetRecoveredTransaction&#45;&gt;recovered_transactions_ -->
<g id="edge3" class="edge">
<title>GetRecoveredTransaction&#45;&gt;recovered_transactions_</title>
<path fill="none" stroke="#0000ff" d="M1655.7155,-569.3551C1666.2305,-571.0681 1677.3286,-572.8761 1688.7068,-574.7298"/>
<polygon fill="#0000ff" stroke="#0000ff" points="1688.3376,-578.2157 1698.7703,-576.3692 1689.4632,-571.3068 1688.3376,-578.2157"/>
</g>
<!-- WAL_REP -->
<g id="node6" class="node">
<title>WAL_REP</title>
<polygon fill="#95e1d3" stroke="#000000" points="16,-538.45 16,-722.45 180,-722.45 180,-538.45 16,-538.45"/>
<text text-anchor="middle" x="98" y="-707.25" font-family="Times,serif" font-size="14.00" fill="#000000">Write batch Rep_</text>
<polyline fill="none" stroke="#000000" points="16,-699.45 180,-699.45 "/>
<text text-anchor="start" x="24" y="-684.25" font-family="Times,serif" font-size="14.00" fill="#000000">Seq</text>
<polyline fill="none" stroke="#000000" points="16,-676.45 180,-676.45 "/>
<text text-anchor="start" x="24" y="-661.25" font-family="Times,serif" font-size="14.00" fill="#000000">ktypeBeginPrepare(xid)</text>
<polyline fill="none" stroke="#000000" points="16,-653.45 180,-653.45 "/>
<text text-anchor="start" x="24" y="-638.25" font-family="Times,serif" font-size="14.00" fill="#000000">put(key1, value1)</text>
<polyline fill="none" stroke="#000000" points="16,-630.45 180,-630.45 "/>
<text text-anchor="start" x="24" y="-615.25" font-family="Times,serif" font-size="14.00" fill="#000000">delete(key2, value2)</text>
<polyline fill="none" stroke="#000000" points="16,-607.45 180,-607.45 "/>
<text text-anchor="start" x="24" y="-592.25" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
<polyline fill="none" stroke="#000000" points="16,-584.45 180,-584.45 "/>
<text text-anchor="start" x="24" y="-569.25" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeEndPrepareXID(xid)</text>
<polyline fill="none" stroke="#000000" points="16,-561.45 180,-561.45 "/>
<text text-anchor="start" x="24" y="-546.25" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeCommitXID(xid)</text>
</g>
<!-- WriteBatch_Iterate -->
<g id="node7" class="node">
<title>WriteBatch_Iterate</title>
<polygon fill="none" stroke="#000000" points="216,-538.95 216,-599.95 408,-599.95 408,-538.95 216,-538.95"/>
<text text-anchor="middle" x="312" y="-584.75" font-family="Times,serif" font-size="14.00" fill="#000000">Iterate</text>
<polyline fill="none" stroke="#000000" points="216,-576.95 408,-576.95 "/>
<text text-anchor="start" x="224" y="-561.75" font-family="Times,serif" font-size="14.00" fill="#000000">遍历batch,　调用handled处理</text>
<text text-anchor="start" x="224" y="-546.75" font-family="Times,serif" font-size="14.00" fill="#000000"> batch中每个record</text>
</g>
<!-- WAL_REP&#45;&gt;WriteBatch_Iterate -->
<g id="edge5" class="edge">
<title>WAL_REP&#45;&gt;WriteBatch_Iterate</title>
<path fill="none" stroke="#666666" d="M180.126,-607.0402C188.6043,-604.6235 197.3032,-602.1439 205.9933,-599.6668"/>
<polygon fill="#666666" stroke="#666666" points="207.1314,-602.9819 215.7888,-596.8746 205.2124,-596.2501 207.1314,-602.9819"/>
</g>
<!-- ReadRecordFromWriteBatch -->
<g id="node8" class="node">
<title>ReadRecordFromWriteBatch</title>
<polygon fill="none" stroke="#000000" points="507.5,-546.45 507.5,-592.45 683.5,-592.45 683.5,-546.45 507.5,-546.45"/>
<text text-anchor="middle" x="595.5" y="-577.25" font-family="Times,serif" font-size="14.00" fill="#000000">ReadRecordFromWriteBatch</text>
<polyline fill="none" stroke="#000000" points="507.5,-569.45 683.5,-569.45 "/>
<text text-anchor="start" x="515.5" y="-554.25" font-family="Times,serif" font-size="14.00" fill="#000000">从WriteBatch中读取记录</text>
</g>
<!-- WriteBatch_Iterate&#45;&gt;ReadRecordFromWriteBatch -->
<g id="edge6" class="edge">
<title>WriteBatch_Iterate&#45;&gt;ReadRecordFromWriteBatch</title>
<path fill="none" stroke="#666666" d="M408.3758,-569.45C437.0941,-569.45 468.5902,-569.45 497.4163,-569.45"/>
<polygon fill="#666666" stroke="#666666" points="497.4922,-572.9501 507.4922,-569.45 497.4921,-565.9501 497.4922,-572.9501"/>
</g>
<!-- MarkBeginPrepare -->
<g id="node10" class="node">
<title>MarkBeginPrepare</title>
<polygon fill="none" stroke="#000000" points="444,-360.45 444,-436.45 747,-436.45 747,-360.45 444,-360.45"/>
<text text-anchor="middle" x="595.5" y="-421.25" font-family="Times,serif" font-size="14.00" fill="#000000">MarkBeginPrepare</text>
<polyline fill="none" stroke="#000000" points="444,-413.45 747,-413.45 "/>
<text text-anchor="start" x="452" y="-398.25" font-family="Times,serif" font-size="14.00" fill="#000000">遇到了BeginPrepare标记</text>
<text text-anchor="start" x="452" y="-383.25" font-family="Times,serif" font-size="14.00" fill="#000000"> 新建rebuiding_trx_　writeBatch</text>
<text text-anchor="start" x="452" y="-368.25" font-family="Times,serif" font-size="14.00" fill="#000000"> 用来记录beginPrepare ... endPrepare之间的 操作</text>
</g>
<!-- WriteBatch_Iterate&#45;&gt;MarkBeginPrepare -->
<g id="edge7" class="edge">
<title>WriteBatch_Iterate&#45;&gt;MarkBeginPrepare</title>
<path fill="none" stroke="#666666" d="M349.579,-538.8174C373.5506,-519.9813 405.7035,-495.9874 436,-477.45 456.966,-464.6215 480.3014,-452.1383 502.5098,-441.0242"/>
<polygon fill="#666666" stroke="#666666" points="504.2103,-444.0878 511.6159,-436.511 501.1017,-437.8158 504.2103,-444.0878"/>
</g>
<!-- MarkEndPrepare -->
<g id="node11" class="node">
<title>MarkEndPrepare</title>
<polygon fill="none" stroke="#000000" points="827.5,-422.95 827.5,-483.95 1022.5,-483.95 1022.5,-422.95 827.5,-422.95"/>
<text text-anchor="middle" x="925" y="-468.75" font-family="Times,serif" font-size="14.00" fill="#000000">MarkEndPrepare</text>
<polyline fill="none" stroke="#000000" points="827.5,-460.95 1022.5,-460.95 "/>
<text text-anchor="start" x="835.5" y="-445.75" font-family="Times,serif" font-size="14.00" fill="#000000">把writeBatch以事务名字为key</text>
<text text-anchor="start" x="835.5" y="-430.75" font-family="Times,serif" font-size="14.00" fill="#000000"> 插入db的map中</text>
</g>
<!-- WriteBatch_Iterate&#45;&gt;MarkEndPrepare -->
<g id="edge8" class="edge">
<title>WriteBatch_Iterate&#45;&gt;MarkEndPrepare</title>
<path fill="none" stroke="#666666" d="M408.2798,-543.7766C417.6234,-541.5343 426.9786,-539.3854 436,-537.45 566.2822,-509.4992 717.6604,-484.6571 817.0722,-469.3721"/>
<polygon fill="#666666" stroke="#666666" points="817.7732,-472.8057 827.1277,-467.8314 816.713,-465.8864 817.7732,-472.8057"/>
</g>
<!-- MarkCommit -->
<g id="node12" class="node">
<title>MarkCommit</title>
<polygon fill="none" stroke="#000000" points="1103,-276.45 1103,-382.45 1454,-382.45 1454,-276.45 1103,-276.45"/>
<text text-anchor="middle" x="1278.5" y="-367.25" font-family="Times,serif" font-size="14.00" fill="#000000">MarkCommit</text>
<polyline fill="none" stroke="#000000" points="1103,-359.45 1454,-359.45 "/>
<text text-anchor="start" x="1111" y="-344.25" font-family="Times,serif" font-size="14.00" fill="#000000">处理Commit record</text>
<text text-anchor="start" x="1111" y="-329.25" font-family="Times,serif" font-size="14.00" fill="#000000"> 1. 读取事务id, 去map中查找对应的</text>
<text text-anchor="start" x="1111" y="-314.25" font-family="Times,serif" font-size="14.00" fill="#000000"> recover transaction</text>
<text text-anchor="start" x="1111" y="-299.25" font-family="Times,serif" font-size="14.00" fill="#000000"> 找到对应WriteBatch</text>
<text text-anchor="start" x="1111" y="-284.25" font-family="Times,serif" font-size="14.00" fill="#000000"> 2. 迭代遍历最终调用PutCF,将key/value插入memtable中</text>
</g>
<!-- WriteBatch_Iterate&#45;&gt;MarkCommit -->
<g id="edge9" class="edge">
<title>WriteBatch_Iterate&#45;&gt;MarkCommit</title>
<path fill="none" stroke="#666666" d="M313.621,-538.7746C318.9138,-470.73 341.3557,-306.2453 436,-218.45 553.1409,-109.7859 624.615,-145.5229 783,-124.45 908.1196,-107.8029 950.0125,-77.0582 1067,-124.45 1138.1598,-153.2769 1198.6004,-218.8045 1236.4183,-268.0679"/>
<polygon fill="#666666" stroke="#666666" points="1233.6971,-270.2722 1242.5219,-276.1351 1239.2794,-266.0486 1233.6971,-270.2722"/>
</g>
<!-- PutCF -->
<g id="node13" class="node">
<title>PutCF</title>
<polygon fill="none" stroke="#000000" points="501.5,-227.45 501.5,-341.45 689.5,-341.45 689.5,-227.45 501.5,-227.45"/>
<text text-anchor="middle" x="595.5" y="-326.25" font-family="Times,serif" font-size="14.00" fill="#000000">PutCF</text>
<polyline fill="none" stroke="#000000" points="501.5,-318.45 689.5,-318.45 "/>
<text text-anchor="start" x="509.5" y="-303.25" font-family="Times,serif" font-size="14.00" fill="#000000">case 1.rebuilding_trx_不为null</text>
<text text-anchor="start" x="509.5" y="-288.25" font-family="Times,serif" font-size="14.00" fill="#000000"> 则表示是recovering的事务</text>
<text text-anchor="start" x="509.5" y="-273.25" font-family="Times,serif" font-size="14.00" fill="#000000"> 插入rebuilding_trx batch中</text>
<polyline fill="none" stroke="#000000" points="501.5,-265.45 689.5,-265.45 "/>
<text text-anchor="start" x="509.5" y="-250.25" font-family="Times,serif" font-size="14.00" fill="#000000">case 2.将(key,value)插入</text>
<text text-anchor="start" x="509.5" y="-235.25" font-family="Times,serif" font-size="14.00" fill="#000000"> memtable中</text>
</g>
<!-- WriteBatch_Iterate&#45;&gt;PutCF -->
<g id="edge10" class="edge">
<title>WriteBatch_Iterate&#45;&gt;PutCF</title>
<path fill="none" stroke="#666666" d="M322.0951,-538.8992C338.848,-492.5211 376.5564,-404.1837 436,-351.45 452.2691,-337.0173 472.0956,-325.3888 492.1654,-316.133"/>
<polygon fill="#666666" stroke="#666666" points="493.6664,-319.2961 501.3918,-312.0457 490.8312,-312.896 493.6664,-319.2961"/>
</g>
<!-- MemTable_Add -->
<g id="node9" class="node">
<title>MemTable_Add</title>
<polygon fill="none" stroke="#000000" points="978.5,-172.45 871.5,-172.45 871.5,-136.45 978.5,-136.45 978.5,-172.45"/>
<text text-anchor="middle" x="925" y="-150.75" font-family="Times,serif" font-size="14.00" fill="#000000">MemTable_Add</text>
</g>
<!-- rebuilding_trx_ -->
<g id="node14" class="node">
<title>rebuilding_trx_</title>
<polygon fill="#95e1d3" stroke="#000000" points="783,-226.95 783,-295.95 1067,-295.95 1067,-226.95 783,-226.95"/>
<text text-anchor="middle" x="925" y="-280.75" font-family="Times,serif" font-size="14.00" fill="#000000">rebuilding_trx_</text>
<polyline fill="none" stroke="#000000" points="783,-272.95 1067,-272.95 "/>
<text text-anchor="start" x="791" y="-257.75" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatch</text>
<polyline fill="none" stroke="#000000" points="783,-249.95 1067,-249.95 "/>
<text text-anchor="middle" x="925" y="-234.75" font-family="Times,serif" font-size="14.00" fill="#000000">保存从BeginPrepare到 EndPrepare之间的write</text>
</g>
<!-- MarkBeginPrepare&#45;&gt;rebuilding_trx_ -->
<g id="edge15" class="edge">
<title>MarkBeginPrepare&#45;&gt;rebuilding_trx_</title>
<path fill="none" stroke="#666666" d="M732.4427,-360.4433C737.4782,-357.6485 742.3527,-354.6552 747,-351.45 768.371,-336.7103 761.6265,-320.186 783,-305.45 785.1381,-303.9758 787.3275,-302.5496 789.5609,-301.1698"/>
<polygon fill="#666666" stroke="#666666" points="791.4708,-304.1085 798.3779,-296.0747 787.9684,-298.0477 791.4708,-304.1085"/>
</g>
<!-- rebuilding_trx_seq_ -->
<g id="node15" class="node">
<title>rebuilding_trx_seq_</title>
<polygon fill="none" stroke="#000000" points="987.5,-404.45 862.5,-404.45 862.5,-368.45 987.5,-368.45 987.5,-404.45"/>
<text text-anchor="middle" x="925" y="-382.75" font-family="Times,serif" font-size="14.00" fill="#000000">rebuilding_trx_seq_</text>
</g>
<!-- MarkBeginPrepare&#45;&gt;rebuilding_trx_seq_ -->
<g id="edge16" class="edge">
<title>MarkBeginPrepare&#45;&gt;rebuilding_trx_seq_</title>
<path fill="none" stroke="#666666" d="M747.2301,-392.9241C783.6496,-391.5978 820.923,-390.2403 851.8716,-389.1132"/>
<polygon fill="#666666" stroke="#666666" points="852.2484,-392.6019 862.1144,-388.7402 851.9936,-385.6065 852.2484,-392.6019"/>
</g>
<!-- unprepared_batch_ -->
<g id="node16" class="node">
<title>unprepared_batch_</title>
<polygon fill="none" stroke="#000000" points="985,-350.45 865,-350.45 865,-314.45 985,-314.45 985,-350.45"/>
<text text-anchor="middle" x="925" y="-328.75" font-family="Times,serif" font-size="14.00" fill="#000000">unprepared_batch_</text>
</g>
<!-- MarkBeginPrepare&#45;&gt;unprepared_batch_ -->
<g id="edge17" class="edge">
<title>MarkBeginPrepare&#45;&gt;unprepared_batch_</title>
<path fill="none" stroke="#666666" d="M747.1642,-366.6722C759.2839,-364.2035 771.3423,-361.7705 783,-359.45 806.3685,-354.7983 831.9365,-349.883 854.8577,-345.5395"/>
<polygon fill="#666666" stroke="#666666" points="855.6682,-348.9484 864.8439,-343.6515 854.3678,-342.0702 855.6682,-348.9484"/>
</g>
<!-- MarkEndPrepare&#45;&gt;InsertRecoveredTransaction -->
<g id="edge18" class="edge">
<title>MarkEndPrepare&#45;&gt;InsertRecoveredTransaction</title>
<path fill="none" stroke="#666666" d="M989.7119,-484.0136C1022.9525,-498.6719 1064.4719,-515.4024 1103,-526.45 1128.8204,-533.8537 1157.3333,-539.6879 1183.7357,-544.1649"/>
<polygon fill="#666666" stroke="#666666" points="1183.3051,-547.641 1193.7414,-545.8147 1184.4441,-540.7343 1183.3051,-547.641"/>
</g>
<!-- MaybeAdvanceSeq -->
<g id="node17" class="node">
<title>MaybeAdvanceSeq</title>
<polygon fill="none" stroke="#000000" points="1638,-396.45 1515,-396.45 1515,-360.45 1638,-360.45 1638,-396.45"/>
<text text-anchor="middle" x="1576.5" y="-374.75" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeAdvanceSeq</text>
</g>
<!-- MarkEndPrepare&#45;&gt;MaybeAdvanceSeq -->
<g id="edge19" class="edge">
<title>MarkEndPrepare&#45;&gt;MaybeAdvanceSeq</title>
<path fill="none" stroke="#666666" d="M1022.5361,-442.2217C1154.6409,-427.0139 1387.3766,-400.2217 1504.6589,-386.7202"/>
<polygon fill="#666666" stroke="#666666" points="1505.0801,-390.195 1514.6142,-385.5742 1504.2795,-383.2409 1505.0801,-390.195"/>
</g>
<!-- MarkCommit&#45;&gt;DeleteRecoveredTransaction -->
<g id="edge20" class="edge">
<title>MarkCommit&#45;&gt;DeleteRecoveredTransaction</title>
<path fill="none" stroke="#b83b5e" d="M1330.1823,-382.5872C1366.5497,-421.1117 1415.42,-475.2268 1454,-526.45 1472.0264,-550.3838 1466.2383,-565.1973 1490,-583.45 1491.6375,-584.7078 1493.3344,-585.9076 1495.0804,-587.0521"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1493.7649,-590.3352 1504.1712,-592.3253 1497.2772,-584.2801 1493.7649,-590.3352"/>
</g>
<!-- MarkCommit&#45;&gt;GetRecoveredTransaction -->
<g id="edge21" class="edge">
<title>MarkCommit&#45;&gt;GetRecoveredTransaction</title>
<path fill="none" stroke="#b83b5e" d="M1324.0866,-382.8387C1363.9843,-426.6676 1425.5135,-487.63 1490,-526.45 1494.6811,-529.2679 1499.6647,-531.87 1504.7852,-534.2634"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1503.5498,-537.5433 1514.1141,-538.3477 1506.3573,-531.1309 1503.5498,-537.5433"/>
</g>
<!-- MarkCommit&#45;&gt;WriteBatch_Iterate -->
<g id="edge22" class="edge">
<title>MarkCommit&#45;&gt;WriteBatch_Iterate</title>
<path fill="none" stroke="#b83b5e" d="M1249.1046,-276.4434C1214.1501,-219.5182 1149.9527,-132.2886 1067,-95.45 810.4226,18.4941 652.3038,54.5134 436,-124.45 372.8881,-176.6669 331.5438,-428.8832 317.4122,-528.68"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="313.9315,-528.2988 316.0144,-538.6869 320.8642,-529.2673 313.9315,-528.2988"/>
</g>
<!-- MarkCommit&#45;&gt;MaybeAdvanceSeq -->
<g id="edge23" class="edge">
<title>MarkCommit&#45;&gt;MaybeAdvanceSeq</title>
<path fill="none" stroke="#b83b5e" d="M1454.0019,-358.3077C1471.8295,-361.239 1489.1341,-364.0844 1504.85,-366.6686"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1504.5024,-370.1584 1514.9378,-368.3273 1505.6382,-363.2511 1504.5024,-370.1584"/>
</g>
<!-- PutCF&#45;&gt;MemTable_Add -->
<g id="edge11" class="edge">
<title>PutCF&#45;&gt;MemTable_Add</title>
<path fill="none" stroke="#666666" d="M689.9215,-247.1972C748.0419,-224.2665 820.5381,-195.6641 869.5383,-176.3317"/>
<polygon fill="#666666" stroke="#666666" points="870.9961,-179.5191 879.0138,-172.5932 868.4271,-173.0076 870.9961,-179.5191"/>
</g>
<!-- PutCF&#45;&gt;rebuilding_trx_ -->
<g id="edge12" class="edge">
<title>PutCF&#45;&gt;rebuilding_trx_</title>
<path fill="none" stroke="#666666" d="M689.9215,-277.8591C715.8636,-276.0483 744.6698,-274.0375 772.9723,-272.0619"/>
<polygon fill="#666666" stroke="#666666" points="773.2247,-275.5529 782.9566,-271.365 772.7372,-268.5699 773.2247,-275.5529"/>
</g>
<!-- rebuilding_trx_&#45;&gt;InsertRecoveredTransaction -->
<g id="edge13" class="edge">
<title>rebuilding_trx_&#45;&gt;InsertRecoveredTransaction</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1057.3816,-295.9878C1060.8132,-298.8947 1064.0358,-302.0422 1067,-305.45 1132.3125,-380.5358 1032.9069,-455.8061 1103,-526.45 1124.1251,-547.7411 1154.449,-557.2022 1183.9635,-560.7424"/>
<polygon fill="#666666" stroke="#666666" points="1183.6322,-564.2266 1193.9273,-561.7245 1184.3189,-557.2604 1183.6322,-564.2266"/>
</g>
<!-- rebuilding_trx_&#45;&gt;MarkCommit -->
<g id="edge14" class="edge">
<title>rebuilding_trx_&#45;&gt;MarkCommit</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1067.2539,-288.8142C1075.6655,-290.4323 1084.1854,-292.0712 1092.7336,-293.7155"/>
<polygon fill="#666666" stroke="#666666" points="1092.2954,-297.1954 1102.7765,-295.6474 1093.6177,-290.3214 1092.2954,-297.1954"/>
</g>
</g>
</svg>
