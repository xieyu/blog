<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: write_batch Pages: 1 -->
<svg width="2562pt" height="822pt"
 viewBox="0.00 0.00 2562.00 822.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 818)">
<title>write_batch</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-818 2558,-818 2558,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_WriteBatch</title>
<path fill="none" stroke="#000000" d="M20,-344C20,-344 2534,-344 2534,-344 2540,-344 2546,-350 2546,-356 2546,-356 2546,-794 2546,-794 2546,-800 2540,-806 2534,-806 2534,-806 20,-806 20,-806 14,-806 8,-800 8,-794 8,-794 8,-356 8,-356 8,-350 14,-344 20,-344"/>
<text text-anchor="middle" x="1277" y="-786" font-family="Times,serif" font-size="20.00" fill="#000000">WriteBatch</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_WriteBatchInternal</title>
<path fill="none" stroke="#000000" d="M163,-124C163,-124 2301,-124 2301,-124 2307,-124 2313,-130 2313,-136 2313,-136 2313,-324 2313,-324 2313,-330 2307,-336 2301,-336 2301,-336 163,-336 163,-336 157,-336 151,-330 151,-324 151,-324 151,-136 151,-136 151,-130 157,-124 163,-124"/>
<text text-anchor="middle" x="1232" y="-316" font-family="Times,serif" font-size="20.00" fill="#000000">WriteBatchInternal</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_DBImpl</title>
<path fill="none" stroke="#000000" d="M580.5,-8C580.5,-8 1580,-8 1580,-8 1586,-8 1592,-14 1592,-20 1592,-20 1592,-104 1592,-104 1592,-110 1586,-116 1580,-116 1580,-116 580.5,-116 580.5,-116 574.5,-116 568.5,-110 568.5,-104 568.5,-104 568.5,-20 568.5,-20 568.5,-14 574.5,-8 580.5,-8"/>
<text text-anchor="middle" x="1080.25" y="-96" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_DB</title>
<path fill="none" stroke="#000000" d="M43,-33C43,-33 274,-33 274,-33 280,-33 286,-39 286,-45 286,-45 286,-103 286,-103 286,-109 280,-115 274,-115 274,-115 43,-115 43,-115 37,-115 31,-109 31,-103 31,-103 31,-45 31,-45 31,-39 37,-33 43,-33"/>
<text text-anchor="middle" x="158.5" y="-95" font-family="Times,serif" font-size="20.00" fill="#000000">DB</text>
</g>
<!-- WriteBatchBase -->
<g id="node1" class="node">
<title>WriteBatchBase</title>
<polygon fill="none" stroke="#000000" points="122,-637 16,-637 16,-601 122,-601 122,-637"/>
<text text-anchor="middle" x="69" y="-615.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchBase</text>
</g>
<!-- WriteBatch -->
<g id="node2" class="node">
<title>WriteBatch</title>
<polygon fill="none" stroke="#000000" points="490,-579 490,-763 764,-763 764,-579 490,-579"/>
<text text-anchor="middle" x="627" y="-747.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatch</text>
<polyline fill="none" stroke="#000000" points="490,-740 764,-740 "/>
<text text-anchor="middle" x="627" y="-724.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unique_ptr&lt;SavePoints&gt; save_points_;</text>
<polyline fill="none" stroke="#000000" points="490,-717 764,-717 "/>
<text text-anchor="start" x="498" y="-701.8" font-family="Times,serif" font-size="14.00" fill="#000000">SavePoint wal_term_point_;</text>
<polyline fill="none" stroke="#000000" points="490,-694 764,-694 "/>
<text text-anchor="start" x="498" y="-678.8" font-family="Times,serif" font-size="14.00" fill="#000000">mutable std::atomic&lt;uint32_t&gt; content_flags_;</text>
<polyline fill="none" stroke="#000000" points="490,-671 764,-671 "/>
<text text-anchor="start" x="498" y="-655.8" font-family="Times,serif" font-size="14.00" fill="#000000">size_t max_bytes_;</text>
<polyline fill="none" stroke="#000000" points="490,-648 764,-648 "/>
<text text-anchor="start" x="498" y="-632.8" font-family="Times,serif" font-size="14.00" fill="#000000">bool is_latest_persistent_state_ = false;</text>
<polyline fill="none" stroke="#000000" points="490,-625 764,-625 "/>
<text text-anchor="start" x="498" y="-609.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::string rep_; </text>
<polyline fill="none" stroke="#000000" points="490,-602 764,-602 "/>
<text text-anchor="start" x="498" y="-586.8" font-family="Times,serif" font-size="14.00" fill="#000000">const size_t timestamp_size_;</text>
</g>
<!-- WriteBatchBase&#45;&gt;WriteBatch -->
<g id="edge1" class="edge">
<title>WriteBatchBase&#45;&gt;WriteBatch</title>
<path fill="none" stroke="#000000" d="M122.2506,-623.9624C203.645,-631.5476 361.9382,-646.2989 479.6575,-657.2692"/>
<polygon fill="#000000" stroke="#000000" points="479.5626,-660.7754 489.8443,-658.2185 480.2122,-653.8056 479.5626,-660.7754"/>
</g>
<!-- WriteBatchWithIndex -->
<g id="node3" class="node">
<title>WriteBatchWithIndex</title>
<polygon fill="none" stroke="#000000" points="160.5,-505 160.5,-551 321.5,-551 321.5,-505 160.5,-505"/>
<text text-anchor="middle" x="241" y="-535.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchWithIndex</text>
<polyline fill="none" stroke="#000000" points="160.5,-528 321.5,-528 "/>
<text text-anchor="start" x="168.5" y="-512.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unique_ptr&lt;Rep&gt; rep;</text>
</g>
<!-- WriteBatchBase&#45;&gt;WriteBatchWithIndex -->
<g id="edge2" class="edge">
<title>WriteBatchBase&#45;&gt;WriteBatchWithIndex</title>
<path fill="none" stroke="#000000" d="M103.3934,-600.8035C127.703,-587.942 160.7427,-570.4617 188.3541,-555.8533"/>
<polygon fill="#000000" stroke="#000000" points="190.2871,-558.7904 197.4895,-551.0201 187.0135,-552.603 190.2871,-558.7904"/>
</g>
<!-- ReadableWriteBatch -->
<g id="node4" class="node">
<title>ReadableWriteBatch</title>
<polygon fill="none" stroke="#000000" points="1021,-557 891,-557 891,-521 1021,-521 1021,-557"/>
<text text-anchor="middle" x="956" y="-535.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReadableWriteBatch</text>
</g>
<!-- WriteBatch&#45;&gt;ReadableWriteBatch -->
<g id="edge3" class="edge">
<title>WriteBatch&#45;&gt;ReadableWriteBatch</title>
<path fill="none" stroke="#000000" d="M764.1433,-615.976C812.3754,-596.6245 863.8358,-575.9777 901.3064,-560.944"/>
<polygon fill="#000000" stroke="#000000" points="903.0266,-564.025 911.0042,-557.053 900.4201,-557.5284 903.0266,-564.025"/>
</g>
<!-- WriteBatch_Rep -->
<g id="node5" class="node">
<title>WriteBatch_Rep</title>
<polygon fill="#95e1d3" stroke="#000000" points="1819,-352 1819,-444 1939,-444 1939,-352 1819,-352"/>
<text text-anchor="middle" x="1879" y="-428.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatch::Rep</text>
<polyline fill="none" stroke="#000000" points="1819,-421 1939,-421 "/>
<text text-anchor="start" x="1827" y="-405.8" font-family="Times,serif" font-size="14.00" fill="#000000">sequence: fixed64</text>
<polyline fill="none" stroke="#000000" points="1819,-398 1939,-398 "/>
<text text-anchor="start" x="1827" y="-382.8" font-family="Times,serif" font-size="14.00" fill="#000000">count: fixed32</text>
<polyline fill="none" stroke="#000000" points="1819,-375 1939,-375 "/>
<text text-anchor="start" x="1827" y="-359.8" font-family="Times,serif" font-size="14.00" fill="#000000">data: record[count]</text>
</g>
<!-- WriteBatch&#45;&gt;WriteBatch_Rep -->
<g id="edge4" class="edge">
<title>WriteBatch:rep&#45;&gt;WriteBatch_Rep</title>
<path fill="none" stroke="#000000" d="M764,-613C787.9031,-613 786.2412,-530.8025 801,-512 852.2224,-446.7433 873.0411,-408 956,-408 956,-408 956,-408 1663.5,-408 1711.9408,-408 1766.4407,-405.4475 1808.513,-402.9217"/>
<polygon fill="#000000" stroke="#000000" points="1808.8894,-406.4053 1818.6561,-402.2989 1808.4603,-399.4185 1808.8894,-406.4053"/>
</g>
<!-- SavePoint -->
<g id="node6" class="node">
<title>SavePoint</title>
<polygon fill="none" stroke="#000000" points="1219.5,-672.5 1219.5,-741.5 1357.5,-741.5 1357.5,-672.5 1219.5,-672.5"/>
<text text-anchor="start" x="1227.5" y="-726.3" font-family="Times,serif" font-size="14.00" fill="#000000">size_t size;</text>
<polyline fill="none" stroke="#000000" points="1219.5,-718.5 1357.5,-718.5 "/>
<text text-anchor="start" x="1227.5" y="-703.3" font-family="Times,serif" font-size="14.00" fill="#000000">int count;</text>
<polyline fill="none" stroke="#000000" points="1219.5,-695.5 1357.5,-695.5 "/>
<text text-anchor="start" x="1227.5" y="-680.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t content_flags</text>
</g>
<!-- WriteBatch&#45;&gt;SavePoint -->
<g id="edge5" class="edge">
<title>WriteBatch:SavePoint&#45;&gt;SavePoint</title>
<path fill="none" stroke="#000000" d="M764,-706C921.8041,-706 1106.3139,-706.4583 1209.058,-706.7543"/>
<polygon fill="#000000" stroke="#000000" points="1209.3399,-710.2551 1219.3501,-706.7842 1209.3603,-703.2551 1209.3399,-710.2551"/>
</g>
<!-- SavePoints -->
<g id="node7" class="node">
<title>SavePoints</title>
<polygon fill="none" stroke="#000000" points="801,-717 801,-763 1111,-763 1111,-717 801,-717"/>
<text text-anchor="middle" x="956" y="-747.8" font-family="Times,serif" font-size="14.00" fill="#000000">SavePoints</text>
<polyline fill="none" stroke="#000000" points="801,-740 1111,-740 "/>
<text text-anchor="middle" x="956" y="-724.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::stack&lt;SavePoint, autovector&lt;SavePoint&gt;&gt; stack;</text>
</g>
<!-- WriteBatch&#45;&gt;SavePoints -->
<g id="edge6" class="edge">
<title>WriteBatch:SavePoints&#45;&gt;SavePoints</title>
<path fill="none" stroke="#000000" d="M764,-729C772.733,-729 781.6859,-729.1148 790.7224,-729.321"/>
<polygon fill="#000000" stroke="#000000" points="790.8643,-732.8259 800.9533,-729.5914 791.0493,-725.8284 790.8643,-732.8259"/>
</g>
<!-- WriteBatchWithIndex_Rep -->
<g id="node10" class="node">
<title>WriteBatchWithIndex_Rep</title>
<polygon fill="none" stroke="#000000" points="504.5,-352.5 504.5,-559.5 749.5,-559.5 749.5,-352.5 504.5,-352.5"/>
<text text-anchor="middle" x="627" y="-544.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchWithIndex::Rep</text>
<polyline fill="none" stroke="#000000" points="504.5,-536.5 749.5,-536.5 "/>
<text text-anchor="start" x="512.5" y="-521.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReadableWriteBatch write_batch;</text>
<polyline fill="none" stroke="#000000" points="504.5,-513.5 749.5,-513.5 "/>
<text text-anchor="start" x="512.5" y="-498.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchEntryComparator comparator;</text>
<polyline fill="none" stroke="#000000" points="504.5,-490.5 749.5,-490.5 "/>
<text text-anchor="start" x="512.5" y="-475.3" font-family="Times,serif" font-size="14.00" fill="#000000">Arena arena;</text>
<polyline fill="none" stroke="#000000" points="504.5,-467.5 749.5,-467.5 "/>
<text text-anchor="start" x="512.5" y="-452.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchEntrySkipList skip_list;</text>
<polyline fill="none" stroke="#000000" points="504.5,-444.5 749.5,-444.5 "/>
<text text-anchor="start" x="512.5" y="-429.3" font-family="Times,serif" font-size="14.00" fill="#000000">bool overwrite_key;</text>
<polyline fill="none" stroke="#000000" points="504.5,-421.5 749.5,-421.5 "/>
<text text-anchor="start" x="512.5" y="-406.3" font-family="Times,serif" font-size="14.00" fill="#000000">size_t last_entry_offset;</text>
<polyline fill="none" stroke="#000000" points="504.5,-398.5 749.5,-398.5 "/>
<text text-anchor="start" x="512.5" y="-383.3" font-family="Times,serif" font-size="14.00" fill="#000000">size_t last_sub_batch_offset;</text>
<polyline fill="none" stroke="#000000" points="504.5,-375.5 749.5,-375.5 "/>
<text text-anchor="start" x="512.5" y="-360.3" font-family="Times,serif" font-size="14.00" fill="#000000">size_t sub_batch_cnt;</text>
</g>
<!-- WriteBatchWithIndex&#45;&gt;WriteBatchWithIndex_Rep -->
<g id="edge10" class="edge">
<title>WriteBatchWithIndex:Rep&#45;&gt;WriteBatchWithIndex_Rep</title>
<path fill="none" stroke="#000000" d="M322,-516C379.1547,-516 441.2202,-505.7309 494.3511,-493.6895"/>
<polygon fill="#000000" stroke="#000000" points="495.2091,-497.0836 504.1647,-491.4226 493.6335,-490.2632 495.2091,-497.0836"/>
</g>
<!-- record -->
<g id="node8" class="node">
<title>record</title>
<polygon fill="#95e1d3" stroke="#000000" points="2033,-353 2033,-767 2401,-767 2401,-353 2033,-353"/>
<text text-anchor="middle" x="2217" y="-751.8" font-family="Times,serif" font-size="14.00" fill="#000000">record</text>
<polyline fill="none" stroke="#000000" points="2033,-744 2401,-744 "/>
<text text-anchor="start" x="2041" y="-728.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeValue varstring varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-721 2401,-721 "/>
<text text-anchor="start" x="2041" y="-705.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeDeletion varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-698 2401,-698 "/>
<text text-anchor="start" x="2041" y="-682.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeSingleDeletion varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-675 2401,-675 "/>
<text text-anchor="start" x="2041" y="-659.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeRangeDeletion varstring varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-652 2401,-652 "/>
<text text-anchor="start" x="2041" y="-636.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeMerge varstring varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-629 2401,-629 "/>
<text text-anchor="start" x="2041" y="-613.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeColumnFamilyValue varint32 varstring varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-606 2401,-606 "/>
<text text-anchor="start" x="2041" y="-590.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeColumnFamilyDeletion varint32 varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-583 2401,-583 "/>
<text text-anchor="start" x="2041" y="-567.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeColumnFamilySingleDeletion varint32 varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-560 2401,-560 "/>
<text text-anchor="start" x="2041" y="-544.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeColumnFamilyRangeDeletion varint32 varstring varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-537 2401,-537 "/>
<text text-anchor="start" x="2041" y="-521.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeColumnFamilyMerge varint32 varstring varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-514 2401,-514 "/>
<text text-anchor="start" x="2041" y="-498.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeBeginPrepareXID varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-491 2401,-491 "/>
<text text-anchor="start" x="2041" y="-475.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeEndPrepareXID</text>
<polyline fill="none" stroke="#000000" points="2033,-468 2401,-468 "/>
<text text-anchor="start" x="2041" y="-452.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeCommitXID varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-445 2401,-445 "/>
<text text-anchor="start" x="2041" y="-429.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeRollbackXID varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-422 2401,-422 "/>
<text text-anchor="start" x="2041" y="-406.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeBeginPersistedPrepareXID varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-399 2401,-399 "/>
<text text-anchor="start" x="2041" y="-383.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeBeginUnprepareXID varstring</text>
<polyline fill="none" stroke="#000000" points="2033,-376 2401,-376 "/>
<text text-anchor="start" x="2041" y="-360.8" font-family="Times,serif" font-size="14.00" fill="#000000">kTypeNoop</text>
</g>
<!-- WriteBatch_Rep&#45;&gt;record -->
<g id="edge7" class="edge">
<title>WriteBatch_Rep:record&#45;&gt;record</title>
<path fill="none" stroke="#000000" d="M1939,-363C1968.3676,-363 1996.8001,-370.4091 2023.5556,-382.3535"/>
<polygon fill="#000000" stroke="#000000" points="2022.4086,-385.6815 2032.9481,-386.7628 2025.3833,-379.345 2022.4086,-385.6815"/>
</g>
<!-- ReadRecordFromWriteBatch -->
<g id="node11" class="node">
<title>ReadRecordFromWriteBatch</title>
<polygon fill="none" stroke="#000000" points="2305,-278 2129,-278 2129,-242 2305,-242 2305,-278"/>
<text text-anchor="middle" x="2217" y="-256.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReadRecordFromWriteBatch</text>
</g>
<!-- WriteBatch_Rep&#45;&gt;ReadRecordFromWriteBatch -->
<g id="edge12" class="edge">
<title>WriteBatch_Rep&#45;&gt;ReadRecordFromWriteBatch</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1939.0381,-373.4874C2002.6926,-347.4983 2102.2997,-306.8303 2163.3948,-281.8861"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="2164.923,-285.0427 2172.8581,-278.0224 2162.2771,-278.5621 2164.923,-285.0427"/>
</g>
<!-- Contents -->
<g id="node12" class="node">
<title>Contents</title>
<polygon fill="none" stroke="#000000" points="2143.5,-148 2143.5,-194 2290.5,-194 2290.5,-148 2143.5,-148"/>
<text text-anchor="middle" x="2217" y="-178.8" font-family="Times,serif" font-size="14.00" fill="#000000">Contents</text>
<polyline fill="none" stroke="#000000" points="2143.5,-171 2290.5,-171 "/>
<text text-anchor="middle" x="2217" y="-155.8" font-family="Times,serif" font-size="14.00" fill="#000000">获取writeBatch中内容</text>
</g>
<!-- WriteBatch_Rep&#45;&gt;Contents -->
<g id="edge13" class="edge">
<title>WriteBatch_Rep&#45;&gt;Contents</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1939.097,-378.8638C1959.4684,-369.8422 1980.8713,-357.1885 1996,-340 2029.2453,-302.2283 1997.2789,-268.4395 2033,-233 2059.9046,-206.3075 2098.6668,-191.1022 2133.6822,-182.4425"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="2134.5,-185.8458 2143.446,-180.1695 2132.9128,-179.0281 2134.5,-185.8458"/>
</g>
<!-- SavePoints&#45;&gt;SavePoint -->
<g id="edge9" class="edge">
<title>SavePoints:SavePoint&#45;&gt;SavePoint</title>
<path fill="none" stroke="#000000" d="M1111,-728C1143.2006,-728 1178.4609,-724.5495 1209.0097,-720.4459"/>
<polygon fill="#000000" stroke="#000000" points="1209.7546,-723.8761 1219.1778,-719.0332 1208.7913,-716.9427 1209.7546,-723.8761"/>
</g>
<!-- varstring -->
<g id="node9" class="node">
<title>varstring</title>
<polygon fill="none" stroke="#000000" points="2438,-525.5 2438,-594.5 2538,-594.5 2538,-525.5 2438,-525.5"/>
<text text-anchor="middle" x="2488" y="-579.3" font-family="Times,serif" font-size="14.00" fill="#000000">varstring</text>
<polyline fill="none" stroke="#000000" points="2438,-571.5 2538,-571.5 "/>
<text text-anchor="start" x="2446" y="-556.3" font-family="Times,serif" font-size="14.00" fill="#000000">len: varint32</text>
<polyline fill="none" stroke="#000000" points="2438,-548.5 2538,-548.5 "/>
<text text-anchor="start" x="2446" y="-533.3" font-family="Times,serif" font-size="14.00" fill="#000000">data: uint8[len]</text>
</g>
<!-- record&#45;&gt;varstring -->
<g id="edge8" class="edge">
<title>record&#45;&gt;varstring</title>
<path fill="none" stroke="#000000" d="M2401.1357,-560C2410.3944,-560 2419.3038,-560 2427.656,-560"/>
<polygon fill="#000000" stroke="#000000" points="2427.9218,-563.5001 2437.9218,-560 2427.9218,-556.5001 2427.9218,-563.5001"/>
</g>
<!-- WriteBatchWithIndex_Rep&#45;&gt;ReadableWriteBatch -->
<g id="edge11" class="edge">
<title>WriteBatchWithIndex_Rep&#45;&gt;ReadableWriteBatch</title>
<path fill="none" stroke="#000000" d="M749.5075,-486.9061C793.4468,-497.9911 841.67,-510.1569 880.4568,-519.942"/>
<polygon fill="#000000" stroke="#000000" points="880.0668,-523.4532 890.6191,-522.5057 881.7791,-516.6658 880.0668,-523.4532"/>
</g>
<!-- WriteBatch_Put -->
<g id="node13" class="node">
<title>WriteBatch_Put</title>
<polygon fill="#f38181" stroke="#000000" points="341,-166.5 341,-227.5 472,-227.5 472,-166.5 341,-166.5"/>
<text text-anchor="middle" x="406.5" y="-212.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatch::Put</text>
<polyline fill="none" stroke="#000000" points="341,-204.5 472,-204.5 "/>
<text text-anchor="start" x="349" y="-189.3" font-family="Times,serif" font-size="14.00" fill="#000000">将key/value写入</text>
<text text-anchor="start" x="349" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#000000"> batch的rep_内存中</text>
</g>
<!-- Put -->
<g id="node15" class="node">
<title>Put</title>
<polygon fill="none" stroke="#000000" points="1148,-213 1148,-297 1429,-297 1429,-213 1148,-213"/>
<text text-anchor="middle" x="1288.5" y="-281.8" font-family="Times,serif" font-size="14.00" fill="#000000">Put</text>
<polyline fill="none" stroke="#000000" points="1148,-274 1429,-274 "/>
<text text-anchor="start" x="1156" y="-258.8" font-family="Times,serif" font-size="14.00" fill="#000000">Put(WriteBatch* b, uint32_t column_family_id,</text>
<text text-anchor="start" x="1156" y="-243.8" font-family="Times,serif" font-size="14.00" fill="#000000"> const Slice&amp; key, const Slice&amp; value) </text>
<polyline fill="none" stroke="#000000" points="1148,-236 1429,-236 "/>
<text text-anchor="start" x="1156" y="-220.8" font-family="Times,serif" font-size="14.00" fill="#000000">将key,value 插入rep的record中,并修改count</text>
</g>
<!-- WriteBatch_Put&#45;&gt;Put -->
<g id="edge29" class="edge">
<title>WriteBatch_Put&#45;&gt;Put</title>
<path fill="none" stroke="#000000" d="M472.0728,-201.312C611.9659,-210.5114 942.7818,-232.2657 1137.665,-245.0811"/>
<polygon fill="#000000" stroke="#000000" points="1137.4972,-248.5776 1147.7053,-245.7414 1137.9566,-241.5927 1137.4972,-248.5776"/>
</g>
<!-- WriteBatchInternal -->
<g id="node14" class="node">
<title>WriteBatchInternal</title>
<polygon fill="none" stroke="#000000" points="159,-206.5 159,-297.5 323,-297.5 323,-206.5 159,-206.5"/>
<text text-anchor="middle" x="241" y="-282.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchInternal</text>
<polyline fill="none" stroke="#000000" points="159,-274.5 323,-274.5 "/>
<text text-anchor="start" x="167" y="-259.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchInternal提供了</text>
<text text-anchor="start" x="167" y="-244.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 一些static member函数</text>
<text text-anchor="start" x="167" y="-229.3" font-family="Times,serif" font-size="14.00" fill="#000000"> Put/Delete/Merge等</text>
<text text-anchor="start" x="167" y="-214.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 用来修改WriteBatch</text>
</g>
<!-- WriteBatchInternal&#45;&gt;WriteBatch -->
<g id="edge14" class="edge">
<title>WriteBatchInternal&#45;&gt;WriteBatch</title>
<path fill="none" stroke="#000000" d="M285.4783,-297.644C297.9558,-311.0013 311.3011,-325.8284 323,-340 403.1929,-437.143 401.3697,-479.4884 490,-569 490.9095,-569.9186 491.8278,-570.8354 492.7543,-571.7504"/>
<polygon fill="#000000" stroke="#000000" points="490.3736,-574.3168 500.0083,-578.7241 495.2249,-569.2705 490.3736,-574.3168"/>
</g>
<!-- Put&#45;&gt;WriteBatch_Rep -->
<g id="edge17" class="edge">
<title>Put&#45;&gt;WriteBatch_Rep</title>
<path fill="none" stroke="#000000" d="M1429.1892,-289.0704C1548.83,-318.0435 1715.6259,-358.4361 1808.8356,-381.0085"/>
<polygon fill="#000000" stroke="#000000" points="1808.1827,-384.4514 1818.7256,-383.4035 1809.8303,-377.6481 1808.1827,-384.4514"/>
</g>
<!-- SetCount -->
<g id="node18" class="node">
<title>SetCount</title>
<polygon fill="none" stroke="#000000" points="1697,-244 1630,-244 1630,-208 1697,-208 1697,-244"/>
<text text-anchor="middle" x="1663.5" y="-222.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetCount</text>
</g>
<!-- Put&#45;&gt;SetCount -->
<g id="edge18" class="edge">
<title>Put&#45;&gt;SetCount</title>
<path fill="none" stroke="#000000" d="M1429.2031,-244.119C1496.8282,-238.8893 1573.1297,-232.9886 1619.7658,-229.3821"/>
<polygon fill="#000000" stroke="#000000" points="1620.1211,-232.8652 1629.8214,-228.6045 1619.5813,-225.886 1620.1211,-232.8652"/>
</g>
<!-- InsertInto -->
<g id="node16" class="node">
<title>InsertInto</title>
<polygon fill="#f38181" stroke="#000000" points="1232.5,-132.5 1232.5,-193.5 1344.5,-193.5 1344.5,-132.5 1232.5,-132.5"/>
<text text-anchor="middle" x="1288.5" y="-178.3" font-family="Times,serif" font-size="14.00" fill="#000000">InsertInto</text>
<polyline fill="none" stroke="#000000" points="1232.5,-170.5 1344.5,-170.5 "/>
<text text-anchor="start" x="1240.5" y="-155.3" font-family="Times,serif" font-size="14.00" fill="#000000">将key/value插入</text>
<text text-anchor="start" x="1240.5" y="-140.3" font-family="Times,serif" font-size="14.00" fill="#000000"> MemTable中</text>
</g>
<!-- Iterate -->
<g id="node17" class="node">
<title>Iterate</title>
<polygon fill="none" stroke="#000000" points="1762,-168.5 1762,-259.5 1996,-259.5 1996,-168.5 1762,-168.5"/>
<text text-anchor="middle" x="1879" y="-244.3" font-family="Times,serif" font-size="14.00" fill="#000000">Iterate</text>
<polyline fill="none" stroke="#000000" points="1762,-236.5 1996,-236.5 "/>
<text text-anchor="start" x="1770" y="-221.3" font-family="Times,serif" font-size="14.00" fill="#000000">迭代遍历每一个record</text>
<text text-anchor="start" x="1770" y="-206.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 插入memtable中</text>
<text text-anchor="start" x="1770" y="-191.3" font-family="Times,serif" font-size="14.00" fill="#000000"> MemTable由WriteBatch_handler抽象</text>
<text text-anchor="start" x="1770" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 由MemTableInsertor实现</text>
</g>
<!-- InsertInto&#45;&gt;Iterate -->
<g id="edge19" class="edge">
<title>InsertInto&#45;&gt;Iterate</title>
<path fill="none" stroke="#364f6b" d="M1344.6807,-167.366C1427.8159,-173.8874 1588.4915,-186.7233 1725,-199 1733.6503,-199.778 1742.5721,-200.5987 1751.5587,-201.4389"/>
<polygon fill="#364f6b" stroke="#364f6b" points="1751.4377,-204.9429 1761.7215,-202.3947 1752.0931,-197.9736 1751.4377,-204.9429"/>
</g>
<!-- SetSequence -->
<g id="node19" class="node">
<title>SetSequence</title>
<polygon fill="none" stroke="#000000" points="1706.5,-298 1620.5,-298 1620.5,-262 1706.5,-262 1706.5,-298"/>
<text text-anchor="middle" x="1663.5" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetSequence</text>
</g>
<!-- InsertInto&#45;&gt;SetSequence -->
<g id="edge20" class="edge">
<title>InsertInto&#45;&gt;SetSequence</title>
<path fill="none" stroke="#364f6b" d="M1344.6755,-178.9823C1370.4257,-186.4137 1401.3153,-195.4764 1429,-204 1491.6246,-223.2809 1563.2213,-246.6841 1610.6569,-262.3818"/>
<polygon fill="#364f6b" stroke="#364f6b" points="1609.8071,-265.7873 1620.4005,-265.6103 1612.0089,-259.1426 1609.8071,-265.7873"/>
</g>
<!-- MaybeAdvanceSeq -->
<g id="node20" class="node">
<title>MaybeAdvanceSeq</title>
<polygon fill="none" stroke="#000000" points="1725,-170 1602,-170 1602,-134 1725,-134 1725,-170"/>
<text text-anchor="middle" x="1663.5" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeAdvanceSeq</text>
</g>
<!-- InsertInto&#45;&gt;MaybeAdvanceSeq -->
<g id="edge21" class="edge">
<title>InsertInto&#45;&gt;MaybeAdvanceSeq</title>
<path fill="none" stroke="#364f6b" d="M1344.6413,-161.3532C1410.4646,-159.4224 1519.6928,-156.2183 1591.6442,-154.1078"/>
<polygon fill="#364f6b" stroke="#364f6b" points="1592.0869,-157.5964 1601.9799,-153.8046 1591.8816,-150.5994 1592.0869,-157.5964"/>
</g>
<!-- Iterate&#45;&gt;ReadRecordFromWriteBatch -->
<g id="edge22" class="edge">
<title>Iterate&#45;&gt;ReadRecordFromWriteBatch</title>
<path fill="none" stroke="#f08a5d" d="M1996.2674,-229.9595C2036.2613,-235.4024 2080.533,-241.4276 2118.865,-246.6443"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="2118.611,-250.142 2128.9916,-248.0225 2119.555,-243.2059 2118.611,-250.142"/>
</g>
<!-- SetCount&#45;&gt;WriteBatch_Rep -->
<g id="edge15" class="edge">
<title>SetCount&#45;&gt;WriteBatch_Rep:count</title>
<path fill="none" stroke="#000000" d="M1697.2758,-235.519C1707.1753,-239.6154 1717.3763,-245.2875 1725,-253 1754.5389,-282.8828 1736.6732,-306.4726 1762,-340 1779.3993,-363.033 1785.1633,-381.3868 1808.9425,-385.2496"/>
<polygon fill="#000000" stroke="#000000" points="1808.7673,-388.7461 1819,-386 1809.2882,-381.7655 1808.7673,-388.7461"/>
</g>
<!-- SetSequence&#45;&gt;WriteBatch_Rep -->
<g id="edge16" class="edge">
<title>SetSequence&#45;&gt;WriteBatch_Rep:sequnce</title>
<path fill="none" stroke="#000000" d="M1682.2802,-298.0759C1714.9343,-329.1918 1781.359,-391.0265 1809.3384,-406.4512"/>
<polygon fill="#000000" stroke="#000000" points="1808.4064,-409.8374 1819,-410 1810.82,-403.2667 1808.4064,-409.8374"/>
</g>
<!-- DBImpl_Write -->
<g id="node21" class="node">
<title>DBImpl_Write</title>
<polygon fill="none" stroke="#000000" points="576.5,-39 576.5,-75 677.5,-75 677.5,-39 576.5,-39"/>
<text text-anchor="middle" x="627" y="-53.3" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl::Write</text>
</g>
<!-- DBImpl_WriteImpl -->
<g id="node22" class="node">
<title>DBImpl_WriteImpl</title>
<polygon fill="none" stroke="#000000" points="892.5,-31 892.5,-77 1019.5,-77 1019.5,-31 892.5,-31"/>
<text text-anchor="middle" x="956" y="-61.8" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl::WriteImpl</text>
<polyline fill="none" stroke="#000000" points="892.5,-54 1019.5,-54 "/>
<text text-anchor="middle" x="956" y="-38.8" font-family="Times,serif" font-size="14.00" fill="#000000">Write的具体实现</text>
</g>
<!-- DBImpl_Write&#45;&gt;DBImpl_WriteImpl -->
<g id="edge23" class="edge">
<title>DBImpl_Write&#45;&gt;DBImpl_WriteImpl</title>
<path fill="none" stroke="#000000" d="M677.6852,-56.5378C732.323,-56.0396 819.818,-55.2418 882.1133,-54.6737"/>
<polygon fill="#000000" stroke="#000000" points="882.3054,-58.1722 892.273,-54.5811 882.2415,-51.1725 882.3054,-58.1722"/>
</g>
<!-- DBImpl_WriteImpl&#45;&gt;InsertInto -->
<g id="edge24" class="edge">
<title>DBImpl_WriteImpl&#45;&gt;InsertInto</title>
<path fill="none" stroke="#000000" d="M1019.8171,-76.5471C1057.0895,-89.5629 1105.0895,-106.0629 1148,-120 1172.2009,-127.8603 1198.8736,-136.1237 1222.4176,-143.2825"/>
<polygon fill="#000000" stroke="#000000" points="1221.7147,-146.7266 1232.3,-146.2786 1223.7456,-140.0277 1221.7147,-146.7266"/>
</g>
<!-- WriteToWAL -->
<g id="node23" class="node">
<title>WriteToWAL</title>
<polygon fill="#f38181" stroke="#000000" points="1447,-16.5 1447,-77.5 1584,-77.5 1584,-16.5 1447,-16.5"/>
<text text-anchor="middle" x="1515.5" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteToWAL</text>
<polyline fill="none" stroke="#000000" points="1447,-54.5 1584,-54.5 "/>
<text text-anchor="start" x="1455" y="-39.3" font-family="Times,serif" font-size="14.00" fill="#000000">将WriteBatch的rep_</text>
<text text-anchor="start" x="1455" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 内容写入WAL日志</text>
</g>
<!-- DBImpl_WriteImpl&#45;&gt;WriteToWAL -->
<g id="edge25" class="edge">
<title>DBImpl_WriteImpl&#45;&gt;WriteToWAL</title>
<path fill="none" stroke="#000000" d="M1019.637,-53.2038C1122.4024,-51.9181 1324.6501,-49.3878 1436.4827,-47.9886"/>
<polygon fill="#000000" stroke="#000000" points="1436.7309,-51.4859 1446.6863,-47.8609 1436.6432,-44.4864 1436.7309,-51.4859"/>
</g>
<!-- WriteToWAL&#45;&gt;Contents -->
<g id="edge26" class="edge">
<title>WriteToWAL&#45;&gt;Contents</title>
<path fill="none" stroke="#3ec1d3" d="M1584.04,-59.1154C1713.3628,-81.975 1992.9414,-131.3945 2133.1925,-156.1858"/>
<polygon fill="#3ec1d3" stroke="#3ec1d3" points="2132.9989,-159.7058 2143.4555,-158 2134.2174,-152.8127 2132.9989,-159.7058"/>
</g>
<!-- DB_Write -->
<g id="node24" class="node">
<title>DB_Write</title>
<polygon fill="none" stroke="#000000" points="278,-77 204,-77 204,-41 278,-41 278,-77"/>
<text text-anchor="middle" x="241" y="-55.3" font-family="Times,serif" font-size="14.00" fill="#000000">DB_Write</text>
</g>
<!-- DB_Write&#45;&gt;DBImpl_Write -->
<g id="edge27" class="edge">
<title>DB_Write&#45;&gt;DBImpl_Write</title>
<path fill="none" stroke="#000000" d="M278.0113,-58.8082C344.6035,-58.4632 485.1979,-57.7347 566.1419,-57.3153"/>
<polygon fill="#000000" stroke="#000000" points="566.2083,-60.8151 576.19,-57.2633 566.172,-53.8152 566.2083,-60.8151"/>
<text text-anchor="middle" x="406.5" y="-62.8" font-family="Times,serif" font-size="14.00" fill="#000000">virtual</text>
</g>
<!-- DB_Put -->
<g id="node25" class="node">
<title>DB_Put</title>
<polygon fill="none" stroke="#000000" points="99,-77 39,-77 39,-41 99,-41 99,-77"/>
<text text-anchor="middle" x="69" y="-55.3" font-family="Times,serif" font-size="14.00" fill="#000000">DB_Put</text>
</g>
<!-- DB_Put&#45;&gt;WriteBatch_Put -->
<g id="edge28" class="edge">
<title>DB_Put&#45;&gt;WriteBatch_Put</title>
<path fill="none" stroke="#000000" d="M99.2479,-71.368C151.0433,-92.5466 258.1843,-136.3554 331.2129,-166.2159"/>
<polygon fill="#000000" stroke="#000000" points="330.2542,-169.6052 340.835,-170.1503 332.9036,-163.1259 330.2542,-169.6052"/>
</g>
<!-- DB_Put&#45;&gt;DB_Write -->
<g id="edge30" class="edge">
<title>DB_Put&#45;&gt;DB_Write</title>
<path fill="none" stroke="#000000" d="M99.3542,-59C125.4076,-59 163.4015,-59 193.4823,-59"/>
<polygon fill="#000000" stroke="#000000" points="193.7597,-62.5001 203.7597,-59 193.7596,-55.5001 193.7597,-62.5001"/>
</g>
</g>
</svg>
