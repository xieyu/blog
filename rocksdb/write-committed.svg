<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: write_committed Pages: 1 -->
<svg width="1608pt" height="1245pt"
 viewBox="0.00 0.00 1607.79 1245.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1241)">
<title>write_committed</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1241 1603.791,-1241 1603.791,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="786.4995,-8 786.4995,-196 1252.6523,-196 1252.6523,-8 786.4995,-8"/>
<text text-anchor="middle" x="1019.5759" y="-176" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_WriteBatch</title>
<polygon fill="none" stroke="#000000" points="540.8887,-142 540.8887,-476 725.5166,-476 725.5166,-142 540.8887,-142"/>
<text text-anchor="middle" x="633.2026" y="-456" font-family="Times,serif" font-size="20.00" fill="#000000">WriteBatch</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_WriteBatchInternal</title>
<polygon fill="none" stroke="#000000" points="548.8887,-196 548.8887,-440 717.5166,-440 717.5166,-196 548.8887,-196"/>
<text text-anchor="middle" x="633.2026" y="-420" font-family="Times,serif" font-size="20.00" fill="#000000">WriteBatchInternal</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_PessimisticTransaction</title>
<polygon fill="none" stroke="#000000" points="63.2471,-484 63.2471,-1229 1591.791,-1229 1591.791,-484 63.2471,-484"/>
<text text-anchor="middle" x="827.519" y="-1209" font-family="Times,serif" font-size="20.00" fill="#000000">PessimisticTransaction</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_TransactionBaseImpl</title>
<polygon fill="none" stroke="#000000" points="538.4175,-538 538.4175,-740 1583.791,-740 1583.791,-538 538.4175,-538"/>
<text text-anchor="middle" x="1061.1042" y="-720" font-family="Times,serif" font-size="20.00" fill="#000000"> TransactionBaseImpl</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_WriteCommittedTxn</title>
<polygon fill="none" stroke="#000000" points="289.8706,-748 289.8706,-990 999.4058,-990 999.4058,-748 289.8706,-748"/>
<text text-anchor="middle" x="644.6382" y="-970" font-family="Times,serif" font-size="20.00" fill="#000000">WriteCommittedTxn</text>
</g>
<g id="clust17" class="cluster">
<title>cluster_WriteCommittedTxnDB</title>
<polygon fill="none" stroke="#000000" points="0,-396 0,-476 210.0391,-476 210.0391,-396 0,-396"/>
<text text-anchor="middle" x="105.0195" y="-456" font-family="Times,serif" font-size="20.00" fill="#000000">WriteCommittedTxnDB</text>
</g>
<!-- WriteImpl_Prepare -->
<g id="node1" class="node">
<title>WriteImpl_Prepare</title>
<polygon fill="none" stroke="#000000" stroke-dasharray="5,2" points="945.7603,-106 822.7407,-106 822.7407,-70 945.7603,-70 945.7603,-106"/>
<text text-anchor="middle" x="884.2505" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl_Prepare</text>
</g>
<!-- WriteImpl -->
<g id="node4" class="node">
<title>WriteImpl</title>
<polygon fill="none" stroke="#000000" points="1244.5312,-133 1171.0167,-133 1171.0167,-97 1244.5312,-97 1244.5312,-133"/>
<text text-anchor="middle" x="1207.7739" y="-110.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl</text>
</g>
<!-- WriteImpl_Prepare&#45;&gt;WriteImpl -->
<g id="edge1" class="edge">
<title>WriteImpl_Prepare&#45;&gt;WriteImpl</title>
<path fill="none" stroke="#666666" d="M945.8643,-93.142C1008.3427,-98.3563 1103.6828,-106.313 1160.4591,-111.0513"/>
<polygon fill="#666666" stroke="#666666" points="1160.3386,-114.5533 1170.5951,-111.8972 1160.9209,-107.5776 1160.3386,-114.5533"/>
</g>
<!-- WriteImpl_Rollback_Marker -->
<g id="node2" class="node">
<title>WriteImpl_Rollback_Marker</title>
<polygon fill="none" stroke="#000000" stroke-dasharray="5,2" points="973.7531,-160 794.7478,-160 794.7478,-124 973.7531,-124 973.7531,-160"/>
<text text-anchor="middle" x="884.2505" y="-137.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl_Rollback_Marker</text>
</g>
<!-- WriteImpl_Rollback_Marker&#45;&gt;WriteImpl -->
<g id="edge2" class="edge">
<title>WriteImpl_Rollback_Marker&#45;&gt;WriteImpl</title>
<path fill="none" stroke="#666666" d="M973.9402,-134.5149C1034.3941,-129.4696 1111.7292,-123.0155 1160.5265,-118.9431"/>
<polygon fill="#666666" stroke="#666666" points="1161.1149,-122.4062 1170.7891,-118.0866 1160.5327,-115.4305 1161.1149,-122.4062"/>
</g>
<!-- WriteImpl_Commit -->
<g id="node3" class="node">
<title>WriteImpl_Commit</title>
<polygon fill="none" stroke="#000000" stroke-dasharray="5,2" points="947.4043,-52 821.0967,-52 821.0967,-16 947.4043,-16 947.4043,-52"/>
<text text-anchor="middle" x="884.2505" y="-29.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl_Commit</text>
</g>
<!-- WriteImpl_Commit&#45;&gt;WriteImpl -->
<g id="edge3" class="edge">
<title>WriteImpl_Commit&#45;&gt;WriteImpl</title>
<path fill="none" stroke="#666666" d="M947.6683,-48.5901C964.5043,-52.5398 982.6592,-56.8674 999.4058,-61 1055.1633,-74.7596 1119.0675,-91.4593 1161.2437,-102.6105"/>
<polygon fill="#666666" stroke="#666666" points="1160.3903,-106.0051 1170.953,-105.1811 1162.1819,-99.2383 1160.3903,-106.0051"/>
</g>
<!-- MarkWalTerminationPoint -->
<g id="node5" class="node">
<title>MarkWalTerminationPoint</title>
<polygon fill="none" stroke="#000000" points="716.0184,-186 549.3869,-186 549.3869,-150 716.0184,-150 716.0184,-186"/>
<text text-anchor="middle" x="632.7026" y="-163.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkWalTerminationPoint</text>
</g>
<!-- write_batch_ -->
<g id="node24" class="node">
<title>write_batch_</title>
<polygon fill="#95e1d3" stroke="#000000" points="814.6074,-547 814.6074,-591 953.8936,-591 953.8936,-547 814.6074,-547"/>
<text text-anchor="middle" x="884.2505" y="-575.8" font-family="Times,serif" font-size="14.00" fill="#000000">write_batch_</text>
<polyline fill="none" stroke="#000000" points="814.6074,-569 953.8936,-569 "/>
<text text-anchor="middle" x="884.2505" y="-553.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchWithIndex</text>
</g>
<!-- MarkWalTerminationPoint&#45;&gt;write_batch_ -->
<g id="edge19" class="edge">
<title>MarkWalTerminationPoint&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M716.0996,-175.8808C724.7032,-179.7093 732.5701,-184.9319 738.8359,-192 842.8637,-309.3466 671.4499,-425.0876 774.8359,-543 782.8306,-552.118 793.3864,-558.3421 804.79,-562.5398"/>
<polygon fill="#ff0000" stroke="#ff0000" points="803.9412,-565.9419 814.5308,-565.6083 806.0445,-559.2653 803.9412,-565.9419"/>
</g>
<!-- MarkCommit -->
<g id="node6" class="node">
<title>MarkCommit</title>
<polygon fill="none" stroke="#000000" points="678.9236,-294 586.4817,-294 586.4817,-258 678.9236,-258 678.9236,-294"/>
<text text-anchor="middle" x="632.7026" y="-271.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkCommit</text>
</g>
<!-- MarkCommit&#45;&gt;write_batch_ -->
<g id="edge20" class="edge">
<title>MarkCommit&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M678.8856,-277.0451C700.0981,-280.0046 723.8206,-287.2613 738.8359,-304 810.5657,-383.9625 702.1265,-463.9273 774.8359,-543 782.9408,-551.8141 793.4417,-557.8973 804.7256,-562.0522"/>
<polygon fill="#ff0000" stroke="#ff0000" points="803.7626,-565.4186 814.3528,-565.1064 805.8794,-558.7463 803.7626,-565.4186"/>
</g>
<!-- WriteBatchInternal_Append -->
<g id="node7" class="node">
<title>WriteBatchInternal_Append</title>
<polygon fill="none" stroke="#000000" points="602.5405,-313 602.5405,-349 662.8647,-349 662.8647,-313 602.5405,-313"/>
<text text-anchor="middle" x="632.7026" y="-326.8" font-family="Times,serif" font-size="14.00" fill="#000000">Append</text>
</g>
<!-- WriteBatchInternal_Append&#45;&gt;write_batch_ -->
<g id="edge21" class="edge">
<title>WriteBatchInternal_Append&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M663.135,-330.7583C687.0897,-332.2791 719.5489,-338.4223 738.8359,-359 795.8204,-419.7978 717.1068,-482.9088 774.8359,-543 783.0786,-551.5799 793.5968,-557.5484 804.8401,-561.6624"/>
<polygon fill="#ff0000" stroke="#ff0000" points="803.8308,-565.0141 814.421,-564.6987 805.9456,-558.3412 803.8308,-565.0141"/>
</g>
<!-- MarkEndPrepare -->
<g id="node8" class="node">
<title>MarkEndPrepare</title>
<polygon fill="none" stroke="#000000" points="688.3312,-404 577.0741,-404 577.0741,-368 688.3312,-368 688.3312,-404"/>
<text text-anchor="middle" x="632.7026" y="-381.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkEndPrepare</text>
</g>
<!-- MarkEndPrepare&#45;&gt;write_batch_ -->
<g id="edge22" class="edge">
<title>MarkEndPrepare&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M657.5475,-404.1849C680.5027,-421.8167 714.6158,-450.2048 738.8359,-480 759.1777,-505.0242 749.0169,-523.677 774.8359,-543 783.6922,-549.628 793.9876,-554.5958 804.6512,-558.3135"/>
<polygon fill="#ff0000" stroke="#ff0000" points="803.9287,-561.7543 814.5172,-561.3881 806.0114,-555.0713 803.9287,-561.7543"/>
</g>
<!-- MarkRollback -->
<g id="node9" class="node">
<title>MarkRollback</title>
<polygon fill="none" stroke="#000000" points="681.0719,-240 584.3334,-240 584.3334,-204 681.0719,-204 681.0719,-240"/>
<text text-anchor="middle" x="632.7026" y="-217.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkRollback</text>
</g>
<!-- MarkRollback&#45;&gt;write_batch_ -->
<g id="edge23" class="edge">
<title>MarkRollback&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M681.2224,-222.6884C701.9024,-225.5964 724.5153,-232.7301 738.8359,-249 825.8134,-347.8165 687.08,-444.8742 774.8359,-543 782.8689,-551.9822 793.3882,-558.1447 804.728,-562.3248"/>
<polygon fill="#ff0000" stroke="#ff0000" points="803.8198,-565.7084 814.4098,-565.3883 805.9316,-559.0346 803.8198,-565.7084"/>
</g>
<!-- Commit -->
<g id="node10" class="node">
<title>Commit</title>
<polygon fill="none" stroke="#000000" points="135.4161,-1119 73.623,-1119 73.623,-1083 135.4161,-1083 135.4161,-1119"/>
<text text-anchor="middle" x="104.5195" y="-1096.8" font-family="Times,serif" font-size="14.00" fill="#000000">Commit</text>
</g>
<!-- CommitInternal -->
<g id="node11" class="node">
<title>CommitInternal</title>
<polygon fill="none" stroke="#000000" points="417.2328,-846 311.3756,-846 311.3756,-810 417.2328,-810 417.2328,-846"/>
<text text-anchor="middle" x="364.3042" y="-823.8" font-family="Times,serif" font-size="14.00" fill="#000000">CommitInternal</text>
</g>
<!-- Commit&#45;&gt;CommitInternal -->
<g id="edge4" class="edge">
<title>Commit&#45;&gt;CommitInternal</title>
<path fill="none" stroke="#b83b5e" d="M135.8699,-1097.6802C159.9829,-1093.3849 192.115,-1083.5418 210.0391,-1061 267.5451,-988.6789 175.2189,-922.7563 238.0391,-855 254.1033,-837.6735 278.3438,-830.0376 301.3045,-827.0497"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="301.7941,-830.5179 311.3832,-826.0122 301.0773,-823.5547 301.7941,-830.5179"/>
</g>
<!-- txn_state_ -->
<g id="node12" class="node">
<title>txn_state_</title>
<polygon fill="#95e1d3" stroke="#000000" points="238.0391,-998.2 238.0391,-1069.8 490.5693,-1069.8 490.5693,-998.2 238.0391,-998.2"/>
<text text-anchor="middle" x="364.3042" y="-1054.6" font-family="Times,serif" font-size="14.00" fill="#000000">txn_state_</text>
<polyline fill="none" stroke="#000000" points="238.0391,-1047.8 490.5693,-1047.8 "/>
<text text-anchor="start" x="246.0391" y="-1032.6" font-family="Times,serif" font-size="14.00" fill="#000000">事务状态</text>
<polyline fill="none" stroke="#000000" points="238.0391,-1020.2 490.5693,-1020.2 "/>
<text text-anchor="middle" x="364.3042" y="-1005" font-family="Times,serif" font-size="14.00" fill="#000000">std::atomic&lt;TransactionState&gt; txn_state_;</text>
</g>
<!-- Commit&#45;&gt;txn_state_ -->
<g id="edge5" class="edge">
<title>Commit&#45;&gt;txn_state_</title>
<path fill="none" stroke="#b83b5e" d="M135.5976,-1092.9848C159.1721,-1086.9048 193.359,-1078.0878 228.1466,-1069.1159"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="229.157,-1072.4699 237.9661,-1066.5834 227.4088,-1065.6917 229.157,-1072.4699"/>
</g>
<!-- MarkLogAsHavingPrepSectionFlushed -->
<g id="node13" class="node">
<title>MarkLogAsHavingPrepSectionFlushed</title>
<polygon fill="none" stroke="#000000" points="482.9461,-1193 245.6623,-1193 245.6623,-1157 482.9461,-1157 482.9461,-1193"/>
<text text-anchor="middle" x="364.3042" y="-1170.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkLogAsHavingPrepSectionFlushed</text>
</g>
<!-- Commit&#45;&gt;MarkLogAsHavingPrepSectionFlushed -->
<g id="edge6" class="edge">
<title>Commit&#45;&gt;MarkLogAsHavingPrepSectionFlushed</title>
<path fill="none" stroke="#b83b5e" d="M135.4529,-1113.1566C162.2857,-1123.3949 202.3212,-1137.9391 238.0391,-1148 246.2695,-1150.3183 254.8505,-1152.5452 263.4949,-1154.6565"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="262.7269,-1158.0714 273.2663,-1156.9897 264.3527,-1151.2628 262.7269,-1158.0714"/>
</g>
<!-- PessimisticTransaction_Clear -->
<g id="node14" class="node">
<title>PessimisticTransaction_Clear</title>
<polygon fill="none" stroke="#000000" points="272.9536,-1089.2 272.9536,-1138.8 455.6548,-1138.8 455.6548,-1089.2 272.9536,-1089.2"/>
<text text-anchor="middle" x="364.3042" y="-1123.6" font-family="Times,serif" font-size="14.00" fill="#000000">PessimisticTransaction::Clear</text>
<polyline fill="none" stroke="#000000" points="272.9536,-1116.8 455.6548,-1116.8 "/>
<text text-anchor="middle" x="364.3042" y="-1101.6" font-family="Times,serif" font-size="14.00" fill="#000000">清掉事务hold的key lock</text>
</g>
<!-- Commit&#45;&gt;PessimisticTransaction_Clear -->
<g id="edge7" class="edge">
<title>Commit&#45;&gt;PessimisticTransaction_Clear</title>
<path fill="none" stroke="#b83b5e" d="M135.5976,-1102.5552C166.9623,-1104.1247 217.1123,-1106.6343 262.4692,-1108.904"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="262.5053,-1112.4101 272.6678,-1109.4144 262.8553,-1105.4189 262.5053,-1112.4101"/>
</g>
<!-- CommitInternal&#45;&gt;WriteImpl_Commit -->
<g id="edge27" class="edge">
<title>CommitInternal&#45;&gt;WriteImpl_Commit</title>
<path fill="none" stroke="#b83b5e" d="M417.3109,-830.6767C443.3469,-828.9432 472.8536,-821.8346 490.5693,-801 543.2475,-739.0479 470.5548,-128.9527 526.5693,-70 598.4792,5.6818 729.1261,-2.169 811.0497,-16.7022"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="810.5686,-20.1725 821.0384,-18.55 811.842,-13.2893 810.5686,-20.1725"/>
</g>
<!-- CommitInternal&#45;&gt;MarkWalTerminationPoint -->
<g id="edge28" class="edge">
<title>CommitInternal&#45;&gt;MarkWalTerminationPoint</title>
<path fill="none" stroke="#b83b5e" d="M417.2268,-830.6049C443.2398,-828.8517 472.7513,-821.7472 490.5693,-801 578.8959,-698.1529 438.8474,-295.3633 526.5693,-192 530.5631,-187.2942 535.2661,-183.3986 540.4323,-180.1831"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="542.3076,-183.1511 549.5206,-175.3907 539.0425,-176.9592 542.3076,-183.1511"/>
</g>
<!-- CommitInternal&#45;&gt;MarkCommit -->
<g id="edge29" class="edge">
<title>CommitInternal&#45;&gt;MarkCommit</title>
<path fill="none" stroke="#b83b5e" d="M417.1141,-830.5074C443.0962,-828.7276 472.6141,-821.6286 490.5693,-801 563.2704,-717.4743 455.8629,-389.2208 526.5693,-304 538.8433,-289.2065 557.9227,-281.7238 576.5389,-278.0875"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="577.1756,-281.5301 586.4891,-276.4795 576.0588,-274.6198 577.1756,-281.5301"/>
</g>
<!-- CommitInternal&#45;&gt;WriteBatchInternal_Append -->
<g id="edge30" class="edge">
<title>CommitInternal&#45;&gt;WriteBatchInternal_Append</title>
<path fill="none" stroke="#b83b5e" d="M417.0383,-830.4411C442.9996,-828.6431 472.5219,-821.5479 490.5693,-801 555.6019,-726.957 463.3051,-434.5595 526.5693,-359 542.3764,-340.1208 569.2646,-333.1664 592.0211,-330.9086"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="592.4106,-334.3896 602.1314,-330.1758 591.9045,-327.408 592.4106,-334.3896"/>
</g>
<!-- GetWriteBatch -->
<g id="node23" class="node">
<title>GetWriteBatch</title>
<polygon fill="none" stroke="#000000" points="682.8874,-582 582.5179,-582 582.5179,-546 682.8874,-546 682.8874,-582"/>
<text text-anchor="middle" x="632.7026" y="-559.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetWriteBatch</text>
</g>
<!-- CommitInternal&#45;&gt;GetWriteBatch -->
<g id="edge31" class="edge">
<title>CommitInternal&#45;&gt;GetWriteBatch</title>
<path fill="none" stroke="#b83b5e" d="M417.2575,-829.6928C442.7918,-827.6108 471.8634,-820.4868 490.5693,-801 556.146,-732.6859 462.318,-660.5621 526.5693,-591 538.4316,-578.1572 555.4654,-571.057 572.4252,-567.2309"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="573.1942,-570.6474 582.3626,-565.3378 571.8842,-563.7711 573.1942,-570.6474"/>
</g>
<!-- GetCommitTimeWriteBatch -->
<g id="node28" class="node">
<title>GetCommitTimeWriteBatch</title>
<polygon fill="none" stroke="#000000" points="720.3433,-846 545.062,-846 545.062,-810 720.3433,-810 720.3433,-846"/>
<text text-anchor="middle" x="632.7026" y="-823.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetCommitTimeWriteBatch</text>
</g>
<!-- CommitInternal&#45;&gt;GetCommitTimeWriteBatch -->
<g id="edge32" class="edge">
<title>CommitInternal&#45;&gt;GetCommitTimeWriteBatch</title>
<path fill="none" stroke="#b83b5e" d="M417.3311,-828C450.7793,-828 495.0039,-828 534.6721,-828"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="534.9177,-831.5001 544.9176,-828 534.9176,-824.5001 534.9177,-831.5001"/>
</g>
<!-- SetId -->
<g id="node29" class="node">
<title>SetId</title>
<polygon fill="none" stroke="#000000" points="659.7026,-792 605.7026,-792 605.7026,-756 659.7026,-756 659.7026,-792"/>
<text text-anchor="middle" x="632.7026" y="-769.8" font-family="Times,serif" font-size="14.00" fill="#000000">SetId</text>
</g>
<!-- CommitInternal&#45;&gt;SetId -->
<g id="edge33" class="edge">
<title>CommitInternal&#45;&gt;SetId</title>
<path fill="none" stroke="#b83b5e" d="M417.3311,-817.3313C470.0245,-806.7298 549.4625,-790.7474 595.6983,-781.445"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="596.48,-784.858 605.5932,-779.4542 595.0992,-777.9955 596.48,-784.858"/>
</g>
<!-- GetTrackedKeys -->
<g id="node19" class="node">
<title>GetTrackedKeys</title>
<polygon fill="none" stroke="#000000" points="551.606,-600.2 551.606,-649.8 713.7993,-649.8 713.7993,-600.2 551.606,-600.2"/>
<text text-anchor="middle" x="632.7026" y="-634.6" font-family="Times,serif" font-size="14.00" fill="#000000">GetTrackedKeys</text>
<polyline fill="none" stroke="#000000" points="551.606,-627.8 713.7993,-627.8 "/>
<text text-anchor="start" x="559.606" y="-612.6" font-family="Times,serif" font-size="14.00" fill="#000000">获取事务track的所有key</text>
</g>
<!-- PessimisticTransaction_Clear&#45;&gt;GetTrackedKeys -->
<g id="edge13" class="edge">
<title>PessimisticTransaction_Clear&#45;&gt;GetTrackedKeys</title>
<path fill="none" stroke="#666666" d="M455.7824,-1103.1161C469.1188,-1097.7445 481.4146,-1090.0258 490.5693,-1079 550.4101,-1006.9292 468.1679,-732.2419 526.5693,-659 531.0268,-653.4098 536.4089,-648.725 542.3558,-644.8008"/>
<polygon fill="#666666" stroke="#666666" points="544.5091,-647.5998 551.4308,-639.5786 541.0177,-641.5327 544.5091,-647.5998"/>
</g>
<!-- PessimisticTransactionDB_Unlock -->
<g id="node20" class="node">
<title>PessimisticTransactionDB_Unlock</title>
<polygon fill="none" stroke="#000000" points="738.9694,-1132 526.4359,-1132 526.4359,-1096 738.9694,-1096 738.9694,-1132"/>
<text text-anchor="middle" x="632.7026" y="-1109.8" font-family="Times,serif" font-size="14.00" fill="#000000">PessimisticTransactionDB_Unlock</text>
</g>
<!-- PessimisticTransaction_Clear&#45;&gt;PessimisticTransactionDB_Unlock -->
<g id="edge14" class="edge">
<title>PessimisticTransaction_Clear&#45;&gt;PessimisticTransactionDB_Unlock</title>
<path fill="none" stroke="#666666" d="M455.921,-1114C475.278,-1114 495.9536,-1114 516.0916,-1114"/>
<polygon fill="#666666" stroke="#666666" points="516.2435,-1117.5001 526.2435,-1114 516.2435,-1110.5001 516.2435,-1117.5001"/>
</g>
<!-- TransactionBaseImpl_Clear -->
<g id="node21" class="node">
<title>TransactionBaseImpl_Clear</title>
<polygon fill="none" stroke="#000000" points="718.7735,-704 546.6318,-704 546.6318,-668 718.7735,-668 718.7735,-704"/>
<text text-anchor="middle" x="632.7026" y="-681.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionBaseImpl_Clear</text>
</g>
<!-- PessimisticTransaction_Clear&#45;&gt;TransactionBaseImpl_Clear -->
<g id="edge15" class="edge">
<title>PessimisticTransaction_Clear&#45;&gt;TransactionBaseImpl_Clear</title>
<path fill="none" stroke="#666666" d="M455.8986,-1102.8189C469.1364,-1097.4729 481.3699,-1089.8398 490.5693,-1079 587.464,-964.8276 443.399,-868.5255 526.5693,-744 536.7047,-728.825 552.1899,-717.269 568.2246,-708.6236"/>
<polygon fill="#666666" stroke="#666666" points="569.8077,-711.7452 577.1589,-704.1156 566.6543,-705.4957 569.8077,-711.7452"/>
</g>
<!-- Prepare -->
<g id="node15" class="node">
<title>Prepare</title>
<polygon fill="none" stroke="#000000" points="133.772,-976 75.2671,-976 75.2671,-940 133.772,-940 133.772,-976"/>
<text text-anchor="middle" x="104.5195" y="-953.8" font-family="Times,serif" font-size="14.00" fill="#000000">Prepare</text>
</g>
<!-- Prepare&#45;&gt;txn_state_ -->
<g id="edge8" class="edge">
<title>Prepare&#45;&gt;txn_state_</title>
<path fill="none" stroke="#3f72af" d="M133.8151,-966.5704C158.2382,-973.7154 194.887,-984.437 231.8156,-995.2405"/>
<polygon fill="#3f72af" stroke="#3f72af" points="231.1334,-998.6875 241.7138,-998.1362 233.0989,-991.9691 231.1334,-998.6875"/>
</g>
<!-- PrepareInternal -->
<g id="node16" class="node">
<title>PrepareInternal</title>
<polygon fill="none" stroke="#000000" points="415.5878,-954 313.0206,-954 313.0206,-918 415.5878,-918 415.5878,-954"/>
<text text-anchor="middle" x="364.3042" y="-931.8" font-family="Times,serif" font-size="14.00" fill="#000000">PrepareInternal</text>
</g>
<!-- Prepare&#45;&gt;PrepareInternal -->
<g id="edge9" class="edge">
<title>Prepare&#45;&gt;PrepareInternal</title>
<path fill="none" stroke="#3f72af" d="M133.8151,-955.5191C174.5795,-952.0669 249.4031,-945.7305 302.7395,-941.2136"/>
<polygon fill="#3f72af" stroke="#3f72af" points="303.1003,-944.6957 312.7693,-940.3643 302.5096,-937.7207 303.1003,-944.6957"/>
</g>
<!-- PrepareInternal&#45;&gt;WriteImpl_Prepare -->
<g id="edge34" class="edge">
<title>PrepareInternal&#45;&gt;WriteImpl_Prepare</title>
<path fill="none" stroke="#3f72af" d="M415.7363,-938.7948C442.1605,-937.2525 472.5177,-930.2846 490.5693,-909 546.0399,-843.5951 468.7878,-201.3725 526.5693,-138 597.843,-59.8298 730.5238,-62.9771 812.7167,-74.2112"/>
<polygon fill="#3f72af" stroke="#3f72af" points="812.3327,-77.6919 822.7296,-75.6537 813.3309,-70.7634 812.3327,-77.6919"/>
</g>
<!-- PrepareInternal&#45;&gt;MarkEndPrepare -->
<g id="edge35" class="edge">
<title>PrepareInternal&#45;&gt;MarkEndPrepare</title>
<path fill="none" stroke="#3f72af" d="M415.744,-938.5073C442.0022,-936.8489 472.2005,-929.8623 490.5693,-909 553.7901,-837.1976 483.6835,-565.5176 526.5693,-480 541.3097,-450.6065 569.5686,-426.2922 593.2225,-409.7606"/>
<polygon fill="#3f72af" stroke="#3f72af" points="595.3748,-412.5303 601.6952,-404.0271 591.4517,-406.7329 595.3748,-412.5303"/>
</g>
<!-- PrepareInternal&#45;&gt;GetWriteBatch -->
<g id="edge36" class="edge">
<title>PrepareInternal&#45;&gt;GetWriteBatch</title>
<path fill="none" stroke="#3f72af" d="M415.5042,-938.2931C441.6922,-936.572 471.8998,-929.5937 490.5693,-909 586.1019,-803.6214 433.0802,-698.1956 526.5693,-591 538.165,-577.7043 555.2981,-570.4997 572.431,-566.7175"/>
<polygon fill="#3f72af" stroke="#3f72af" points="573.2769,-570.1206 582.4768,-564.8658 572.008,-563.2366 573.2769,-570.1206"/>
</g>
<!-- MarkLogCallback -->
<g id="node30" class="node">
<title>MarkLogCallback</title>
<polygon fill="none" stroke="#000000" points="691.838,-954 573.5673,-954 573.5673,-918 691.838,-918 691.838,-954"/>
<text text-anchor="middle" x="632.7026" y="-931.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkLogCallback</text>
</g>
<!-- PrepareInternal&#45;&gt;MarkLogCallback -->
<g id="edge37" class="edge">
<title>PrepareInternal&#45;&gt;MarkLogCallback</title>
<path fill="none" stroke="#3f72af" d="M415.7365,-936C457.6242,-936 517.1618,-936 563.2761,-936"/>
<polygon fill="#3f72af" stroke="#3f72af" points="563.4952,-939.5001 573.4952,-936 563.4951,-932.5001 563.4952,-939.5001"/>
</g>
<!-- two_write_queues -->
<g id="node31" class="node">
<title>two_write_queues</title>
<polygon fill="none" stroke="#000000" points="691.8448,-900 573.5605,-900 573.5605,-864 691.8448,-864 691.8448,-900"/>
<text text-anchor="middle" x="632.7026" y="-877.8" font-family="Times,serif" font-size="14.00" fill="#000000">two_write_queues</text>
</g>
<!-- PrepareInternal&#45;&gt;two_write_queues -->
<g id="edge38" class="edge">
<title>PrepareInternal&#45;&gt;two_write_queues</title>
<path fill="none" stroke="#3f72af" d="M415.7365,-925.6522C457.7122,-917.2069 517.412,-905.1957 563.5665,-895.9097"/>
<polygon fill="#3f72af" stroke="#3f72af" points="564.382,-899.3159 573.4952,-893.9122 563.0013,-892.4534 564.382,-899.3159"/>
</g>
<!-- Rollback -->
<g id="node17" class="node">
<title>Rollback</title>
<polygon fill="none" stroke="#000000" points="137.566,-1052 71.4731,-1052 71.4731,-1016 137.566,-1016 137.566,-1052"/>
<text text-anchor="middle" x="104.5195" y="-1029.8" font-family="Times,serif" font-size="14.00" fill="#000000">Rollback</text>
</g>
<!-- Rollback&#45;&gt;txn_state_ -->
<g id="edge10" class="edge">
<title>Rollback&#45;&gt;txn_state_</title>
<path fill="none" stroke="#17b978" d="M137.6853,-1034C160.9903,-1034 193.8791,-1034 227.3928,-1034"/>
<polygon fill="#17b978" stroke="#17b978" points="227.8037,-1037.5001 237.8037,-1034 227.8037,-1030.5001 227.8037,-1037.5001"/>
</g>
<!-- Rollback&#45;&gt;PessimisticTransaction_Clear -->
<g id="edge11" class="edge">
<title>Rollback&#45;&gt;PessimisticTransaction_Clear</title>
<path fill="none" stroke="#17b978" d="M137.8277,-1045.7899C164.7404,-1055.1793 203.6626,-1068.4512 238.0391,-1079 246.1763,-1081.497 254.6322,-1084.0118 263.14,-1086.4858"/>
<polygon fill="#17b978" stroke="#17b978" points="262.1749,-1089.8501 272.7533,-1089.2586 264.115,-1083.1243 262.1749,-1089.8501"/>
</g>
<!-- RollbackInternal -->
<g id="node18" class="node">
<title>RollbackInternal</title>
<polygon fill="none" stroke="#000000" points="419.3804,-792 309.228,-792 309.228,-756 419.3804,-756 419.3804,-792"/>
<text text-anchor="middle" x="364.3042" y="-769.8" font-family="Times,serif" font-size="14.00" fill="#000000">RollbackInternal</text>
</g>
<!-- Rollback&#45;&gt;RollbackInternal -->
<g id="edge12" class="edge">
<title>Rollback&#45;&gt;RollbackInternal</title>
<path fill="none" stroke="#17b978" d="M137.667,-1027.3619C161.598,-1020.7756 192.6476,-1008.1869 210.0391,-985 259.6729,-918.8264 181.3179,-861.2095 238.0391,-801 253.6348,-784.4451 276.702,-776.7715 298.8685,-773.5398"/>
<polygon fill="#17b978" stroke="#17b978" points="299.4376,-776.9971 308.9596,-772.3516 298.6189,-770.0451 299.4376,-776.9971"/>
</g>
<!-- RollbackInternal&#45;&gt;WriteImpl_Rollback_Marker -->
<g id="edge40" class="edge">
<title>RollbackInternal&#45;&gt;WriteImpl_Rollback_Marker</title>
<path fill="none" stroke="#17b978" d="M366.0214,-755.6994C375.4178,-659.9176 423.9831,-217.6992 526.5693,-138 565.3297,-107.8871 692.5988,-116.4874 784.2939,-127.4732"/>
<polygon fill="#17b978" stroke="#17b978" points="784.0983,-130.9753 794.4496,-128.7169 784.9492,-124.0272 784.0983,-130.9753"/>
</g>
<!-- RollbackInternal&#45;&gt;MarkRollback -->
<g id="edge41" class="edge">
<title>RollbackInternal&#45;&gt;MarkRollback</title>
<path fill="none" stroke="#17b978" d="M367.4942,-755.7425C382.5317,-671.682 448.8681,-322.8621 526.5693,-249 539.4135,-236.7905 556.9739,-229.8925 574.1138,-226.0569"/>
<polygon fill="#17b978" stroke="#17b978" points="574.9577,-229.4589 584.118,-224.1354 573.6373,-222.5845 574.9577,-229.4589"/>
</g>
<!-- tracked_keys_ -->
<g id="node25" class="node">
<title>tracked_keys_</title>
<polygon fill="#95e1d3" stroke="#000000" points="774.8359,-610 774.8359,-654 993.665,-654 993.665,-610 774.8359,-610"/>
<text text-anchor="middle" x="884.2505" y="-638.8" font-family="Times,serif" font-size="14.00" fill="#000000">tracked_keys_</text>
<polyline fill="none" stroke="#000000" points="774.8359,-632 993.665,-632 "/>
<text text-anchor="start" x="782.8359" y="-616.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap tracked_keys_;</text>
</g>
<!-- GetTrackedKeys&#45;&gt;tracked_keys_ -->
<g id="edge24" class="edge">
<title>GetTrackedKeys&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M714.0256,-627.263C730.2245,-627.7138 747.5524,-628.196 764.7245,-628.6739"/>
<polygon fill="#666666" stroke="#666666" points="764.714,-632.1748 774.8076,-628.9545 764.9088,-625.1775 764.714,-632.1748"/>
</g>
<!-- TransactionLockMgr_Unlock -->
<g id="node22" class="node">
<title>TransactionLockMgr_Unlock</title>
<polygon fill="none" stroke="#000000" points="975.4383,-1132 793.0627,-1132 793.0627,-1096 975.4383,-1096 975.4383,-1132"/>
<text text-anchor="middle" x="884.2505" y="-1109.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionLockMgr_Unlock</text>
</g>
<!-- PessimisticTransactionDB_Unlock&#45;&gt;TransactionLockMgr_Unlock -->
<g id="edge16" class="edge">
<title>PessimisticTransactionDB_Unlock&#45;&gt;TransactionLockMgr_Unlock</title>
<path fill="none" stroke="#666666" d="M739.017,-1114C753.4754,-1114 768.2855,-1114 782.6578,-1114"/>
<polygon fill="#666666" stroke="#666666" points="783.0345,-1117.5001 793.0344,-1114 783.0344,-1110.5001 783.0345,-1117.5001"/>
</g>
<!-- GetWriteBatch&#45;&gt;write_batch_ -->
<g id="edge17" class="edge">
<title>GetWriteBatch&#45;&gt;write_batch_</title>
<path fill="none" stroke="#666666" d="M683.0025,-564.9998C717.6906,-565.6893 764.5329,-566.6204 804.2972,-567.4108"/>
<polygon fill="#666666" stroke="#666666" points="804.4403,-570.9142 814.5079,-567.6137 804.5795,-563.9156 804.4403,-570.9142"/>
</g>
<!-- write_batch_&#45;&gt;WriteImpl -->
<g id="edge18" class="edge">
<title>write_batch_&#45;&gt;WriteImpl</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M954.1721,-563.5394C970.2864,-559.6167 986.4725,-553.2442 999.4058,-543 1134.2889,-436.1614 1187.5983,-219.9987 1202.8019,-143.011"/>
<polygon fill="#0000ff" stroke="#0000ff" points="1206.2571,-143.5769 1204.6988,-133.0973 1199.3818,-142.2613 1206.2571,-143.5769"/>
</g>
<!-- TransactionKeyMap -->
<g id="node26" class="node">
<title>TransactionKeyMap</title>
<polygon fill="none" stroke="#000000" points="1029.665,-599 1029.665,-665 1385.8828,-665 1385.8828,-599 1029.665,-599"/>
<text text-anchor="middle" x="1207.7739" y="-649.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap</text>
<polyline fill="none" stroke="#000000" points="1029.665,-643 1385.8828,-643 "/>
<text text-anchor="start" x="1037.665" y="-627.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unordered_map&lt;uint32_t,</text>
<polyline fill="none" stroke="#000000" points="1029.665,-621 1385.8828,-621 "/>
<text text-anchor="middle" x="1207.7739" y="-605.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unordered_map&lt;std::string, TransactionKeyMapInfo&gt;&gt;;</text>
</g>
<!-- tracked_keys_&#45;&gt;TransactionKeyMap -->
<g id="edge25" class="edge">
<title>tracked_keys_&#45;&gt;TransactionKeyMap</title>
<path fill="none" stroke="#666666" d="M993.7808,-632C1002.1473,-632 1010.7227,-632 1019.4032,-632"/>
<polygon fill="#666666" stroke="#666666" points="1019.6354,-635.5001 1029.6354,-632 1019.6354,-628.5001 1019.6354,-635.5001"/>
</g>
<!-- TransactionKeyMapInfo -->
<g id="node27" class="node">
<title>TransactionKeyMapInfo</title>
<polygon fill="none" stroke="#000000" points="1421.8828,-577 1421.8828,-687 1575.791,-687 1575.791,-577 1421.8828,-577"/>
<text text-anchor="middle" x="1498.8369" y="-671.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMapInfo</text>
<polyline fill="none" stroke="#000000" points="1421.8828,-665 1575.791,-665 "/>
<text text-anchor="start" x="1429.8828" y="-649.8" font-family="Times,serif" font-size="14.00" fill="#000000">SequenceNumber seq;</text>
<polyline fill="none" stroke="#000000" points="1421.8828,-643 1575.791,-643 "/>
<text text-anchor="start" x="1429.8828" y="-627.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t num_writes;</text>
<polyline fill="none" stroke="#000000" points="1421.8828,-621 1575.791,-621 "/>
<text text-anchor="start" x="1429.8828" y="-605.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t num_reads;</text>
<polyline fill="none" stroke="#000000" points="1421.8828,-599 1575.791,-599 "/>
<text text-anchor="start" x="1429.8828" y="-583.8" font-family="Times,serif" font-size="14.00" fill="#000000">bool exclusive;</text>
</g>
<!-- TransactionKeyMap&#45;&gt;TransactionKeyMapInfo -->
<g id="edge26" class="edge">
<title>TransactionKeyMap&#45;&gt;TransactionKeyMapInfo</title>
<path fill="none" stroke="#666666" d="M1385.8878,-632C1394.6975,-632 1403.3393,-632 1411.6749,-632"/>
<polygon fill="#666666" stroke="#666666" points="1411.6813,-635.5001 1421.6813,-632 1411.6812,-628.5001 1411.6813,-635.5001"/>
</g>
<!-- MarkLogAsContainingPrepSection -->
<g id="node32" class="node">
<title>MarkLogAsContainingPrepSection</title>
<polygon fill="none" stroke="#000000" points="991.5613,-954 776.9397,-954 776.9397,-918 991.5613,-918 991.5613,-954"/>
<text text-anchor="middle" x="884.2505" y="-931.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkLogAsContainingPrepSection</text>
</g>
<!-- MarkLogCallback&#45;&gt;MarkLogAsContainingPrepSection -->
<g id="edge39" class="edge">
<title>MarkLogCallback&#45;&gt;MarkLogAsContainingPrepSection</title>
<path fill="none" stroke="#666666" d="M691.9974,-936C714.4376,-936 740.8398,-936 766.7699,-936"/>
<polygon fill="#666666" stroke="#666666" points="767.0608,-939.5001 777.0607,-936 767.0607,-932.5001 767.0608,-939.5001"/>
</g>
<!-- WriteCommittedTxn -->
<g id="node33" class="node">
<title>WriteCommittedTxn</title>
<polygon fill="none" stroke="#000000" points="430.6715,-900 297.9369,-900 297.9369,-864 430.6715,-864 430.6715,-900"/>
<text text-anchor="middle" x="364.3042" y="-877.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteCommittedTxn</text>
</g>
<!-- PessimisticTransaction -->
<g id="node34" class="node">
<title>PessimisticTransaction</title>
<polygon fill="none" stroke="#000000" points="704.8077,-528 560.5976,-528 560.5976,-492 704.8077,-492 704.8077,-528"/>
<text text-anchor="middle" x="632.7026" y="-505.8" font-family="Times,serif" font-size="14.00" fill="#000000">PessimisticTransaction</text>
</g>
<!-- WriteCommittedTxn&#45;&gt;PessimisticTransaction -->
<g id="edge42" class="edge">
<title>WriteCommittedTxn&#45;&gt;PessimisticTransaction</title>
<path fill="none" stroke="#666666" d="M430.7302,-882.6999C452.738,-879.4475 475.4467,-871.6987 490.5693,-855 586.9362,-748.5895 430.8281,-640.9738 526.5693,-534 533.2781,-526.5042 541.788,-521.0883 551.0594,-517.2115"/>
<polygon fill="#666666" stroke="#666666" points="552.3034,-520.4838 560.5463,-513.8276 549.9516,-513.8907 552.3034,-520.4838"/>
</g>
<!-- Initialize -->
<g id="node35" class="node">
<title>Initialize</title>
<polygon fill="none" stroke="#000000" points="917.0029,-528 851.4981,-528 851.4981,-492 917.0029,-492 917.0029,-528"/>
<text text-anchor="middle" x="884.2505" y="-505.8" font-family="Times,serif" font-size="14.00" fill="#000000">Initialize</text>
</g>
<!-- PessimisticTransaction&#45;&gt;Initialize -->
<g id="edge43" class="edge">
<title>PessimisticTransaction&#45;&gt;Initialize</title>
<path fill="none" stroke="#666666" d="M705.1232,-510C749.169,-510 803.9307,-510 841.2317,-510"/>
<polygon fill="#666666" stroke="#666666" points="841.2661,-513.5001 851.2661,-510 841.266,-506.5001 841.2661,-513.5001"/>
</g>
<!-- BeginTransaction -->
<g id="node36" class="node">
<title>BeginTransaction</title>
<polygon fill="none" stroke="#000000" points="162.0586,-440 46.9805,-440 46.9805,-404 162.0586,-404 162.0586,-440"/>
<text text-anchor="middle" x="104.5195" y="-417.8" font-family="Times,serif" font-size="14.00" fill="#000000">BeginTransaction</text>
</g>
<!-- BeginTransaction&#45;&gt;WriteCommittedTxn -->
<g id="edge44" class="edge">
<title>BeginTransaction&#45;&gt;WriteCommittedTxn</title>
<path fill="none" stroke="#666666" d="M160.3387,-440.1113C179.2271,-449.0877 198.4517,-461.9765 210.0391,-480 255.23,-550.2918 183.1053,-792.0283 238.0391,-855 250.7133,-869.5287 269.1234,-877.3427 287.9846,-881.3139"/>
<polygon fill="#666666" stroke="#666666" points="287.405,-884.7656 297.8609,-883.0554 288.6207,-877.8719 287.405,-884.7656"/>
</g>
</g>
</svg>
