<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: Writer Pages: 1 -->
<svg width="2250pt" height="1103pt"
 viewBox="0.00 0.00 2250.03 1103.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1099)">
<title>Writer</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1099 2246.0283,-1099 2246.0283,4 -4,4"/>
<g id="clust18" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="8,-8 8,-152 1400.7954,-152 1400.7954,-8 8,-8"/>
<text text-anchor="middle" x="704.3977" y="-132" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<g id="clust17" class="cluster">
<title>cluster_StateCV</title>
<path fill="none" stroke="#000000" d="M1894.2681,-313C1894.2681,-313 2222.0283,-313 2222.0283,-313 2228.0283,-313 2234.0283,-319 2234.0283,-325 2234.0283,-325 2234.0283,-381 2234.0283,-381 2234.0283,-387 2228.0283,-393 2222.0283,-393 2222.0283,-393 1894.2681,-393 1894.2681,-393 1888.2681,-393 1882.2681,-387 1882.2681,-381 1882.2681,-381 1882.2681,-325 1882.2681,-325 1882.2681,-319 1888.2681,-313 1894.2681,-313"/>
<text text-anchor="middle" x="2058.1482" y="-373" font-family="Times,serif" font-size="20.00" fill="#000000">StateCV</text>
</g>
<!-- WriteGroup -->
<g id="node1" class="node">
<title>WriteGroup</title>
<polygon fill="none" stroke="#000000" points="1533.3853,-748 1533.3853,-858 1734.0376,-858 1734.0376,-748 1533.3853,-748"/>
<text text-anchor="middle" x="1633.7114" y="-842.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteGroup</text>
<polyline fill="none" stroke="#000000" points="1533.3853,-836 1734.0376,-836 "/>
<text text-anchor="start" x="1541.3853" y="-820.8" font-family="Times,serif" font-size="14.00" fill="#000000">Writer* leader = nullptr;</text>
<polyline fill="none" stroke="#000000" points="1533.3853,-814 1734.0376,-814 "/>
<text text-anchor="start" x="1541.3853" y="-798.8" font-family="Times,serif" font-size="14.00" fill="#000000">Writer* last_writer = nullptr;</text>
<polyline fill="none" stroke="#000000" points="1533.3853,-792 1734.0376,-792 "/>
<text text-anchor="start" x="1541.3853" y="-776.8" font-family="Times,serif" font-size="14.00" fill="#000000">SequenceNumber last_sequence;</text>
<polyline fill="none" stroke="#000000" points="1533.3853,-770 1734.0376,-770 "/>
<text text-anchor="start" x="1541.3853" y="-754.8" font-family="Times,serif" font-size="14.00" fill="#000000">Status status;</text>
<polyline fill="none" stroke="#000000" points="1533.3853,-748 1734.0376,-748 "/>
</g>
<!-- Writer -->
<g id="node2" class="node">
<title>Writer</title>
<polygon fill="none" stroke="#000000" points="1816.1494,-468 1816.1494,-862 2095.4834,-862 2095.4834,-468 1816.1494,-468"/>
<text text-anchor="middle" x="1955.8164" y="-846.8" font-family="Times,serif" font-size="14.00" fill="#000000">Writer</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-840 2095.4834,-840 "/>
<text text-anchor="start" x="1824.1494" y="-824.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatch* batch;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-818 2095.4834,-818 "/>
<text text-anchor="start" x="1824.1494" y="-802.8" font-family="Times,serif" font-size="14.00" fill="#000000">bool sync;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-796 2095.4834,-796 "/>
<text text-anchor="start" x="1824.1494" y="-780.8" font-family="Times,serif" font-size="14.00" fill="#000000">bool no_slowdown;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-774 2095.4834,-774 "/>
<text text-anchor="start" x="1824.1494" y="-758.8" font-family="Times,serif" font-size="14.00" fill="#000000">bool disable_wal;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-752 2095.4834,-752 "/>
<text text-anchor="start" x="1824.1494" y="-736.8" font-family="Times,serif" font-size="14.00" fill="#000000">bool disable_memtable;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-730 2095.4834,-730 "/>
<text text-anchor="start" x="1824.1494" y="-714.8" font-family="Times,serif" font-size="14.00" fill="#000000">size_t batch_cnt;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-708 2095.4834,-708 "/>
<text text-anchor="start" x="1824.1494" y="-692.8" font-family="Times,serif" font-size="14.00" fill="#000000">PreReleaseCallback* pre_release_callback;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-686 2095.4834,-686 "/>
<text text-anchor="start" x="1824.1494" y="-670.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t log_used;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-664 2095.4834,-664 "/>
<text text-anchor="start" x="1824.1494" y="-648.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t log_ref;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-642 2095.4834,-642 "/>
<text text-anchor="start" x="1824.1494" y="-626.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteCallback* callback;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-620 2095.4834,-620 "/>
<text text-anchor="start" x="1824.1494" y="-604.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::atomic&lt;uint8_t&gt; state;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-598 2095.4834,-598 "/>
<text text-anchor="start" x="1824.1494" y="-582.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteGroup* write_group;</text>
<text text-anchor="start" x="1824.1494" y="-568.8" font-family="Times,serif" font-size="14.00" fill="#000000"> std::aligned_storage&lt;sizeof(std::mutex)&gt;</text>
<text text-anchor="start" x="1824.1494" y="-554.8" font-family="Times,serif" font-size="14.00" fill="#000000">::type state_mutex_bytes;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-548 2095.4834,-548 "/>
<text text-anchor="start" x="1824.1494" y="-532.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::aligned_storage&lt;sizeof(</text>
<text text-anchor="start" x="1824.1494" y="-518.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::condition_variable)&gt;::type state_cv_bytes;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-512 2095.4834,-512 "/>
<text text-anchor="start" x="1824.1494" y="-496.8" font-family="Times,serif" font-size="14.00" fill="#000000">Writer* link_older;</text>
<polyline fill="none" stroke="#000000" points="1816.1494,-490 2095.4834,-490 "/>
<text text-anchor="start" x="1824.1494" y="-474.8" font-family="Times,serif" font-size="14.00" fill="#000000">Writer* link_newer;</text>
</g>
<!-- WriteGroup&#45;&gt;Writer -->
<g id="edge1" class="edge">
<title>WriteGroup:Writer&#45;&gt;Writer</title>
<path fill="none" stroke="#000000" d="M1733.7114,-825C1759.3035,-825 1783.9568,-817.9199 1806.9339,-806.7385"/>
<polygon fill="#000000" stroke="#000000" points="1808.7037,-809.764 1815.9937,-802.0759 1805.5005,-803.5399 1808.7037,-809.764"/>
</g>
<!-- WriteThread -->
<g id="node3" class="node">
<title>WriteThread</title>
<polygon fill="none" stroke="#000000" points="1487.2734,-42.2 1487.2734,-171.8 1780.1494,-171.8 1780.1494,-42.2 1487.2734,-42.2"/>
<text text-anchor="middle" x="1633.7114" y="-156.6" font-family="Times,serif" font-size="14.00" fill="#000000">WriteThread</text>
<polyline fill="none" stroke="#000000" points="1487.2734,-149.8 1780.1494,-149.8 "/>
<text text-anchor="start" x="1495.2734" y="-134.6" font-family="Times,serif" font-size="14.00" fill="#000000">当前writer链表队列</text>
<text text-anchor="start" x="1495.2734" y="-115" font-family="Times,serif" font-size="14.00" fill="#000000"> std::atomic&lt;Writer*&gt; newest_writer_;</text>
<polyline fill="none" stroke="#000000" points="1487.2734,-108.2 1780.1494,-108.2 "/>
<text text-anchor="start" x="1495.2734" y="-93" font-family="Times,serif" font-size="14.00" fill="#000000">std::atomic&lt;Writer*&gt; newest_memtable_writer_;</text>
<polyline fill="none" stroke="#000000" points="1487.2734,-86.2 1780.1494,-86.2 "/>
<text text-anchor="start" x="1495.2734" y="-71" font-family="Times,serif" font-size="14.00" fill="#000000">port::Mutex stall_mu_;</text>
<polyline fill="none" stroke="#000000" points="1487.2734,-64.2 1780.1494,-64.2 "/>
<text text-anchor="start" x="1495.2734" y="-49" font-family="Times,serif" font-size="14.00" fill="#000000">port::CondVar stall_cv_;</text>
</g>
<!-- WriteThread&#45;&gt;Writer -->
<g id="edge3" class="edge">
<title>WriteThread:Writer&#45;&gt;Writer</title>
<path fill="none" stroke="#000000" d="M1779.7114,-129C1816.4905,-129 1803.4713,-423.4752 1816.1494,-458 1816.1868,-458.1017 1816.2242,-458.2035 1816.2617,-458.3052"/>
<polygon fill="#000000" stroke="#000000" points="1813.0461,-459.6942 1819.916,-467.7599 1819.5754,-457.1705 1813.0461,-459.6942"/>
</g>
<!-- EnterAsBatchGroupLeader -->
<g id="node4" class="node">
<title>EnterAsBatchGroupLeader</title>
<polygon fill="none" stroke="#000000" points="916.0303,-699.2 916.0303,-748.8 1116.3135,-748.8 1116.3135,-699.2 916.0303,-699.2"/>
<text text-anchor="middle" x="1016.1719" y="-733.6" font-family="Times,serif" font-size="14.00" fill="#000000">EnterAsBatchGroupLeader</text>
<polyline fill="none" stroke="#000000" points="916.0303,-726.8 1116.3135,-726.8 "/>
<text text-anchor="start" x="924.0303" y="-711.6" font-family="Times,serif" font-size="14.00" fill="#000000">将writer设置为group中的leader</text>
</g>
<!-- EnterAsBatchGroupLeader&#45;&gt;WriteGroup -->
<g id="edge44" class="edge">
<title>EnterAsBatchGroupLeader&#45;&gt;WriteGroup</title>
<path fill="none" stroke="#000000" d="M1037.9674,-748.9185C1064.1948,-776.817 1111.1264,-820.4185 1162.2256,-838 1280.7852,-878.7924 1425.7271,-858.442 1523.3543,-835.3921"/>
<polygon fill="#000000" stroke="#000000" points="1524.3403,-838.7548 1533.2425,-833.01 1522.7009,-831.9494 1524.3403,-838.7548"/>
</g>
<!-- CreateMissingNewerLinks -->
<g id="node37" class="node">
<title>CreateMissingNewerLinks</title>
<polygon fill="none" stroke="#000000" points="1390.105,-972 1223.394,-972 1223.394,-936 1390.105,-936 1390.105,-972"/>
<text text-anchor="middle" x="1306.7495" y="-949.8" font-family="Times,serif" font-size="14.00" fill="#000000">CreateMissingNewerLinks</text>
</g>
<!-- EnterAsBatchGroupLeader&#45;&gt;CreateMissingNewerLinks -->
<g id="edge45" class="edge">
<title>EnterAsBatchGroupLeader&#45;&gt;CreateMissingNewerLinks</title>
<path fill="none" stroke="#000000" d="M1037.1766,-748.9198C1064.0898,-779.9063 1113.1517,-833.3077 1162.2256,-871 1192.7669,-894.458 1230.6161,-915.9591 1259.9189,-931.1974"/>
<polygon fill="#000000" stroke="#000000" points="1258.6181,-934.4639 1269.1125,-935.9194 1261.8163,-928.2372 1258.6181,-934.4639"/>
</g>
<!-- AllowWriteBatching -->
<g id="node38" class="node">
<title>AllowWriteBatching</title>
<polygon fill="none" stroke="#000000" points="1373.1099,-761 1240.3891,-761 1240.3891,-725 1373.1099,-725 1373.1099,-761"/>
<text text-anchor="middle" x="1306.7495" y="-738.8" font-family="Times,serif" font-size="14.00" fill="#000000">AllowWriteBatching</text>
</g>
<!-- EnterAsBatchGroupLeader&#45;&gt;AllowWriteBatching -->
<g id="edge46" class="edge">
<title>EnterAsBatchGroupLeader&#45;&gt;AllowWriteBatching</title>
<path fill="none" stroke="#000000" d="M1116.5791,-730.5653C1153.7561,-732.9962 1195.2806,-735.7114 1230.0201,-737.9829"/>
<polygon fill="#000000" stroke="#000000" points="1229.8916,-741.4819 1240.0987,-738.6419 1230.3484,-734.4968 1229.8916,-741.4819"/>
</g>
<!-- DBImpl -->
<g id="node5" class="node">
<title>DBImpl</title>
<polygon fill="none" stroke="#000000" points="1220.7036,-71 1220.7036,-115 1392.7954,-115 1392.7954,-71 1220.7036,-71"/>
<text text-anchor="middle" x="1306.7495" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl</text>
<polyline fill="none" stroke="#000000" points="1220.7036,-93 1392.7954,-93 "/>
<text text-anchor="start" x="1228.7036" y="-77.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteThread write_thread_;</text>
</g>
<!-- DBImpl&#45;&gt;WriteThread -->
<g id="edge2" class="edge">
<title>DBImpl:WriteThread&#45;&gt;WriteThread</title>
<path fill="none" stroke="#000000" d="M1392.7495,-82C1420.0003,-82 1448.8925,-83.6015 1476.8496,-85.9937"/>
<polygon fill="#000000" stroke="#000000" points="1476.8307,-89.5059 1487.1025,-86.9094 1477.4535,-82.5336 1476.8307,-89.5059"/>
</g>
<!-- DBImpl_WriteImpl -->
<g id="node6" class="node">
<title>DBImpl_WriteImpl</title>
<polygon fill="none" stroke="#000000" points="16,-52.2 16,-115.8 272.6797,-115.8 272.6797,-52.2 16,-52.2"/>
<text text-anchor="middle" x="144.3398" y="-100.6" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl::WriteImpl</text>
<polyline fill="none" stroke="#000000" points="16,-93.8 272.6797,-93.8 "/>
<text text-anchor="start" x="24" y="-78.6" font-family="Times,serif" font-size="14.00" fill="#000000">1.如果打开了enable_pipline_write则调用</text>
<text text-anchor="start" x="24" y="-59" font-family="Times,serif" font-size="14.00" fill="#000000"> PipelinedWriteImpl</text>
</g>
<!-- JoinBatchGroup -->
<g id="node7" class="node">
<title>JoinBatchGroup</title>
<polygon fill="none" stroke="#000000" points="308.6797,-270.4001 308.6797,-339.5999 554.873,-339.5999 554.873,-270.4001 308.6797,-270.4001"/>
<text text-anchor="middle" x="431.7764" y="-324.3999" font-family="Times,serif" font-size="14.00" fill="#000000">JoinBatchGroup</text>
<polyline fill="none" stroke="#000000" points="308.6797,-317.5999 554.873,-317.5999 "/>
<text text-anchor="start" x="316.6797" y="-302.3999" font-family="Times,serif" font-size="14.00" fill="#000000">1.加入batchGroup</text>
<text text-anchor="start" x="316.6797" y="-282.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 2.要么作为leader，要么等到目标状态</text>
</g>
<!-- DBImpl_WriteImpl&#45;&gt;JoinBatchGroup -->
<g id="edge4" class="edge">
<title>DBImpl_WriteImpl&#45;&gt;JoinBatchGroup</title>
<path fill="none" stroke="#e84545" d="M185.8286,-115.8993C236.6547,-154.9777 322.8485,-221.2492 378.522,-264.0545"/>
<polygon fill="#e84545" stroke="#e84545" points="376.4458,-266.8731 386.5068,-270.1938 380.7125,-261.3238 376.4458,-266.8731"/>
</g>
<!-- DBImpl_PipelineWriteImpl -->
<g id="node8" class="node">
<title>DBImpl_PipelineWriteImpl</title>
<polygon fill="none" stroke="#000000" points="517.8063,-102 345.7464,-102 345.7464,-66 517.8063,-66 517.8063,-102"/>
<text text-anchor="middle" x="431.7764" y="-79.8" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl_PipelineWriteImpl</text>
</g>
<!-- DBImpl_WriteImpl&#45;&gt;DBImpl_PipelineWriteImpl -->
<g id="edge5" class="edge">
<title>DBImpl_WriteImpl&#45;&gt;DBImpl_PipelineWriteImpl</title>
<path fill="none" stroke="#e84545" d="M272.9253,-84C293.8963,-84 315.3018,-84 335.3292,-84"/>
<polygon fill="#e84545" stroke="#e84545" points="335.3533,-87.5001 345.3533,-84 335.3532,-80.5001 335.3533,-87.5001"/>
</g>
<!-- IF_STATE_PARALLEL_MEMABLE_WRITER -->
<g id="node9" class="node">
<title>IF_STATE_PARALLEL_MEMABLE_WRITER</title>
<polygon fill="none" stroke="#000000" points="590.873,-852.2 590.873,-901.8 870.1182,-901.8 870.1182,-852.2 590.873,-852.2"/>
<text text-anchor="start" x="598.873" y="-886.6" font-family="Times,serif" font-size="14.00" fill="#000000">如果JoinBatchGroup后状态为</text>
<polyline fill="none" stroke="#000000" points="590.873,-874.2 870.1182,-874.2 "/>
<text text-anchor="start" x="598.873" y="-859" font-family="Times,serif" font-size="14.00" fill="#000000">STATE_PARALLEL_MEMTABLE_WRITER</text>
</g>
<!-- DBImpl_WriteImpl&#45;&gt;IF_STATE_PARALLEL_MEMABLE_WRITER -->
<g id="edge6" class="edge">
<title>DBImpl_WriteImpl&#45;&gt;IF_STATE_PARALLEL_MEMABLE_WRITER</title>
<path fill="none" stroke="#e84545" d="M152.2504,-115.889C183.4271,-234.3283 309.697,-651.8968 589.1917,-846.4602"/>
<polygon fill="#e84545" stroke="#e84545" points="587.2766,-849.3907 597.5056,-852.1509 591.2305,-843.6143 587.2766,-849.3907"/>
</g>
<!-- IF_STATE_GROUP_LEADER -->
<g id="node10" class="node">
<title>IF_STATE_GROUP_LEADER</title>
<polygon fill="none" stroke="#000000" points="634.6128,-485.4001 634.6128,-532.5999 826.3784,-532.5999 826.3784,-485.4001 634.6128,-485.4001"/>
<text text-anchor="start" x="642.6128" y="-517.3999" font-family="Times,serif" font-size="14.00" fill="#000000">如果JoinBatchGroup后状态为</text>
<text text-anchor="start" x="642.6128" y="-497.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 成为GROUP_LEADER</text>
</g>
<!-- DBImpl_WriteImpl&#45;&gt;IF_STATE_GROUP_LEADER -->
<g id="edge7" class="edge">
<title>DBImpl_WriteImpl&#45;&gt;IF_STATE_GROUP_LEADER</title>
<path fill="none" stroke="#e84545" d="M156.864,-115.8478C179.638,-170.1642 232.6099,-281.3868 308.6797,-349 398.3466,-428.6987 531.7178,-470.3045 624.3961,-490.8699"/>
<polygon fill="#e84545" stroke="#e84545" points="623.8457,-494.3319 634.3608,-493.035 625.3319,-487.4915 623.8457,-494.3319"/>
</g>
<!-- JoinBatchGroup&#45;&gt;IF_STATE_PARALLEL_MEMABLE_WRITER -->
<g id="edge14" class="edge">
<title>JoinBatchGroup&#45;&gt;IF_STATE_PARALLEL_MEMABLE_WRITER</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M445.279,-339.8317C469.7592,-403.9659 521.9744,-545.4012 554.873,-668 575.1504,-743.5647 536.7868,-786.4865 588.1126,-844.5092"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="585.7992,-847.1581 595.2019,-852.0407 590.8963,-842.3602 585.7992,-847.1581"/>
</g>
<!-- JoinBatchGroup&#45;&gt;IF_STATE_GROUP_LEADER -->
<g id="edge15" class="edge">
<title>JoinBatchGroup&#45;&gt;IF_STATE_GROUP_LEADER</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M481.8179,-339.7588C506.0093,-358.315 534.2045,-382.7216 554.873,-409 576.991,-437.1211 562.4464,-459.2761 590.873,-481 600.8704,-488.6401 612.4112,-494.349 624.4865,-498.5927"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="623.6759,-502.0073 634.266,-501.6909 625.79,-495.3342 623.6759,-502.0073"/>
</g>
<!-- AwaitState -->
<g id="node18" class="node">
<title>AwaitState</title>
<polygon fill="none" stroke="#000000" points="1162.2256,-531.6001 1162.2256,-706.3999 1451.2734,-706.3999 1451.2734,-531.6001 1162.2256,-531.6001"/>
<text text-anchor="middle" x="1306.7495" y="-691.1999" font-family="Times,serif" font-size="14.00" fill="#000000">AwaitState</text>
<polyline fill="none" stroke="#000000" points="1162.2256,-684.3999 1451.2734,-684.3999 "/>
<text text-anchor="start" x="1170.2256" y="-669.1999" font-family="Times,serif" font-size="14.00" fill="#000000">AwaitState(w, </text>
<text text-anchor="start" x="1170.2256" y="-655.1999" font-family="Times,serif" font-size="14.00" fill="#000000">STATE_GROUP_LEADER </text>
<text text-anchor="start" x="1170.2256" y="-641.1999" font-family="Times,serif" font-size="14.00" fill="#000000">| STATE_MEMTABLE_WRITER_LEADER </text>
<text text-anchor="start" x="1170.2256" y="-627.1999" font-family="Times,serif" font-size="14.00" fill="#000000">| STATE_PARALLEL_MEMTABLE_WRITER </text>
<text text-anchor="start" x="1170.2256" y="-613.1999" font-family="Times,serif" font-size="14.00" fill="#000000">| STATE_COMPLETED)</text>
<text text-anchor="start" x="1170.2256" y="-599.1999" font-family="Times,serif" font-size="14.00" fill="#000000"> 1.轮询两百次直到state变为目标状态</text>
<polyline fill="none" stroke="#000000" points="1162.2256,-586.8 1451.2734,-586.8 "/>
<text text-anchor="start" x="1170.2256" y="-571.6" font-family="Times,serif" font-size="14.00" fill="#000000">2.使用thread yield</text>
<polyline fill="none" stroke="#000000" points="1162.2256,-559.2 1451.2734,-559.2 "/>
<text text-anchor="start" x="1170.2256" y="-544" font-family="Times,serif" font-size="14.00" fill="#000000">3.等待condVar</text>
</g>
<!-- JoinBatchGroup&#45;&gt;AwaitState -->
<g id="edge30" class="edge">
<title>JoinBatchGroup&#45;&gt;AwaitState</title>
<path fill="none" stroke="#3f72af" d="M538.6356,-339.6581C556.0712,-345.1969 573.9582,-350.8095 590.873,-356 827.9187,-428.7398 898.6337,-414.5944 1126.2256,-513 1136.0589,-517.2517 1146.021,-521.9296 1155.9521,-526.8792"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1154.5572,-530.0961 1165.0591,-531.4968 1157.7228,-523.8528 1154.5572,-530.0961"/>
</g>
<!-- LinkOne -->
<g id="node27" class="node">
<title>LinkOne</title>
<polygon fill="none" stroke="#000000" points="658.7368,-200.2 658.7368,-249.8 802.2544,-249.8 802.2544,-200.2 658.7368,-200.2"/>
<text text-anchor="middle" x="730.4956" y="-234.6" font-family="Times,serif" font-size="14.00" fill="#000000">LinkOne</text>
<polyline fill="none" stroke="#000000" points="658.7368,-227.8 802.2544,-227.8 "/>
<text text-anchor="middle" x="730.4956" y="-212.6" font-family="Times,serif" font-size="14.00" fill="#000000">尝试成为groupLeader</text>
</g>
<!-- JoinBatchGroup&#45;&gt;LinkOne -->
<g id="edge31" class="edge">
<title>JoinBatchGroup&#45;&gt;LinkOne</title>
<path fill="none" stroke="#3f72af" d="M555.0015,-271.9991C586.4858,-263.5673 619.5692,-254.7072 648.4187,-246.981"/>
<polygon fill="#3f72af" stroke="#3f72af" points="649.6828,-250.2659 658.4369,-244.298 647.8719,-243.5042 649.6828,-250.2659"/>
</g>
<!-- SetState -->
<g id="node28" class="node">
<title>SetState</title>
<polygon fill="none" stroke="#000000" points="1535.7026,-304.4001 1535.7026,-373.5999 1731.7202,-373.5999 1731.7202,-304.4001 1535.7026,-304.4001"/>
<text text-anchor="middle" x="1633.7114" y="-358.3999" font-family="Times,serif" font-size="14.00" fill="#000000">SetState</text>
<polyline fill="none" stroke="#000000" points="1535.7026,-351.5999 1731.7202,-351.5999 "/>
<text text-anchor="start" x="1543.7026" y="-336.3999" font-family="Times,serif" font-size="14.00" fill="#000000">设置Writer的状态，并通知</text>
<text text-anchor="start" x="1543.7026" y="-316.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 等待writer状态变化的condvar</text>
</g>
<!-- JoinBatchGroup&#45;&gt;SetState -->
<g id="edge32" class="edge">
<title>JoinBatchGroup&#45;&gt;SetState</title>
<path fill="none" stroke="#3f72af" d="M555.0726,-295.975C787.5337,-279.9131 1282.4129,-250.5176 1451.2734,-278 1480.4651,-282.751 1511.2923,-291.5148 1539.1301,-300.9464"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1538.2496,-304.3453 1548.8444,-304.3049 1540.5369,-297.7295 1538.2496,-304.3453"/>
</g>
<!-- ShouldWriteToMemtable -->
<g id="node11" class="node">
<title>ShouldWriteToMemtable</title>
<polygon fill="none" stroke="#000000" points="1095.4964,-803 936.8473,-803 936.8473,-767 1095.4964,-767 1095.4964,-803"/>
<text text-anchor="middle" x="1016.1719" y="-780.8" font-family="Times,serif" font-size="14.00" fill="#000000">ShouldWriteToMemtable</text>
</g>
<!-- IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;ShouldWriteToMemtable -->
<g id="edge8" class="edge">
<title>IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;ShouldWriteToMemtable</title>
<path fill="none" stroke="#f08a5d" d="M856.3922,-852.0992C861.0441,-850.7836 865.6328,-849.4171 870.1182,-848 904.7766,-837.0501 942.4047,-820.7061 970.787,-807.4093"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="972.4993,-810.4712 980.0402,-803.029 969.5042,-804.1443 972.4993,-810.4712"/>
</g>
<!-- WriteBatchInternal_InsertInto -->
<g id="node12" class="node">
<title>WriteBatchInternal_InsertInto</title>
<polygon fill="none" stroke="#000000" points="1213.895,-779.2 1213.895,-828.8 1399.604,-828.8 1399.604,-779.2 1213.895,-779.2"/>
<text text-anchor="middle" x="1306.7495" y="-813.6" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchInternal::InsertInto</text>
<polyline fill="none" stroke="#000000" points="1213.895,-806.8 1399.604,-806.8 "/>
<text text-anchor="start" x="1221.895" y="-791.6" font-family="Times,serif" font-size="14.00" fill="#000000">将WriteBatch插入MemTable</text>
</g>
<!-- IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;WriteBatchInternal_InsertInto -->
<g id="edge9" class="edge">
<title>IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;WriteBatchInternal_InsertInto</title>
<path fill="none" stroke="#f08a5d" d="M768.3336,-901.8686C802.6681,-922.8469 855.5161,-951.2755 906.1182,-963 1001.419,-985.0811 1035.8466,-1000.4362 1126.2256,-963 1147.1306,-954.3409 1145.5964,-942.345 1162.2256,-927 1197.0849,-894.8327 1238.443,-859.9458 1267.9662,-835.5711"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="1270.4689,-838.0442 1275.9642,-828.9859 1266.0195,-832.6402 1270.4689,-838.0442"/>
</g>
<!-- CompleteParallelMemTableWriter -->
<g id="node13" class="node">
<title>CompleteParallelMemTableWriter</title>
<polygon fill="none" stroke="#000000" points="1120.7865,-895 911.5573,-895 911.5573,-859 1120.7865,-859 1120.7865,-895"/>
<text text-anchor="middle" x="1016.1719" y="-872.8" font-family="Times,serif" font-size="14.00" fill="#000000">CompleteParallelMemTableWriter</text>
</g>
<!-- IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;CompleteParallelMemTableWriter -->
<g id="edge10" class="edge">
<title>IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;CompleteParallelMemTableWriter</title>
<path fill="none" stroke="#f08a5d" d="M870.4046,-877C880.7954,-877 891.2068,-877 901.4189,-877"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="901.5564,-880.5001 911.5563,-877 901.5563,-873.5001 901.5564,-880.5001"/>
</g>
<!-- MemTableInsertStatusCheck -->
<g id="node14" class="node">
<title>MemTableInsertStatusCheck</title>
<polygon fill="none" stroke="#000000" points="1105.4846,-949 926.8591,-949 926.8591,-913 1105.4846,-913 1105.4846,-949"/>
<text text-anchor="middle" x="1016.1719" y="-926.8" font-family="Times,serif" font-size="14.00" fill="#000000">MemTableInsertStatusCheck</text>
</g>
<!-- IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;MemTableInsertStatusCheck -->
<g id="edge11" class="edge">
<title>IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;MemTableInsertStatusCheck</title>
<path fill="none" stroke="#f08a5d" d="M862.0455,-901.8662C880.4074,-905.3371 899.0197,-908.8553 916.6584,-912.1895"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="916.446,-915.7112 926.9221,-914.1295 917.7462,-908.833 916.446,-915.7112"/>
</g>
<!-- ExitAsBatchGroupFollower -->
<g id="node15" class="node">
<title>ExitAsBatchGroupFollower</title>
<polygon fill="none" stroke="#000000" points="1103.0411,-1041 929.3027,-1041 929.3027,-1005 1103.0411,-1005 1103.0411,-1041"/>
<text text-anchor="middle" x="1016.1719" y="-1018.8" font-family="Times,serif" font-size="14.00" fill="#000000">ExitAsBatchGroupFollower</text>
</g>
<!-- IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;ExitAsBatchGroupFollower -->
<g id="edge12" class="edge">
<title>IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;ExitAsBatchGroupFollower</title>
<path fill="none" stroke="#f08a5d" d="M757.772,-901.8502C790.5366,-930.2985 848.3407,-976.1595 906.1182,-1001 910.4758,-1002.8735 914.9998,-1004.5896 919.6192,-1006.1613"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="918.6225,-1009.5169 929.2123,-1009.1889 920.7293,-1002.8414 918.6225,-1009.5169"/>
</g>
<!-- EnterAsMemTableWriter -->
<g id="node16" class="node">
<title>EnterAsMemTableWriter</title>
<polygon fill="none" stroke="#000000" points="1095.469,-1095 936.8747,-1095 936.8747,-1059 1095.469,-1059 1095.469,-1095"/>
<text text-anchor="middle" x="1016.1719" y="-1072.8" font-family="Times,serif" font-size="14.00" fill="#000000">EnterAsMemTableWriter</text>
</g>
<!-- IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;EnterAsMemTableWriter -->
<g id="edge13" class="edge">
<title>IF_STATE_PARALLEL_MEMABLE_WRITER&#45;&gt;EnterAsMemTableWriter</title>
<path fill="none" stroke="#f08a5d" d="M747.4456,-902.0002C775.5208,-941.3025 835.6256,-1016.9724 906.1182,-1055 912.6614,-1058.5298 919.699,-1061.4961 926.9382,-1063.9884"/>
<polygon fill="#f08a5d" stroke="#f08a5d" points="926.3186,-1067.4616 936.9073,-1067.1018 928.4054,-1060.7799 926.3186,-1067.4616"/>
</g>
<!-- IF_STATE_GROUP_LEADER&#45;&gt;EnterAsBatchGroupLeader -->
<g id="edge18" class="edge">
<title>IF_STATE_GROUP_LEADER&#45;&gt;EnterAsBatchGroupLeader</title>
<path fill="none" stroke="#17b978" d="M746.11,-532.6924C773.5901,-572.4683 834.519,-652.4824 906.1182,-695 906.4128,-695.175 906.7085,-695.3489 907.0053,-695.5218"/>
<polygon fill="#17b978" stroke="#17b978" points="905.404,-698.6344 915.8747,-700.2516 908.6979,-692.4578 905.404,-698.6344"/>
</g>
<!-- IF_STATE_GROUP_LEADER&#45;&gt;ShouldWriteToMemtable -->
<g id="edge19" class="edge">
<title>IF_STATE_GROUP_LEADER&#45;&gt;ShouldWriteToMemtable</title>
<path fill="none" stroke="#17b978" d="M739.6372,-532.8382C760.5823,-584.026 817.1945,-704.5397 906.1182,-763 912.6434,-767.2898 919.8229,-770.7757 927.2918,-773.6041"/>
<polygon fill="#17b978" stroke="#17b978" points="926.2856,-776.9585 936.8798,-776.8463 928.5279,-770.3274 926.2856,-776.9585"/>
</g>
<!-- PreprocessWrite -->
<g id="node19" class="node">
<title>PreprocessWrite</title>
<polygon fill="none" stroke="#000000" points="1070.1357,-342 962.208,-342 962.208,-306 1070.1357,-306 1070.1357,-342"/>
<text text-anchor="middle" x="1016.1719" y="-319.8" font-family="Times,serif" font-size="14.00" fill="#000000">PreprocessWrite</text>
</g>
<!-- IF_STATE_GROUP_LEADER&#45;&gt;PreprocessWrite -->
<g id="edge20" class="edge">
<title>IF_STATE_GROUP_LEADER&#45;&gt;PreprocessWrite</title>
<path fill="none" stroke="#17b978" d="M826.4019,-502.9503C842.2797,-498.4247 857.6158,-491.485 870.1182,-481 903.7612,-452.7856 877.6595,-422.4366 906.1182,-389 921.2096,-371.2687 942.419,-357.1527 962.1957,-346.6672"/>
<polygon fill="#17b978" stroke="#17b978" points="963.8315,-349.7619 971.1543,-342.1051 960.6549,-343.5242 963.8315,-349.7619"/>
</g>
<!-- IF_PARALLEL -->
<g id="node20" class="node">
<title>IF_PARALLEL</title>
<polygon fill="none" stroke="#000000" points="906.1182,-398.0002 906.1182,-503.9998 1126.2256,-503.9998 1126.2256,-398.0002 906.1182,-398.0002"/>
<text text-anchor="start" x="914.1182" y="-488.7998" font-family="Times,serif" font-size="14.00" fill="#000000">如果允许并行写</text>
<text text-anchor="start" x="914.1182" y="-469.1999" font-family="Times,serif" font-size="14.00" fill="#000000"> 就LaunchParallelMemTableWriters</text>
<text text-anchor="start" x="914.1182" y="-449.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 让所有writers并行写</text>
<text text-anchor="start" x="914.1182" y="-430" font-family="Times,serif" font-size="14.00" fill="#000000"> 否则由groupLeader 插入</text>
<text text-anchor="start" x="914.1182" y="-410.4001" font-family="Times,serif" font-size="14.00" fill="#000000"> 到MemTable中</text>
</g>
<!-- IF_STATE_GROUP_LEADER&#45;&gt;IF_PARALLEL -->
<g id="edge21" class="edge">
<title>IF_STATE_GROUP_LEADER&#45;&gt;IF_PARALLEL</title>
<path fill="none" stroke="#17b978" d="M826.6459,-489.7792C841.2137,-486.8494 856.0656,-483.8523 870.1182,-481 878.5047,-479.2978 887.1608,-477.5349 895.877,-475.7555"/>
<polygon fill="#17b978" stroke="#17b978" points="896.6354,-479.1729 905.7323,-473.7417 895.234,-472.3146 896.6354,-479.1729"/>
</g>
<!-- WriteToWAL -->
<g id="node21" class="node">
<title>WriteToWAL</title>
<polygon fill="none" stroke="#000000" points="970.0649,-630.2 970.0649,-679.8 1062.2788,-679.8 1062.2788,-630.2 970.0649,-630.2"/>
<text text-anchor="middle" x="1016.1719" y="-664.6" font-family="Times,serif" font-size="14.00" fill="#000000">WriteToWAL</text>
<polyline fill="none" stroke="#000000" points="970.0649,-657.8 1062.2788,-657.8 "/>
<text text-anchor="middle" x="1016.1719" y="-642.6" font-family="Times,serif" font-size="14.00" fill="#000000">写WAL日志</text>
</g>
<!-- IF_STATE_GROUP_LEADER&#45;&gt;WriteToWAL -->
<g id="edge22" class="edge">
<title>IF_STATE_GROUP_LEADER&#45;&gt;WriteToWAL</title>
<path fill="none" stroke="#17b978" d="M759.4845,-532.7274C792.9296,-559.0124 850.4863,-600.9783 906.1182,-626 922.9894,-633.5882 942.2402,-639.5049 959.8736,-643.9578"/>
<polygon fill="#17b978" stroke="#17b978" points="959.4966,-647.4672 970.0387,-646.4119 961.1394,-640.6627 959.4966,-647.4672"/>
</g>
<!-- ConcurrentWriteToWAL -->
<g id="node22" class="node">
<title>ConcurrentWriteToWAL</title>
<polygon fill="none" stroke="#000000" points="932.3511,-522.6001 932.3511,-611.3999 1099.9927,-611.3999 1099.9927,-522.6001 932.3511,-522.6001"/>
<text text-anchor="middle" x="1016.1719" y="-596.1999" font-family="Times,serif" font-size="14.00" fill="#000000">ConcurrentWriteToWAL</text>
<polyline fill="none" stroke="#000000" points="932.3511,-589.3999 1099.9927,-589.3999 "/>
<text text-anchor="start" x="940.3511" y="-574.1999" font-family="Times,serif" font-size="14.00" fill="#000000">由two_write_queues_变量</text>
<text text-anchor="start" x="940.3511" y="-554.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 决定是否并发写</text>
<text text-anchor="start" x="940.3511" y="-535" font-family="Times,serif" font-size="14.00" fill="#000000"> 并发的写入WAL日志</text>
</g>
<!-- IF_STATE_GROUP_LEADER&#45;&gt;ConcurrentWriteToWAL -->
<g id="edge23" class="edge">
<title>IF_STATE_GROUP_LEADER&#45;&gt;ConcurrentWriteToWAL</title>
<path fill="none" stroke="#17b978" d="M826.4164,-528.4745C857.2781,-534.7403 891.4271,-541.6734 922.1508,-547.9112"/>
<polygon fill="#17b978" stroke="#17b978" points="921.5007,-551.3505 931.9972,-549.9103 922.8935,-544.4905 921.5007,-551.3505"/>
</g>
<!-- CompleteParallelMemTableWriter&#45;&gt;AwaitState -->
<g id="edge17" class="edge">
<title>CompleteParallelMemTableWriter&#45;&gt;AwaitState</title>
<path fill="none" stroke="#000000" d="M1120.8923,-859.5182C1122.7449,-858.1103 1124.5265,-856.6063 1126.2256,-855 1172.5987,-811.1591 1125.3254,-768.066 1162.2256,-716 1162.5805,-715.4992 1162.9389,-715.0003 1163.3007,-714.5031"/>
<polygon fill="#000000" stroke="#000000" points="1166.0634,-716.6519 1169.4458,-706.6115 1160.5403,-712.3512 1166.0634,-716.6519"/>
</g>
<!-- EnterAsMemTableWriter&#45;&gt;CreateMissingNewerLinks -->
<g id="edge47" class="edge">
<title>EnterAsMemTableWriter&#45;&gt;CreateMissingNewerLinks</title>
<path fill="none" stroke="#000000" d="M1095.4587,-1064.2585C1105.9484,-1061.673 1116.4466,-1058.6106 1126.2256,-1055 1179.9553,-1035.1616 1236.8027,-1000.8421 1272.0301,-977.784"/>
<polygon fill="#000000" stroke="#000000" points="1274.0943,-980.615 1280.5054,-972.18 1270.2335,-974.776 1274.0943,-980.615"/>
</g>
<!-- HasMerge -->
<g id="node39" class="node">
<title>HasMerge</title>
<polygon fill="none" stroke="#000000" points="1343.814,-1095 1269.685,-1095 1269.685,-1059 1343.814,-1059 1343.814,-1095"/>
<text text-anchor="middle" x="1306.7495" y="-1072.8" font-family="Times,serif" font-size="14.00" fill="#000000">HasMerge</text>
</g>
<!-- EnterAsMemTableWriter&#45;&gt;HasMerge -->
<g id="edge48" class="edge">
<title>EnterAsMemTableWriter&#45;&gt;HasMerge</title>
<path fill="none" stroke="#000000" d="M1095.5735,-1077C1147.9989,-1077 1214.945,-1077 1259.2493,-1077"/>
<polygon fill="#000000" stroke="#000000" points="1259.4491,-1080.5001 1269.4491,-1077 1259.449,-1073.5001 1259.4491,-1080.5001"/>
</g>
<!-- LaunchParallelMemTableWriters -->
<g id="node17" class="node">
<title>LaunchParallelMemTableWriters</title>
<polygon fill="none" stroke="#000000" points="1165.377,-449.2 1165.377,-512.8 1448.1221,-512.8 1448.1221,-449.2 1165.377,-449.2"/>
<text text-anchor="middle" x="1306.7495" y="-497.6" font-family="Times,serif" font-size="14.00" fill="#000000">LaunchParallelMemTableWriters</text>
<polyline fill="none" stroke="#000000" points="1165.377,-490.8 1448.1221,-490.8 "/>
<text text-anchor="start" x="1173.377" y="-475.6" font-family="Times,serif" font-size="14.00" fill="#000000">将group中的所有write状态设置为</text>
<text text-anchor="start" x="1173.377" y="-456" font-family="Times,serif" font-size="14.00" fill="#000000"> STATE_PARALLEL_MEMTABLE_WRITER</text>
</g>
<!-- LaunchParallelMemTableWriters&#45;&gt;IF_STATE_PARALLEL_MEMABLE_WRITER -->
<g id="edge16" class="edge">
<title>LaunchParallelMemTableWriters&#45;&gt;IF_STATE_PARALLEL_MEMABLE_WRITER</title>
<path fill="none" stroke="#c0c0c0" stroke-dasharray="5,2" d="M1171.2968,-512.9264C1168.0617,-515.7123 1165.0238,-518.7306 1162.2256,-522 1076.3393,-622.3478 1218.257,-722.2565 1126.2256,-817 1063.881,-881.1818 964.1344,-895.9779 880.3846,-894.8314"/>
<polygon fill="#c0c0c0" stroke="#c0c0c0" points="880.3267,-891.3294 870.2541,-894.6148 880.177,-898.3278 880.3267,-891.3294"/>
</g>
<!-- LaunchParallelMemTableWriters&#45;&gt;SetState -->
<g id="edge51" class="edge">
<title>LaunchParallelMemTableWriters&#45;&gt;SetState</title>
<path fill="none" stroke="#000000" d="M1427.3407,-449.0679C1435.5122,-446.2072 1443.5574,-443.1809 1451.2734,-440 1492.1375,-423.1539 1535.5192,-399.404 1569.7227,-379.1668"/>
<polygon fill="#000000" stroke="#000000" points="1571.869,-381.962 1578.664,-373.8332 1568.2828,-375.9504 1571.869,-381.962"/>
</g>
<!-- AwaitState&#45;&gt;Writer -->
<g id="edge35" class="edge">
<title>AwaitState&#45;&gt;Writer</title>
<path fill="none" stroke="#000000" d="M1451.423,-642.0421C1463.5309,-643.5431 1475.6006,-644.8937 1487.2734,-646 1593.5158,-656.0695 1713.8063,-660.8086 1805.9014,-663.0359"/>
<polygon fill="#000000" stroke="#000000" points="1806.0581,-666.5404 1816.1375,-663.2759 1806.2223,-659.5423 1806.0581,-666.5404"/>
</g>
<!-- AsmVolatilePause -->
<g id="node31" class="node">
<title>AsmVolatilePause</title>
<polygon fill="none" stroke="#000000" points="1693.1145,-637 1574.3084,-637 1574.3084,-601 1693.1145,-601 1693.1145,-637"/>
<text text-anchor="middle" x="1633.7114" y="-614.8" font-family="Times,serif" font-size="14.00" fill="#000000">AsmVolatilePause</text>
</g>
<!-- AwaitState&#45;&gt;AsmVolatilePause -->
<g id="edge36" class="edge">
<title>AwaitState&#45;&gt;AsmVolatilePause</title>
<path fill="none" stroke="#000000" d="M1451.5876,-619C1490.5831,-619 1531.0122,-619 1563.8437,-619"/>
<polygon fill="#000000" stroke="#000000" points="1564.2249,-622.5001 1574.2248,-619 1564.2248,-615.5001 1564.2249,-622.5001"/>
</g>
<!-- std_this_thread_yield -->
<g id="node32" class="node">
<title>std_this_thread_yield</title>
<polygon fill="none" stroke="#000000" points="1701.7503,-583 1565.6726,-583 1565.6726,-547 1701.7503,-547 1701.7503,-583"/>
<text text-anchor="middle" x="1633.7114" y="-560.8" font-family="Times,serif" font-size="14.00" fill="#000000">std_this_thread_yield</text>
</g>
<!-- AwaitState&#45;&gt;std_this_thread_yield -->
<g id="edge37" class="edge">
<title>AwaitState&#45;&gt;std_this_thread_yield</title>
<path fill="none" stroke="#000000" d="M1451.5876,-595.079C1487.3463,-589.1732 1524.3105,-583.0683 1555.5164,-577.9144"/>
<polygon fill="#000000" stroke="#000000" points="1556.141,-581.3588 1565.437,-576.276 1555.0003,-574.4523 1556.141,-581.3588"/>
</g>
<!-- BlockingAwaitState -->
<g id="node33" class="node">
<title>BlockingAwaitState</title>
<polygon fill="none" stroke="#000000" points="1697.9646,-489 1569.4582,-489 1569.4582,-453 1697.9646,-453 1697.9646,-489"/>
<text text-anchor="middle" x="1633.7114" y="-466.8" font-family="Times,serif" font-size="14.00" fill="#000000">BlockingAwaitState</text>
</g>
<!-- AwaitState&#45;&gt;BlockingAwaitState -->
<g id="edge38" class="edge">
<title>AwaitState&#45;&gt;BlockingAwaitState</title>
<path fill="none" stroke="#000000" d="M1451.5876,-553.4387C1499.2552,-531.8619 1549.065,-509.3154 1584.521,-493.2661"/>
<polygon fill="#000000" stroke="#000000" points="1586.0038,-496.4369 1593.6706,-489.1246 1583.1171,-490.0598 1586.0038,-496.4369"/>
</g>
<!-- WaitForPendingWrites -->
<g id="node23" class="node">
<title>WaitForPendingWrites</title>
<polygon fill="none" stroke="#000000" points="1378.944,-52 1234.555,-52 1234.555,-16 1378.944,-16 1378.944,-52"/>
<text text-anchor="middle" x="1306.7495" y="-29.8" font-family="Times,serif" font-size="14.00" fill="#000000">WaitForPendingWrites</text>
</g>
<!-- PreprocessWrite&#45;&gt;WaitForPendingWrites -->
<g id="edge24" class="edge">
<title>PreprocessWrite&#45;&gt;WaitForPendingWrites</title>
<path fill="none" stroke="#000000" d="M1070.2926,-325.6304C1090.466,-323.3602 1111.9164,-317.0284 1126.2256,-302 1200.9051,-223.5669 1087.053,-138.9607 1162.2256,-61 1178.4308,-44.1938 1201.505,-35.9501 1224.4713,-32.2959"/>
<polygon fill="#000000" stroke="#000000" points="1225.1776,-35.7333 1234.6374,-30.9622 1224.2671,-28.7928 1225.1776,-35.7333"/>
</g>
<!-- HandleWriteBufferFull -->
<g id="node24" class="node">
<title>HandleWriteBufferFull</title>
<polygon fill="none" stroke="#000000" points="1379.8506,-431 1233.6484,-431 1233.6484,-395 1379.8506,-395 1379.8506,-431"/>
<text text-anchor="middle" x="1306.7495" y="-408.8" font-family="Times,serif" font-size="14.00" fill="#000000">HandleWriteBufferFull</text>
</g>
<!-- PreprocessWrite&#45;&gt;HandleWriteBufferFull -->
<g id="edge25" class="edge">
<title>PreprocessWrite&#45;&gt;HandleWriteBufferFull</title>
<path fill="none" stroke="#000000" d="M1052.5695,-342.0685C1081.632,-355.8493 1123.7224,-374.3813 1162.2256,-386 1181.8609,-391.9251 1203.4082,-396.7907 1223.7328,-400.6782"/>
<polygon fill="#000000" stroke="#000000" points="1223.1277,-404.1256 1233.5984,-402.5083 1224.4046,-397.243 1223.1277,-404.1256"/>
</g>
<!-- TrimMemtableHistory -->
<g id="node25" class="node">
<title>TrimMemtableHistory</title>
<polygon fill="none" stroke="#000000" points="1378.0164,-377 1235.4827,-377 1235.4827,-341 1378.0164,-341 1378.0164,-377"/>
<text text-anchor="middle" x="1306.7495" y="-354.8" font-family="Times,serif" font-size="14.00" fill="#000000">TrimMemtableHistory</text>
</g>
<!-- PreprocessWrite&#45;&gt;TrimMemtableHistory -->
<g id="edge26" class="edge">
<title>PreprocessWrite&#45;&gt;TrimMemtableHistory</title>
<path fill="none" stroke="#000000" d="M1070.1463,-330.5012C1113.754,-335.7537 1175.8185,-343.2294 1225.4406,-349.2064"/>
<polygon fill="#000000" stroke="#000000" points="1225.1625,-352.6981 1235.5093,-350.4191 1225.9996,-345.7483 1225.1625,-352.6981"/>
</g>
<!-- ScheduleFlushes -->
<g id="node26" class="node">
<title>ScheduleFlushes</title>
<polygon fill="none" stroke="#000000" points="1361.8531,-323 1251.6459,-323 1251.6459,-287 1361.8531,-287 1361.8531,-323"/>
<text text-anchor="middle" x="1306.7495" y="-300.8" font-family="Times,serif" font-size="14.00" fill="#000000">ScheduleFlushes</text>
</g>
<!-- PreprocessWrite&#45;&gt;ScheduleFlushes -->
<g id="edge27" class="edge">
<title>PreprocessWrite&#45;&gt;ScheduleFlushes</title>
<path fill="none" stroke="#000000" d="M1070.1463,-320.4708C1118.615,-317.3016 1189.8845,-312.6415 1241.5282,-309.2646"/>
<polygon fill="#000000" stroke="#000000" points="1241.8324,-312.7523 1251.5827,-308.6072 1241.3756,-305.7672 1241.8324,-312.7523"/>
</g>
<!-- IF_PARALLEL&#45;&gt;WriteBatchInternal_InsertInto -->
<g id="edge28" class="edge">
<title>IF_PARALLEL&#45;&gt;WriteBatchInternal_InsertInto</title>
<path fill="none" stroke="#000000" d="M1057.335,-504.2369C1080.5166,-536.4876 1108.3218,-579.3287 1126.2256,-621 1153.1191,-683.5949 1113.9074,-721.9715 1162.2256,-770 1173.8069,-781.5119 1188.5069,-789.4083 1204.0728,-794.7737"/>
<polygon fill="#000000" stroke="#000000" points="1203.2689,-798.1885 1213.8565,-797.797 1205.3356,-791.5006 1203.2689,-798.1885"/>
</g>
<!-- IF_PARALLEL&#45;&gt;LaunchParallelMemTableWriters -->
<g id="edge29" class="edge">
<title>IF_PARALLEL&#45;&gt;LaunchParallelMemTableWriters</title>
<path fill="none" stroke="#000000" d="M1126.4411,-462.3845C1135.8547,-463.3564 1145.4769,-464.3498 1155.1363,-465.3471"/>
<polygon fill="#000000" stroke="#000000" points="1154.9023,-468.8414 1165.2089,-466.387 1155.6212,-461.8784 1154.9023,-468.8414"/>
</g>
<!-- newest_writer_ -->
<g id="node29" class="node">
<title>newest_writer_</title>
<polygon fill="none" stroke="#000000" points="1067.476,-250 964.8677,-250 964.8677,-214 1067.476,-214 1067.476,-250"/>
<text text-anchor="middle" x="1016.1719" y="-227.8" font-family="Times,serif" font-size="14.00" fill="#000000">newest_writer_</text>
</g>
<!-- LinkOne&#45;&gt;newest_writer_ -->
<g id="edge33" class="edge">
<title>LinkOne&#45;&gt;newest_writer_</title>
<path fill="none" stroke="#000000" d="M802.5838,-226.7664C849.5078,-227.9162 910.0603,-229.3999 954.7021,-230.4938"/>
<polygon fill="#000000" stroke="#000000" points="954.7479,-233.9959 964.8307,-230.742 954.9194,-226.998 954.7479,-233.9959"/>
</g>
<!-- stall_cv_Wait -->
<g id="node30" class="node">
<title>stall_cv_Wait</title>
<polygon fill="none" stroke="#000000" points="1062.3103,-196 970.0335,-196 970.0335,-160 1062.3103,-160 1062.3103,-196"/>
<text text-anchor="middle" x="1016.1719" y="-173.8" font-family="Times,serif" font-size="14.00" fill="#000000">stall_cv_Wait</text>
</g>
<!-- LinkOne&#45;&gt;stall_cv_Wait -->
<g id="edge34" class="edge">
<title>LinkOne&#45;&gt;stall_cv_Wait</title>
<path fill="none" stroke="#000000" d="M802.5838,-213.1399C851.297,-205.1255 914.6977,-194.6947 959.7375,-187.2847"/>
<polygon fill="#000000" stroke="#000000" points="960.3281,-190.7347 969.6273,-185.6576 959.1917,-183.8275 960.3281,-190.7347"/>
</g>
<!-- SetState&#45;&gt;Writer -->
<g id="edge42" class="edge">
<title>SetState&#45;&gt;Writer</title>
<path fill="none" stroke="#000000" d="M1689.7017,-373.7971C1718.2314,-392.8151 1752.6154,-417.7974 1780.1494,-444 1789.9347,-453.3121 1799.6492,-463.1807 1809.1945,-473.3779"/>
<polygon fill="#000000" stroke="#000000" points="1806.7539,-475.8937 1816.1138,-480.8579 1811.8925,-471.1403 1806.7539,-475.8937"/>
</g>
<!-- StateCV_noitfy_one -->
<g id="node36" class="node">
<title>StateCV_noitfy_one</title>
<polygon fill="none" stroke="#000000" points="2021.4131,-357 1890.2197,-357 1890.2197,-321 2021.4131,-321 2021.4131,-357"/>
<text text-anchor="middle" x="1955.8164" y="-334.8" font-family="Times,serif" font-size="14.00" fill="#000000">StateCV_noitfy_one</text>
</g>
<!-- SetState&#45;&gt;StateCV_noitfy_one -->
<g id="edge43" class="edge">
<title>SetState&#45;&gt;StateCV_noitfy_one</title>
<path fill="none" stroke="#000000" d="M1732.1038,-339C1779.6481,-339 1835.8239,-339 1879.9891,-339"/>
<polygon fill="#000000" stroke="#000000" points="1880.0814,-342.5001 1890.0814,-339 1880.0814,-335.5001 1880.0814,-342.5001"/>
</g>
<!-- BlockingAwaitState&#45;&gt;Writer -->
<g id="edge39" class="edge">
<title>BlockingAwaitState&#45;&gt;Writer</title>
<path fill="none" stroke="#000000" d="M1679.0732,-489.0206C1708.5977,-501.4069 1747.5374,-518.9999 1780.1494,-538 1789.2364,-543.2942 1798.4327,-548.9458 1807.6063,-554.8139"/>
<polygon fill="#000000" stroke="#000000" points="1805.724,-557.7647 1816.0208,-560.2597 1809.5273,-551.888 1805.724,-557.7647"/>
</g>
<!-- CreateMutex -->
<g id="node34" class="node">
<title>CreateMutex</title>
<polygon fill="none" stroke="#000000" points="2000.3995,-449 1911.2334,-449 1911.2334,-413 2000.3995,-413 2000.3995,-449"/>
<text text-anchor="middle" x="1955.8164" y="-426.8" font-family="Times,serif" font-size="14.00" fill="#000000">CreateMutex</text>
</g>
<!-- BlockingAwaitState&#45;&gt;CreateMutex -->
<g id="edge40" class="edge">
<title>BlockingAwaitState&#45;&gt;CreateMutex</title>
<path fill="none" stroke="#000000" d="M1698.12,-463.0015C1757.5747,-455.6183 1844.9138,-444.7722 1901.0773,-437.7977"/>
<polygon fill="#000000" stroke="#000000" points="1901.6953,-441.2479 1911.1877,-436.5421 1900.8326,-434.3013 1901.6953,-441.2479"/>
</g>
<!-- StateCV_wait -->
<g id="node35" class="node">
<title>StateCV_wait</title>
<polygon fill="none" stroke="#000000" points="2225.8019,-357 2131.7098,-357 2131.7098,-321 2225.8019,-321 2225.8019,-357"/>
<text text-anchor="middle" x="2178.7559" y="-334.8" font-family="Times,serif" font-size="14.00" fill="#000000">StateCV_wait</text>
</g>
<!-- BlockingAwaitState&#45;&gt;StateCV_wait -->
<g id="edge41" class="edge">
<title>BlockingAwaitState&#45;&gt;StateCV_wait</title>
<path fill="none" stroke="#000000" d="M1674.9321,-452.9358C1711.3921,-437.6703 1766.3761,-416.3695 1816.1494,-404 1937.7428,-373.782 1973.3321,-393.8771 2095.4834,-366 2104.0958,-364.0345 2113.0901,-361.5696 2121.849,-358.9335"/>
<polygon fill="#000000" stroke="#000000" points="2123.0942,-362.2117 2131.6051,-355.9019 2121.0169,-355.527 2123.0942,-362.2117"/>
</g>
<!-- StateCV_noitfy_one&#45;&gt;StateCV_wait -->
<g id="edge52" class="edge">
<title>StateCV_noitfy_one&#45;&gt;StateCV_wait</title>
<path fill="none" stroke="#000000" d="M2021.4998,-339C2053.2337,-339 2090.9598,-339 2121.5052,-339"/>
<polygon fill="#000000" stroke="#000000" points="2121.5699,-342.5001 2131.5698,-339 2121.5698,-335.5001 2121.5699,-342.5001"/>
</g>
<!-- ExitAsMemTableWriter -->
<g id="node40" class="node">
<title>ExitAsMemTableWriter</title>
<polygon fill="none" stroke="#000000" points="1382.5604,-231 1230.9386,-231 1230.9386,-195 1382.5604,-195 1382.5604,-231"/>
<text text-anchor="middle" x="1306.7495" y="-208.8" font-family="Times,serif" font-size="14.00" fill="#000000">ExitAsMemTableWriter</text>
</g>
<!-- ExitAsMemTableWriter&#45;&gt;SetState -->
<g id="edge49" class="edge">
<title>ExitAsMemTableWriter&#45;&gt;SetState</title>
<path fill="none" stroke="#000000" d="M1382.4345,-225.9177C1404.9315,-230.7791 1429.4011,-237.0943 1451.2734,-245 1491.1075,-259.3978 1533.2863,-280.6935 1567.0427,-299.3762"/>
<polygon fill="#000000" stroke="#000000" points="1565.4458,-302.4932 1575.8828,-304.3154 1568.8601,-296.3824 1565.4458,-302.4932"/>
</g>
<!-- newest_memtable_writer_ -->
<g id="node41" class="node">
<title>newest_memtable_writer_</title>
<polygon fill="none" stroke="#000000" points="1715.7161,-231 1551.7068,-231 1551.7068,-195 1715.7161,-195 1715.7161,-231"/>
<text text-anchor="middle" x="1633.7114" y="-208.8" font-family="Times,serif" font-size="14.00" fill="#000000">newest_memtable_writer_</text>
</g>
<!-- ExitAsMemTableWriter&#45;&gt;newest_memtable_writer_ -->
<g id="edge50" class="edge">
<title>ExitAsMemTableWriter&#45;&gt;newest_memtable_writer_</title>
<path fill="none" stroke="#000000" d="M1382.583,-213C1429.9703,-213 1491.307,-213 1541.4993,-213"/>
<polygon fill="#000000" stroke="#000000" points="1541.7063,-216.5001 1551.7062,-213 1541.7062,-209.5001 1541.7063,-216.5001"/>
</g>
</g>
</svg>
