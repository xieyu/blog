<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: on_ready_change_peer Pages: 1 -->
<svg width="1311pt" height="861pt"
 viewBox="0.00 0.00 1311.00 860.68" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 856.68)">
<title>on_ready_change_peer</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-856.68 1307,-856.68 1307,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_Raft</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M287.5,-550.68C287.5,-550.68 827,-550.68 827,-550.68 833,-550.68 839,-556.68 839,-562.68 839,-562.68 839,-620.68 839,-620.68 839,-626.68 833,-632.68 827,-632.68 827,-632.68 287.5,-632.68 287.5,-632.68 281.5,-632.68 275.5,-626.68 275.5,-620.68 275.5,-620.68 275.5,-562.68 275.5,-562.68 275.5,-556.68 281.5,-550.68 287.5,-550.68"/>
<text text-anchor="middle" x="557.25" y="-612.68" font-family="Times,serif" font-size="20.00">Raft</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_StoreGroup</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M302,-460.68C302,-460.68 387,-460.68 387,-460.68 393,-460.68 399,-466.68 399,-472.68 399,-472.68 399,-530.68 399,-530.68 399,-536.68 393,-542.68 387,-542.68 387,-542.68 302,-542.68 302,-542.68 296,-542.68 290,-536.68 290,-530.68 290,-530.68 290,-472.68 290,-472.68 290,-466.68 296,-460.68 302,-460.68"/>
<text text-anchor="middle" x="344.5" y="-522.68" font-family="Times,serif" font-size="20.00">StoreGroup</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Peer</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M198,-160.68C198,-160.68 1283,-160.68 1283,-160.68 1289,-160.68 1295,-166.68 1295,-172.68 1295,-172.68 1295,-440.68 1295,-440.68 1295,-446.68 1289,-452.68 1283,-452.68 1283,-452.68 198,-452.68 198,-452.68 192,-452.68 186,-446.68 186,-440.68 186,-440.68 186,-172.68 186,-172.68 186,-166.68 192,-160.68 198,-160.68"/>
<text text-anchor="middle" x="740.5" y="-432.68" font-family="Times,serif" font-size="20.00">Peer</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_peer_heartbeats</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M910,-234.68C910,-234.68 1275,-234.68 1275,-234.68 1281,-234.68 1287,-240.68 1287,-246.68 1287,-246.68 1287,-358.68 1287,-358.68 1287,-364.68 1281,-370.68 1275,-370.68 1275,-370.68 910,-370.68 910,-370.68 904,-370.68 898,-364.68 898,-358.68 898,-358.68 898,-246.68 898,-246.68 898,-240.68 904,-234.68 910,-234.68"/>
<text text-anchor="middle" x="1092.5" y="-350.68" font-family="Times,serif" font-size="20.00">peer_heartbeats</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_PeerFsmDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-642.68C20,-642.68 1039.5,-642.68 1039.5,-642.68 1045.5,-642.68 1051.5,-648.68 1051.5,-654.68 1051.5,-654.68 1051.5,-832.68 1051.5,-832.68 1051.5,-838.68 1045.5,-844.68 1039.5,-844.68 1039.5,-844.68 20,-844.68 20,-844.68 14,-844.68 8,-838.68 8,-832.68 8,-832.68 8,-654.68 8,-654.68 8,-648.68 14,-642.68 20,-642.68"/>
<text text-anchor="middle" x="529.75" y="-824.68" font-family="Times,serif" font-size="20.00">PeerFsmDelegate</text>
</g>
<!-- assign_commit_groups -->
<g id="node1" class="node">
<title>assign_commit_groups</title>
<path fill="none" stroke="#1c2123" d="M670,-594.68C670,-594.68 551,-594.68 551,-594.68 545,-594.68 539,-588.68 539,-582.68 539,-582.68 539,-570.68 539,-570.68 539,-564.68 545,-558.68 551,-558.68 551,-558.68 670,-558.68 670,-558.68 676,-558.68 682,-564.68 682,-570.68 682,-570.68 682,-582.68 682,-582.68 682,-588.68 676,-594.68 670,-594.68"/>
<text text-anchor="middle" x="610.5" y="-572.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">assign_commit_groups</text>
</g>
<!-- raft_ping -->
<g id="node2" class="node">
<title>raft_ping</title>
<path fill="none" stroke="#1c2123" d="M819,-594.68C819,-594.68 777,-594.68 777,-594.68 771,-594.68 765,-588.68 765,-582.68 765,-582.68 765,-570.68 765,-570.68 765,-564.68 771,-558.68 777,-558.68 777,-558.68 819,-558.68 819,-558.68 825,-558.68 831,-564.68 831,-570.68 831,-570.68 831,-582.68 831,-582.68 831,-588.68 825,-594.68 819,-594.68"/>
<text text-anchor="middle" x="798" y="-572.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_ping</text>
</g>
<!-- apply_conf_change -->
<g id="node3" class="node">
<title>apply_conf_change</title>
<path fill="none" stroke="#1c2123" d="M393.5,-594.68C393.5,-594.68 295.5,-594.68 295.5,-594.68 289.5,-594.68 283.5,-588.68 283.5,-582.68 283.5,-582.68 283.5,-570.68 283.5,-570.68 283.5,-564.68 289.5,-558.68 295.5,-558.68 295.5,-558.68 393.5,-558.68 393.5,-558.68 399.5,-558.68 405.5,-564.68 405.5,-570.68 405.5,-570.68 405.5,-582.68 405.5,-582.68 405.5,-588.68 399.5,-594.68 393.5,-594.68"/>
<text text-anchor="middle" x="344.5" y="-572.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">apply_conf_change</text>
</g>
<!-- group_id -->
<g id="node4" class="node">
<title>group_id</title>
<path fill="none" stroke="#1c2123" d="M365,-504.68C365,-504.68 324,-504.68 324,-504.68 318,-504.68 312,-498.68 312,-492.68 312,-492.68 312,-480.68 312,-480.68 312,-474.68 318,-468.68 324,-468.68 324,-468.68 365,-468.68 365,-468.68 371,-468.68 377,-474.68 377,-480.68 377,-480.68 377,-492.68 377,-492.68 377,-498.68 371,-504.68 365,-504.68"/>
<text text-anchor="middle" x="344.5" y="-482.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">group_id</text>
</g>
<!-- group_id&#45;&gt;assign_commit_groups -->
<g id="edge27" class="edge">
<title>group_id&#45;&gt;assign_commit_groups</title>
<path fill="none" stroke="#666666" d="M377.08,-497.45C418.83,-511.68 493.32,-537.07 546.73,-555.28"/>
<polygon fill="#666666" stroke="#666666" points="545.85,-558.68 556.44,-558.59 548.1,-552.05 545.85,-558.68"/>
</g>
<!-- peer_heartbeats -->
<g id="node5" class="node">
<title>peer_heartbeats</title>
<path fill="none" stroke="#1c2123" d="M1103,-243.68C1103,-243.68 1267,-243.68 1267,-243.68 1273,-243.68 1279,-249.68 1279,-255.68 1279,-255.68 1279,-315.68 1279,-315.68 1279,-321.68 1273,-327.68 1267,-327.68 1267,-327.68 1103,-327.68 1103,-327.68 1097,-327.68 1091,-321.68 1091,-315.68 1091,-315.68 1091,-255.68 1091,-255.68 1091,-249.68 1097,-243.68 1103,-243.68"/>
<text text-anchor="middle" x="1185" y="-312.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">peer_heartbeats</text>
<polyline fill="none" stroke="#1c2123" points="1091,-304.68 1279,-304.68 "/>
<text text-anchor="start" x="1099" y="-289.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">HashMap&lt;u64, Instant&gt;</text>
<polyline fill="none" stroke="#1c2123" points="1091,-281.68 1279,-281.68 "/>
<text text-anchor="start" x="1099" y="-266.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">Record the last instant of</text>
<text text-anchor="start" x="1099" y="-251.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> each peer&#39;s heartbeat response.</text>
</g>
<!-- peers_start_pending_time -->
<g id="node6" class="node">
<title>peers_start_pending_time</title>
<path fill="#feed9b" stroke="#f7e495" d="M206,-315.18C206,-315.18 483,-315.18 483,-315.18 489,-315.18 495,-321.18 495,-327.18 495,-327.18 495,-402.18 495,-402.18 495,-408.18 489,-414.18 483,-414.18 483,-414.18 206,-414.18 206,-414.18 200,-414.18 194,-408.18 194,-402.18 194,-402.18 194,-327.18 194,-327.18 194,-321.18 200,-315.18 206,-315.18"/>
<text text-anchor="middle" x="344.5" y="-398.98" font-family="Times,serif" font-size="14.00" fill="#40575d">peers_start_pending_time</text>
<polyline fill="none" stroke="#f7e495" points="194,-391.18 495,-391.18 "/>
<text text-anchor="start" x="202" y="-375.98" font-family="Times,serif" font-size="14.00" fill="#40575d">Vec&lt;(u64, Instant)&gt;</text>
<polyline fill="none" stroke="#f7e495" points="194,-368.18 495,-368.18 "/>
<text text-anchor="start" x="202" y="-352.98" font-family="Times,serif" font-size="14.00" fill="#40575d">Record the instants of peers </text>
<text text-anchor="start" x="202" y="-337.98" font-family="Times,serif" font-size="14.00" fill="#40575d"> being added into the configuration.</text>
<text text-anchor="start" x="202" y="-322.98" font-family="Times,serif" font-size="14.00" fill="#40575d"> Remove them after they are not pending any more.</text>
</g>
<!-- check_peers -->
<g id="node7" class="node">
<title>check_peers</title>
<path fill="none" stroke="#1c2123" d="M1010,-414.68C1010,-414.68 951,-414.68 951,-414.68 945,-414.68 939,-408.68 939,-402.68 939,-402.68 939,-390.68 939,-390.68 939,-384.68 945,-378.68 951,-378.68 951,-378.68 1010,-378.68 1010,-378.68 1016,-378.68 1022,-384.68 1022,-390.68 1022,-390.68 1022,-402.68 1022,-402.68 1022,-408.68 1016,-414.68 1010,-414.68"/>
<text text-anchor="middle" x="980.5" y="-392.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">check_peers</text>
</g>
<!-- check_peers&#45;&gt;peer_heartbeats -->
<g id="edge1" class="edge">
<title>check_peers&#45;&gt;peer_heartbeats</title>
<path fill="none" stroke="#666666" d="M1022.03,-387.02C1032.99,-383.74 1044.67,-379.63 1055,-374.68 1078.29,-363.51 1102.04,-348.38 1122.71,-333.77"/>
<polygon fill="#666666" stroke="#666666" points="1124.99,-336.45 1131.07,-327.78 1120.9,-330.76 1124.99,-336.45"/>
</g>
<!-- collect_down_peers -->
<g id="node8" class="node">
<title>collect_down_peers</title>
<path fill="none" stroke="#1c2123" d="M1031,-224.68C1031,-224.68 930,-224.68 930,-224.68 924,-224.68 918,-218.68 918,-212.68 918,-212.68 918,-200.68 918,-200.68 918,-194.68 924,-188.68 930,-188.68 930,-188.68 1031,-188.68 1031,-188.68 1037,-188.68 1043,-194.68 1043,-200.68 1043,-200.68 1043,-212.68 1043,-212.68 1043,-218.68 1037,-224.68 1031,-224.68"/>
<text text-anchor="middle" x="980.5" y="-202.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">collect_down_peers</text>
</g>
<!-- collect_down_peers&#45;&gt;peer_heartbeats -->
<g id="edge2" class="edge">
<title>collect_down_peers&#45;&gt;peer_heartbeats</title>
<path fill="none" stroke="#666666" d="M1038.65,-224.8C1044.2,-226.72 1049.72,-228.7 1055,-230.68 1063.54,-233.89 1072.34,-237.33 1081.14,-240.88"/>
<polygon fill="#666666" stroke="#666666" points="1080.1,-244.23 1090.68,-244.76 1082.74,-237.75 1080.1,-244.23"/>
</g>
<!-- heartbeat_pd -->
<g id="node9" class="node">
<title>heartbeat_pd</title>
<path fill="none" stroke="#1c2123" d="M738,-172.18C738,-172.18 858,-172.18 858,-172.18 864,-172.18 870,-178.18 870,-184.18 870,-184.18 870,-221.18 870,-221.18 870,-227.18 864,-233.18 858,-233.18 858,-233.18 738,-233.18 738,-233.18 732,-233.18 726,-227.18 726,-221.18 726,-221.18 726,-184.18 726,-184.18 726,-178.18 732,-172.18 738,-172.18"/>
<text text-anchor="middle" x="798" y="-217.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">heartbeat_pd</text>
<polyline fill="none" stroke="#1c2123" points="726,-210.18 870,-210.18 "/>
<text text-anchor="start" x="734" y="-194.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果是leader</text>
<text text-anchor="start" x="734" y="-179.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 向pd上报Region信息</text>
</g>
<!-- heartbeat_pd&#45;&gt;peer_heartbeats -->
<g id="edge3" class="edge">
<title>heartbeat_pd&#45;&gt;peer_heartbeats</title>
<path fill="none" stroke="#666666" d="M870.04,-180.48C922.6,-167.79 995.14,-158.24 1055,-179.68 1087.13,-191.19 1117,-214.54 1139.89,-236.4"/>
<polygon fill="#666666" stroke="#666666" points="1137.47,-238.93 1147.07,-243.43 1142.37,-233.93 1137.47,-238.93"/>
</g>
<!-- heartbeat_pd&#45;&gt;collect_down_peers -->
<g id="edge4" class="edge">
<title>heartbeat_pd&#45;&gt;collect_down_peers</title>
<path fill="none" stroke="#666666" d="M870.08,-204.25C882.41,-204.53 895.24,-204.81 907.6,-205.09"/>
<polygon fill="#666666" stroke="#666666" points="907.76,-208.59 917.84,-205.31 907.92,-201.59 907.76,-208.59"/>
</g>
<!-- ping -->
<g id="node10" class="node">
<title>ping</title>
<path fill="none" stroke="#1c2123" d="M289.5,-235.18C289.5,-235.18 399.5,-235.18 399.5,-235.18 405.5,-235.18 411.5,-241.18 411.5,-247.18 411.5,-247.18 411.5,-284.18 411.5,-284.18 411.5,-290.18 405.5,-296.18 399.5,-296.18 399.5,-296.18 289.5,-296.18 289.5,-296.18 283.5,-296.18 277.5,-290.18 277.5,-284.18 277.5,-284.18 277.5,-247.18 277.5,-247.18 277.5,-241.18 283.5,-235.18 289.5,-235.18"/>
<text text-anchor="middle" x="344.5" y="-280.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">ping</text>
<polyline fill="none" stroke="#1c2123" points="277.5,-273.18 411.5,-273.18 "/>
<text text-anchor="start" x="285.5" y="-257.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">Pings if followers are</text>
<text text-anchor="start" x="285.5" y="-242.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> still connected</text>
</g>
<!-- ping&#45;&gt;raft_ping -->
<g id="edge5" class="edge">
<title>ping&#45;&gt;raft_ping</title>
<path fill="none" stroke="#666666" d="M411.5,-270.98C439.82,-276.17 471.68,-286.24 495,-305.68 523.71,-329.61 507.2,-352.86 531,-381.68 595.76,-460.1 698.7,-523.57 755.67,-555.08"/>
<polygon fill="#666666" stroke="#666666" points="754.29,-558.32 764.74,-560.05 757.65,-552.18 754.29,-558.32"/>
</g>
<!-- is_leader -->
<g id="node11" class="node">
<title>is_leader</title>
<path fill="none" stroke="#1c2123" d="M631,-276.68C631,-276.68 590,-276.68 590,-276.68 584,-276.68 578,-270.68 578,-264.68 578,-264.68 578,-252.68 578,-252.68 578,-246.68 584,-240.68 590,-240.68 590,-240.68 631,-240.68 631,-240.68 637,-240.68 643,-246.68 643,-252.68 643,-252.68 643,-264.68 643,-264.68 643,-270.68 637,-276.68 631,-276.68"/>
<text text-anchor="middle" x="610.5" y="-254.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">is_leader</text>
</g>
<!-- ping&#45;&gt;is_leader -->
<g id="edge6" class="edge">
<title>ping&#45;&gt;is_leader</title>
<path fill="none" stroke="#666666" d="M411.78,-263.92C460.78,-262.62 526,-260.89 567.88,-259.78"/>
<polygon fill="#666666" stroke="#666666" points="568.09,-263.28 578,-259.51 567.91,-256.28 568.09,-263.28"/>
</g>
<!-- is_leader&#45;&gt;raft_ping -->
<g id="edge7" class="edge">
<title>is_leader&#45;&gt;raft_ping</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M639.18,-276.73C656.16,-289.15 677.07,-307.09 690,-327.68 721.67,-378.08 702.64,-401.93 726,-456.68 740.4,-490.44 762.65,-526.31 778.4,-549.94"/>
<polygon fill="green" stroke="green" points="775.59,-552.04 784.09,-558.37 781.4,-548.12 775.59,-552.04"/>
</g>
<!-- is_leader&#45;&gt;heartbeat_pd -->
<g id="edge28" class="edge">
<title>is_leader&#45;&gt;heartbeat_pd</title>
<path fill="none" stroke="#666666" d="M643.39,-249.05C663.5,-242.98 690.46,-234.84 716.17,-227.08"/>
<polygon fill="#666666" stroke="#666666" points="717.39,-230.37 725.95,-224.13 715.36,-223.67 717.39,-230.37"/>
</g>
<!-- has_ready -->
<g id="node12" class="node">
<title>has_ready</title>
<path fill="none" stroke="#1c2123" d="M368,-216.68C368,-216.68 321,-216.68 321,-216.68 315,-216.68 309,-210.68 309,-204.68 309,-204.68 309,-192.68 309,-192.68 309,-186.68 315,-180.68 321,-180.68 321,-180.68 368,-180.68 368,-180.68 374,-180.68 380,-186.68 380,-192.68 380,-192.68 380,-204.68 380,-204.68 380,-210.68 374,-216.68 368,-216.68"/>
<text text-anchor="middle" x="344.5" y="-194.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">has_ready</text>
</g>
<!-- insert_peer_cache -->
<g id="node13" class="node">
<title>insert_peer_cache</title>
<path fill="none" stroke="#1c2123" d="M655.5,-372.68C655.5,-372.68 565.5,-372.68 565.5,-372.68 559.5,-372.68 553.5,-366.68 553.5,-360.68 553.5,-360.68 553.5,-348.68 553.5,-348.68 553.5,-342.68 559.5,-336.68 565.5,-336.68 565.5,-336.68 655.5,-336.68 655.5,-336.68 661.5,-336.68 667.5,-342.68 667.5,-348.68 667.5,-348.68 667.5,-360.68 667.5,-360.68 667.5,-366.68 661.5,-372.68 655.5,-372.68"/>
<text text-anchor="middle" x="610.5" y="-350.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">insert_peer_cache</text>
</g>
<!-- peer_cache -->
<g id="node14" class="node">
<title>peer_cache</title>
<path fill="none" stroke="#1c2123" d="M824.5,-307.68C824.5,-307.68 771.5,-307.68 771.5,-307.68 765.5,-307.68 759.5,-301.68 759.5,-295.68 759.5,-295.68 759.5,-283.68 759.5,-283.68 759.5,-277.68 765.5,-271.68 771.5,-271.68 771.5,-271.68 824.5,-271.68 824.5,-271.68 830.5,-271.68 836.5,-277.68 836.5,-283.68 836.5,-283.68 836.5,-295.68 836.5,-295.68 836.5,-301.68 830.5,-307.68 824.5,-307.68"/>
<text text-anchor="middle" x="798" y="-285.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">peer_cache</text>
</g>
<!-- insert_peer_cache&#45;&gt;peer_cache -->
<g id="edge8" class="edge">
<title>insert_peer_cache&#45;&gt;peer_cache</title>
<path fill="none" stroke="#666666" d="M663.17,-336.57C690.26,-327.08 723.22,-315.53 749.64,-306.27"/>
<polygon fill="#666666" stroke="#666666" points="751.14,-309.46 759.42,-302.85 748.83,-302.85 751.14,-309.46"/>
</g>
<!-- remove_peer_from_cache -->
<g id="node15" class="node">
<title>remove_peer_from_cache</title>
<path fill="none" stroke="#1c2123" d="M678,-216.68C678,-216.68 543,-216.68 543,-216.68 537,-216.68 531,-210.68 531,-204.68 531,-204.68 531,-192.68 531,-192.68 531,-186.68 537,-180.68 543,-180.68 543,-180.68 678,-180.68 678,-180.68 684,-180.68 690,-186.68 690,-192.68 690,-192.68 690,-204.68 690,-204.68 690,-210.68 684,-216.68 678,-216.68"/>
<text text-anchor="middle" x="610.5" y="-194.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">remove_peer_from_cache</text>
</g>
<!-- remove_peer_from_cache&#45;&gt;peer_cache -->
<g id="edge9" class="edge">
<title>remove_peer_from_cache&#45;&gt;peer_cache</title>
<path fill="none" stroke="#666666" d="M656.67,-216.77C667.67,-221.42 679.34,-226.56 690,-231.68 712.47,-242.46 736.94,-255.62 756.81,-266.67"/>
<polygon fill="#666666" stroke="#666666" points="755.15,-269.76 765.59,-271.59 758.57,-263.65 755.15,-269.76"/>
</g>
<!-- peer_heartbeats_insert -->
<g id="node16" class="node">
<title>peer_heartbeats_insert</title>
<path fill="none" stroke="#1c2123" d="M1037.5,-278.68C1037.5,-278.68 923.5,-278.68 923.5,-278.68 917.5,-278.68 911.5,-272.68 911.5,-266.68 911.5,-266.68 911.5,-254.68 911.5,-254.68 911.5,-248.68 917.5,-242.68 923.5,-242.68 923.5,-242.68 1037.5,-242.68 1037.5,-242.68 1043.5,-242.68 1049.5,-248.68 1049.5,-254.68 1049.5,-254.68 1049.5,-266.68 1049.5,-266.68 1049.5,-272.68 1043.5,-278.68 1037.5,-278.68"/>
<text text-anchor="middle" x="980.5" y="-256.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">peer_heartbeats_insert</text>
</g>
<!-- peer_heartbeats_insert&#45;&gt;peer_heartbeats -->
<g id="edge10" class="edge">
<title>peer_heartbeats_insert&#45;&gt;peer_heartbeats</title>
<path fill="none" stroke="#666666" d="M1049.77,-269.11C1059.78,-270.34 1070.27,-271.64 1080.79,-272.94"/>
<polygon fill="#666666" stroke="#666666" points="1080.51,-276.43 1090.86,-274.18 1081.37,-269.48 1080.51,-276.43"/>
</g>
<!-- peer_heartbeats_remove -->
<g id="node17" class="node">
<title>peer_heartbeats_remove</title>
<path fill="none" stroke="#1c2123" d="M1043,-332.68C1043,-332.68 918,-332.68 918,-332.68 912,-332.68 906,-326.68 906,-320.68 906,-320.68 906,-308.68 906,-308.68 906,-302.68 912,-296.68 918,-296.68 918,-296.68 1043,-296.68 1043,-296.68 1049,-296.68 1055,-302.68 1055,-308.68 1055,-308.68 1055,-320.68 1055,-320.68 1055,-326.68 1049,-332.68 1043,-332.68"/>
<text text-anchor="middle" x="980.5" y="-310.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">peer_heartbeats_remove</text>
</g>
<!-- peer_heartbeats_remove&#45;&gt;peer_heartbeats -->
<g id="edge11" class="edge">
<title>peer_heartbeats_remove&#45;&gt;peer_heartbeats</title>
<path fill="none" stroke="#666666" d="M1055.18,-304.13C1063.47,-302.94 1072.03,-301.71 1080.61,-300.49"/>
<polygon fill="#666666" stroke="#666666" points="1081.27,-303.93 1090.67,-299.05 1080.28,-297 1081.27,-303.93"/>
</g>
<!-- on_ready_change_peer -->
<g id="node18" class="node">
<title>on_ready_change_peer</title>
<path fill="none" stroke="#1c2123" d="M146,-686.68C146,-686.68 28,-686.68 28,-686.68 22,-686.68 16,-680.68 16,-674.68 16,-674.68 16,-662.68 16,-662.68 16,-656.68 22,-650.68 28,-650.68 28,-650.68 146,-650.68 146,-650.68 152,-650.68 158,-656.68 158,-662.68 158,-662.68 158,-674.68 158,-674.68 158,-680.68 152,-686.68 146,-686.68"/>
<text text-anchor="middle" x="87" y="-664.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_ready_change_peer</text>
</g>
<!-- on_ready_change_peer&#45;&gt;assign_commit_groups -->
<g id="edge12" class="edge">
<title>on_ready_change_peer&#45;&gt;assign_commit_groups</title>
<path fill="none" stroke="#666666" d="M150.97,-650.64C162.56,-647.71 174.6,-644.9 186,-642.68 321.87,-616.21 358.78,-628.27 495,-603.68 506.04,-601.69 517.61,-599.31 528.98,-596.8"/>
<polygon fill="#666666" stroke="#666666" points="529.91,-600.18 538.89,-594.57 528.37,-593.35 529.91,-600.18"/>
</g>
<!-- on_ready_change_peer&#45;&gt;apply_conf_change -->
<g id="edge13" class="edge">
<title>on_ready_change_peer&#45;&gt;apply_conf_change</title>
<path fill="none" stroke="#666666" d="M112.11,-650.6C131.22,-637.11 159.08,-619.27 186,-608.68 213.63,-597.8 245.51,-590.44 273.33,-585.55"/>
<polygon fill="#666666" stroke="#666666" points="274.1,-588.97 283.38,-583.86 272.94,-582.07 274.1,-588.97"/>
</g>
<!-- on_ready_change_peer&#45;&gt;group_id -->
<g id="edge14" class="edge">
<title>on_ready_change_peer&#45;&gt;group_id</title>
<path fill="none" stroke="#666666" d="M98.33,-650.41C114.07,-624.08 146.46,-575.45 186,-546.68 221.06,-521.17 268.3,-505.09 301.87,-496.07"/>
<polygon fill="#666666" stroke="#666666" points="303.02,-499.39 311.82,-493.49 301.27,-492.61 303.02,-499.39"/>
</g>
<!-- on_ready_change_peer&#45;&gt;peer_heartbeats -->
<g id="edge15" class="edge">
<title>on_ready_change_peer&#45;&gt;peer_heartbeats</title>
<path fill="none" stroke="#666666" d="M88.04,-650.57C88.62,-558.62 96.28,-144.72 186,-63.68 325.92,62.7 420.95,-38.68 609.5,-38.68 609.5,-38.68 609.5,-38.68 799,-38.68 943.62,-38.68 1077.32,-163.68 1142.44,-235.83"/>
<polygon fill="#666666" stroke="#666666" points="1140.02,-238.37 1149.29,-243.5 1145.24,-233.71 1140.02,-238.37"/>
</g>
<!-- on_ready_change_peer&#45;&gt;peers_start_pending_time -->
<g id="edge16" class="edge">
<title>on_ready_change_peer&#45;&gt;peers_start_pending_time</title>
<path fill="none" stroke="#666666" d="M92.42,-650.41C102.76,-610.9 131.87,-516.25 186,-456.68 198.4,-443.03 213.3,-430.84 228.93,-420.14"/>
<polygon fill="#666666" stroke="#666666" points="231.27,-422.78 237.68,-414.35 227.41,-416.95 231.27,-422.78"/>
</g>
<!-- on_ready_change_peer&#45;&gt;heartbeat_pd -->
<g id="edge17" class="edge">
<title>on_ready_change_peer&#45;&gt;heartbeat_pd</title>
<path fill="none" stroke="#666666" d="M88.1,-650.39C88.99,-560.29 97.95,-165.06 186,-90.68 238.46,-46.37 427.41,-78.55 495,-90.68 576.76,-105.35 665.33,-140.71 725.27,-167.81"/>
<polygon fill="#666666" stroke="#666666" points="724.09,-171.11 734.64,-172.08 726.99,-164.74 724.09,-171.11"/>
</g>
<!-- on_ready_change_peer&#45;&gt;ping -->
<g id="edge18" class="edge">
<title>on_ready_change_peer&#45;&gt;ping</title>
<path fill="none" stroke="#666666" d="M90.49,-650.36C99.89,-583.74 135.31,-355.61 186,-305.68 207.48,-284.52 238.49,-274.05 267.31,-269.04"/>
<polygon fill="#666666" stroke="#666666" points="268.05,-272.47 277.4,-267.49 266.99,-265.55 268.05,-272.47"/>
</g>
<!-- on_ready_change_peer&#45;&gt;is_leader -->
<g id="edge19" class="edge">
<title>on_ready_change_peer&#45;&gt;is_leader</title>
<path fill="none" stroke="#666666" d="M88.63,-650.53C91.91,-568.58 109.83,-234.3 186,-171.68 239.04,-128.07 434.46,-139.28 495,-171.68 520.43,-185.29 508.76,-207.31 531,-225.68 541.81,-234.61 555.38,-241.45 568.19,-246.52"/>
<polygon fill="#666666" stroke="#666666" points="567.18,-249.88 577.77,-250.07 569.6,-243.32 567.18,-249.88"/>
</g>
<!-- on_ready_change_peer&#45;&gt;has_ready -->
<g id="edge20" class="edge">
<title>on_ready_change_peer&#45;&gt;has_ready</title>
<path fill="none" stroke="#666666" d="M89.38,-650.5C95.49,-574.85 122.71,-286.01 186,-225.68 215.7,-197.37 263.65,-192.76 298.85,-193.91"/>
<polygon fill="#666666" stroke="#666666" points="298.72,-197.41 308.88,-194.41 299.06,-190.42 298.72,-197.41"/>
</g>
<!-- on_ready_change_peer&#45;&gt;remove_peer_from_cache -->
<g id="edge21" class="edge">
<title>on_ready_change_peer&#45;&gt;remove_peer_from_cache</title>
<path fill="none" stroke="#666666" d="M88.4,-650.49C90.67,-565.2 104.99,-206.09 186,-138.68 291.57,-50.84 361.65,-105.86 495,-138.68 523.73,-145.75 553.24,-161.45 575.1,-175.02"/>
<polygon fill="#666666" stroke="#666666" points="573.36,-178.06 583.68,-180.48 577.12,-172.16 573.36,-178.06"/>
</g>
<!-- update_region -->
<g id="node19" class="node">
<title>update_region</title>
<path fill="none" stroke="#1c2123" d="M265.5,-651.68C265.5,-651.68 423.5,-651.68 423.5,-651.68 429.5,-651.68 435.5,-657.68 435.5,-663.68 435.5,-663.68 435.5,-685.68 435.5,-685.68 435.5,-691.68 429.5,-697.68 423.5,-697.68 423.5,-697.68 265.5,-697.68 265.5,-697.68 259.5,-697.68 253.5,-691.68 253.5,-685.68 253.5,-685.68 253.5,-663.68 253.5,-663.68 253.5,-657.68 259.5,-651.68 265.5,-651.68"/>
<text text-anchor="middle" x="344.5" y="-682.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">update_region</text>
<polyline fill="none" stroke="#1c2123" points="253.5,-674.68 435.5,-674.68 "/>
<text text-anchor="start" x="261.5" y="-659.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">更新store_meta的region信息</text>
</g>
<!-- on_ready_change_peer&#45;&gt;update_region -->
<g id="edge22" class="edge">
<title>on_ready_change_peer&#45;&gt;update_region</title>
<path fill="none" stroke="#666666" d="M158.15,-670.33C184.34,-670.94 214.6,-671.65 242.99,-672.32"/>
<polygon fill="#666666" stroke="#666666" points="243.27,-675.83 253.35,-672.56 243.43,-668.83 243.27,-675.83"/>
</g>
<!-- become_follower -->
<g id="node20" class="node">
<title>become_follower</title>
<path fill="none" stroke="#1c2123" d="M388.5,-752.68C388.5,-752.68 300.5,-752.68 300.5,-752.68 294.5,-752.68 288.5,-746.68 288.5,-740.68 288.5,-740.68 288.5,-728.68 288.5,-728.68 288.5,-722.68 294.5,-716.68 300.5,-716.68 300.5,-716.68 388.5,-716.68 388.5,-716.68 394.5,-716.68 400.5,-722.68 400.5,-728.68 400.5,-728.68 400.5,-740.68 400.5,-740.68 400.5,-746.68 394.5,-752.68 388.5,-752.68"/>
<text text-anchor="middle" x="344.5" y="-730.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">become_follower</text>
</g>
<!-- on_ready_change_peer&#45;&gt;become_follower -->
<g id="edge23" class="edge">
<title>on_ready_change_peer&#45;&gt;become_follower</title>
<path fill="none" stroke="#666666" d="M127.87,-686.74C145.41,-694.11 166.43,-702.17 186,-707.68 215.86,-716.08 249.68,-722.29 278.31,-726.63"/>
<polygon fill="#666666" stroke="#666666" points="277.8,-730.09 288.21,-728.08 278.82,-723.17 277.8,-730.09"/>
</g>
<!-- register_raft_base_tick -->
<g id="node21" class="node">
<title>register_raft_base_tick</title>
<path fill="none" stroke="#1c2123" d="M402.5,-806.68C402.5,-806.68 286.5,-806.68 286.5,-806.68 280.5,-806.68 274.5,-800.68 274.5,-794.68 274.5,-794.68 274.5,-782.68 274.5,-782.68 274.5,-776.68 280.5,-770.68 286.5,-770.68 286.5,-770.68 402.5,-770.68 402.5,-770.68 408.5,-770.68 414.5,-776.68 414.5,-782.68 414.5,-782.68 414.5,-794.68 414.5,-794.68 414.5,-800.68 408.5,-806.68 402.5,-806.68"/>
<text text-anchor="middle" x="344.5" y="-784.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">register_raft_base_tick</text>
</g>
<!-- on_ready_change_peer&#45;&gt;register_raft_base_tick -->
<g id="edge24" class="edge">
<title>on_ready_change_peer&#45;&gt;register_raft_base_tick</title>
<path fill="none" stroke="#666666" d="M101.38,-686.69C118.46,-708.25 150.14,-743.71 186,-761.68 209.98,-773.69 238.3,-780.48 264.28,-784.28"/>
<polygon fill="#666666" stroke="#666666" points="264.1,-787.79 274.48,-785.64 265.03,-780.85 264.1,-787.79"/>
</g>
<!-- update_region&#45;&gt;insert_peer_cache -->
<g id="edge29" class="edge">
<title>update_region&#45;&gt;insert_peer_cache</title>
<path fill="none" stroke="#666666" d="M435.53,-666.04C456.95,-660.36 478.38,-651.24 495,-636.68 527.4,-608.29 514.85,-586.62 531,-546.68 554.63,-488.24 582.65,-419.95 598,-382.61"/>
<polygon fill="#666666" stroke="#666666" points="601.42,-383.51 601.99,-372.93 594.94,-380.84 601.42,-383.51"/>
</g>
<!-- on_raft_gc_log_tick -->
<g id="node22" class="node">
<title>on_raft_gc_log_tick</title>
<path fill="none" stroke="#1c2123" d="M1031.5,-686.68C1031.5,-686.68 929.5,-686.68 929.5,-686.68 923.5,-686.68 917.5,-680.68 917.5,-674.68 917.5,-674.68 917.5,-662.68 917.5,-662.68 917.5,-656.68 923.5,-650.68 929.5,-650.68 929.5,-650.68 1031.5,-650.68 1031.5,-650.68 1037.5,-650.68 1043.5,-656.68 1043.5,-662.68 1043.5,-662.68 1043.5,-674.68 1043.5,-674.68 1043.5,-680.68 1037.5,-686.68 1031.5,-686.68"/>
<text text-anchor="middle" x="980.5" y="-664.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_raft_gc_log_tick</text>
</g>
<!-- on_raft_gc_log_tick&#45;&gt;peer_heartbeats -->
<g id="edge25" class="edge">
<title>on_raft_gc_log_tick&#45;&gt;peer_heartbeats</title>
<path fill="none" stroke="#666666" d="M991.13,-650.46C1020.77,-594.4 1111.4,-422.99 1157.08,-336.59"/>
<polygon fill="#666666" stroke="#666666" points="1160.18,-338.23 1161.76,-327.75 1153.99,-334.95 1160.18,-338.23"/>
</g>
<!-- on_pd_heartbeat_tick -->
<g id="node23" class="node">
<title>on_pd_heartbeat_tick</title>
<path fill="none" stroke="#1c2123" d="M853,-686.68C853,-686.68 743,-686.68 743,-686.68 737,-686.68 731,-680.68 731,-674.68 731,-674.68 731,-662.68 731,-662.68 731,-656.68 737,-650.68 743,-650.68 743,-650.68 853,-650.68 853,-650.68 859,-650.68 865,-656.68 865,-662.68 865,-662.68 865,-674.68 865,-674.68 865,-680.68 859,-686.68 853,-686.68"/>
<text text-anchor="middle" x="798" y="-664.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_pd_heartbeat_tick</text>
</g>
<!-- on_pd_heartbeat_tick&#45;&gt;check_peers -->
<g id="edge26" class="edge">
<title>on_pd_heartbeat_tick&#45;&gt;check_peers</title>
<path fill="none" stroke="#666666" d="M851.11,-650.59C857.99,-646.72 864.54,-642.12 870,-636.68 931.39,-575.57 961.84,-473.77 973.55,-424.75"/>
<polygon fill="#666666" stroke="#666666" points="977,-425.38 975.84,-414.85 970.18,-423.81 977,-425.38"/>
</g>
</g>
</svg>
