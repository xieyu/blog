<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: HashAggExec_Flow Pages: 1 -->
<svg width="2695pt" height="816pt"
 viewBox="0.00 0.00 2695.00 816.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 812)">
<title>HashAggExec_Flow</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-812 2691,-812 2691,4 -4,4"/>
<!-- af_UpdatePartialResult -->
<g id="node1" class="node">
<title>af_UpdatePartialResult</title>
<polygon fill="#23689b" stroke="black" points="1234.5,-521 1234.5,-567 1359.5,-567 1359.5,-521 1234.5,-521"/>
<text text-anchor="middle" x="1297" y="-551.8" font-family="Times,serif" font-size="14.00" fill="white">UpdatePartialResult</text>
<polyline fill="none" stroke="black" points="1234.5,-544 1359.5,-544 "/>
<text text-anchor="start" x="1242.5" y="-528.8" font-family="Times,serif" font-size="14.00" fill="white">AggFunc接口函数</text>
</g>
<!-- AllocPartialResult -->
<g id="node2" class="node">
<title>AllocPartialResult</title>
<polygon fill="#23689b" stroke="black" points="1753.5,-521 1753.5,-567 1877.5,-567 1877.5,-521 1753.5,-521"/>
<text text-anchor="middle" x="1815.5" y="-551.8" font-family="Times,serif" font-size="14.00" fill="white">AllocPartialResult</text>
<polyline fill="none" stroke="black" points="1753.5,-544 1877.5,-544 "/>
<text text-anchor="start" x="1761.5" y="-528.8" font-family="Times,serif" font-size="14.00" fill="white">AggFunc接口函数</text>
</g>
<!-- MergePartialResult -->
<g id="node3" class="node">
<title>MergePartialResult</title>
<polygon fill="#23689b" stroke="black" points="1487,-222 1487,-268 1611,-268 1611,-222 1487,-222"/>
<text text-anchor="middle" x="1549" y="-252.8" font-family="Times,serif" font-size="14.00" fill="white">MergePartialResult</text>
<polyline fill="none" stroke="black" points="1487,-245 1611,-245 "/>
<text text-anchor="start" x="1495" y="-229.8" font-family="Times,serif" font-size="14.00" fill="white">AggFunc接口函数</text>
</g>
<!-- AppendFinalResult2Chunk -->
<g id="node4" class="node">
<title>AppendFinalResult2Chunk</title>
<polygon fill="#23689b" stroke="black" points="1467,-157 1467,-203 1631,-203 1631,-157 1467,-157"/>
<text text-anchor="middle" x="1549" y="-187.8" font-family="Times,serif" font-size="14.00" fill="white">AppendFinalResult2Chunk</text>
<polyline fill="none" stroke="black" points="1467,-180 1631,-180 "/>
<text text-anchor="start" x="1475" y="-164.8" font-family="Times,serif" font-size="14.00" fill="white">AggFunc接口函数</text>
</g>
<!-- Next -->
<g id="node5" class="node">
<title>Next</title>
<polygon fill="none" stroke="black" points="54,-115 0,-115 0,-79 54,-79 54,-115"/>
<text text-anchor="middle" x="27" y="-93.3" font-family="Times,serif" font-size="14.00">Next</text>
</g>
<!-- parallelExec -->
<g id="node6" class="node">
<title>parallelExec</title>
<polygon fill="none" stroke="black" points="175,-115 91,-115 91,-79 175,-79 175,-115"/>
<text text-anchor="middle" x="133" y="-93.3" font-family="Times,serif" font-size="14.00">parallelExec</text>
</g>
<!-- Next&#45;&gt;parallelExec -->
<g id="edge1" class="edge">
<title>Next&#45;&gt;parallelExec</title>
<path fill="none" stroke="#666666" d="M54.24,-97C62.29,-97 71.43,-97 80.55,-97"/>
<polygon fill="#666666" stroke="#666666" points="80.78,-100.5 90.78,-97 80.78,-93.5 80.78,-100.5"/>
</g>
<!-- prepare4ParallelExec -->
<g id="node7" class="node">
<title>prepare4ParallelExec</title>
<polygon fill="none" stroke="black" points="212,-466 212,-542 431,-542 431,-466 212,-466"/>
<text text-anchor="middle" x="321.5" y="-526.8" font-family="Times,serif" font-size="14.00">prepare4ParallelExec</text>
<polyline fill="none" stroke="black" points="212,-519 431,-519 "/>
<text text-anchor="start" x="220" y="-503.8" font-family="Times,serif" font-size="14.00">启动多个paritalWorker go routine</text>
<text text-anchor="start" x="220" y="-488.8" font-family="Times,serif" font-size="14.00"> 启动多个finalWorkers go routine</text>
<text text-anchor="start" x="220" y="-473.8" font-family="Times,serif" font-size="14.00"> 启动一个fetchChildData go routine</text>
</g>
<!-- parallelExec&#45;&gt;prepare4ParallelExec -->
<g id="edge2" class="edge">
<title>parallelExec&#45;&gt;prepare4ParallelExec</title>
<path fill="none" stroke="#666666" d="M142.25,-115.01C169.56,-174.6 257.54,-366.61 298.79,-456.62"/>
<polygon fill="#666666" stroke="#666666" points="295.64,-458.14 302.99,-465.78 302,-455.23 295.64,-458.14"/>
</g>
<!-- finalOutputCh -->
<g id="node8" class="node">
<title>finalOutputCh</title>
<polygon fill="#95e1d3" stroke="black" points="1444,-0.5 1444,-137.5 1654,-137.5 1654,-0.5 1444,-0.5"/>
<text text-anchor="middle" x="1549" y="-122.3" font-family="Times,serif" font-size="14.00">finalOutputCh</text>
<polyline fill="none" stroke="black" points="1444,-114.5 1654,-114.5 "/>
<text text-anchor="start" x="1452" y="-99.3" font-family="Times,serif" font-size="14.00">finalOutputCh chan *AfFinalResult</text>
<polyline fill="none" stroke="black" points="1444,-91.5 1654,-91.5 "/>
<text text-anchor="start" x="1452" y="-76.3" font-family="Times,serif" font-size="14.00">用于finalWorker和main thread</text>
<text text-anchor="start" x="1452" y="-61.3" font-family="Times,serif" font-size="14.00"> 之间数据同步</text>
<polyline fill="none" stroke="black" points="1444,-53.5 1654,-53.5 "/>
<text text-anchor="start" x="1452" y="-38.3" font-family="Times,serif" font-size="14.00">main读完数据后</text>
<text text-anchor="start" x="1452" y="-23.3" font-family="Times,serif" font-size="14.00"> 将chunk放回giveBackCh</text>
<text text-anchor="start" x="1452" y="-8.3" font-family="Times,serif" font-size="14.00"> 用于数据复用</text>
</g>
<!-- parallelExec&#45;&gt;finalOutputCh -->
<g id="edge3" class="edge">
<title>parallelExec&#45;&gt;finalOutputCh</title>
<path fill="none" stroke="#666666" d="M175.06,-92.84C212.82,-89.37 270.37,-85 320.5,-85 320.5,-85 320.5,-85 1298,-85 1342.39,-85 1391.12,-82.46 1433.68,-79.4"/>
<polygon fill="#666666" stroke="#666666" points="1434.08,-82.88 1443.79,-78.65 1433.56,-75.9 1434.08,-82.88"/>
</g>
<!-- HashAggPartialWorker_run -->
<g id="node9" class="node">
<title>HashAggPartialWorker_run</title>
<polygon fill="#ff577f" stroke="black" points="523,-552 523,-588 688,-588 688,-552 523,-552"/>
<text text-anchor="middle" x="605.5" y="-566.3" font-family="Times,serif" font-size="14.00">HashAggPartialWorker.run</text>
</g>
<!-- prepare4ParallelExec&#45;&gt;HashAggPartialWorker_run -->
<g id="edge4" class="edge">
<title>prepare4ParallelExec&#45;&gt;HashAggPartialWorker_run</title>
<path fill="none" stroke="#666666" d="M431.13,-529.42C459.73,-536.12 490.21,-543.25 517.51,-549.64"/>
<polygon fill="#666666" stroke="#666666" points="516.89,-553.09 527.42,-551.96 518.48,-546.27 516.89,-553.09"/>
<text text-anchor="middle" x="477" y="-548.8" font-family="Times,serif" font-size="14.00">go routine</text>
</g>
<!-- HashAggFinalWorker_run -->
<g id="node10" class="node">
<title>HashAggFinalWorker_run</title>
<polygon fill="#ff577f" stroke="black" points="982,-303 982,-339 1140,-339 1140,-303 982,-303"/>
<text text-anchor="middle" x="1061" y="-317.3" font-family="Times,serif" font-size="14.00">HashAggFinalWorker.run</text>
</g>
<!-- prepare4ParallelExec&#45;&gt;HashAggFinalWorker_run -->
<g id="edge5" class="edge">
<title>prepare4ParallelExec&#45;&gt;HashAggFinalWorker_run</title>
<path fill="none" stroke="#666666" d="M431.32,-477C580.15,-440.07 843.93,-374.61 977.54,-341.46"/>
<polygon fill="#666666" stroke="#666666" points="978.45,-344.84 987.32,-339.04 976.77,-338.05 978.45,-344.84"/>
<text text-anchor="middle" x="734" y="-412.8" font-family="Times,serif" font-size="14.00">go routine</text>
</g>
<!-- fetchChildData -->
<g id="node11" class="node">
<title>fetchChildData</title>
<polygon fill="#ff577f" stroke="black" points="1247.5,-675 1247.5,-711 1346.5,-711 1346.5,-675 1247.5,-675"/>
<text text-anchor="middle" x="1297" y="-689.3" font-family="Times,serif" font-size="14.00">fetchChildData</text>
</g>
<!-- prepare4ParallelExec&#45;&gt;fetchChildData -->
<g id="edge6" class="edge">
<title>prepare4ParallelExec&#45;&gt;fetchChildData</title>
<path fill="none" stroke="#666666" d="M338.12,-542.08C373.15,-620.55 465.87,-793 604.5,-793 604.5,-793 604.5,-793 1062,-793 1139.08,-793 1219.79,-746.55 1263.38,-716.96"/>
<polygon fill="#666666" stroke="#666666" points="1265.61,-719.68 1271.84,-711.11 1261.63,-713.92 1265.61,-719.68"/>
<text text-anchor="middle" x="849" y="-796.8" font-family="Times,serif" font-size="14.00">go routine</text>
</g>
<!-- AfFinalResult -->
<g id="node25" class="node">
<title>AfFinalResult</title>
<polygon fill="none" stroke="black" points="1717.5,-23 1717.5,-115 1913.5,-115 1913.5,-23 1717.5,-23"/>
<text text-anchor="middle" x="1815.5" y="-99.8" font-family="Times,serif" font-size="14.00">AfFinalResult</text>
<polyline fill="none" stroke="black" points="1717.5,-92 1913.5,-92 "/>
<text text-anchor="start" x="1725.5" y="-76.8" font-family="Times,serif" font-size="14.00">chk *chunk.Chunk</text>
<polyline fill="none" stroke="black" points="1717.5,-69 1913.5,-69 "/>
<text text-anchor="start" x="1725.5" y="-53.8" font-family="Times,serif" font-size="14.00">err error</text>
<polyline fill="none" stroke="black" points="1717.5,-46 1913.5,-46 "/>
<text text-anchor="start" x="1725.5" y="-30.8" font-family="Times,serif" font-size="14.00">giveBackCh chan *chunk.Chunk</text>
</g>
<!-- finalOutputCh&#45;&gt;AfFinalResult -->
<g id="edge27" class="edge">
<title>finalOutputCh&#45;&gt;AfFinalResult</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1654.16,-69C1671.56,-69 1689.64,-69 1707.12,-69"/>
<polygon fill="blue" stroke="blue" points="1707.34,-72.5 1717.34,-69 1707.34,-65.5 1707.34,-72.5"/>
</g>
<!-- shuffleIntermData -->
<g id="node17" class="node">
<title>shuffleIntermData</title>
<polygon fill="none" stroke="black" points="1960,-403 1960,-479 2191,-479 2191,-403 1960,-403"/>
<text text-anchor="middle" x="2075.5" y="-463.8" font-family="Times,serif" font-size="14.00">shuffleIntermData</text>
<polyline fill="none" stroke="black" points="1960,-456 2191,-456 "/>
<text text-anchor="start" x="1968" y="-440.8" font-family="Times,serif" font-size="14.00">遍历partialResultsMap</text>
<text text-anchor="start" x="1968" y="-425.8" font-family="Times,serif" font-size="14.00"> 将groupkeys分为FinalConcurrency组</text>
<text text-anchor="start" x="1968" y="-410.8" font-family="Times,serif" font-size="14.00"> 发送到输出的ch</text>
</g>
<!-- HashAggPartialWorker_run&#45;&gt;shuffleIntermData -->
<g id="edge17" class="edge">
<title>HashAggPartialWorker_run&#45;&gt;shuffleIntermData</title>
<path fill="none" stroke="#666666" d="M688.14,-583.19C734.83,-589.63 794.55,-596 848,-596 848,-596 848,-596 1816.5,-596 1864.66,-596 1879.78,-597.24 1923,-576 1966.72,-554.51 2007.41,-516.85 2035.59,-486.76"/>
<polygon fill="#666666" stroke="#666666" points="2038.28,-489.01 2042.48,-479.28 2033.13,-484.26 2038.28,-489.01"/>
</g>
<!-- getChildInput -->
<g id="node19" class="node">
<title>getChildInput</title>
<polygon fill="none" stroke="black" points="780,-624.5 780,-753.5 918,-753.5 918,-624.5 780,-624.5"/>
<text text-anchor="middle" x="849" y="-738.3" font-family="Times,serif" font-size="14.00">getChildInput</text>
<polyline fill="none" stroke="black" points="780,-730.5 918,-730.5 "/>
<text text-anchor="start" x="788" y="-715.3" font-family="Times,serif" font-size="14.00">从worker 绑定的</text>
<text text-anchor="start" x="788" y="-700.3" font-family="Times,serif" font-size="14.00"> partialInputChs</text>
<text text-anchor="start" x="788" y="-685.3" font-family="Times,serif" font-size="14.00"> 中获取数据,完毕后</text>
<polyline fill="none" stroke="black" points="780,-677.5 918,-677.5 "/>
<text text-anchor="start" x="788" y="-662.3" font-family="Times,serif" font-size="14.00">再放回到inputCh中</text>
<text text-anchor="start" x="788" y="-647.3" font-family="Times,serif" font-size="14.00"> 这样fetchChildData</text>
<text text-anchor="start" x="788" y="-632.3" font-family="Times,serif" font-size="14.00"> 可以接着去取数据</text>
</g>
<!-- HashAggPartialWorker_run&#45;&gt;getChildInput -->
<g id="edge18" class="edge">
<title>HashAggPartialWorker_run&#45;&gt;getChildInput</title>
<path fill="none" stroke="#666666" d="M643.18,-588.07C676.93,-604.71 728.09,-629.91 770.83,-650.97"/>
<polygon fill="#666666" stroke="#666666" points="769.29,-654.12 779.81,-655.4 772.39,-647.84 769.29,-654.12"/>
</g>
<!-- updatePartialResult -->
<g id="node20" class="node">
<title>updatePartialResult</title>
<polygon fill="none" stroke="black" points="1122,-562 1000,-562 1000,-526 1122,-526 1122,-562"/>
<text text-anchor="middle" x="1061" y="-540.3" font-family="Times,serif" font-size="14.00">updatePartialResult</text>
</g>
<!-- HashAggPartialWorker_run&#45;&gt;updatePartialResult -->
<g id="edge19" class="edge">
<title>HashAggPartialWorker_run&#45;&gt;updatePartialResult</title>
<path fill="none" stroke="#666666" d="M688.1,-565.32C774.06,-560.39 908.03,-552.71 989.54,-548.04"/>
<polygon fill="#666666" stroke="#666666" points="989.92,-551.52 999.7,-547.46 989.52,-544.54 989.92,-551.52"/>
</g>
<!-- getFinalResult -->
<g id="node14" class="node">
<title>getFinalResult</title>
<polygon fill="none" stroke="black" points="1213.5,-188 1213.5,-234 1380.5,-234 1380.5,-188 1213.5,-188"/>
<text text-anchor="middle" x="1297" y="-218.8" font-family="Times,serif" font-size="14.00">getFinalResult</text>
<polyline fill="none" stroke="black" points="1213.5,-211 1380.5,-211 "/>
<text text-anchor="start" x="1221.5" y="-195.8" font-family="Times,serif" font-size="14.00">将最终结果写入outputCh</text>
</g>
<!-- HashAggFinalWorker_run&#45;&gt;getFinalResult -->
<g id="edge7" class="edge">
<title>HashAggFinalWorker_run&#45;&gt;getFinalResult</title>
<path fill="none" stroke="#666666" d="M1100.38,-302.96C1137.7,-285.41 1194.9,-258.53 1237.82,-238.35"/>
<polygon fill="#666666" stroke="#666666" points="1239.46,-241.44 1247.02,-234.02 1236.49,-235.11 1239.46,-241.44"/>
</g>
<!-- consumeIntermData -->
<g id="node15" class="node">
<title>consumeIntermData</title>
<polygon fill="none" stroke="black" points="1232,-283 1232,-359 1362,-359 1362,-283 1232,-283"/>
<text text-anchor="middle" x="1297" y="-343.8" font-family="Times,serif" font-size="14.00">consumeIntermData</text>
<polyline fill="none" stroke="black" points="1232,-336 1362,-336 "/>
<text text-anchor="start" x="1240" y="-320.8" font-family="Times,serif" font-size="14.00">调用MergeResult将</text>
<text text-anchor="start" x="1240" y="-305.8" font-family="Times,serif" font-size="14.00"> partialWorker输出</text>
<text text-anchor="start" x="1240" y="-290.8" font-family="Times,serif" font-size="14.00"> 中间结果merge</text>
</g>
<!-- HashAggFinalWorker_run&#45;&gt;consumeIntermData -->
<g id="edge8" class="edge">
<title>HashAggFinalWorker_run&#45;&gt;consumeIntermData</title>
<path fill="none" stroke="#666666" d="M1140.24,-321C1166.52,-321 1195.73,-321 1221.69,-321"/>
<polygon fill="#666666" stroke="#666666" points="1221.85,-324.5 1231.85,-321 1221.85,-317.5 1221.85,-324.5"/>
</g>
<!-- Next_children -->
<g id="node18" class="node">
<title>Next_children</title>
<polygon fill="none" stroke="black" points="1488,-625 1488,-701 1610,-701 1610,-625 1488,-625"/>
<text text-anchor="middle" x="1549" y="-685.8" font-family="Times,serif" font-size="14.00">Next_children</text>
<polyline fill="none" stroke="black" points="1488,-678 1610,-678 "/>
<text text-anchor="start" x="1496" y="-662.8" font-family="Times,serif" font-size="14.00">从child executor中</text>
<text text-anchor="start" x="1496" y="-647.8" font-family="Times,serif" font-size="14.00"> 读取数据</text>
<text text-anchor="start" x="1496" y="-632.8" font-family="Times,serif" font-size="14.00"> 然后放入ch中</text>
</g>
<!-- fetchChildData&#45;&gt;Next_children -->
<g id="edge16" class="edge">
<title>fetchChildData&#45;&gt;Next_children</title>
<path fill="none" stroke="#666666" d="M1346.8,-687.14C1384.08,-682.67 1435.99,-676.44 1477.74,-671.43"/>
<polygon fill="#666666" stroke="#666666" points="1478.33,-674.89 1487.85,-670.22 1477.5,-667.94 1478.33,-674.89"/>
</g>
<!-- partialInputChs -->
<g id="node24" class="node">
<title>partialInputChs</title>
<polygon fill="#95e1d3" stroke="black" points="1471.5,-720 1471.5,-796 1626.5,-796 1626.5,-720 1471.5,-720"/>
<text text-anchor="middle" x="1549" y="-780.8" font-family="Times,serif" font-size="14.00">partialInputChs</text>
<polyline fill="none" stroke="black" points="1471.5,-773 1626.5,-773 "/>
<text text-anchor="start" x="1479.5" y="-757.8" font-family="Times,serif" font-size="14.00">每个worker绑定了一个</text>
<text text-anchor="start" x="1479.5" y="-742.8" font-family="Times,serif" font-size="14.00"> worker i 绑定了</text>
<text text-anchor="start" x="1479.5" y="-727.8" font-family="Times,serif" font-size="14.00"> patialInputChans[i]</text>
</g>
<!-- fetchChildData&#45;&gt;partialInputChs -->
<g id="edge29" class="edge">
<title>fetchChildData&#45;&gt;partialInputChs</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1346.8,-705.69C1379.28,-714.13 1422.86,-725.46 1461.15,-735.42"/>
<polygon fill="blue" stroke="blue" points="1460.72,-738.92 1471.28,-738.05 1462.48,-732.15 1460.72,-738.92"/>
</g>
<!-- getPartialInput -->
<g id="node12" class="node">
<title>getPartialInput</title>
<polygon fill="none" stroke="black" points="2488.5,-290.5 2488.5,-351.5 2638.5,-351.5 2638.5,-290.5 2488.5,-290.5"/>
<text text-anchor="middle" x="2563.5" y="-336.3" font-family="Times,serif" font-size="14.00">getPartialInput</text>
<polyline fill="none" stroke="black" points="2488.5,-328.5 2638.5,-328.5 "/>
<text text-anchor="start" x="2496.5" y="-313.3" font-family="Times,serif" font-size="14.00">从PartialWorker的输出</text>
<text text-anchor="start" x="2496.5" y="-298.3" font-family="Times,serif" font-size="14.00"> ch中获取数据</text>
</g>
<!-- getPartialResult -->
<g id="node13" class="node">
<title>getPartialResult</title>
<polygon fill="none" stroke="black" points="1427,-381.5 1427,-442.5 1671,-442.5 1671,-381.5 1427,-381.5"/>
<text text-anchor="middle" x="1549" y="-427.3" font-family="Times,serif" font-size="14.00">getPartialResult</text>
<polyline fill="none" stroke="black" points="1427,-419.5 1671,-419.5 "/>
<text text-anchor="start" x="1435" y="-404.3" font-family="Times,serif" font-size="14.00">根据groupKeys 去map中取partialResult</text>
<text text-anchor="start" x="1435" y="-389.3" font-family="Times,serif" font-size="14.00"> 如果不存在，则创建一个</text>
</g>
<!-- getPartialResult&#45;&gt;AllocPartialResult -->
<g id="edge24" class="edge">
<title>getPartialResult&#45;&gt;AllocPartialResult</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1592.22,-442.69C1623.11,-464.07 1666.66,-492.04 1708,-511 1719.31,-516.19 1731.66,-520.86 1743.82,-524.93"/>
<polygon fill="blue" stroke="blue" points="1742.9,-528.32 1753.5,-528.07 1745.07,-521.66 1742.9,-528.32"/>
</g>
<!-- finalWorker_partialResultMap -->
<g id="node16" class="node">
<title>finalWorker_partialResultMap</title>
<polygon fill="none" stroke="black" points="1907,-361 1724,-361 1724,-325 1907,-325 1907,-361"/>
<text text-anchor="middle" x="1815.5" y="-339.3" font-family="Times,serif" font-size="14.00">finalWorker_partialResultMap</text>
</g>
<!-- getPartialResult&#45;&gt;finalWorker_partialResultMap -->
<g id="edge25" class="edge">
<title>getPartialResult&#45;&gt;finalWorker_partialResultMap</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1664.3,-381.45C1679,-377.57 1693.85,-373.67 1708,-370 1716.09,-367.9 1724.54,-365.72 1732.98,-363.56"/>
<polygon fill="blue" stroke="blue" points="1734.04,-366.91 1742.86,-361.04 1732.31,-360.12 1734.04,-366.91"/>
</g>
<!-- partialResultMap -->
<g id="node22" class="node">
<title>partialResultMap</title>
<polygon fill="none" stroke="black" points="1708,-380 1708,-502 1923,-502 1923,-380 1708,-380"/>
<text text-anchor="middle" x="1815.5" y="-486.8" font-family="Times,serif" font-size="14.00">partialResultMap</text>
<polyline fill="none" stroke="black" points="1708,-479 1923,-479 "/>
<text text-anchor="start" x="1716" y="-463.8" font-family="Times,serif" font-size="14.00">partialWorker</text>
<polyline fill="none" stroke="black" points="1708,-456 1923,-456 "/>
<text text-anchor="start" x="1716" y="-440.8" font-family="Times,serif" font-size="14.00">aggPartialResultMapper</text>
<text text-anchor="start" x="1716" y="-425.8" font-family="Times,serif" font-size="14.00"> type aggPartialResultMapper</text>
<text text-anchor="middle" x="1815.5" y="-410.8" font-family="Times,serif" font-size="14.00"> map[string][]aggfuncs.PartialResult</text>
<polyline fill="none" stroke="black" points="1708,-403 1923,-403 "/>
<text text-anchor="middle" x="1815.5" y="-387.8" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- getPartialResult&#45;&gt;partialResultMap -->
<g id="edge26" class="edge">
<title>getPartialResult&#45;&gt;partialResultMap</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1671.03,-425.27C1679.92,-426.24 1688.88,-427.23 1697.75,-428.2"/>
<polygon fill="blue" stroke="blue" points="1697.4,-431.68 1707.72,-429.29 1698.16,-424.72 1697.4,-431.68"/>
</g>
<!-- getFinalResult&#45;&gt;AppendFinalResult2Chunk -->
<g id="edge13" class="edge">
<title>getFinalResult&#45;&gt;AppendFinalResult2Chunk</title>
<path fill="none" stroke="#666666" d="M1380.55,-200.76C1404.93,-197.74 1431.75,-194.42 1456.64,-191.33"/>
<polygon fill="#666666" stroke="#666666" points="1457.32,-194.77 1466.81,-190.07 1456.46,-187.82 1457.32,-194.77"/>
</g>
<!-- getFinalResult&#45;&gt;finalOutputCh -->
<g id="edge14" class="edge">
<title>getFinalResult&#45;&gt;finalOutputCh</title>
<path fill="none" stroke="#666666" d="M1338.72,-187.87C1365.06,-172.91 1400.75,-152.64 1435.18,-133.08"/>
<polygon fill="#666666" stroke="#666666" points="1436.94,-136.11 1443.91,-128.12 1433.48,-130.02 1436.94,-136.11"/>
</g>
<!-- getFinalResult&#45;&gt;getPartialResult -->
<g id="edge15" class="edge">
<title>getFinalResult&#45;&gt;getPartialResult</title>
<path fill="none" stroke="#666666" d="M1334.58,-234.1C1351.76,-245.34 1372.31,-259.35 1390,-273 1431.86,-305.31 1476.89,-345.51 1508.13,-374.36"/>
<polygon fill="#666666" stroke="#666666" points="1506.05,-377.21 1515.76,-381.44 1510.81,-372.07 1506.05,-377.21"/>
</g>
<!-- consumeIntermData&#45;&gt;MergePartialResult -->
<g id="edge9" class="edge">
<title>consumeIntermData&#45;&gt;MergePartialResult</title>
<path fill="none" stroke="#3f72af" d="M1362.03,-298.06C1377.05,-292.91 1393.04,-287.61 1408,-283 1430.33,-276.12 1454.86,-269.24 1477.06,-263.26"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1478,-266.63 1486.75,-260.66 1476.19,-259.87 1478,-266.63"/>
</g>
<!-- consumeIntermData&#45;&gt;getPartialInput -->
<g id="edge10" class="edge">
<title>consumeIntermData&#45;&gt;getPartialInput</title>
<path fill="none" stroke="#3f72af" d="M1362.06,-311.45C1412.47,-304.75 1484.56,-297 1548,-297 1548,-297 1548,-297 2316.5,-297 2370.47,-297 2430.79,-302.79 2478.19,-308.69"/>
<polygon fill="#3f72af" stroke="#3f72af" points="2478.04,-312.2 2488.41,-309.98 2478.93,-305.25 2478.04,-312.2"/>
</g>
<!-- consumeIntermData&#45;&gt;getPartialResult -->
<g id="edge11" class="edge">
<title>consumeIntermData&#45;&gt;getPartialResult</title>
<path fill="none" stroke="#3f72af" d="M1362.06,-344.32C1390.11,-354.53 1423.59,-366.72 1454.36,-377.92"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1453.22,-381.23 1463.82,-381.36 1455.62,-374.65 1453.22,-381.23"/>
</g>
<!-- consumeIntermData&#45;&gt;finalWorker_partialResultMap -->
<g id="edge12" class="edge">
<title>consumeIntermData&#45;&gt;finalWorker_partialResultMap</title>
<path fill="none" stroke="#3f72af" d="M1362.11,-323.73C1450.22,-327.48 1609.64,-334.27 1713.77,-338.71"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1713.85,-342.22 1723.99,-339.14 1714.14,-335.22 1713.85,-342.22"/>
</g>
<!-- partialOutputChs -->
<g id="node26" class="node">
<title>partialOutputChs</title>
<polygon fill="#95e1d3" stroke="black" points="2228,-406 2228,-452 2403,-452 2403,-406 2228,-406"/>
<text text-anchor="middle" x="2315.5" y="-436.8" font-family="Times,serif" font-size="14.00">partialOutputChs</text>
<polyline fill="none" stroke="black" points="2228,-429 2403,-429 "/>
<text text-anchor="start" x="2236" y="-413.8" font-family="Times,serif" font-size="14.00">[]chan *HashAggIntermData</text>
</g>
<!-- shuffleIntermData&#45;&gt;partialOutputChs -->
<g id="edge32" class="edge">
<title>shuffleIntermData&#45;&gt;partialOutputChs</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M2191.32,-435.21C2200.12,-434.77 2208.95,-434.32 2217.62,-433.88"/>
<polygon fill="blue" stroke="blue" points="2217.89,-437.38 2227.71,-433.38 2217.54,-430.38 2217.89,-437.38"/>
</g>
<!-- getChildInput&#45;&gt;updatePartialResult -->
<g id="edge31" class="edge">
<title>getChildInput&#45;&gt;updatePartialResult</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M918.18,-641.92C953.89,-617.27 996.1,-588.12 1025.13,-568.07"/>
<polygon fill="blue" stroke="blue" points="1027.46,-570.72 1033.7,-562.16 1023.48,-564.96 1027.46,-570.72"/>
</g>
<!-- inputCh -->
<g id="node23" class="node">
<title>inputCh</title>
<polygon fill="#95e1d3" stroke="black" points="955,-627.5 955,-726.5 1167,-726.5 1167,-627.5 955,-627.5"/>
<text text-anchor="start" x="963" y="-711.3" font-family="Times,serif" font-size="14.00">inputCh</text>
<polyline fill="none" stroke="black" points="955,-703.5 1167,-703.5 "/>
<text text-anchor="start" x="963" y="-688.3" font-family="Times,serif" font-size="14.00">chk *chunk.Chunk</text>
<text text-anchor="start" x="963" y="-673.3" font-family="Times,serif" font-size="14.00"> giveBackCh chan&lt;&#45; *chunk.Chunk</text>
<polyline fill="none" stroke="black" points="955,-665.5 1167,-665.5 "/>
<text text-anchor="start" x="963" y="-650.3" font-family="Times,serif" font-size="14.00">用于fether和partialworker</text>
<text text-anchor="start" x="963" y="-635.3" font-family="Times,serif" font-size="14.00"> 之间数据复用</text>
</g>
<!-- getChildInput&#45;&gt;inputCh -->
<g id="edge35" class="edge">
<title>getChildInput&#45;&gt;inputCh</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M918.18,-685.1C926.71,-684.62 935.61,-684.11 944.61,-683.59"/>
<polygon fill="blue" stroke="blue" points="945.02,-687.08 954.8,-683.01 944.62,-680.09 945.02,-687.08"/>
</g>
<!-- updatePartialResult&#45;&gt;af_UpdatePartialResult -->
<g id="edge20" class="edge">
<title>updatePartialResult&#45;&gt;af_UpdatePartialResult</title>
<path fill="none" stroke="#666666" d="M1122.26,-544C1153.3,-544 1191.36,-544 1223.94,-544"/>
<polygon fill="#666666" stroke="#666666" points="1224.31,-547.5 1234.31,-544 1224.31,-540.5 1224.31,-547.5"/>
</g>
<!-- updatePartialResult&#45;&gt;getPartialResult -->
<g id="edge21" class="edge">
<title>updatePartialResult&#45;&gt;getPartialResult</title>
<path fill="none" stroke="#666666" d="M1077.7,-525.81C1101.79,-499.37 1150.7,-451.28 1204,-431 1271.13,-405.45 1350.97,-399.69 1416.83,-400.78"/>
<polygon fill="#666666" stroke="#666666" points="1416.79,-404.27 1426.86,-400.99 1416.94,-397.28 1416.79,-404.27"/>
</g>
<!-- getGroupKey -->
<g id="node21" class="node">
<title>getGroupKey</title>
<polygon fill="none" stroke="black" points="1204,-440.5 1204,-501.5 1390,-501.5 1390,-440.5 1204,-440.5"/>
<text text-anchor="middle" x="1297" y="-486.3" font-family="Times,serif" font-size="14.00">getGroupKey</text>
<polyline fill="none" stroke="black" points="1204,-478.5 1390,-478.5 "/>
<text text-anchor="start" x="1212" y="-463.3" font-family="Times,serif" font-size="14.00">evaluates the group items </text>
<text text-anchor="start" x="1212" y="-448.3" font-family="Times,serif" font-size="14.00"> and args of aggregate function</text>
</g>
<!-- updatePartialResult&#45;&gt;getGroupKey -->
<g id="edge22" class="edge">
<title>updatePartialResult&#45;&gt;getGroupKey</title>
<path fill="none" stroke="#666666" d="M1119.84,-525.96C1142.28,-518.95 1168.67,-510.72 1194.08,-502.79"/>
<polygon fill="#666666" stroke="#666666" points="1195.26,-506.09 1203.77,-499.77 1193.18,-499.41 1195.26,-506.09"/>
</g>
<!-- getGroupKey&#45;&gt;getPartialResult -->
<g id="edge23" class="edge">
<title>getGroupKey&#45;&gt;getPartialResult</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1390.03,-449.28C1398.82,-447.21 1407.85,-445.08 1416.92,-442.94"/>
<polygon fill="blue" stroke="blue" points="1417.84,-446.31 1426.77,-440.61 1416.23,-439.5 1417.84,-446.31"/>
</g>
<!-- partialResultMap&#45;&gt;shuffleIntermData -->
<g id="edge34" class="edge">
<title>partialResultMap&#45;&gt;shuffleIntermData</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1923.3,-441C1932.06,-441 1940.97,-441 1949.84,-441"/>
<polygon fill="blue" stroke="blue" points="1949.84,-444.5 1959.84,-441 1949.84,-437.5 1949.84,-444.5"/>
</g>
<!-- inputCh&#45;&gt;fetchChildData -->
<g id="edge36" class="edge">
<title>inputCh&#45;&gt;fetchChildData</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1167.02,-684.18C1191.14,-685.83 1215.95,-687.53 1237.28,-688.98"/>
<polygon fill="blue" stroke="blue" points="1237.24,-692.49 1247.46,-689.68 1237.72,-685.51 1237.24,-692.49"/>
</g>
<!-- partialInputChs&#45;&gt;getChildInput -->
<g id="edge30" class="edge">
<title>partialInputChs&#45;&gt;getChildInput</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1471.42,-764.37C1357.23,-771.82 1136.35,-778.27 955,-736 945.91,-733.88 936.63,-730.97 927.54,-727.62"/>
<polygon fill="blue" stroke="blue" points="928.75,-724.33 918.16,-723.99 926.22,-730.86 928.75,-724.33"/>
</g>
<!-- partialOutputChs&#45;&gt;getPartialInput -->
<g id="edge33" class="edge">
<title>partialOutputChs&#45;&gt;getPartialInput</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M2366.55,-405.97C2388.96,-395.75 2415.75,-383.64 2440,-373 2453.06,-367.27 2466.95,-361.27 2480.51,-355.48"/>
<polygon fill="blue" stroke="blue" points="2482,-358.65 2489.83,-351.51 2479.25,-352.21 2482,-358.65"/>
</g>
<!-- HashAggIntermData -->
<g id="node27" class="node">
<title>HashAggIntermData</title>
<polygon fill="none" stroke="black" points="2440,-383 2440,-475 2687,-475 2687,-383 2440,-383"/>
<text text-anchor="middle" x="2563.5" y="-459.8" font-family="Times,serif" font-size="14.00">HashAggIntermData</text>
<polyline fill="none" stroke="black" points="2440,-452 2687,-452 "/>
<text text-anchor="start" x="2448" y="-436.8" font-family="Times,serif" font-size="14.00">groupKeys []string</text>
<polyline fill="none" stroke="black" points="2440,-429 2687,-429 "/>
<text text-anchor="start" x="2448" y="-413.8" font-family="Times,serif" font-size="14.00">cursor int</text>
<polyline fill="none" stroke="black" points="2440,-406 2687,-406 "/>
<text text-anchor="start" x="2448" y="-390.8" font-family="Times,serif" font-size="14.00">partialResultMap aggPartialResultMapper</text>
</g>
<!-- partialOutputChs&#45;&gt;HashAggIntermData -->
<g id="edge28" class="edge">
<title>partialOutputChs&#45;&gt;HashAggIntermData</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M2403.23,-429C2411.87,-429 2420.78,-429 2429.76,-429"/>
<polygon fill="blue" stroke="blue" points="2429.91,-432.5 2439.91,-429 2429.91,-425.5 2429.91,-432.5"/>
</g>
</g>
</svg>
