<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: LocateKey Pages: 1 -->
<svg width="1648pt" height="554pt"
 viewBox="0.00 0.00 1648.00 553.54" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 549.54)">
<title>LocateKey</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-549.54 1644,-549.54 1644,4 -4,4"/>
<!-- KeyLocation -->
<g id="node1" class="node">
<title>KeyLocation</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M124,-275C124,-275 231,-275 231,-275 237,-275 243,-281 243,-287 243,-287 243,-355 243,-355 243,-361 237,-367 231,-367 231,-367 124,-367 124,-367 118,-367 112,-361 112,-355 112,-355 112,-287 112,-287 112,-281 118,-275 124,-275"/>
<text text-anchor="middle" x="177.5" y="-351.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">KeyLocation</text>
<polyline fill="none" stroke="#60b5ac" points="112,-344 243,-344 "/>
<text text-anchor="start" x="120" y="-328.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Region RegionVerID</text>
<polyline fill="none" stroke="#60b5ac" points="112,-321 243,-321 "/>
<text text-anchor="start" x="120" y="-305.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">StartKey kv.Key</text>
<polyline fill="none" stroke="#60b5ac" points="112,-298 243,-298 "/>
<text text-anchor="start" x="120" y="-282.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">EndKey kv.Key</text>
</g>
<!-- RegionVerID -->
<g id="node16" class="node">
<title>RegionVerID</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M309,-328C309,-328 383,-328 383,-328 389,-328 395,-334 395,-340 395,-340 395,-408 395,-408 395,-414 389,-420 383,-420 383,-420 309,-420 309,-420 303,-420 297,-414 297,-408 297,-408 297,-340 297,-340 297,-334 303,-328 309,-328"/>
<text text-anchor="middle" x="346" y="-404.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">RegionVerID</text>
<polyline fill="none" stroke="#60b5ac" points="297,-397 395,-397 "/>
<text text-anchor="start" x="305" y="-381.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">id uint64</text>
<polyline fill="none" stroke="#60b5ac" points="297,-374 395,-374 "/>
<text text-anchor="start" x="305" y="-358.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">confVer uint64</text>
<polyline fill="none" stroke="#60b5ac" points="297,-351 395,-351 "/>
<text text-anchor="start" x="305" y="-335.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ver uint64</text>
</g>
<!-- KeyLocation&#45;&gt;RegionVerID -->
<g id="edge19" class="edge">
<title>KeyLocation&#45;&gt;RegionVerID</title>
<path fill="none" stroke="#666666" d="M243.35,-341.64C257.82,-346.25 273.06,-351.1 287.22,-355.61"/>
<polygon fill="#666666" stroke="#666666" points="286.24,-358.97 296.83,-358.67 288.36,-352.3 286.24,-358.97"/>
</g>
<!-- LocateKey -->
<g id="node2" class="node">
<title>LocateKey</title>
<path fill="none" stroke="#1c2123" d="M64,-217C64,-217 12,-217 12,-217 6,-217 0,-211 0,-205 0,-205 0,-193 0,-193 0,-187 6,-181 12,-181 12,-181 64,-181 64,-181 70,-181 76,-187 76,-193 76,-193 76,-205 76,-205 76,-211 70,-217 64,-217"/>
<text text-anchor="middle" x="38" y="-195.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LocateKey</text>
</g>
<!-- LocateKey&#45;&gt;KeyLocation -->
<g id="edge1" class="edge">
<title>LocateKey&#45;&gt;KeyLocation</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M59.29,-217C74.59,-230.58 96.41,-249.94 117.08,-268.28"/>
<polygon fill="green" stroke="green" points="114.83,-270.96 124.63,-274.98 119.48,-265.73 114.83,-270.96"/>
</g>
<!-- findRegionByKey -->
<g id="node3" class="node">
<title>findRegionByKey</title>
<path fill="none" stroke="#1c2123" d="M223,-176C223,-176 132,-176 132,-176 126,-176 120,-170 120,-164 120,-164 120,-152 120,-152 120,-146 126,-140 132,-140 132,-140 223,-140 223,-140 229,-140 235,-146 235,-152 235,-152 235,-164 235,-164 235,-170 229,-176 223,-176"/>
<text text-anchor="middle" x="177.5" y="-154.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">findRegionByKey</text>
</g>
<!-- LocateKey&#45;&gt;findRegionByKey -->
<g id="edge2" class="edge">
<title>LocateKey&#45;&gt;findRegionByKey</title>
<path fill="none" stroke="#666666" d="M76.21,-187.9C86.71,-184.77 98.46,-181.27 110.13,-177.79"/>
<polygon fill="#666666" stroke="#666666" points="111.29,-181.1 119.87,-174.88 109.29,-174.39 111.29,-181.1"/>
</g>
<!-- searchCachedRegion -->
<g id="node4" class="node">
<title>searchCachedRegion</title>
<path fill="none" stroke="#1c2123" d="M399.5,-122C399.5,-122 292.5,-122 292.5,-122 286.5,-122 280.5,-116 280.5,-110 280.5,-110 280.5,-98 280.5,-98 280.5,-92 286.5,-86 292.5,-86 292.5,-86 399.5,-86 399.5,-86 405.5,-86 411.5,-92 411.5,-98 411.5,-98 411.5,-110 411.5,-110 411.5,-116 405.5,-122 399.5,-122"/>
<text text-anchor="middle" x="346" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">searchCachedRegion</text>
</g>
<!-- findRegionByKey&#45;&gt;searchCachedRegion -->
<g id="edge3" class="edge">
<title>findRegionByKey&#45;&gt;searchCachedRegion</title>
<path fill="none" stroke="#b83b5e" d="M234.41,-139.87C248.9,-135.17 264.63,-130.07 279.57,-125.22"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="280.81,-128.5 289.24,-122.08 278.65,-121.84 280.81,-128.5"/>
</g>
<!-- loadRegion -->
<g id="node5" class="node">
<title>loadRegion</title>
<path fill="none" stroke="#1c2123" d="M299.5,-247.5C299.5,-247.5 392.5,-247.5 392.5,-247.5 398.5,-247.5 404.5,-253.5 404.5,-259.5 404.5,-259.5 404.5,-296.5 404.5,-296.5 404.5,-302.5 398.5,-308.5 392.5,-308.5 392.5,-308.5 299.5,-308.5 299.5,-308.5 293.5,-308.5 287.5,-302.5 287.5,-296.5 287.5,-296.5 287.5,-259.5 287.5,-259.5 287.5,-253.5 293.5,-247.5 299.5,-247.5"/>
<text text-anchor="middle" x="346" y="-293.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">loadRegion</text>
<polyline fill="none" stroke="#1c2123" points="287.5,-285.5 404.5,-285.5 "/>
<text text-anchor="start" x="295.5" y="-270.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">去pbServer查找</text>
<text text-anchor="start" x="295.5" y="-255.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> key对应的region</text>
</g>
<!-- findRegionByKey&#45;&gt;loadRegion -->
<g id="edge4" class="edge">
<title>findRegionByKey&#45;&gt;loadRegion</title>
<path fill="none" stroke="#b83b5e" d="M203.79,-176.23C227.74,-193.49 264.39,-219.9 294.35,-241.5"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="292.45,-244.44 302.61,-247.45 296.54,-238.76 292.45,-244.44"/>
</g>
<!-- insertRegionToCache -->
<g id="node6" class="node">
<title>insertRegionToCache</title>
<path fill="none" stroke="#1c2123" d="M401,-176C401,-176 291,-176 291,-176 285,-176 279,-170 279,-164 279,-164 279,-152 279,-152 279,-146 285,-140 291,-140 291,-140 401,-140 401,-140 407,-140 413,-146 413,-152 413,-152 413,-164 413,-164 413,-170 407,-176 401,-176"/>
<text text-anchor="middle" x="346" y="-154.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">insertRegionToCache</text>
</g>
<!-- findRegionByKey&#45;&gt;insertRegionToCache -->
<g id="edge5" class="edge">
<title>findRegionByKey&#45;&gt;insertRegionToCache</title>
<path fill="none" stroke="#b83b5e" d="M235.33,-158C246.08,-158 257.48,-158 268.72,-158"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="268.96,-161.5 278.96,-158 268.96,-154.5 268.96,-161.5"/>
</g>
<!-- needReload -->
<g id="node7" class="node">
<title>needReload</title>
<path fill="none" stroke="#1c2123" d="M1316.5,-76.5C1316.5,-76.5 1443.5,-76.5 1443.5,-76.5 1449.5,-76.5 1455.5,-82.5 1455.5,-88.5 1455.5,-88.5 1455.5,-125.5 1455.5,-125.5 1455.5,-131.5 1449.5,-137.5 1443.5,-137.5 1443.5,-137.5 1316.5,-137.5 1316.5,-137.5 1310.5,-137.5 1304.5,-131.5 1304.5,-125.5 1304.5,-125.5 1304.5,-88.5 1304.5,-88.5 1304.5,-82.5 1310.5,-76.5 1316.5,-76.5"/>
<text text-anchor="middle" x="1380" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">needReload</text>
<polyline fill="none" stroke="#1c2123" points="1304.5,-114.5 1455.5,-114.5 "/>
<text text-anchor="start" x="1312.5" y="-99.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">根据syncFlag判断是否</text>
<text text-anchor="start" x="1312.5" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 需要loadRegion</text>
</g>
<!-- findRegionByKey&#45;&gt;needReload -->
<g id="edge6" class="edge">
<title>findRegionByKey&#45;&gt;needReload</title>
<path fill="none" stroke="#b83b5e" d="M196.14,-139.97C215.05,-121.63 246.72,-93.6 279,-77 392.44,-18.66 427.93,0 555.5,0 555.5,0 555.5,0 1000,0 1108.68,0 1228.51,-41.25 1303.75,-72.53"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1302.58,-75.83 1313.15,-76.48 1305.29,-69.38 1302.58,-75.83"/>
</g>
<!-- checkRegionCacheTTL -->
<g id="node8" class="node">
<title>checkRegionCacheTTL</title>
<path fill="none" stroke="#1c2123" d="M1441,-57C1441,-57 1319,-57 1319,-57 1313,-57 1307,-51 1307,-45 1307,-45 1307,-33 1307,-33 1307,-27 1313,-21 1319,-21 1319,-21 1441,-21 1441,-21 1447,-21 1453,-27 1453,-33 1453,-33 1453,-45 1453,-45 1453,-51 1447,-57 1441,-57"/>
<text text-anchor="middle" x="1380" y="-35.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">checkRegionCacheTTL</text>
</g>
<!-- searchCachedRegion&#45;&gt;checkRegionCacheTTL -->
<g id="edge7" class="edge">
<title>searchCachedRegion&#45;&gt;checkRegionCacheTTL</title>
<path fill="none" stroke="#666666" d="M378.03,-85.98C397.69,-75.52 424.02,-63.21 449,-57 595.44,-20.56 637.1,-38 788,-38 788,-38 788,-38 1000,-38 1102.17,-38 1219.84,-38.37 1296.61,-38.66"/>
<polygon fill="#666666" stroke="#666666" points="1296.68,-42.16 1306.7,-38.7 1296.71,-35.16 1296.68,-42.16"/>
</g>
<!-- RegionCache -->
<g id="node9" class="node">
<title>RegionCache</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M461,-66.5C461,-66.5 652,-66.5 652,-66.5 658,-66.5 664,-72.5 664,-78.5 664,-78.5 664,-183.5 664,-183.5 664,-189.5 658,-195.5 652,-195.5 652,-195.5 461,-195.5 461,-195.5 455,-195.5 449,-189.5 449,-183.5 449,-183.5 449,-78.5 449,-78.5 449,-72.5 455,-66.5 461,-66.5"/>
<text text-anchor="middle" x="556.5" y="-180.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">RegionCache</text>
<polyline fill="none" stroke="#60b5ac" points="449,-172.5 664,-172.5 "/>
<text text-anchor="start" x="457" y="-157.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pdClient pd.Client</text>
<polyline fill="none" stroke="#60b5ac" points="449,-149.5 664,-149.5 "/>
<text text-anchor="start" x="457" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">mu struct {</text>
<text text-anchor="start" x="457" y="-119.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> sync.RWMutex</text>
<text text-anchor="start" x="457" y="-104.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> regions map[RegionVerID]*Region</text>
<text text-anchor="start" x="457" y="-89.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> sorted *btree.BTree</text>
<text text-anchor="start" x="457" y="-74.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> }</text>
</g>
<!-- searchCachedRegion&#45;&gt;RegionCache -->
<g id="edge11" class="edge">
<title>searchCachedRegion&#45;&gt;RegionCache</title>
<path fill="none" stroke="#666666" d="M411.54,-112.36C420.24,-113.48 429.37,-114.67 438.63,-115.87"/>
<polygon fill="#666666" stroke="#666666" points="438.35,-119.36 448.72,-117.17 439.25,-112.42 438.35,-119.36"/>
</g>
<!-- pdClient_GetRegion -->
<g id="node12" class="node">
<title>pdClient_GetRegion</title>
<path fill="none" stroke="#1c2123" d="M472.5,-307C472.5,-307 640.5,-307 640.5,-307 646.5,-307 652.5,-313 652.5,-319 652.5,-319 652.5,-379 652.5,-379 652.5,-385 646.5,-391 640.5,-391 640.5,-391 472.5,-391 472.5,-391 466.5,-391 460.5,-385 460.5,-379 460.5,-379 460.5,-319 460.5,-319 460.5,-313 466.5,-307 472.5,-307"/>
<text text-anchor="middle" x="556.5" y="-375.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pdClient.GetRegion</text>
<polyline fill="none" stroke="#1c2123" points="460.5,-368 652.5,-368 "/>
<text text-anchor="start" x="468.5" y="-352.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">get a region and its </text>
<text text-anchor="start" x="468.5" y="-337.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> leader Peer from PD by key</text>
<polyline fill="none" stroke="#1c2123" points="460.5,-330 652.5,-330 "/>
<text text-anchor="start" x="468.5" y="-314.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">the region may expire after split</text>
</g>
<!-- loadRegion&#45;&gt;pdClient_GetRegion -->
<g id="edge20" class="edge">
<title>loadRegion&#45;&gt;pdClient_GetRegion</title>
<path fill="none" stroke="#666666" d="M404.53,-297.59C418.8,-302.45 434.55,-307.81 450.32,-313.18"/>
<polygon fill="#666666" stroke="#666666" points="449.54,-316.62 460.14,-316.53 451.8,-309.99 449.54,-316.62"/>
</g>
<!-- pdClient_GetPrevRegion -->
<g id="node13" class="node">
<title>pdClient_GetPrevRegion</title>
<path fill="none" stroke="#1c2123" d="M461,-410C461,-410 652,-410 652,-410 658,-410 664,-416 664,-422 664,-422 664,-474 664,-474 664,-480 658,-486 652,-486 652,-486 461,-486 461,-486 455,-486 449,-480 449,-474 449,-474 449,-422 449,-422 449,-416 455,-410 461,-410"/>
<text text-anchor="middle" x="556.5" y="-470.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pdClient.GetPrevRegion</text>
<polyline fill="none" stroke="#1c2123" points="449,-463 664,-463 "/>
<text text-anchor="start" x="457" y="-447.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">GetPrevRegion gets the previous</text>
<text text-anchor="start" x="457" y="-432.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> region and its leader Peer of </text>
<text text-anchor="start" x="457" y="-417.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> the region where the key is located.</text>
</g>
<!-- loadRegion&#45;&gt;pdClient_GetPrevRegion -->
<g id="edge21" class="edge">
<title>loadRegion&#45;&gt;pdClient_GetPrevRegion</title>
<path fill="none" stroke="#666666" d="M402.4,-308.67C406.23,-311.88 409.82,-315.33 413,-319 439.07,-349.07 420.88,-372.83 449,-401 449.79,-401.79 450.59,-402.56 451.4,-403.32"/>
<polygon fill="#666666" stroke="#666666" points="449.21,-406.06 459.1,-409.87 453.75,-400.72 449.21,-406.06"/>
</g>
<!-- filterUnavailablePeers -->
<g id="node15" class="node">
<title>filterUnavailablePeers</title>
<path fill="none" stroke="#1c2123" d="M1628,-442C1628,-442 1515,-442 1515,-442 1509,-442 1503,-436 1503,-430 1503,-430 1503,-418 1503,-418 1503,-412 1509,-406 1515,-406 1515,-406 1628,-406 1628,-406 1634,-406 1640,-412 1640,-418 1640,-418 1640,-430 1640,-430 1640,-436 1634,-442 1628,-442"/>
<text text-anchor="middle" x="1571.5" y="-420.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">filterUnavailablePeers</text>
</g>
<!-- loadRegion&#45;&gt;filterUnavailablePeers -->
<g id="edge22" class="edge">
<title>loadRegion&#45;&gt;filterUnavailablePeers</title>
<path fill="none" stroke="#666666" d="M403.91,-308.53C407.29,-311.75 410.38,-315.24 413,-319 458.84,-384.9 388.28,-443.49 449,-496 563.14,-594.71 637.1,-515 788,-515 788,-515 788,-515 1189.5,-515 1308.44,-515 1442.7,-472.53 1515.82,-445.61"/>
<polygon fill="#666666" stroke="#666666" points="1517.15,-448.86 1525.3,-442.09 1514.7,-442.3 1517.15,-448.86"/>
</g>
<!-- switchWorkLeaderToPeer -->
<g id="node17" class="node">
<title>switchWorkLeaderToPeer</title>
<path fill="none" stroke="#1c2123" d="M926,-247.5C926,-247.5 1072,-247.5 1072,-247.5 1078,-247.5 1084,-253.5 1084,-259.5 1084,-259.5 1084,-296.5 1084,-296.5 1084,-302.5 1078,-308.5 1072,-308.5 1072,-308.5 926,-308.5 926,-308.5 920,-308.5 914,-302.5 914,-296.5 914,-296.5 914,-259.5 914,-259.5 914,-253.5 920,-247.5 926,-247.5"/>
<text text-anchor="middle" x="999" y="-293.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">switchWorkerLeaderToPeer</text>
<polyline fill="none" stroke="#1c2123" points="914,-285.5 1084,-285.5 "/>
<text text-anchor="start" x="922" y="-270.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">switches current store</text>
<text text-anchor="start" x="922" y="-255.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> to the on on specific store</text>
</g>
<!-- loadRegion&#45;&gt;switchWorkLeaderToPeer -->
<g id="edge23" class="edge">
<title>loadRegion&#45;&gt;switchWorkLeaderToPeer</title>
<path fill="none" stroke="#666666" d="M404.77,-278C517.33,-278 766.91,-278 903.75,-278"/>
<polygon fill="#666666" stroke="#666666" points="903.8,-281.5 913.8,-278 903.8,-274.5 903.8,-281.5"/>
</g>
<!-- init -->
<g id="node18" class="node">
<title>init</title>
<path fill="none" stroke="#1c2123" d="M571.5,-250C571.5,-250 541.5,-250 541.5,-250 535.5,-250 529.5,-244 529.5,-238 529.5,-238 529.5,-226 529.5,-226 529.5,-220 535.5,-214 541.5,-214 541.5,-214 571.5,-214 571.5,-214 577.5,-214 583.5,-220 583.5,-226 583.5,-226 583.5,-238 583.5,-238 583.5,-244 577.5,-250 571.5,-250"/>
<text text-anchor="middle" x="556.5" y="-228.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">init</text>
</g>
<!-- loadRegion&#45;&gt;init -->
<g id="edge24" class="edge">
<title>loadRegion&#45;&gt;init</title>
<path fill="none" stroke="#666666" d="M404.53,-265.31C441.24,-257.21 487.7,-246.96 519.32,-239.98"/>
<polygon fill="#666666" stroke="#666666" points="520.42,-243.32 529.43,-237.75 518.91,-236.49 520.42,-243.32"/>
</g>
<!-- insertRegionToCache&#45;&gt;RegionCache -->
<g id="edge13" class="edge">
<title>insertRegionToCache&#45;&gt;RegionCache</title>
<path fill="none" stroke="#666666" d="M413.26,-149.42C421.4,-148.37 429.9,-147.26 438.52,-146.15"/>
<polygon fill="#666666" stroke="#666666" points="439.21,-149.59 448.67,-144.83 438.31,-142.65 439.21,-149.59"/>
</g>
<!-- Region -->
<g id="node10" class="node">
<title>Region</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1132,-73.5C1132,-73.5 1245,-73.5 1245,-73.5 1251,-73.5 1257,-79.5 1257,-85.5 1257,-85.5 1257,-176.5 1257,-176.5 1257,-182.5 1251,-188.5 1245,-188.5 1245,-188.5 1132,-188.5 1132,-188.5 1126,-188.5 1120,-182.5 1120,-176.5 1120,-176.5 1120,-85.5 1120,-85.5 1120,-79.5 1126,-73.5 1132,-73.5"/>
<text text-anchor="middle" x="1188.5" y="-173.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Region</text>
<polyline fill="none" stroke="#60b5ac" points="1120,-165.5 1257,-165.5 "/>
<text text-anchor="start" x="1128" y="-150.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">meta *metapb.Region</text>
<polyline fill="none" stroke="#60b5ac" points="1120,-142.5 1257,-142.5 "/>
<text text-anchor="start" x="1128" y="-127.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">store unsafe.Pointer</text>
<polyline fill="none" stroke="#60b5ac" points="1120,-119.5 1257,-119.5 "/>
<text text-anchor="start" x="1128" y="-104.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">syncFlag int32</text>
<polyline fill="none" stroke="#60b5ac" points="1120,-96.5 1257,-96.5 "/>
<text text-anchor="start" x="1128" y="-81.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">lastAccess int64</text>
</g>
<!-- RegionCache&#45;&gt;Region -->
<g id="edge8" class="edge">
<title>RegionCache&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M664.01,-131C790.25,-131 997.55,-131 1109.66,-131"/>
<polygon fill="#666666" stroke="#666666" points="1109.88,-134.5 1119.88,-131 1109.88,-127.5 1109.88,-134.5"/>
</g>
<!-- Region&#45;&gt;needReload -->
<g id="edge9" class="edge">
<title>Region:syncFlag&#45;&gt;needReload</title>
<path fill="none" stroke="#666666" d="M1257,-108C1269.12,-108 1281.91,-107.95 1294.47,-107.87"/>
<polygon fill="#666666" stroke="#666666" points="1294.51,-111.37 1304.48,-107.8 1294.46,-104.37 1294.51,-111.37"/>
</g>
<!-- Region&#45;&gt;checkRegionCacheTTL -->
<g id="edge10" class="edge">
<title>Region:lastAccess&#45;&gt;checkRegionCacheTTL</title>
<path fill="none" stroke="#666666" d="M1257,-85C1274.89,-85 1276.45,-73.79 1293,-67 1298.4,-64.79 1304.04,-62.63 1309.74,-60.55"/>
<polygon fill="#666666" stroke="#666666" points="1311.11,-63.78 1319.36,-57.14 1308.77,-57.18 1311.11,-63.78"/>
</g>
<!-- RegionMeta -->
<g id="node11" class="node">
<title>RegionMeta</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1305,-234.5C1305,-234.5 1455,-234.5 1455,-234.5 1461,-234.5 1467,-240.5 1467,-246.5 1467,-246.5 1467,-383.5 1467,-383.5 1467,-389.5 1461,-395.5 1455,-395.5 1455,-395.5 1305,-395.5 1305,-395.5 1299,-395.5 1293,-389.5 1293,-383.5 1293,-383.5 1293,-246.5 1293,-246.5 1293,-240.5 1299,-234.5 1305,-234.5"/>
<text text-anchor="middle" x="1380" y="-380.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">metapb.Region</text>
<polyline fill="none" stroke="#60b5ac" points="1293,-372.5 1467,-372.5 "/>
<text text-anchor="start" x="1301" y="-357.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Id uint64</text>
<polyline fill="none" stroke="#60b5ac" points="1293,-349.5 1467,-349.5 "/>
<text text-anchor="start" x="1301" y="-334.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">StartKey []byte</text>
<polyline fill="none" stroke="#60b5ac" points="1293,-326.5 1467,-326.5 "/>
<text text-anchor="start" x="1301" y="-311.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">EndKey []byte</text>
<polyline fill="none" stroke="#60b5ac" points="1293,-303.5 1467,-303.5 "/>
<text text-anchor="start" x="1301" y="-288.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">RegionEpoch *RegionEpoch</text>
<polyline fill="none" stroke="#60b5ac" points="1293,-280.5 1467,-280.5 "/>
<text text-anchor="start" x="1301" y="-265.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Peers []*Peer</text>
<polyline fill="none" stroke="#60b5ac" points="1293,-257.5 1467,-257.5 "/>
<text text-anchor="start" x="1301" y="-242.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">EncryptionMeta</text>
</g>
<!-- Region&#45;&gt;RegionMeta -->
<g id="edge12" class="edge">
<title>Region&#45;&gt;RegionMeta</title>
<path fill="none" stroke="#666666" d="M1248.94,-188.71C1261.49,-200.9 1275,-214.02 1288.4,-227.03"/>
<polygon fill="#666666" stroke="#666666" points="1286.21,-229.78 1295.82,-234.24 1291.09,-224.76 1286.21,-229.78"/>
</g>
<!-- RegionMeta&#45;&gt;filterUnavailablePeers -->
<g id="edge16" class="edge">
<title>RegionMeta&#45;&gt;filterUnavailablePeers</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1467.16,-364.56C1489.17,-377.22 1511.81,-390.24 1530.26,-400.86"/>
<polygon fill="green" stroke="green" points="1528.55,-403.91 1538.97,-405.86 1532.04,-397.84 1528.55,-403.91"/>
</g>
<!-- pdRegion -->
<g id="node14" class="node">
<title>pdRegion</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M712,-306.5C712,-306.5 866,-306.5 866,-306.5 872,-306.5 878,-312.5 878,-318.5 878,-318.5 878,-409.5 878,-409.5 878,-415.5 872,-421.5 866,-421.5 866,-421.5 712,-421.5 712,-421.5 706,-421.5 700,-415.5 700,-409.5 700,-409.5 700,-318.5 700,-318.5 700,-312.5 706,-306.5 712,-306.5"/>
<text text-anchor="middle" x="789" y="-406.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pd.Region</text>
<polyline fill="none" stroke="#60b5ac" points="700,-398.5 878,-398.5 "/>
<text text-anchor="start" x="708" y="-383.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Meta *metapb.Region</text>
<polyline fill="none" stroke="#60b5ac" points="700,-375.5 878,-375.5 "/>
<text text-anchor="start" x="708" y="-360.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Leader *metapb.Peer</text>
<polyline fill="none" stroke="#60b5ac" points="700,-352.5 878,-352.5 "/>
<text text-anchor="start" x="708" y="-337.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">DownPeers []*metapb.Peer</text>
<polyline fill="none" stroke="#60b5ac" points="700,-329.5 878,-329.5 "/>
<text text-anchor="start" x="708" y="-314.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">PendingPeers []*metapb.Peer</text>
</g>
<!-- pdClient_GetRegion&#45;&gt;pdRegion -->
<g id="edge14" class="edge">
<title>pdClient_GetRegion&#45;&gt;pdRegion</title>
<path fill="none" stroke="#666666" d="M652.58,-355.19C664.79,-355.98 677.31,-356.8 689.57,-357.59"/>
<polygon fill="#666666" stroke="#666666" points="689.59,-361.1 699.79,-358.26 690.04,-354.12 689.59,-361.1"/>
</g>
<!-- pdClient_GetPrevRegion&#45;&gt;pdRegion -->
<g id="edge15" class="edge">
<title>pdClient_GetPrevRegion&#45;&gt;pdRegion</title>
<path fill="none" stroke="#666666" d="M661.96,-409.93C671.33,-406.52 680.8,-403.07 690.11,-399.67"/>
<polygon fill="#666666" stroke="#666666" points="691.55,-402.87 699.75,-396.16 689.15,-396.3 691.55,-402.87"/>
</g>
<!-- pdRegion&#45;&gt;RegionMeta -->
<g id="edge18" class="edge">
<title>pdRegion:Meta&#45;&gt;RegionMeta</title>
<path fill="none" stroke="#666666" d="M878.29,-356.58C987.16,-347.54 1170.45,-332.32 1282.49,-323.01"/>
<polygon fill="#666666" stroke="#666666" points="1283.1,-326.48 1292.78,-322.16 1282.52,-319.5 1283.1,-326.48"/>
</g>
<!-- pdRegion&#45;&gt;filterUnavailablePeers -->
<g id="edge17" class="edge">
<title>pdRegion&#45;&gt;filterUnavailablePeers</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M878.11,-371.53C978.51,-380.03 1147.53,-394.09 1293,-405 1360.43,-410.06 1437.13,-415.27 1492.77,-418.95"/>
<polygon fill="green" stroke="green" points="1492.7,-422.45 1502.91,-419.62 1493.16,-415.47 1492.7,-422.45"/>
</g>
<!-- pdRegion&#45;&gt;switchWorkLeaderToPeer -->
<g id="edge25" class="edge">
<title>pdRegion:Leader&#45;&gt;switchWorkLeaderToPeer</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M878,-364C898,-364 897.81,-348.75 914,-337 924.13,-329.65 935.02,-321.89 945.5,-314.5"/>
<polygon fill="green" stroke="green" points="947.62,-317.29 953.79,-308.67 943.59,-311.56 947.62,-317.29"/>
</g>
<!-- switchWorkLeaderToPeer&#45;&gt;Region -->
<g id="edge26" class="edge">
<title>switchWorkLeaderToPeer&#45;&gt;Region:store</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1017.4,-247.18C1040.13,-208.63 1080.5,-146.08 1110.05,-133.32"/>
<polygon fill="green" stroke="green" points="1111.05,-136.68 1120,-131 1109.47,-129.86 1111.05,-136.68"/>
</g>
</g>
</svg>
