<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: QueryFeedback Pages: 1 -->
<svg width="2820pt" height="754pt"
 viewBox="0.00 0.00 2820.00 753.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 749.5)">
<title>QueryFeedback</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-749.5 2816,-749.5 2816,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_go</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M37,-510.5C37,-510.5 1029.5,-510.5 1029.5,-510.5 1035.5,-510.5 1041.5,-516.5 1041.5,-522.5 1041.5,-522.5 1041.5,-582.5 1041.5,-582.5 1041.5,-588.5 1035.5,-594.5 1029.5,-594.5 1029.5,-594.5 37,-594.5 37,-594.5 31,-594.5 25,-588.5 25,-582.5 25,-582.5 25,-522.5 25,-522.5 25,-516.5 31,-510.5 37,-510.5"/>
<text text-anchor="middle" x="533.25" y="-574.5" font-family="Times,serif" font-size="20.00">start updateStatsWorker goroutine</text>
</g>
<!-- Feedbacks -->
<g id="node1" class="node">
<title>Feedbacks</title>
<polygon fill="none" stroke="black" points="1973.5,-497 1973.5,-704 2106.5,-704 2106.5,-497 1973.5,-497"/>
<text text-anchor="middle" x="2040" y="-688.8" font-family="Times,serif" font-size="14.00">QueryFeedback</text>
<polyline fill="none" stroke="black" points="1973.5,-681 2106.5,-681 "/>
<text text-anchor="start" x="1981.5" y="-665.8" font-family="Times,serif" font-size="14.00">PhysicalID int64</text>
<polyline fill="none" stroke="black" points="1973.5,-658 2106.5,-658 "/>
<text text-anchor="start" x="1981.5" y="-642.8" font-family="Times,serif" font-size="14.00">Hist *Histogram</text>
<polyline fill="none" stroke="black" points="1973.5,-635 2106.5,-635 "/>
<text text-anchor="start" x="1981.5" y="-619.8" font-family="Times,serif" font-size="14.00">Tp int</text>
<polyline fill="none" stroke="black" points="1973.5,-612 2106.5,-612 "/>
<text text-anchor="start" x="1981.5" y="-596.8" font-family="Times,serif" font-size="14.00">Feedback []Feedback</text>
<polyline fill="none" stroke="black" points="1973.5,-589 2106.5,-589 "/>
<text text-anchor="start" x="1981.5" y="-573.8" font-family="Times,serif" font-size="14.00">Expected int64</text>
<polyline fill="none" stroke="black" points="1973.5,-566 2106.5,-566 "/>
<text text-anchor="start" x="1981.5" y="-550.8" font-family="Times,serif" font-size="14.00">actual int64</text>
<polyline fill="none" stroke="black" points="1973.5,-543 2106.5,-543 "/>
<text text-anchor="start" x="1981.5" y="-527.8" font-family="Times,serif" font-size="14.00">Valid bool</text>
<polyline fill="none" stroke="black" points="1973.5,-520 2106.5,-520 "/>
<text text-anchor="start" x="1981.5" y="-504.8" font-family="Times,serif" font-size="14.00">desc bool</text>
</g>
<!-- Feedback -->
<g id="node2" class="node">
<title>Feedback</title>
<polygon fill="none" stroke="black" points="2199.5,-584 2199.5,-699 2331.5,-699 2331.5,-584 2199.5,-584"/>
<text text-anchor="middle" x="2265.5" y="-683.8" font-family="Times,serif" font-size="14.00">Feedback</text>
<polyline fill="none" stroke="black" points="2199.5,-676 2331.5,-676 "/>
<text text-anchor="start" x="2207.5" y="-660.8" font-family="Times,serif" font-size="14.00">Lower *types.Datum</text>
<polyline fill="none" stroke="black" points="2199.5,-653 2331.5,-653 "/>
<text text-anchor="start" x="2207.5" y="-637.8" font-family="Times,serif" font-size="14.00">Upper *types.Datum</text>
<polyline fill="none" stroke="black" points="2199.5,-630 2331.5,-630 "/>
<text text-anchor="start" x="2207.5" y="-614.8" font-family="Times,serif" font-size="14.00">Count int64</text>
<polyline fill="none" stroke="black" points="2199.5,-607 2331.5,-607 "/>
<text text-anchor="start" x="2207.5" y="-591.8" font-family="Times,serif" font-size="14.00">Repeat int64</text>
</g>
<!-- Feedbacks&#45;&gt;Feedback -->
<g id="edge1" class="edge">
<title>Feedbacks:Feedback&#45;&gt;Feedback</title>
<path fill="none" stroke="#666666" d="M2108,-600.5C2135.15,-600.5 2164.1,-606.34 2189.63,-613.62"/>
<polygon fill="#666666" stroke="#666666" points="2188.66,-616.98 2199.24,-616.47 2190.65,-610.27 2188.66,-616.98"/>
</g>
<!-- getTableByPhysicalID -->
<g id="node17" class="node">
<title>getTableByPhysicalID</title>
<polygon fill="none" stroke="black" points="2169,-464.5 2169,-510.5 2362,-510.5 2362,-464.5 2169,-464.5"/>
<text text-anchor="middle" x="2265.5" y="-495.3" font-family="Times,serif" font-size="14.00">getTableByPhysicalID</text>
<polyline fill="none" stroke="black" points="2169,-487.5 2362,-487.5 "/>
<text text-anchor="start" x="2177" y="-472.3" font-family="Times,serif" font-size="14.00">根据PhysicalID获取Talbe信息</text>
</g>
<!-- Feedbacks&#45;&gt;getTableByPhysicalID -->
<g id="edge44" class="edge">
<title>Feedbacks&#45;&gt;getTableByPhysicalID</title>
<path fill="none" stroke="darkblue" stroke-dasharray="5,2" d="M2106.81,-555.41C2126.32,-543.14 2148.07,-530.5 2169,-520.5 2173.37,-518.41 2177.91,-516.39 2182.53,-514.45"/>
<polygon fill="darkblue" stroke="darkblue" points="2184.14,-517.57 2192.1,-510.57 2181.51,-511.08 2184.14,-517.57"/>
</g>
<!-- UpdateHistogram -->
<g id="node22" class="node">
<title>UpdateHistogram</title>
<polygon fill="none" stroke="black" points="2581,-573.5 2468,-573.5 2468,-537.5 2581,-537.5 2581,-573.5"/>
<text text-anchor="middle" x="2524.5" y="-551.8" font-family="Times,serif" font-size="14.00">UpdateHistogram</text>
</g>
<!-- Feedback&#45;&gt;UpdateHistogram -->
<g id="edge47" class="edge">
<title>Feedback&#45;&gt;UpdateHistogram</title>
<path fill="none" stroke="darkblue" stroke-dasharray="5,2" d="M2331.84,-609.21C2352.92,-599.67 2376.62,-589.82 2399,-582.5 2417.88,-576.32 2438.85,-571.15 2458.1,-567.05"/>
<polygon fill="darkblue" stroke="darkblue" points="2458.92,-570.45 2468,-565 2457.5,-563.6 2458.92,-570.45"/>
</g>
<!-- SplitFeedbackByQueryType -->
<g id="node23" class="node">
<title>SplitFeedbackByQueryType</title>
<polygon fill="none" stroke="black" points="2399,-592 2399,-691 2650,-691 2650,-592 2399,-592"/>
<text text-anchor="middle" x="2524.5" y="-675.8" font-family="Times,serif" font-size="14.00">SplitFeedbackByQueryType</text>
<polyline fill="none" stroke="black" points="2399,-668 2650,-668 "/>
<text text-anchor="start" x="2407" y="-652.8" font-family="Times,serif" font-size="14.00">splits the feedbacks into equality</text>
<text text-anchor="start" x="2407" y="-637.8" font-family="Times,serif" font-size="14.00"> feedbacks and range feedbacks</text>
<polyline fill="none" stroke="black" points="2399,-630 2650,-630 "/>
<text text-anchor="start" x="2407" y="-614.8" font-family="Times,serif" font-size="14.00">equality feedbacks 传给UpdateCMSKetch</text>
<text text-anchor="start" x="2407" y="-599.8" font-family="Times,serif" font-size="14.00"> range feedbacks 传给UpdateHistogram</text>
</g>
<!-- Feedback&#45;&gt;SplitFeedbackByQueryType -->
<g id="edge46" class="edge">
<title>Feedback&#45;&gt;SplitFeedbackByQueryType</title>
<path fill="none" stroke="darkblue" stroke-dasharray="5,2" d="M2331.68,-641.5C2349.24,-641.5 2368.9,-641.5 2388.75,-641.5"/>
<polygon fill="darkblue" stroke="darkblue" points="2388.83,-645 2398.83,-641.5 2388.83,-638 2388.83,-645"/>
</g>
<!-- UpdateCMSketch -->
<g id="node40" class="node">
<title>UpdateCMSketch</title>
<polygon fill="none" stroke="black" points="2581.5,-745.5 2467.5,-745.5 2467.5,-709.5 2581.5,-709.5 2581.5,-745.5"/>
<text text-anchor="middle" x="2524.5" y="-723.8" font-family="Times,serif" font-size="14.00">UpdateCMSketch</text>
</g>
<!-- Feedback&#45;&gt;UpdateCMSketch -->
<g id="edge48" class="edge">
<title>Feedback&#45;&gt;UpdateCMSketch</title>
<path fill="none" stroke="darkblue" stroke-dasharray="5,2" d="M2331.84,-673.79C2352.92,-683.33 2376.62,-693.18 2399,-700.5 2417.71,-706.62 2438.45,-711.75 2457.56,-715.83"/>
<polygon fill="darkblue" stroke="darkblue" points="2456.88,-719.27 2467.38,-717.88 2458.3,-712.41 2456.88,-719.27"/>
</g>
<!-- main -->
<g id="node3" class="node">
<title>main</title>
<polygon fill="none" stroke="black" points="87,-555.5 33,-555.5 33,-519.5 87,-519.5 87,-555.5"/>
<text text-anchor="middle" x="60" y="-533.8" font-family="Times,serif" font-size="14.00">main</text>
</g>
<!-- createStoreAndDomain -->
<g id="node4" class="node">
<title>createStoreAndDomain</title>
<polygon fill="none" stroke="black" points="302,-555.5 157,-555.5 157,-519.5 302,-519.5 302,-555.5"/>
<text text-anchor="middle" x="229.5" y="-533.8" font-family="Times,serif" font-size="14.00">createStoreAndDomain</text>
</g>
<!-- main&#45;&gt;createStoreAndDomain -->
<g id="edge2" class="edge">
<title>main&#45;&gt;createStoreAndDomain</title>
<path fill="none" stroke="#666666" d="M87.17,-537.5C103.38,-537.5 125.15,-537.5 146.75,-537.5"/>
<polygon fill="#666666" stroke="#666666" points="146.98,-541 156.98,-537.5 146.98,-534 146.98,-541"/>
</g>
<!-- BootstrapSession -->
<g id="node5" class="node">
<title>BootstrapSession</title>
<polygon fill="none" stroke="black" points="496.5,-555.5 386.5,-555.5 386.5,-519.5 496.5,-519.5 496.5,-555.5"/>
<text text-anchor="middle" x="441.5" y="-533.8" font-family="Times,serif" font-size="14.00">BootstrapSession</text>
</g>
<!-- createStoreAndDomain&#45;&gt;BootstrapSession -->
<g id="edge3" class="edge">
<title>createStoreAndDomain&#45;&gt;BootstrapSession</title>
<path fill="none" stroke="#666666" d="M302.18,-537.5C326.2,-537.5 352.8,-537.5 376.21,-537.5"/>
<polygon fill="#666666" stroke="#666666" points="376.38,-541 386.38,-537.5 376.38,-534 376.38,-541"/>
</g>
<!-- UpdateTableStatsLoop -->
<g id="node6" class="node">
<title>UpdateTableStatsLoop</title>
<polygon fill="none" stroke="black" points="740,-555.5 599,-555.5 599,-519.5 740,-519.5 740,-555.5"/>
<text text-anchor="middle" x="669.5" y="-533.8" font-family="Times,serif" font-size="14.00">UpdateTableStatsLoop</text>
</g>
<!-- BootstrapSession&#45;&gt;UpdateTableStatsLoop -->
<g id="edge4" class="edge">
<title>BootstrapSession&#45;&gt;UpdateTableStatsLoop</title>
<path fill="none" stroke="#666666" d="M496.63,-537.5C524.2,-537.5 558.26,-537.5 588.77,-537.5"/>
<polygon fill="#666666" stroke="#666666" points="588.96,-541 598.96,-537.5 588.96,-534 588.96,-541"/>
</g>
<!-- updateStatsWorker1 -->
<g id="node7" class="node">
<title>updateStatsWorker1</title>
<polygon fill="none" stroke="black" points="913.5,-519.5 913.5,-555.5 1033.5,-555.5 1033.5,-519.5 913.5,-519.5"/>
<text text-anchor="middle" x="973.5" y="-533.8" font-family="Times,serif" font-size="14.00">updateStatsWorker</text>
</g>
<!-- UpdateTableStatsLoop&#45;&gt;updateStatsWorker1 -->
<g id="edge5" class="edge">
<title>UpdateTableStatsLoop&#45;&gt;updateStatsWorker1</title>
<path fill="none" stroke="#666666" d="M740.16,-537.5C789.11,-537.5 854.32,-537.5 903.19,-537.5"/>
<polygon fill="#666666" stroke="#666666" points="903.36,-541 913.36,-537.5 903.36,-534 903.36,-541"/>
<text text-anchor="middle" x="783" y="-541.3" font-family="Times,serif" font-size="14.00">go</text>
</g>
<!-- updateStatsWorker -->
<g id="node8" class="node">
<title>updateStatsWorker</title>
<polygon fill="none" stroke="black" points="120,-187.5 0,-187.5 0,-151.5 120,-151.5 120,-187.5"/>
<text text-anchor="middle" x="60" y="-165.8" font-family="Times,serif" font-size="14.00">updateStatsWorker</text>
</g>
<!-- DumpStatsDeltaToKV -->
<g id="node9" class="node">
<title>DumpStatsDeltaToKV</title>
<polygon fill="none" stroke="black" points="512,-221.5 371,-221.5 371,-185.5 512,-185.5 512,-221.5"/>
<text text-anchor="middle" x="441.5" y="-199.8" font-family="Times,serif" font-size="14.00">DumpStatsDeltaToKV</text>
</g>
<!-- updateStatsWorker&#45;&gt;DumpStatsDeltaToKV -->
<g id="edge6" class="edge">
<title>updateStatsWorker&#45;&gt;DumpStatsDeltaToKV</title>
<path fill="none" stroke="#3f72af" d="M120.43,-174.57C169.22,-178.75 240.09,-184.9 302,-190.5 320.96,-192.22 341.38,-194.11 360.56,-195.9"/>
<polygon fill="#3f72af" stroke="#3f72af" points="360.48,-199.41 370.76,-196.86 361.13,-192.44 360.48,-199.41"/>
</g>
<!-- HandleDDLEvent -->
<g id="node10" class="node">
<title>HandleDDLEvent</title>
<polygon fill="none" stroke="black" points="339,-90 339,-151 544,-151 544,-90 339,-90"/>
<text text-anchor="middle" x="441.5" y="-135.8" font-family="Times,serif" font-size="14.00">HandleDDLEvent</text>
<polyline fill="none" stroke="black" points="339,-128 544,-128 "/>
<text text-anchor="start" x="347" y="-112.8" font-family="Times,serif" font-size="14.00">处理DDL owner发送到</text>
<text text-anchor="start" x="347" y="-97.8" font-family="Times,serif" font-size="14.00"> statsHandle.DDLEventCh的事件</text>
</g>
<!-- updateStatsWorker&#45;&gt;HandleDDLEvent -->
<g id="edge7" class="edge">
<title>updateStatsWorker&#45;&gt;HandleDDLEvent</title>
<path fill="none" stroke="#3f72af" d="M120.3,-161.84C175.93,-154.66 260.56,-143.73 328.85,-134.92"/>
<polygon fill="#3f72af" stroke="#3f72af" points="329.33,-138.38 338.8,-133.63 328.44,-131.44 329.33,-138.38"/>
</g>
<!-- FlushStats -->
<g id="node11" class="node">
<title>FlushStats</title>
<polygon fill="none" stroke="black" points="266,-235.5 193,-235.5 193,-199.5 266,-199.5 266,-235.5"/>
<text text-anchor="middle" x="229.5" y="-213.8" font-family="Times,serif" font-size="14.00">FlushStats</text>
</g>
<!-- updateStatsWorker&#45;&gt;FlushStats -->
<g id="edge8" class="edge">
<title>updateStatsWorker&#45;&gt;FlushStats</title>
<path fill="none" stroke="#3f72af" d="M120.05,-186.42C140.75,-192.35 163.65,-198.92 183.06,-204.48"/>
<polygon fill="#3f72af" stroke="#3f72af" points="182.28,-207.89 192.85,-207.29 184.21,-201.17 182.28,-207.89"/>
</g>
<!-- DumpStatsFeedbackToKV -->
<g id="node12" class="node">
<title>DumpStatsFeedbackToKV</title>
<polygon fill="none" stroke="black" points="523.5,-364.5 359.5,-364.5 359.5,-328.5 523.5,-328.5 523.5,-364.5"/>
<text text-anchor="middle" x="441.5" y="-342.8" font-family="Times,serif" font-size="14.00">DumpStatsFeedbackToKV</text>
</g>
<!-- updateStatsWorker&#45;&gt;DumpStatsFeedbackToKV -->
<g id="edge9" class="edge">
<title>updateStatsWorker&#45;&gt;DumpStatsFeedbackToKV</title>
<path fill="none" stroke="#3f72af" d="M80.28,-187.59C98.78,-204.19 128.11,-228.56 157,-244.5 222.48,-280.64 303.25,-308.22 361.81,-325.54"/>
<polygon fill="#3f72af" stroke="#3f72af" points="361.16,-329 371.74,-328.44 363.12,-322.28 361.16,-329"/>
</g>
<!-- GCStats -->
<g id="node13" class="node">
<title>GCStats</title>
<polygon fill="none" stroke="black" points="260.5,-103.5 198.5,-103.5 198.5,-67.5 260.5,-67.5 260.5,-103.5"/>
<text text-anchor="middle" x="229.5" y="-81.8" font-family="Times,serif" font-size="14.00">GCStats</text>
</g>
<!-- updateStatsWorker&#45;&gt;GCStats -->
<g id="edge10" class="edge">
<title>updateStatsWorker&#45;&gt;GCStats</title>
<path fill="none" stroke="#3f72af" d="M84.31,-151.46C99.11,-140.61 118.99,-127.08 138,-117.5 154.02,-109.42 172.57,-102.48 188.69,-97.15"/>
<polygon fill="#3f72af" stroke="#3f72af" points="189.92,-100.43 198.37,-94.04 187.78,-93.76 189.92,-100.43"/>
</g>
<!-- globalMap -->
<g id="node24" class="node">
<title>globalMap</title>
<polygon fill="none" stroke="black" points="707.5,-148.5 631.5,-148.5 631.5,-112.5 707.5,-112.5 707.5,-148.5"/>
<text text-anchor="middle" x="669.5" y="-126.8" font-family="Times,serif" font-size="14.00">globalMap</text>
</g>
<!-- DumpStatsDeltaToKV&#45;&gt;globalMap -->
<g id="edge20" class="edge">
<title>DumpStatsDeltaToKV&#45;&gt;globalMap</title>
<path fill="none" stroke="#666666" d="M496.02,-185.43C521.68,-176.84 552.89,-166.5 581,-157.5 594.15,-153.29 608.45,-148.83 621.61,-144.77"/>
<polygon fill="#666666" stroke="#666666" points="622.87,-148.04 631.4,-141.76 620.82,-141.35 622.87,-148.04"/>
</g>
<!-- needDumpStatsDelta -->
<g id="node25" class="node">
<title>needDumpStatsDelta</title>
<polygon fill="none" stroke="black" points="735.5,-310.5 603.5,-310.5 603.5,-274.5 735.5,-274.5 735.5,-310.5"/>
<text text-anchor="middle" x="669.5" y="-288.8" font-family="Times,serif" font-size="14.00">needDumpStatsDelta</text>
</g>
<!-- DumpStatsDeltaToKV&#45;&gt;needDumpStatsDelta -->
<g id="edge21" class="edge">
<title>DumpStatsDeltaToKV&#45;&gt;needDumpStatsDelta</title>
<path fill="none" stroke="#666666" d="M479.61,-221.59C507.21,-234.68 545.99,-252.32 581,-265.5 586.11,-267.43 591.43,-269.32 596.81,-271.16"/>
<polygon fill="#666666" stroke="#666666" points="595.92,-274.55 606.51,-274.4 598.14,-267.91 595.92,-274.55"/>
</g>
<!-- dumpTableStatCountToKV -->
<g id="node26" class="node">
<title>dumpTableStatCountToKV</title>
<polygon fill="none" stroke="black" points="753,-256.5 586,-256.5 586,-220.5 753,-220.5 753,-256.5"/>
<text text-anchor="middle" x="669.5" y="-234.8" font-family="Times,serif" font-size="14.00">dumpTableStatCountToKV</text>
</g>
<!-- DumpStatsDeltaToKV&#45;&gt;dumpTableStatCountToKV -->
<g id="edge22" class="edge">
<title>DumpStatsDeltaToKV&#45;&gt;dumpTableStatCountToKV</title>
<path fill="none" stroke="#666666" d="M512.15,-214.29C532.31,-217.41 554.63,-220.86 575.94,-224.17"/>
<polygon fill="#666666" stroke="#666666" points="575.57,-227.65 585.98,-225.72 576.64,-220.73 575.57,-227.65"/>
</g>
<!-- dumpTableStatColSizeToKV -->
<g id="node27" class="node">
<title>dumpTableStatColSizeToKV</title>
<polygon fill="none" stroke="black" points="758,-202.5 581,-202.5 581,-166.5 758,-166.5 758,-202.5"/>
<text text-anchor="middle" x="669.5" y="-180.8" font-family="Times,serif" font-size="14.00">dumpTableStatColSizeToKV</text>
</g>
<!-- DumpStatsDeltaToKV&#45;&gt;dumpTableStatColSizeToKV -->
<g id="edge23" class="edge">
<title>DumpStatsDeltaToKV&#45;&gt;dumpTableStatColSizeToKV</title>
<path fill="none" stroke="#666666" d="M512.15,-197.64C530.6,-196.09 550.86,-194.39 570.5,-192.74"/>
<polygon fill="#666666" stroke="#666666" points="571.03,-196.21 580.7,-191.88 570.45,-189.23 571.03,-196.21"/>
</g>
<!-- insertTableStats2KV -->
<g id="node36" class="node">
<title>insertTableStats2KV</title>
<polygon fill="none" stroke="black" points="734.5,-94.5 604.5,-94.5 604.5,-58.5 734.5,-58.5 734.5,-94.5"/>
<text text-anchor="middle" x="669.5" y="-72.8" font-family="Times,serif" font-size="14.00">insertTableStats2KV</text>
</g>
<!-- HandleDDLEvent&#45;&gt;insertTableStats2KV -->
<g id="edge38" class="edge">
<title>HandleDDLEvent&#45;&gt;insertTableStats2KV</title>
<path fill="none" stroke="#666666" d="M544.26,-100.69C560.98,-97.43 578.04,-94.11 593.94,-91.02"/>
<polygon fill="#666666" stroke="#666666" points="595.06,-94.36 604.21,-89.02 593.72,-87.49 595.06,-94.36"/>
</g>
<!-- insertColStats2KV -->
<g id="node37" class="node">
<title>insertColStats2KV</title>
<polygon fill="none" stroke="black" points="729,-40.5 610,-40.5 610,-4.5 729,-4.5 729,-40.5"/>
<text text-anchor="middle" x="669.5" y="-18.8" font-family="Times,serif" font-size="14.00">insertColStats2KV</text>
</g>
<!-- HandleDDLEvent&#45;&gt;insertColStats2KV -->
<g id="edge39" class="edge">
<title>HandleDDLEvent&#45;&gt;insertColStats2KV</title>
<path fill="none" stroke="#666666" d="M496.73,-89.92C521.88,-76.46 552.47,-61.11 581,-49.5 587.13,-47 593.59,-44.6 600.1,-42.34"/>
<polygon fill="#666666" stroke="#666666" points="601.29,-45.63 609.64,-39.11 599.05,-39 601.29,-45.63"/>
</g>
<!-- FlushStats&#45;&gt;DumpStatsDeltaToKV -->
<g id="edge35" class="edge">
<title>FlushStats&#45;&gt;DumpStatsDeltaToKV</title>
<path fill="none" stroke="#666666" d="M266.12,-215.13C292,-213.4 328.05,-211 360.66,-208.82"/>
<polygon fill="#666666" stroke="#666666" points="360.91,-212.31 370.66,-208.16 360.44,-205.33 360.91,-212.31"/>
</g>
<!-- FlushStats&#45;&gt;HandleDDLEvent -->
<g id="edge36" class="edge">
<title>FlushStats&#45;&gt;HandleDDLEvent</title>
<path fill="none" stroke="#666666" d="M266.12,-201.05C293.08,-188.59 331.07,-171.04 364.72,-155.5"/>
<polygon fill="#666666" stroke="#666666" points="366.47,-158.55 374.08,-151.18 363.54,-152.19 366.47,-158.55"/>
</g>
<!-- FlushStats&#45;&gt;DumpStatsFeedbackToKV -->
<g id="edge37" class="edge">
<title>FlushStats&#45;&gt;DumpStatsFeedbackToKV</title>
<path fill="none" stroke="#666666" d="M260.14,-235.71C297.43,-258.61 361.51,-297.98 402.4,-323.1"/>
<polygon fill="#666666" stroke="#666666" points="400.66,-326.13 411.01,-328.38 404.32,-320.17 400.66,-326.13"/>
</g>
<!-- DumpFeedbackToKV -->
<g id="node31" class="node">
<title>DumpFeedbackToKV</title>
<polygon fill="none" stroke="black" points="738,-472.5 601,-472.5 601,-436.5 738,-436.5 738,-472.5"/>
<text text-anchor="middle" x="669.5" y="-450.8" font-family="Times,serif" font-size="14.00">DumpFeedbackToKV</text>
</g>
<!-- DumpStatsFeedbackToKV&#45;&gt;DumpFeedbackToKV -->
<g id="edge27" class="edge">
<title>DumpStatsFeedbackToKV&#45;&gt;DumpFeedbackToKV</title>
<path fill="none" stroke="#666666" d="M469.11,-364.56C496.3,-382.41 540.2,-409.56 581,-427.5 585.32,-429.4 589.82,-431.22 594.39,-432.96"/>
<polygon fill="#666666" stroke="#666666" points="593.25,-436.27 603.84,-436.4 595.65,-429.69 593.25,-436.27"/>
</g>
<!-- DumpFeedbackForIndex -->
<g id="node32" class="node">
<title>DumpFeedbackForIndex</title>
<polygon fill="none" stroke="black" points="745.5,-418.5 593.5,-418.5 593.5,-382.5 745.5,-382.5 745.5,-418.5"/>
<text text-anchor="middle" x="669.5" y="-396.8" font-family="Times,serif" font-size="14.00">DumpFeedbackForIndex</text>
</g>
<!-- DumpStatsFeedbackToKV&#45;&gt;DumpFeedbackForIndex -->
<g id="edge28" class="edge">
<title>DumpStatsFeedbackToKV&#45;&gt;DumpFeedbackForIndex</title>
<path fill="none" stroke="#666666" d="M518.07,-364.56C539.1,-369.58 562.08,-375.07 583.61,-380.22"/>
<polygon fill="#666666" stroke="#666666" points="582.85,-383.63 593.39,-382.55 584.47,-376.82 582.85,-383.63"/>
</g>
<!-- NewQueryFeedbackMap -->
<g id="node33" class="node">
<title>NewQueryFeedbackMap</title>
<polygon fill="none" stroke="black" points="746,-364.5 593,-364.5 593,-328.5 746,-328.5 746,-364.5"/>
<text text-anchor="middle" x="669.5" y="-342.8" font-family="Times,serif" font-size="14.00">NewQueryFeedbackMap</text>
</g>
<!-- DumpStatsFeedbackToKV&#45;&gt;NewQueryFeedbackMap -->
<g id="edge29" class="edge">
<title>DumpStatsFeedbackToKV&#45;&gt;NewQueryFeedbackMap</title>
<path fill="none" stroke="#666666" d="M523.77,-346.5C542.95,-346.5 563.46,-346.5 582.83,-346.5"/>
<polygon fill="#666666" stroke="#666666" points="582.84,-350 592.84,-346.5 582.84,-343 582.84,-350"/>
</g>
<!-- sql1 -->
<g id="node14" class="node">
<title>sql1</title>
<polygon fill="none" stroke="black" points="1482,-465.5 1482,-503.5 1650,-503.5 1650,-465.5 1482,-465.5"/>
<text text-anchor="start" x="1490" y="-488.3" font-family="Times,serif" font-size="14.00">SELECT distinct table_id </text>
<text text-anchor="start" x="1490" y="-473.3" font-family="Times,serif" font-size="14.00"> from mysql.stats_feedback</text>
</g>
<!-- sql2 -->
<g id="node15" class="node">
<title>sql2</title>
<polygon fill="none" stroke="black" points="1687,-392 1687,-505 1911,-505 1911,-392 1687,-392"/>
<text text-anchor="start" x="1695" y="-489.8" font-family="Times,serif" font-size="14.00">select </text>
<text text-anchor="start" x="1695" y="-474.8" font-family="Times,serif" font-size="14.00"> table_id,</text>
<text text-anchor="start" x="1695" y="-459.8" font-family="Times,serif" font-size="14.00"> hist_id,</text>
<text text-anchor="start" x="1695" y="-444.8" font-family="Times,serif" font-size="14.00"> is_index,</text>
<text text-anchor="start" x="1695" y="-429.8" font-family="Times,serif" font-size="14.00"> feedback from mysql.stats_feedback </text>
<text text-anchor="start" x="1695" y="-414.8" font-family="Times,serif" font-size="14.00"> where table_id=%d </text>
<text text-anchor="start" x="1695" y="-399.8" font-family="Times,serif" font-size="14.00"> order by hist_id, is_index</text>
</g>
<!-- sql1&#45;&gt;sql2 -->
<g id="edge11" class="edge">
<title>sql1&#45;&gt;sql2</title>
<path fill="none" stroke="darkgreen" stroke-dasharray="5,2" d="M1650.07,-471.55C1658.72,-470.21 1667.63,-468.82 1676.58,-467.42"/>
<polygon fill="darkgreen" stroke="darkgreen" points="1677.36,-470.84 1686.71,-465.84 1676.29,-463.93 1677.36,-470.84"/>
</g>
<!-- handleSingleHistogramUpdate -->
<g id="node16" class="node">
<title>handleSingleHistogramUpdate</title>
<polygon fill="none" stroke="black" points="2132,-466.5 1948,-466.5 1948,-430.5 2132,-430.5 2132,-466.5"/>
<text text-anchor="middle" x="2040" y="-444.8" font-family="Times,serif" font-size="14.00">handleSingleHistogramUpdate</text>
</g>
<!-- sql2&#45;&gt;handleSingleHistogramUpdate -->
<g id="edge12" class="edge">
<title>sql2&#45;&gt;handleSingleHistogramUpdate</title>
<path fill="none" stroke="darkgreen" stroke-dasharray="5,2" d="M1911.1,-448.5C1919.95,-448.5 1928.86,-448.5 1937.64,-448.5"/>
<polygon fill="darkgreen" stroke="darkgreen" points="1937.87,-452 1947.87,-448.5 1937.87,-445 1937.87,-452"/>
</g>
<!-- handleSingleHistogramUpdate&#45;&gt;getTableByPhysicalID -->
<g id="edge13" class="edge">
<title>handleSingleHistogramUpdate&#45;&gt;getTableByPhysicalID</title>
<path fill="none" stroke="#666666" d="M2132.23,-464.42C2141,-465.95 2149.94,-467.51 2158.84,-469.06"/>
<polygon fill="#666666" stroke="#666666" points="2158.39,-472.54 2168.84,-470.81 2159.59,-465.64 2158.39,-472.54"/>
</g>
<!-- GetPartitionStats -->
<g id="node18" class="node">
<title>GetPartitionStats</title>
<polygon fill="none" stroke="black" points="2441.5,-386 2441.5,-447 2607.5,-447 2607.5,-386 2441.5,-386"/>
<text text-anchor="middle" x="2524.5" y="-431.8" font-family="Times,serif" font-size="14.00">GetPartitionStats</text>
<polyline fill="none" stroke="black" points="2441.5,-424 2607.5,-424 "/>
<text text-anchor="start" x="2449.5" y="-408.8" font-family="Times,serif" font-size="14.00">根据TableInfo获取Partion</text>
<text text-anchor="start" x="2449.5" y="-393.8" font-family="Times,serif" font-size="14.00"> stats from cache</text>
</g>
<!-- handleSingleHistogramUpdate&#45;&gt;GetPartitionStats -->
<g id="edge14" class="edge">
<title>handleSingleHistogramUpdate&#45;&gt;GetPartitionStats</title>
<path fill="none" stroke="#666666" d="M2078.35,-430.42C2103.35,-419.35 2137.36,-406.24 2169,-400.5 2257.15,-384.52 2359.53,-391.85 2431.54,-401.17"/>
<polygon fill="#666666" stroke="#666666" points="2431.12,-404.65 2441.49,-402.5 2432.04,-397.71 2431.12,-404.65"/>
</g>
<!-- DecodeFeedback -->
<g id="node19" class="node">
<title>DecodeFeedback</title>
<polygon fill="none" stroke="black" points="2320.5,-445.5 2210.5,-445.5 2210.5,-409.5 2320.5,-409.5 2320.5,-445.5"/>
<text text-anchor="middle" x="2265.5" y="-423.8" font-family="Times,serif" font-size="14.00">DecodeFeedback</text>
</g>
<!-- handleSingleHistogramUpdate&#45;&gt;DecodeFeedback -->
<g id="edge15" class="edge">
<title>handleSingleHistogramUpdate&#45;&gt;DecodeFeedback</title>
<path fill="none" stroke="#666666" d="M2132.23,-439.93C2155.05,-437.78 2179.05,-435.53 2200.25,-433.54"/>
<polygon fill="#666666" stroke="#666666" points="2200.79,-437 2210.42,-432.58 2200.13,-430.03 2200.79,-437"/>
</g>
<!-- dumpStatsUpdateToKV -->
<g id="node20" class="node">
<title>dumpStatsUpdateToKV</title>
<polygon fill="none" stroke="black" points="2339.5,-565.5 2191.5,-565.5 2191.5,-529.5 2339.5,-529.5 2339.5,-565.5"/>
<text text-anchor="middle" x="2265.5" y="-543.8" font-family="Times,serif" font-size="14.00">dumpStatsUpdateToKV</text>
</g>
<!-- handleSingleHistogramUpdate&#45;&gt;dumpStatsUpdateToKV -->
<g id="edge16" class="edge">
<title>handleSingleHistogramUpdate&#45;&gt;dumpStatsUpdateToKV</title>
<path fill="none" stroke="#666666" d="M2091.12,-466.55C2104.83,-472.4 2119.38,-479.47 2132,-487.5 2150.59,-499.33 2149.68,-509.9 2169,-520.5 2173.17,-522.79 2177.55,-524.9 2182.05,-526.84"/>
<polygon fill="#666666" stroke="#666666" points="2180.84,-530.12 2191.42,-530.59 2183.44,-523.62 2180.84,-530.12"/>
</g>
<!-- getTableByPhysicalID&#45;&gt;GetPartitionStats -->
<g id="edge45" class="edge">
<title>getTableByPhysicalID&#45;&gt;GetPartitionStats</title>
<path fill="none" stroke="darkblue" stroke-dasharray="5,2" d="M2349.94,-464.45C2376.05,-457.24 2405,-449.24 2431.65,-441.88"/>
<polygon fill="darkblue" stroke="darkblue" points="2432.65,-445.23 2441.36,-439.19 2430.78,-438.48 2432.65,-445.23"/>
</g>
<!-- SaveStatsToStorage -->
<g id="node21" class="node">
<title>SaveStatsToStorage</title>
<polygon fill="none" stroke="black" points="2812,-539.5 2687,-539.5 2687,-503.5 2812,-503.5 2812,-539.5"/>
<text text-anchor="middle" x="2749.5" y="-517.8" font-family="Times,serif" font-size="14.00">SaveStatsToStorage</text>
</g>
<!-- dumpStatsUpdateToKV&#45;&gt;SaveStatsToStorage -->
<g id="edge17" class="edge">
<title>dumpStatsUpdateToKV&#45;&gt;SaveStatsToStorage</title>
<path fill="none" stroke="#666666" d="M2339.56,-535.39C2358.84,-532.64 2379.66,-530.07 2399,-528.5 2494.85,-520.7 2605.95,-519.87 2676.69,-520.38"/>
<polygon fill="#666666" stroke="#666666" points="2676.8,-523.88 2686.83,-520.46 2676.86,-516.88 2676.8,-523.88"/>
</g>
<!-- dumpStatsUpdateToKV&#45;&gt;UpdateHistogram -->
<g id="edge18" class="edge">
<title>dumpStatsUpdateToKV&#45;&gt;UpdateHistogram</title>
<path fill="none" stroke="#666666" d="M2339.8,-549.78C2376.8,-550.93 2421.34,-552.32 2457.29,-553.44"/>
<polygon fill="#666666" stroke="#666666" points="2457.57,-556.95 2467.67,-553.76 2457.79,-549.95 2457.57,-556.95"/>
</g>
<!-- UpdateHistogram&#45;&gt;SaveStatsToStorage -->
<g id="edge19" class="edge">
<title>UpdateHistogram&#45;&gt;SaveStatsToStorage</title>
<path fill="none" stroke="darkgreen" stroke-dasharray="5,2" d="M2581.2,-547.01C2610.18,-542.59 2645.95,-537.14 2676.96,-532.41"/>
<polygon fill="darkgreen" stroke="darkgreen" points="2677.49,-535.87 2686.85,-530.9 2676.43,-528.95 2677.49,-535.87"/>
</g>
<!-- update_mysql_stats_meta -->
<g id="node28" class="node">
<title>update_mysql_stats_meta</title>
<polygon fill="none" stroke="black" points="1052.5,-310.5 894.5,-310.5 894.5,-274.5 1052.5,-274.5 1052.5,-310.5"/>
<text text-anchor="middle" x="973.5" y="-288.8" font-family="Times,serif" font-size="14.00">update_mysql_stats_meta</text>
</g>
<!-- dumpTableStatCountToKV&#45;&gt;update_mysql_stats_meta -->
<g id="edge24" class="edge">
<title>dumpTableStatCountToKV&#45;&gt;update_mysql_stats_meta</title>
<path fill="none" stroke="#666666" d="M753.31,-255.2C771.32,-258.7 790.28,-262.31 808,-265.5 832.66,-269.94 859.45,-274.47 884.11,-278.51"/>
<polygon fill="#666666" stroke="#666666" points="883.74,-282 894.18,-280.16 884.87,-275.09 883.74,-282"/>
</g>
<!-- execSQL -->
<g id="node29" class="node">
<title>execSQL</title>
<polygon fill="none" stroke="black" points="1007,-256.5 940,-256.5 940,-220.5 1007,-220.5 1007,-256.5"/>
<text text-anchor="middle" x="973.5" y="-234.8" font-family="Times,serif" font-size="14.00">execSQL</text>
</g>
<!-- dumpTableStatCountToKV&#45;&gt;execSQL -->
<g id="edge25" class="edge">
<title>dumpTableStatCountToKV&#45;&gt;execSQL</title>
<path fill="none" stroke="#666666" d="M753.02,-238.5C810.22,-238.5 884.04,-238.5 929.82,-238.5"/>
<polygon fill="#666666" stroke="#666666" points="929.98,-242 939.98,-238.5 929.98,-235 929.98,-242"/>
</g>
<!-- insert_into_mysql_stats_histograms -->
<g id="node30" class="node">
<title>insert_into_mysql_stats_histograms</title>
<polygon fill="none" stroke="black" points="808,-133.5 808,-201.5 1139,-201.5 1139,-133.5 808,-133.5"/>
<text text-anchor="start" x="816" y="-186.3" font-family="Times,serif" font-size="14.00">insert into mysql.stats_histograms</text>
<text text-anchor="start" x="816" y="-171.3" font-family="Times,serif" font-size="14.00"> (table_id, is_index, hist_id, distinct_count, tot_col_size) </text>
<text text-anchor="start" x="816" y="-156.3" font-family="Times,serif" font-size="14.00"> ...</text>
<text text-anchor="start" x="816" y="-141.3" font-family="Times,serif" font-size="14.00"> on duplicate key update ...</text>
</g>
<!-- dumpTableStatColSizeToKV&#45;&gt;insert_into_mysql_stats_histograms -->
<g id="edge26" class="edge">
<title>dumpTableStatColSizeToKV&#45;&gt;insert_into_mysql_stats_histograms</title>
<path fill="none" stroke="#666666" d="M758.26,-179.56C770.75,-178.86 783.94,-178.11 797.4,-177.36"/>
<polygon fill="#666666" stroke="#666666" points="797.94,-180.83 807.73,-176.78 797.55,-173.84 797.94,-180.83"/>
</g>
<!-- EncodeFeedback -->
<g id="node34" class="node">
<title>EncodeFeedback</title>
<polygon fill="none" stroke="black" points="1028,-500.5 919,-500.5 919,-464.5 1028,-464.5 1028,-500.5"/>
<text text-anchor="middle" x="973.5" y="-478.8" font-family="Times,serif" font-size="14.00">EncodeFeedback</text>
</g>
<!-- DumpFeedbackToKV&#45;&gt;EncodeFeedback -->
<g id="edge30" class="edge">
<title>DumpFeedbackToKV&#45;&gt;EncodeFeedback</title>
<path fill="none" stroke="#666666" d="M738.27,-460.78C789.2,-465.51 858.49,-471.93 908.48,-476.56"/>
<polygon fill="#666666" stroke="#666666" points="908.24,-480.06 918.52,-477.5 908.89,-473.09 908.24,-480.06"/>
</g>
<!-- insert_into_mysql_stats_feedback -->
<g id="node35" class="node">
<title>insert_into_mysql_stats_feedback</title>
<polygon fill="none" stroke="black" points="1176,-422 1176,-475 1445,-475 1445,-422 1176,-422"/>
<text text-anchor="start" x="1184" y="-459.8" font-family="Times,serif" font-size="14.00">insert into mysql.stats_feedback</text>
<text text-anchor="start" x="1184" y="-444.8" font-family="Times,serif" font-size="14.00"> (table_id, hist_id, is_index, feedback) values </text>
<text text-anchor="start" x="1184" y="-429.8" font-family="Times,serif" font-size="14.00"> ...</text>
</g>
<!-- DumpFeedbackToKV&#45;&gt;insert_into_mysql_stats_feedback -->
<g id="edge31" class="edge">
<title>DumpFeedbackToKV&#45;&gt;insert_into_mysql_stats_feedback</title>
<path fill="none" stroke="#666666" d="M738.28,-453.86C839.39,-452.91 1032.11,-451.1 1165.56,-449.85"/>
<polygon fill="#666666" stroke="#666666" points="1165.9,-453.35 1175.87,-449.75 1165.83,-446.35 1165.9,-453.35"/>
</g>
<!-- EncodeFeedback&#45;&gt;insert_into_mysql_stats_feedback -->
<g id="edge32" class="edge">
<title>EncodeFeedback&#45;&gt;insert_into_mysql_stats_feedback</title>
<path fill="none" stroke="darkred" stroke-dasharray="5,2" d="M1028.32,-477.04C1065.61,-473.25 1117.13,-468.02 1165.89,-463.07"/>
<polygon fill="darkred" stroke="darkred" points="1166.33,-466.55 1175.93,-462.06 1165.63,-459.58 1166.33,-466.55"/>
</g>
<!-- insert_into_mysql_stats_feedback&#45;&gt;sql1 -->
<g id="edge33" class="edge">
<title>insert_into_mysql_stats_feedback&#45;&gt;sql1</title>
<path fill="none" stroke="darkred" stroke-dasharray="5,2" d="M1445.3,-467.5C1454.2,-468.76 1463.05,-470.02 1471.68,-471.25"/>
<polygon fill="darkred" stroke="darkred" points="1471.3,-474.73 1481.69,-472.67 1472.28,-467.8 1471.3,-474.73"/>
</g>
<!-- insert_into_mysql_stats_feedback&#45;&gt;sql2 -->
<g id="edge34" class="edge">
<title>insert_into_mysql_stats_feedback&#45;&gt;sql2</title>
<path fill="none" stroke="darkred" stroke-dasharray="5,2" d="M1445.08,-448.5C1517.47,-448.5 1606.25,-448.5 1676.65,-448.5"/>
<polygon fill="darkred" stroke="darkred" points="1676.9,-452 1686.9,-448.5 1676.9,-445 1676.9,-452"/>
</g>
<!-- mysql_stats_meta -->
<g id="node38" class="node">
<title>mysql_stats_meta</title>
<polygon fill="none" stroke="black" points="867.5,-0.5 867.5,-38.5 1079.5,-38.5 1079.5,-0.5 867.5,-0.5"/>
<text text-anchor="start" x="875.5" y="-23.3" font-family="Times,serif" font-size="14.00">insert into mysql.stats_meta</text>
<text text-anchor="start" x="875.5" y="-8.3" font-family="Times,serif" font-size="14.00"> (version, table_id) values(%d, %d)</text>
</g>
<!-- insertTableStats2KV&#45;&gt;mysql_stats_meta -->
<g id="edge40" class="edge">
<title>insertTableStats2KV&#45;&gt;mysql_stats_meta</title>
<path fill="none" stroke="#666666" d="M734.51,-64.39C757.66,-60.01 784.01,-55.03 808,-50.5 825.35,-47.23 843.73,-43.76 861.67,-40.38"/>
<polygon fill="#666666" stroke="#666666" points="862.4,-43.8 871.58,-38.51 861.11,-36.92 862.4,-43.8"/>
</g>
<!-- mysql_stats_histograms -->
<g id="node39" class="node">
<title>mysql_stats_histograms</title>
<polygon fill="none" stroke="black" points="822.5,-60 822.5,-113 1124.5,-113 1124.5,-60 822.5,-60"/>
<text text-anchor="start" x="830.5" y="-97.8" font-family="Times,serif" font-size="14.00">insert into mysql.stats_histograms </text>
<text text-anchor="start" x="830.5" y="-82.8" font-family="Times,serif" font-size="14.00"> (table_id, is_index, hist_id, distinct_count, version)</text>
<text text-anchor="start" x="830.5" y="-67.8" font-family="Times,serif" font-size="14.00"> values(%d, 1, %d, 0, %d)</text>
</g>
<!-- insertTableStats2KV&#45;&gt;mysql_stats_histograms -->
<g id="edge41" class="edge">
<title>insertTableStats2KV&#45;&gt;mysql_stats_histograms</title>
<path fill="none" stroke="#666666" d="M734.55,-78.62C757.6,-79.38 784.76,-80.28 812.32,-81.2"/>
<polygon fill="#666666" stroke="#666666" points="812.38,-84.7 822.49,-81.53 812.61,-77.7 812.38,-84.7"/>
</g>
<!-- insertColStats2KV&#45;&gt;mysql_stats_meta -->
<g id="edge42" class="edge">
<title>insertColStats2KV&#45;&gt;mysql_stats_meta</title>
<path fill="none" stroke="#666666" d="M729.09,-21.92C765.45,-21.56 813.43,-21.08 857.17,-20.65"/>
<polygon fill="#666666" stroke="#666666" points="857.34,-24.14 867.31,-20.54 857.27,-17.14 857.34,-24.14"/>
</g>
<!-- insertColStats2KV&#45;&gt;mysql_stats_histograms -->
<g id="edge43" class="edge">
<title>insertColStats2KV&#45;&gt;mysql_stats_histograms</title>
<path fill="none" stroke="#666666" d="M729.09,-34.92C759.95,-41.46 799.18,-49.77 837.09,-57.8"/>
<polygon fill="#666666" stroke="#666666" points="836.7,-61.3 847.21,-59.95 838.15,-54.45 836.7,-61.3"/>
</g>
</g>
</svg>
