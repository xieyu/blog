<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: campaign_owner Pages: 1 -->
<svg width="2861pt" height="914pt"
 viewBox="0.00 0.00 2861.00 914.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 910)">
<title>campaign_owner</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-910 2857,-910 2857,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_KVClient</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M2345,-314C2345,-314 2833,-314 2833,-314 2839,-314 2845,-320 2845,-326 2845,-326 2845,-384 2845,-384 2845,-390 2839,-396 2833,-396 2833,-396 2345,-396 2345,-396 2339,-396 2333,-390 2333,-384 2333,-384 2333,-326 2333,-326 2333,-320 2339,-314 2345,-314"/>
<text text-anchor="middle" x="2589" y="-376" font-family="Times,serif" font-size="20.00">KVClient</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_txn</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M2185.5,-688C2185.5,-688 2698,-688 2698,-688 2704,-688 2710,-694 2710,-700 2710,-700 2710,-886 2710,-886 2710,-892 2704,-898 2698,-898 2698,-898 2185.5,-898 2185.5,-898 2179.5,-898 2173.5,-892 2173.5,-886 2173.5,-886 2173.5,-700 2173.5,-700 2173.5,-694 2179.5,-688 2185.5,-688"/>
<text text-anchor="middle" x="2441.75" y="-878" font-family="Times,serif" font-size="20.00">txn</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_Election</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M899.5,-404C899.5,-404 2435,-404 2435,-404 2441,-404 2447,-410 2447,-416 2447,-416 2447,-668 2447,-668 2447,-674 2441,-680 2435,-680 2435,-680 899.5,-680 899.5,-680 893.5,-680 887.5,-674 887.5,-668 887.5,-668 887.5,-416 887.5,-416 887.5,-410 893.5,-404 899.5,-404"/>
<text text-anchor="middle" x="1667.25" y="-660" font-family="Times,serif" font-size="20.00">Election</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_ownerManager</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M118.5,-162C118.5,-162 2072,-162 2072,-162 2078,-162 2084,-168 2084,-174 2084,-174 2084,-384 2084,-384 2084,-390 2078,-396 2072,-396 2072,-396 118.5,-396 118.5,-396 112.5,-396 106.5,-390 106.5,-384 106.5,-384 106.5,-174 106.5,-174 106.5,-168 112.5,-162 118.5,-162"/>
<text text-anchor="middle" x="1095.25" y="-376" font-family="Times,serif" font-size="20.00">ownerManager</text>
</g>
<g id="clust14" class="cluster">
<title>cluster_worker</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M111,-8C111,-8 842,-8 842,-8 848,-8 854,-14 854,-20 854,-20 854,-142 854,-142 854,-148 848,-154 842,-154 842,-154 111,-154 111,-154 105,-154 99,-148 99,-142 99,-142 99,-20 99,-20 99,-14 105,-8 111,-8"/>
<text text-anchor="middle" x="476.5" y="-134" font-family="Times,serif" font-size="20.00">worke</text>
</g>
<g id="clust15" class="cluster">
<title>cluster_ddl</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-144C20,-144 66,-144 66,-144 72,-144 78,-150 78,-156 78,-156 78,-214 78,-214 78,-220 72,-226 66,-226 66,-226 20,-226 20,-226 14,-226 8,-220 8,-214 8,-214 8,-156 8,-156 8,-150 14,-144 20,-144"/>
<text text-anchor="middle" x="43" y="-206" font-family="Times,serif" font-size="20.00">ddl</text>
</g>
<!-- KVClient_Txn -->
<g id="node1" class="node">
<title>KVClient_Txn</title>
<polygon fill="none" stroke="black" points="2837,-358 2739,-358 2739,-322 2837,-322 2837,-358"/>
<text text-anchor="middle" x="2788" y="-336.3" font-family="Times,serif" font-size="14.00">KVClient_Txn</text>
</g>
<!-- KVClient_Get -->
<g id="node2" class="node">
<title>KVClient_Get</title>
<polygon fill="none" stroke="black" points="2436,-358 2341,-358 2341,-322 2436,-322 2436,-358"/>
<text text-anchor="middle" x="2388.5" y="-336.3" font-family="Times,serif" font-size="14.00">KVClient_Get</text>
</g>
<!-- cmps -->
<g id="node3" class="node">
<title>cmps</title>
<polygon fill="turquoise" stroke="black" points="2529,-697 2529,-733 2583,-733 2583,-697 2529,-697"/>
<text text-anchor="middle" x="2556" y="-711.3" font-family="Times,serif" font-size="14.00">cmps</text>
</g>
<!-- TxnRequest -->
<g id="node10" class="node">
<title>TxnRequest</title>
<polygon fill="none" stroke="black" points="2702,-774 2620,-774 2620,-738 2702,-738 2702,-774"/>
<text text-anchor="middle" x="2661" y="-752.3" font-family="Times,serif" font-size="14.00">TxnRequest</text>
</g>
<!-- cmps&#45;&gt;TxnRequest -->
<g id="edge5" class="edge">
<title>cmps&#45;&gt;TxnRequest</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M2583.26,-725.45C2591.57,-728.76 2601.05,-732.54 2610.45,-736.28"/>
<polygon fill="#666666" stroke="#666666" points="2609.18,-739.54 2619.77,-739.98 2611.77,-733.03 2609.18,-739.54"/>
</g>
<!-- sus -->
<g id="node4" class="node">
<title>sus</title>
<polygon fill="turquoise" stroke="black" points="2529,-752 2529,-788 2583,-788 2583,-752 2529,-752"/>
<text text-anchor="middle" x="2556" y="-766.3" font-family="Times,serif" font-size="14.00">sus</text>
</g>
<!-- sus&#45;&gt;TxnRequest -->
<g id="edge6" class="edge">
<title>sus&#45;&gt;TxnRequest</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M2583.26,-766.43C2591.31,-765.34 2600.46,-764.09 2609.57,-762.86"/>
<polygon fill="#666666" stroke="#666666" points="2610.33,-766.28 2619.77,-761.47 2609.39,-759.35 2610.33,-766.28"/>
</g>
<!-- fas -->
<g id="node5" class="node">
<title>fas</title>
<polygon fill="turquoise" stroke="black" points="2457,-787 2457,-823 2511,-823 2511,-787 2457,-787"/>
<text text-anchor="middle" x="2484" y="-801.3" font-family="Times,serif" font-size="14.00">fas</text>
</g>
<!-- fas&#45;&gt;TxnRequest -->
<g id="edge7" class="edge">
<title>fas&#45;&gt;TxnRequest</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M2511.45,-809.34C2535.76,-812.23 2572.41,-813.77 2602,-803 2614.56,-798.43 2626.41,-789.91 2636.09,-781.37"/>
<polygon fill="#666666" stroke="#666666" points="2638.76,-783.67 2643.67,-774.28 2633.98,-778.55 2638.76,-783.67"/>
</g>
<!-- txn_Then -->
<g id="node6" class="node">
<title>txn_Then</title>
<polygon fill="none" stroke="black" points="2422.5,-786 2354.5,-786 2354.5,-750 2422.5,-750 2422.5,-786"/>
<text text-anchor="middle" x="2388.5" y="-764.3" font-family="Times,serif" font-size="14.00">txn_Then</text>
</g>
<!-- txn_Then&#45;&gt;sus -->
<g id="edge3" class="edge">
<title>txn_Then&#45;&gt;sus</title>
<path fill="none" stroke="#666666" d="M2422.59,-768.4C2450.4,-768.74 2490.08,-769.22 2518.74,-769.56"/>
<polygon fill="#666666" stroke="#666666" points="2518.72,-773.06 2528.76,-769.68 2518.81,-766.06 2518.72,-773.06"/>
</g>
<!-- txn_Else -->
<g id="node7" class="node">
<title>txn_Else</title>
<polygon fill="none" stroke="black" points="2245.5,-744 2181.5,-744 2181.5,-708 2245.5,-708 2245.5,-744"/>
<text text-anchor="middle" x="2213.5" y="-722.3" font-family="Times,serif" font-size="14.00">txn_Else</text>
</g>
<!-- txn_Else&#45;&gt;fas -->
<g id="edge4" class="edge">
<title>txn_Else&#45;&gt;fas</title>
<path fill="none" stroke="#666666" d="M2225.14,-744.18C2243.11,-772.86 2282.52,-827.54 2333,-849 2379.63,-868.82 2401.21,-870.7 2447,-849 2455.08,-845.17 2461.95,-838.55 2467.45,-831.58"/>
<polygon fill="#666666" stroke="#666666" points="2470.33,-833.57 2473.27,-823.4 2464.62,-829.51 2470.33,-833.57"/>
</g>
<!-- txn_If -->
<g id="node8" class="node">
<title>txn_If</title>
<polygon fill="none" stroke="black" points="2415.5,-732 2361.5,-732 2361.5,-696 2415.5,-696 2415.5,-732"/>
<text text-anchor="middle" x="2388.5" y="-710.3" font-family="Times,serif" font-size="14.00">txn_If</text>
</g>
<!-- txn_If&#45;&gt;cmps -->
<g id="edge2" class="edge">
<title>txn_If&#45;&gt;cmps</title>
<path fill="none" stroke="#666666" d="M2415.72,-714.16C2443.57,-714.33 2487.76,-714.59 2518.89,-714.78"/>
<polygon fill="#666666" stroke="#666666" points="2518.88,-718.28 2528.9,-714.84 2518.92,-711.28 2518.88,-718.28"/>
</g>
<!-- txn_Commit -->
<g id="node9" class="node">
<title>txn_Commit</title>
<polygon fill="none" stroke="black" points="2431.5,-840 2345.5,-840 2345.5,-804 2431.5,-804 2431.5,-840"/>
<text text-anchor="middle" x="2388.5" y="-818.3" font-family="Times,serif" font-size="14.00">txn_Commit</text>
</g>
<!-- txn_Commit&#45;&gt;KVClient_Txn -->
<g id="edge1" class="edge">
<title>txn_Commit&#45;&gt;KVClient_Txn</title>
<path fill="none" stroke="#666666" d="M2431.65,-838.15C2501.16,-861.74 2640.14,-895.6 2721,-825 2755.71,-794.7 2778.98,-467.67 2785.28,-368.41"/>
<polygon fill="#666666" stroke="#666666" points="2788.78,-368.43 2785.91,-358.23 2781.8,-367.99 2788.78,-368.43"/>
</g>
<!-- TxnRequest&#45;&gt;KVClient_Txn -->
<g id="edge8" class="edge">
<title>TxnRequest&#45;&gt;KVClient_Txn</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M2702.01,-741.6C2705,-739.4 2707.73,-736.88 2710,-734 2755.2,-676.6 2778.01,-448.99 2784.79,-368.44"/>
<polygon fill="#666666" stroke="#666666" points="2788.31,-368.33 2785.64,-358.08 2781.33,-367.76 2788.31,-368.33"/>
</g>
<!-- Campaign -->
<g id="node11" class="node">
<title>Campaign</title>
<polygon fill="none" stroke="black" points="1860,-550.5 1860,-641.5 2089,-641.5 2089,-550.5 1860,-550.5"/>
<text text-anchor="middle" x="1974.5" y="-626.3" font-family="Times,serif" font-size="14.00">Campaign</text>
<polyline fill="none" stroke="black" points="1860,-618.5 2089,-618.5 "/>
<text text-anchor="start" x="1868" y="-603.3" font-family="Times,serif" font-size="14.00">puts a value as eligible for the election</text>
<text text-anchor="start" x="1868" y="-588.3" font-family="Times,serif" font-size="14.00"> on the prefix key</text>
<text text-anchor="start" x="1868" y="-573.3" font-family="Times,serif" font-size="14.00"> Campaign will continue to be blocked</text>
<text text-anchor="start" x="1868" y="-558.3" font-family="Times,serif" font-size="14.00"> util it becomes the leader</text>
</g>
<!-- Campaign&#45;&gt;txn_Then -->
<g id="edge9" class="edge">
<title>Campaign&#45;&gt;txn_Then</title>
<path fill="none" stroke="limegreen" d="M2004.55,-641.52C2031.16,-678.8 2074.22,-729.13 2126,-753 2196.85,-785.66 2290.18,-781.28 2344.04,-774.84"/>
<polygon fill="limegreen" stroke="limegreen" points="2344.8,-778.27 2354.27,-773.53 2343.91,-771.33 2344.8,-778.27"/>
</g>
<!-- Campaign&#45;&gt;txn_Else -->
<g id="edge10" class="edge">
<title>Campaign&#45;&gt;txn_Else</title>
<path fill="none" stroke="limegreen" d="M2051.03,-641.69C2074.81,-655.66 2101.3,-670.81 2126,-684 2140.86,-691.94 2157.44,-700.14 2172.08,-707.17"/>
<polygon fill="limegreen" stroke="limegreen" points="2170.85,-710.46 2181.38,-711.6 2173.86,-704.14 2170.85,-710.46"/>
</g>
<!-- Campaign&#45;&gt;txn_Commit -->
<g id="edge11" class="edge">
<title>Campaign&#45;&gt;txn_Commit</title>
<path fill="none" stroke="limegreen" d="M1999.66,-641.6C2025.06,-684.72 2069.23,-747.51 2126,-780 2191.05,-817.23 2279.27,-824.08 2334.79,-824.14"/>
<polygon fill="limegreen" stroke="limegreen" points="2335.13,-827.64 2345.1,-824.07 2335.08,-820.64 2335.13,-827.64"/>
</g>
<!-- Resign -->
<g id="node15" class="node">
<title>Resign</title>
<polygon fill="none" stroke="black" points="2159,-484.5 2159,-545.5 2268,-545.5 2268,-484.5 2159,-484.5"/>
<text text-anchor="middle" x="2213.5" y="-530.3" font-family="Times,serif" font-size="14.00">Resign</text>
<polyline fill="none" stroke="black" points="2159,-522.5 2268,-522.5 "/>
<text text-anchor="start" x="2167" y="-507.3" font-family="Times,serif" font-size="14.00">lets a leader start</text>
<text text-anchor="start" x="2167" y="-492.3" font-family="Times,serif" font-size="14.00"> a new election</text>
</g>
<!-- Campaign&#45;&gt;Resign -->
<g id="edge12" class="edge">
<title>Campaign&#45;&gt;Resign</title>
<path fill="none" stroke="limegreen" d="M2089.14,-557.16C2109.88,-550.07 2130.82,-542.92 2149.41,-536.56"/>
<polygon fill="limegreen" stroke="limegreen" points="2150.57,-539.86 2158.9,-533.32 2148.31,-533.24 2150.57,-539.86"/>
</g>
<!-- Proclaim -->
<g id="node16" class="node">
<title>Proclaim</title>
<polygon fill="none" stroke="black" points="2126,-565 2126,-641 2301,-641 2301,-565 2126,-565"/>
<text text-anchor="middle" x="2213.5" y="-625.8" font-family="Times,serif" font-size="14.00">Proclaim</text>
<polyline fill="none" stroke="black" points="2126,-618 2301,-618 "/>
<text text-anchor="start" x="2134" y="-602.8" font-family="Times,serif" font-size="14.00">lets the leader announce</text>
<text text-anchor="start" x="2134" y="-587.8" font-family="Times,serif" font-size="14.00"> a new value without another</text>
<text text-anchor="start" x="2134" y="-572.8" font-family="Times,serif" font-size="14.00"> election</text>
</g>
<!-- Campaign&#45;&gt;Proclaim -->
<g id="edge13" class="edge">
<title>Campaign&#45;&gt;Proclaim</title>
<path fill="none" stroke="limegreen" d="M2089.14,-599.36C2098.02,-599.62 2106.94,-599.88 2115.69,-600.14"/>
<polygon fill="limegreen" stroke="limegreen" points="2115.78,-603.64 2125.88,-600.44 2115.99,-596.65 2115.78,-603.64"/>
</g>
<!-- waitDeletes -->
<g id="node17" class="node">
<title>waitDeletes</title>
<polygon fill="none" stroke="black" points="2253.5,-448 2173.5,-448 2173.5,-412 2253.5,-412 2253.5,-448"/>
<text text-anchor="middle" x="2213.5" y="-426.3" font-family="Times,serif" font-size="14.00">waitDeletes</text>
</g>
<!-- Campaign&#45;&gt;waitDeletes -->
<g id="edge14" class="edge">
<title>Campaign&#45;&gt;waitDeletes</title>
<path fill="none" stroke="limegreen" d="M2027.2,-550.21C2055.38,-526.36 2091.47,-497.54 2126,-475 2138.09,-467.11 2151.73,-459.48 2164.54,-452.81"/>
<polygon fill="limegreen" stroke="limegreen" points="2166.37,-455.81 2173.68,-448.14 2163.19,-449.57 2166.37,-455.81"/>
</g>
<!-- NewElection -->
<g id="node12" class="node">
<title>NewElection</title>
<polygon fill="none" stroke="black" points="895.5,-412.5 895.5,-473.5 1035.5,-473.5 1035.5,-412.5 895.5,-412.5"/>
<text text-anchor="middle" x="965.5" y="-458.3" font-family="Times,serif" font-size="14.00">NewElection</text>
<polyline fill="none" stroke="black" points="895.5,-450.5 1035.5,-450.5 "/>
<text text-anchor="start" x="903.5" y="-435.3" font-family="Times,serif" font-size="14.00">returns a new election </text>
<text text-anchor="start" x="903.5" y="-420.3" font-family="Times,serif" font-size="14.00"> on a given key prefix</text>
</g>
<!-- toBeOwner -->
<g id="node25" class="node">
<title>toBeOwner</title>
<polygon fill="none" stroke="black" points="1227,-281 1227,-327 1365,-327 1365,-281 1227,-281"/>
<text text-anchor="middle" x="1296" y="-311.8" font-family="Times,serif" font-size="14.00">toBeOwner</text>
<polyline fill="none" stroke="black" points="1227,-304 1365,-304 "/>
<text text-anchor="middle" x="1296" y="-288.8" font-family="Times,serif" font-size="14.00">将指针设为新的elec</text>
</g>
<!-- NewElection&#45;&gt;toBeOwner -->
<g id="edge39" class="edge">
<title>NewElection&#45;&gt;toBeOwner</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1035.76,-413.69C1093.42,-389.3 1174.86,-354.83 1231,-331.08"/>
<polygon fill="blue" stroke="blue" points="1232.64,-334.19 1240.48,-327.07 1229.91,-327.74 1232.64,-334.19"/>
</g>
<!-- Leader -->
<g id="node13" class="node">
<title>Leader</title>
<polygon fill="none" stroke="black" points="1698,-412.5 1698,-473.5 1842,-473.5 1842,-412.5 1698,-412.5"/>
<text text-anchor="middle" x="1770" y="-458.3" font-family="Times,serif" font-size="14.00">Leader</text>
<polyline fill="none" stroke="black" points="1698,-450.5 1842,-450.5 "/>
<text text-anchor="start" x="1706" y="-435.3" font-family="Times,serif" font-size="14.00">returns the leader value</text>
<text text-anchor="start" x="1706" y="-420.3" font-family="Times,serif" font-size="14.00"> for the curent election</text>
</g>
<!-- Leader&#45;&gt;KVClient_Get -->
<g id="edge24" class="edge">
<title>Leader&#45;&gt;KVClient_Get</title>
<path fill="none" stroke="#666666" d="M1842.24,-434.69C1906.82,-426.84 2004.53,-414.19 2089,-400 2173.64,-385.79 2270.98,-365.47 2330.87,-352.51"/>
<polygon fill="#666666" stroke="#666666" points="2331.85,-355.87 2340.88,-350.33 2330.37,-349.03 2331.85,-355.87"/>
</g>
<!-- OpDelete -->
<g id="node14" class="node">
<title>OpDelete</title>
<polygon fill="none" stroke="black" points="2338,-492 2338,-538 2439,-538 2439,-492 2338,-492"/>
<text text-anchor="middle" x="2388.5" y="-522.8" font-family="Times,serif" font-size="14.00">OpDelete</text>
<polyline fill="none" stroke="black" points="2338,-515 2439,-515 "/>
<text text-anchor="start" x="2346" y="-499.8" font-family="Times,serif" font-size="14.00">删除leader key</text>
</g>
<!-- Resign&#45;&gt;txn_If -->
<g id="edge19" class="edge">
<title>Resign&#45;&gt;txn_If</title>
<path fill="none" stroke="#666666" d="M2268.09,-531.47C2280.38,-537.47 2292.36,-545.46 2301,-556 2338.17,-601.35 2297.22,-637.54 2333,-684 2338.05,-690.56 2344.96,-695.88 2352.17,-700.11"/>
<polygon fill="#666666" stroke="#666666" points="2350.85,-703.37 2361.33,-704.91 2354.1,-697.17 2350.85,-703.37"/>
</g>
<!-- Resign&#45;&gt;txn_Commit -->
<g id="edge20" class="edge">
<title>Resign&#45;&gt;txn_Commit</title>
<path fill="none" stroke="#666666" d="M2268.02,-530.39C2280.63,-536.44 2292.77,-544.73 2301,-556 2316.8,-577.64 2317.39,-773.22 2333,-795 2334.35,-796.88 2335.87,-798.64 2337.52,-800.28"/>
<polygon fill="#666666" stroke="#666666" points="2335.49,-803.15 2345.46,-806.75 2339.92,-797.72 2335.49,-803.15"/>
</g>
<!-- Resign&#45;&gt;OpDelete -->
<g id="edge21" class="edge">
<title>Resign&#45;&gt;OpDelete</title>
<path fill="none" stroke="#666666" d="M2268.29,-515C2287.12,-515 2308.38,-515 2327.68,-515"/>
<polygon fill="#666666" stroke="#666666" points="2327.87,-518.5 2337.87,-515 2327.87,-511.5 2327.87,-518.5"/>
</g>
<!-- Proclaim&#45;&gt;txn_Then -->
<g id="edge15" class="edge">
<title>Proclaim&#45;&gt;txn_Then</title>
<path fill="none" stroke="#666666" d="M2260.69,-641.38C2274.55,-654.14 2289.2,-668.94 2301,-684 2318.92,-706.86 2311.93,-720.99 2333,-741 2336.73,-744.54 2341.02,-747.72 2345.52,-750.53"/>
<polygon fill="#666666" stroke="#666666" points="2343.9,-753.64 2354.33,-755.51 2347.34,-747.55 2343.9,-753.64"/>
</g>
<!-- Proclaim&#45;&gt;txn_If -->
<g id="edge16" class="edge">
<title>Proclaim&#45;&gt;txn_If</title>
<path fill="none" stroke="#666666" d="M2267.75,-641.01C2287.91,-654.97 2311.24,-670.62 2333,-684 2339.26,-687.85 2346.05,-691.78 2352.63,-695.46"/>
<polygon fill="#666666" stroke="#666666" points="2350.98,-698.54 2361.42,-700.31 2354.36,-692.42 2350.98,-698.54"/>
</g>
<!-- Proclaim&#45;&gt;txn_Commit -->
<g id="edge17" class="edge">
<title>Proclaim&#45;&gt;txn_Commit</title>
<path fill="none" stroke="#666666" d="M2264.25,-641.09C2277.77,-653.51 2291.33,-668.21 2301,-684 2314.41,-705.89 2316.55,-775.3 2333,-795 2334.29,-796.55 2335.7,-798.02 2337.19,-799.41"/>
<polygon fill="#666666" stroke="#666666" points="2335.24,-802.33 2345.27,-805.74 2339.56,-796.82 2335.24,-802.33"/>
</g>
<!-- OpPut -->
<g id="node18" class="node">
<title>OpPut</title>
<polygon fill="none" stroke="black" points="2415.5,-621 2361.5,-621 2361.5,-585 2415.5,-585 2415.5,-621"/>
<text text-anchor="middle" x="2388.5" y="-599.3" font-family="Times,serif" font-size="14.00">OpPut</text>
</g>
<!-- Proclaim&#45;&gt;OpPut -->
<g id="edge18" class="edge">
<title>Proclaim&#45;&gt;OpPut</title>
<path fill="none" stroke="#666666" d="M2301.25,-603C2318.89,-603 2336.52,-603 2351.19,-603"/>
<polygon fill="#666666" stroke="#666666" points="2351.32,-606.5 2361.32,-603 2351.32,-599.5 2351.32,-606.5"/>
</g>
<!-- waitDeletes&#45;&gt;KVClient_Get -->
<g id="edge22" class="edge">
<title>waitDeletes&#45;&gt;KVClient_Get</title>
<path fill="none" stroke="#666666" d="M2253.63,-422.24C2274.2,-417.16 2299.36,-409.33 2320,-398 2335.66,-389.4 2350.95,-376.73 2363.01,-365.42"/>
<polygon fill="#666666" stroke="#666666" points="2365.67,-367.71 2370.43,-358.25 2360.81,-362.68 2365.67,-367.71"/>
</g>
<!-- waitDeletes&#45;&gt;waitDeletes -->
<g id="edge23" class="edge">
<title>waitDeletes&#45;&gt;waitDeletes</title>
<path fill="none" stroke="#666666" d="M2194.32,-448.15C2191.37,-457.54 2197.77,-466 2213.5,-466 2223.09,-466 2229.21,-462.86 2231.86,-458.28"/>
<polygon fill="#666666" stroke="#666666" points="2235.36,-458.4 2232.68,-448.15 2228.38,-457.84 2235.36,-458.4"/>
</g>
<!-- watchOwner -->
<g id="node19" class="node">
<title>watchOwner</title>
<polygon fill="none" stroke="black" points="896.5,-170.5 896.5,-231.5 1034.5,-231.5 1034.5,-170.5 896.5,-170.5"/>
<text text-anchor="middle" x="965.5" y="-216.3" font-family="Times,serif" font-size="14.00">watchOwner</text>
<polyline fill="none" stroke="black" points="896.5,-208.5 1034.5,-208.5 "/>
<text text-anchor="start" x="904.5" y="-193.3" font-family="Times,serif" font-size="14.00">watch等待no owner</text>
<text text-anchor="start" x="904.5" y="-178.3" font-family="Times,serif" font-size="14.00"> 或者owner is deleted</text>
</g>
<!-- etcdCli_Watch -->
<g id="node29" class="node">
<title>etcdCli_Watch</title>
<polygon fill="none" stroke="black" points="1345,-211 1247,-211 1247,-175 1345,-175 1345,-211"/>
<text text-anchor="middle" x="1296" y="-189.3" font-family="Times,serif" font-size="14.00">etcdCli_Watch</text>
</g>
<!-- watchOwner&#45;&gt;etcdCli_Watch -->
<g id="edge25" class="edge">
<title>watchOwner&#45;&gt;etcdCli_Watch</title>
<path fill="none" stroke="#666666" d="M1034.57,-199.34C1094.19,-197.89 1179.91,-195.8 1236.5,-194.42"/>
<polygon fill="#666666" stroke="#666666" points="1236.81,-197.92 1246.72,-194.18 1236.64,-190.92 1236.81,-197.92"/>
</g>
<!-- GetOwnerInfo -->
<g id="node20" class="node">
<title>GetOwnerInfo</title>
<polygon fill="none" stroke="black" points="1383,-296.5 1383,-357.5 1576,-357.5 1576,-296.5 1383,-296.5"/>
<text text-anchor="middle" x="1479.5" y="-342.3" font-family="Times,serif" font-size="14.00">GetOwnerInfo</text>
<polyline fill="none" stroke="black" points="1383,-334.5 1576,-334.5 "/>
<text text-anchor="start" x="1391" y="-319.3" font-family="Times,serif" font-size="14.00">获取ownerID并和自己的比较</text>
<text text-anchor="start" x="1391" y="-304.3" font-family="Times,serif" font-size="14.00"> 不一致则报错</text>
</g>
<!-- GetOwnerInfo&#45;&gt;Leader -->
<g id="edge37" class="edge">
<title>GetOwnerInfo&#45;&gt;Leader</title>
<path fill="none" stroke="#666666" d="M1556.68,-357.63C1597.26,-373.94 1647.16,-394.01 1688.39,-410.59"/>
<polygon fill="#666666" stroke="#666666" points="1687.27,-413.91 1697.85,-414.39 1689.88,-407.42 1687.27,-413.91"/>
</g>
<!-- NewSession -->
<g id="node21" class="node">
<title>NewSession</title>
<polygon fill="none" stroke="black" points="332.5,-202.5 332.5,-263.5 448.5,-263.5 448.5,-202.5 332.5,-202.5"/>
<text text-anchor="middle" x="390.5" y="-248.3" font-family="Times,serif" font-size="14.00">NewSession</text>
<polyline fill="none" stroke="black" points="332.5,-240.5 448.5,-240.5 "/>
<text text-anchor="start" x="340.5" y="-225.3" font-family="Times,serif" font-size="14.00">etcdSession.Done</text>
<text text-anchor="start" x="340.5" y="-210.3" font-family="Times,serif" font-size="14.00"> 开始新的session</text>
</g>
<!-- campaignLoop -->
<g id="node26" class="node">
<title>campaignLoop</title>
<polygon fill="none" stroke="black" points="549,-252.5 549,-313.5 678,-313.5 678,-252.5 549,-252.5"/>
<text text-anchor="middle" x="613.5" y="-298.3" font-family="Times,serif" font-size="14.00">campaignLoop</text>
<polyline fill="none" stroke="black" points="549,-290.5 678,-290.5 "/>
<text text-anchor="start" x="557" y="-275.3" font-family="Times,serif" font-size="14.00">新启一个go routine</text>
<text text-anchor="start" x="557" y="-260.3" font-family="Times,serif" font-size="14.00"> 进入选举loop</text>
</g>
<!-- NewSession&#45;&gt;campaignLoop -->
<g id="edge42" class="edge">
<title>NewSession&#45;&gt;campaignLoop</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M448.7,-245.94C476.28,-252.18 509.68,-259.74 539.11,-266.4"/>
<polygon fill="blue" stroke="blue" points="538.39,-269.82 548.92,-268.62 539.94,-263 538.39,-269.82"/>
</g>
<!-- revokeSession -->
<g id="node22" class="node">
<title>revokeSession</title>
<polygon fill="none" stroke="black" points="864,-291 864,-337 1067,-337 1067,-291 864,-291"/>
<text text-anchor="middle" x="965.5" y="-321.8" font-family="Times,serif" font-size="14.00">revokeSession</text>
<polyline fill="none" stroke="black" points="864,-314 1067,-314 "/>
<text text-anchor="start" x="872" y="-298.8" font-family="Times,serif" font-size="14.00">NewSession Failed revokeSession</text>
</g>
<!-- RetireOwner -->
<g id="node23" class="node">
<title>RetireOwner</title>
<polygon fill="none" stroke="black" points="1085,-218 1085,-264 1209,-264 1209,-218 1085,-218"/>
<text text-anchor="middle" x="1147" y="-248.8" font-family="Times,serif" font-size="14.00">RetireOwner</text>
<polyline fill="none" stroke="black" points="1085,-241 1209,-241 "/>
<text text-anchor="start" x="1093" y="-225.8" font-family="Times,serif" font-size="14.00">将elec指针设为nil</text>
</g>
<!-- ownerManager_elec -->
<g id="node28" class="node">
<title>ownerManager_elec</title>
<polygon fill="none" stroke="black" points="1594,-237 1594,-283 1680,-283 1680,-237 1594,-237"/>
<text text-anchor="middle" x="1637" y="-267.8" font-family="Times,serif" font-size="14.00">elec</text>
<polyline fill="none" stroke="black" points="1594,-260 1680,-260 "/>
<text text-anchor="middle" x="1637" y="-244.8" font-family="Times,serif" font-size="14.00">atomic 指针</text>
</g>
<!-- RetireOwner&#45;&gt;ownerManager_elec -->
<g id="edge27" class="edge">
<title>RetireOwner&#45;&gt;ownerManager_elec</title>
<path fill="none" stroke="#666666" d="M1209.04,-241.02C1292.15,-241.44 1445.51,-243.58 1576,-253 1578.52,-253.18 1581.09,-253.39 1583.69,-253.62"/>
<polygon fill="#666666" stroke="#666666" points="1583.47,-257.12 1593.76,-254.6 1584.14,-250.15 1583.47,-257.12"/>
<text text-anchor="middle" x="1296" y="-246.8" font-family="Times,serif" font-size="14.00">atom.StorePointer</text>
</g>
<!-- ResignOwner -->
<g id="node24" class="node">
<title>ResignOwner</title>
<polygon fill="none" stroke="black" points="1873,-294 1873,-340 2076,-340 2076,-294 1873,-294"/>
<text text-anchor="middle" x="1974.5" y="-324.8" font-family="Times,serif" font-size="14.00">ResignOwner</text>
<polyline fill="none" stroke="black" points="1873,-317 2076,-317 "/>
<text text-anchor="start" x="1881" y="-301.8" font-family="Times,serif" font-size="14.00">lets the owner start a new election</text>
</g>
<!-- ResignOwner&#45;&gt;Resign -->
<g id="edge38" class="edge">
<title>ResignOwner&#45;&gt;Resign</title>
<path fill="none" stroke="#666666" d="M2016.35,-340.04C2039.86,-354.84 2068.66,-375.8 2089,-400 2112.91,-428.46 2099.39,-449.05 2126,-475 2132.86,-481.69 2141.04,-487.4 2149.59,-492.23"/>
<polygon fill="#666666" stroke="#666666" points="2148.12,-495.4 2158.6,-496.95 2151.36,-489.2 2148.12,-495.4"/>
</g>
<!-- toBeOwner&#45;&gt;ownerManager_elec -->
<g id="edge26" class="edge">
<title>toBeOwner&#45;&gt;ownerManager_elec</title>
<path fill="none" stroke="#666666" d="M1351.31,-280.93C1361.67,-277.35 1372.54,-274.14 1383,-272 1451.32,-258.02 1532.07,-256.76 1583.65,-257.82"/>
<polygon fill="#666666" stroke="#666666" points="1583.79,-261.32 1593.88,-258.07 1583.96,-254.32 1583.79,-261.32"/>
<text text-anchor="middle" x="1479.5" y="-275.8" font-family="Times,serif" font-size="14.00">atom.StorePointer</text>
</g>
<!-- campaignLoop&#45;&gt;Campaign -->
<g id="edge30" class="edge">
<title>campaignLoop&#45;&gt;Campaign</title>
<path fill="none" stroke="turquoise" d="M629.45,-313.64C643.67,-340.34 667.14,-378.81 696,-405 796.27,-496.01 829.09,-549 964.5,-549 964.5,-549 964.5,-549 1638,-549 1708.62,-549 1786.81,-559.34 1849.92,-570.32"/>
<polygon fill="turquoise" stroke="turquoise" points="1849.46,-573.79 1859.92,-572.09 1850.68,-566.9 1849.46,-573.79"/>
</g>
<!-- campaignLoop&#45;&gt;NewElection -->
<g id="edge31" class="edge">
<title>campaignLoop&#45;&gt;NewElection</title>
<path fill="none" stroke="turquoise" d="M639.65,-313.69C654.52,-330.08 674.59,-349.42 696,-362 754.9,-396.62 829.9,-417.63 885.66,-429.54"/>
<polygon fill="turquoise" stroke="turquoise" points="884.98,-432.97 895.49,-431.59 886.41,-426.12 884.98,-432.97"/>
</g>
<!-- campaignLoop&#45;&gt;watchOwner -->
<g id="edge32" class="edge">
<title>campaignLoop&#45;&gt;watchOwner</title>
<path fill="none" stroke="turquoise" d="M677.5,-252.48C683.67,-250.07 689.91,-247.86 696,-246 758.54,-226.92 831.89,-215.32 886.11,-208.69"/>
<polygon fill="turquoise" stroke="turquoise" points="886.83,-212.13 896.35,-207.47 886,-205.18 886.83,-212.13"/>
</g>
<!-- campaignLoop&#45;&gt;GetOwnerInfo -->
<g id="edge33" class="edge">
<title>campaignLoop&#45;&gt;GetOwnerInfo</title>
<path fill="none" stroke="turquoise" d="M678,-304C727.92,-319.36 799.56,-338.87 864,-347 1041.43,-369.39 1249.81,-353.91 1372.64,-340.54"/>
<polygon fill="turquoise" stroke="turquoise" points="1373.24,-343.99 1382.8,-339.41 1372.47,-337.03 1373.24,-343.99"/>
</g>
<!-- campaignLoop&#45;&gt;revokeSession -->
<g id="edge34" class="edge">
<title>campaignLoop&#45;&gt;revokeSession</title>
<path fill="none" stroke="turquoise" d="M678.29,-288.65C727.11,-292.97 795.66,-299.05 853.43,-304.16"/>
<polygon fill="turquoise" stroke="turquoise" points="853.45,-307.68 863.72,-305.07 854.06,-300.7 853.45,-307.68"/>
</g>
<!-- campaignLoop&#45;&gt;RetireOwner -->
<g id="edge35" class="edge">
<title>campaignLoop&#45;&gt;RetireOwner</title>
<path fill="none" stroke="turquoise" d="M678.41,-268.72C684.34,-267.69 690.27,-266.75 696,-266 829.02,-248.53 985.72,-243.25 1074.71,-241.66"/>
<polygon fill="turquoise" stroke="turquoise" points="1075.01,-245.16 1084.95,-241.49 1074.9,-238.16 1075.01,-245.16"/>
</g>
<!-- campaignLoop&#45;&gt;toBeOwner -->
<g id="edge36" class="edge">
<title>campaignLoop&#45;&gt;toBeOwner</title>
<path fill="none" stroke="turquoise" d="M678.24,-280.84C765.89,-278.33 928.5,-275.33 1067,-282 1116.93,-284.4 1172.8,-289.75 1216.74,-294.57"/>
<polygon fill="turquoise" stroke="turquoise" points="1216.46,-298.06 1226.78,-295.69 1217.23,-291.11 1216.46,-298.06"/>
</g>
<!-- IsOwner -->
<g id="node27" class="node">
<title>IsOwner</title>
<polygon fill="none" stroke="black" points="1909,-196.5 1909,-257.5 2040,-257.5 2040,-196.5 1909,-196.5"/>
<text text-anchor="middle" x="1974.5" y="-242.3" font-family="Times,serif" font-size="14.00">IsOwner</text>
<polyline fill="none" stroke="black" points="1909,-234.5 2040,-234.5 "/>
<text text-anchor="start" x="1917" y="-219.3" font-family="Times,serif" font-size="14.00">根据指针是否为nil</text>
<text text-anchor="start" x="1917" y="-204.3" font-family="Times,serif" font-size="14.00"> 判断是否为owner</text>
</g>
<!-- ownerManager_elec&#45;&gt;ResignOwner -->
<g id="edge40" class="edge">
<title>ownerManager_elec&#45;&gt;ResignOwner</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1680.15,-267.16C1725.76,-274.91 1800.34,-287.58 1862.89,-298.21"/>
<polygon fill="blue" stroke="blue" points="1862.38,-301.67 1872.82,-299.9 1863.55,-294.77 1862.38,-301.67"/>
</g>
<!-- ownerManager_elec&#45;&gt;IsOwner -->
<g id="edge41" class="edge">
<title>ownerManager_elec&#45;&gt;IsOwner</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1680.15,-255.85C1734.89,-250.47 1831.38,-240.98 1898.69,-234.36"/>
<polygon fill="blue" stroke="blue" points="1899.21,-237.82 1908.82,-233.36 1898.53,-230.86 1899.21,-237.82"/>
</g>
<!-- CampaignOwner -->
<g id="node30" class="node">
<title>CampaignOwner</title>
<polygon fill="none" stroke="black" points="224.5,-251 114.5,-251 114.5,-215 224.5,-215 224.5,-251"/>
<text text-anchor="middle" x="169.5" y="-229.3" font-family="Times,serif" font-size="14.00">CampaignOwner</text>
</g>
<!-- CampaignOwner&#45;&gt;NewSession -->
<g id="edge28" class="edge">
<title>CampaignOwner&#45;&gt;NewSession</title>
<path fill="none" stroke="#666666" d="M224.63,-233C254,-233 290.56,-233 321.79,-233"/>
<polygon fill="#666666" stroke="#666666" points="322.16,-236.5 332.16,-233 322.16,-229.5 322.16,-236.5"/>
</g>
<!-- CampaignOwner&#45;&gt;campaignLoop -->
<g id="edge29" class="edge">
<title>CampaignOwner&#45;&gt;campaignLoop</title>
<path fill="none" stroke="#666666" d="M206.01,-251.01C224.33,-259.36 247.33,-268.44 269,-273 360.4,-292.23 468.47,-291.68 538.64,-288.35"/>
<polygon fill="#666666" stroke="#666666" points="538.9,-291.84 548.71,-287.84 538.55,-284.85 538.9,-291.84"/>
</g>
<!-- handleDDLJobQueue -->
<g id="node31" class="node">
<title>handleDDLJobQueue</title>
<polygon fill="none" stroke="black" points="269,-16.5 269,-115.5 512,-115.5 512,-16.5 269,-16.5"/>
<text text-anchor="middle" x="390.5" y="-100.3" font-family="Times,serif" font-size="14.00">handleDDLJobQueue</text>
<polyline fill="none" stroke="black" points="269,-92.5 512,-92.5 "/>
<text text-anchor="start" x="277" y="-77.3" font-family="Times,serif" font-size="14.00">loop: handle DDL jobs in DDL job queue</text>
<polyline fill="none" stroke="black" points="269,-69.5 512,-69.5 "/>
<text text-anchor="start" x="277" y="-54.3" font-family="Times,serif" font-size="14.00">处理之前，先确认自己是owner,</text>
<text text-anchor="start" x="277" y="-39.3" font-family="Times,serif" font-size="14.00"> 否则退出loop</text>
<text text-anchor="start" x="277" y="-24.3" font-family="Times,serif" font-size="14.00"> 过2 * leasTime后再次检查</text>
</g>
<!-- isOwner -->
<g id="node33" class="node">
<title>isOwner</title>
<polygon fill="none" stroke="black" points="696,-62 696,-108 846,-108 846,-62 696,-62"/>
<text text-anchor="middle" x="771" y="-92.8" font-family="Times,serif" font-size="14.00">isOwner</text>
<polyline fill="none" stroke="black" points="696,-85 846,-85 "/>
<text text-anchor="start" x="704" y="-69.8" font-family="Times,serif" font-size="14.00">检查自己是否是owner</text>
</g>
<!-- handleDDLJobQueue&#45;&gt;isOwner -->
<g id="edge44" class="edge">
<title>handleDDLJobQueue&#45;&gt;isOwner</title>
<path fill="none" stroke="#666666" d="M512.04,-72.05C568.64,-74.89 634.74,-78.21 685.85,-80.78"/>
<polygon fill="#666666" stroke="#666666" points="685.7,-84.27 695.87,-81.28 686.06,-77.28 685.7,-84.27"/>
</g>
<!-- worker_start -->
<g id="node32" class="node">
<title>worker_start</title>
<polygon fill="none" stroke="black" points="107,-62 107,-108 232,-108 232,-62 107,-62"/>
<text text-anchor="middle" x="169.5" y="-92.8" font-family="Times,serif" font-size="14.00">worker_start</text>
<polyline fill="none" stroke="black" points="107,-85 232,-85 "/>
<text text-anchor="middle" x="169.5" y="-69.8" font-family="Times,serif" font-size="14.00">启动多个goroutine</text>
</g>
<!-- worker_start&#45;&gt;handleDDLJobQueue -->
<g id="edge43" class="edge">
<title>worker_start&#45;&gt;handleDDLJobQueue</title>
<path fill="none" stroke="#666666" d="M232.09,-79.66C240.54,-78.92 249.47,-78.15 258.61,-77.36"/>
<polygon fill="#666666" stroke="#666666" points="258.93,-80.84 268.59,-76.49 258.32,-73.87 258.93,-80.84"/>
</g>
<!-- isOwner&#45;&gt;IsOwner -->
<g id="edge46" class="edge">
<title>isOwner&#45;&gt;IsOwner</title>
<path fill="none" stroke="#666666" d="M846,-94.77C921.35,-103.85 1041.59,-116 1146,-116 1146,-116 1146,-116 1638,-116 1736.15,-116 1842.64,-159.35 1908.73,-191.86"/>
<polygon fill="#666666" stroke="#666666" points="1907.27,-195.05 1917.78,-196.37 1910.39,-188.78 1907.27,-195.05"/>
</g>
<!-- Start -->
<g id="node34" class="node">
<title>Start</title>
<polygon fill="none" stroke="black" points="70,-188 16,-188 16,-152 70,-152 70,-188"/>
<text text-anchor="middle" x="43" y="-166.3" font-family="Times,serif" font-size="14.00">Start</text>
</g>
<!-- Start&#45;&gt;CampaignOwner -->
<g id="edge45" class="edge">
<title>Start&#45;&gt;CampaignOwner</title>
<path fill="none" stroke="#666666" d="M70.1,-183.21C85.52,-191.01 105.48,-201.11 123.38,-210.17"/>
<polygon fill="#666666" stroke="#666666" points="122.02,-213.4 132.52,-214.79 125.18,-207.15 122.02,-213.4"/>
</g>
<!-- Start&#45;&gt;worker_start -->
<g id="edge47" class="edge">
<title>Start&#45;&gt;worker_start</title>
<path fill="none" stroke="#666666" d="M70.1,-152.18C86.3,-141.12 107.5,-126.65 126.07,-113.97"/>
<polygon fill="#666666" stroke="#666666" points="128.11,-116.82 134.39,-108.29 124.16,-111.04 128.11,-116.82"/>
</g>
</g>
</svg>
