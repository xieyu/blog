<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: ddl_schema_flow Pages: 1 -->
<svg width="1210pt" height="376pt"
 viewBox="0.00 0.00 1210.30 375.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 371.5999)">
<title>ddl_schema_flow</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-371.5999 1206.2979,-371.5999 1206.2979,4 -4,4"/>
<!-- ddl_exec -->
<g id="node1" class="node">
<title>ddl_exec</title>
<polygon fill="none" stroke="#000000" points="0,-130.5 0,-174.5 103.4727,-174.5 103.4727,-130.5 0,-130.5"/>
<text text-anchor="middle" x="51.7363" y="-159.3" font-family="Times,serif" font-size="14.00" fill="#000000">executor/ddl.go</text>
<polyline fill="none" stroke="#000000" points="0,-152.5 103.4727,-152.5 "/>
<text text-anchor="start" x="8" y="-137.3" font-family="Times,serif" font-size="14.00" fill="#000000">Next</text>
</g>
<!-- ddl_api -->
<g id="node2" class="node">
<title>ddl_api</title>
<polygon fill="none" stroke="#000000" points="140.4727,-54.7 140.4727,-250.3 279.752,-250.3 279.752,-54.7 140.4727,-54.7"/>
<text text-anchor="start" x="148.4727" y="-235.1" font-family="Times,serif" font-size="14.00" fill="#000000">ddl/ddl_api.go</text>
<text text-anchor="middle" x="210.1123" y="-221.1" font-family="Times,serif" font-size="14.00" fill="#000000">将请求封装为ddl job</text>
<polyline fill="none" stroke="#000000" points="140.4727,-208.7 279.752,-208.7 "/>
<text text-anchor="start" x="148.4727" y="-193.5" font-family="Times,serif" font-size="14.00" fill="#000000">CreateSchema</text>
<polyline fill="none" stroke="#000000" points="140.4727,-186.7 279.752,-186.7 "/>
<text text-anchor="start" x="148.4727" y="-171.5" font-family="Times,serif" font-size="14.00" fill="#000000">AlterSchema</text>
<polyline fill="none" stroke="#000000" points="140.4727,-164.7 279.752,-164.7 "/>
<text text-anchor="start" x="148.4727" y="-149.5" font-family="Times,serif" font-size="14.00" fill="#000000">DropSchema</text>
<polyline fill="none" stroke="#000000" points="140.4727,-142.7 279.752,-142.7 "/>
<text text-anchor="start" x="148.4727" y="-127.5" font-family="Times,serif" font-size="14.00" fill="#000000">CreateTable</text>
<polyline fill="none" stroke="#000000" points="140.4727,-120.7 279.752,-120.7 "/>
<text text-anchor="start" x="148.4727" y="-105.5" font-family="Times,serif" font-size="14.00" fill="#000000">DropTable</text>
<polyline fill="none" stroke="#000000" points="140.4727,-98.7 279.752,-98.7 "/>
<text text-anchor="start" x="148.4727" y="-83.5" font-family="Times,serif" font-size="14.00" fill="#000000">AlterTable</text>
<polyline fill="none" stroke="#000000" points="140.4727,-76.7 279.752,-76.7 "/>
<text text-anchor="middle" x="210.1123" y="-61.5" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
</g>
<!-- ddl_exec&#45;&gt;ddl_api -->
<g id="edge1" class="edge">
<title>ddl_exec&#45;&gt;ddl_api</title>
<path fill="none" stroke="#000000" d="M103.5945,-152.5C112.1155,-152.5 121.1176,-152.5 130.1334,-152.5"/>
<polygon fill="#000000" stroke="#000000" points="130.2934,-156.0001 140.2934,-152.5 130.2933,-149.0001 130.2934,-156.0001"/>
</g>
<!-- ddl_ddl -->
<g id="node3" class="node">
<title>ddl_ddl</title>
<polygon fill="none" stroke="#000000" points="316.752,-120.7 316.752,-184.3 434.6416,-184.3 434.6416,-120.7 316.752,-120.7"/>
<text text-anchor="start" x="324.752" y="-169.1" font-family="Times,serif" font-size="14.00" fill="#000000">ddl/ddl.go</text>
<text text-anchor="middle" x="375.6968" y="-155.1" font-family="Times,serif" font-size="14.00" fill="#000000">将job加入队列中</text>
<polyline fill="none" stroke="#000000" points="316.752,-142.7 434.6416,-142.7 "/>
<text text-anchor="start" x="324.752" y="-127.5" font-family="Times,serif" font-size="14.00" fill="#000000">doDDLJob</text>
</g>
<!-- ddl_api&#45;&gt;ddl_ddl -->
<g id="edge2" class="edge">
<title>ddl_api&#45;&gt;ddl_ddl</title>
<path fill="none" stroke="#000000" d="M279.8551,-152.5C288.6218,-152.5 297.5887,-152.5 306.3493,-152.5"/>
<polygon fill="#000000" stroke="#000000" points="306.5143,-156.0001 316.5143,-152.5 306.5142,-149.0001 306.5143,-156.0001"/>
</g>
<!-- ddl_worker -->
<g id="node4" class="node">
<title>ddl_worker</title>
<polygon fill="none" stroke="#000000" points="555.4004,-98.7 555.4004,-206.3 693.4766,-206.3 693.4766,-98.7 555.4004,-98.7"/>
<text text-anchor="start" x="563.4004" y="-191.1" font-family="Times,serif" font-size="14.00" fill="#000000">ddl/ddl_worker.go</text>
<text text-anchor="middle" x="624.4385" y="-177.1" font-family="Times,serif" font-size="14.00" fill="#000000">由Owner来执行</text>
<polyline fill="none" stroke="#000000" points="555.4004,-164.7 693.4766,-164.7 "/>
<text text-anchor="start" x="563.4004" y="-149.5" font-family="Times,serif" font-size="14.00" fill="#000000">addDDLJob</text>
<polyline fill="none" stroke="#000000" points="555.4004,-142.7 693.4766,-142.7 "/>
<text text-anchor="start" x="563.4004" y="-127.5" font-family="Times,serif" font-size="14.00" fill="#000000">handleDDLJobQueue</text>
<polyline fill="none" stroke="#000000" points="555.4004,-120.7 693.4766,-120.7 "/>
<text text-anchor="start" x="563.4004" y="-105.5" font-family="Times,serif" font-size="14.00" fill="#000000">runDDLJob</text>
</g>
<!-- ddl_ddl&#45;&gt;ddl_worker -->
<g id="edge3" class="edge">
<title>ddl_ddl&#45;&gt;ddl_worker</title>
<path fill="none" stroke="#000000" d="M434.6451,-152.5C467.5959,-152.5 509.1117,-152.5 544.9064,-152.5"/>
<polygon fill="#000000" stroke="#000000" points="545.3256,-156.0001 555.3256,-152.5 545.3256,-149.0001 545.3256,-156.0001"/>
<text text-anchor="middle" x="495.021" y="-155.3" font-family="Times,serif" font-size="14.00" fill="#000000">QueueDDLJob</text>
</g>
<!-- ddl_schema -->
<g id="node5" class="node">
<title>ddl_schema</title>
<polygon fill="none" stroke="#000000" points="730.4766,-204.5 730.4766,-292.5 954.1045,-292.5 954.1045,-204.5 730.4766,-204.5"/>
<text text-anchor="middle" x="842.2905" y="-277.3" font-family="Times,serif" font-size="14.00" fill="#000000">ddl/schema.go</text>
<polyline fill="none" stroke="#000000" points="730.4766,-270.5 954.1045,-270.5 "/>
<text text-anchor="start" x="738.4766" y="-255.3" font-family="Times,serif" font-size="14.00" fill="#000000">onCreateSchema</text>
<polyline fill="none" stroke="#000000" points="730.4766,-248.5 954.1045,-248.5 "/>
<text text-anchor="start" x="738.4766" y="-233.3" font-family="Times,serif" font-size="14.00" fill="#000000">onDropSchema</text>
<polyline fill="none" stroke="#000000" points="730.4766,-226.5 954.1045,-226.5 "/>
<text text-anchor="start" x="738.4766" y="-211.3" font-family="Times,serif" font-size="14.00" fill="#000000">onModifySchemaCharsetAndCollate</text>
</g>
<!-- ddl_worker&#45;&gt;ddl_schema -->
<g id="edge5" class="edge">
<title>ddl_worker&#45;&gt;ddl_schema</title>
<path fill="none" stroke="#000000" d="M693.6676,-183.0069C706.22,-188.5384 719.5873,-194.4289 732.9626,-200.3229"/>
<polygon fill="#000000" stroke="#000000" points="731.6516,-203.5699 742.2139,-204.3996 734.4744,-197.1642 731.6516,-203.5699"/>
</g>
<!-- ddl_table -->
<g id="node6" class="node">
<title>ddl_table</title>
<polygon fill="none" stroke="#000000" points="773.5771,-119.5 773.5771,-185.5 911.0039,-185.5 911.0039,-119.5 773.5771,-119.5"/>
<text text-anchor="middle" x="842.2905" y="-170.3" font-family="Times,serif" font-size="14.00" fill="#000000">ddl/table.go</text>
<polyline fill="none" stroke="#000000" points="773.5771,-163.5 911.0039,-163.5 "/>
<text text-anchor="start" x="781.5771" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#000000">onCreateTable </text>
<polyline fill="none" stroke="#000000" points="773.5771,-141.5 911.0039,-141.5 "/>
<text text-anchor="start" x="781.5771" y="-126.3" font-family="Times,serif" font-size="14.00" fill="#000000">onDropTableOrView </text>
</g>
<!-- ddl_worker&#45;&gt;ddl_table -->
<g id="edge6" class="edge">
<title>ddl_worker&#45;&gt;ddl_table</title>
<path fill="none" stroke="#000000" d="M693.6676,-152.5C715.7084,-152.5 740.2613,-152.5 762.9591,-152.5"/>
<polygon fill="#000000" stroke="#000000" points="763.2416,-156.0001 773.2415,-152.5 763.2415,-149.0001 763.2416,-156.0001"/>
</g>
<!-- meta_ddl_job_queue -->
<g id="node8" class="node">
<title>meta_ddl_job_queue</title>
<polygon fill="none" stroke="#000000" points="1036.9839,-.5 1036.9839,-110.5 1156.4185,-110.5 1156.4185,-.5 1036.9839,-.5"/>
<text text-anchor="middle" x="1096.7012" y="-95.3" font-family="Times,serif" font-size="14.00" fill="#000000">meta</text>
<polyline fill="none" stroke="#000000" points="1036.9839,-88.5 1156.4185,-88.5 "/>
<text text-anchor="start" x="1044.9839" y="-73.3" font-family="Times,serif" font-size="14.00" fill="#000000">EnQueueDDLJob</text>
<polyline fill="none" stroke="#000000" points="1036.9839,-66.5 1156.4185,-66.5 "/>
<text text-anchor="start" x="1044.9839" y="-51.3" font-family="Times,serif" font-size="14.00" fill="#000000">DeQueueDDLJob</text>
<polyline fill="none" stroke="#000000" points="1036.9839,-44.5 1156.4185,-44.5 "/>
<text text-anchor="start" x="1044.9839" y="-29.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetDDLJobByIdx</text>
<polyline fill="none" stroke="#000000" points="1036.9839,-22.5 1156.4185,-22.5 "/>
<text text-anchor="middle" x="1096.7012" y="-7.3" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
</g>
<!-- ddl_worker&#45;&gt;meta_ddl_job_queue -->
<g id="edge4" class="edge">
<title>ddl_worker&#45;&gt;meta_ddl_job_queue</title>
<path fill="none" stroke="#000000" d="M693.5769,-111.3068C705.5598,-105.5415 718.1403,-100.2983 730.4766,-96.5 830.3379,-65.753 951.8356,-57.55 1026.7202,-55.6405"/>
<polygon fill="#000000" stroke="#000000" points="1027.0511,-59.1341 1036.9702,-55.4111 1026.8944,-52.1358 1027.0511,-59.1341"/>
<text text-anchor="middle" x="842.2905" y="-99.3" font-family="Times,serif" font-size="14.00" fill="#000000">enque/deque job</text>
</g>
<!-- meta -->
<g id="node7" class="node">
<title>meta</title>
<polygon fill="none" stroke="#000000" points="991.1045,-129.9001 991.1045,-367.0999 1202.2979,-367.0999 1202.2979,-129.9001 991.1045,-129.9001"/>
<text text-anchor="start" x="999.1045" y="-351.8999" font-family="Times,serif" font-size="14.00" fill="#000000">meta </text>
<text text-anchor="start" x="999.1045" y="-337.8999" font-family="Times,serif" font-size="14.00" fill="#000000">封装对DBInfo/tableInfo的增删改</text>
<text text-anchor="middle" x="1096.7012" y="-318.3" font-family="Times,serif" font-size="14.00" fill="#000000">封装key的prefix</text>
<polyline fill="none" stroke="#000000" points="991.1045,-305.9001 1202.2979,-305.9001 "/>
<text text-anchor="start" x="999.1045" y="-290.7001" font-family="Times,serif" font-size="14.00" fill="#000000">ListDatabases</text>
<polyline fill="none" stroke="#000000" points="991.1045,-283.9001 1202.2979,-283.9001 "/>
<text text-anchor="start" x="999.1045" y="-268.7001" font-family="Times,serif" font-size="14.00" fill="#000000">GetDatabase</text>
<polyline fill="none" stroke="#000000" points="991.1045,-261.9001 1202.2979,-261.9001 "/>
<text text-anchor="start" x="999.1045" y="-246.7001" font-family="Times,serif" font-size="14.00" fill="#000000">DropDatabase</text>
<polyline fill="none" stroke="#000000" points="991.1045,-239.9001 1202.2979,-239.9001 "/>
<text text-anchor="start" x="999.1045" y="-224.7001" font-family="Times,serif" font-size="14.00" fill="#000000">CreateDatabase</text>
<polyline fill="none" stroke="#000000" points="991.1045,-217.9001 1202.2979,-217.9001 "/>
<text text-anchor="start" x="999.1045" y="-202.7001" font-family="Times,serif" font-size="14.00" fill="#000000">CreateTableOrView</text>
<polyline fill="none" stroke="#000000" points="991.1045,-195.9001 1202.2979,-195.9001 "/>
<text text-anchor="start" x="999.1045" y="-180.7001" font-family="Times,serif" font-size="14.00" fill="#000000">DropTableOrView</text>
<polyline fill="none" stroke="#000000" points="991.1045,-173.9001 1202.2979,-173.9001 "/>
<text text-anchor="start" x="999.1045" y="-158.7001" font-family="Times,serif" font-size="14.00" fill="#000000">ListTables</text>
<polyline fill="none" stroke="#000000" points="991.1045,-151.9001 1202.2979,-151.9001 "/>
<text text-anchor="start" x="999.1045" y="-136.7001" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
</g>
<!-- ddl_schema&#45;&gt;meta -->
<g id="edge7" class="edge">
<title>ddl_schema&#45;&gt;meta</title>
<path fill="none" stroke="#000000" d="M954.249,-248.5C962.9683,-248.5 971.7847,-248.5 980.5309,-248.5"/>
<polygon fill="#000000" stroke="#000000" points="980.7561,-252.0001 990.7561,-248.5 980.756,-245.0001 980.7561,-252.0001"/>
</g>
<!-- ddl_table&#45;&gt;meta -->
<g id="edge8" class="edge">
<title>ddl_table&#45;&gt;meta</title>
<path fill="none" stroke="#000000" d="M911.1377,-178.479C932.8331,-186.6656 957.4201,-195.9433 981.4345,-205.005"/>
<polygon fill="#000000" stroke="#000000" points="980.3677,-208.3432 990.9594,-208.5991 982.839,-201.794 980.3677,-208.3432"/>
</g>
</g>
</svg>
