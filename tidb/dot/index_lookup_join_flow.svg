<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: index_lookup_join_flow Pages: 1 -->
<svg width="1299pt" height="317pt"
 viewBox="0.00 0.00 1299.00 316.82" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 312.82)">
<title>index_lookup_join_flow</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-312.82 1295,-312.82 1295,4 -4,4"/>
<g id="clust2" class="cluster">
<title>cluster_joiner</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M114,-51C114,-51 222,-51 222,-51 228,-51 234,-57 234,-63 234,-63 234,-175 234,-175 234,-181 228,-187 222,-187 222,-187 114,-187 114,-187 108,-187 102,-181 102,-175 102,-175 102,-63 102,-63 102,-57 108,-51 114,-51"/>
<text text-anchor="middle" x="168" y="-167" font-family="Times,serif" font-size="20.00">joiner</text>
</g>
<!-- Open -->
<g id="node1" class="node">
<title>Open</title>
<polygon fill="none" stroke="black" points="63.5,-251 9.5,-251 9.5,-215 63.5,-215 63.5,-251"/>
<text text-anchor="middle" x="36.5" y="-229.3" font-family="Times,serif" font-size="14.00">Open</text>
</g>
<!-- startWorkers -->
<g id="node5" class="node">
<title>startWorkers</title>
<polygon fill="none" stroke="black" points="211,-251 125,-251 125,-215 211,-215 211,-251"/>
<text text-anchor="middle" x="168" y="-229.3" font-family="Times,serif" font-size="14.00">startWorkers</text>
</g>
<!-- Open&#45;&gt;startWorkers -->
<g id="edge1" class="edge">
<title>Open&#45;&gt;startWorkers</title>
<path fill="none" stroke="#666666" d="M63.71,-233C78.35,-233 97.13,-233 114.64,-233"/>
<polygon fill="#666666" stroke="#666666" points="114.77,-236.5 124.77,-233 114.77,-229.5 114.77,-236.5"/>
</g>
<!-- Next -->
<g id="node2" class="node">
<title>Next</title>
<polygon fill="#ff577f" stroke="black" points="0,-54 0,-100 73,-100 73,-54 0,-54"/>
<text text-anchor="middle" x="36.5" y="-84.8" font-family="Times,serif" font-size="14.00">Next</text>
<polyline fill="none" stroke="black" points="0,-77 73,-77 "/>
<text text-anchor="middle" x="36.5" y="-61.8" font-family="Times,serif" font-size="14.00">main线程</text>
</g>
<!-- onMissMatch -->
<g id="node3" class="node">
<title>onMissMatch</title>
<polygon fill="none" stroke="black" points="214,-95 122,-95 122,-59 214,-59 214,-95"/>
<text text-anchor="middle" x="168" y="-73.3" font-family="Times,serif" font-size="14.00">onMissMatch</text>
</g>
<!-- Next&#45;&gt;onMissMatch -->
<g id="edge2" class="edge">
<title>Next&#45;&gt;onMissMatch</title>
<path fill="none" stroke="#666666" d="M73.23,-77C85.04,-77 98.48,-77 111.43,-77"/>
<polygon fill="#666666" stroke="#666666" points="111.66,-80.5 121.66,-77 111.66,-73.5 111.66,-80.5"/>
</g>
<!-- tryToMatchInners -->
<g id="node4" class="node">
<title>tryToMatchInners</title>
<polygon fill="none" stroke="black" points="226,-149 110,-149 110,-113 226,-113 226,-149"/>
<text text-anchor="middle" x="168" y="-127.3" font-family="Times,serif" font-size="14.00">tryToMatchInners</text>
</g>
<!-- Next&#45;&gt;tryToMatchInners -->
<g id="edge3" class="edge">
<title>Next&#45;&gt;tryToMatchInners</title>
<path fill="none" stroke="#666666" d="M73.32,-92.01C82.65,-95.92 92.7,-100.12 102,-104 105.87,-105.61 109.87,-107.28 113.9,-108.96"/>
<polygon fill="#666666" stroke="#666666" points="112.71,-112.25 123.29,-112.86 115.4,-105.79 112.71,-112.25"/>
</g>
<!-- getFinishedTask -->
<g id="node6" class="node">
<title>getFinishedTask</title>
<polygon fill="none" stroke="black" points="518,-0.5 518,-61.5 677,-61.5 677,-0.5 518,-0.5"/>
<text text-anchor="middle" x="597.5" y="-46.3" font-family="Times,serif" font-size="14.00">getFinishedTask</text>
<polyline fill="none" stroke="black" points="518,-38.5 677,-38.5 "/>
<text text-anchor="start" x="526" y="-23.3" font-family="Times,serif" font-size="14.00">从resultCh获取一个task</text>
<text text-anchor="start" x="526" y="-8.3" font-family="Times,serif" font-size="14.00"> 然后等待该task.doneCh</text>
</g>
<!-- Next&#45;&gt;getFinishedTask -->
<g id="edge4" class="edge">
<title>Next&#45;&gt;getFinishedTask</title>
<path fill="none" stroke="#666666" d="M73.07,-57.36C82.24,-53.17 92.27,-49.32 102,-47 240.75,-13.95 407.55,-17.04 507.64,-23.3"/>
<polygon fill="#666666" stroke="#666666" points="507.5,-26.8 517.71,-23.95 507.96,-19.81 507.5,-26.8"/>
</g>
<!-- newOuterWorker_run -->
<g id="node7" class="node">
<title>newOuterWorker_run</title>
<polygon fill="#ff577f" stroke="black" points="326.5,-231 326.5,-277 472.5,-277 472.5,-231 326.5,-231"/>
<text text-anchor="middle" x="399.5" y="-261.8" font-family="Times,serif" font-size="14.00">newOuterWorker.run</text>
<polyline fill="none" stroke="black" points="326.5,-254 472.5,-254 "/>
<text text-anchor="middle" x="399.5" y="-238.8" font-family="Times,serif" font-size="14.00">启动一个OuterWorker</text>
</g>
<!-- startWorkers&#45;&gt;newOuterWorker_run -->
<g id="edge5" class="edge">
<title>startWorkers&#45;&gt;newOuterWorker_run</title>
<path fill="none" stroke="#666666" d="M211.09,-236.85C240.42,-239.54 280.5,-243.2 316.07,-246.46"/>
<polygon fill="#666666" stroke="#666666" points="316.18,-249.98 326.46,-247.41 316.82,-243.01 316.18,-249.98"/>
<text text-anchor="middle" x="272" y="-247.8" font-family="Times,serif" font-size="14.00">go routine</text>
</g>
<!-- newInnerWorker_run -->
<g id="node8" class="node">
<title>newInnerWorker_run</title>
<polygon fill="#ff577f" stroke="black" points="318,-107.5 318,-206.5 481,-206.5 481,-107.5 318,-107.5"/>
<text text-anchor="middle" x="399.5" y="-191.3" font-family="Times,serif" font-size="14.00">newInnerWorker.run</text>
<polyline fill="none" stroke="black" points="318,-183.5 481,-183.5 "/>
<text text-anchor="start" x="326" y="-168.3" font-family="Times,serif" font-size="14.00">启动多个InnerWorker</text>
<polyline fill="none" stroke="black" points="318,-160.5 481,-160.5 "/>
<text text-anchor="start" x="326" y="-145.3" font-family="Times,serif" font-size="14.00">从innerCh中去取task</text>
<text text-anchor="start" x="326" y="-130.3" font-family="Times,serif" font-size="14.00"> 然后执行，执行结束后</text>
<text text-anchor="start" x="326" y="-115.3" font-family="Times,serif" font-size="14.00"> 发消息给doneCh</text>
</g>
<!-- startWorkers&#45;&gt;newInnerWorker_run -->
<g id="edge6" class="edge">
<title>startWorkers&#45;&gt;newInnerWorker_run</title>
<path fill="none" stroke="#666666" d="M211.09,-219.06C238.18,-210.09 274.45,-198.08 307.86,-187.02"/>
<polygon fill="#666666" stroke="#666666" points="309.26,-190.24 317.66,-183.77 307.06,-183.59 309.26,-190.24"/>
<text text-anchor="middle" x="272" y="-209.8" font-family="Times,serif" font-size="14.00">go routine</text>
</g>
<!-- resultCh -->
<g id="node13" class="node">
<title>resultCh</title>
<polygon fill="none" stroke="black" points="1224,-137 1162,-137 1162,-101 1224,-101 1224,-137"/>
<text text-anchor="middle" x="1193" y="-115.3" font-family="Times,serif" font-size="14.00">resultCh</text>
</g>
<!-- getFinishedTask&#45;&gt;resultCh -->
<g id="edge16" class="edge">
<title>getFinishedTask&#45;&gt;resultCh</title>
<path fill="none" stroke="blue" d="M677.01,-42.64C805.13,-61.64 1054.63,-98.63 1151.86,-113.05"/>
<polygon fill="blue" stroke="blue" points="1151.46,-116.53 1161.86,-114.53 1152.49,-109.6 1151.46,-116.53"/>
<text text-anchor="middle" x="873" y="-75.8" font-family="Times,serif" font-size="14.00">recv</text>
</g>
<!-- task_doneCh -->
<g id="node14" class="node">
<title>task_doneCh</title>
<polygon fill="none" stroke="black" points="833.5,-116 746.5,-116 746.5,-80 833.5,-80 833.5,-116"/>
<text text-anchor="middle" x="790" y="-94.3" font-family="Times,serif" font-size="14.00">task_doneCh</text>
</g>
<!-- getFinishedTask&#45;&gt;task_doneCh -->
<g id="edge17" class="edge">
<title>getFinishedTask&#45;&gt;task_doneCh</title>
<path fill="none" stroke="blue" d="M677.08,-58.64C697.15,-65.7 718.24,-73.11 736.63,-79.58"/>
<polygon fill="blue" stroke="blue" points="735.67,-82.95 746.26,-82.97 737.99,-76.35 735.67,-82.95"/>
<text text-anchor="middle" x="707" y="-75.8" font-family="Times,serif" font-size="14.00">recv</text>
</g>
<!-- buildTask -->
<g id="node9" class="node">
<title>buildTask</title>
<polygon fill="none" stroke="black" points="521.5,-223.5 521.5,-284.5 673.5,-284.5 673.5,-223.5 521.5,-223.5"/>
<text text-anchor="middle" x="597.5" y="-269.3" font-family="Times,serif" font-size="14.00">buildTask</text>
<polyline fill="none" stroke="black" points="521.5,-261.5 673.5,-261.5 "/>
<text text-anchor="start" x="529.5" y="-246.3" font-family="Times,serif" font-size="14.00">builds a lookUpJoinTask</text>
<text text-anchor="start" x="529.5" y="-231.3" font-family="Times,serif" font-size="14.00"> and read outer rows</text>
</g>
<!-- newOuterWorker_run&#45;&gt;buildTask -->
<g id="edge9" class="edge">
<title>newOuterWorker_run&#45;&gt;buildTask</title>
<path fill="none" stroke="#666666" d="M472.65,-254C485.14,-254 498.23,-254 511.03,-254"/>
<polygon fill="#666666" stroke="#666666" points="511.22,-257.5 521.22,-254 511.22,-250.5 511.22,-257.5"/>
</g>
<!-- pushToChan -->
<g id="node11" class="node">
<title>pushToChan</title>
<polygon fill="none" stroke="black" points="903,-233.5 903,-294.5 1034,-294.5 1034,-233.5 903,-233.5"/>
<text text-anchor="middle" x="968.5" y="-279.3" font-family="Times,serif" font-size="14.00">pushToChan</text>
<polyline fill="none" stroke="black" points="903,-271.5 1034,-271.5 "/>
<text text-anchor="start" x="911" y="-256.3" font-family="Times,serif" font-size="14.00">将Task放入resultCh</text>
<text text-anchor="start" x="911" y="-241.3" font-family="Times,serif" font-size="14.00"> 和innerCh中</text>
</g>
<!-- newOuterWorker_run&#45;&gt;pushToChan -->
<g id="edge10" class="edge">
<title>newOuterWorker_run&#45;&gt;pushToChan</title>
<path fill="none" stroke="#666666" d="M456.01,-277.07C475.29,-283.95 497.27,-290.57 518,-294 660.51,-317.59 699.53,-308.81 843,-292 859.22,-290.1 876.42,-286.97 892.69,-283.48"/>
<polygon fill="#666666" stroke="#666666" points="893.67,-286.85 902.68,-281.27 892.16,-280.01 893.67,-286.85"/>
</g>
<!-- innerCh -->
<g id="node12" class="node">
<title>innerCh</title>
<polygon fill="none" stroke="black" points="1095,-207 1095,-253 1291,-253 1291,-207 1095,-207"/>
<text text-anchor="middle" x="1193" y="-237.8" font-family="Times,serif" font-size="14.00">innerCh</text>
<polyline fill="none" stroke="black" points="1095,-230 1291,-230 "/>
<text text-anchor="middle" x="1193" y="-214.8" font-family="Times,serif" font-size="14.00">taskCh &lt;&#45;chan *lookUpJoinTask</text>
</g>
<!-- newInnerWorker_run&#45;&gt;innerCh -->
<g id="edge14" class="edge">
<title>newInnerWorker_run&#45;&gt;innerCh</title>
<path fill="none" stroke="blue" d="M481.36,-179.87C516.45,-187.92 558.2,-195 596.5,-195 596.5,-195 596.5,-195 969.5,-195 1007.3,-195 1048.27,-199.99 1084.64,-206.2"/>
<polygon fill="blue" stroke="blue" points="1084.31,-209.7 1094.77,-207.98 1085.53,-202.8 1084.31,-209.7"/>
<text text-anchor="middle" x="790" y="-198.8" font-family="Times,serif" font-size="14.00">recv</text>
</g>
<!-- newInnerWorker_run&#45;&gt;task_doneCh -->
<g id="edge13" class="edge">
<title>newInnerWorker_run&#45;&gt;task_doneCh</title>
<path fill="none" stroke="red" d="M481.03,-150.28C536.4,-145.03 611.46,-136.65 677,-125 696.61,-121.51 717.92,-116.65 736.63,-112.02"/>
<polygon fill="red" stroke="red" points="737.6,-115.38 746.44,-109.55 735.89,-108.59 737.6,-115.38"/>
<text text-anchor="middle" x="597.5" y="-149.8" font-family="Times,serif" font-size="14.00">send</text>
</g>
<!-- handleTask -->
<g id="node15" class="node">
<title>handleTask</title>
<polygon fill="none" stroke="black" points="637,-116 558,-116 558,-80 637,-80 637,-116"/>
<text text-anchor="middle" x="597.5" y="-94.3" font-family="Times,serif" font-size="14.00">handleTask</text>
</g>
<!-- newInnerWorker_run&#45;&gt;handleTask -->
<g id="edge15" class="edge">
<title>newInnerWorker_run&#45;&gt;handleTask</title>
<path fill="none" stroke="#666666" d="M481.07,-132.75C503.84,-125.89 527.92,-118.64 548.15,-112.55"/>
<polygon fill="#666666" stroke="#666666" points="549.19,-115.9 557.75,-109.66 547.17,-109.19 549.19,-115.9"/>
</g>
<!-- task -->
<g id="node10" class="node">
<title>task</title>
<polygon fill="#f6d887" stroke="black" points="737,-236 737,-282 843,-282 843,-236 737,-236"/>
<text text-anchor="middle" x="790" y="-266.8" font-family="Times,serif" font-size="14.00">task</text>
<polyline fill="none" stroke="black" points="737,-259 843,-259 "/>
<text text-anchor="start" x="745" y="-243.8" font-family="Times,serif" font-size="14.00">lookUpJoinTask</text>
</g>
<!-- buildTask&#45;&gt;task -->
<g id="edge7" class="edge">
<title>buildTask&#45;&gt;task</title>
<path fill="none" stroke="#666666" d="M673.52,-255.97C691.11,-256.43 709.66,-256.92 726.63,-257.36"/>
<polygon fill="#666666" stroke="#666666" points="726.88,-260.87 736.97,-257.63 727.06,-253.87 726.88,-260.87"/>
</g>
<!-- task&#45;&gt;pushToChan -->
<g id="edge8" class="edge">
<title>task&#45;&gt;pushToChan</title>
<path fill="none" stroke="#666666" d="M843,-260.47C858.5,-260.91 875.79,-261.4 892.45,-261.87"/>
<polygon fill="#666666" stroke="#666666" points="892.62,-265.38 902.72,-262.16 892.82,-258.38 892.62,-265.38"/>
</g>
<!-- pushToChan&#45;&gt;innerCh -->
<g id="edge11" class="edge">
<title>pushToChan&#45;&gt;innerCh</title>
<path fill="none" stroke="red" d="M1034.16,-254.12C1050.03,-251.69 1067.45,-249.03 1084.74,-246.39"/>
<polygon fill="red" stroke="red" points="1085.53,-249.81 1094.89,-244.84 1084.48,-242.89 1085.53,-249.81"/>
<text text-anchor="middle" x="1064.5" y="-254.8" font-family="Times,serif" font-size="14.00">send</text>
</g>
<!-- pushToChan&#45;&gt;resultCh -->
<g id="edge12" class="edge">
<title>pushToChan&#45;&gt;resultCh</title>
<path fill="none" stroke="red" d="M1016.41,-233.43C1057.85,-206.43 1117.41,-167.61 1155.41,-142.85"/>
<polygon fill="red" stroke="red" points="1157.64,-145.57 1164.11,-137.18 1153.82,-139.7 1157.64,-145.57"/>
<text text-anchor="middle" x="1064.5" y="-211.8" font-family="Times,serif" font-size="14.00">send</text>
</g>
<!-- handleTask&#45;&gt;task_doneCh -->
<g id="edge18" class="edge">
<title>handleTask&#45;&gt;task_doneCh</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M637.05,-98C665.47,-98 704.49,-98 735.87,-98"/>
<polygon fill="#666666" stroke="#666666" points="736.19,-101.5 746.19,-98 736.19,-94.5 736.19,-101.5"/>
</g>
</g>
</svg>
