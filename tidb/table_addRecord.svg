<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: table_add_record Pages: 1 -->
<svg width="976pt" height="558pt"
 viewBox="0.00 0.00 975.95 557.55" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 553.5531)">
<title>table_add_record</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-553.5531 971.9521,-553.5531 971.9521,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_kv</title>
<path fill="none" stroke="#000000" d="M712.0381,-115.5531C712.0381,-115.5531 758.0381,-115.5531 758.0381,-115.5531 764.0381,-115.5531 770.0381,-121.5531 770.0381,-127.5531 770.0381,-127.5531 770.0381,-183.5531 770.0381,-183.5531 770.0381,-189.5531 764.0381,-195.5531 758.0381,-195.5531 758.0381,-195.5531 712.0381,-195.5531 712.0381,-195.5531 706.0381,-195.5531 700.0381,-189.5531 700.0381,-183.5531 700.0381,-183.5531 700.0381,-127.5531 700.0381,-127.5531 700.0381,-121.5531 706.0381,-115.5531 712.0381,-115.5531"/>
<text text-anchor="middle" x="735.0381" y="-175.5531" font-family="Times,serif" font-size="20.00" fill="#000000">kv</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_sessionCtx</title>
<path fill="none" stroke="#000000" d="M670.4956,-27.5531C670.4956,-27.5531 799.5806,-27.5531 799.5806,-27.5531 805.5806,-27.5531 811.5806,-33.5531 811.5806,-39.5531 811.5806,-39.5531 811.5806,-95.5531 811.5806,-95.5531 811.5806,-101.5531 805.5806,-107.5531 799.5806,-107.5531 799.5806,-107.5531 670.4956,-107.5531 670.4956,-107.5531 664.4956,-107.5531 658.4956,-101.5531 658.4956,-95.5531 658.4956,-95.5531 658.4956,-39.5531 658.4956,-39.5531 658.4956,-33.5531 664.4956,-27.5531 670.4956,-27.5531"/>
<text text-anchor="middle" x="735.0381" y="-87.5531" font-family="Times,serif" font-size="20.00" fill="#000000">sessionCtx</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_tablecodec</title>
<path fill="none" stroke="#000000" d="M871.5244,-86.5531C871.5244,-86.5531 948.9521,-86.5531 948.9521,-86.5531 954.9521,-86.5531 960.9521,-92.5531 960.9521,-98.5531 960.9521,-98.5531 960.9521,-154.5531 960.9521,-154.5531 960.9521,-160.5531 954.9521,-166.5531 948.9521,-166.5531 948.9521,-166.5531 871.5244,-166.5531 871.5244,-166.5531 865.5244,-166.5531 859.5244,-160.5531 859.5244,-154.5531 859.5244,-154.5531 859.5244,-98.5531 859.5244,-98.5531 859.5244,-92.5531 865.5244,-86.5531 871.5244,-86.5531"/>
<text text-anchor="middle" x="910.2383" y="-146.5531" font-family="Times,serif" font-size="20.00" fill="#000000">tablecodec</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_Index</title>
<path fill="none" stroke="#000000" d="M871.5244,-406.5531C871.5244,-406.5531 947.9521,-406.5531 947.9521,-406.5531 953.9521,-406.5531 959.9521,-412.5531 959.9521,-418.5531 959.9521,-418.5531 959.9521,-528.5531 959.9521,-528.5531 959.9521,-534.5531 953.9521,-540.5531 947.9521,-540.5531 947.9521,-540.5531 871.5244,-540.5531 871.5244,-540.5531 865.5244,-540.5531 859.5244,-534.5531 859.5244,-528.5531 859.5244,-528.5531 859.5244,-418.5531 859.5244,-418.5531 859.5244,-412.5531 865.5244,-406.5531 871.5244,-406.5531"/>
<text text-anchor="middle" x="909.7383" y="-520.5531" font-family="Times,serif" font-size="20.00" fill="#000000">Index</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_tableCommon</title>
<path fill="none" stroke="#000000" d="M422.7109,-203.5531C422.7109,-203.5531 826.5244,-203.5531 826.5244,-203.5531 832.5244,-203.5531 838.5244,-209.5531 838.5244,-215.5531 838.5244,-215.5531 838.5244,-529.5531 838.5244,-529.5531 838.5244,-535.5531 832.5244,-541.5531 826.5244,-541.5531 826.5244,-541.5531 422.7109,-541.5531 422.7109,-541.5531 416.7109,-541.5531 410.7109,-535.5531 410.7109,-529.5531 410.7109,-529.5531 410.7109,-215.5531 410.7109,-215.5531 410.7109,-209.5531 416.7109,-203.5531 422.7109,-203.5531"/>
<text text-anchor="middle" x="624.6177" y="-521.5531" font-family="Times,serif" font-size="20.00" fill="#000000">tableCommon</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_insert_values</title>
<path fill="none" stroke="#000000" d="M134,-234.5531C134,-234.5531 377.7109,-234.5531 377.7109,-234.5531 383.7109,-234.5531 389.7109,-240.5531 389.7109,-246.5531 389.7109,-246.5531 389.7109,-302.5531 389.7109,-302.5531 389.7109,-308.5531 383.7109,-314.5531 377.7109,-314.5531 377.7109,-314.5531 134,-314.5531 134,-314.5531 128,-314.5531 122,-308.5531 122,-302.5531 122,-302.5531 122,-246.5531 122,-246.5531 122,-240.5531 128,-234.5531 134,-234.5531"/>
<text text-anchor="middle" x="255.8555" y="-294.5531" font-family="Times,serif" font-size="20.00" fill="#000000">InsertValues</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_InsertExec</title>
<path fill="none" stroke="#000000" d="M12,-234.5531C12,-234.5531 89,-234.5531 89,-234.5531 95,-234.5531 101,-240.5531 101,-246.5531 101,-246.5531 101,-302.5531 101,-302.5531 101,-308.5531 95,-314.5531 89,-314.5531 89,-314.5531 12,-314.5531 12,-314.5531 6,-314.5531 0,-308.5531 0,-302.5531 0,-302.5531 0,-246.5531 0,-246.5531 0,-240.5531 6,-234.5531 12,-234.5531"/>
<text text-anchor="middle" x="50.5" y="-294.5531" font-family="Times,serif" font-size="20.00" fill="#000000">InsertExec</text>
</g>
<!-- txn_Set -->
<g id="node1" class="node">
<title>txn_Set</title>
<polygon fill="none" stroke="#000000" points="762.0381,-159.5531 708.0381,-159.5531 708.0381,-123.5531 762.0381,-123.5531 762.0381,-159.5531"/>
<text text-anchor="middle" x="735.0381" y="-137.3531" font-family="Times,serif" font-size="14.00" fill="#000000">Set</text>
</g>
<!-- UpdateDeltaForTable -->
<g id="node2" class="node">
<title>UpdateDeltaForTable</title>
<polygon fill="none" stroke="#000000" points="803.6231,-71.5531 666.4531,-71.5531 666.4531,-35.5531 803.6231,-35.5531 803.6231,-71.5531"/>
<text text-anchor="middle" x="735.0381" y="-49.3531" font-family="Times,serif" font-size="14.00" fill="#000000">UpdateDeltaForTable</text>
</g>
<!-- EncodeRow -->
<g id="node3" class="node">
<title>EncodeRow</title>
<polygon fill="none" stroke="#000000" points="952.1671,-130.5531 867.3095,-130.5531 867.3095,-94.5531 952.1671,-94.5531 952.1671,-130.5531"/>
<text text-anchor="middle" x="909.7383" y="-108.3531" font-family="Times,serif" font-size="14.00" fill="#000000">EncodeRow</text>
</g>
<!-- Index_FetchValues -->
<g id="node4" class="node">
<title>Index_FetchValues</title>
<polygon fill="none" stroke="#000000" points="952.1671,-504.5531 867.3095,-504.5531 867.3095,-468.5531 952.1671,-468.5531 952.1671,-504.5531"/>
<text text-anchor="middle" x="909.7383" y="-482.3531" font-family="Times,serif" font-size="14.00" fill="#000000">FetchValues</text>
</g>
<!-- Index_Create -->
<g id="node5" class="node">
<title>Index_Create</title>
<polygon fill="none" stroke="#000000" points="936.7383,-450.5531 882.7383,-450.5531 882.7383,-414.5531 936.7383,-414.5531 936.7383,-450.5531"/>
<text text-anchor="middle" x="909.7383" y="-428.3531" font-family="Times,serif" font-size="14.00" fill="#000000">Create</text>
</g>
<!-- Table_AddRecord -->
<g id="node6" class="node">
<title>Table_AddRecord</title>
<polygon fill="none" stroke="#000000" points="499.0194,-278.5531 418.9406,-278.5531 418.9406,-242.5531 499.0194,-242.5531 499.0194,-278.5531"/>
<text text-anchor="middle" x="458.98" y="-256.3531" font-family="Times,serif" font-size="14.00" fill="#000000">AddRecord</text>
</g>
<!-- Table_AddRecord&#45;&gt;txn_Set -->
<g id="edge8" class="edge">
<title>Table_AddRecord&#45;&gt;txn_Set</title>
<path fill="none" stroke="#000000" d="M477.3412,-242.3742C488.2037,-232.4398 502.6582,-220.564 517.249,-212.5531 576.5953,-179.9699 653.3223,-159.3245 698.0696,-149.1486"/>
<polygon fill="#000000" stroke="#000000" points="698.9177,-152.5456 707.9209,-146.9606 697.3999,-145.7121 698.9177,-152.5456"/>
<text text-anchor="start" x="517.249" y="-229.3531" font-family="Times,serif" font-size="14.00" fill="#000000">key=RecordKey</text>
<text text-anchor="middle" x="569.4004" y="-215.3531" font-family="Times,serif" font-size="14.00" fill="#000000">value=encodeRow</text>
</g>
<!-- Table_AddRecord&#45;&gt;UpdateDeltaForTable -->
<g id="edge1" class="edge">
<title>Table_AddRecord&#45;&gt;UpdateDeltaForTable</title>
<path fill="none" stroke="#000000" d="M466.4539,-242.4298C475.7699,-221.663 493.4167,-187.6575 517.249,-165.5531 562.0157,-124.0321 625.0912,-93.8505 671.8472,-75.3522"/>
<polygon fill="#000000" stroke="#000000" points="673.2115,-78.5771 681.2671,-71.6954 670.6782,-72.0515 673.2115,-78.5771"/>
</g>
<!-- Table_AddRecord&#45;&gt;EncodeRow -->
<g id="edge2" class="edge">
<title>Table_AddRecord&#45;&gt;EncodeRow</title>
<path fill="none" stroke="#000000" d="M461.2447,-242.4481C466.1525,-209.7783 480.4508,-140.2207 517.249,-95.5531 557.3558,-46.8694 578.6941,-40.1365 639.5518,-23.5531 724.8731,-.3035 758.8183,14.751 838.5244,-23.5531 865.0927,-36.3209 884.8533,-64.3628 896.7334,-85.5811"/>
<polygon fill="#000000" stroke="#000000" points="893.6882,-87.3089 901.4863,-94.481 899.8629,-84.0113 893.6882,-87.3089"/>
</g>
<!-- AllocHandle -->
<g id="node7" class="node">
<title>AllocHandle</title>
<polygon fill="none" stroke="#000000" points="821.6074,-253.1549 648.4687,-253.1549 648.4687,-211.9513 821.6074,-211.9513 821.6074,-253.1549"/>
<text text-anchor="start" x="656.5034" y="-238.1531" font-family="Times,serif" font-size="14.00" fill="#000000">AllocHandle</text>
<text text-anchor="middle" x="735.0381" y="-224.1531" font-family="Times,serif" font-size="14.00" fill="#000000">为record分配一新的handle</text>
</g>
<!-- Table_AddRecord&#45;&gt;AllocHandle -->
<g id="edge3" class="edge">
<title>Table_AddRecord&#45;&gt;AllocHandle</title>
<path fill="none" stroke="#000000" d="M499.1212,-256.4817C535.4893,-252.7929 590.5368,-247.2096 638.3126,-242.3638"/>
<polygon fill="#000000" stroke="#000000" points="638.7919,-245.8332 648.3877,-241.3419 638.0855,-238.8689 638.7919,-245.8332"/>
</g>
<!-- addIndices -->
<g id="node8" class="node">
<title>addIndices</title>
<polygon fill="none" stroke="#000000" points="773.1805,-505.1549 696.8957,-505.1549 696.8957,-463.9513 773.1805,-463.9513 773.1805,-505.1549"/>
<text text-anchor="start" x="704.7173" y="-490.1531" font-family="Times,serif" font-size="14.00" fill="#000000">addIndices</text>
<text text-anchor="middle" x="735.0381" y="-476.1531" font-family="Times,serif" font-size="14.00" fill="#000000">更新索引</text>
</g>
<!-- Table_AddRecord&#45;&gt;addIndices -->
<g id="edge4" class="edge">
<title>Table_AddRecord&#45;&gt;addIndices</title>
<path fill="none" stroke="#000000" d="M470.2801,-278.6C495.5566,-317.3976 560.6819,-408.9933 639.5518,-455.5531 653.8709,-464.0062 670.8745,-470.1972 686.5371,-474.634"/>
<polygon fill="#000000" stroke="#000000" points="686.0311,-478.1208 696.5943,-477.3026 687.8264,-471.355 686.0311,-478.1208"/>
</g>
<!-- WritableCols -->
<g id="node9" class="node">
<title>WritableCols</title>
<polygon fill="none" stroke="#000000" points="830.5107,-367.1549 639.5654,-367.1549 639.5654,-325.9513 830.5107,-325.9513 830.5107,-367.1549"/>
<text text-anchor="start" x="647.5518" y="-352.1531" font-family="Times,serif" font-size="14.00" fill="#000000">WritableCols</text>
<text text-anchor="middle" x="735.0381" y="-338.1531" font-family="Times,serif" font-size="14.00" fill="#000000">从schema中获取可写的colum</text>
</g>
<!-- Table_AddRecord&#45;&gt;WritableCols -->
<g id="edge5" class="edge">
<title>Table_AddRecord&#45;&gt;WritableCols</title>
<path fill="none" stroke="#000000" d="M499.1212,-273.0582C540.8453,-286.0565 607.1557,-306.7141 658.8644,-322.8228"/>
<polygon fill="#000000" stroke="#000000" points="658.0812,-326.2447 668.6697,-325.8774 660.1633,-319.5615 658.0812,-326.2447"/>
</g>
<!-- RecordKey -->
<g id="node10" class="node">
<title>RecordKey</title>
<polygon fill="none" stroke="#000000" points="810.8216,-446.2532 659.2546,-446.2532 659.2546,-384.8529 810.8216,-384.8529 810.8216,-446.2532"/>
<text text-anchor="start" x="667.3965" y="-430.953" font-family="Times,serif" font-size="14.00" fill="#000000">RecordKey</text>
<text text-anchor="start" x="667.3965" y="-416.953" font-family="Times,serif" font-size="14.00" fill="#000000">根据recordkey和handle</text>
<text text-anchor="start" x="667.3965" y="-397.3531" font-family="Times,serif" font-size="14.00" fill="#000000">生成对应的key</text>
</g>
<!-- Table_AddRecord&#45;&gt;RecordKey -->
<g id="edge6" class="edge">
<title>Table_AddRecord&#45;&gt;RecordKey</title>
<path fill="none" stroke="#000000" d="M486.5087,-278.5877C496.2103,-284.9217 507.201,-292.0728 517.249,-298.5531 571.429,-333.4954 582.2997,-346.9113 639.5518,-376.5531 642.8887,-378.2808 646.3201,-379.9872 649.8082,-381.6644"/>
<polygon fill="#000000" stroke="#000000" points="648.6062,-384.966 659.1475,-386.0299 651.5704,-378.6246 648.6062,-384.966"/>
</g>
<!-- addInsertBinlog -->
<g id="node11" class="node">
<title>addInsertBinlog</title>
<polygon fill="none" stroke="#000000" points="788.2453,-307.5531 681.8309,-307.5531 681.8309,-271.5531 788.2453,-271.5531 788.2453,-307.5531"/>
<text text-anchor="middle" x="735.0381" y="-285.3531" font-family="Times,serif" font-size="14.00" fill="#000000">addInsertBinlog</text>
</g>
<!-- Table_AddRecord&#45;&gt;addInsertBinlog -->
<g id="edge7" class="edge">
<title>Table_AddRecord&#45;&gt;addInsertBinlog</title>
<path fill="none" stroke="#000000" d="M499.1212,-264.7699C544.3574,-269.522 618.4933,-277.31 671.5884,-282.8877"/>
<polygon fill="#000000" stroke="#000000" points="671.2677,-286.3732 681.5787,-283.9372 671.9991,-279.4115 671.2677,-286.3732"/>
</g>
<!-- addIndices&#45;&gt;Index_FetchValues -->
<g id="edge9" class="edge">
<title>addIndices&#45;&gt;Index_FetchValues</title>
<path fill="none" stroke="#000000" d="M773.3768,-484.992C798.0473,-485.2744 830.4296,-485.6452 857.447,-485.9545"/>
<polygon fill="#000000" stroke="#000000" points="857.4723,-489.4549 867.5118,-486.0697 857.5525,-482.4553 857.4723,-489.4549"/>
</g>
<!-- addIndices&#45;&gt;Index_Create -->
<g id="edge10" class="edge">
<title>addIndices&#45;&gt;Index_Create</title>
<path fill="none" stroke="#000000" d="M773.4754,-474.1674C793.0087,-468.7918 817.0872,-462.0159 838.5244,-455.5531 849.6674,-452.1938 861.7316,-448.3693 872.708,-444.8165"/>
<polygon fill="#000000" stroke="#000000" points="874.0008,-448.0765 882.4249,-441.6512 871.8326,-441.4207 874.0008,-448.0765"/>
</g>
<!-- addInsertBinlog&#45;&gt;EncodeRow -->
<g id="edge11" class="edge">
<title>addInsertBinlog&#45;&gt;EncodeRow</title>
<path fill="none" stroke="#000000" d="M788.3532,-284.7106C805.8672,-280.8991 824.4349,-274.2144 838.5244,-262.5531 876.6628,-230.9876 895.6797,-174.2693 904.0668,-140.3503"/>
<polygon fill="#000000" stroke="#000000" points="907.476,-141.1423 906.3379,-130.6087 900.6588,-139.5529 907.476,-141.1423"/>
</g>
<!-- batchCheckAndInsert -->
<g id="node12" class="node">
<title>batchCheckAndInsert</title>
<polygon fill="none" stroke="#000000" points="268.104,-278.5531 129.9653,-278.5531 129.9653,-242.5531 268.104,-242.5531 268.104,-278.5531"/>
<text text-anchor="middle" x="199.0347" y="-256.3531" font-family="Times,serif" font-size="14.00" fill="#000000">batchCheckAndInsert</text>
</g>
<!-- addRecord -->
<g id="node13" class="node">
<title>addRecord</title>
<polygon fill="none" stroke="#000000" points="381.5326,-278.5531 305.2477,-278.5531 305.2477,-242.5531 381.5326,-242.5531 381.5326,-278.5531"/>
<text text-anchor="middle" x="343.3901" y="-256.3531" font-family="Times,serif" font-size="14.00" fill="#000000">addRecord</text>
</g>
<!-- batchCheckAndInsert&#45;&gt;addRecord -->
<g id="edge12" class="edge">
<title>batchCheckAndInsert&#45;&gt;addRecord</title>
<path fill="none" stroke="#000000" d="M268.2527,-260.5531C277.3067,-260.5531 286.4228,-260.5531 295.0301,-260.5531"/>
<polygon fill="#000000" stroke="#000000" points="295.2382,-264.0532 305.2382,-260.5531 295.2381,-257.0532 295.2382,-264.0532"/>
</g>
<!-- addRecord&#45;&gt;Table_AddRecord -->
<g id="edge13" class="edge">
<title>addRecord&#45;&gt;Table_AddRecord</title>
<path fill="none" stroke="#000000" d="M381.5589,-260.5531C390.2546,-260.5531 399.6228,-260.5531 408.7362,-260.5531"/>
<polygon fill="#000000" stroke="#000000" points="408.8678,-264.0532 418.8678,-260.5531 408.8678,-257.0532 408.8678,-264.0532"/>
</g>
<!-- InsertExec_exec -->
<g id="node14" class="node">
<title>InsertExec_exec</title>
<polygon fill="none" stroke="#000000" points="77,-278.5531 23,-278.5531 23,-242.5531 77,-242.5531 77,-278.5531"/>
<text text-anchor="middle" x="50" y="-256.3531" font-family="Times,serif" font-size="14.00" fill="#000000">exec</text>
</g>
<!-- InsertExec_exec&#45;&gt;batchCheckAndInsert -->
<g id="edge14" class="edge">
<title>InsertExec_exec&#45;&gt;batchCheckAndInsert</title>
<path fill="none" stroke="#000000" d="M77.3353,-260.5531C89.4676,-260.5531 104.4345,-260.5531 119.6727,-260.5531"/>
<polygon fill="#000000" stroke="#000000" points="119.6986,-264.0532 129.6985,-260.5531 119.6985,-257.0532 119.6986,-264.0532"/>
</g>
</g>
</svg>
