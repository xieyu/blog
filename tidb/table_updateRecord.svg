<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: table_update_record Pages: 1 -->
<svg width="915pt" height="567pt"
 viewBox="0.00 0.00 915.43 567.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 563)">
<title>table_update_record</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-563 911.4287,-563 911.4287,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_kv</title>
<path fill="none" stroke="#000000" d="M522.0869,-184C522.0869,-184 568.0869,-184 568.0869,-184 574.0869,-184 580.0869,-190 580.0869,-196 580.0869,-196 580.0869,-252 580.0869,-252 580.0869,-258 574.0869,-264 568.0869,-264 568.0869,-264 522.0869,-264 522.0869,-264 516.0869,-264 510.0869,-258 510.0869,-252 510.0869,-252 510.0869,-196 510.0869,-196 510.0869,-190 516.0869,-184 522.0869,-184"/>
<text text-anchor="middle" x="545.0869" y="-244" font-family="Times,serif" font-size="20.00" fill="#000000">kv</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_sessionCtx</title>
<path fill="none" stroke="#000000" d="M480.5444,-96C480.5444,-96 609.6294,-96 609.6294,-96 615.6294,-96 621.6294,-102 621.6294,-108 621.6294,-108 621.6294,-164 621.6294,-164 621.6294,-170 615.6294,-176 609.6294,-176 609.6294,-176 480.5444,-176 480.5444,-176 474.5444,-176 468.5444,-170 468.5444,-164 468.5444,-164 468.5444,-108 468.5444,-108 468.5444,-102 474.5444,-96 480.5444,-96"/>
<text text-anchor="middle" x="545.0869" y="-156" font-family="Times,serif" font-size="20.00" fill="#000000">sessionCtx</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_tablecodec</title>
<path fill="none" stroke="#000000" d="M506.873,-8C506.873,-8 584.3008,-8 584.3008,-8 590.3008,-8 596.3008,-14 596.3008,-20 596.3008,-20 596.3008,-76 596.3008,-76 596.3008,-82 590.3008,-88 584.3008,-88 584.3008,-88 506.873,-88 506.873,-88 500.873,-88 494.873,-82 494.873,-76 494.873,-76 494.873,-20 494.873,-20 494.873,-14 500.873,-8 506.873,-8"/>
<text text-anchor="middle" x="545.5869" y="-68" font-family="Times,serif" font-size="20.00" fill="#000000">tablecodec</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_Index</title>
<path fill="none" stroke="#000000" d="M700.7871,-130C700.7871,-130 887.4287,-130 887.4287,-130 893.4287,-130 899.4287,-136 899.4287,-142 899.4287,-142 899.4287,-252 899.4287,-252 899.4287,-258 893.4287,-264 887.4287,-264 887.4287,-264 700.7871,-264 700.7871,-264 694.7871,-264 688.7871,-258 688.7871,-252 688.7871,-252 688.7871,-142 688.7871,-142 688.7871,-136 694.7871,-130 700.7871,-130"/>
<text text-anchor="middle" x="794.1079" y="-244" font-family="Times,serif" font-size="20.00" fill="#000000">Index</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_tableCommon</title>
<path fill="none" stroke="#000000" d="M320.7451,-272C320.7451,-272 797.4287,-272 797.4287,-272 803.4287,-272 809.4287,-278 809.4287,-284 809.4287,-284 809.4287,-539 809.4287,-539 809.4287,-545 803.4287,-551 797.4287,-551 797.4287,-551 320.7451,-551 320.7451,-551 314.7451,-551 308.7451,-545 308.7451,-539 308.7451,-539 308.7451,-284 308.7451,-284 308.7451,-278 314.7451,-272 320.7451,-272"/>
<text text-anchor="middle" x="559.0869" y="-531" font-family="Times,serif" font-size="20.00" fill="#000000">tableCommon</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_executor</title>
<path fill="none" stroke="#000000" d="M145,-275C145,-275 276.7451,-275 276.7451,-275 282.7451,-275 288.7451,-281 288.7451,-287 288.7451,-287 288.7451,-343 288.7451,-343 288.7451,-349 282.7451,-355 276.7451,-355 276.7451,-355 145,-355 145,-355 139,-355 133,-349 133,-343 133,-343 133,-287 133,-287 133,-281 139,-275 145,-275"/>
<text text-anchor="middle" x="210.8726" y="-335" font-family="Times,serif" font-size="20.00" fill="#000000">executor/write.go</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_UpdateExec</title>
<path fill="none" stroke="#000000" d="M12,-275C12,-275 101,-275 101,-275 107,-275 113,-281 113,-287 113,-287 113,-343 113,-343 113,-349 107,-355 101,-355 101,-355 12,-355 12,-355 6,-355 0,-349 0,-343 0,-343 0,-287 0,-287 0,-281 6,-275 12,-275"/>
<text text-anchor="middle" x="56.5" y="-335" font-family="Times,serif" font-size="20.00" fill="#000000">UpdateExec</text>
</g>
<!-- txn_Set -->
<g id="node1" class="node">
<title>txn_Set</title>
<polygon fill="none" stroke="#000000" points="572.0869,-228 518.0869,-228 518.0869,-192 572.0869,-192 572.0869,-228"/>
<text text-anchor="middle" x="545.0869" y="-205.8" font-family="Times,serif" font-size="14.00" fill="#000000">Set</text>
</g>
<!-- UpdateDeltaForTable -->
<g id="node2" class="node">
<title>UpdateDeltaForTable</title>
<polygon fill="none" stroke="#000000" points="613.6719,-140 476.5019,-140 476.5019,-104 613.6719,-104 613.6719,-140"/>
<text text-anchor="middle" x="545.0869" y="-117.8" font-family="Times,serif" font-size="14.00" fill="#000000">UpdateDeltaForTable</text>
</g>
<!-- EncodeRow -->
<g id="node3" class="node">
<title>EncodeRow</title>
<polygon fill="none" stroke="#000000" points="587.5157,-52 502.6581,-52 502.6581,-16 587.5157,-16 587.5157,-52"/>
<text text-anchor="middle" x="545.0869" y="-29.8" font-family="Times,serif" font-size="14.00" fill="#000000">EncodeRow</text>
</g>
<!-- Index_FetchValues -->
<g id="node4" class="node">
<title>Index_FetchValues</title>
<polygon fill="none" stroke="#000000" points="781.4298,-228 696.5722,-228 696.5722,-192 781.4298,-192 781.4298,-228"/>
<text text-anchor="middle" x="739.001" y="-205.8" font-family="Times,serif" font-size="14.00" fill="#000000">FetchValues</text>
</g>
<!-- Index_Create -->
<g id="node5" class="node">
<title>Index_Create</title>
<polygon fill="none" stroke="#000000" points="891.4287,-228 837.4287,-228 837.4287,-192 891.4287,-192 891.4287,-228"/>
<text text-anchor="middle" x="864.4287" y="-205.8" font-family="Times,serif" font-size="14.00" fill="#000000">Create</text>
</g>
<!-- Index_Delete -->
<g id="node6" class="node">
<title>Index_Delete</title>
<polygon fill="none" stroke="#000000" points="891.4287,-174 837.4287,-174 837.4287,-138 891.4287,-138 891.4287,-174"/>
<text text-anchor="middle" x="864.4287" y="-151.8" font-family="Times,serif" font-size="14.00" fill="#000000">Delete</text>
</g>
<!-- Table_UpdateRecord -->
<g id="node7" class="node">
<title>Table_UpdateRecord</title>
<polygon fill="none" stroke="#000000" points="413.5284,-319 316.8173,-319 316.8173,-283 413.5284,-283 413.5284,-319"/>
<text text-anchor="middle" x="365.1729" y="-296.8" font-family="Times,serif" font-size="14.00" fill="#000000">UpdateRecord</text>
</g>
<!-- Table_UpdateRecord&#45;&gt;txn_Set -->
<g id="edge1" class="edge">
<title>Table_UpdateRecord&#45;&gt;txn_Set</title>
<path fill="none" stroke="#000000" d="M401.1487,-282.8035C432.374,-267.0099 477.3691,-244.2515 508.7112,-228.3987"/>
<polygon fill="#000000" stroke="#000000" points="510.6256,-231.3527 517.9694,-223.716 507.4661,-225.1063 510.6256,-231.3527"/>
</g>
<!-- Table_UpdateRecord&#45;&gt;UpdateDeltaForTable -->
<g id="edge2" class="edge">
<title>Table_UpdateRecord&#45;&gt;UpdateDeltaForTable</title>
<path fill="none" stroke="#000000" d="M374.6511,-282.8364C388.5242,-257.513 416.355,-211.2032 449.6006,-180 463.92,-166.5603 481.8491,-154.6789 498.2927,-145.2254"/>
<polygon fill="#000000" stroke="#000000" points="500.2174,-148.1595 507.2428,-140.2288 496.8052,-142.0474 500.2174,-148.1595"/>
</g>
<!-- Table_UpdateRecord&#45;&gt;EncodeRow -->
<g id="edge3" class="edge">
<title>Table_UpdateRecord&#45;&gt;EncodeRow</title>
<path fill="none" stroke="#000000" d="M368.4832,-282.7688C376.3582,-243.7782 399.4219,-151.0416 449.6006,-92 461.5707,-77.9157 477.8608,-66.28 493.5958,-57.2217"/>
<polygon fill="#000000" stroke="#000000" points="495.6804,-60.0699 502.7594,-52.187 492.3097,-53.9348 495.6804,-60.0699"/>
</g>
<!-- rebuildIndices -->
<g id="node8" class="node">
<title>rebuildIndices</title>
<polygon fill="none" stroke="#000000" points="593.17,-321.6018 497.0039,-321.6018 497.0039,-280.3982 593.17,-280.3982 593.17,-321.6018"/>
<text text-anchor="start" x="505.0454" y="-306.6" font-family="Times,serif" font-size="14.00" fill="#000000">rebuildIndices</text>
<text text-anchor="middle" x="545.0869" y="-292.6" font-family="Times,serif" font-size="14.00" fill="#000000">更新索引</text>
</g>
<!-- Table_UpdateRecord&#45;&gt;rebuildIndices -->
<g id="edge4" class="edge">
<title>Table_UpdateRecord&#45;&gt;rebuildIndices</title>
<path fill="none" stroke="#000000" d="M413.8602,-301C436.3419,-301 463.2142,-301 486.7696,-301"/>
<polygon fill="#000000" stroke="#000000" points="486.9841,-304.5001 496.9841,-301 486.984,-297.5001 486.9841,-304.5001"/>
</g>
<!-- WritableCols -->
<g id="node9" class="node">
<title>WritableCols</title>
<polygon fill="none" stroke="#000000" points="640.5596,-381.6018 449.6143,-381.6018 449.6143,-340.3982 640.5596,-340.3982 640.5596,-381.6018"/>
<text text-anchor="start" x="457.6006" y="-366.6" font-family="Times,serif" font-size="14.00" fill="#000000">WritableCols</text>
<text text-anchor="middle" x="545.0869" y="-352.6" font-family="Times,serif" font-size="14.00" fill="#000000">从schema中获取可写的colum</text>
</g>
<!-- Table_UpdateRecord&#45;&gt;WritableCols -->
<g id="edge5" class="edge">
<title>Table_UpdateRecord&#45;&gt;WritableCols</title>
<path fill="none" stroke="#000000" d="M413.7298,-318.5999C425.4457,-322.7506 437.9469,-327.1003 449.6006,-331 455.6564,-333.0264 461.9412,-335.0893 468.2647,-337.1364"/>
<polygon fill="#000000" stroke="#000000" points="467.6144,-340.6037 478.2058,-340.3327 469.7571,-333.9397 467.6144,-340.6037"/>
</g>
<!-- RecordKey -->
<g id="node10" class="node">
<title>RecordKey</title>
<polygon fill="none" stroke="#000000" points="620.8704,-460.7002 469.3034,-460.7002 469.3034,-399.2998 620.8704,-399.2998 620.8704,-460.7002"/>
<text text-anchor="start" x="477.4453" y="-445.3999" font-family="Times,serif" font-size="14.00" fill="#000000">RecordKey</text>
<text text-anchor="start" x="477.4453" y="-431.3999" font-family="Times,serif" font-size="14.00" fill="#000000">根据recordkey和handle</text>
<text text-anchor="start" x="477.4453" y="-411.8" font-family="Times,serif" font-size="14.00" fill="#000000">生成对应的key</text>
</g>
<!-- Table_UpdateRecord&#45;&gt;RecordKey -->
<g id="edge6" class="edge">
<title>Table_UpdateRecord&#45;&gt;RecordKey</title>
<path fill="none" stroke="#000000" d="M378.2762,-319.0762C393.499,-338.9858 420.2998,-370.8446 449.6006,-391 452.9086,-393.2755 456.3696,-395.4516 459.9315,-397.5282"/>
<polygon fill="#000000" stroke="#000000" points="458.5128,-400.742 468.9633,-402.4852 461.8808,-394.6055 458.5128,-400.742"/>
</g>
<!-- addUpdateBinlog -->
<g id="node11" class="node">
<title>addUpdateBinlog</title>
<polygon fill="none" stroke="#000000" points="602.346,-515 487.8279,-515 487.8279,-479 602.346,-479 602.346,-515"/>
<text text-anchor="middle" x="545.0869" y="-492.8" font-family="Times,serif" font-size="14.00" fill="#000000">addUpdateBinlog</text>
</g>
<!-- Table_UpdateRecord&#45;&gt;addUpdateBinlog -->
<g id="edge7" class="edge">
<title>Table_UpdateRecord&#45;&gt;addUpdateBinlog</title>
<path fill="none" stroke="#000000" d="M369.0713,-319.0641C377.4957,-353.6847 400.7163,-429.5281 449.6006,-470 457.9315,-476.8973 467.9191,-482.0355 478.2497,-485.8625"/>
<polygon fill="#000000" stroke="#000000" points="477.2025,-489.2025 487.7958,-489.0214 479.4016,-482.5569 477.2025,-489.2025"/>
</g>
<!-- rebuildIndices&#45;&gt;Index_FetchValues -->
<g id="edge8" class="edge">
<title>rebuildIndices&#45;&gt;Index_FetchValues</title>
<path fill="none" stroke="#000000" d="M593.4232,-286.3845C608.755,-281.1976 625.605,-274.9123 640.5732,-268 662.0831,-258.0669 684.9499,-244.7753 703.224,-233.4223"/>
<polygon fill="#000000" stroke="#000000" points="705.1988,-236.315 711.7999,-228.0279 701.4716,-230.3898 705.1988,-236.315"/>
</g>
<!-- removeRowIndices -->
<g id="node12" class="node">
<title>removeRowIndices</title>
<polygon fill="none" stroke="#000000" points="801.3565,-316 676.6454,-316 676.6454,-280 801.3565,-280 801.3565,-316"/>
<text text-anchor="middle" x="739.001" y="-293.8" font-family="Times,serif" font-size="14.00" fill="#000000">removeRowIndices</text>
</g>
<!-- rebuildIndices&#45;&gt;removeRowIndices -->
<g id="edge9" class="edge">
<title>rebuildIndices&#45;&gt;removeRowIndices</title>
<path fill="none" stroke="#000000" d="M593.5194,-300.2507C615.5066,-299.9106 641.9795,-299.501 666.2816,-299.125"/>
<polygon fill="#000000" stroke="#000000" points="666.5999,-302.6206 676.5445,-298.9662 666.4916,-295.6215 666.5999,-302.6206"/>
</g>
<!-- buildIndexForRow -->
<g id="node13" class="node">
<title>buildIndexForRow</title>
<polygon fill="none" stroke="#000000" points="800.0536,-370 677.9484,-370 677.9484,-334 800.0536,-334 800.0536,-370"/>
<text text-anchor="middle" x="739.001" y="-347.8" font-family="Times,serif" font-size="14.00" fill="#000000">buildIndexForRow</text>
</g>
<!-- rebuildIndices&#45;&gt;buildIndexForRow -->
<g id="edge10" class="edge">
<title>rebuildIndices&#45;&gt;buildIndexForRow</title>
<path fill="none" stroke="#000000" d="M593.5194,-313.7379C616,-319.6504 643.1699,-326.7961 667.9144,-333.304"/>
<polygon fill="#000000" stroke="#000000" points="667.0621,-336.6988 677.6235,-335.8575 668.8427,-329.929 667.0621,-336.6988"/>
</g>
<!-- removeRowIndices&#45;&gt;Index_Delete -->
<g id="edge12" class="edge">
<title>removeRowIndices&#45;&gt;Index_Delete</title>
<path fill="none" stroke="#000000" d="M794.7278,-279.8591C800.1539,-276.5212 805.2023,-272.5994 809.4287,-268 836.341,-238.7126 816.5777,-216.8713 837.4287,-183 837.546,-182.8095 837.6649,-182.6193 837.7853,-182.4294"/>
<polygon fill="#000000" stroke="#000000" points="840.7683,-184.2887 844.0312,-174.2087 835.1946,-180.0539 840.7683,-184.2887"/>
</g>
<!-- buildIndexForRow&#45;&gt;Index_Create -->
<g id="edge11" class="edge">
<title>buildIndexForRow&#45;&gt;Index_Create</title>
<path fill="none" stroke="#000000" d="M797.2794,-333.9504C801.6495,-331.343 805.7722,-328.375 809.4287,-325 834.8706,-301.5165 849.757,-263.7872 857.4876,-237.9939"/>
<polygon fill="#000000" stroke="#000000" points="860.9375,-238.6556 860.2843,-228.0809 854.2005,-236.7549 860.9375,-238.6556"/>
</g>
<!-- updateRecord -->
<g id="node14" class="node">
<title>updateRecord</title>
<polygon fill="none" stroke="#000000" points="257.618,-319 164.1271,-319 164.1271,-283 257.618,-283 257.618,-319"/>
<text text-anchor="middle" x="210.8726" y="-296.8" font-family="Times,serif" font-size="14.00" fill="#000000">updateRecord</text>
</g>
<!-- updateRecord&#45;&gt;Table_UpdateRecord -->
<g id="edge13" class="edge">
<title>updateRecord&#45;&gt;Table_UpdateRecord</title>
<path fill="none" stroke="#000000" d="M258.0062,-301C273.2735,-301 290.3988,-301 306.4036,-301"/>
<polygon fill="#000000" stroke="#000000" points="306.7284,-304.5001 316.7284,-301 306.7283,-297.5001 306.7284,-304.5001"/>
</g>
<!-- exec -->
<g id="node15" class="node">
<title>exec</title>
<polygon fill="none" stroke="#000000" points="83,-319 29,-319 29,-283 83,-283 83,-319"/>
<text text-anchor="middle" x="56" y="-296.8" font-family="Times,serif" font-size="14.00" fill="#000000">exec</text>
</g>
<!-- exec&#45;&gt;updateRecord -->
<g id="edge14" class="edge">
<title>exec&#45;&gt;updateRecord</title>
<path fill="none" stroke="#000000" d="M83.3316,-301C102.8592,-301 129.8366,-301 153.9529,-301"/>
<polygon fill="#000000" stroke="#000000" points="154.0832,-304.5001 164.0832,-301 154.0831,-297.5001 154.0832,-304.5001"/>
</g>
</g>
</svg>
