<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: ApplyPollerHandleNorml Pages: 1 -->
<svg width="2363pt" height="858pt"
 viewBox="0.00 0.00 2363.00 858.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 854)">
<title>ApplyPollerHandleNorml</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-854 2359,-854 2359,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_Callback</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1739,-658C1739,-658 1869,-658 1869,-658 1875,-658 1881,-664 1881,-670 1881,-670 1881,-740 1881,-740 1881,-746 1875,-752 1869,-752 1869,-752 1739,-752 1739,-752 1733,-752 1727,-746 1727,-740 1727,-740 1727,-670 1727,-670 1727,-664 1733,-658 1739,-658"/>
<text text-anchor="middle" x="1804" y="-732" font-family="Times,serif" font-size="20.00">Callback</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_ApplyCallback</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1594.5,-760C1594.5,-760 1838,-760 1838,-760 1844,-760 1850,-766 1850,-772 1850,-772 1850,-830 1850,-830 1850,-836 1844,-842 1838,-842 1838,-842 1594.5,-842 1594.5,-842 1588.5,-842 1582.5,-836 1582.5,-830 1582.5,-830 1582.5,-772 1582.5,-772 1582.5,-766 1588.5,-760 1594.5,-760"/>
<text text-anchor="middle" x="1716.25" y="-822" font-family="Times,serif" font-size="20.00">ApplyCallback</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_ApplyContext</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1028.5,-512C1028.5,-512 2335,-512 2335,-512 2341,-512 2347,-518 2347,-524 2347,-524 2347,-638 2347,-638 2347,-644 2341,-650 2335,-650 2335,-650 1028.5,-650 1028.5,-650 1022.5,-650 1016.5,-644 1016.5,-638 1016.5,-638 1016.5,-524 1016.5,-524 1016.5,-518 1022.5,-512 1028.5,-512"/>
<text text-anchor="middle" x="1681.75" y="-630" font-family="Times,serif" font-size="20.00">ApplyContext</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_ApplyDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M490,-302C490,-302 1997,-302 1997,-302 2003,-302 2009,-308 2009,-314 2009,-314 2009,-492 2009,-492 2009,-498 2003,-504 1997,-504 1997,-504 490,-504 490,-504 484,-504 478,-498 478,-492 478,-492 478,-314 478,-314 478,-308 484,-302 490,-302"/>
<text text-anchor="middle" x="1243.5" y="-484" font-family="Times,serif" font-size="20.00">ApplyDelegate</text>
</g>
<g id="clust14" class="cluster">
<title>cluster_ApplyFsm</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M154,-8C154,-8 653,-8 653,-8 659,-8 665,-14 665,-20 665,-20 665,-282 665,-282 665,-288 659,-294 653,-294 653,-294 154,-294 154,-294 148,-294 142,-288 142,-282 142,-282 142,-20 142,-20 142,-14 148,-8 154,-8"/>
<text text-anchor="middle" x="403.5" y="-274" font-family="Times,serif" font-size="20.00">Fsm</text>
</g>
<g id="clust17" class="cluster">
<title>cluster_ApplyPoller</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-212C20,-212 110,-212 110,-212 116,-212 122,-218 122,-224 122,-224 122,-282 122,-282 122,-288 116,-294 110,-294 110,-294 20,-294 20,-294 14,-294 8,-288 8,-282 8,-282 8,-224 8,-224 8,-218 14,-212 20,-212"/>
<text text-anchor="middle" x="65" y="-274" font-family="Times,serif" font-size="20.00">ApplyPoller</text>
</g>
<!-- invoke_with_response -->
<g id="node1" class="node">
<title>invoke_with_response</title>
<path fill="none" stroke="#1c2123" d="M1747,-667C1747,-667 1861,-667 1861,-667 1867,-667 1873,-673 1873,-679 1873,-679 1873,-701 1873,-701 1873,-707 1867,-713 1861,-713 1861,-713 1747,-713 1747,-713 1741,-713 1735,-707 1735,-701 1735,-701 1735,-679 1735,-679 1735,-673 1741,-667 1747,-667"/>
<text text-anchor="middle" x="1804" y="-697.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">invoke_with_response</text>
<polyline fill="none" stroke="#1c2123" points="1735,-690 1873,-690 "/>
<text text-anchor="middle" x="1804" y="-674.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">写入成功调用cb</text>
</g>
<!-- invoke_all -->
<g id="node2" class="node">
<title>invoke_all</title>
<path fill="none" stroke="#1c2123" d="M1652.5,-804C1652.5,-804 1602.5,-804 1602.5,-804 1596.5,-804 1590.5,-798 1590.5,-792 1590.5,-792 1590.5,-780 1590.5,-780 1590.5,-774 1596.5,-768 1602.5,-768 1602.5,-768 1652.5,-768 1652.5,-768 1658.5,-768 1664.5,-774 1664.5,-780 1664.5,-780 1664.5,-792 1664.5,-792 1664.5,-798 1658.5,-804 1652.5,-804"/>
<text text-anchor="middle" x="1627.5" y="-782.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">invoke_all</text>
</g>
<!-- invoke_all&#45;&gt;invoke_with_response -->
<g id="edge1" class="edge">
<title>invoke_all&#45;&gt;invoke_with_response</title>
<path fill="none" stroke="#666666" d="M1661.32,-767.94C1686.91,-753.87 1722.9,-734.07 1752.2,-717.95"/>
<polygon fill="#666666" stroke="#666666" points="1753.99,-720.96 1761.06,-713.07 1750.61,-714.83 1753.99,-720.96"/>
</g>
<!-- post_apply -->
<g id="node3" class="node">
<title>post_apply</title>
<path fill="none" stroke="#1c2123" d="M1830,-804C1830,-804 1778,-804 1778,-804 1772,-804 1766,-798 1766,-792 1766,-792 1766,-780 1766,-780 1766,-774 1772,-768 1778,-768 1778,-768 1830,-768 1830,-768 1836,-768 1842,-774 1842,-780 1842,-780 1842,-792 1842,-792 1842,-798 1836,-804 1830,-804"/>
<text text-anchor="middle" x="1804" y="-782.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">post_apply</text>
</g>
<!-- invoke_all&#45;&gt;post_apply -->
<g id="edge2" class="edge">
<title>invoke_all&#45;&gt;post_apply</title>
<path fill="none" stroke="#666666" d="M1664.66,-786C1691.06,-786 1727.11,-786 1755.79,-786"/>
<polygon fill="#666666" stroke="#666666" points="1755.99,-789.5 1765.99,-786 1755.99,-782.5 1755.99,-789.5"/>
</g>
<!-- cbs -->
<g id="node4" class="node">
<title>cbs</title>
<path fill="none" stroke="#1c2123" d="M1253,-521C1253,-521 1508,-521 1508,-521 1514,-521 1520,-527 1520,-533 1520,-533 1520,-545 1520,-545 1520,-551 1514,-557 1508,-557 1508,-557 1253,-557 1253,-557 1247,-557 1241,-551 1241,-545 1241,-545 1241,-533 1241,-533 1241,-527 1247,-521 1253,-521"/>
<text text-anchor="start" x="1249" y="-535.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cbs: MustConsumeVec&lt;ApplyCallback&lt;EK&gt;&gt;,</text>
</g>
<!-- cbs&#45;&gt;invoke_all -->
<g id="edge6" class="edge">
<title>cbs&#45;&gt;invoke_all</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1504.45,-557.08C1509.93,-559.96 1515.15,-563.25 1520,-567 1582.78,-615.61 1610.76,-710.75 1621.22,-758"/>
<polygon fill="green" stroke="green" points="1617.81,-758.79 1623.3,-767.86 1624.66,-757.35 1617.81,-758.79"/>
</g>
<!-- commit -->
<g id="node5" class="node">
<title>commit</title>
<path fill="none" stroke="#1c2123" d="M1071.5,-596C1071.5,-596 1036.5,-596 1036.5,-596 1030.5,-596 1024.5,-590 1024.5,-584 1024.5,-584 1024.5,-572 1024.5,-572 1024.5,-566 1030.5,-560 1036.5,-560 1036.5,-560 1071.5,-560 1071.5,-560 1077.5,-560 1083.5,-566 1083.5,-572 1083.5,-572 1083.5,-584 1083.5,-584 1083.5,-590 1077.5,-596 1071.5,-596"/>
<text text-anchor="middle" x="1054" y="-574.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">commit</text>
</g>
<!-- commit_opt -->
<g id="node6" class="node">
<title>commit_opt</title>
<path fill="none" stroke="#1c2123" d="M1410,-612C1410,-612 1351,-612 1351,-612 1345,-612 1339,-606 1339,-600 1339,-600 1339,-588 1339,-588 1339,-582 1345,-576 1351,-576 1351,-576 1410,-576 1410,-576 1416,-576 1422,-582 1422,-588 1422,-588 1422,-600 1422,-600 1422,-606 1416,-612 1410,-612"/>
<text text-anchor="middle" x="1380.5" y="-590.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">commit_opt</text>
</g>
<!-- commit&#45;&gt;commit_opt -->
<g id="edge3" class="edge">
<title>commit&#45;&gt;commit_opt</title>
<path fill="none" stroke="#666666" d="M1083.51,-579.41C1138.46,-582.11 1259.66,-588.09 1328.72,-591.5"/>
<polygon fill="#666666" stroke="#666666" points="1328.76,-595 1338.92,-592 1329.11,-588.01 1328.76,-595"/>
</g>
<!-- commit_opt&#45;&gt;invoke_all -->
<g id="edge4" class="edge">
<title>commit_opt&#45;&gt;invoke_all</title>
<path fill="none" stroke="#666666" d="M1404.55,-612.06C1448.78,-646.73 1545.6,-722.6 1595.46,-761.67"/>
<polygon fill="#666666" stroke="#666666" points="1593.3,-764.43 1603.33,-767.85 1597.62,-758.92 1593.3,-764.43"/>
</g>
<!-- write_to_db -->
<g id="node7" class="node">
<title>write_to_db</title>
<path fill="none" stroke="#1c2123" d="M2164,-543C2164,-543 2327,-543 2327,-543 2333,-543 2339,-549 2339,-555 2339,-555 2339,-577 2339,-577 2339,-583 2333,-589 2327,-589 2327,-589 2164,-589 2164,-589 2158,-589 2152,-583 2152,-577 2152,-577 2152,-555 2152,-555 2152,-549 2158,-543 2164,-543"/>
<text text-anchor="middle" x="2245.5" y="-573.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_to_db</text>
<polyline fill="none" stroke="#1c2123" points="2152,-566 2339,-566 "/>
<text text-anchor="start" x="2160" y="-550.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将kv_wb writeBatch写入db中</text>
</g>
<!-- commit_opt&#45;&gt;write_to_db -->
<g id="edge5" class="edge">
<title>commit_opt&#45;&gt;write_to_db</title>
<path fill="none" stroke="#666666" d="M1422.19,-593.36C1497.39,-592.23 1663.23,-590 1803,-590 1803,-590 1803,-590 1956,-590 2017.75,-590 2086.67,-584.47 2141.66,-578.72"/>
<polygon fill="#666666" stroke="#666666" points="2142.19,-582.19 2151.76,-577.65 2141.45,-575.23 2142.19,-582.19"/>
</g>
<!-- kv_wb -->
<g id="node8" class="node">
<title>kv_wb</title>
<path fill="#feed9b" stroke="#f7e495" d="M2049,-521C2049,-521 2104,-521 2104,-521 2110,-521 2116,-527 2116,-533 2116,-533 2116,-555 2116,-555 2116,-561 2110,-567 2104,-567 2104,-567 2049,-567 2049,-567 2043,-567 2037,-561 2037,-555 2037,-555 2037,-533 2037,-533 2037,-527 2043,-521 2049,-521"/>
<text text-anchor="middle" x="2076.5" y="-551.8" font-family="Times,serif" font-size="14.00" fill="#40575d">kv_wb</text>
<polyline fill="none" stroke="#f7e495" points="2037,-544 2116,-544 "/>
<text text-anchor="middle" x="2076.5" y="-528.8" font-family="Times,serif" font-size="14.00" fill="#40575d">WriteBatch</text>
</g>
<!-- kv_wb&#45;&gt;write_to_db -->
<g id="edge7" class="edge">
<title>kv_wb&#45;&gt;write_to_db</title>
<path fill="none" stroke="#666666" d="M2116.23,-549.1C2124.07,-550.14 2132.66,-551.27 2141.56,-552.44"/>
<polygon fill="#666666" stroke="#666666" points="2141.35,-555.94 2151.72,-553.78 2142.26,-549 2141.35,-555.94"/>
</g>
<!-- pending_cmds -->
<g id="node9" class="node">
<title>pending_cmds</title>
<path fill="#feed9b" stroke="#f7e495" d="M915,-365C915,-365 1193,-365 1193,-365 1199,-365 1205,-371 1205,-377 1205,-377 1205,-399 1205,-399 1205,-405 1199,-411 1193,-411 1193,-411 915,-411 915,-411 909,-411 903,-405 903,-399 903,-399 903,-377 903,-377 903,-371 909,-365 915,-365"/>
<text text-anchor="middle" x="1054" y="-395.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pending_cmds</text>
<polyline fill="none" stroke="#f7e495" points="903,-388 1205,-388 "/>
<text text-anchor="start" x="911" y="-372.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pending_cmds: PendingCmdQueue&lt;EK::Snapshot&gt;</text>
</g>
<!-- pending_cmds&#45;&gt;cbs -->
<g id="edge15" class="edge">
<title>pending_cmds&#45;&gt;cbs</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1190.94,-411.07C1195.89,-414.02 1200.61,-417.32 1205,-421 1237.07,-447.88 1208.98,-481.06 1241,-508 1244.49,-510.93 1248.2,-513.61 1252.07,-516.04"/>
<polygon fill="green" stroke="green" points="1250.38,-519.11 1260.81,-520.99 1253.84,-513.01 1250.38,-519.11"/>
</g>
<!-- handle_raft_committed_entries -->
<g id="node10" class="node">
<title>handle_raft_committed_entries</title>
<path fill="none" stroke="#1c2123" d="M661,-409C661,-409 498,-409 498,-409 492,-409 486,-403 486,-397 486,-397 486,-385 486,-385 486,-379 492,-373 498,-373 498,-373 661,-373 661,-373 667,-373 673,-379 673,-385 673,-385 673,-397 673,-397 673,-403 667,-409 661,-409"/>
<text text-anchor="middle" x="579.5" y="-387.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_committed_entries</text>
</g>
<!-- handle_raft_entry_normal -->
<g id="node11" class="node">
<title>handle_raft_entry_normal</title>
<path fill="none" stroke="#1c2123" d="M855,-409C855,-409 721,-409 721,-409 715,-409 709,-403 709,-397 709,-397 709,-385 709,-385 709,-379 715,-373 721,-373 721,-373 855,-373 855,-373 861,-373 867,-379 867,-385 867,-385 867,-397 867,-397 867,-403 861,-409 855,-409"/>
<text text-anchor="middle" x="788" y="-387.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_entry_normal</text>
</g>
<!-- handle_raft_committed_entries&#45;&gt;handle_raft_entry_normal -->
<g id="edge8" class="edge">
<title>handle_raft_committed_entries&#45;&gt;handle_raft_entry_normal</title>
<path fill="none" stroke="#666666" d="M673.18,-391C681.64,-391 690.2,-391 698.62,-391"/>
<polygon fill="#666666" stroke="#666666" points="698.81,-394.5 708.81,-391 698.81,-387.5 698.81,-394.5"/>
</g>
<!-- finish_for -->
<g id="node12" class="node">
<title>finish_for</title>
<path fill="none" stroke="#1c2123" d="M810.5,-463C810.5,-463 765.5,-463 765.5,-463 759.5,-463 753.5,-457 753.5,-451 753.5,-451 753.5,-439 753.5,-439 753.5,-433 759.5,-427 765.5,-427 765.5,-427 810.5,-427 810.5,-427 816.5,-427 822.5,-433 822.5,-439 822.5,-439 822.5,-451 822.5,-451 822.5,-457 816.5,-463 810.5,-463"/>
<text text-anchor="middle" x="788" y="-441.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">finish_for</text>
</g>
<!-- handle_raft_committed_entries&#45;&gt;finish_for -->
<g id="edge9" class="edge">
<title>handle_raft_committed_entries&#45;&gt;finish_for</title>
<path fill="none" stroke="#666666" d="M649.55,-409.06C680.53,-417.16 716.14,-426.47 743.36,-433.59"/>
<polygon fill="#666666" stroke="#666666" points="742.79,-437.06 753.35,-436.2 744.56,-430.28 742.79,-437.06"/>
</g>
<!-- handle_raft_entry_normal&#45;&gt;cbs -->
<g id="edge10" class="edge">
<title>handle_raft_entry_normal&#45;&gt;cbs</title>
<path fill="none" stroke="#666666" d="M853.07,-409.03C858.01,-411.64 862.73,-414.62 867,-418 890.48,-436.62 877.78,-458.82 903,-475 999.87,-537.16 1130.63,-550.92 1230.66,-550.39"/>
<polygon fill="#666666" stroke="#666666" points="1230.9,-553.89 1240.86,-550.29 1230.82,-546.89 1230.9,-553.89"/>
</g>
<!-- handle_raft_entry_normal&#45;&gt;commit -->
<g id="edge11" class="edge">
<title>handle_raft_entry_normal&#45;&gt;commit</title>
<path fill="none" stroke="#666666" d="M855.92,-409.07C859.94,-411.66 863.69,-414.62 867,-418 903.56,-455.38 866,-493.05 903,-530 932.72,-559.68 980.78,-571.02 1014.47,-575.35"/>
<polygon fill="#666666" stroke="#666666" points="1014.1,-578.83 1024.43,-576.48 1014.89,-571.87 1014.1,-578.83"/>
</g>
<!-- handle_raft_entry_normal&#45;&gt;pending_cmds -->
<g id="edge12" class="edge">
<title>handle_raft_entry_normal&#45;&gt;pending_cmds</title>
<path fill="none" stroke="#666666" d="M867.14,-390.11C875.42,-390.02 884.05,-389.92 892.85,-389.82"/>
<polygon fill="#666666" stroke="#666666" points="892.9,-393.32 902.86,-389.71 892.82,-386.32 892.9,-393.32"/>
</g>
<!-- should_write_to_engine -->
<g id="node13" class="node">
<title>should_write_to_engine</title>
<path fill="none" stroke="#1c2123" d="M1115.5,-466C1115.5,-466 992.5,-466 992.5,-466 986.5,-466 980.5,-460 980.5,-454 980.5,-454 980.5,-442 980.5,-442 980.5,-436 986.5,-430 992.5,-430 992.5,-430 1115.5,-430 1115.5,-430 1121.5,-430 1127.5,-436 1127.5,-442 1127.5,-442 1127.5,-454 1127.5,-454 1127.5,-460 1121.5,-466 1115.5,-466"/>
<text text-anchor="middle" x="1054" y="-444.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">should_write_to_engine</text>
</g>
<!-- handle_raft_entry_normal&#45;&gt;should_write_to_engine -->
<g id="edge13" class="edge">
<title>handle_raft_entry_normal&#45;&gt;should_write_to_engine</title>
<path fill="none" stroke="#666666" d="M853.89,-409.03C869.89,-413.21 887.01,-417.46 903,-421 924.73,-425.81 948.38,-430.37 970.33,-434.33"/>
<polygon fill="#666666" stroke="#666666" points="969.83,-437.8 980.29,-436.11 971.06,-430.91 969.83,-437.8"/>
</g>
<!-- process_raft_cmd -->
<g id="node14" class="node">
<title>process_raft_cmd</title>
<path fill="none" stroke="#1c2123" d="M1098.5,-346C1098.5,-346 1009.5,-346 1009.5,-346 1003.5,-346 997.5,-340 997.5,-334 997.5,-334 997.5,-322 997.5,-322 997.5,-316 1003.5,-310 1009.5,-310 1009.5,-310 1098.5,-310 1098.5,-310 1104.5,-310 1110.5,-316 1110.5,-322 1110.5,-322 1110.5,-334 1110.5,-334 1110.5,-340 1104.5,-346 1098.5,-346"/>
<text text-anchor="middle" x="1054" y="-324.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">process_raft_cmd</text>
</g>
<!-- handle_raft_entry_normal&#45;&gt;process_raft_cmd -->
<g id="edge14" class="edge">
<title>handle_raft_entry_normal&#45;&gt;process_raft_cmd</title>
<path fill="none" stroke="#666666" d="M843.16,-373C861.97,-367.11 883.3,-360.85 903,-356 930.49,-349.24 961.16,-343.24 987.57,-338.55"/>
<polygon fill="#666666" stroke="#666666" points="988.22,-341.99 997.47,-336.82 987.01,-335.1 988.22,-341.99"/>
</g>
<!-- apply_raft_cmd -->
<g id="node15" class="node">
<title>apply_raft_cmd</title>
<path fill="none" stroke="#1c2123" d="M1420,-376C1420,-376 1341,-376 1341,-376 1335,-376 1329,-370 1329,-364 1329,-364 1329,-352 1329,-352 1329,-346 1335,-340 1341,-340 1341,-340 1420,-340 1420,-340 1426,-340 1432,-346 1432,-352 1432,-352 1432,-364 1432,-364 1432,-370 1426,-376 1420,-376"/>
<text text-anchor="middle" x="1380.5" y="-354.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">apply_raft_cmd</text>
</g>
<!-- process_raft_cmd&#45;&gt;apply_raft_cmd -->
<g id="edge16" class="edge">
<title>process_raft_cmd&#45;&gt;apply_raft_cmd</title>
<path fill="none" stroke="#666666" d="M1110.78,-333.16C1168.77,-338.52 1259.23,-346.88 1318.93,-352.4"/>
<polygon fill="#666666" stroke="#666666" points="1318.69,-355.89 1328.97,-353.33 1319.34,-348.92 1318.69,-355.89"/>
</g>
<!-- set_save_point -->
<g id="node16" class="node">
<title>set_save_point</title>
<path fill="none" stroke="#1c2123" d="M1664,-457C1664,-457 1591,-457 1591,-457 1585,-457 1579,-451 1579,-445 1579,-445 1579,-433 1579,-433 1579,-427 1585,-421 1591,-421 1591,-421 1664,-421 1664,-421 1670,-421 1676,-427 1676,-433 1676,-433 1676,-445 1676,-445 1676,-451 1670,-457 1664,-457"/>
<text text-anchor="middle" x="1627.5" y="-435.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">set_save_point</text>
</g>
<!-- apply_raft_cmd&#45;&gt;set_save_point -->
<g id="edge17" class="edge">
<title>apply_raft_cmd&#45;&gt;set_save_point</title>
<path fill="none" stroke="#666666" d="M1432.26,-374.78C1472.1,-387.95 1527.56,-406.29 1569.03,-420"/>
<polygon fill="#666666" stroke="#666666" points="1568.12,-423.39 1578.71,-423.2 1570.32,-416.74 1568.12,-423.39"/>
</g>
<!-- exec_raft_cmd -->
<g id="node17" class="node">
<title>exec_raft_cmd</title>
<path fill="none" stroke="#1c2123" d="M1664.5,-349C1664.5,-349 1590.5,-349 1590.5,-349 1584.5,-349 1578.5,-343 1578.5,-337 1578.5,-337 1578.5,-325 1578.5,-325 1578.5,-319 1584.5,-313 1590.5,-313 1590.5,-313 1664.5,-313 1664.5,-313 1670.5,-313 1676.5,-319 1676.5,-325 1676.5,-325 1676.5,-337 1676.5,-337 1676.5,-343 1670.5,-349 1664.5,-349"/>
<text text-anchor="middle" x="1627.5" y="-327.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">exec_raft_cmd</text>
</g>
<!-- apply_raft_cmd&#45;&gt;exec_raft_cmd -->
<g id="edge18" class="edge">
<title>apply_raft_cmd&#45;&gt;exec_raft_cmd</title>
<path fill="none" stroke="#666666" d="M1432.26,-352.41C1471.89,-348.04 1526.97,-341.97 1568.36,-337.41"/>
<polygon fill="#666666" stroke="#666666" points="1568.75,-340.89 1578.3,-336.31 1567.98,-333.93 1568.75,-340.89"/>
</g>
<!-- rollback_to_save_point -->
<g id="node18" class="node">
<title>rollback_to_save_point</title>
<path fill="none" stroke="#1c2123" d="M1687,-403C1687,-403 1568,-403 1568,-403 1562,-403 1556,-397 1556,-391 1556,-391 1556,-379 1556,-379 1556,-373 1562,-367 1568,-367 1568,-367 1687,-367 1687,-367 1693,-367 1699,-373 1699,-379 1699,-379 1699,-391 1699,-391 1699,-397 1693,-403 1687,-403"/>
<text text-anchor="middle" x="1627.5" y="-381.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">rollback_to_save_point</text>
</g>
<!-- apply_raft_cmd&#45;&gt;rollback_to_save_point -->
<g id="edge19" class="edge">
<title>apply_raft_cmd&#45;&gt;rollback_to_save_point</title>
<path fill="none" stroke="#666666" d="M1432.26,-363.59C1464.93,-367.19 1508.11,-371.95 1545.46,-376.07"/>
<polygon fill="#666666" stroke="#666666" points="1545.51,-379.6 1555.83,-377.21 1546.27,-372.64 1545.51,-379.6"/>
</g>
<!-- exec_admin_cmd -->
<g id="node19" class="node">
<title>exec_admin_cmd</title>
<path fill="none" stroke="#1c2123" d="M1848.5,-349C1848.5,-349 1759.5,-349 1759.5,-349 1753.5,-349 1747.5,-343 1747.5,-337 1747.5,-337 1747.5,-325 1747.5,-325 1747.5,-319 1753.5,-313 1759.5,-313 1759.5,-313 1848.5,-313 1848.5,-313 1854.5,-313 1860.5,-319 1860.5,-325 1860.5,-325 1860.5,-337 1860.5,-337 1860.5,-343 1854.5,-349 1848.5,-349"/>
<text text-anchor="middle" x="1804" y="-327.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">exec_admin_cmd</text>
</g>
<!-- exec_raft_cmd&#45;&gt;exec_admin_cmd -->
<g id="edge20" class="edge">
<title>exec_raft_cmd&#45;&gt;exec_admin_cmd</title>
<path fill="none" stroke="#666666" d="M1676.64,-331C1695.37,-331 1717.13,-331 1737.26,-331"/>
<polygon fill="#666666" stroke="#666666" points="1737.3,-334.5 1747.3,-331 1737.3,-327.5 1737.3,-334.5"/>
</g>
<!-- exec_write_cmd -->
<g id="node20" class="node">
<title>exec_write_cmd</title>
<path fill="none" stroke="#1c2123" d="M1758,-371C1758,-371 1850,-371 1850,-371 1856,-371 1862,-377 1862,-383 1862,-383 1862,-405 1862,-405 1862,-411 1856,-417 1850,-417 1850,-417 1758,-417 1758,-417 1752,-417 1746,-411 1746,-405 1746,-405 1746,-383 1746,-383 1746,-377 1752,-371 1758,-371"/>
<text text-anchor="middle" x="1804" y="-401.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">exec_write_cmd</text>
<polyline fill="none" stroke="#1c2123" points="1746,-394 1862,-394 "/>
<text text-anchor="middle" x="1804" y="-378.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">写入ctx.kv_wb中</text>
</g>
<!-- exec_raft_cmd&#45;&gt;exec_write_cmd -->
<g id="edge21" class="edge">
<title>exec_raft_cmd&#45;&gt;exec_write_cmd</title>
<path fill="none" stroke="#666666" d="M1676.64,-348.38C1695.02,-355.02 1716.32,-362.71 1736.13,-369.86"/>
<polygon fill="#666666" stroke="#666666" points="1735.13,-373.22 1745.72,-373.32 1737.51,-366.63 1735.13,-373.22"/>
</g>
<!-- handle_put -->
<g id="node21" class="node">
<title>handle_put</title>
<path fill="none" stroke="#1c2123" d="M1981.5,-412C1981.5,-412 1928.5,-412 1928.5,-412 1922.5,-412 1916.5,-406 1916.5,-400 1916.5,-400 1916.5,-388 1916.5,-388 1916.5,-382 1922.5,-376 1928.5,-376 1928.5,-376 1981.5,-376 1981.5,-376 1987.5,-376 1993.5,-382 1993.5,-388 1993.5,-388 1993.5,-400 1993.5,-400 1993.5,-406 1987.5,-412 1981.5,-412"/>
<text text-anchor="middle" x="1955" y="-390.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_put</text>
</g>
<!-- exec_write_cmd&#45;&gt;handle_put -->
<g id="edge22" class="edge">
<title>exec_write_cmd&#45;&gt;handle_put</title>
<path fill="none" stroke="#666666" d="M1862.18,-394C1876.57,-394 1891.87,-394 1905.77,-394"/>
<polygon fill="#666666" stroke="#666666" points="1906.09,-397.5 1916.09,-394 1906.09,-390.5 1906.09,-397.5"/>
</g>
<!-- handle_delete -->
<g id="node22" class="node">
<title>handle_delete</title>
<path fill="none" stroke="#1c2123" d="M1989,-466C1989,-466 1921,-466 1921,-466 1915,-466 1909,-460 1909,-454 1909,-454 1909,-442 1909,-442 1909,-436 1915,-430 1921,-430 1921,-430 1989,-430 1989,-430 1995,-430 2001,-436 2001,-442 2001,-442 2001,-454 2001,-454 2001,-460 1995,-466 1989,-466"/>
<text text-anchor="middle" x="1955" y="-444.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_delete</text>
</g>
<!-- exec_write_cmd&#45;&gt;handle_delete -->
<g id="edge23" class="edge">
<title>exec_write_cmd&#45;&gt;handle_delete</title>
<path fill="none" stroke="#666666" d="M1862.18,-414.72C1874.36,-419.14 1887.18,-423.78 1899.26,-428.16"/>
<polygon fill="#666666" stroke="#666666" points="1898.17,-431.49 1908.76,-431.61 1900.56,-424.91 1898.17,-431.49"/>
</g>
<!-- handle_put&#45;&gt;kv_wb -->
<g id="edge24" class="edge">
<title>handle_put&#45;&gt;kv_wb</title>
<path fill="none" stroke="#666666" d="M1993.56,-409.47C1999.12,-412.76 2004.49,-416.6 2009,-421 2035.15,-446.52 2053.54,-484.55 2064.25,-511.56"/>
<polygon fill="#666666" stroke="#666666" points="2061.01,-512.88 2067.85,-520.97 2067.55,-510.38 2061.01,-512.88"/>
</g>
<!-- handle_delete&#45;&gt;kv_wb -->
<g id="edge25" class="edge">
<title>handle_delete&#45;&gt;kv_wb</title>
<path fill="none" stroke="#666666" d="M1978.48,-466.06C1995.47,-479.71 2019.17,-498.74 2038.88,-514.58"/>
<polygon fill="#666666" stroke="#666666" points="2036.79,-517.39 2046.78,-520.93 2041.18,-511.94 2036.79,-517.39"/>
</g>
<!-- handle_tasks -->
<g id="node23" class="node">
<title>handle_tasks</title>
<path fill="none" stroke="#1c2123" d="M224,-256C224,-256 162,-256 162,-256 156,-256 150,-250 150,-244 150,-244 150,-232 150,-232 150,-226 156,-220 162,-220 162,-220 224,-220 224,-220 230,-220 236,-226 236,-232 236,-232 236,-244 236,-244 236,-250 230,-256 224,-256"/>
<text text-anchor="middle" x="193" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_tasks</text>
</g>
<!-- handle_apply -->
<g id="node24" class="node">
<title>handle_apply</title>
<path fill="none" stroke="#1c2123" d="M393.5,-256C393.5,-256 328.5,-256 328.5,-256 322.5,-256 316.5,-250 316.5,-244 316.5,-244 316.5,-232 316.5,-232 316.5,-226 322.5,-220 328.5,-220 328.5,-220 393.5,-220 393.5,-220 399.5,-220 405.5,-226 405.5,-232 405.5,-232 405.5,-244 405.5,-244 405.5,-250 399.5,-256 393.5,-256"/>
<text text-anchor="middle" x="361" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_apply</text>
</g>
<!-- handle_tasks&#45;&gt;handle_apply -->
<g id="edge26" class="edge">
<title>handle_tasks&#45;&gt;handle_apply</title>
<path fill="none" stroke="#666666" d="M236.32,-238C257.56,-238 283.52,-238 306.17,-238"/>
<polygon fill="#666666" stroke="#666666" points="306.31,-241.5 316.31,-238 306.31,-234.5 306.31,-241.5"/>
</g>
<!-- handle_apply&#45;&gt;handle_raft_committed_entries -->
<g id="edge27" class="edge">
<title>handle_apply&#45;&gt;handle_raft_committed_entries</title>
<path fill="none" stroke="#666666" d="M387.69,-256.15C426.75,-283.76 501.13,-336.32 544.59,-367.03"/>
<polygon fill="#666666" stroke="#666666" points="542.66,-369.96 552.85,-372.87 546.7,-364.24 542.66,-369.96"/>
</g>
<!-- append_proposal -->
<g id="node25" class="node">
<title>append_proposal</title>
<path fill="none" stroke="#1c2123" d="M514,-194.5C514,-194.5 645,-194.5 645,-194.5 651,-194.5 657,-200.5 657,-206.5 657,-206.5 657,-243.5 657,-243.5 657,-249.5 651,-255.5 645,-255.5 645,-255.5 514,-255.5 514,-255.5 508,-255.5 502,-249.5 502,-243.5 502,-243.5 502,-206.5 502,-206.5 502,-200.5 508,-194.5 514,-194.5"/>
<text text-anchor="middle" x="579.5" y="-240.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">append_proposal</text>
<polyline fill="none" stroke="#1c2123" points="502,-232.5 657,-232.5 "/>
<text text-anchor="start" x="510" y="-217.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将Apply中的dbs加入到</text>
<text text-anchor="start" x="510" y="-202.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> pending_cmds队列中</text>
</g>
<!-- handle_apply&#45;&gt;append_proposal -->
<g id="edge28" class="edge">
<title>handle_apply&#45;&gt;append_proposal</title>
<path fill="none" stroke="#666666" d="M405.55,-235.38C430.18,-233.91 461.87,-232 491.39,-230.23"/>
<polygon fill="#666666" stroke="#666666" points="491.95,-233.7 501.72,-229.61 491.53,-226.72 491.95,-233.7"/>
</g>
<!-- append_proposal&#45;&gt;pending_cmds -->
<g id="edge30" class="edge">
<title>append_proposal&#45;&gt;pending_cmds</title>
<path fill="none" stroke="#666666" d="M646.96,-255.59C711.35,-284.32 812.31,-326.96 903,-355 911.33,-357.58 919.98,-360.03 928.73,-362.36"/>
<polygon fill="#666666" stroke="#666666" points="928.08,-365.8 938.64,-364.92 929.84,-359.03 928.08,-365.8"/>
</g>
<!-- Apply -->
<g id="node26" class="node">
<title>Apply</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M284,-17C284,-17 438,-17 438,-17 444,-17 450,-23 450,-29 450,-29 450,-189 450,-189 450,-195 444,-201 438,-201 438,-201 284,-201 284,-201 278,-201 272,-195 272,-189 272,-189 272,-29 272,-29 272,-23 278,-17 284,-17"/>
<text text-anchor="middle" x="361" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Apply</text>
<polyline fill="none" stroke="#60b5ac" points="272,-178 450,-178 "/>
<text text-anchor="start" x="280" y="-162.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub peer_id: u64,</text>
<polyline fill="none" stroke="#60b5ac" points="272,-155 450,-155 "/>
<text text-anchor="start" x="280" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub region_id: u64,</text>
<polyline fill="none" stroke="#60b5ac" points="272,-132 450,-132 "/>
<text text-anchor="start" x="280" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub term: u64,</text>
<polyline fill="none" stroke="#60b5ac" points="272,-109 450,-109 "/>
<text text-anchor="start" x="280" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub entries: Vec&lt;Entry&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="272,-86 450,-86 "/>
<text text-anchor="start" x="280" y="-70.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub cbs: Vec&lt;Proposal&lt;S&gt;&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="272,-63 450,-63 "/>
<text text-anchor="start" x="280" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">entries_mem_size: i64,</text>
<polyline fill="none" stroke="#60b5ac" points="272,-40 450,-40 "/>
<text text-anchor="start" x="280" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">entries_count: i64,</text>
</g>
<!-- Apply&#45;&gt;append_proposal -->
<g id="edge29" class="edge">
<title>Apply&#45;&gt;append_proposal</title>
<path fill="none" stroke="#666666" d="M450.06,-156.18C470.97,-167.39 492.93,-179.15 512.65,-189.72"/>
<polygon fill="#666666" stroke="#666666" points="511.08,-192.85 521.55,-194.48 514.38,-186.68 511.08,-192.85"/>
</g>
<!-- handle_normal -->
<g id="node27" class="node">
<title>handle_normal</title>
<path fill="none" stroke="#1c2123" d="M102,-256C102,-256 28,-256 28,-256 22,-256 16,-250 16,-244 16,-244 16,-232 16,-232 16,-226 22,-220 28,-220 28,-220 102,-220 102,-220 108,-220 114,-226 114,-232 114,-232 114,-244 114,-244 114,-250 108,-256 102,-256"/>
<text text-anchor="middle" x="65" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_normal</text>
</g>
<!-- handle_normal&#45;&gt;handle_tasks -->
<g id="edge31" class="edge">
<title>handle_normal&#45;&gt;handle_tasks</title>
<path fill="none" stroke="#666666" d="M114.35,-238C122.64,-238 131.29,-238 139.68,-238"/>
<polygon fill="#666666" stroke="#666666" points="139.74,-241.5 149.74,-238 139.74,-234.5 139.74,-241.5"/>
</g>
</g>
</svg>
