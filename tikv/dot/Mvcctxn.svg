<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: MvccTxn Pages: 1 -->
<svg width="1400pt" height="1060pt"
 viewBox="0.00 0.00 1400.00 1059.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1055.5)">
<title>MvccTxn</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1055.5 1396,-1055.5 1396,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_MvccTxn</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M685,-97.5C685,-97.5 1372,-97.5 1372,-97.5 1378,-97.5 1384,-103.5 1384,-109.5 1384,-109.5 1384,-763.5 1384,-763.5 1384,-769.5 1378,-775.5 1372,-775.5 1372,-775.5 685,-775.5 685,-775.5 679,-775.5 673,-769.5 673,-763.5 673,-763.5 673,-109.5 673,-109.5 673,-103.5 679,-97.5 685,-97.5"/>
<text text-anchor="middle" x="1028.5" y="-755.5" font-family="Times,serif" font-size="20.00">MvccTxn</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_Lock</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M693,-359.5C693,-359.5 1245,-359.5 1245,-359.5 1251,-359.5 1257,-365.5 1257,-371.5 1257,-371.5 1257,-725.5 1257,-725.5 1257,-731.5 1251,-737.5 1245,-737.5 1245,-737.5 693,-737.5 693,-737.5 687,-737.5 681,-731.5 681,-725.5 681,-725.5 681,-371.5 681,-371.5 681,-365.5 687,-359.5 693,-359.5"/>
<text text-anchor="middle" x="969" y="-717.5" font-family="Times,serif" font-size="20.00">Lock</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_write</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M807,-105.5C807,-105.5 1364,-105.5 1364,-105.5 1370,-105.5 1376,-111.5 1376,-117.5 1376,-117.5 1376,-195.5 1376,-195.5 1376,-201.5 1370,-207.5 1364,-207.5 1364,-207.5 807,-207.5 807,-207.5 801,-207.5 795,-201.5 795,-195.5 795,-195.5 795,-117.5 795,-117.5 795,-111.5 801,-105.5 807,-105.5"/>
<text text-anchor="middle" x="1085.5" y="-187.5" font-family="Times,serif" font-size="20.00">write</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_value</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M806,-215.5C806,-215.5 1189,-215.5 1189,-215.5 1195,-215.5 1201,-221.5 1201,-227.5 1201,-227.5 1201,-339.5 1201,-339.5 1201,-345.5 1195,-351.5 1189,-351.5 1189,-351.5 806,-351.5 806,-351.5 800,-351.5 794,-345.5 794,-339.5 794,-339.5 794,-227.5 794,-227.5 794,-221.5 800,-215.5 806,-215.5"/>
<text text-anchor="middle" x="997.5" y="-331.5" font-family="Times,serif" font-size="20.00">value</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_MvccReader</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M460,-775.5C460,-775.5 649,-775.5 649,-775.5 655,-775.5 661,-781.5 661,-787.5 661,-787.5 661,-995.5 661,-995.5 661,-1001.5 655,-1007.5 649,-1007.5 649,-1007.5 460,-1007.5 460,-1007.5 454,-1007.5 448,-1001.5 448,-995.5 448,-995.5 448,-787.5 448,-787.5 448,-781.5 454,-775.5 460,-775.5"/>
<text text-anchor="middle" x="554.5" y="-987.5" font-family="Times,serif" font-size="20.00">MvccReader</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_ReadCommand</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M75,-904.5C75,-904.5 416,-904.5 416,-904.5 422,-904.5 428,-910.5 428,-916.5 428,-916.5 428,-974.5 428,-974.5 428,-980.5 422,-986.5 416,-986.5 416,-986.5 75,-986.5 75,-986.5 69,-986.5 63,-980.5 63,-974.5 63,-974.5 63,-916.5 63,-916.5 63,-910.5 69,-904.5 75,-904.5"/>
<text text-anchor="middle" x="245.5" y="-966.5" font-family="Times,serif" font-size="20.00">ReadCommand</text>
</g>
<!-- put_lock -->
<g id="node1" class="node">
<title>put_lock</title>
<path fill="none" stroke="#1c2123" d="M754.5,-489C754.5,-489 934.5,-489 934.5,-489 940.5,-489 946.5,-495 946.5,-501 946.5,-501 946.5,-538 946.5,-538 946.5,-544 940.5,-550 934.5,-550 934.5,-550 754.5,-550 754.5,-550 748.5,-550 742.5,-544 742.5,-538 742.5,-538 742.5,-501 742.5,-501 742.5,-495 748.5,-489 754.5,-489"/>
<text text-anchor="middle" x="844.5" y="-534.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">put_lock</text>
<polyline fill="none" stroke="#1c2123" points="742.5,-527 946.5,-527 "/>
<text text-anchor="start" x="750.5" y="-511.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">let write = Modify::Put(</text>
<text text-anchor="start" x="750.5" y="-496.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> CF_LOCK, key, lock.to_bytes());</text>
</g>
<!-- Lock -->
<g id="node3" class="node">
<title>Lock</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1048,-422.5C1048,-422.5 1237,-422.5 1237,-422.5 1243,-422.5 1249,-428.5 1249,-434.5 1249,-434.5 1249,-686.5 1249,-686.5 1249,-692.5 1243,-698.5 1237,-698.5 1237,-698.5 1048,-698.5 1048,-698.5 1042,-698.5 1036,-692.5 1036,-686.5 1036,-686.5 1036,-434.5 1036,-434.5 1036,-428.5 1042,-422.5 1048,-422.5"/>
<text text-anchor="middle" x="1142.5" y="-683.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Lock</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-675.5 1249,-675.5 "/>
<text text-anchor="start" x="1044" y="-660.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub lock_type: LockType,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-652.5 1249,-652.5 "/>
<text text-anchor="start" x="1044" y="-637.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub primary: Vec&lt;u8&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-629.5 1249,-629.5 "/>
<text text-anchor="start" x="1044" y="-614.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub ts: TimeStamp,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-606.5 1249,-606.5 "/>
<text text-anchor="start" x="1044" y="-591.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub ttl: u64,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-583.5 1249,-583.5 "/>
<text text-anchor="start" x="1044" y="-568.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub short_value: Option&lt;Value&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-560.5 1249,-560.5 "/>
<text text-anchor="start" x="1044" y="-545.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub for_update_ts: TimeStamp,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-537.5 1249,-537.5 "/>
<text text-anchor="start" x="1044" y="-522.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub txn_size: u64,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-514.5 1249,-514.5 "/>
<text text-anchor="start" x="1044" y="-499.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub min_commit_ts: TimeStamp,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-491.5 1249,-491.5 "/>
<text text-anchor="start" x="1044" y="-476.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub use_async_commit: bool,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-468.5 1249,-468.5 "/>
<text text-anchor="start" x="1044" y="-453.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub secondaries: Vec&lt;Vec&lt;u8&gt;&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="1036,-445.5 1249,-445.5 "/>
<text text-anchor="start" x="1044" y="-430.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub rollback_ts: Vec&lt;TimeStamp&gt;,</text>
</g>
<!-- put_lock&#45;&gt;Lock -->
<g id="edge1" class="edge">
<title>put_lock&#45;&gt;Lock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M946.54,-533.5C972.08,-537.03 999.71,-540.86 1025.91,-544.49"/>
<polygon fill="green" stroke="green" points="1025.49,-547.96 1035.87,-545.87 1026.45,-541.03 1025.49,-547.96"/>
</g>
<!-- CF_LOCK -->
<g id="node4" class="node">
<title>CF_LOCK</title>
<path fill="none" stroke="#1c2123" d="M1169,-403.5C1169,-403.5 1116,-403.5 1116,-403.5 1110,-403.5 1104,-397.5 1104,-391.5 1104,-391.5 1104,-379.5 1104,-379.5 1104,-373.5 1110,-367.5 1116,-367.5 1116,-367.5 1169,-367.5 1169,-367.5 1175,-367.5 1181,-373.5 1181,-379.5 1181,-379.5 1181,-391.5 1181,-391.5 1181,-397.5 1175,-403.5 1169,-403.5"/>
<text text-anchor="middle" x="1142.5" y="-381.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">CF_LOCK</text>
</g>
<!-- put_lock&#45;&gt;CF_LOCK -->
<g id="edge2" class="edge">
<title>put_lock&#45;&gt;CF_LOCK</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M908.12,-488.9C936.61,-474.42 970.47,-456.4 1000,-438.5 1016.66,-428.4 1018.32,-421.68 1036,-413.5 1054.14,-405.11 1075.24,-398.88 1093.78,-394.46"/>
<polygon fill="green" stroke="green" points="1094.81,-397.81 1103.79,-392.18 1093.26,-390.99 1094.81,-397.81"/>
</g>
<!-- unlock_key -->
<g id="node2" class="node">
<title>unlock_key</title>
<path fill="none" stroke="#1c2123" d="M701,-368C701,-368 988,-368 988,-368 994,-368 1000,-374 1000,-380 1000,-380 1000,-417 1000,-417 1000,-423 994,-429 988,-429 988,-429 701,-429 701,-429 695,-429 689,-423 689,-417 689,-417 689,-380 689,-380 689,-374 695,-368 701,-368"/>
<text text-anchor="middle" x="844.5" y="-413.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">unlock_key</text>
<polyline fill="none" stroke="#1c2123" points="689,-406 1000,-406 "/>
<text text-anchor="start" x="697" y="-390.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">let released = ReleasedLock::new(&amp;key, pessimistic);</text>
<text text-anchor="start" x="697" y="-375.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> let write = Modify::Delete(CF_LOCK, key);</text>
</g>
<!-- unlock_key&#45;&gt;CF_LOCK -->
<g id="edge3" class="edge">
<title>unlock_key&#45;&gt;CF_LOCK</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1000,-391.71C1034.13,-390.22 1067.79,-388.74 1093.72,-387.6"/>
<polygon fill="green" stroke="green" points="1094.14,-391.08 1103.98,-387.15 1093.83,-384.09 1094.14,-391.08"/>
</g>
<!-- put_write -->
<g id="node5" class="node">
<title>put_write</title>
<path fill="none" stroke="#1c2123" d="M1164.5,-149.5C1164.5,-149.5 1120.5,-149.5 1120.5,-149.5 1114.5,-149.5 1108.5,-143.5 1108.5,-137.5 1108.5,-137.5 1108.5,-125.5 1108.5,-125.5 1108.5,-119.5 1114.5,-113.5 1120.5,-113.5 1120.5,-113.5 1164.5,-113.5 1164.5,-113.5 1170.5,-113.5 1176.5,-119.5 1176.5,-125.5 1176.5,-125.5 1176.5,-137.5 1176.5,-137.5 1176.5,-143.5 1170.5,-149.5 1164.5,-149.5"/>
<text text-anchor="middle" x="1142.5" y="-127.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">put_write</text>
</g>
<!-- CF_WRITE -->
<g id="node7" class="node">
<title>CF_WRITE</title>
<path fill="none" stroke="#1c2123" d="M1356,-159.5C1356,-159.5 1297,-159.5 1297,-159.5 1291,-159.5 1285,-153.5 1285,-147.5 1285,-147.5 1285,-135.5 1285,-135.5 1285,-129.5 1291,-123.5 1297,-123.5 1297,-123.5 1356,-123.5 1356,-123.5 1362,-123.5 1368,-129.5 1368,-135.5 1368,-135.5 1368,-147.5 1368,-147.5 1368,-153.5 1362,-159.5 1356,-159.5"/>
<text text-anchor="middle" x="1326.5" y="-137.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">CF_WRITE</text>
</g>
<!-- put_write&#45;&gt;CF_WRITE -->
<g id="edge4" class="edge">
<title>put_write&#45;&gt;CF_WRITE</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1176.88,-133.33C1204.17,-134.83 1243.21,-136.98 1274.43,-138.69"/>
<polygon fill="green" stroke="green" points="1274.51,-142.2 1284.68,-139.26 1274.89,-135.21 1274.51,-142.2"/>
</g>
<!-- delete_write -->
<g id="node6" class="node">
<title>delete_write</title>
<path fill="none" stroke="#1c2123" d="M874,-169.5C874,-169.5 815,-169.5 815,-169.5 809,-169.5 803,-163.5 803,-157.5 803,-157.5 803,-145.5 803,-145.5 803,-139.5 809,-133.5 815,-133.5 815,-133.5 874,-133.5 874,-133.5 880,-133.5 886,-139.5 886,-145.5 886,-145.5 886,-157.5 886,-157.5 886,-163.5 880,-169.5 874,-169.5"/>
<text text-anchor="middle" x="844.5" y="-147.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">delete_write</text>
</g>
<!-- delete_write&#45;&gt;CF_WRITE -->
<g id="edge5" class="edge">
<title>delete_write&#45;&gt;CF_WRITE</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M886.29,-155.91C960.42,-163.11 1122.07,-174.99 1257,-158.5 1262.84,-157.79 1268.91,-156.74 1274.9,-155.51"/>
<polygon fill="green" stroke="green" points="1275.87,-158.89 1284.87,-153.31 1274.35,-152.05 1275.87,-158.89"/>
</g>
<!-- delete_value -->
<g id="node8" class="node">
<title>delete_value</title>
<path fill="none" stroke="#1c2123" d="M875,-259.5C875,-259.5 814,-259.5 814,-259.5 808,-259.5 802,-253.5 802,-247.5 802,-247.5 802,-235.5 802,-235.5 802,-229.5 808,-223.5 814,-223.5 814,-223.5 875,-223.5 875,-223.5 881,-223.5 887,-229.5 887,-235.5 887,-235.5 887,-247.5 887,-247.5 887,-253.5 881,-259.5 875,-259.5"/>
<text text-anchor="middle" x="844.5" y="-237.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">delete_value</text>
</g>
<!-- CF_DEFAULT -->
<g id="node10" class="node">
<title>CF_DEFAULT</title>
<path fill="none" stroke="#1c2123" d="M1181,-286.5C1181,-286.5 1104,-286.5 1104,-286.5 1098,-286.5 1092,-280.5 1092,-274.5 1092,-274.5 1092,-262.5 1092,-262.5 1092,-256.5 1098,-250.5 1104,-250.5 1104,-250.5 1181,-250.5 1181,-250.5 1187,-250.5 1193,-256.5 1193,-262.5 1193,-262.5 1193,-274.5 1193,-274.5 1193,-280.5 1187,-286.5 1181,-286.5"/>
<text text-anchor="middle" x="1142.5" y="-264.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">CF_DEFAULT</text>
</g>
<!-- delete_value&#45;&gt;CF_DEFAULT -->
<g id="edge6" class="edge">
<title>delete_value&#45;&gt;CF_DEFAULT</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M887.28,-245.31C938.02,-249.94 1023.96,-257.78 1081.7,-263.05"/>
<polygon fill="green" stroke="green" points="1081.51,-266.54 1091.78,-263.96 1082.14,-259.57 1081.51,-266.54"/>
</g>
<!-- put_value -->
<g id="node9" class="node">
<title>put_value</title>
<path fill="none" stroke="#1c2123" d="M867.5,-313.5C867.5,-313.5 821.5,-313.5 821.5,-313.5 815.5,-313.5 809.5,-307.5 809.5,-301.5 809.5,-301.5 809.5,-289.5 809.5,-289.5 809.5,-283.5 815.5,-277.5 821.5,-277.5 821.5,-277.5 867.5,-277.5 867.5,-277.5 873.5,-277.5 879.5,-283.5 879.5,-289.5 879.5,-289.5 879.5,-301.5 879.5,-301.5 879.5,-307.5 873.5,-313.5 867.5,-313.5"/>
<text text-anchor="middle" x="844.5" y="-291.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">put_value</text>
</g>
<!-- put_value&#45;&gt;CF_DEFAULT -->
<g id="edge7" class="edge">
<title>put_value&#45;&gt;CF_DEFAULT</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M879.74,-292.38C929.09,-287.88 1020.91,-279.5 1081.62,-273.96"/>
<polygon fill="green" stroke="green" points="1082.19,-277.42 1091.83,-273.03 1081.56,-270.45 1082.19,-277.42"/>
</g>
<!-- load_lock -->
<g id="node11" class="node">
<title>load_lock</title>
<path fill="none" stroke="#1c2123" d="M577.5,-873.5C577.5,-873.5 531.5,-873.5 531.5,-873.5 525.5,-873.5 519.5,-867.5 519.5,-861.5 519.5,-861.5 519.5,-849.5 519.5,-849.5 519.5,-843.5 525.5,-837.5 531.5,-837.5 531.5,-837.5 577.5,-837.5 577.5,-837.5 583.5,-837.5 589.5,-843.5 589.5,-849.5 589.5,-849.5 589.5,-861.5 589.5,-861.5 589.5,-867.5 583.5,-873.5 577.5,-873.5"/>
<text text-anchor="middle" x="554.5" y="-851.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">load_lock</text>
</g>
<!-- get_txn_commit_record -->
<g id="node12" class="node">
<title>get_txn_commit_record</title>
<path fill="none" stroke="#1c2123" d="M616.5,-819.5C616.5,-819.5 492.5,-819.5 492.5,-819.5 486.5,-819.5 480.5,-813.5 480.5,-807.5 480.5,-807.5 480.5,-795.5 480.5,-795.5 480.5,-789.5 486.5,-783.5 492.5,-783.5 492.5,-783.5 616.5,-783.5 616.5,-783.5 622.5,-783.5 628.5,-789.5 628.5,-795.5 628.5,-795.5 628.5,-807.5 628.5,-807.5 628.5,-813.5 622.5,-819.5 616.5,-819.5"/>
<text text-anchor="middle" x="554.5" y="-797.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_txn_commit_record</text>
</g>
<!-- seek_write -->
<g id="node13" class="node">
<title>seek_write</title>
<path fill="none" stroke="#1c2123" d="M468,-892.5C468,-892.5 641,-892.5 641,-892.5 647,-892.5 653,-898.5 653,-904.5 653,-904.5 653,-956.5 653,-956.5 653,-962.5 647,-968.5 641,-968.5 641,-968.5 468,-968.5 468,-968.5 462,-968.5 456,-962.5 456,-956.5 456,-956.5 456,-904.5 456,-904.5 456,-898.5 462,-892.5 468,-892.5"/>
<text text-anchor="middle" x="554.5" y="-953.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">seek_write</text>
<polyline fill="none" stroke="#1c2123" points="456,-945.5 653,-945.5 "/>
<text text-anchor="start" x="464" y="-930.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">return (commit_ts, write_record)</text>
<text text-anchor="start" x="464" y="-915.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> of the write record for `key`</text>
<text text-anchor="start" x="464" y="-900.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> comitted before or equal to `ts`</text>
</g>
<!-- process_read -->
<g id="node14" class="node">
<title>process_read</title>
<path fill="none" stroke="#1c2123" d="M146,-948.5C146,-948.5 83,-948.5 83,-948.5 77,-948.5 71,-942.5 71,-936.5 71,-936.5 71,-924.5 71,-924.5 71,-918.5 77,-912.5 83,-912.5 83,-912.5 146,-912.5 146,-912.5 152,-912.5 158,-918.5 158,-924.5 158,-924.5 158,-936.5 158,-936.5 158,-942.5 152,-948.5 146,-948.5"/>
<text text-anchor="middle" x="114.5" y="-926.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">process_read</text>
</g>
<!-- find_mvcc_infos_by_key -->
<g id="node15" class="node">
<title>find_mvcc_infos_by_key</title>
<path fill="none" stroke="#1c2123" d="M408,-948.5C408,-948.5 277,-948.5 277,-948.5 271,-948.5 265,-942.5 265,-936.5 265,-936.5 265,-924.5 265,-924.5 265,-918.5 271,-912.5 277,-912.5 277,-912.5 408,-912.5 408,-912.5 414,-912.5 420,-918.5 420,-924.5 420,-924.5 420,-936.5 420,-936.5 420,-942.5 414,-948.5 408,-948.5"/>
<text text-anchor="middle" x="342.5" y="-926.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">find_mvcc_infos_by_key</text>
</g>
<!-- process_read&#45;&gt;find_mvcc_infos_by_key -->
<g id="edge8" class="edge">
<title>process_read&#45;&gt;find_mvcc_infos_by_key</title>
<path fill="none" stroke="#666666" d="M158.01,-930.5C185.24,-930.5 221.56,-930.5 254.71,-930.5"/>
<polygon fill="#666666" stroke="#666666" points="254.88,-934 264.88,-930.5 254.88,-927 254.88,-934"/>
</g>
<!-- find_mvcc_infos_by_key&#45;&gt;load_lock -->
<g id="edge25" class="edge">
<title>find_mvcc_infos_by_key&#45;&gt;load_lock</title>
<path fill="none" stroke="#666666" d="M379.66,-912.48C399.51,-903.04 424.75,-891.75 448,-883.5 467.83,-876.46 490.31,-870.26 509.4,-865.5"/>
<polygon fill="#666666" stroke="#666666" points="510.45,-868.84 519.34,-863.07 508.79,-862.04 510.45,-868.84"/>
</g>
<!-- find_mvcc_infos_by_key&#45;&gt;seek_write -->
<g id="edge26" class="edge">
<title>find_mvcc_infos_by_key&#45;&gt;seek_write</title>
<path fill="none" stroke="#666666" d="M420.21,-930.5C428.54,-930.5 437.14,-930.5 445.76,-930.5"/>
<polygon fill="#666666" stroke="#666666" points="445.87,-934 455.87,-930.5 445.87,-927 445.87,-934"/>
</g>
<!-- scan_values_in_default -->
<g id="node23" class="node">
<title>scan_values_in_default</title>
<path fill="none" stroke="#1c2123" d="M614,-1051.5C614,-1051.5 495,-1051.5 495,-1051.5 489,-1051.5 483,-1045.5 483,-1039.5 483,-1039.5 483,-1027.5 483,-1027.5 483,-1021.5 489,-1015.5 495,-1015.5 495,-1015.5 614,-1015.5 614,-1015.5 620,-1015.5 626,-1021.5 626,-1027.5 626,-1027.5 626,-1039.5 626,-1039.5 626,-1045.5 620,-1051.5 614,-1051.5"/>
<text text-anchor="middle" x="554.5" y="-1029.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">scan_values_in_default</text>
</g>
<!-- find_mvcc_infos_by_key&#45;&gt;scan_values_in_default -->
<g id="edge27" class="edge">
<title>find_mvcc_infos_by_key&#45;&gt;scan_values_in_default</title>
<path fill="none" stroke="#666666" d="M361.4,-948.59C380.95,-967.27 414.03,-995.82 448,-1011.5 455.9,-1015.15 464.41,-1018.19 473.05,-1020.74"/>
<polygon fill="#666666" stroke="#666666" points="472.26,-1024.15 482.83,-1023.41 474.1,-1017.4 472.26,-1024.15"/>
</g>
<!-- Prewrite_process_write -->
<g id="node16" class="node">
<title>Prewrite_process_write</title>
<path fill="none" stroke="#1c2123" d="M54,-489C54,-489 175,-489 175,-489 181,-489 187,-495 187,-501 187,-501 187,-538 187,-538 187,-544 181,-550 175,-550 175,-550 54,-550 54,-550 48,-550 42,-544 42,-538 42,-538 42,-501 42,-501 42,-495 48,-489 54,-489"/>
<text text-anchor="middle" x="114.5" y="-534.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Prewrite::process_write</text>
<polyline fill="none" stroke="#1c2123" points="42,-527 187,-527 "/>
<text text-anchor="start" x="50" y="-511.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">在Prewrite阶段</text>
<text text-anchor="start" x="50" y="-496.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 对key加lock</text>
</g>
<!-- Prewrite_process_write&#45;&gt;put_lock -->
<g id="edge9" class="edge">
<title>Prewrite_process_write&#45;&gt;put_lock</title>
<path fill="none" stroke="#666666" d="M187.3,-519.5C314.59,-519.5 580.63,-519.5 731.96,-519.5"/>
<polygon fill="#666666" stroke="#666666" points="732.21,-523 742.21,-519.5 732.21,-516 732.21,-523"/>
</g>
<!-- Prewrite_process_write&#45;&gt;put_value -->
<g id="edge10" class="edge">
<title>Prewrite_process_write&#45;&gt;put_value</title>
<path fill="none" stroke="#666666" d="M187.3,-497.41C336.98,-451.35 678.53,-346.26 799.79,-308.95"/>
<polygon fill="#666666" stroke="#666666" points="800.96,-312.25 809.49,-305.96 798.9,-305.56 800.96,-312.25"/>
</g>
<!-- Prewrite_process_write&#45;&gt;load_lock -->
<g id="edge11" class="edge">
<title>Prewrite_process_write&#45;&gt;load_lock</title>
<path fill="none" stroke="#666666" d="M133.57,-550.33C156.47,-589.68 196.81,-660.03 229,-721.5 245.97,-753.9 236.14,-773.03 265,-795.5 336.74,-851.35 447.91,-858.57 509.19,-857.77"/>
<polygon fill="#666666" stroke="#666666" points="509.39,-861.26 519.31,-857.56 509.24,-854.27 509.39,-861.26"/>
</g>
<!-- Commit_process_write -->
<g id="node17" class="node">
<title>Commit_process_write</title>
<path fill="none" stroke="#1c2123" d="M12,-730.5C12,-730.5 217,-730.5 217,-730.5 223,-730.5 229,-736.5 229,-742.5 229,-742.5 229,-794.5 229,-794.5 229,-800.5 223,-806.5 217,-806.5 217,-806.5 12,-806.5 12,-806.5 6,-806.5 0,-800.5 0,-794.5 0,-794.5 0,-742.5 0,-742.5 0,-736.5 6,-730.5 12,-730.5"/>
<text text-anchor="middle" x="114.5" y="-791.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Commit::process_write</text>
<polyline fill="none" stroke="#1c2123" points="0,-783.5 229,-783.5 "/>
<text text-anchor="start" x="8" y="-768.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">提交事务,对于事务中每个key</text>
<text text-anchor="start" x="8" y="-753.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> unlock, put_write</text>
<text text-anchor="start" x="8" y="-738.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> put_write之后，对其他事务可见了</text>
</g>
<!-- commit -->
<g id="node18" class="node">
<title>commit</title>
<path fill="none" stroke="#1c2123" d="M360,-786.5C360,-786.5 325,-786.5 325,-786.5 319,-786.5 313,-780.5 313,-774.5 313,-774.5 313,-762.5 313,-762.5 313,-756.5 319,-750.5 325,-750.5 325,-750.5 360,-750.5 360,-750.5 366,-750.5 372,-756.5 372,-762.5 372,-762.5 372,-774.5 372,-774.5 372,-780.5 366,-786.5 360,-786.5"/>
<text text-anchor="middle" x="342.5" y="-764.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">commit</text>
</g>
<!-- Commit_process_write&#45;&gt;commit -->
<g id="edge12" class="edge">
<title>Commit_process_write&#45;&gt;commit</title>
<path fill="none" stroke="#666666" d="M229.16,-768.5C255.56,-768.5 281.91,-768.5 302.44,-768.5"/>
<polygon fill="#666666" stroke="#666666" points="302.62,-772 312.62,-768.5 302.62,-765 302.62,-772"/>
</g>
<!-- commit&#45;&gt;unlock_key -->
<g id="edge13" class="edge">
<title>commit&#45;&gt;unlock_key</title>
<path fill="none" stroke="#666666" d="M360.63,-750.3C407.19,-701.59 541.4,-566.05 673,-479.5 699.44,-462.11 730.2,-446.31 758.26,-433.38"/>
<polygon fill="#666666" stroke="#666666" points="760,-436.43 767.66,-429.1 757.11,-430.06 760,-436.43"/>
</g>
<!-- commit&#45;&gt;put_write -->
<g id="edge14" class="edge">
<title>commit&#45;&gt;put_write</title>
<path fill="none" stroke="#666666" d="M372.28,-768.38C495.97,-767.71 977.22,-763.68 1000,-741.5 1084.58,-659.15 979.93,-315.38 1036,-211.5 1050.02,-185.52 1076.53,-165.47 1099.47,-151.94"/>
<polygon fill="#666666" stroke="#666666" points="1101.4,-154.87 1108.38,-146.9 1097.95,-148.78 1101.4,-154.87"/>
</g>
<!-- commit&#45;&gt;load_lock -->
<g id="edge15" class="edge">
<title>commit&#45;&gt;load_lock</title>
<path fill="none" stroke="#666666" d="M370.41,-786.67C390.93,-799.84 420.28,-817.24 448,-828.5 467.6,-836.46 490.22,-842.62 509.48,-847.03"/>
<polygon fill="#666666" stroke="#666666" points="508.98,-850.51 519.5,-849.24 510.48,-843.67 508.98,-850.51"/>
</g>
<!-- commit&#45;&gt;get_txn_commit_record -->
<g id="edge16" class="edge">
<title>commit&#45;&gt;get_txn_commit_record</title>
<path fill="none" stroke="#666666" d="M372.26,-773.02C397.51,-776.99 435.53,-782.96 470.24,-788.42"/>
<polygon fill="#666666" stroke="#666666" points="469.98,-791.92 480.4,-790.01 471.07,-785 469.98,-791.92"/>
</g>
<!-- Rollback_process_write -->
<g id="node19" class="node">
<title>Rollback_process_write</title>
<path fill="none" stroke="#1c2123" d="M52.5,-128.5C52.5,-128.5 176.5,-128.5 176.5,-128.5 182.5,-128.5 188.5,-134.5 188.5,-140.5 188.5,-140.5 188.5,-162.5 188.5,-162.5 188.5,-168.5 182.5,-174.5 176.5,-174.5 176.5,-174.5 52.5,-174.5 52.5,-174.5 46.5,-174.5 40.5,-168.5 40.5,-162.5 40.5,-162.5 40.5,-140.5 40.5,-140.5 40.5,-134.5 46.5,-128.5 52.5,-128.5"/>
<text text-anchor="middle" x="114.5" y="-159.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Rollback::process_write</text>
<polyline fill="none" stroke="#1c2123" points="40.5,-151.5 188.5,-151.5 "/>
<text text-anchor="middle" x="114.5" y="-136.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">清理事务的key lock</text>
</g>
<!-- cleanup -->
<g id="node20" class="node">
<title>cleanup</title>
<path fill="none" stroke="#1c2123" d="M360,-169.5C360,-169.5 325,-169.5 325,-169.5 319,-169.5 313,-163.5 313,-157.5 313,-157.5 313,-145.5 313,-145.5 313,-139.5 319,-133.5 325,-133.5 325,-133.5 360,-133.5 360,-133.5 366,-133.5 372,-139.5 372,-145.5 372,-145.5 372,-157.5 372,-157.5 372,-163.5 366,-169.5 360,-169.5"/>
<text text-anchor="middle" x="342.5" y="-147.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">cleanup</text>
</g>
<!-- Rollback_process_write&#45;&gt;cleanup -->
<g id="edge17" class="edge">
<title>Rollback_process_write&#45;&gt;cleanup</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M188.56,-151.5C226.57,-151.5 271.49,-151.5 302.77,-151.5"/>
<polygon fill="green" stroke="green" points="302.83,-155 312.83,-151.5 302.83,-148 302.83,-155"/>
</g>
<!-- rollback_lock -->
<g id="node21" class="node">
<title>rollback_lock</title>
<path fill="none" stroke="#1c2123" d="M588,-169.5C588,-169.5 521,-169.5 521,-169.5 515,-169.5 509,-163.5 509,-157.5 509,-157.5 509,-145.5 509,-145.5 509,-139.5 515,-133.5 521,-133.5 521,-133.5 588,-133.5 588,-133.5 594,-133.5 600,-139.5 600,-145.5 600,-145.5 600,-157.5 600,-157.5 600,-163.5 594,-169.5 588,-169.5"/>
<text text-anchor="middle" x="554.5" y="-147.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">rollback_lock</text>
</g>
<!-- cleanup&#45;&gt;rollback_lock -->
<g id="edge18" class="edge">
<title>cleanup&#45;&gt;rollback_lock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M372.26,-151.5C404.71,-151.5 458.23,-151.5 498.72,-151.5"/>
<polygon fill="green" stroke="green" points="498.97,-155 508.97,-151.5 498.97,-148 498.97,-155"/>
</g>
<!-- rollback_lock&#45;&gt;unlock_key -->
<g id="edge19" class="edge">
<title>rollback_lock&#45;&gt;unlock_key</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M560.64,-169.74C572.94,-209.9 607.97,-306.31 673,-355.5 676.42,-358.09 679.99,-360.53 683.66,-362.81"/>
<polygon fill="green" stroke="green" points="682.02,-365.91 692.43,-367.9 685.53,-359.85 682.02,-365.91"/>
</g>
<!-- rollback_lock&#45;&gt;put_write -->
<g id="edge20" class="edge">
<title>rollback_lock&#45;&gt;put_write</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M600,-138.78C621.8,-133.19 648.56,-127.27 673,-124.5 828.8,-106.83 1015.59,-119.74 1098.37,-127.19"/>
<polygon fill="green" stroke="green" points="1098.14,-130.69 1108.41,-128.12 1098.78,-123.72 1098.14,-130.69"/>
</g>
<!-- rollback_lock&#45;&gt;delete_write -->
<g id="edge21" class="edge">
<title>rollback_lock&#45;&gt;delete_write</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M600.18,-151.5C652.28,-151.5 738.2,-151.5 792.76,-151.5"/>
<polygon fill="green" stroke="green" points="792.9,-155 802.9,-151.5 792.9,-148 792.9,-155"/>
</g>
<!-- rollback_lock&#45;&gt;delete_value -->
<g id="edge22" class="edge">
<title>rollback_lock&#45;&gt;delete_value</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M584.85,-169.61C607.99,-183.11 641.51,-200.95 673,-211.5 711.61,-224.43 757.11,-232.08 791.39,-236.41"/>
<polygon fill="green" stroke="green" points="791.3,-239.93 801.65,-237.65 792.14,-232.98 791.3,-239.93"/>
</g>
<!-- make_rollback -->
<g id="node22" class="node">
<title>make_rollback</title>
<path fill="none" stroke="#1c2123" d="M725.5,-0.5C725.5,-0.5 963.5,-0.5 963.5,-0.5 969.5,-0.5 975.5,-6.5 975.5,-12.5 975.5,-12.5 975.5,-64.5 975.5,-64.5 975.5,-70.5 969.5,-76.5 963.5,-76.5 963.5,-76.5 725.5,-76.5 725.5,-76.5 719.5,-76.5 713.5,-70.5 713.5,-64.5 713.5,-64.5 713.5,-12.5 713.5,-12.5 713.5,-6.5 719.5,-0.5 725.5,-0.5"/>
<text text-anchor="middle" x="844.5" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">make_rollback</text>
<polyline fill="none" stroke="#1c2123" points="713.5,-53.5 975.5,-53.5 "/>
<text text-anchor="start" x="721.5" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Generate the Write record that should </text>
<text text-anchor="start" x="721.5" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> be written that means to perform a specified</text>
<text text-anchor="start" x="721.5" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> rollback operation</text>
</g>
<!-- rollback_lock&#45;&gt;make_rollback -->
<g id="edge23" class="edge">
<title>rollback_lock&#45;&gt;make_rollback</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M596.63,-133.42C619.09,-123.7 647.45,-111.65 673,-101.5 690.94,-94.37 710.04,-87.06 728.72,-80.05"/>
<polygon fill="green" stroke="green" points="730.01,-83.3 738.15,-76.52 727.55,-76.75 730.01,-83.3"/>
</g>
<!-- make_rollback&#45;&gt;put_write -->
<g id="edge24" class="edge">
<title>make_rollback&#45;&gt;put_write</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M966.75,-76.59C1013.54,-91.3 1064.02,-107.16 1098.64,-118.03"/>
<polygon fill="green" stroke="green" points="1097.82,-121.44 1108.4,-121.1 1099.91,-114.77 1097.82,-121.44"/>
</g>
</g>
</svg>
