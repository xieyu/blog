<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: RaftCmdRequest Pages: 1 -->
<svg width="1917pt" height="850pt"
 viewBox="0.00 0.00 1917.00 850.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 846)">
<title>RaftCmdRequest</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-846 1913,-846 1913,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_Callback</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1053.5,-8C1053.5,-8 1183.5,-8 1183.5,-8 1189.5,-8 1195.5,-14 1195.5,-20 1195.5,-20 1195.5,-132 1195.5,-132 1195.5,-138 1189.5,-144 1183.5,-144 1183.5,-144 1053.5,-144 1053.5,-144 1047.5,-144 1041.5,-138 1041.5,-132 1041.5,-132 1041.5,-20 1041.5,-20 1041.5,-14 1047.5,-8 1053.5,-8"/>
<text text-anchor="middle" x="1118.5" y="-124" font-family="Times,serif" font-size="20.00">Callback</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_RaftRs</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1731,-20C1731,-20 1887,-20 1887,-20 1893,-20 1899,-26 1899,-32 1899,-32 1899,-132 1899,-132 1899,-138 1893,-144 1887,-144 1887,-144 1731,-144 1731,-144 1725,-144 1719,-138 1719,-132 1719,-132 1719,-32 1719,-32 1719,-26 1725,-20 1731,-20"/>
<text text-anchor="middle" x="1809" y="-124" font-family="Times,serif" font-size="20.00">RaftRs</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Peer</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M779,-152C779,-152 1889,-152 1889,-152 1895,-152 1901,-158 1901,-164 1901,-164 1901,-558 1901,-558 1901,-564 1895,-570 1889,-570 1889,-570 779,-570 779,-570 773,-570 767,-564 767,-558 767,-558 767,-164 767,-164 767,-158 773,-152 779,-152"/>
<text text-anchor="middle" x="1334" y="-550" font-family="Times,serif" font-size="20.00">Peer</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_PeerFsmDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M154,-578C154,-578 945.5,-578 945.5,-578 951.5,-578 957.5,-584 957.5,-590 957.5,-590 957.5,-822 957.5,-822 957.5,-828 951.5,-834 945.5,-834 945.5,-834 154,-834 154,-834 148,-834 142,-828 142,-822 142,-822 142,-590 142,-590 142,-584 148,-578 154,-578"/>
<text text-anchor="middle" x="549.75" y="-814" font-family="Times,serif" font-size="20.00">PeerFsmDelegate</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_PollHandler</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-661C20,-661 110,-661 110,-661 116,-661 122,-667 122,-673 122,-673 122,-731 122,-731 122,-737 116,-743 110,-743 110,-743 20,-743 20,-743 14,-743 8,-737 8,-731 8,-731 8,-673 8,-673 8,-667 14,-661 20,-661"/>
<text text-anchor="middle" x="65" y="-723" font-family="Times,serif" font-size="20.00">PollHandler</text>
</g>
<!-- invoke_proposed -->
<g id="node1" class="node">
<title>invoke_proposed</title>
<path fill="none" stroke="#1c2123" d="M1161.5,-106C1161.5,-106 1075.5,-106 1075.5,-106 1069.5,-106 1063.5,-100 1063.5,-94 1063.5,-94 1063.5,-82 1063.5,-82 1063.5,-76 1069.5,-70 1075.5,-70 1075.5,-70 1161.5,-70 1161.5,-70 1167.5,-70 1173.5,-76 1173.5,-82 1173.5,-82 1173.5,-94 1173.5,-94 1173.5,-100 1167.5,-106 1161.5,-106"/>
<text text-anchor="middle" x="1118.5" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">invoke_proposed</text>
</g>
<!-- invoke_with_response -->
<g id="node2" class="node">
<title>invoke_with_response</title>
<path fill="none" stroke="#1c2123" d="M1175.5,-52C1175.5,-52 1061.5,-52 1061.5,-52 1055.5,-52 1049.5,-46 1049.5,-40 1049.5,-40 1049.5,-28 1049.5,-28 1049.5,-22 1055.5,-16 1061.5,-16 1061.5,-16 1175.5,-16 1175.5,-16 1181.5,-16 1187.5,-22 1187.5,-28 1187.5,-28 1187.5,-40 1187.5,-40 1187.5,-46 1181.5,-52 1175.5,-52"/>
<text text-anchor="middle" x="1118.5" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">invoke_with_response</text>
</g>
<!-- raft_group_propose -->
<g id="node3" class="node">
<title>raft_group_propose</title>
<path fill="none" stroke="#1c2123" d="M1739,-29C1739,-29 1879,-29 1879,-29 1885,-29 1891,-35 1891,-41 1891,-41 1891,-93 1891,-93 1891,-99 1885,-105 1879,-105 1879,-105 1739,-105 1739,-105 1733,-105 1727,-99 1727,-93 1727,-93 1727,-41 1727,-41 1727,-35 1733,-29 1739,-29"/>
<text text-anchor="middle" x="1809" y="-89.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose</text>
<polyline fill="none" stroke="#1c2123" points="1727,-82 1891,-82 "/>
<text text-anchor="start" x="1735" y="-66.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft group发起propose</text>
<text text-anchor="start" x="1735" y="-51.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 后续通过ready接口获取</text>
<text text-anchor="start" x="1735" y="-36.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> commit的状况</text>
</g>
<!-- propose -->
<g id="node4" class="node">
<title>propose</title>
<path fill="none" stroke="#1c2123" d="M787,-195.5C787,-195.5 942,-195.5 942,-195.5 948,-195.5 954,-201.5 954,-207.5 954,-207.5 954,-244.5 954,-244.5 954,-250.5 948,-256.5 942,-256.5 942,-256.5 787,-256.5 787,-256.5 781,-256.5 775,-250.5 775,-244.5 775,-244.5 775,-207.5 775,-207.5 775,-201.5 781,-195.5 787,-195.5"/>
<text text-anchor="middle" x="864.5" y="-241.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose</text>
<polyline fill="none" stroke="#1c2123" points="775,-233.5 954,-233.5 "/>
<text text-anchor="start" x="783" y="-218.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">在向raft group提交msg之后</text>
<text text-anchor="start" x="783" y="-203.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用cb 的invoke_proposed</text>
</g>
<!-- propose&#45;&gt;invoke_proposed -->
<g id="edge2" class="edge">
<title>propose&#45;&gt;invoke_proposed</title>
<path fill="none" stroke="#666666" d="M911.42,-195.39C934.58,-180.42 963.36,-162.55 990,-148 1014.74,-134.49 1043.03,-120.99 1066.67,-110.23"/>
<polygon fill="#666666" stroke="#666666" points="1068.15,-113.4 1075.82,-106.09 1065.27,-107.02 1068.15,-113.4"/>
</g>
<!-- propose&#45;&gt;invoke_with_response -->
<g id="edge3" class="edge">
<title>propose&#45;&gt;invoke_with_response</title>
<path fill="none" stroke="#666666" d="M886.98,-195.18C918.79,-149.9 976.19,-69.79 990,-61 1004.68,-51.66 1022.05,-45.5 1039.16,-41.44"/>
<polygon fill="#666666" stroke="#666666" points="1040.15,-44.81 1049.19,-39.29 1038.68,-37.97 1040.15,-44.81"/>
</g>
<!-- propose_normal -->
<g id="node5" class="node">
<title>propose_normal</title>
<path fill="none" stroke="#1c2123" d="M1296.5,-195.5C1296.5,-195.5 1463.5,-195.5 1463.5,-195.5 1469.5,-195.5 1475.5,-201.5 1475.5,-207.5 1475.5,-207.5 1475.5,-244.5 1475.5,-244.5 1475.5,-250.5 1469.5,-256.5 1463.5,-256.5 1463.5,-256.5 1296.5,-256.5 1296.5,-256.5 1290.5,-256.5 1284.5,-250.5 1284.5,-244.5 1284.5,-244.5 1284.5,-207.5 1284.5,-207.5 1284.5,-201.5 1290.5,-195.5 1296.5,-195.5"/>
<text text-anchor="middle" x="1380" y="-241.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose_normal</text>
<polyline fill="none" stroke="#1c2123" points="1284.5,-233.5 1475.5,-233.5 "/>
<text text-anchor="start" x="1292.5" y="-218.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将request序列化</text>
<text text-anchor="start" x="1292.5" y="-203.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后调用raft_group的propose</text>
</g>
<!-- propose&#45;&gt;propose_normal -->
<g id="edge4" class="edge">
<title>propose&#45;&gt;propose_normal</title>
<path fill="none" stroke="#666666" d="M921.16,-195.49C942.1,-185.62 966.53,-175.95 990,-171 1101.76,-147.41 1135,-148.6 1247,-171 1268.33,-175.27 1290.52,-183.06 1310.49,-191.46"/>
<polygon fill="#666666" stroke="#666666" points="1309.23,-194.72 1319.8,-195.48 1312.01,-188.3 1309.23,-194.72"/>
</g>
<!-- inspect -->
<g id="node6" class="node">
<title>inspect</title>
<path fill="none" stroke="#1c2123" d="M1032,-180.5C1032,-180.5 1205,-180.5 1205,-180.5 1211,-180.5 1217,-186.5 1217,-192.5 1217,-192.5 1217,-259.5 1217,-259.5 1217,-265.5 1211,-271.5 1205,-271.5 1205,-271.5 1032,-271.5 1032,-271.5 1026,-271.5 1020,-265.5 1020,-259.5 1020,-259.5 1020,-192.5 1020,-192.5 1020,-186.5 1026,-180.5 1032,-180.5"/>
<text text-anchor="middle" x="1118.5" y="-256.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">inspect</text>
<polyline fill="none" stroke="#1c2123" points="1020,-248.5 1217,-248.5 "/>
<text text-anchor="start" x="1028" y="-233.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">计算RequestPolicy</text>
<text text-anchor="start" x="1028" y="-218.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> write的polic为l RequestPolicy::</text>
<text text-anchor="start" x="1028" y="-203.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ProposeNormal</text>
<text text-anchor="start" x="1028" y="-188.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 所以后面调用propose_normal</text>
</g>
<!-- propose&#45;&gt;inspect -->
<g id="edge5" class="edge">
<title>propose&#45;&gt;inspect</title>
<path fill="none" stroke="#666666" d="M954.35,-226C972.16,-226 991.06,-226 1009.45,-226"/>
<polygon fill="#666666" stroke="#666666" points="1009.6,-229.5 1019.6,-226 1009.6,-222.5 1009.6,-229.5"/>
</g>
<!-- post_propose -->
<g id="node7" class="node">
<title>post_propose</title>
<path fill="none" stroke="#1c2123" d="M1033,-290.5C1033,-290.5 1204,-290.5 1204,-290.5 1210,-290.5 1216,-296.5 1216,-302.5 1216,-302.5 1216,-339.5 1216,-339.5 1216,-345.5 1210,-351.5 1204,-351.5 1204,-351.5 1033,-351.5 1033,-351.5 1027,-351.5 1021,-345.5 1021,-339.5 1021,-339.5 1021,-302.5 1021,-302.5 1021,-296.5 1027,-290.5 1033,-290.5"/>
<text text-anchor="middle" x="1118.5" y="-336.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">post_propose</text>
<polyline fill="none" stroke="#1c2123" points="1021,-328.5 1216,-328.5 "/>
<text text-anchor="start" x="1029" y="-313.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将Proposal 插入到队列中</text>
<text text-anchor="start" x="1029" y="-298.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 等后面collect_ready 回调该cb</text>
</g>
<!-- propose&#45;&gt;post_propose -->
<g id="edge6" class="edge">
<title>propose&#45;&gt;post_propose</title>
<path fill="none" stroke="#666666" d="M930.84,-256.51C949.75,-264.89 970.54,-273.67 990,-281 996.79,-283.56 1003.83,-286.09 1010.95,-288.56"/>
<polygon fill="#666666" stroke="#666666" points="1010.09,-291.96 1020.69,-291.88 1012.36,-285.34 1010.09,-291.96"/>
</g>
<!-- Proposal -->
<g id="node12" class="node">
<title>Proposal</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1002,-370.5C1002,-370.5 1235,-370.5 1235,-370.5 1241,-370.5 1247,-376.5 1247,-382.5 1247,-382.5 1247,-519.5 1247,-519.5 1247,-525.5 1241,-531.5 1235,-531.5 1235,-531.5 1002,-531.5 1002,-531.5 996,-531.5 990,-525.5 990,-519.5 990,-519.5 990,-382.5 990,-382.5 990,-376.5 996,-370.5 1002,-370.5"/>
<text text-anchor="middle" x="1118.5" y="-516.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Proposal</text>
<polyline fill="none" stroke="#60b5ac" points="990,-508.5 1247,-508.5 "/>
<text text-anchor="start" x="998" y="-493.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub is_conf_change: bool,</text>
<polyline fill="none" stroke="#60b5ac" points="990,-485.5 1247,-485.5 "/>
<text text-anchor="start" x="998" y="-470.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub index: u64,</text>
<polyline fill="none" stroke="#60b5ac" points="990,-462.5 1247,-462.5 "/>
<text text-anchor="start" x="998" y="-447.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub term: u64,</text>
<polyline fill="none" stroke="#60b5ac" points="990,-439.5 1247,-439.5 "/>
<text text-anchor="start" x="998" y="-424.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub cb: Callback&lt;S&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="990,-416.5 1247,-416.5 "/>
<text text-anchor="start" x="998" y="-401.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub renew_lease_time: Option&lt;Timespec&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="990,-393.5 1247,-393.5 "/>
<text text-anchor="start" x="998" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub must_pass_epoch_check: bool,</text>
</g>
<!-- propose&#45;&gt;Proposal -->
<g id="edge12" class="edge">
<title>propose&#45;&gt;Proposal</title>
<path fill="none" stroke="#666666" d="M890.54,-256.69C914.56,-285.24 952.62,-328.19 990,-361 991,-361.88 992.01,-362.76 993.03,-363.64"/>
<polygon fill="#666666" stroke="#666666" points="991.09,-366.57 1000.99,-370.35 995.6,-361.22 991.09,-366.57"/>
</g>
<!-- propose_normal&#45;&gt;raft_group_propose -->
<g id="edge7" class="edge">
<title>propose_normal&#45;&gt;raft_group_propose</title>
<path fill="none" stroke="#666666" d="M1428.48,-195.34C1453,-180.47 1483.83,-163.23 1513,-151 1579.29,-123.2 1657.69,-101.37 1717,-86.93"/>
<polygon fill="#666666" stroke="#666666" points="1717.82,-90.33 1726.72,-84.59 1716.18,-83.53 1717.82,-90.33"/>
</g>
<!-- has_applied_to_current_term -->
<g id="node8" class="node">
<title>has_applied_to_current_term</title>
<path fill="none" stroke="#1c2123" d="M1677,-196C1677,-196 1525,-196 1525,-196 1519,-196 1513,-190 1513,-184 1513,-184 1513,-172 1513,-172 1513,-166 1519,-160 1525,-160 1525,-160 1677,-160 1677,-160 1683,-160 1689,-166 1689,-172 1689,-172 1689,-184 1689,-184 1689,-190 1683,-196 1677,-196"/>
<text text-anchor="middle" x="1601" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">has_applied_to_current_term</text>
</g>
<!-- propose_normal&#45;&gt;has_applied_to_current_term -->
<g id="edge8" class="edge">
<title>propose_normal&#45;&gt;has_applied_to_current_term</title>
<path fill="none" stroke="#666666" d="M1475.78,-205.23C1486.38,-202.9 1497.17,-200.54 1507.74,-198.22"/>
<polygon fill="#666666" stroke="#666666" points="1508.77,-201.58 1517.79,-196.02 1507.27,-194.74 1508.77,-201.58"/>
</g>
<!-- propose_check_epoch -->
<g id="node9" class="node">
<title>propose_check_epoch</title>
<path fill="none" stroke="#1c2123" d="M1657.5,-250C1657.5,-250 1544.5,-250 1544.5,-250 1538.5,-250 1532.5,-244 1532.5,-238 1532.5,-238 1532.5,-226 1532.5,-226 1532.5,-220 1538.5,-214 1544.5,-214 1544.5,-214 1657.5,-214 1657.5,-214 1663.5,-214 1669.5,-220 1669.5,-226 1669.5,-226 1669.5,-238 1669.5,-238 1669.5,-244 1663.5,-250 1657.5,-250"/>
<text text-anchor="middle" x="1601" y="-228.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose_check_epoch</text>
</g>
<!-- propose_normal&#45;&gt;propose_check_epoch -->
<g id="edge9" class="edge">
<title>propose_normal&#45;&gt;propose_check_epoch</title>
<path fill="none" stroke="#666666" d="M1475.78,-228.6C1491.28,-229.02 1507.18,-229.46 1522.21,-229.87"/>
<polygon fill="#666666" stroke="#666666" points="1522.36,-233.37 1532.45,-230.15 1522.55,-226.38 1522.36,-233.37"/>
</g>
<!-- pre_propose -->
<g id="node10" class="node">
<title>pre_propose</title>
<path fill="none" stroke="#1c2123" d="M1569,-357C1569,-357 1633,-357 1633,-357 1639,-357 1645,-363 1645,-369 1645,-369 1645,-391 1645,-391 1645,-397 1639,-403 1633,-403 1633,-403 1569,-403 1569,-403 1563,-403 1557,-397 1557,-391 1557,-391 1557,-369 1557,-369 1557,-363 1563,-357 1569,-357"/>
<text text-anchor="middle" x="1601" y="-387.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pre_propose</text>
<polyline fill="none" stroke="#1c2123" points="1557,-380 1645,-380 "/>
<text text-anchor="start" x="1565" y="-364.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">做一些检查</text>
</g>
<!-- propose_normal&#45;&gt;pre_propose -->
<g id="edge10" class="edge">
<title>propose_normal&#45;&gt;pre_propose</title>
<path fill="none" stroke="#666666" d="M1408,-256.62C1433.01,-283.45 1472.37,-321.97 1513,-347 1523.53,-353.49 1535.54,-359.05 1547.21,-363.65"/>
<polygon fill="#666666" stroke="#666666" points="1546.3,-367.05 1556.89,-367.3 1548.76,-360.5 1546.3,-367.05"/>
</g>
<!-- write_to_bytes -->
<g id="node11" class="node">
<title>write_to_bytes</title>
<path fill="none" stroke="#1c2123" d="M1546,-268.5C1546,-268.5 1656,-268.5 1656,-268.5 1662,-268.5 1668,-274.5 1668,-280.5 1668,-280.5 1668,-325.5 1668,-325.5 1668,-331.5 1662,-337.5 1656,-337.5 1656,-337.5 1546,-337.5 1546,-337.5 1540,-337.5 1534,-331.5 1534,-325.5 1534,-325.5 1534,-280.5 1534,-280.5 1534,-274.5 1540,-268.5 1546,-268.5"/>
<text text-anchor="middle" x="1601" y="-322.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_to_bytes</text>
<polyline fill="none" stroke="#1c2123" points="1534,-314.5 1668,-314.5 "/>
<text text-anchor="start" x="1542" y="-299.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将req序列化为bytes</text>
<polyline fill="none" stroke="#1c2123" points="1534,-291.5 1668,-291.5 "/>
<text text-anchor="start" x="1542" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">protobuf&lt;Vec&lt;V8&gt;&gt;</text>
</g>
<!-- propose_normal&#45;&gt;write_to_bytes -->
<g id="edge11" class="edge">
<title>propose_normal&#45;&gt;write_to_bytes</title>
<path fill="none" stroke="#666666" d="M1467.87,-256.54C1486.5,-263.09 1506.03,-269.96 1524.2,-276.35"/>
<polygon fill="#666666" stroke="#666666" points="1523.26,-279.73 1533.85,-279.74 1525.58,-273.12 1523.26,-279.73"/>
</g>
<!-- inspect&#45;&gt;propose_normal -->
<g id="edge1" class="edge">
<title>inspect&#45;&gt;propose_normal</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1217.24,-226C1235.87,-226 1255.44,-226 1274.28,-226"/>
<polygon fill="green" stroke="green" points="1274.36,-229.5 1284.36,-226 1274.36,-222.5 1274.36,-229.5"/>
</g>
<!-- proposals -->
<g id="node13" class="node">
<title>proposals</title>
<path fill="#feed9b" stroke="#f7e495" d="M1295,-363C1295,-363 1465,-363 1465,-363 1471,-363 1477,-369 1477,-375 1477,-375 1477,-397 1477,-397 1477,-403 1471,-409 1465,-409 1465,-409 1295,-409 1295,-409 1289,-409 1283,-403 1283,-397 1283,-397 1283,-375 1283,-375 1283,-369 1289,-363 1295,-363"/>
<text text-anchor="middle" x="1380" y="-393.8" font-family="Times,serif" font-size="14.00" fill="#40575d">proposals</text>
<polyline fill="none" stroke="#f7e495" points="1283,-386 1477,-386 "/>
<text text-anchor="start" x="1291" y="-370.8" font-family="Times,serif" font-size="14.00" fill="#40575d">ProposalQueue&lt;EK::Snapshot&gt;,</text>
</g>
<!-- post_propose&#45;&gt;proposals -->
<g id="edge14" class="edge">
<title>post_propose&#45;&gt;proposals</title>
<path fill="none" stroke="#666666" d="M1216.13,-345.2C1236.07,-350.2 1257.12,-355.47 1277.24,-360.51"/>
<polygon fill="#666666" stroke="#666666" points="1276.47,-363.93 1287.02,-362.96 1278.18,-357.14 1276.47,-363.93"/>
</g>
<!-- has_admin_request -->
<g id="node14" class="node">
<title>has_admin_request</title>
<path fill="none" stroke="#1c2123" d="M1858,-371C1858,-371 1760,-371 1760,-371 1754,-371 1748,-365 1748,-359 1748,-359 1748,-347 1748,-347 1748,-341 1754,-335 1760,-335 1760,-335 1858,-335 1858,-335 1864,-335 1870,-341 1870,-347 1870,-347 1870,-359 1870,-359 1870,-365 1864,-371 1858,-371"/>
<text text-anchor="middle" x="1809" y="-349.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">has_admin_request</text>
</g>
<!-- pre_propose&#45;&gt;has_admin_request -->
<g id="edge15" class="edge">
<title>pre_propose&#45;&gt;has_admin_request</title>
<path fill="none" stroke="#666666" d="M1645.18,-374.34C1671.9,-370.84 1706.82,-366.26 1737.47,-362.24"/>
<polygon fill="#666666" stroke="#666666" points="1738.22,-365.68 1747.68,-360.91 1737.31,-358.73 1738.22,-365.68"/>
</g>
<!-- get_sync_log_from_request -->
<g id="node15" class="node">
<title>get_sync_log_from_request</title>
<path fill="none" stroke="#1c2123" d="M1881,-425C1881,-425 1737,-425 1737,-425 1731,-425 1725,-419 1725,-413 1725,-413 1725,-401 1725,-401 1725,-395 1731,-389 1737,-389 1737,-389 1881,-389 1881,-389 1887,-389 1893,-395 1893,-401 1893,-401 1893,-413 1893,-413 1893,-419 1887,-425 1881,-425"/>
<text text-anchor="middle" x="1809" y="-403.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_sync_log_from_request</text>
</g>
<!-- pre_propose&#45;&gt;get_sync_log_from_request -->
<g id="edge16" class="edge">
<title>pre_propose&#45;&gt;get_sync_log_from_request</title>
<path fill="none" stroke="#666666" d="M1645.18,-385.66C1665.51,-388.32 1690.59,-391.61 1714.92,-394.8"/>
<polygon fill="#666666" stroke="#666666" points="1714.55,-398.28 1724.92,-396.11 1715.46,-391.34 1714.55,-398.28"/>
</g>
<!-- write_to_bytes&#45;&gt;raft_group_propose -->
<g id="edge17" class="edge">
<title>write_to_bytes&#45;&gt;raft_group_propose</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1668.24,-277.29C1676.02,-272.14 1683.23,-266.09 1689,-259 1721.26,-219.37 1692.37,-191.62 1719,-148 1726.95,-134.98 1737.6,-122.8 1748.77,-112.04"/>
<polygon fill="green" stroke="green" points="1751.22,-114.55 1756.16,-105.18 1746.45,-109.42 1751.22,-114.55"/>
</g>
<!-- Proposal&#45;&gt;proposals -->
<g id="edge13" class="edge">
<title>Proposal&#45;&gt;proposals</title>
<path fill="none" stroke="#666666" d="M1247.35,-418.98C1257.42,-416.45 1267.51,-413.93 1277.38,-411.45"/>
<polygon fill="#666666" stroke="#666666" points="1278.3,-414.83 1287.15,-409.01 1276.6,-408.04 1278.3,-414.83"/>
</g>
<!-- handle_msgs -->
<g id="node16" class="node">
<title>handle_msgs</title>
<path fill="none" stroke="#1c2123" d="M162,-712C162,-712 324,-712 324,-712 330,-712 336,-718 336,-724 336,-724 336,-746 336,-746 336,-752 330,-758 324,-758 324,-758 162,-758 162,-758 156,-758 150,-752 150,-746 150,-746 150,-724 150,-724 150,-718 156,-712 162,-712"/>
<text text-anchor="middle" x="243" y="-742.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_msgs</text>
<polyline fill="none" stroke="#1c2123" points="150,-735 336,-735 "/>
<text text-anchor="start" x="158" y="-719.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理发送过来的RaftComand</text>
</g>
<!-- propose_batch_raft_command -->
<g id="node17" class="node">
<title>propose_batch_raft_command</title>
<path fill="none" stroke="#1c2123" d="M542,-695C542,-695 384,-695 384,-695 378,-695 372,-689 372,-683 372,-683 372,-671 372,-671 372,-665 378,-659 384,-659 384,-659 542,-659 542,-659 548,-659 554,-665 554,-671 554,-671 554,-683 554,-683 554,-689 548,-695 542,-695"/>
<text text-anchor="middle" x="463" y="-673.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose_batch_raft_command</text>
</g>
<!-- handle_msgs&#45;&gt;propose_batch_raft_command -->
<g id="edge18" class="edge">
<title>handle_msgs&#45;&gt;propose_batch_raft_command</title>
<path fill="none" stroke="#666666" d="M330.47,-711.99C348.16,-707.29 366.68,-702.36 384.05,-697.74"/>
<polygon fill="#666666" stroke="#666666" points="385.36,-701.01 394.12,-695.06 383.56,-694.25 385.36,-701.01"/>
</g>
<!-- propose_raft_command -->
<g id="node18" class="node">
<title>propose_raft_command</title>
<path fill="none" stroke="#1c2123" d="M725.5,-695C725.5,-695 603.5,-695 603.5,-695 597.5,-695 591.5,-689 591.5,-683 591.5,-683 591.5,-671 591.5,-671 591.5,-665 597.5,-659 603.5,-659 603.5,-659 725.5,-659 725.5,-659 731.5,-659 737.5,-665 737.5,-671 737.5,-671 737.5,-683 737.5,-683 737.5,-689 731.5,-695 725.5,-695"/>
<text text-anchor="middle" x="664.5" y="-673.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose_raft_command</text>
</g>
<!-- handle_msgs&#45;&gt;propose_raft_command -->
<g id="edge19" class="edge">
<title>handle_msgs&#45;&gt;propose_raft_command</title>
<path fill="none" stroke="#666666" d="M336.02,-729.24C397.94,-724.52 481.24,-716.54 554,-704 564.71,-702.15 575.92,-699.84 586.92,-697.34"/>
<polygon fill="#666666" stroke="#666666" points="587.99,-700.69 596.94,-695.01 586.4,-693.87 587.99,-700.69"/>
</g>
<!-- propose_batch_raft_command&#45;&gt;propose_raft_command -->
<g id="edge20" class="edge">
<title>propose_batch_raft_command&#45;&gt;propose_raft_command</title>
<path fill="none" stroke="#666666" d="M554.12,-677C563.2,-677 572.38,-677 581.37,-677"/>
<polygon fill="#666666" stroke="#666666" points="581.42,-680.5 591.42,-677 581.42,-673.5 581.42,-680.5"/>
</g>
<!-- batch_req_builder_build -->
<g id="node19" class="node">
<title>batch_req_builder_build</title>
<path fill="none" stroke="#1c2123" d="M727,-641C727,-641 602,-641 602,-641 596,-641 590,-635 590,-629 590,-629 590,-617 590,-617 590,-611 596,-605 602,-605 602,-605 727,-605 727,-605 733,-605 739,-611 739,-617 739,-617 739,-629 739,-629 739,-635 733,-641 727,-641"/>
<text text-anchor="middle" x="664.5" y="-619.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">batch_req_builder_build</text>
</g>
<!-- propose_batch_raft_command&#45;&gt;batch_req_builder_build -->
<g id="edge21" class="edge">
<title>propose_batch_raft_command&#45;&gt;batch_req_builder_build</title>
<path fill="none" stroke="#666666" d="M530.71,-658.94C548.76,-654.06 568.44,-648.73 586.98,-643.71"/>
<polygon fill="#666666" stroke="#666666" points="588.12,-647.03 596.85,-641.04 586.29,-640.27 588.12,-647.03"/>
</g>
<!-- propose_raft_command&#45;&gt;invoke_with_response -->
<g id="edge22" class="edge">
<title>propose_raft_command&#45;&gt;invoke_with_response</title>
<path fill="none" stroke="#666666" d="M730.22,-658.94C733.51,-656.35 736.49,-653.39 739,-650 805.48,-560.2 701.42,-238.46 767,-148 828.83,-62.71 956.09,-39.97 1039.06,-34.61"/>
<polygon fill="#666666" stroke="#666666" points="1039.42,-38.09 1049.2,-34.02 1039.02,-31.1 1039.42,-38.09"/>
</g>
<!-- propose_raft_command&#45;&gt;propose -->
<g id="edge23" class="edge">
<title>propose_raft_command&#45;&gt;propose</title>
<path fill="none" stroke="#666666" d="M728.33,-658.92C732.23,-656.33 735.84,-653.38 739,-650 752.51,-635.57 824.98,-369.47 852.71,-266.35"/>
<polygon fill="#666666" stroke="#666666" points="856.11,-267.17 855.32,-256.61 849.35,-265.36 856.11,-267.17"/>
</g>
<!-- pre_propose_raft_command -->
<g id="node20" class="node">
<title>pre_propose_raft_command</title>
<path fill="none" stroke="#1c2123" d="M791.5,-587C791.5,-587 937.5,-587 937.5,-587 943.5,-587 949.5,-593 949.5,-599 949.5,-599 949.5,-621 949.5,-621 949.5,-627 943.5,-633 937.5,-633 937.5,-633 791.5,-633 791.5,-633 785.5,-633 779.5,-627 779.5,-621 779.5,-621 779.5,-599 779.5,-599 779.5,-593 785.5,-587 791.5,-587"/>
<text text-anchor="middle" x="864.5" y="-617.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pre_propose_raft_command</text>
<polyline fill="none" stroke="#1c2123" points="779.5,-610 949.5,-610 "/>
<text text-anchor="start" x="787.5" y="-594.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">做一些检查</text>
</g>
<!-- propose_raft_command&#45;&gt;pre_propose_raft_command -->
<g id="edge24" class="edge">
<title>propose_raft_command&#45;&gt;pre_propose_raft_command</title>
<path fill="none" stroke="#666666" d="M718.82,-658.96C739.47,-651.97 763.51,-643.84 785.99,-636.23"/>
<polygon fill="#666666" stroke="#666666" points="787.17,-639.52 795.52,-633 784.93,-632.89 787.17,-639.52"/>
</g>
<!-- check_merge_proposal -->
<g id="node21" class="node">
<title>check_merge_proposal</title>
<path fill="none" stroke="#1c2123" d="M924,-688C924,-688 805,-688 805,-688 799,-688 793,-682 793,-676 793,-676 793,-664 793,-664 793,-658 799,-652 805,-652 805,-652 924,-652 924,-652 930,-652 936,-658 936,-664 936,-664 936,-676 936,-676 936,-682 930,-688 924,-688"/>
<text text-anchor="middle" x="864.5" y="-666.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">check_merge_proposal</text>
</g>
<!-- propose_raft_command&#45;&gt;check_merge_proposal -->
<g id="edge25" class="edge">
<title>propose_raft_command&#45;&gt;check_merge_proposal</title>
<path fill="none" stroke="#666666" d="M737.54,-674.45C752.19,-673.94 767.68,-673.39 782.61,-672.86"/>
<polygon fill="#666666" stroke="#666666" points="782.97,-676.35 792.84,-672.5 782.72,-669.35 782.97,-676.35"/>
</g>
<!-- reset_raft_tick -->
<g id="node22" class="node">
<title>reset_raft_tick</title>
<path fill="none" stroke="#1c2123" d="M900,-742C900,-742 829,-742 829,-742 823,-742 817,-736 817,-730 817,-730 817,-718 817,-718 817,-712 823,-706 829,-706 829,-706 900,-706 900,-706 906,-706 912,-712 912,-718 912,-718 912,-730 912,-730 912,-736 906,-742 900,-742"/>
<text text-anchor="middle" x="864.5" y="-720.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">reset_raft_tick</text>
</g>
<!-- propose_raft_command&#45;&gt;reset_raft_tick -->
<g id="edge26" class="edge">
<title>propose_raft_command&#45;&gt;reset_raft_tick</title>
<path fill="none" stroke="#666666" d="M737.54,-694.1C760.36,-699.52 785.24,-705.42 806.82,-710.54"/>
<polygon fill="#666666" stroke="#666666" points="806.26,-714.01 816.8,-712.91 807.88,-707.2 806.26,-714.01"/>
</g>
<!-- register_pd_heartbeat_tick -->
<g id="node23" class="node">
<title>register_pd_heartbeat_tick</title>
<path fill="none" stroke="#1c2123" d="M933,-796C933,-796 796,-796 796,-796 790,-796 784,-790 784,-784 784,-784 784,-772 784,-772 784,-766 790,-760 796,-760 796,-760 933,-760 933,-760 939,-760 945,-766 945,-772 945,-772 945,-784 945,-784 945,-790 939,-796 933,-796"/>
<text text-anchor="middle" x="864.5" y="-774.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">register_pd_heartbeat_tick</text>
</g>
<!-- propose_raft_command&#45;&gt;register_pd_heartbeat_tick -->
<g id="edge27" class="edge">
<title>propose_raft_command&#45;&gt;register_pd_heartbeat_tick</title>
<path fill="none" stroke="#666666" d="M685.85,-695.26C705.39,-711.93 736.39,-736.16 767,-751 770.98,-752.93 775.13,-754.74 779.36,-756.44"/>
<polygon fill="#666666" stroke="#666666" points="778.15,-759.73 788.74,-759.99 780.62,-753.18 778.15,-759.73"/>
</g>
<!-- collect_ready -->
<g id="node24" class="node">
<title>collect_ready</title>
<path fill="none" stroke="#1c2123" d="M183,-587C183,-587 303,-587 303,-587 309,-587 315,-593 315,-599 315,-599 315,-681 315,-681 315,-687 309,-693 303,-693 303,-693 183,-693 183,-693 177,-693 171,-687 171,-681 171,-681 171,-599 171,-599 171,-593 177,-587 183,-587"/>
<text text-anchor="middle" x="243" y="-677.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">collect_ready</text>
<polyline fill="none" stroke="#1c2123" points="171,-670 315,-670 "/>
<text text-anchor="start" x="179" y="-654.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">收集raft group的ready</text>
<text text-anchor="start" x="179" y="-639.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 这样根据ready中的</text>
<text text-anchor="start" x="179" y="-624.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> commited entries信息</text>
<text text-anchor="start" x="179" y="-609.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 就能回调callback的</text>
<text text-anchor="start" x="179" y="-594.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> invoke_committed了</text>
</g>
<!-- handle_normal -->
<g id="node25" class="node">
<title>handle_normal</title>
<path fill="none" stroke="#1c2123" d="M102,-705C102,-705 28,-705 28,-705 22,-705 16,-699 16,-693 16,-693 16,-681 16,-681 16,-675 22,-669 28,-669 28,-669 102,-669 102,-669 108,-669 114,-675 114,-681 114,-681 114,-693 114,-693 114,-699 108,-705 102,-705"/>
<text text-anchor="middle" x="65" y="-683.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_normal</text>
</g>
<!-- handle_normal&#45;&gt;handle_msgs -->
<g id="edge28" class="edge">
<title>handle_normal&#45;&gt;handle_msgs</title>
<path fill="none" stroke="#666666" d="M114.09,-700.12C124.59,-702.98 136.05,-706.1 147.65,-709.27"/>
<polygon fill="#666666" stroke="#666666" points="146.85,-712.68 157.42,-711.93 148.69,-705.92 146.85,-712.68"/>
</g>
<!-- handle_normal&#45;&gt;collect_ready -->
<g id="edge29" class="edge">
<title>handle_normal&#45;&gt;collect_ready</title>
<path fill="none" stroke="#666666" d="M114.09,-674.16C128.59,-670.29 144.92,-665.92 160.94,-661.65"/>
<polygon fill="#666666" stroke="#666666" points="162.1,-664.96 170.86,-659 160.29,-658.2 162.1,-664.96"/>
</g>
</g>
</svg>
