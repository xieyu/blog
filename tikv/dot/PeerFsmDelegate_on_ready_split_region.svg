<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: on_ready_split_region Pages: 1 -->
<svg width="1199pt" height="1252pt"
 viewBox="0.00 0.00 1199.00 1252.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1248)">
<title>on_ready_split_region</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1248 1195,-1248 1195,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_RaftRouter</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M757.5,-152C757.5,-152 1144.5,-152 1144.5,-152 1150.5,-152 1156.5,-158 1156.5,-164 1156.5,-164 1156.5,-278 1156.5,-278 1156.5,-284 1150.5,-290 1144.5,-290 1144.5,-290 757.5,-290 757.5,-290 751.5,-290 745.5,-284 745.5,-278 745.5,-278 745.5,-164 745.5,-164 745.5,-158 751.5,-152 757.5,-152"/>
<text text-anchor="middle" x="951" y="-270" font-family="Times,serif" font-size="20.00">RaftRouter</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Peer</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M800.5,-8C800.5,-8 861.5,-8 861.5,-8 867.5,-8 873.5,-14 873.5,-20 873.5,-20 873.5,-132 873.5,-132 873.5,-138 867.5,-144 861.5,-144 861.5,-144 800.5,-144 800.5,-144 794.5,-144 788.5,-138 788.5,-132 788.5,-132 788.5,-20 788.5,-20 788.5,-14 794.5,-8 800.5,-8"/>
<text text-anchor="middle" x="831" y="-124" font-family="Times,serif" font-size="20.00">Peer</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_PeerFsmDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-300C20,-300 1171,-300 1171,-300 1177,-300 1183,-306 1183,-312 1183,-312 1183,-1224 1183,-1224 1183,-1230 1177,-1236 1171,-1236 1171,-1236 20,-1236 20,-1236 14,-1236 8,-1230 8,-1224 8,-1224 8,-312 8,-312 8,-306 14,-300 20,-300"/>
<text text-anchor="middle" x="595.5" y="-1216" font-family="Times,serif" font-size="20.00">PeerFsmDelegate</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_is_leader</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M678,-354C678,-354 1163,-354 1163,-354 1169,-354 1175,-360 1175,-366 1175,-366 1175,-558 1175,-558 1175,-564 1169,-570 1163,-570 1163,-570 678,-570 678,-570 672,-570 666,-564 666,-558 666,-558 666,-366 666,-366 666,-360 672,-354 678,-354"/>
<text text-anchor="middle" x="920.5" y="-550" font-family="Times,serif" font-size="20.00">is_leader</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_RaftRs</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1064.5,-1054C1064.5,-1054 1126.5,-1054 1126.5,-1054 1132.5,-1054 1138.5,-1060 1138.5,-1066 1138.5,-1066 1138.5,-1124 1138.5,-1124 1138.5,-1130 1132.5,-1136 1126.5,-1136 1126.5,-1136 1064.5,-1136 1064.5,-1136 1058.5,-1136 1052.5,-1130 1052.5,-1124 1052.5,-1124 1052.5,-1066 1052.5,-1066 1052.5,-1060 1058.5,-1054 1064.5,-1054"/>
<text text-anchor="middle" x="1095.5" y="-1116" font-family="Times,serif" font-size="20.00">RaftRs</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_new_peer</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M729,-578C729,-578 1126,-578 1126,-578 1132,-578 1138,-584 1138,-590 1138,-590 1138,-1034 1138,-1034 1138,-1040 1132,-1046 1126,-1046 1126,-1046 729,-1046 729,-1046 723,-1046 717,-1040 717,-1034 717,-1034 717,-590 717,-590 717,-584 723,-578 729,-578"/>
<text text-anchor="middle" x="927.5" y="-1026" font-family="Times,serif" font-size="20.00">new_peer</text>
</g>
<!-- router_register -->
<g id="node1" class="node">
<title>router_register</title>
<path fill="none" stroke="#1c2123" d="M1054.5,-182.5C1054.5,-182.5 1136.5,-182.5 1136.5,-182.5 1142.5,-182.5 1148.5,-188.5 1148.5,-194.5 1148.5,-194.5 1148.5,-239.5 1148.5,-239.5 1148.5,-245.5 1142.5,-251.5 1136.5,-251.5 1136.5,-251.5 1054.5,-251.5 1054.5,-251.5 1048.5,-251.5 1042.5,-245.5 1042.5,-239.5 1042.5,-239.5 1042.5,-194.5 1042.5,-194.5 1042.5,-188.5 1048.5,-182.5 1054.5,-182.5"/>
<text text-anchor="middle" x="1095.5" y="-236.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">router_register</text>
<polyline fill="none" stroke="#1c2123" points="1042.5,-228.5 1148.5,-228.5 "/>
<text text-anchor="middle" x="1095.5" y="-213.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">注册到router中</text>
<polyline fill="none" stroke="#1c2123" points="1042.5,-205.5 1148.5,-205.5 "/>
<text text-anchor="middle" x="1095.5" y="-190.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">插入到normals</text>
</g>
<!-- router_force_send_PeerMsg_Start -->
<g id="node2" class="node">
<title>router_force_send_PeerMsg_Start</title>
<path fill="none" stroke="#1c2123" d="M765.5,-160.5C765.5,-160.5 896.5,-160.5 896.5,-160.5 902.5,-160.5 908.5,-166.5 908.5,-172.5 908.5,-172.5 908.5,-239.5 908.5,-239.5 908.5,-245.5 902.5,-251.5 896.5,-251.5 896.5,-251.5 765.5,-251.5 765.5,-251.5 759.5,-251.5 753.5,-245.5 753.5,-239.5 753.5,-239.5 753.5,-172.5 753.5,-172.5 753.5,-166.5 759.5,-160.5 765.5,-160.5"/>
<text text-anchor="start" x="761.5" y="-236.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">router::force_send(</text>
<text text-anchor="start" x="761.5" y="-221.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> new_region_id,</text>
<text text-anchor="middle" x="831" y="-206.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> PeerMsg::Start)</text>
<polyline fill="none" stroke="#1c2123" points="753.5,-198.5 908.5,-198.5 "/>
<text text-anchor="start" x="761.5" y="-183.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">向新的region_id</text>
<text text-anchor="start" x="761.5" y="-168.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送PeerMsg Start消息</text>
</g>
<!-- post_split -->
<g id="node3" class="node">
<title>post_split</title>
<path fill="none" stroke="#1c2123" d="M853.5,-106C853.5,-106 808.5,-106 808.5,-106 802.5,-106 796.5,-100 796.5,-94 796.5,-94 796.5,-82 796.5,-82 796.5,-76 802.5,-70 808.5,-70 808.5,-70 853.5,-70 853.5,-70 859.5,-70 865.5,-76 865.5,-82 865.5,-82 865.5,-94 865.5,-94 865.5,-100 859.5,-106 853.5,-106"/>
<text text-anchor="middle" x="831" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">post_split</text>
</g>
<!-- is_leader -->
<g id="node4" class="node">
<title>is_leader</title>
<path fill="none" stroke="#1c2123" d="M851.5,-52C851.5,-52 810.5,-52 810.5,-52 804.5,-52 798.5,-46 798.5,-40 798.5,-40 798.5,-28 798.5,-28 798.5,-22 804.5,-16 810.5,-16 810.5,-16 851.5,-16 851.5,-16 857.5,-16 863.5,-22 863.5,-28 863.5,-28 863.5,-40 863.5,-40 863.5,-46 857.5,-52 851.5,-52"/>
<text text-anchor="middle" x="831" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">is_leader</text>
</g>
<!-- handle_msgs -->
<g id="node5" class="node">
<title>handle_msgs</title>
<path fill="none" stroke="#1c2123" d="M92,-622C92,-622 28,-622 28,-622 22,-622 16,-616 16,-610 16,-610 16,-598 16,-598 16,-592 22,-586 28,-586 28,-586 92,-586 92,-586 98,-586 104,-592 104,-598 104,-598 104,-610 104,-610 104,-616 98,-622 92,-622"/>
<text text-anchor="middle" x="60" y="-600.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_msgs</text>
</g>
<!-- on_apply_res -->
<g id="node6" class="node">
<title>on_apply_res</title>
<path fill="none" stroke="#1c2123" d="M152,-581C152,-581 312,-581 312,-581 318,-581 324,-587 324,-593 324,-593 324,-615 324,-615 324,-621 318,-627 312,-627 312,-627 152,-627 152,-627 146,-627 140,-621 140,-615 140,-615 140,-593 140,-593 140,-587 146,-581 152,-581"/>
<text text-anchor="middle" x="232" y="-611.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_apply_res</text>
<polyline fill="none" stroke="#1c2123" points="140,-604 324,-604 "/>
<text text-anchor="start" x="148" y="-588.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理PeerMsg::ApplyRes消息</text>
</g>
<!-- handle_msgs&#45;&gt;on_apply_res -->
<g id="edge1" class="edge">
<title>handle_msgs&#45;&gt;on_apply_res</title>
<path fill="none" stroke="#666666" d="M104.34,-604C112.27,-604 120.85,-604 129.67,-604"/>
<polygon fill="#666666" stroke="#666666" points="129.71,-607.5 139.71,-604 129.71,-600.5 129.71,-607.5"/>
</g>
<!-- on_ready_result -->
<g id="node7" class="node">
<title>on_ready_result</title>
<path fill="none" stroke="#1c2123" d="M452,-622C452,-622 372,-622 372,-622 366,-622 360,-616 360,-610 360,-610 360,-598 360,-598 360,-592 366,-586 372,-586 372,-586 452,-586 452,-586 458,-586 464,-592 464,-598 464,-598 464,-610 464,-610 464,-616 458,-622 452,-622"/>
<text text-anchor="middle" x="412" y="-600.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_ready_result</text>
</g>
<!-- on_apply_res&#45;&gt;on_ready_result -->
<g id="edge2" class="edge">
<title>on_apply_res&#45;&gt;on_ready_result</title>
<path fill="none" stroke="#666666" d="M324.09,-604C332.75,-604 341.38,-604 349.66,-604"/>
<polygon fill="#666666" stroke="#666666" points="349.93,-607.5 359.93,-604 349.93,-600.5 349.93,-607.5"/>
</g>
<!-- on_ready_split_region -->
<g id="node8" class="node">
<title>on_ready_split_region</title>
<path fill="none" stroke="#1c2123" d="M626,-622C626,-622 512,-622 512,-622 506,-622 500,-616 500,-610 500,-610 500,-598 500,-598 500,-592 506,-586 512,-586 512,-586 626,-586 626,-586 632,-586 638,-592 638,-598 638,-598 638,-610 638,-610 638,-616 632,-622 626,-622"/>
<text text-anchor="middle" x="569" y="-600.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_ready_split_region</text>
</g>
<!-- on_ready_result&#45;&gt;on_ready_split_region -->
<g id="edge3" class="edge">
<title>on_ready_result&#45;&gt;on_ready_split_region</title>
<path fill="none" stroke="#666666" d="M464.18,-604C472.36,-604 480.98,-604 489.61,-604"/>
<polygon fill="#666666" stroke="#666666" points="489.73,-607.5 499.73,-604 489.73,-600.5 489.73,-607.5"/>
</g>
<!-- on_ready_split_region&#45;&gt;router_register -->
<g id="edge4" class="edge">
<title>on_ready_split_region&#45;&gt;router_register</title>
<path fill="none" stroke="#666666" d="M574.5,-585.83C590.2,-523.05 642.86,-318.16 666,-299 721.49,-253.04 918.27,-279.15 988,-261 1002.93,-257.11 1018.53,-251.58 1033.04,-245.74"/>
<polygon fill="#666666" stroke="#666666" points="1034.49,-248.92 1042.4,-241.87 1031.82,-242.45 1034.49,-248.92"/>
</g>
<!-- on_ready_split_region&#45;&gt;router_force_send_PeerMsg_Start -->
<g id="edge5" class="edge">
<title>on_ready_split_region&#45;&gt;router_force_send_PeerMsg_Start</title>
<path fill="none" stroke="#666666" d="M574.95,-585.72C593.8,-516.24 660.31,-272.13 666,-266 686.39,-244.04 715.49,-230.09 743.52,-221.25"/>
<polygon fill="#666666" stroke="#666666" points="744.79,-224.52 753.38,-218.32 742.8,-217.81 744.79,-224.52"/>
</g>
<!-- on_ready_split_region&#45;&gt;post_split -->
<g id="edge6" class="edge">
<title>on_ready_split_region&#45;&gt;post_split</title>
<path fill="none" stroke="#666666" d="M575.76,-585.93C588.64,-544.91 620.05,-441.49 638,-353 647.14,-307.94 637.16,-183.81 666,-148 695.11,-111.85 748.06,-97.48 785.92,-91.76"/>
<polygon fill="#666666" stroke="#666666" points="786.73,-95.19 796.17,-90.37 785.79,-88.25 786.73,-95.19"/>
</g>
<!-- on_ready_split_region&#45;&gt;is_leader -->
<g id="edge7" class="edge">
<title>on_ready_split_region&#45;&gt;is_leader</title>
<path fill="none" stroke="#666666" d="M576.02,-585.98C589.42,-545.06 621.83,-441.83 638,-353 649.68,-288.87 621.49,-108.62 666,-61 696.62,-28.24 750.49,-25.3 788.11,-28.05"/>
<polygon fill="#666666" stroke="#666666" points="787.98,-31.56 798.25,-28.96 788.6,-24.58 787.98,-31.56"/>
</g>
<!-- register_split_region_check_tick -->
<g id="node9" class="node">
<title>register_split_region_check_tick</title>
<path fill="none" stroke="#1c2123" d="M916,-1144C916,-1144 746,-1144 746,-1144 740,-1144 734,-1138 734,-1132 734,-1132 734,-1120 734,-1120 734,-1114 740,-1108 746,-1108 746,-1108 916,-1108 916,-1108 922,-1108 928,-1114 928,-1120 928,-1120 928,-1132 928,-1132 928,-1138 922,-1144 916,-1144"/>
<text text-anchor="middle" x="831" y="-1122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">register_split_region_check_tick</text>
</g>
<!-- on_ready_split_region&#45;&gt;register_split_region_check_tick -->
<g id="edge8" class="edge">
<title>on_ready_split_region&#45;&gt;register_split_region_check_tick</title>
<path fill="none" stroke="#666666" d="M570.83,-622.07C574.92,-702.93 595.7,-1030.66 666,-1099 681.7,-1114.26 702.5,-1122.85 724,-1127.37"/>
<polygon fill="#666666" stroke="#666666" points="723.45,-1130.83 733.91,-1129.18 724.7,-1123.94 723.45,-1130.83"/>
</g>
<!-- set_region -->
<g id="node10" class="node">
<title>set_region</title>
<path fill="none" stroke="#1c2123" d="M855.5,-1198C855.5,-1198 806.5,-1198 806.5,-1198 800.5,-1198 794.5,-1192 794.5,-1186 794.5,-1186 794.5,-1174 794.5,-1174 794.5,-1168 800.5,-1162 806.5,-1162 806.5,-1162 855.5,-1162 855.5,-1162 861.5,-1162 867.5,-1168 867.5,-1174 867.5,-1174 867.5,-1186 867.5,-1186 867.5,-1192 861.5,-1198 855.5,-1198"/>
<text text-anchor="middle" x="831" y="-1176.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">set_region</text>
</g>
<!-- on_ready_split_region&#45;&gt;set_region -->
<g id="edge9" class="edge">
<title>on_ready_split_region&#45;&gt;set_region</title>
<path fill="none" stroke="#666666" d="M570.46,-622.25C573.04,-708.73 588.48,-1076.24 666,-1153 696.64,-1183.34 747.4,-1187.46 784.34,-1185.63"/>
<polygon fill="#666666" stroke="#666666" points="784.62,-1189.12 794.37,-1184.97 784.16,-1182.13 784.62,-1189.12"/>
</g>
<!-- heartbeat_pd -->
<g id="node11" class="node">
<title>heartbeat_pd</title>
<path fill="none" stroke="#1c2123" d="M776,-470.5C776,-470.5 886,-470.5 886,-470.5 892,-470.5 898,-476.5 898,-482.5 898,-482.5 898,-519.5 898,-519.5 898,-525.5 892,-531.5 886,-531.5 886,-531.5 776,-531.5 776,-531.5 770,-531.5 764,-525.5 764,-519.5 764,-519.5 764,-482.5 764,-482.5 764,-476.5 770,-470.5 776,-470.5"/>
<text text-anchor="middle" x="831" y="-516.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">heartbeat_pd</text>
<polyline fill="none" stroke="#1c2123" points="764,-508.5 898,-508.5 "/>
<text text-anchor="start" x="772" y="-493.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">上报PD自己以及新</text>
<text text-anchor="middle" x="831" y="-478.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Region的meta 信息</text>
</g>
<!-- on_ready_split_region&#45;&gt;heartbeat_pd -->
<g id="edge10" class="edge">
<title>on_ready_split_region&#45;&gt;heartbeat_pd</title>
<path fill="none" stroke="#666666" d="M615.59,-585.94C653.93,-570.75 709.53,-548.72 754.51,-530.91"/>
<polygon fill="#666666" stroke="#666666" points="755.92,-534.11 763.93,-527.17 753.35,-527.6 755.92,-534.11"/>
</g>
<!-- PdTask_ReportBatchSplit -->
<g id="node12" class="node">
<title>PdTask_ReportBatchSplit</title>
<path fill="none" stroke="#1c2123" d="M898,-452C898,-452 764,-452 764,-452 758,-452 752,-446 752,-440 752,-440 752,-428 752,-428 752,-422 758,-416 764,-416 764,-416 898,-416 898,-416 904,-416 910,-422 910,-428 910,-428 910,-440 910,-440 910,-446 904,-452 898,-452"/>
<text text-anchor="middle" x="831" y="-430.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PdTask_ReportBatchSplit</text>
</g>
<!-- on_ready_split_region&#45;&gt;PdTask_ReportBatchSplit -->
<g id="edge11" class="edge">
<title>on_ready_split_region&#45;&gt;PdTask_ReportBatchSplit</title>
<path fill="none" stroke="#666666" d="M576.71,-585.53C589.11,-554.27 618.71,-491.4 666,-461 688.28,-446.67 715.68,-439.15 741.65,-435.39"/>
<polygon fill="#666666" stroke="#666666" points="742.43,-438.82 751.91,-434.09 741.54,-431.88 742.43,-438.82"/>
</g>
<!-- PeerFsm_create -->
<g id="node13" class="node">
<title>PeerFsm_create</title>
<path fill="none" stroke="#1c2123" d="M782,-801C782,-801 880,-801 880,-801 886,-801 892,-807 892,-813 892,-813 892,-835 892,-835 892,-841 886,-847 880,-847 880,-847 782,-847 782,-847 776,-847 770,-841 770,-835 770,-835 770,-813 770,-813 770,-807 776,-801 782,-801"/>
<text text-anchor="middle" x="831" y="-831.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsm::create</text>
<polyline fill="none" stroke="#1c2123" points="770,-824 892,-824 "/>
<text text-anchor="start" x="778" y="-808.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建新的PeerFsm</text>
</g>
<!-- on_ready_split_region&#45;&gt;PeerFsm_create -->
<g id="edge12" class="edge">
<title>on_ready_split_region&#45;&gt;PeerFsm_create</title>
<path fill="none" stroke="#666666" d="M573.69,-622.14C582.44,-660.2 608.19,-748.45 666,-792 692.66,-812.08 728.48,-820.58 759.84,-823.84"/>
<polygon fill="#666666" stroke="#666666" points="759.58,-827.34 769.85,-824.73 760.2,-820.36 759.58,-827.34"/>
</g>
<!-- insert_peer_cache -->
<g id="node14" class="node">
<title>insert_peer_cache</title>
<path fill="none" stroke="#1c2123" d="M737,-866C737,-866 925,-866 925,-866 931,-866 937,-872 937,-878 937,-878 937,-900 937,-900 937,-906 931,-912 925,-912 925,-912 737,-912 737,-912 731,-912 725,-906 725,-900 725,-900 725,-878 725,-878 725,-872 731,-866 737,-866"/>
<text text-anchor="middle" x="831" y="-896.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">insert_peer_cache</text>
<polyline fill="none" stroke="#1c2123" points="725,-889 937,-889 "/>
<text text-anchor="start" x="733" y="-873.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将region的peer 插入到PeerFsm中</text>
</g>
<!-- on_ready_split_region&#45;&gt;insert_peer_cache -->
<g id="edge13" class="edge">
<title>on_ready_split_region&#45;&gt;insert_peer_cache</title>
<path fill="none" stroke="#666666" d="M571.09,-622.05C574.93,-668.81 592.01,-794.62 666,-857 680.04,-868.83 697.15,-876.77 714.97,-882.02"/>
<polygon fill="#666666" stroke="#666666" points="714.36,-885.48 724.93,-884.66 716.16,-878.71 714.36,-885.48"/>
</g>
<!-- maybe_campaign -->
<g id="node15" class="node">
<title>maybe_campaign</title>
<path fill="none" stroke="#1c2123" d="M749,-931C749,-931 913,-931 913,-931 919,-931 925,-937 925,-943 925,-943 925,-995 925,-995 925,-1001 919,-1007 913,-1007 913,-1007 749,-1007 749,-1007 743,-1007 737,-1001 737,-995 737,-995 737,-943 737,-943 737,-937 743,-931 749,-931"/>
<text text-anchor="middle" x="831" y="-991.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_campaign</text>
<polyline fill="none" stroke="#1c2123" points="737,-984 925,-984 "/>
<text text-anchor="start" x="745" y="-968.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果parent_is_leader</text>
<text text-anchor="start" x="745" y="-953.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 就调用raft_group的campaign</text>
<text text-anchor="start" x="745" y="-938.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 开始选举</text>
</g>
<!-- on_ready_split_region&#45;&gt;maybe_campaign -->
<g id="edge14" class="edge">
<title>on_ready_split_region&#45;&gt;maybe_campaign</title>
<path fill="none" stroke="#666666" d="M569.82,-622.1C570.32,-675.94 579.35,-836.57 666,-922 682.7,-938.47 704.76,-949.24 727.27,-956.28"/>
<polygon fill="#666666" stroke="#666666" points="726.35,-959.65 736.93,-959.07 728.29,-952.93 726.35,-959.65"/>
</g>
<!-- new_peer_heartbeat_pd -->
<g id="node16" class="node">
<title>new_peer_heartbeat_pd</title>
<path fill="none" stroke="#1c2123" d="M752.5,-706C752.5,-706 909.5,-706 909.5,-706 915.5,-706 921.5,-712 921.5,-718 921.5,-718 921.5,-770 921.5,-770 921.5,-776 915.5,-782 909.5,-782 909.5,-782 752.5,-782 752.5,-782 746.5,-782 740.5,-776 740.5,-770 740.5,-770 740.5,-718 740.5,-718 740.5,-712 746.5,-706 752.5,-706"/>
<text text-anchor="middle" x="831" y="-766.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">new_peer_heartbeat_pd</text>
<polyline fill="none" stroke="#1c2123" points="740.5,-759 921.5,-759 "/>
<text text-anchor="start" x="748.5" y="-743.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">The new peer is likely to</text>
<text text-anchor="start" x="748.5" y="-728.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> become leaer</text>
<text text-anchor="start" x="748.5" y="-713.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> send a heartbeat immediately</text>
</g>
<!-- on_ready_split_region&#45;&gt;new_peer_heartbeat_pd -->
<g id="edge15" class="edge">
<title>on_ready_split_region&#45;&gt;new_peer_heartbeat_pd</title>
<path fill="none" stroke="#666666" d="M583.96,-622.12C601.09,-643.13 632.05,-677.37 666,-697 685.77,-708.43 708.5,-717.24 730.62,-723.97"/>
<polygon fill="#666666" stroke="#666666" points="729.81,-727.38 740.39,-726.82 731.77,-720.66 729.81,-727.38"/>
</g>
<!-- BasicMailbox_new -->
<g id="node17" class="node">
<title>BasicMailbox_new</title>
<path fill="none" stroke="#1c2123" d="M752,-641C752,-641 910,-641 910,-641 916,-641 922,-647 922,-653 922,-653 922,-675 922,-675 922,-681 916,-687 910,-687 910,-687 752,-687 752,-687 746,-687 740,-681 740,-675 740,-675 740,-653 740,-653 740,-647 746,-641 752,-641"/>
<text text-anchor="middle" x="831" y="-671.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">BasicMailbox::new</text>
<polyline fill="none" stroke="#1c2123" points="740,-664 922,-664 "/>
<text text-anchor="start" x="748" y="-648.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">给新的PeerFsm创建Mailbox</text>
</g>
<!-- on_ready_split_region&#45;&gt;BasicMailbox_new -->
<g id="edge16" class="edge">
<title>on_ready_split_region&#45;&gt;BasicMailbox_new</title>
<path fill="none" stroke="#666666" d="M631.53,-622.05C642.95,-625.19 654.81,-628.3 666,-631 686.6,-635.96 708.77,-640.77 729.95,-645.12"/>
<polygon fill="#666666" stroke="#666666" points="729.43,-648.59 739.93,-647.15 730.83,-641.73 729.43,-648.59"/>
</g>
<!-- store_meta_lock -->
<g id="node18" class="node">
<title>store_meta_lock</title>
<path fill="none" stroke="#1c2123" d="M872.5,-1090C872.5,-1090 789.5,-1090 789.5,-1090 783.5,-1090 777.5,-1084 777.5,-1078 777.5,-1078 777.5,-1066 777.5,-1066 777.5,-1060 783.5,-1054 789.5,-1054 789.5,-1054 872.5,-1054 872.5,-1054 878.5,-1054 884.5,-1060 884.5,-1066 884.5,-1066 884.5,-1078 884.5,-1078 884.5,-1084 878.5,-1090 872.5,-1090"/>
<text text-anchor="middle" x="831" y="-1068.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_meta_lock</text>
</g>
<!-- on_ready_split_region&#45;&gt;store_meta_lock -->
<g id="edge17" class="edge">
<title>on_ready_split_region&#45;&gt;store_meta_lock</title>
<path fill="none" stroke="#666666" d="M571.2,-622.1C576.6,-698.09 601.36,-990.26 666,-1050 692.67,-1074.65 732.99,-1080.32 766.98,-1079.74"/>
<polygon fill="#666666" stroke="#666666" points="767.44,-1083.23 777.31,-1079.38 767.19,-1076.23 767.44,-1083.23"/>
</g>
<!-- SplitCheckTask_GetRegionApproximateSizeAndKeys -->
<g id="node19" class="node">
<title>SplitCheckTask_GetRegionApproximateSizeAndKeys</title>
<path fill="none" stroke="#1c2123" d="M976,-398C976,-398 686,-398 686,-398 680,-398 674,-392 674,-386 674,-386 674,-374 674,-374 674,-368 680,-362 686,-362 686,-362 976,-362 976,-362 982,-362 988,-368 988,-374 988,-374 988,-386 988,-386 988,-392 982,-398 976,-398"/>
<text text-anchor="middle" x="831" y="-376.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SplitCheckTask_GetRegionApproximateSizeAndKeys</text>
</g>
<!-- on_ready_split_region&#45;&gt;SplitCheckTask_GetRegionApproximateSizeAndKeys -->
<g id="edge18" class="edge">
<title>on_ready_split_region&#45;&gt;SplitCheckTask_GetRegionApproximateSizeAndKeys</title>
<path fill="none" stroke="#666666" d="M573.13,-585.78C580.95,-546.18 605.28,-452.23 666,-407 667.65,-405.77 669.33,-404.59 671.05,-403.46"/>
<polygon fill="#666666" stroke="#666666" points="673.11,-406.3 679.88,-398.15 669.51,-400.3 673.11,-406.3"/>
</g>
<!-- init_replication_mode -->
<g id="node20" class="node">
<title>init_replication_mode</title>
<path fill="none" stroke="#1c2123" d="M887.5,-622C887.5,-622 774.5,-622 774.5,-622 768.5,-622 762.5,-616 762.5,-610 762.5,-610 762.5,-598 762.5,-598 762.5,-592 768.5,-586 774.5,-586 774.5,-586 887.5,-586 887.5,-586 893.5,-586 899.5,-592 899.5,-598 899.5,-598 899.5,-610 899.5,-610 899.5,-616 893.5,-622 887.5,-622"/>
<text text-anchor="middle" x="831" y="-600.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">init_replication_mode</text>
</g>
<!-- on_ready_split_region&#45;&gt;init_replication_mode -->
<g id="edge19" class="edge">
<title>on_ready_split_region&#45;&gt;init_replication_mode</title>
<path fill="none" stroke="#666666" d="M638.31,-604C673.24,-604 715.91,-604 752.12,-604"/>
<polygon fill="#666666" stroke="#666666" points="752.14,-607.5 762.14,-604 752.14,-600.5 752.14,-607.5"/>
</g>
<!-- meta_regions_insert -->
<g id="node21" class="node">
<title>meta_regions_insert</title>
<path fill="none" stroke="#1c2123" d="M882.5,-344C882.5,-344 779.5,-344 779.5,-344 773.5,-344 767.5,-338 767.5,-332 767.5,-332 767.5,-320 767.5,-320 767.5,-314 773.5,-308 779.5,-308 779.5,-308 882.5,-308 882.5,-308 888.5,-308 894.5,-314 894.5,-320 894.5,-320 894.5,-332 894.5,-332 894.5,-338 888.5,-344 882.5,-344"/>
<text text-anchor="middle" x="831" y="-322.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">meta_regions_insert</text>
</g>
<!-- on_ready_split_region&#45;&gt;meta_regions_insert -->
<g id="edge20" class="edge">
<title>on_ready_split_region&#45;&gt;meta_regions_insert</title>
<path fill="none" stroke="#666666" d="M570.9,-585.68C574.28,-538.25 590.33,-410.86 666,-350 691.18,-329.75 725.83,-322.64 756.8,-321.05"/>
<polygon fill="#666666" stroke="#666666" points="757.26,-324.54 767.14,-320.71 757.03,-317.54 757.26,-324.54"/>
</g>
<!-- pd_scheduler_schedule -->
<g id="node23" class="node">
<title>pd_scheduler_schedule</title>
<path fill="none" stroke="#1c2123" d="M1155,-452C1155,-452 1036,-452 1036,-452 1030,-452 1024,-446 1024,-440 1024,-440 1024,-428 1024,-428 1024,-422 1030,-416 1036,-416 1036,-416 1155,-416 1155,-416 1161,-416 1167,-422 1167,-428 1167,-428 1167,-440 1167,-440 1167,-446 1161,-452 1155,-452"/>
<text text-anchor="middle" x="1095.5" y="-430.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pd_scheduler_schedule</text>
</g>
<!-- PdTask_ReportBatchSplit&#45;&gt;pd_scheduler_schedule -->
<g id="edge22" class="edge">
<title>PdTask_ReportBatchSplit&#45;&gt;pd_scheduler_schedule</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M910.05,-427.77C942.78,-427.09 980.83,-427.08 1013.84,-427.72"/>
<polygon fill="green" stroke="green" points="1013.83,-431.22 1023.91,-427.94 1013.99,-424.22 1013.83,-431.22"/>
</g>
<!-- PdTask_ReportBatchSplit&#45;&gt;pd_scheduler_schedule -->
<g id="edge27" class="edge">
<title>PdTask_ReportBatchSplit&#45;&gt;pd_scheduler_schedule</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M910.05,-440.23C942.78,-440.91 980.83,-440.92 1013.84,-440.28"/>
<polygon fill="green" stroke="green" points="1013.99,-443.78 1023.91,-440.06 1013.83,-436.78 1013.99,-443.78"/>
</g>
<!-- new_peer -->
<g id="node26" class="node">
<title>new_peer</title>
<path fill="none" stroke="#1c2123" d="M1118,-842C1118,-842 1073,-842 1073,-842 1067,-842 1061,-836 1061,-830 1061,-830 1061,-818 1061,-818 1061,-812 1067,-806 1073,-806 1073,-806 1118,-806 1118,-806 1124,-806 1130,-812 1130,-818 1130,-818 1130,-830 1130,-830 1130,-836 1124,-842 1118,-842"/>
<text text-anchor="middle" x="1095.5" y="-820.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">new_peer</text>
</g>
<!-- PeerFsm_create&#45;&gt;new_peer -->
<g id="edge24" class="edge">
<title>PeerFsm_create&#45;&gt;new_peer</title>
<path fill="none" stroke="#666666" d="M892.22,-824C940.47,-824 1007.03,-824 1050.41,-824"/>
<polygon fill="#666666" stroke="#666666" points="1050.65,-827.5 1060.65,-824 1050.65,-820.5 1050.65,-827.5"/>
</g>
<!-- campaign -->
<g id="node25" class="node">
<title>campaign</title>
<path fill="none" stroke="#1c2123" d="M1118.5,-1098C1118.5,-1098 1072.5,-1098 1072.5,-1098 1066.5,-1098 1060.5,-1092 1060.5,-1086 1060.5,-1086 1060.5,-1074 1060.5,-1074 1060.5,-1068 1066.5,-1062 1072.5,-1062 1072.5,-1062 1118.5,-1062 1118.5,-1062 1124.5,-1062 1130.5,-1068 1130.5,-1074 1130.5,-1074 1130.5,-1086 1130.5,-1086 1130.5,-1092 1124.5,-1098 1118.5,-1098"/>
<text text-anchor="middle" x="1095.5" y="-1076.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">campaign</text>
</g>
<!-- maybe_campaign&#45;&gt;campaign -->
<g id="edge25" class="edge">
<title>maybe_campaign&#45;&gt;campaign</title>
<path fill="none" stroke="#666666" d="M925.31,-985.86C946.83,-992.11 968.97,-1000.58 988,-1012 1007.95,-1023.97 1004.9,-1036.72 1024,-1050 1032.27,-1055.75 1041.82,-1060.72 1051.17,-1064.88"/>
<polygon fill="#666666" stroke="#666666" points="1049.82,-1068.11 1060.39,-1068.76 1052.53,-1061.65 1049.82,-1068.11"/>
</g>
<!-- BasicMailbox_new&#45;&gt;router_register -->
<g id="edge26" class="edge">
<title>BasicMailbox_new&#45;&gt;router_register</title>
<path fill="none" stroke="#666666" d="M922,-663.55C946.55,-658.94 971.02,-649.42 988,-631 1030.68,-584.72 1004.95,-410 1024,-350 1034.05,-318.36 1051.48,-285.37 1066.5,-260.17"/>
<polygon fill="#666666" stroke="#666666" points="1069.5,-261.96 1071.69,-251.59 1063.52,-258.33 1069.5,-261.96"/>
</g>
<!-- split_check_scheduler -->
<g id="node24" class="node">
<title>split_check_scheduler</title>
<path fill="none" stroke="#1c2123" d="M1152,-398C1152,-398 1039,-398 1039,-398 1033,-398 1027,-392 1027,-386 1027,-386 1027,-374 1027,-374 1027,-368 1033,-362 1039,-362 1039,-362 1152,-362 1152,-362 1158,-362 1164,-368 1164,-374 1164,-374 1164,-386 1164,-386 1164,-392 1158,-398 1152,-398"/>
<text text-anchor="middle" x="1095.5" y="-376.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">split_check_scheduler</text>
</g>
<!-- SplitCheckTask_GetRegionApproximateSizeAndKeys&#45;&gt;split_check_scheduler -->
<g id="edge23" class="edge">
<title>SplitCheckTask_GetRegionApproximateSizeAndKeys&#45;&gt;split_check_scheduler</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M988.11,-380C997.87,-380 1007.44,-380 1016.59,-380"/>
<polygon fill="green" stroke="green" points="1016.73,-383.5 1026.73,-380 1016.73,-376.5 1016.73,-383.5"/>
</g>
<!-- store_meta -->
<g id="node22" class="node">
<title>store_meta</title>
<path fill="none" stroke="#1c2123" d="M595.5,-344C595.5,-344 542.5,-344 542.5,-344 536.5,-344 530.5,-338 530.5,-332 530.5,-332 530.5,-320 530.5,-320 530.5,-314 536.5,-308 542.5,-308 542.5,-308 595.5,-308 595.5,-308 601.5,-308 607.5,-314 607.5,-320 607.5,-320 607.5,-332 607.5,-332 607.5,-338 601.5,-344 595.5,-344"/>
<text text-anchor="middle" x="569" y="-322.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_meta</text>
</g>
<!-- store_meta&#45;&gt;meta_regions_insert -->
<g id="edge21" class="edge">
<title>store_meta&#45;&gt;meta_regions_insert</title>
<path fill="none" stroke="#666666" d="M607.53,-326C646.52,-326 708.53,-326 757.19,-326"/>
<polygon fill="#666666" stroke="#666666" points="757.35,-329.5 767.35,-326 757.35,-322.5 757.35,-329.5"/>
</g>
</g>
</svg>
