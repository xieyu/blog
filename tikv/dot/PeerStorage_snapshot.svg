<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: PeerStorageSnapshot Pages: 1 -->
<svg width="1614pt" height="543pt"
 viewBox="0.00 0.00 1614.00 542.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 538.5)">
<title>PeerStorageSnapshot</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-538.5 1610,-538.5 1610,4 -4,4"/>
<!-- SnapState -->
<g id="node1" class="node">
<title>SnapState</title>
<path fill="none" stroke="#1c2123" d="M762,-301C762,-301 941,-301 941,-301 947,-301 953,-307 953,-313 953,-313 953,-404 953,-404 953,-410 947,-416 941,-416 941,-416 762,-416 762,-416 756,-416 750,-410 750,-404 750,-404 750,-313 750,-313 750,-307 756,-301 762,-301"/>
<text text-anchor="middle" x="851.5" y="-400.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapState</text>
<polyline fill="none" stroke="#1c2123" points="750,-393 953,-393 "/>
<text text-anchor="start" x="758" y="-377.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Relax,</text>
<polyline fill="none" stroke="#1c2123" points="750,-370 953,-370 "/>
<text text-anchor="start" x="758" y="-354.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Generating(Receiver&lt;Snapshot&gt;),</text>
<polyline fill="none" stroke="#1c2123" points="750,-347 953,-347 "/>
<text text-anchor="start" x="758" y="-331.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Applying(Arc&lt;AtomicUsize&gt;),</text>
<polyline fill="none" stroke="#1c2123" points="750,-324 953,-324 "/>
<text text-anchor="start" x="758" y="-308.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyAborted,</text>
</g>
<!-- SnapState_Generatting -->
<g id="node4" class="node">
<title>SnapState_Generatting</title>
<path fill="none" stroke="#1c2123" d="M1001,-242C1001,-242 1108,-242 1108,-242 1114,-242 1120,-248 1120,-254 1120,-254 1120,-291 1120,-291 1120,-297 1114,-303 1108,-303 1108,-303 1001,-303 1001,-303 995,-303 989,-297 989,-291 989,-291 989,-254 989,-254 989,-248 995,-242 1001,-242"/>
<text text-anchor="start" x="997" y="-287.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapState</text>
<text text-anchor="start" x="997" y="-272.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Generatting</text>
<polyline fill="none" stroke="#1c2123" points="989,-265 1120,-265 "/>
<text text-anchor="start" x="997" y="-249.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Receiver&lt;Snapshot&gt;</text>
</g>
<!-- SnapState&#45;&gt;SnapState_Generatting -->
<g id="edge2" class="edge">
<title>SnapState:generating&#45;&gt;SnapState_Generatting</title>
<path fill="none" stroke="#666666" d="M953,-358.5C984.29,-358.5 1010.75,-334.13 1028.65,-311.34"/>
<polygon fill="#666666" stroke="#666666" points="1031.65,-313.16 1034.85,-303.06 1026.05,-308.97 1031.65,-313.16"/>
</g>
<!-- PeerStorage_snap_state_check -->
<g id="node2" class="node">
<title>PeerStorage_snap_state_check</title>
<path fill="none" stroke="#1c2123" d="M510.5,-429.5C510.5,-429.5 665.5,-429.5 665.5,-429.5 671.5,-429.5 677.5,-435.5 677.5,-441.5 677.5,-441.5 677.5,-493.5 677.5,-493.5 677.5,-499.5 671.5,-505.5 665.5,-505.5 665.5,-505.5 510.5,-505.5 510.5,-505.5 504.5,-505.5 498.5,-499.5 498.5,-493.5 498.5,-493.5 498.5,-441.5 498.5,-441.5 498.5,-435.5 504.5,-429.5 510.5,-429.5"/>
<text text-anchor="middle" x="588" y="-490.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage::snap_state</text>
<polyline fill="none" stroke="#1c2123" points="498.5,-482.5 677.5,-482.5 "/>
<text text-anchor="start" x="506.5" y="-467.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果snapstate为Generating</text>
<text text-anchor="start" x="506.5" y="-452.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> try_recv看是否已经生成好</text>
<text text-anchor="start" x="506.5" y="-437.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> snapshot</text>
</g>
<!-- PeerStorage_snap_state_check&#45;&gt;SnapState -->
<g id="edge1" class="edge">
<title>PeerStorage_snap_state_check&#45;&gt;SnapState</title>
<path fill="none" stroke="#666666" d="M677.53,-430.6C697.8,-422.15 719.58,-413.07 740.62,-404.3"/>
<polygon fill="#666666" stroke="#666666" points="742.02,-407.51 749.9,-400.43 739.32,-401.05 742.02,-407.51"/>
</g>
<!-- Receiver_try_recv -->
<g id="node5" class="node">
<title>Receiver_try_recv</title>
<path fill="none" stroke="#1c2123" d="M1168,-414C1168,-414 1390,-414 1390,-414 1396,-414 1402,-420 1402,-426 1402,-426 1402,-493 1402,-493 1402,-499 1396,-505 1390,-505 1390,-505 1168,-505 1168,-505 1162,-505 1156,-499 1156,-493 1156,-493 1156,-426 1156,-426 1156,-420 1162,-414 1168,-414"/>
<text text-anchor="start" x="1164" y="-489.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Receiver</text>
<text text-anchor="start" x="1164" y="-474.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> try_recv</text>
<polyline fill="none" stroke="#1c2123" points="1156,-467 1402,-467 "/>
<text text-anchor="start" x="1164" y="-451.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">尝试从rx读取snapshot</text>
<text text-anchor="start" x="1164" y="-436.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果是Empty</text>
<text text-anchor="start" x="1164" y="-421.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 则返回SnapshotTemporarilyUnavailable</text>
</g>
<!-- PeerStorage_snap_state_check&#45;&gt;Receiver_try_recv -->
<g id="edge13" class="edge">
<title>PeerStorage_snap_state_check&#45;&gt;Receiver_try_recv</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M677.66,-466.47C796.36,-465.09 1007.88,-462.64 1145.52,-461.04"/>
<polygon fill="green" stroke="green" points="1145.75,-464.54 1155.71,-460.92 1145.67,-457.54 1145.75,-464.54"/>
</g>
<!-- PeerStorage_snapshot -->
<g id="node3" class="node">
<title>PeerStorage_snapshot</title>
<path fill="none" stroke="#1c2123" d="M12,-298.5C12,-298.5 220,-298.5 220,-298.5 226,-298.5 232,-304.5 232,-310.5 232,-310.5 232,-362.5 232,-362.5 232,-368.5 226,-374.5 220,-374.5 220,-374.5 12,-374.5 12,-374.5 6,-374.5 0,-368.5 0,-362.5 0,-362.5 0,-310.5 0,-310.5 0,-304.5 6,-298.5 12,-298.5"/>
<text text-anchor="start" x="8" y="-359.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="8" y="-344.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> snapshot</text>
<polyline fill="none" stroke="#1c2123" points="0,-336.5 232,-336.5 "/>
<text text-anchor="start" x="8" y="-321.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果snapshot还没准备好</text>
<text text-anchor="start" x="8" y="-306.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 返回SnapshotTemporarilyUnavailable</text>
</g>
<!-- PeerStorage_snapshot&#45;&gt;PeerStorage_snap_state_check -->
<g id="edge4" class="edge">
<title>PeerStorage_snapshot&#45;&gt;PeerStorage_snap_state_check</title>
<path fill="none" stroke="#666666" d="M180.1,-374.69C206.45,-389.14 237.9,-404.5 268,-414.5 339.69,-438.31 424.14,-451.74 488.14,-459.11"/>
<polygon fill="#666666" stroke="#666666" points="487.9,-462.61 498.23,-460.24 488.68,-455.65 487.9,-462.61"/>
</g>
<!-- PeerStorage_snapshot&#45;&gt;SnapState_Generatting -->
<g id="edge5" class="edge">
<title>PeerStorage_snapshot&#45;&gt;SnapState_Generatting</title>
<path fill="none" stroke="#666666" d="M232.2,-328.02C359.05,-318.74 569.03,-303.6 750,-291.5 828.09,-286.28 917.52,-280.73 978.96,-276.99"/>
<polygon fill="#666666" stroke="#666666" points="979.19,-280.48 988.96,-276.38 978.76,-273.5 979.19,-280.48"/>
</g>
<!-- PeerStorage_snapshot&#45;&gt;Receiver_try_recv -->
<g id="edge6" class="edge">
<title>PeerStorage_snapshot&#45;&gt;Receiver_try_recv</title>
<path fill="none" stroke="#666666" d="M232.02,-352.7C413.64,-378.27 746.79,-425.17 750,-425.5 884.45,-439.26 1038.75,-448.43 1145.69,-453.75"/>
<polygon fill="#666666" stroke="#666666" points="1145.73,-457.25 1155.89,-454.25 1146.07,-450.26 1145.73,-457.25"/>
</g>
<!-- PeerStorage_validate_snap -->
<g id="node6" class="node">
<title>PeerStorage_validate_snap</title>
<path fill="none" stroke="#1c2123" d="M1450,-466C1450,-466 1594,-466 1594,-466 1600,-466 1606,-472 1606,-478 1606,-478 1606,-515 1606,-515 1606,-521 1600,-527 1594,-527 1594,-527 1450,-527 1450,-527 1444,-527 1438,-521 1438,-515 1438,-515 1438,-478 1438,-478 1438,-472 1444,-466 1450,-466"/>
<text text-anchor="start" x="1446" y="-511.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="1446" y="-496.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> validate_snap</text>
<polyline fill="none" stroke="#1c2123" points="1438,-489 1606,-489 "/>
<text text-anchor="middle" x="1522" y="-473.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">检查snap的index, epoch等</text>
</g>
<!-- PeerStorage_snapshot&#45;&gt;PeerStorage_validate_snap -->
<g id="edge7" class="edge">
<title>PeerStorage_snapshot&#45;&gt;PeerStorage_validate_snap</title>
<path fill="none" stroke="#666666" d="M162.73,-374.68C191.59,-397.43 230.4,-425.65 268,-445.5 398.16,-514.22 439.81,-534.5 587,-534.5 587,-534.5 587,-534.5 1055.5,-534.5 1209.76,-534.5 1248.58,-530.5 1402,-514.5 1410.36,-513.63 1419.04,-512.58 1427.72,-511.45"/>
<polygon fill="#666666" stroke="#666666" points="1428.46,-514.88 1437.9,-510.07 1427.52,-507.94 1428.46,-514.88"/>
</g>
<!-- MAX_SNAP_TRY_CNT -->
<g id="node7" class="node">
<title>MAX_SNAP_TRY_CNT</title>
<path fill="none" stroke="#1c2123" d="M280,-117C280,-117 414,-117 414,-117 420,-117 426,-123 426,-129 426,-129 426,-166 426,-166 426,-172 420,-178 414,-178 414,-178 280,-178 280,-178 274,-178 268,-172 268,-166 268,-166 268,-129 268,-129 268,-123 274,-117 280,-117"/>
<text text-anchor="middle" x="347" y="-162.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">MAX_SNAP_TRY_CNT</text>
<polyline fill="none" stroke="#1c2123" points="268,-155 426,-155 "/>
<text text-anchor="start" x="276" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果超过了这个次数</text>
<text text-anchor="start" x="276" y="-124.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 就返回错误</text>
</g>
<!-- PeerStorage_snapshot&#45;&gt;MAX_SNAP_TRY_CNT -->
<g id="edge8" class="edge">
<title>PeerStorage_snapshot&#45;&gt;MAX_SNAP_TRY_CNT</title>
<path fill="none" stroke="#666666" d="M150.05,-298.39C179.01,-266.46 223.35,-221.03 268,-188.5 270.32,-186.81 272.72,-185.15 275.17,-183.52"/>
<polygon fill="#666666" stroke="#666666" points="277.12,-186.43 283.68,-178.11 273.36,-180.52 277.12,-186.43"/>
</g>
<!-- GenSnapTask_new -->
<g id="node8" class="node">
<title>GenSnapTask_new</title>
<path fill="none" stroke="#1c2123" d="M284.5,-197.5C284.5,-197.5 409.5,-197.5 409.5,-197.5 415.5,-197.5 421.5,-203.5 421.5,-209.5 421.5,-209.5 421.5,-231.5 421.5,-231.5 421.5,-237.5 415.5,-243.5 409.5,-243.5 409.5,-243.5 284.5,-243.5 284.5,-243.5 278.5,-243.5 272.5,-237.5 272.5,-231.5 272.5,-231.5 272.5,-209.5 272.5,-209.5 272.5,-203.5 278.5,-197.5 284.5,-197.5"/>
<text text-anchor="middle" x="347" y="-228.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">GenSnapTask::new</text>
<polyline fill="none" stroke="#1c2123" points="272.5,-220.5 421.5,-220.5 "/>
<text text-anchor="start" x="280.5" y="-205.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建一个GenSnapTask</text>
</g>
<!-- PeerStorage_snapshot&#45;&gt;GenSnapTask_new -->
<g id="edge9" class="edge">
<title>PeerStorage_snapshot&#45;&gt;GenSnapTask_new</title>
<path fill="none" stroke="#666666" d="M189.79,-298.46C214.54,-285.64 242.42,-271.34 268,-258.5 274.66,-255.16 281.67,-251.68 288.63,-248.26"/>
<polygon fill="#666666" stroke="#666666" points="290.62,-251.18 298.06,-243.63 287.54,-244.89 290.62,-251.18"/>
</g>
<!-- SnapState_Generatting&#45;&gt;Receiver_try_recv -->
<g id="edge3" class="edge">
<title>SnapState_Generatting&#45;&gt;Receiver_try_recv</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1092.24,-303.38C1125.8,-331.58 1176.1,-373.85 1215.89,-407.3"/>
<polygon fill="green" stroke="green" points="1213.8,-410.11 1223.7,-413.87 1218.3,-404.75 1213.8,-410.11"/>
</g>
<!-- Receiver_try_recv&#45;&gt;PeerStorage_validate_snap -->
<g id="edge14" class="edge">
<title>Receiver_try_recv&#45;&gt;PeerStorage_validate_snap</title>
<path fill="none" stroke="#666666" d="M1402.27,-478.27C1410.8,-479.58 1419.32,-480.89 1427.65,-482.17"/>
<polygon fill="#666666" stroke="#666666" points="1427.31,-485.66 1437.72,-483.71 1428.37,-478.74 1427.31,-485.66"/>
</g>
<!-- channel -->
<g id="node9" class="node">
<title>channel</title>
<path fill="#feed9b" stroke="#f7e495" d="M834,-197.5C834,-197.5 869,-197.5 869,-197.5 875,-197.5 881,-203.5 881,-209.5 881,-209.5 881,-231.5 881,-231.5 881,-237.5 875,-243.5 869,-243.5 869,-243.5 834,-243.5 834,-243.5 828,-243.5 822,-237.5 822,-231.5 822,-231.5 822,-209.5 822,-209.5 822,-203.5 828,-197.5 834,-197.5"/>
<text text-anchor="middle" x="851.5" y="-228.3" font-family="Times,serif" font-size="14.00" fill="#40575d">channel</text>
<polyline fill="none" stroke="#f7e495" points="822,-220.5 881,-220.5 "/>
<text text-anchor="middle" x="836.5" y="-205.3" font-family="Times,serif" font-size="14.00" fill="#40575d">tx</text>
<polyline fill="none" stroke="#f7e495" points="851,-197.5 851,-220.5 "/>
<text text-anchor="middle" x="866" y="-205.3" font-family="Times,serif" font-size="14.00" fill="#40575d">rx</text>
</g>
<!-- GenSnapTask_new&#45;&gt;channel -->
<g id="edge10" class="edge">
<title>GenSnapTask_new&#45;&gt;channel</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M421.61,-220.5C529.84,-220.5 728.11,-220.5 811.7,-220.5"/>
<polygon fill="green" stroke="green" points="811.78,-224 821.78,-220.5 811.78,-217 811.78,-224"/>
</g>
<!-- PeerStorage_gen_snap_task -->
<g id="node10" class="node">
<title>PeerStorage_gen_snap_task</title>
<path fill="none" stroke="#1c2123" d="M474,-48C474,-48 702,-48 702,-48 708,-48 714,-54 714,-60 714,-60 714,-151 714,-151 714,-157 708,-163 702,-163 702,-163 474,-163 474,-163 468,-163 462,-157 462,-151 462,-151 462,-60 462,-60 462,-54 468,-48 474,-48"/>
<text text-anchor="middle" x="588" y="-147.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage::gen_snap_task</text>
<polyline fill="none" stroke="#1c2123" points="462,-140 714,-140 "/>
<text text-anchor="start" x="470" y="-124.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">GenSnapTask</text>
<polyline fill="none" stroke="#1c2123" points="462,-117 714,-117 "/>
<text text-anchor="start" x="470" y="-101.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub(crate) region_id: u64,</text>
<polyline fill="none" stroke="#1c2123" points="462,-94 714,-94 "/>
<text text-anchor="start" x="470" y="-78.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">snap_notifier: SyncSender&lt;RaftSnapshot&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="462,-71 714,-71 "/>
<text text-anchor="start" x="470" y="-55.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">for_balance: bool,</text>
</g>
<!-- GenSnapTask_new&#45;&gt;PeerStorage_gen_snap_task -->
<g id="edge12" class="edge">
<title>GenSnapTask_new&#45;&gt;PeerStorage_gen_snap_task</title>
<path fill="none" stroke="#666666" d="M404.03,-197.36C411.45,-194.13 418.93,-190.79 426,-187.5 439.53,-181.2 453.59,-174.41 467.52,-167.53"/>
<polygon fill="#666666" stroke="#666666" points="469.25,-170.58 476.65,-163 466.13,-164.31 469.25,-170.58"/>
</g>
<!-- channel&#45;&gt;SnapState_Generatting -->
<g id="edge11" class="edge">
<title>channel&#45;&gt;SnapState_Generatting</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M881.3,-227.95C906.69,-234.52 944.82,-244.38 978.75,-253.16"/>
<polygon fill="green" stroke="green" points="978.11,-256.61 988.66,-255.73 979.86,-249.83 978.11,-256.61"/>
</g>
<!-- ApplyRouter_schedule_task_ApplyTask_Snapshot -->
<g id="node13" class="node">
<title>ApplyRouter_schedule_task_ApplyTask_Snapshot</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M780,-45C780,-45 923,-45 923,-45 929,-45 935,-51 935,-57 935,-57 935,-154 935,-154 935,-160 929,-166 923,-166 923,-166 780,-166 780,-166 774,-166 768,-160 768,-154 768,-154 768,-57 768,-57 768,-51 774,-45 780,-45"/>
<text text-anchor="start" x="776" y="-150.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ApplyRouter</text>
<text text-anchor="start" x="776" y="-135.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> schedule</text>
<text text-anchor="start" x="776" y="-120.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> task::ApplyTask::Snapshot</text>
<polyline fill="none" stroke="#8a8898" points="768,-113 935,-113 "/>
<text text-anchor="start" x="776" y="-97.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">使用ApplyRouter</text>
<text text-anchor="start" x="776" y="-82.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 将task发送给ApplyFsm</text>
<text text-anchor="start" x="776" y="-67.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> ApplyFsm生成完后</text>
<text text-anchor="start" x="776" y="-52.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 使用tx通知rx</text>
</g>
<!-- PeerStorage_gen_snap_task&#45;&gt;ApplyRouter_schedule_task_ApplyTask_Snapshot -->
<g id="edge19" class="edge">
<title>PeerStorage_gen_snap_task&#45;&gt;ApplyRouter_schedule_task_ApplyTask_Snapshot</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M714.01,-105.5C728.69,-105.5 743.48,-105.5 757.62,-105.5"/>
<polygon fill="green" stroke="green" points="757.79,-109 767.79,-105.5 757.79,-102 757.79,-109"/>
</g>
<!-- Peer_handle_raft_ready_append -->
<g id="node11" class="node">
<title>Peer_handle_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M38.5,-0.5C38.5,-0.5 193.5,-0.5 193.5,-0.5 199.5,-0.5 205.5,-6.5 205.5,-12.5 205.5,-12.5 205.5,-64.5 205.5,-64.5 205.5,-70.5 199.5,-76.5 193.5,-76.5 193.5,-76.5 38.5,-76.5 38.5,-76.5 32.5,-76.5 26.5,-70.5 26.5,-64.5 26.5,-64.5 26.5,-12.5 26.5,-12.5 26.5,-6.5 32.5,-0.5 38.5,-0.5"/>
<text text-anchor="start" x="34.5" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="34.5" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_ready_append</text>
<polyline fill="none" stroke="#1c2123" points="26.5,-38.5 205.5,-38.5 "/>
<text text-anchor="start" x="34.5" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理pending的GenSnapTask</text>
<text text-anchor="start" x="34.5" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送给ApplyFsm</text>
</g>
<!-- PeerStorage_take_gen_snap_task -->
<g id="node12" class="node">
<title>PeerStorage_take_gen_snap_task</title>
<path fill="none" stroke="#1c2123" d="M294.5,-37C294.5,-37 399.5,-37 399.5,-37 405.5,-37 411.5,-43 411.5,-49 411.5,-49 411.5,-86 411.5,-86 411.5,-92 405.5,-98 399.5,-98 399.5,-98 294.5,-98 294.5,-98 288.5,-98 282.5,-92 282.5,-86 282.5,-86 282.5,-49 282.5,-49 282.5,-43 288.5,-37 294.5,-37"/>
<text text-anchor="start" x="290.5" y="-82.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="290.5" y="-67.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> take_gen_snap_task</text>
<polyline fill="none" stroke="#1c2123" points="282.5,-60 411.5,-60 "/>
<text text-anchor="start" x="290.5" y="-44.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">获取GenSnapTask</text>
</g>
<!-- Peer_handle_raft_ready_append&#45;&gt;PeerStorage_take_gen_snap_task -->
<g id="edge16" class="edge">
<title>Peer_handle_raft_ready_append&#45;&gt;PeerStorage_take_gen_snap_task</title>
<path fill="none" stroke="#666666" d="M205.54,-49.71C227.59,-52.51 251.01,-55.47 272.26,-58.16"/>
<polygon fill="#666666" stroke="#666666" points="271.83,-61.63 282.19,-59.42 272.71,-54.69 271.83,-61.63"/>
</g>
<!-- Peer_handle_raft_ready_append&#45;&gt;ApplyRouter_schedule_task_ApplyTask_Snapshot -->
<g id="edge17" class="edge">
<title>Peer_handle_raft_ready_append&#45;&gt;ApplyRouter_schedule_task_ApplyTask_Snapshot</title>
<path fill="none" stroke="#666666" d="M205.66,-25.17C323.73,-10.41 538.14,5.89 714,-38.5 728.8,-42.24 743.88,-47.7 758.36,-53.93"/>
<polygon fill="#666666" stroke="#666666" points="757.22,-57.25 767.78,-58.12 760.07,-50.86 757.22,-57.25"/>
</g>
<!-- PeerStorage_take_gen_snap_task&#45;&gt;PeerStorage_gen_snap_task -->
<g id="edge18" class="edge">
<title>PeerStorage_take_gen_snap_task&#45;&gt;PeerStorage_gen_snap_task</title>
<path fill="none" stroke="#666666" d="M411.73,-77.63C424.2,-79.61 437.7,-81.76 451.5,-83.96"/>
<polygon fill="#666666" stroke="#666666" points="451.16,-87.45 461.58,-85.56 452.26,-80.53 451.16,-87.45"/>
</g>
<!-- ApplyRouter_schedule_task_ApplyTask_Snapshot&#45;&gt;SnapState_Generatting -->
<g id="edge15" class="edge">
<title>ApplyRouter_schedule_task_ApplyTask_Snapshot&#45;&gt;SnapState_Generatting</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M926.09,-166.19C935.16,-173.7 944.3,-181.27 953,-188.5 971.35,-203.75 991.55,-220.61 1008.99,-235.2"/>
<polygon fill="green" stroke="green" points="1006.87,-237.99 1016.79,-241.73 1011.37,-232.63 1006.87,-237.99"/>
</g>
</g>
</svg>
