<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: PointerGetter_get Pages: 1 -->
<svg width="2043pt" height="676pt"
 viewBox="0.00 0.00 2043.00 676.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 672)">
<title>PointerGetter_get</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-672 2039,-672 2039,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_PointGetter</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-8C20,-8 2015,-8 2015,-8 2021,-8 2027,-14 2027,-20 2027,-20 2027,-648 2027,-648 2027,-654 2021,-660 2015,-660 2015,-660 20,-660 20,-660 14,-660 8,-654 8,-648 8,-648 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="1017.5" y="-640" font-family="Times,serif" font-size="20.00">PointGetter</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_loop</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M739,-280C739,-280 1875,-280 1875,-280 1881,-280 1887,-286 1887,-292 1887,-292 1887,-610 1887,-610 1887,-616 1881,-622 1875,-622 1875,-622 739,-622 739,-622 733,-622 727,-616 727,-610 727,-610 727,-292 727,-292 727,-286 733,-280 739,-280"/>
<text text-anchor="middle" x="1307" y="-602" font-family="Times,serif" font-size="20.00">loop: 从write中找到可见的start_ts</text>
</g>
<!-- get -->
<g id="node1" class="node">
<title>get</title>
<path fill="none" stroke="#1c2123" d="M58,-170C58,-170 28,-170 28,-170 22,-170 16,-164 16,-158 16,-158 16,-146 16,-146 16,-140 22,-134 28,-134 28,-134 58,-134 58,-134 64,-134 70,-140 70,-146 70,-146 70,-158 70,-158 70,-164 64,-170 58,-170"/>
<text text-anchor="middle" x="43" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get</text>
</g>
<!-- load_and_check_lock -->
<g id="node2" class="node">
<title>load_and_check_lock</title>
<path fill="none" stroke="#1c2123" d="M118,-38.5C118,-38.5 334,-38.5 334,-38.5 340,-38.5 346,-44.5 346,-50.5 346,-50.5 346,-125.5 346,-125.5 346,-131.5 340,-137.5 334,-137.5 334,-137.5 118,-137.5 118,-137.5 112,-137.5 106,-131.5 106,-125.5 106,-125.5 106,-50.5 106,-50.5 106,-44.5 112,-38.5 118,-38.5"/>
<text text-anchor="middle" x="226" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">load_and_check_lock</text>
<polyline fill="none" stroke="#1c2123" points="106,-114.5 346,-114.5 "/>
<text text-anchor="start" x="114" y="-99.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">IsolationLevel::Si的需要检查lock</text>
<polyline fill="none" stroke="#1c2123" points="106,-91.5 346,-91.5 "/>
<text text-anchor="start" x="114" y="-76.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Get a lock of a user key in the lock CF</text>
<text text-anchor="start" x="114" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> if lock exists, ti will be checked to</text>
<text text-anchor="start" x="114" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> see whether it conflicts with the given ts</text>
</g>
<!-- get&#45;&gt;load_and_check_lock -->
<g id="edge1" class="edge">
<title>get&#45;&gt;load_and_check_lock</title>
<path fill="none" stroke="#666666" d="M70.32,-142.69C77.89,-140.02 86.7,-136.9 96.2,-133.54"/>
<polygon fill="#666666" stroke="#666666" points="97.65,-136.74 105.91,-130.11 95.32,-130.14 97.65,-136.74"/>
</g>
<!-- load_data -->
<g id="node3" class="node">
<title>load_data</title>
<path fill="none" stroke="#1c2123" d="M172,-164C172,-164 280,-164 280,-164 286,-164 292,-170 292,-176 292,-176 292,-258 292,-258 292,-264 286,-270 280,-270 280,-270 172,-270 172,-270 166,-270 160,-264 160,-258 160,-258 160,-176 160,-176 160,-170 166,-164 172,-164"/>
<text text-anchor="middle" x="226" y="-254.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">load_data</text>
<polyline fill="none" stroke="#1c2123" points="160,-247 292,-247 "/>
<text text-anchor="start" x="168" y="-231.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">先从write column中</text>
<text text-anchor="start" x="168" y="-216.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 获取key的start_ts</text>
<text text-anchor="start" x="168" y="-201.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后从data column</text>
<text text-anchor="start" x="168" y="-186.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 中获取key start_ts</text>
<text text-anchor="start" x="168" y="-171.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 对应的value</text>
</g>
<!-- get&#45;&gt;load_data -->
<g id="edge2" class="edge">
<title>get&#45;&gt;load_data</title>
<path fill="none" stroke="#666666" d="M70.32,-161.45C91.37,-169.01 121.97,-180 150.41,-190.21"/>
<polygon fill="#666666" stroke="#666666" points="149.36,-193.55 159.95,-193.64 151.72,-186.97 149.36,-193.55"/>
</g>
<!-- snapshot_get_cf_CF_LOCK -->
<g id="node22" class="node">
<title>snapshot_get_cf_CF_LOCK</title>
<path fill="none" stroke="#1c2123" d="M425,-37C425,-37 628,-37 628,-37 634,-37 640,-43 640,-49 640,-49 640,-71 640,-71 640,-77 634,-83 628,-83 628,-83 425,-83 425,-83 419,-83 413,-77 413,-71 413,-71 413,-49 413,-49 413,-43 419,-37 425,-37"/>
<text text-anchor="start" x="421" y="-67.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">snapshot.get_cf(CF_LOCK, user_key)</text>
<polyline fill="none" stroke="#1c2123" points="413,-60 640,-60 "/>
<text text-anchor="start" x="421" y="-44.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">从CF_LOCK 中加载user_key的lock</text>
</g>
<!-- load_and_check_lock&#45;&gt;snapshot_get_cf_CF_LOCK -->
<g id="edge39" class="edge">
<title>load_and_check_lock&#45;&gt;snapshot_get_cf_CF_LOCK</title>
<path fill="none" stroke="#666666" d="M346.26,-76.81C364.84,-75.07 384.07,-73.27 402.73,-71.52"/>
<polygon fill="#666666" stroke="#666666" points="403.1,-75 412.73,-70.58 402.45,-68.03 403.1,-75"/>
</g>
<!-- Lock_parse -->
<g id="node23" class="node">
<title>Lock_parse</title>
<path fill="none" stroke="#1c2123" d="M719,-17C719,-17 866,-17 866,-17 872,-17 878,-23 878,-29 878,-29 878,-51 878,-51 878,-57 872,-63 866,-63 866,-63 719,-63 719,-63 713,-63 707,-57 707,-51 707,-51 707,-29 707,-29 707,-23 713,-17 719,-17"/>
<text text-anchor="middle" x="792.5" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock::parse</text>
<polyline fill="none" stroke="#1c2123" points="707,-40 878,-40 "/>
<text text-anchor="start" x="715" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">从data中de serialize出Lock</text>
</g>
<!-- load_and_check_lock&#45;&gt;Lock_parse -->
<g id="edge40" class="edge">
<title>load_and_check_lock&#45;&gt;Lock_parse</title>
<path fill="none" stroke="#666666" d="M338.55,-38.45C352.93,-33.74 367.65,-29.72 382,-27 488.44,-6.81 613.18,-15.25 696.76,-25.39"/>
<polygon fill="#666666" stroke="#666666" points="696.39,-28.87 706.75,-26.64 697.26,-21.93 696.39,-28.87"/>
</g>
<!-- check_ts_conflict -->
<g id="node24" class="node">
<title>check_ts_conflict</title>
<path fill="none" stroke="#1c2123" d="M926,-27C926,-27 1074,-27 1074,-27 1080,-27 1086,-33 1086,-39 1086,-39 1086,-61 1086,-61 1086,-67 1080,-73 1074,-73 1074,-73 926,-73 926,-73 920,-73 914,-67 914,-61 914,-61 914,-39 914,-39 914,-33 920,-27 926,-27"/>
<text text-anchor="middle" x="1000" y="-57.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">check_ts_conflict</text>
<polyline fill="none" stroke="#1c2123" points="914,-50 1086,-50 "/>
<text text-anchor="start" x="922" y="-34.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">检查ts是否和lock的ts冲突</text>
</g>
<!-- load_and_check_lock&#45;&gt;check_ts_conflict -->
<g id="edge41" class="edge">
<title>load_and_check_lock&#45;&gt;check_ts_conflict</title>
<path fill="none" stroke="#666666" d="M346.31,-92.24C358.36,-92.55 370.42,-92.81 382,-93 602.59,-96.56 659.6,-104.24 878,-73 886.46,-71.79 895.23,-70.4 904,-68.91"/>
<polygon fill="#666666" stroke="#666666" points="904.63,-72.35 913.89,-67.19 903.44,-65.45 904.63,-72.35"/>
</g>
<!-- is_user_key_eq -->
<g id="node4" class="node">
<title>is_user_key_eq</title>
<path fill="none" stroke="#1c2123" d="M1212,-332C1212,-332 1135,-332 1135,-332 1129,-332 1123,-326 1123,-320 1123,-320 1123,-308 1123,-308 1123,-302 1129,-296 1135,-296 1135,-296 1212,-296 1212,-296 1218,-296 1224,-302 1224,-308 1224,-308 1224,-320 1224,-320 1224,-326 1218,-332 1212,-332"/>
<text text-anchor="middle" x="1173.5" y="-310.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">is_user_key_eq</text>
</g>
<!-- load_data&#45;&gt;is_user_key_eq -->
<g id="edge24" class="edge">
<title>load_data&#45;&gt;is_user_key_eq</title>
<path fill="none" stroke="#666666" d="M249.09,-270.12C273.41,-320.99 317.77,-394.89 382,-429 479.37,-480.71 768.24,-451.46 878,-441 971.71,-432.07 1007.59,-453.09 1086,-401 1110.03,-385.04 1101.51,-367.3 1122,-347 1125.18,-343.85 1128.71,-340.83 1132.38,-337.98"/>
<polygon fill="#666666" stroke="#666666" points="1134.52,-340.75 1140.57,-332.05 1130.42,-335.08 1134.52,-340.75"/>
</g>
<!-- write_cursor_next -->
<g id="node5" class="node">
<title>write_cursor_next</title>
<path fill="none" stroke="#1c2123" d="M838,-432C838,-432 747,-432 747,-432 741,-432 735,-426 735,-420 735,-420 735,-408 735,-408 735,-402 741,-396 747,-396 747,-396 838,-396 838,-396 844,-396 850,-402 850,-408 850,-408 850,-420 850,-420 850,-426 844,-432 838,-432"/>
<text text-anchor="middle" x="792.5" y="-410.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_cursor_next</text>
</g>
<!-- load_data&#45;&gt;write_cursor_next -->
<g id="edge25" class="edge">
<title>load_data&#45;&gt;write_cursor_next</title>
<path fill="none" stroke="#666666" d="M251.14,-270.18C276.21,-318.24 320.42,-385.91 382,-416 440.44,-444.55 624.52,-431.27 724.8,-421.37"/>
<polygon fill="#666666" stroke="#666666" points="725.22,-424.84 734.82,-420.36 724.53,-417.88 725.22,-424.84"/>
</g>
<!-- write_cursor_key -->
<g id="node6" class="node">
<title>write_cursor_key</title>
<path fill="none" stroke="#1c2123" d="M1043.5,-327C1043.5,-327 956.5,-327 956.5,-327 950.5,-327 944.5,-321 944.5,-315 944.5,-315 944.5,-303 944.5,-303 944.5,-297 950.5,-291 956.5,-291 956.5,-291 1043.5,-291 1043.5,-291 1049.5,-291 1055.5,-297 1055.5,-303 1055.5,-303 1055.5,-315 1055.5,-315 1055.5,-321 1049.5,-327 1043.5,-327"/>
<text text-anchor="middle" x="1000" y="-305.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_cursor_key</text>
</g>
<!-- load_data&#45;&gt;write_cursor_key -->
<g id="edge26" class="edge">
<title>load_data&#45;&gt;write_cursor_key</title>
<path fill="none" stroke="#666666" d="M292.18,-208.91C319.85,-205.61 352.48,-201.89 382,-199 436.92,-193.62 833.49,-140.38 878,-173 920.86,-204.41 875.45,-250.43 914,-287 919.97,-292.67 927.21,-296.92 934.92,-300.11"/>
<polygon fill="#666666" stroke="#666666" points="933.9,-303.46 944.49,-303.49 936.23,-296.86 933.9,-303.46"/>
</g>
<!-- write_cursor_value -->
<g id="node7" class="node">
<title>write_cursor_value</title>
<path fill="none" stroke="#1c2123" d="M1048.5,-392C1048.5,-392 951.5,-392 951.5,-392 945.5,-392 939.5,-386 939.5,-380 939.5,-380 939.5,-368 939.5,-368 939.5,-362 945.5,-356 951.5,-356 951.5,-356 1048.5,-356 1048.5,-356 1054.5,-356 1060.5,-362 1060.5,-368 1060.5,-368 1060.5,-380 1060.5,-380 1060.5,-386 1054.5,-392 1048.5,-392"/>
<text text-anchor="middle" x="1000" y="-370.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_cursor_value</text>
</g>
<!-- load_data&#45;&gt;write_cursor_value -->
<g id="edge27" class="edge">
<title>load_data&#45;&gt;write_cursor_value</title>
<path fill="none" stroke="#666666" d="M254.46,-270.17C280.58,-314.38 324.43,-374.22 382,-401 411.12,-414.54 639.44,-406.92 671,-401 687.87,-397.83 690.2,-390.54 707,-387 747.76,-378.41 856.33,-375.49 928.98,-374.5"/>
<polygon fill="#666666" stroke="#666666" points="929.47,-378 939.42,-374.37 929.38,-371 929.47,-378"/>
</g>
<!-- WriteRef_parse -->
<g id="node8" class="node">
<title>WriteRef_parse</title>
<path fill="none" stroke="#1c2123" d="M1134,-356C1134,-356 1213,-356 1213,-356 1219,-356 1225,-362 1225,-368 1225,-368 1225,-390 1225,-390 1225,-396 1219,-402 1213,-402 1213,-402 1134,-402 1134,-402 1128,-402 1122,-396 1122,-390 1122,-390 1122,-368 1122,-368 1122,-362 1128,-356 1134,-356"/>
<text text-anchor="middle" x="1173.5" y="-386.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteRef::parse</text>
<polyline fill="none" stroke="#1c2123" points="1122,-379 1225,-379 "/>
<text text-anchor="middle" x="1173.5" y="-363.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> </text>
</g>
<!-- load_data&#45;&gt;WriteRef_parse -->
<g id="edge28" class="edge">
<title>load_data&#45;&gt;WriteRef_parse</title>
<path fill="none" stroke="#666666" d="M245.57,-270.2C268.19,-325.84 312.24,-410.24 382,-448 657.34,-597.01 787.54,-518.54 1086,-424 1099.51,-419.72 1113.42,-413.43 1126.04,-406.9"/>
<polygon fill="#666666" stroke="#666666" points="1127.81,-409.93 1134.98,-402.13 1124.51,-403.75 1127.81,-409.93"/>
</g>
<!-- check_gc_fence_as_latest_version -->
<g id="node9" class="node">
<title>check_gc_fence_as_latest_version</title>
<path fill="none" stroke="#1c2123" d="M1452,-397C1452,-397 1273,-397 1273,-397 1267,-397 1261,-391 1261,-385 1261,-385 1261,-373 1261,-373 1261,-367 1267,-361 1273,-361 1273,-361 1452,-361 1452,-361 1458,-361 1464,-367 1464,-373 1464,-373 1464,-385 1464,-385 1464,-391 1458,-397 1452,-397"/>
<text text-anchor="middle" x="1362.5" y="-375.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">check_gc_fence_as_latest_version</text>
</g>
<!-- load_data&#45;&gt;check_gc_fence_as_latest_version -->
<g id="edge29" class="edge">
<title>load_data&#45;&gt;check_gc_fence_as_latest_version</title>
<path fill="none" stroke="#666666" d="M292.01,-192.06C319.37,-182.72 351.81,-173.13 382,-168 436.34,-158.76 823.75,-148.24 878,-158 1039.94,-187.13 1100.27,-179.69 1225,-287 1250.03,-308.54 1234.99,-331.66 1261,-352 1262.6,-353.25 1264.26,-354.45 1265.96,-355.59"/>
<polygon fill="#666666" stroke="#666666" points="1264.41,-358.74 1274.8,-360.83 1267.98,-352.72 1264.41,-358.74"/>
</g>
<!-- write_type -->
<g id="node11" class="node">
<title>write_type</title>
<path fill="none" stroke="#1c2123" d="M1387.5,-343C1387.5,-343 1337.5,-343 1337.5,-343 1331.5,-343 1325.5,-337 1325.5,-331 1325.5,-331 1325.5,-319 1325.5,-319 1325.5,-313 1331.5,-307 1337.5,-307 1337.5,-307 1387.5,-307 1387.5,-307 1393.5,-307 1399.5,-313 1399.5,-319 1399.5,-319 1399.5,-331 1399.5,-331 1399.5,-337 1393.5,-343 1387.5,-343"/>
<text text-anchor="middle" x="1362.5" y="-321.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_type</text>
</g>
<!-- load_data&#45;&gt;write_type -->
<g id="edge30" class="edge">
<title>load_data&#45;&gt;write_type</title>
<path fill="none" stroke="#666666" d="M292.04,-187.22C319.27,-176.09 351.6,-164.56 382,-158 427.79,-148.12 1188.51,-108.62 1225,-138 1283.46,-185.08 1207.94,-249.91 1261,-303 1275.13,-317.14 1296.1,-323.12 1315.24,-325.37"/>
<polygon fill="#666666" stroke="#666666" points="1315.07,-328.87 1325.33,-326.25 1315.68,-321.9 1315.07,-328.87"/>
</g>
<!-- load_data_from_default_cf -->
<g id="node16" class="node">
<title>load_data_from_default_cf</title>
<path fill="none" stroke="#1c2123" d="M1867,-471C1867,-471 1727,-471 1727,-471 1721,-471 1715,-465 1715,-459 1715,-459 1715,-447 1715,-447 1715,-441 1721,-435 1727,-435 1727,-435 1867,-435 1867,-435 1873,-435 1879,-441 1879,-447 1879,-447 1879,-459 1879,-459 1879,-465 1873,-471 1867,-471"/>
<text text-anchor="middle" x="1797" y="-449.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">load_data_from_default_cf</text>
</g>
<!-- load_data&#45;&gt;load_data_from_default_cf -->
<g id="edge31" class="edge">
<title>load_data&#45;&gt;load_data_from_default_cf</title>
<path fill="none" stroke="#666666" d="M292.24,-174.37C318.97,-159.12 350.89,-143.58 382,-135 514.35,-98.48 861.7,-103 999,-103 999,-103 999,-103 1363.5,-103 1524.06,-103 1581.69,-151.28 1679,-279 1719.76,-332.5 1669.42,-376.54 1715,-426 1715.78,-426.84 1716.58,-427.66 1717.41,-428.46"/>
<polygon fill="#666666" stroke="#666666" points="1715.5,-431.41 1725.49,-434.92 1719.87,-425.94 1715.5,-431.41"/>
</g>
<!-- write_cursor_seek -->
<g id="node18" class="node">
<title>write_cursor_seek</title>
<path fill="none" stroke="#1c2123" d="M838.5,-272C838.5,-272 746.5,-272 746.5,-272 740.5,-272 734.5,-266 734.5,-260 734.5,-260 734.5,-248 734.5,-248 734.5,-242 740.5,-236 746.5,-236 746.5,-236 838.5,-236 838.5,-236 844.5,-236 850.5,-242 850.5,-248 850.5,-248 850.5,-260 850.5,-260 850.5,-266 844.5,-272 838.5,-272"/>
<text text-anchor="middle" x="792.5" y="-250.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_cursor_seek</text>
</g>
<!-- load_data&#45;&gt;write_cursor_seek -->
<g id="edge32" class="edge">
<title>load_data&#45;&gt;write_cursor_seek</title>
<path fill="none" stroke="#666666" d="M292.27,-261.73C318.87,-277.4 350.7,-293.06 382,-301 444.25,-316.78 609.71,-320.19 671,-301 689.59,-295.18 689.3,-284.14 707,-276 712.6,-273.42 718.56,-271.11 724.62,-269.04"/>
<polygon fill="#666666" stroke="#666666" points="725.72,-272.37 734.18,-265.99 723.59,-265.7 725.72,-272.37"/>
</g>
<!-- write_cursor_near_seek -->
<g id="node19" class="node">
<title>write_cursor_near_seek</title>
<path fill="none" stroke="#1c2123" d="M853.5,-218C853.5,-218 731.5,-218 731.5,-218 725.5,-218 719.5,-212 719.5,-206 719.5,-206 719.5,-194 719.5,-194 719.5,-188 725.5,-182 731.5,-182 731.5,-182 853.5,-182 853.5,-182 859.5,-182 865.5,-188 865.5,-194 865.5,-194 865.5,-206 865.5,-206 865.5,-212 859.5,-218 853.5,-218"/>
<text text-anchor="middle" x="792.5" y="-196.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_cursor_near_seek</text>
</g>
<!-- load_data&#45;&gt;write_cursor_near_seek -->
<g id="edge33" class="edge">
<title>load_data&#45;&gt;write_cursor_near_seek</title>
<path fill="none" stroke="#666666" d="M292.03,-215.04C395.07,-211.94 595.72,-205.9 708.83,-202.49"/>
<polygon fill="#666666" stroke="#666666" points="709.27,-205.98 719.16,-202.18 709.06,-198.98 709.27,-205.98"/>
</g>
<!-- append_ts -->
<g id="node20" class="node">
<title>append_ts</title>
<path fill="none" stroke="#1c2123" d="M402.5,-222.5C402.5,-222.5 650.5,-222.5 650.5,-222.5 656.5,-222.5 662.5,-228.5 662.5,-234.5 662.5,-234.5 662.5,-279.5 662.5,-279.5 662.5,-285.5 656.5,-291.5 650.5,-291.5 650.5,-291.5 402.5,-291.5 402.5,-291.5 396.5,-291.5 390.5,-285.5 390.5,-279.5 390.5,-279.5 390.5,-234.5 390.5,-234.5 390.5,-228.5 396.5,-222.5 402.5,-222.5"/>
<text text-anchor="middle" x="526.5" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">append_ts</text>
<polyline fill="none" stroke="#1c2123" points="390.5,-268.5 662.5,-268.5 "/>
<text text-anchor="start" x="398.5" y="-253.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">seek_key = user_key.clone().append_ts(self.ts)</text>
<polyline fill="none" stroke="#1c2123" points="390.5,-245.5 662.5,-245.5 "/>
<text text-anchor="start" x="398.5" y="-230.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">从[0,ts] seek key的Write</text>
</g>
<!-- load_data&#45;&gt;append_ts -->
<g id="edge34" class="edge">
<title>load_data&#45;&gt;append_ts</title>
<path fill="none" stroke="#666666" d="M292.14,-225.73C318.22,-229.22 349.39,-233.4 380.33,-237.55"/>
<polygon fill="#666666" stroke="#666666" points="379.98,-241.03 390.36,-238.89 380.91,-234.09 379.98,-241.03"/>
</g>
<!-- write_cursor_next&#45;&gt;write_cursor_key -->
<g id="edge18" class="edge">
<title>write_cursor_next&#45;&gt;write_cursor_key</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M850.18,-404.63C859.92,-401.54 869.61,-397.44 878,-392 899.49,-378.06 893.74,-362.67 914,-347 921.5,-341.2 930.02,-336.07 938.7,-331.59"/>
<polygon fill="green" stroke="green" points="940.32,-334.7 947.78,-327.17 937.25,-328.41 940.32,-334.7"/>
</g>
<!-- write_cursor_next&#45;&gt;write_cursor_value -->
<g id="edge19" class="edge">
<title>write_cursor_next&#45;&gt;write_cursor_value</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M850.2,-402.96C874.63,-398.21 903.45,-392.6 929.19,-387.59"/>
<polygon fill="green" stroke="green" points="930.11,-390.97 939.26,-385.63 928.77,-384.1 930.11,-390.97"/>
</g>
<!-- write_cursor_key&#45;&gt;is_user_key_eq -->
<g id="edge3" class="edge">
<title>write_cursor_key&#45;&gt;is_user_key_eq</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1055.74,-310.6C1073.93,-311.13 1094.28,-311.72 1112.83,-312.26"/>
<polygon fill="green" stroke="green" points="1112.83,-315.76 1122.93,-312.55 1113.03,-308.76 1112.83,-315.76"/>
</g>
<!-- write_cursor_value&#45;&gt;WriteRef_parse -->
<g id="edge4" class="edge">
<title>write_cursor_value&#45;&gt;WriteRef_parse</title>
<path fill="none" stroke="#666666" d="M1060.5,-375.73C1077.09,-376.22 1095.12,-376.74 1111.77,-377.23"/>
<polygon fill="#666666" stroke="#666666" points="1111.84,-380.73 1121.94,-377.53 1112.04,-373.74 1111.84,-380.73"/>
</g>
<!-- WriteRef_parse&#45;&gt;check_gc_fence_as_latest_version -->
<g id="edge5" class="edge">
<title>WriteRef_parse&#45;&gt;check_gc_fence_as_latest_version</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1225.1,-379C1233.2,-379 1241.84,-379 1250.7,-379"/>
<polygon fill="green" stroke="green" points="1250.77,-382.5 1260.77,-379 1250.77,-375.5 1250.77,-382.5"/>
</g>
<!-- start_ts -->
<g id="node10" class="node">
<title>start_ts</title>
<path fill="none" stroke="#1c2123" d="M1378.5,-516C1378.5,-516 1346.5,-516 1346.5,-516 1340.5,-516 1334.5,-510 1334.5,-504 1334.5,-504 1334.5,-492 1334.5,-492 1334.5,-486 1340.5,-480 1346.5,-480 1346.5,-480 1378.5,-480 1378.5,-480 1384.5,-480 1390.5,-486 1390.5,-492 1390.5,-492 1390.5,-504 1390.5,-504 1390.5,-510 1384.5,-516 1378.5,-516"/>
<text text-anchor="middle" x="1362.5" y="-494.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start_ts</text>
</g>
<!-- WriteRef_parse&#45;&gt;start_ts -->
<g id="edge6" class="edge">
<title>WriteRef_parse&#45;&gt;start_ts</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1211,-402.23C1244.13,-423.31 1292.7,-454.22 1325.63,-475.17"/>
<polygon fill="green" stroke="green" points="1324.16,-478.39 1334.48,-480.81 1327.92,-472.48 1324.16,-478.39"/>
</g>
<!-- WriteRef_parse&#45;&gt;write_type -->
<g id="edge7" class="edge">
<title>WriteRef_parse&#45;&gt;write_type</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1225.17,-362.81C1236.91,-359.16 1249.37,-355.38 1261,-352 1278.69,-346.86 1298.24,-341.53 1315.36,-336.98"/>
<polygon fill="green" stroke="green" points="1316.35,-340.34 1325.12,-334.4 1314.56,-333.57 1316.35,-340.34"/>
</g>
<!-- start_ts&#45;&gt;load_data_from_default_cf -->
<g id="edge37" class="edge">
<title>start_ts&#45;&gt;load_data_from_default_cf</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1387.55,-516.16C1413.64,-534.63 1457.31,-562.04 1500,-573 1577.06,-592.78 1605.69,-603.91 1679,-573 1723.71,-554.15 1759.81,-508.94 1779.56,-479.71"/>
<polygon fill="green" stroke="green" points="1782.58,-481.48 1785.15,-471.2 1776.73,-477.64 1782.58,-481.48"/>
</g>
<!-- Put -->
<g id="node12" class="node">
<title>Put</title>
<path fill="none" stroke="#1c2123" d="M1524,-369C1524,-369 1655,-369 1655,-369 1661,-369 1667,-375 1667,-381 1667,-381 1667,-471 1667,-471 1667,-477 1661,-483 1655,-483 1655,-483 1524,-483 1524,-483 1518,-483 1512,-477 1512,-471 1512,-471 1512,-381 1512,-381 1512,-375 1518,-369 1524,-369"/>
<text text-anchor="middle" x="1589.5" y="-467.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Put</text>
<polyline fill="none" stroke="#1c2123" points="1512,-460 1667,-460 "/>
<text text-anchor="start" x="1520" y="-444.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">write type 为Put</text>
<text text-anchor="start" x="1520" y="-429.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 先如果有short_value则</text>
<text text-anchor="start" x="1520" y="-414.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 直接返回short_value</text>
<polyline fill="none" stroke="#1c2123" points="1512,-407 1667,-407 "/>
<text text-anchor="start" x="1520" y="-391.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">否则使用start_ts去</text>
<text text-anchor="start" x="1520" y="-376.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> data column读取数据</text>
</g>
<!-- write_type&#45;&gt;Put -->
<g id="edge8" class="edge">
<title>write_type&#45;&gt;Put</title>
<path fill="none" stroke="#666666" d="M1399.64,-332.18C1419.14,-336.68 1443.36,-343.29 1464,-352 1476.99,-357.48 1490.26,-364.11 1503.06,-371.12"/>
<polygon fill="#666666" stroke="#666666" points="1501.41,-374.21 1511.85,-376.03 1504.82,-368.1 1501.41,-374.21"/>
</g>
<!-- Delete -->
<g id="node13" class="node">
<title>Delete</title>
<path fill="none" stroke="#1c2123" d="M1523,-502.5C1523,-502.5 1656,-502.5 1656,-502.5 1662,-502.5 1668,-508.5 1668,-514.5 1668,-514.5 1668,-551.5 1668,-551.5 1668,-557.5 1662,-563.5 1656,-563.5 1656,-563.5 1523,-563.5 1523,-563.5 1517,-563.5 1511,-557.5 1511,-551.5 1511,-551.5 1511,-514.5 1511,-514.5 1511,-508.5 1517,-502.5 1523,-502.5"/>
<text text-anchor="middle" x="1589.5" y="-548.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Delete</text>
<polyline fill="none" stroke="#1c2123" points="1511,-540.5 1668,-540.5 "/>
<text text-anchor="start" x="1519" y="-525.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果找到的write type为</text>
<text text-anchor="start" x="1519" y="-510.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Delete 返回None</text>
</g>
<!-- write_type&#45;&gt;Delete -->
<g id="edge9" class="edge">
<title>write_type&#45;&gt;Delete</title>
<path fill="none" stroke="#666666" d="M1399.6,-325.92C1421.05,-328.38 1447.24,-335.03 1464,-352 1509.45,-398.02 1458.43,-443.45 1500,-493 1501.12,-494.33 1502.29,-495.62 1503.51,-496.87"/>
<polygon fill="#666666" stroke="#666666" points="1501.19,-499.49 1510.96,-503.58 1505.87,-494.29 1501.19,-499.49"/>
</g>
<!-- Lock_Rollback -->
<g id="node14" class="node">
<title>Lock_Rollback</title>
<path fill="none" stroke="#1c2123" d="M1512,-288.5C1512,-288.5 1667,-288.5 1667,-288.5 1673,-288.5 1679,-294.5 1679,-300.5 1679,-300.5 1679,-337.5 1679,-337.5 1679,-343.5 1673,-349.5 1667,-349.5 1667,-349.5 1512,-349.5 1512,-349.5 1506,-349.5 1500,-343.5 1500,-337.5 1500,-337.5 1500,-300.5 1500,-300.5 1500,-294.5 1506,-288.5 1512,-288.5"/>
<text text-anchor="middle" x="1589.5" y="-334.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock|Rollback</text>
<polyline fill="none" stroke="#1c2123" points="1500,-326.5 1679,-326.5 "/>
<text text-anchor="start" x="1508" y="-311.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果是Lock或者是Rollback</text>
<text text-anchor="start" x="1508" y="-296.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 继续下一次loop</text>
</g>
<!-- write_type&#45;&gt;Lock_Rollback -->
<g id="edge10" class="edge">
<title>write_type&#45;&gt;Lock_Rollback</title>
<path fill="none" stroke="#666666" d="M1399.65,-324.04C1424.09,-323.38 1457.62,-322.49 1489.66,-321.64"/>
<polygon fill="#666666" stroke="#666666" points="1490.09,-325.13 1499.99,-321.36 1489.9,-318.13 1490.09,-325.13"/>
</g>
<!-- short_value -->
<g id="node15" class="node">
<title>short_value</title>
<path fill="none" stroke="#1c2123" d="M1825,-417C1825,-417 1769,-417 1769,-417 1763,-417 1757,-411 1757,-405 1757,-405 1757,-393 1757,-393 1757,-387 1763,-381 1769,-381 1769,-381 1825,-381 1825,-381 1831,-381 1837,-387 1837,-393 1837,-393 1837,-405 1837,-405 1837,-411 1831,-417 1825,-417"/>
<text text-anchor="middle" x="1797" y="-395.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">short_value</text>
</g>
<!-- Put&#45;&gt;short_value -->
<g id="edge11" class="edge">
<title>Put&#45;&gt;short_value</title>
<path fill="none" stroke="#666666" d="M1667.02,-415.95C1693.66,-412.45 1722.82,-408.61 1746.67,-405.48"/>
<polygon fill="#666666" stroke="#666666" points="1747.42,-408.91 1756.88,-404.14 1746.51,-401.97 1747.42,-408.91"/>
</g>
<!-- Put&#45;&gt;load_data_from_default_cf -->
<g id="edge12" class="edge">
<title>Put&#45;&gt;load_data_from_default_cf</title>
<path fill="none" stroke="#666666" d="M1667.02,-436.05C1679.36,-437.67 1692.23,-439.37 1704.87,-441.03"/>
<polygon fill="#666666" stroke="#666666" points="1704.57,-444.52 1714.94,-442.35 1705.48,-437.58 1704.57,-444.52"/>
</g>
<!-- snapshot_get_cf -->
<g id="node21" class="node">
<title>snapshot_get_cf</title>
<path fill="none" stroke="#1c2123" d="M2007,-471C2007,-471 1927,-471 1927,-471 1921,-471 1915,-465 1915,-459 1915,-459 1915,-447 1915,-447 1915,-441 1921,-435 1927,-435 1927,-435 2007,-435 2007,-435 2013,-435 2019,-441 2019,-447 2019,-447 2019,-459 2019,-459 2019,-465 2013,-471 2007,-471"/>
<text text-anchor="middle" x="1967" y="-449.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">snapshot_get_cf</text>
</g>
<!-- load_data_from_default_cf&#45;&gt;snapshot_get_cf -->
<g id="edge38" class="edge">
<title>load_data_from_default_cf&#45;&gt;snapshot_get_cf</title>
<path fill="none" stroke="#666666" d="M1879.05,-453C1887.54,-453 1896.08,-453 1904.31,-453"/>
<polygon fill="#666666" stroke="#666666" points="1904.54,-456.5 1914.54,-453 1904.54,-449.5 1904.54,-456.5"/>
</g>
<!-- write_cursor -->
<g id="node17" class="node">
<title>write_cursor</title>
<path fill="#feed9b" stroke="#f7e495" d="M394,-330.5C394,-330.5 659,-330.5 659,-330.5 665,-330.5 671,-336.5 671,-342.5 671,-342.5 671,-379.5 671,-379.5 671,-385.5 665,-391.5 659,-391.5 659,-391.5 394,-391.5 394,-391.5 388,-391.5 382,-385.5 382,-379.5 382,-379.5 382,-342.5 382,-342.5 382,-336.5 388,-330.5 394,-330.5"/>
<text text-anchor="middle" x="526.5" y="-376.3" font-family="Times,serif" font-size="14.00" fill="#40575d">write_cursor</text>
<polyline fill="none" stroke="#f7e495" points="382,-368.5 671,-368.5 "/>
<text text-anchor="start" x="390" y="-353.3" font-family="Times,serif" font-size="14.00" fill="#40575d">CursorBuilder::new(&amp;self.snapshot, CF_WRITE)</text>
<text text-anchor="start" x="390" y="-338.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> ...</text>
</g>
<!-- write_cursor&#45;&gt;write_cursor_next -->
<g id="edge13" class="edge">
<title>write_cursor&#45;&gt;write_cursor_next</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M671.09,-389.83C689.82,-393.59 708.23,-397.28 724.81,-400.61"/>
<polygon fill="green" stroke="green" points="724.39,-404.1 734.88,-402.63 725.76,-397.23 724.39,-404.1"/>
</g>
<!-- write_cursor&#45;&gt;write_cursor_key -->
<g id="edge14" class="edge">
<title>write_cursor&#45;&gt;write_cursor_key</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M671.21,-345.15C758.94,-335.48 866.84,-323.58 934.29,-316.14"/>
<polygon fill="green" stroke="green" points="934.79,-319.6 944.35,-315.03 934.03,-312.64 934.79,-319.6"/>
</g>
<!-- write_cursor&#45;&gt;write_cursor_value -->
<g id="edge15" class="edge">
<title>write_cursor&#45;&gt;write_cursor_value</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M671.21,-364.96C756.75,-367.32 861.47,-370.21 929.16,-372.07"/>
<polygon fill="green" stroke="green" points="929.2,-375.58 939.29,-372.35 929.39,-368.58 929.2,-375.58"/>
</g>
<!-- write_cursor&#45;&gt;write_cursor_seek -->
<g id="edge16" class="edge">
<title>write_cursor&#45;&gt;write_cursor_seek</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M644.29,-330.34C653.62,-326.12 662.65,-321.36 671,-316 691.12,-303.07 686.56,-288.43 707,-276 712.44,-272.69 718.37,-269.88 724.48,-267.48"/>
<polygon fill="green" stroke="green" points="725.93,-270.68 734.19,-264.06 723.6,-264.08 725.93,-270.68"/>
</g>
<!-- write_cursor&#45;&gt;write_cursor_near_seek -->
<g id="edge17" class="edge">
<title>write_cursor&#45;&gt;write_cursor_near_seek</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M627.38,-330.4C643.19,-322.55 658.44,-312.87 671,-301 697.59,-275.88 679.35,-250.94 707,-227 708.32,-225.86 709.69,-224.76 711.1,-223.71"/>
<polygon fill="green" stroke="green" points="713.12,-226.58 719.6,-218.2 709.3,-220.71 713.12,-226.58"/>
</g>
<!-- write_cursor_seek&#45;&gt;write_cursor_key -->
<g id="edge20" class="edge">
<title>write_cursor_seek&#45;&gt;write_cursor_key</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M850.86,-268.59C859.96,-271 869.25,-273.52 878,-276 894.1,-280.55 897.9,-282.46 914,-287 920.6,-288.86 927.51,-290.75 934.42,-292.6"/>
<polygon fill="green" stroke="green" points="933.93,-296.09 944.49,-295.27 935.72,-289.32 933.93,-296.09"/>
</g>
<!-- write_cursor_seek&#45;&gt;write_cursor_value -->
<g id="edge21" class="edge">
<title>write_cursor_seek&#45;&gt;write_cursor_value</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M850.81,-262.46C860.49,-265.64 869.99,-270 878,-276 902.9,-294.64 890.73,-315.37 914,-336 920.59,-341.84 928.23,-346.92 936.17,-351.29"/>
<polygon fill="green" stroke="green" points="934.72,-354.49 945.22,-355.94 937.91,-348.26 934.72,-354.49"/>
</g>
<!-- write_cursor_near_seek&#45;&gt;write_cursor_key -->
<g id="edge22" class="edge">
<title>write_cursor_near_seek&#45;&gt;write_cursor_key</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M864.25,-218.14C869.12,-220.72 873.77,-223.65 878,-227 902.38,-246.31 889.09,-268.38 914,-287 920.27,-291.68 927.44,-295.37 934.9,-298.28"/>
<polygon fill="green" stroke="green" points="933.86,-301.63 944.46,-301.56 936.13,-295 933.86,-301.63"/>
</g>
<!-- write_cursor_near_seek&#45;&gt;write_cursor_value -->
<g id="edge23" class="edge">
<title>write_cursor_near_seek&#45;&gt;write_cursor_value</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M865.53,-217.39C870.06,-220.13 874.28,-223.32 878,-227 914.25,-262.9 879.8,-298.14 914,-336 919.07,-341.61 925.12,-346.43 931.62,-350.58"/>
<polygon fill="green" stroke="green" points="930.31,-353.86 940.73,-355.82 933.8,-347.8 930.31,-353.86"/>
</g>
<!-- append_ts&#45;&gt;write_cursor_seek -->
<g id="edge35" class="edge">
<title>append_ts&#45;&gt;write_cursor_seek</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M662.59,-255.46C683.89,-255.22 705.09,-254.98 723.95,-254.77"/>
<polygon fill="green" stroke="green" points="724.22,-258.26 734.18,-254.65 724.14,-251.27 724.22,-258.26"/>
</g>
<!-- append_ts&#45;&gt;write_cursor_near_seek -->
<g id="edge36" class="edge">
<title>append_ts&#45;&gt;write_cursor_near_seek</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M662.59,-227.83C678.47,-224.4 694.28,-220.99 709.12,-217.79"/>
<polygon fill="green" stroke="green" points="710.18,-221.14 719.22,-215.61 708.71,-214.3 710.18,-221.14"/>
</g>
<!-- snapshot_get_cf_CF_LOCK&#45;&gt;Lock_parse -->
<g id="edge42" class="edge">
<title>snapshot_get_cf_CF_LOCK&#45;&gt;Lock_parse</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M640.23,-51.46C659.03,-50.04 678.36,-48.57 696.66,-47.18"/>
<polygon fill="green" stroke="green" points="697,-50.67 706.71,-46.42 696.47,-43.69 697,-50.67"/>
</g>
<!-- Lock_parse&#45;&gt;check_ts_conflict -->
<g id="edge43" class="edge">
<title>Lock_parse&#45;&gt;check_ts_conflict</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M878.27,-44.13C886.6,-44.53 895.1,-44.94 903.53,-45.35"/>
<polygon fill="green" stroke="green" points="903.6,-48.86 913.76,-45.85 903.94,-41.87 903.6,-48.86"/>
</g>
</g>
</svg>
