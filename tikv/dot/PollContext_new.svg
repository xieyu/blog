<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: PollContext_new Pages: 1 -->
<svg width="2699pt" height="935pt"
 viewBox="0.00 0.00 2699.00 934.78" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 930.78)">
<title>PollContext_new</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-930.78 2695,-930.78 2695,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_RaftPollerBuilder</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1685,-8C1685,-8 2413.5,-8 2413.5,-8 2419.5,-8 2425.5,-14 2425.5,-20 2425.5,-20 2425.5,-78 2425.5,-78 2425.5,-84 2419.5,-90 2413.5,-90 2413.5,-90 1685,-90 1685,-90 1679,-90 1673,-84 1673,-78 1673,-78 1673,-20 1673,-20 1673,-14 1679,-8 1685,-8"/>
<text text-anchor="middle" x="2049.25" y="-70" font-family="Times,serif" font-size="20.00">RaftPollerBuilder</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_BatchSystem</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1869,-98C1869,-98 1981,-98 1981,-98 1987,-98 1993,-104 1993,-110 1993,-110 1993,-210 1993,-210 1993,-216 1987,-222 1981,-222 1981,-222 1869,-222 1869,-222 1863,-222 1857,-216 1857,-210 1857,-210 1857,-110 1857,-110 1857,-104 1863,-98 1869,-98"/>
<text text-anchor="middle" x="1925" y="-202" font-family="Times,serif" font-size="20.00">BatchSystem</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_ApplyPollerBuilder</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M2059,-302C2059,-302 2671,-302 2671,-302 2677,-302 2683,-308 2683,-314 2683,-314 2683,-480 2683,-480 2683,-486 2677,-492 2671,-492 2671,-492 2059,-492 2059,-492 2053,-492 2047,-486 2047,-480 2047,-480 2047,-314 2047,-314 2047,-308 2053,-302 2059,-302"/>
<text text-anchor="middle" x="2365" y="-472" font-family="Times,serif" font-size="20.00">ApplyPollerBuilder</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_RaftBatchSystem</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M986,-230C986,-230 1970.5,-230 1970.5,-230 1976.5,-230 1982.5,-236 1982.5,-242 1982.5,-242 1982.5,-480 1982.5,-480 1982.5,-486 1976.5,-492 1970.5,-492 1970.5,-492 986,-492 986,-492 980,-492 974,-486 974,-480 974,-480 974,-242 974,-242 974,-236 980,-230 986,-230"/>
<text text-anchor="middle" x="1478.25" y="-472" font-family="Times,serif" font-size="20.00">RaftBatchSystem</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_Node</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1159,-138C1159,-138 1429,-138 1429,-138 1435,-138 1441,-144 1441,-150 1441,-150 1441,-210 1441,-210 1441,-216 1435,-222 1429,-222 1429,-222 1159,-222 1159,-222 1153,-222 1147,-216 1147,-210 1147,-210 1147,-150 1147,-150 1147,-144 1153,-138 1159,-138"/>
<text text-anchor="middle" x="1294" y="-202" font-family="Times,serif" font-size="20.00">Node</text>
</g>
<g id="clust13" class="cluster">
<title>cluster_TiKVServer</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M102,-500C102,-500 2208,-500 2208,-500 2214,-500 2220,-506 2220,-512 2220,-512 2220,-834 2220,-834 2220,-840 2214,-846 2208,-846 2208,-846 102,-846 102,-846 96,-846 90,-840 90,-834 90,-834 90,-512 90,-512 90,-506 96,-500 102,-500"/>
<text text-anchor="middle" x="1155" y="-826" font-family="Times,serif" font-size="20.00">TiKVServer</text>
</g>
<!-- RaftPollerBuilder -->
<g id="node1" class="node">
<title>RaftPollerBuilder</title>
<path fill="none" stroke="#1c2123" d="M1782,-52C1782,-52 1693,-52 1693,-52 1687,-52 1681,-46 1681,-40 1681,-40 1681,-28 1681,-28 1681,-22 1687,-16 1693,-16 1693,-16 1782,-16 1782,-16 1788,-16 1794,-22 1794,-28 1794,-28 1794,-40 1794,-40 1794,-46 1788,-52 1782,-52"/>
<text text-anchor="middle" x="1737.5" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftPollerBuilder</text>
</g>
<!-- init -->
<g id="node2" class="node">
<title>init</title>
<path fill="none" stroke="#1c2123" d="M1940,-52C1940,-52 1910,-52 1910,-52 1904,-52 1898,-46 1898,-40 1898,-40 1898,-28 1898,-28 1898,-22 1904,-16 1910,-16 1910,-16 1940,-16 1940,-16 1946,-16 1952,-22 1952,-28 1952,-28 1952,-40 1952,-40 1952,-46 1946,-52 1940,-52"/>
<text text-anchor="middle" x="1925" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">init</text>
</g>
<!-- build -->
<g id="node3" class="node">
<title>build</title>
<path fill="none" stroke="#1c2123" d="M2131.5,-52C2131.5,-52 2101.5,-52 2101.5,-52 2095.5,-52 2089.5,-46 2089.5,-40 2089.5,-40 2089.5,-28 2089.5,-28 2089.5,-22 2095.5,-16 2101.5,-16 2101.5,-16 2131.5,-16 2131.5,-16 2137.5,-16 2143.5,-22 2143.5,-28 2143.5,-28 2143.5,-40 2143.5,-40 2143.5,-46 2137.5,-52 2131.5,-52"/>
<text text-anchor="middle" x="2116.5" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">build</text>
</g>
<!-- init&#45;&gt;build -->
<g id="edge1" class="edge">
<title>init&#45;&gt;build</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1952.35,-34C1985.3,-34 2041.89,-34 2079,-34"/>
<polygon fill="green" stroke="green" points="2079.37,-37.5 2089.37,-34 2079.37,-30.5 2079.37,-37.5"/>
</g>
<!-- PollContext -->
<g id="node4" class="node">
<title>PollContext</title>
<path fill="none" stroke="#1c2123" d="M2405.5,-52C2405.5,-52 2348.5,-52 2348.5,-52 2342.5,-52 2336.5,-46 2336.5,-40 2336.5,-40 2336.5,-28 2336.5,-28 2336.5,-22 2342.5,-16 2348.5,-16 2348.5,-16 2405.5,-16 2405.5,-16 2411.5,-16 2417.5,-22 2417.5,-28 2417.5,-28 2417.5,-40 2417.5,-40 2417.5,-46 2411.5,-52 2405.5,-52"/>
<text text-anchor="middle" x="2377" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollContext</text>
</g>
<!-- build&#45;&gt;PollContext -->
<g id="edge2" class="edge">
<title>build&#45;&gt;PollContext</title>
<path fill="none" stroke="#666666" d="M2143.71,-34C2186.4,-34 2271.63,-34 2326.14,-34"/>
<polygon fill="#666666" stroke="#666666" points="2326.27,-37.5 2336.27,-34 2326.27,-30.5 2326.27,-37.5"/>
</g>
<!-- system_spawn -->
<g id="node5" class="node">
<title>system_spawn</title>
<path fill="none" stroke="#1c2123" d="M1877,-107C1877,-107 1973,-107 1973,-107 1979,-107 1985,-113 1985,-119 1985,-119 1985,-171 1985,-171 1985,-177 1979,-183 1973,-183 1973,-183 1877,-183 1877,-183 1871,-183 1865,-177 1865,-171 1865,-171 1865,-119 1865,-119 1865,-113 1871,-107 1877,-107"/>
<text text-anchor="middle" x="1925" y="-167.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">spawn</text>
<polyline fill="none" stroke="#1c2123" points="1865,-160 1985,-160 "/>
<text text-anchor="start" x="1873" y="-144.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建poll线程池</text>
<text text-anchor="start" x="1873" y="-129.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 每个线创建一个</text>
<text text-anchor="start" x="1873" y="-114.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> poll handler</text>
</g>
<!-- system_spawn&#45;&gt;build -->
<g id="edge3" class="edge">
<title>system_spawn&#45;&gt;build</title>
<path fill="none" stroke="#666666" d="M1985.18,-110.34C2016.46,-92.01 2053.79,-70.15 2080.46,-54.52"/>
<polygon fill="#666666" stroke="#666666" points="2082.57,-57.35 2089.43,-49.27 2079.03,-51.31 2082.57,-57.35"/>
</g>
<!-- ApplyPollerBuilder -->
<g id="node6" class="node">
<title>ApplyPollerBuilder</title>
<path fill="none" stroke="#1c2123" d="M2166,-400C2166,-400 2067,-400 2067,-400 2061,-400 2055,-394 2055,-388 2055,-388 2055,-376 2055,-376 2055,-370 2061,-364 2067,-364 2067,-364 2166,-364 2166,-364 2172,-364 2178,-370 2178,-376 2178,-376 2178,-388 2178,-388 2178,-394 2172,-400 2166,-400"/>
<text text-anchor="middle" x="2116.5" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyPollerBuilder</text>
</g>
<!-- kv_wb -->
<g id="node7" class="node">
<title>kv_wb</title>
<path fill="none" stroke="#1c2123" d="M2260,-340C2260,-340 2494,-340 2494,-340 2500,-340 2506,-346 2506,-352 2506,-352 2506,-412 2506,-412 2506,-418 2500,-424 2494,-424 2494,-424 2260,-424 2260,-424 2254,-424 2248,-418 2248,-412 2248,-412 2248,-352 2248,-352 2248,-346 2254,-340 2260,-340"/>
<text text-anchor="middle" x="2377" y="-408.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv_wb</text>
<polyline fill="none" stroke="#1c2123" points="2248,-401 2506,-401 "/>
<text text-anchor="middle" x="2377" y="-385.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv_wb: W,</text>
<polyline fill="none" stroke="#1c2123" points="2248,-378 2506,-378 "/>
<text text-anchor="start" x="2256" y="-362.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">let kv_web = W::with_capacity(</text>
<text text-anchor="start" x="2256" y="-347.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> &amp;engine, DEFAULT_APPLY_WB_SIZE);</text>
</g>
<!-- ApplyPollerBuilder&#45;&gt;kv_wb -->
<g id="edge4" class="edge">
<title>ApplyPollerBuilder&#45;&gt;kv_wb</title>
<path fill="none" stroke="#666666" d="M2178.11,-382C2196.12,-382 2216.65,-382 2237.5,-382"/>
<polygon fill="#666666" stroke="#666666" points="2237.75,-385.5 2247.75,-382 2237.75,-378.5 2237.75,-385.5"/>
</g>
<!-- ApplyContext -->
<g id="node8" class="node">
<title>ApplyContext</title>
<path fill="none" stroke="#1c2123" d="M2643,-454C2643,-454 2574,-454 2574,-454 2568,-454 2562,-448 2562,-442 2562,-442 2562,-430 2562,-430 2562,-424 2568,-418 2574,-418 2574,-418 2643,-418 2643,-418 2649,-418 2655,-424 2655,-430 2655,-430 2655,-442 2655,-442 2655,-448 2649,-454 2643,-454"/>
<text text-anchor="middle" x="2608.5" y="-432.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyContext</text>
</g>
<!-- ApplyPollerBuilder&#45;&gt;ApplyContext -->
<g id="edge5" class="edge">
<title>ApplyPollerBuilder&#45;&gt;ApplyContext</title>
<path fill="none" stroke="#666666" d="M2152.41,-400.07C2178.09,-412.32 2214.25,-427.43 2248,-434 2353.83,-454.61 2480.54,-448.32 2551.75,-442.04"/>
<polygon fill="#666666" stroke="#666666" points="2552.21,-445.52 2561.85,-441.12 2551.57,-438.54 2552.21,-445.52"/>
</g>
<!-- kv_wb&#45;&gt;ApplyContext -->
<g id="edge8" class="edge">
<title>kv_wb&#45;&gt;ApplyContext</title>
<path fill="none" stroke="#666666" d="M2506.17,-412.16C2522.2,-415.93 2537.87,-419.62 2551.92,-422.92"/>
<polygon fill="#666666" stroke="#666666" points="2551.31,-426.37 2561.84,-425.26 2552.91,-419.56 2551.31,-426.37"/>
</g>
<!-- RocksWriteBatch -->
<g id="node9" class="node">
<title>RocksWriteBatch</title>
<path fill="none" stroke="#1c2123" d="M2653,-346C2653,-346 2564,-346 2564,-346 2558,-346 2552,-340 2552,-334 2552,-334 2552,-322 2552,-322 2552,-316 2558,-310 2564,-310 2564,-310 2653,-310 2653,-310 2659,-310 2665,-316 2665,-322 2665,-322 2665,-334 2665,-334 2665,-340 2659,-346 2653,-346"/>
<text text-anchor="middle" x="2608.5" y="-324.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RocksWriteBatch</text>
</g>
<!-- kv_wb&#45;&gt;RocksWriteBatch -->
<g id="edge6" class="edge">
<title>kv_wb&#45;&gt;RocksWriteBatch</title>
<path fill="none" stroke="#666666" d="M2506.17,-351.84C2518.56,-348.93 2530.74,-346.06 2542.11,-343.39"/>
<polygon fill="#666666" stroke="#666666" points="2542.96,-346.78 2551.89,-341.08 2541.35,-339.97 2542.96,-346.78"/>
</g>
<!-- RocksWriteBatchVec -->
<g id="node10" class="node">
<title>RocksWriteBatchVec</title>
<path fill="none" stroke="#1c2123" d="M2663,-400C2663,-400 2554,-400 2554,-400 2548,-400 2542,-394 2542,-388 2542,-388 2542,-376 2542,-376 2542,-370 2548,-364 2554,-364 2554,-364 2663,-364 2663,-364 2669,-364 2675,-370 2675,-376 2675,-376 2675,-388 2675,-388 2675,-394 2669,-400 2663,-400"/>
<text text-anchor="middle" x="2608.5" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RocksWriteBatchVec</text>
</g>
<!-- kv_wb&#45;&gt;RocksWriteBatchVec -->
<g id="edge7" class="edge">
<title>kv_wb&#45;&gt;RocksWriteBatchVec</title>
<path fill="none" stroke="#666666" d="M2506.17,-382C2514.93,-382 2523.58,-382 2531.92,-382"/>
<polygon fill="#666666" stroke="#666666" points="2531.93,-385.5 2541.93,-382 2531.93,-378.5 2531.93,-385.5"/>
</g>
<!-- spawn -->
<g id="node11" class="node">
<title>spawn</title>
<path fill="none" stroke="#1c2123" d="M1481,-242C1481,-242 1598,-242 1598,-242 1604,-242 1610,-248 1610,-254 1610,-254 1610,-306 1610,-306 1610,-312 1604,-318 1598,-318 1598,-318 1481,-318 1481,-318 1475,-318 1469,-312 1469,-306 1469,-306 1469,-254 1469,-254 1469,-248 1475,-242 1481,-242"/>
<text text-anchor="middle" x="1539.5" y="-302.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">spawn</text>
<polyline fill="none" stroke="#1c2123" points="1469,-295 1610,-295 "/>
<text text-anchor="start" x="1477" y="-279.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建RaftPollerBuilder</text>
<text text-anchor="start" x="1477" y="-264.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 并调用builder的init</text>
<text text-anchor="middle" x="1539.5" y="-249.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后start_system</text>
</g>
<!-- spawn&#45;&gt;RaftPollerBuilder -->
<g id="edge9" class="edge">
<title>spawn&#45;&gt;RaftPollerBuilder</title>
<path fill="none" stroke="#666666" d="M1565.38,-241.93C1585.95,-211.19 1616.48,-167.25 1646,-131 1666.67,-105.62 1692.29,-78.52 1710.98,-59.43"/>
<polygon fill="#666666" stroke="#666666" points="1713.51,-61.86 1718.03,-52.28 1708.52,-56.95 1713.51,-61.86"/>
</g>
<!-- spawn&#45;&gt;init -->
<g id="edge10" class="edge">
<title>spawn&#45;&gt;init</title>
<path fill="none" stroke="#666666" d="M1600,-241.83C1680.98,-189.89 1823.31,-98.59 1888.98,-56.46"/>
<polygon fill="#666666" stroke="#666666" points="1891.2,-59.2 1897.73,-50.85 1887.42,-53.31 1891.2,-59.2"/>
</g>
<!-- start_system -->
<g id="node12" class="node">
<title>start_system</title>
<path fill="none" stroke="#1c2123" d="M1672,-238.5C1672,-238.5 1803,-238.5 1803,-238.5 1809,-238.5 1815,-244.5 1815,-250.5 1815,-250.5 1815,-317.5 1815,-317.5 1815,-323.5 1809,-329.5 1803,-329.5 1803,-329.5 1672,-329.5 1672,-329.5 1666,-329.5 1660,-323.5 1660,-317.5 1660,-317.5 1660,-250.5 1660,-250.5 1660,-244.5 1666,-238.5 1672,-238.5"/>
<text text-anchor="middle" x="1737.5" y="-314.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start_system</text>
<polyline fill="none" stroke="#1c2123" points="1660,-306.5 1815,-306.5 "/>
<text text-anchor="start" x="1668" y="-291.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">启动raft batch system</text>
<text text-anchor="start" x="1668" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 创建ApplyPollerBuilder</text>
<text text-anchor="start" x="1668" y="-261.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后创建并启动</text>
<text text-anchor="start" x="1668" y="-246.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> apply batch system</text>
</g>
<!-- spawn&#45;&gt;start_system -->
<g id="edge11" class="edge">
<title>spawn&#45;&gt;start_system</title>
<path fill="none" stroke="#666666" d="M1610.15,-281.42C1622.96,-281.68 1636.46,-281.96 1649.69,-282.23"/>
<polygon fill="#666666" stroke="#666666" points="1649.67,-285.73 1659.74,-282.43 1649.82,-278.73 1649.67,-285.73"/>
</g>
<!-- support_write_batch_vec -->
<g id="node13" class="node">
<title>support_write_batch_vec</title>
<path fill="none" stroke="#1c2123" d="M1658,-349C1658,-349 1817,-349 1817,-349 1823,-349 1829,-355 1829,-361 1829,-361 1829,-421 1829,-421 1829,-427 1823,-433 1817,-433 1817,-433 1658,-433 1658,-433 1652,-433 1646,-427 1646,-421 1646,-421 1646,-361 1646,-361 1646,-355 1652,-349 1658,-349"/>
<text text-anchor="middle" x="1737.5" y="-417.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">support_write_batch_vec</text>
<polyline fill="none" stroke="#1c2123" points="1646,-410 1829,-410 "/>
<text text-anchor="start" x="1654" y="-394.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">is_enable_multi_batch_write()</text>
<polyline fill="none" stroke="#1c2123" points="1646,-387 1829,-387 "/>
<text text-anchor="start" x="1654" y="-371.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">影响kv_wb使用WriteBatch</text>
<text text-anchor="start" x="1654" y="-356.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 还是WriteBatchVec</text>
</g>
<!-- spawn&#45;&gt;support_write_batch_vec -->
<g id="edge12" class="edge">
<title>spawn&#45;&gt;support_write_batch_vec</title>
<path fill="none" stroke="#666666" d="M1607.68,-318.04C1622.31,-326.33 1637.97,-335.2 1653.15,-343.8"/>
<polygon fill="#666666" stroke="#666666" points="1651.59,-346.94 1662.02,-348.82 1655.04,-340.85 1651.59,-346.94"/>
</g>
<!-- WriteBatch -->
<g id="node14" class="node">
<title>WriteBatch</title>
<path fill="none" stroke="#1c2123" d="M1952.5,-454C1952.5,-454 1897.5,-454 1897.5,-454 1891.5,-454 1885.5,-448 1885.5,-442 1885.5,-442 1885.5,-430 1885.5,-430 1885.5,-424 1891.5,-418 1897.5,-418 1897.5,-418 1952.5,-418 1952.5,-418 1958.5,-418 1964.5,-424 1964.5,-430 1964.5,-430 1964.5,-442 1964.5,-442 1964.5,-448 1958.5,-454 1952.5,-454"/>
<text text-anchor="middle" x="1925" y="-432.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteBatch</text>
</g>
<!-- spawn&#45;&gt;WriteBatch -->
<g id="edge13" class="edge">
<title>spawn&#45;&gt;WriteBatch</title>
<path fill="none" stroke="#666666" d="M1552.9,-318.15C1567.98,-357.48 1597.58,-416.66 1646,-443 1718.16,-482.25 1817.22,-466.23 1875.53,-451.08"/>
<polygon fill="#666666" stroke="#666666" points="1876.48,-454.44 1885.23,-448.46 1874.66,-447.68 1876.48,-454.44"/>
</g>
<!-- start_system&#45;&gt;system_spawn -->
<g id="edge17" class="edge">
<title>start_system&#45;&gt;system_spawn</title>
<path fill="none" stroke="#666666" d="M1799.24,-238.49C1820.32,-222.69 1843.92,-205.01 1864.87,-189.31"/>
<polygon fill="#666666" stroke="#666666" points="1867.15,-191.97 1873.06,-183.17 1862.96,-186.37 1867.15,-191.97"/>
</g>
<!-- start_system&#45;&gt;ApplyPollerBuilder -->
<g id="edge18" class="edge">
<title>start_system&#45;&gt;ApplyPollerBuilder</title>
<path fill="none" stroke="#666666" d="M1815.25,-303.95C1882.62,-321.46 1979.8,-346.73 2045.18,-363.72"/>
<polygon fill="#666666" stroke="#666666" points="2044.43,-367.14 2054.99,-366.27 2046.2,-360.37 2044.43,-367.14"/>
</g>
<!-- WriteBatchVec -->
<g id="node15" class="node">
<title>WriteBatchVec</title>
<path fill="none" stroke="#1c2123" d="M1962.5,-400C1962.5,-400 1887.5,-400 1887.5,-400 1881.5,-400 1875.5,-394 1875.5,-388 1875.5,-388 1875.5,-376 1875.5,-376 1875.5,-370 1881.5,-364 1887.5,-364 1887.5,-364 1962.5,-364 1962.5,-364 1968.5,-364 1974.5,-370 1974.5,-376 1974.5,-376 1974.5,-388 1974.5,-388 1974.5,-394 1968.5,-400 1962.5,-400"/>
<text text-anchor="middle" x="1925" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteBatchVec</text>
</g>
<!-- support_write_batch_vec&#45;&gt;WriteBatchVec -->
<g id="edge16" class="edge">
<title>support_write_batch_vec&#45;&gt;WriteBatchVec</title>
<path fill="none" stroke="#666666" d="M1829.08,-386.61C1841.33,-386.01 1853.63,-385.41 1865.13,-384.86"/>
<polygon fill="#666666" stroke="#666666" points="1865.62,-388.34 1875.44,-384.36 1865.28,-381.35 1865.62,-388.34"/>
</g>
<!-- WriteBatch&#45;&gt;ApplyPollerBuilder -->
<g id="edge14" class="edge">
<title>WriteBatch&#45;&gt;ApplyPollerBuilder</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1964.81,-424.94C1987.85,-418.37 2017.78,-409.84 2044.89,-402.12"/>
<polygon fill="green" stroke="green" points="2046.07,-405.42 2054.73,-399.32 2044.16,-398.69 2046.07,-405.42"/>
</g>
<!-- WriteBatchVec&#45;&gt;ApplyPollerBuilder -->
<g id="edge15" class="edge">
<title>WriteBatchVec&#45;&gt;ApplyPollerBuilder</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1974.8,-382C1996.1,-382 2021.49,-382 2044.81,-382"/>
<polygon fill="green" stroke="green" points="2045,-385.5 2055,-382 2045,-378.5 2045,-385.5"/>
</g>
<!-- RaftBatchSystem -->
<g id="node16" class="node">
<title>RaftBatchSystem</title>
<path fill="none" stroke="#1c2123" d="M1082,-454C1082,-454 994,-454 994,-454 988,-454 982,-448 982,-442 982,-442 982,-430 982,-430 982,-424 988,-418 994,-418 994,-418 1082,-418 1082,-418 1088,-418 1094,-424 1094,-430 1094,-430 1094,-442 1094,-442 1094,-448 1088,-454 1082,-454"/>
<text text-anchor="middle" x="1038" y="-432.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftBatchSystem</text>
</g>
<!-- Node_new -->
<g id="node19" class="node">
<title>Node_new</title>
<path fill="none" stroke="#1c2123" d="M1167,-147C1167,-147 1197,-147 1197,-147 1203,-147 1209,-153 1209,-159 1209,-159 1209,-171 1209,-171 1209,-177 1203,-183 1197,-183 1197,-183 1167,-183 1167,-183 1161,-183 1155,-177 1155,-171 1155,-171 1155,-159 1155,-159 1155,-153 1161,-147 1167,-147"/>
<text text-anchor="middle" x="1182" y="-161.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">new</text>
</g>
<!-- RaftBatchSystem&#45;&gt;Node_new -->
<g id="edge28" class="edge">
<title>RaftBatchSystem&#45;&gt;Node_new</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1048.54,-417.8C1072.94,-371.23 1137.76,-247.53 1166.7,-192.3"/>
<polygon fill="green" stroke="green" points="1169.96,-193.6 1171.5,-183.12 1163.76,-190.36 1169.96,-193.6"/>
</g>
<!-- start -->
<g id="node17" class="node">
<title>start</title>
<path fill="none" stroke="#1c2123" d="M1312,-183C1312,-183 1282,-183 1282,-183 1276,-183 1270,-177 1270,-171 1270,-171 1270,-159 1270,-159 1270,-153 1276,-147 1282,-147 1282,-147 1312,-147 1312,-147 1318,-147 1324,-153 1324,-159 1324,-159 1324,-171 1324,-171 1324,-177 1318,-183 1312,-183"/>
<text text-anchor="middle" x="1297" y="-161.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start</text>
</g>
<!-- start_store -->
<g id="node18" class="node">
<title>start_store</title>
<path fill="none" stroke="#1c2123" d="M1421,-183C1421,-183 1372,-183 1372,-183 1366,-183 1360,-177 1360,-171 1360,-171 1360,-159 1360,-159 1360,-153 1366,-147 1372,-147 1372,-147 1421,-147 1421,-147 1427,-147 1433,-153 1433,-159 1433,-159 1433,-171 1433,-171 1433,-177 1427,-183 1421,-183"/>
<text text-anchor="middle" x="1396.5" y="-161.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start_store</text>
</g>
<!-- start&#45;&gt;start_store -->
<g id="edge19" class="edge">
<title>start&#45;&gt;start_store</title>
<path fill="none" stroke="#666666" d="M1324.13,-165C1331.99,-165 1340.87,-165 1349.62,-165"/>
<polygon fill="#666666" stroke="#666666" points="1349.77,-168.5 1359.77,-165 1349.77,-161.5 1349.77,-168.5"/>
</g>
<!-- start_store&#45;&gt;spawn -->
<g id="edge20" class="edge">
<title>start_store&#45;&gt;spawn</title>
<path fill="none" stroke="#666666" d="M1419.84,-183.22C1437.07,-197.27 1461.64,-217.32 1483.97,-235.52"/>
<polygon fill="#666666" stroke="#666666" points="1481.79,-238.26 1491.75,-241.87 1486.21,-232.84 1481.79,-238.26"/>
</g>
<!-- Node_new&#45;&gt;start -->
<g id="edge21" class="edge">
<title>Node_new&#45;&gt;start</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1209.21,-165C1224.18,-165 1243.19,-165 1259.6,-165"/>
<polygon fill="green" stroke="green" points="1259.93,-168.5 1269.93,-165 1259.93,-161.5 1259.93,-168.5"/>
</g>
<!-- TiKVServer_init -->
<g id="node20" class="node">
<title>TiKVServer_init</title>
<path fill="none" stroke="#1c2123" d="M152.5,-588.5C152.5,-588.5 258.5,-588.5 258.5,-588.5 264.5,-588.5 270.5,-594.5 270.5,-600.5 270.5,-600.5 270.5,-691.5 270.5,-691.5 270.5,-697.5 264.5,-703.5 258.5,-703.5 258.5,-703.5 152.5,-703.5 152.5,-703.5 146.5,-703.5 140.5,-697.5 140.5,-691.5 140.5,-691.5 140.5,-600.5 140.5,-600.5 140.5,-594.5 146.5,-588.5 152.5,-588.5"/>
<text text-anchor="middle" x="205.5" y="-688.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">init</text>
<polyline fill="none" stroke="#1c2123" points="140.5,-680.5 270.5,-680.5 "/>
<text text-anchor="start" x="148.5" y="-665.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用TiKvConfig</text>
<polyline fill="none" stroke="#1c2123" points="140.5,-657.5 270.5,-657.5 "/>
<text text-anchor="start" x="148.5" y="-642.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建TiKVServer</text>
<polyline fill="none" stroke="#1c2123" points="140.5,-634.5 270.5,-634.5 "/>
<text text-anchor="start" x="148.5" y="-619.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建BatchSystem</text>
<polyline fill="none" stroke="#1c2123" points="140.5,-611.5 270.5,-611.5 "/>
<text text-anchor="start" x="148.5" y="-596.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建后台work线程</text>
</g>
<!-- create_raft_batch_system -->
<g id="node21" class="node">
<title>create_raft_batch_system</title>
<path fill="none" stroke="#1c2123" d="M392.5,-536C392.5,-536 541.5,-536 541.5,-536 547.5,-536 553.5,-542 553.5,-548 553.5,-548 553.5,-570 553.5,-570 553.5,-576 547.5,-582 541.5,-582 541.5,-582 392.5,-582 392.5,-582 386.5,-582 380.5,-576 380.5,-570 380.5,-570 380.5,-548 380.5,-548 380.5,-542 386.5,-536 392.5,-536"/>
<text text-anchor="middle" x="467" y="-566.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">create_raft_batch_system</text>
<polyline fill="none" stroke="#1c2123" points="380.5,-559 553.5,-559 "/>
<text text-anchor="start" x="388.5" y="-543.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建raft/apply batch system</text>
</g>
<!-- TiKVServer_init&#45;&gt;create_raft_batch_system -->
<g id="edge22" class="edge">
<title>TiKVServer_init&#45;&gt;create_raft_batch_system</title>
<path fill="none" stroke="#666666" d="M270.65,-624.49C305.92,-612.67 349.96,-597.9 387.3,-585.38"/>
<polygon fill="#666666" stroke="#666666" points="388.77,-588.58 397.14,-582.09 386.55,-581.95 388.77,-588.58"/>
</g>
<!-- create_raft_batch_system&#45;&gt;RaftBatchSystem -->
<g id="edge27" class="edge">
<title>create_raft_batch_system&#45;&gt;RaftBatchSystem</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M519.48,-535.95C548.73,-523.67 586.34,-509.23 621,-500 742.67,-467.59 889.02,-449.81 971.7,-441.66"/>
<polygon fill="green" stroke="green" points="972.1,-445.13 981.71,-440.68 971.42,-438.17 972.1,-445.13"/>
</g>
<!-- create_system -->
<g id="node22" class="node">
<title>create_system</title>
<path fill="none" stroke="#1c2123" d="M647,-574C647,-574 762,-574 762,-574 768,-574 774,-580 774,-586 774,-586 774,-608 774,-608 774,-614 768,-620 762,-620 762,-620 647,-620 647,-620 641,-620 635,-614 635,-608 635,-608 635,-586 635,-586 635,-580 641,-574 647,-574"/>
<text text-anchor="middle" x="704.5" y="-604.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">create_system</text>
<polyline fill="none" stroke="#1c2123" points="635,-597 774,-597 "/>
<text text-anchor="start" x="643" y="-581.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建raft batch system</text>
</g>
<!-- create_raft_batch_system&#45;&gt;create_system -->
<g id="edge23" class="edge">
<title>create_raft_batch_system&#45;&gt;create_system</title>
<path fill="none" stroke="#666666" d="M553.69,-572.83C576.94,-576.58 602.01,-580.62 624.85,-584.31"/>
<polygon fill="#666666" stroke="#666666" points="624.41,-587.78 634.84,-585.92 625.52,-580.87 624.41,-587.78"/>
</g>
<!-- create_apply_batch_system -->
<g id="node23" class="node">
<title>create_apply_batch_system</title>
<path fill="none" stroke="#1c2123" d="M633,-509C633,-509 776,-509 776,-509 782,-509 788,-515 788,-521 788,-521 788,-543 788,-543 788,-549 782,-555 776,-555 776,-555 633,-555 633,-555 627,-555 621,-549 621,-543 621,-543 621,-521 621,-521 621,-515 627,-509 633,-509"/>
<text text-anchor="middle" x="704.5" y="-539.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">create_apply_batch_system</text>
<polyline fill="none" stroke="#1c2123" points="621,-532 788,-532 "/>
<text text-anchor="start" x="629" y="-516.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建apply batch system</text>
</g>
<!-- create_raft_batch_system&#45;&gt;create_apply_batch_system -->
<g id="edge24" class="edge">
<title>create_raft_batch_system&#45;&gt;create_apply_batch_system</title>
<path fill="none" stroke="#666666" d="M553.69,-549.18C572.19,-547.05 591.84,-544.8 610.61,-542.65"/>
<polygon fill="#666666" stroke="#666666" points="611.09,-546.12 620.63,-541.5 610.3,-539.16 611.09,-546.12"/>
</g>
<!-- ApplyBatchSystem -->
<g id="node24" class="node">
<title>ApplyBatchSystem</title>
<path fill="none" stroke="#1c2123" d="M934,-547C934,-547 836,-547 836,-547 830,-547 824,-541 824,-535 824,-535 824,-523 824,-523 824,-517 830,-511 836,-511 836,-511 934,-511 934,-511 940,-511 946,-517 946,-523 946,-523 946,-535 946,-535 946,-541 940,-547 934,-547"/>
<text text-anchor="middle" x="885" y="-525.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyBatchSystem</text>
</g>
<!-- create_apply_batch_system&#45;&gt;ApplyBatchSystem -->
<g id="edge25" class="edge">
<title>create_apply_batch_system&#45;&gt;ApplyBatchSystem</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M788.22,-530.61C796.78,-530.47 805.42,-530.32 813.82,-530.18"/>
<polygon fill="green" stroke="green" points="813.99,-533.68 823.93,-530.01 813.87,-526.68 813.99,-533.68"/>
</g>
<!-- ApplyBatchSystem&#45;&gt;RaftBatchSystem -->
<g id="edge26" class="edge">
<title>ApplyBatchSystem&#45;&gt;RaftBatchSystem</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M915.47,-510.85C939.27,-496.19 972.94,-475.45 998.81,-459.52"/>
<polygon fill="green" stroke="green" points="1000.92,-462.33 1007.6,-454.11 997.25,-456.37 1000.92,-462.33"/>
</g>
<!-- init_servers -->
<g id="node25" class="node">
<title>init_servers</title>
<path fill="none" stroke="#1c2123" d="M110,-508.5C110,-508.5 301,-508.5 301,-508.5 307,-508.5 313,-514.5 313,-520.5 313,-520.5 313,-557.5 313,-557.5 313,-563.5 307,-569.5 301,-569.5 301,-569.5 110,-569.5 110,-569.5 104,-569.5 98,-563.5 98,-557.5 98,-557.5 98,-520.5 98,-520.5 98,-514.5 104,-508.5 110,-508.5"/>
<text text-anchor="middle" x="205.5" y="-554.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">init_servers</text>
<polyline fill="none" stroke="#1c2123" points="98,-546.5 313,-546.5 "/>
<text text-anchor="start" x="106" y="-531.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将创建好的batchSystem传给Node</text>
<text text-anchor="start" x="106" y="-516.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后调用node.start</text>
</g>
<!-- init_servers&#45;&gt;start -->
<g id="edge29" class="edge">
<title>init_servers&#45;&gt;start</title>
<path fill="none" stroke="#666666" d="M210.67,-508.22C221.19,-442.79 255.07,-289.28 349,-209 472.65,-103.31 540.84,-118 703.5,-118 703.5,-118 703.5,-118 1039,-118 1126.12,-118 1149.73,-115.9 1234,-138 1242.83,-140.32 1252.01,-143.71 1260.52,-147.33"/>
<polygon fill="#666666" stroke="#666666" points="1259.23,-150.58 1269.79,-151.45 1262.07,-144.18 1259.23,-150.58"/>
</g>
<!-- init_servers&#45;&gt;Node_new -->
<g id="edge30" class="edge">
<title>init_servers&#45;&gt;Node_new</title>
<path fill="none" stroke="#666666" d="M228.08,-508.25C290.79,-422.84 482.67,-189 703.5,-189 703.5,-189 703.5,-189 886,-189 979.41,-189 1088.91,-176.9 1144.55,-169.88"/>
<polygon fill="#666666" stroke="#666666" points="1145.14,-173.33 1154.61,-168.59 1144.25,-166.39 1145.14,-173.33"/>
</g>
<!-- init_engines -->
<g id="node26" class="node">
<title>init_engines</title>
<path fill="none" stroke="#1c2123" d="M734,-759C734,-759 675,-759 675,-759 669,-759 663,-753 663,-747 663,-747 663,-735 663,-735 663,-729 669,-723 675,-723 675,-723 734,-723 734,-723 740,-723 746,-729 746,-735 746,-735 746,-747 746,-747 746,-753 740,-759 734,-759"/>
<text text-anchor="middle" x="704.5" y="-737.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">init_engines</text>
</g>
<!-- TiKVEngines -->
<g id="node27" class="node">
<title>TiKVEngines</title>
<path fill="none" stroke="#1c2123" d="M919,-788C919,-788 851,-788 851,-788 845,-788 839,-782 839,-776 839,-776 839,-764 839,-764 839,-758 845,-752 851,-752 851,-752 919,-752 919,-752 925,-752 931,-758 931,-764 931,-764 931,-776 931,-776 931,-782 925,-788 919,-788"/>
<text text-anchor="middle" x="885" y="-766.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TiKVEngines</text>
</g>
<!-- init_engines&#45;&gt;TiKVEngines -->
<g id="edge31" class="edge">
<title>init_engines&#45;&gt;TiKVEngines</title>
<path fill="none" stroke="#666666" d="M746,-747.58C770.54,-751.57 802.16,-756.7 828.95,-761.06"/>
<polygon fill="#666666" stroke="#666666" points="828.52,-764.53 838.95,-762.68 829.64,-757.62 828.52,-764.53"/>
</g>
<!-- StoreMeta -->
<g id="node28" class="node">
<title>StoreMeta</title>
<path fill="none" stroke="#1c2123" d="M910,-680C910,-680 860,-680 860,-680 854,-680 848,-674 848,-668 848,-668 848,-656 848,-656 848,-650 854,-644 860,-644 860,-644 910,-644 910,-644 916,-644 922,-650 922,-656 922,-656 922,-668 922,-668 922,-674 916,-680 910,-680"/>
<text text-anchor="middle" x="885" y="-658.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreMeta</text>
</g>
<!-- init_engines&#45;&gt;StoreMeta -->
<g id="edge32" class="edge">
<title>init_engines&#45;&gt;StoreMeta</title>
<path fill="none" stroke="#666666" d="M746,-723.07C773.54,-710.89 810.02,-694.74 838.55,-682.12"/>
<polygon fill="#666666" stroke="#666666" points="840.17,-685.23 847.89,-677.98 837.33,-678.83 840.17,-685.23"/>
</g>
<!-- RaftKV_new -->
<g id="node29" class="node">
<title>RaftKV_new</title>
<path fill="none" stroke="#1c2123" d="M917.5,-734C917.5,-734 852.5,-734 852.5,-734 846.5,-734 840.5,-728 840.5,-722 840.5,-722 840.5,-710 840.5,-710 840.5,-704 846.5,-698 852.5,-698 852.5,-698 917.5,-698 917.5,-698 923.5,-698 929.5,-704 929.5,-710 929.5,-710 929.5,-722 929.5,-722 929.5,-728 923.5,-734 917.5,-734"/>
<text text-anchor="middle" x="885" y="-712.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftKV_new</text>
</g>
<!-- init_engines&#45;&gt;RaftKV_new -->
<g id="edge33" class="edge">
<title>init_engines&#45;&gt;RaftKV_new</title>
<path fill="none" stroke="#666666" d="M746,-735.33C770.9,-731.84 803.11,-727.33 830.14,-723.54"/>
<polygon fill="#666666" stroke="#666666" points="830.8,-726.98 840.22,-722.13 829.83,-720.05 830.8,-726.98"/>
</g>
<!-- Engines_RocksEngine_RaftLogEngine -->
<g id="node30" class="node">
<title>Engines_RocksEngine_RaftLogEngine</title>
<path fill="none" stroke="#1c2123" d="M361,-723C361,-723 573,-723 573,-723 579,-723 585,-729 585,-735 585,-735 585,-795 585,-795 585,-801 579,-807 573,-807 573,-807 361,-807 361,-807 355,-807 349,-801 349,-795 349,-795 349,-735 349,-735 349,-729 355,-723 361,-723"/>
<text text-anchor="start" x="357" y="-791.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Engines&lt;RocksEngine,RaftLogEngine&gt;</text>
<polyline fill="none" stroke="#1c2123" points="349,-784 585,-784 "/>
<text text-anchor="start" x="357" y="-768.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv使用RocksEngine</text>
<text text-anchor="start" x="357" y="-753.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> raft使用RaftLogEngine</text>
<polyline fill="none" stroke="#1c2123" points="349,-746 585,-746 "/>
<text text-anchor="start" x="357" y="-730.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">配置为config.raft_engine.config</text>
</g>
<!-- Engines_RocksEngine_RaftLogEngine&#45;&gt;init_engines -->
<g id="edge36" class="edge">
<title>Engines_RocksEngine_RaftLogEngine&#45;&gt;init_engines</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M585.06,-753.07C608.85,-750.65 632.68,-748.22 652.66,-746.18"/>
<polygon fill="green" stroke="green" points="653.14,-749.65 662.73,-745.15 652.43,-742.69 653.14,-749.65"/>
</g>
<!-- engines -->
<g id="node33" class="node">
<title>engines</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1142,-509C1142,-509 1222,-509 1222,-509 1228,-509 1234,-515 1234,-521 1234,-521 1234,-589 1234,-589 1234,-595 1228,-601 1222,-601 1222,-601 1142,-601 1142,-601 1136,-601 1130,-595 1130,-589 1130,-589 1130,-521 1130,-521 1130,-515 1136,-509 1142,-509"/>
<text text-anchor="middle" x="1182" y="-585.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">engines</text>
<polyline fill="none" stroke="#60b5ac" points="1130,-578 1234,-578 "/>
<text text-anchor="start" x="1138" y="-562.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Engine&lt;K, R&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="1130,-555 1234,-555 "/>
<text text-anchor="start" x="1138" y="-539.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">kv: kv_engine,</text>
<polyline fill="none" stroke="#60b5ac" points="1130,-532 1234,-532 "/>
<text text-anchor="start" x="1138" y="-516.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">raft: raft_engine</text>
</g>
<!-- Engines_RocksEngine_RaftLogEngine&#45;&gt;engines -->
<g id="edge37" class="edge">
<title>Engines_RocksEngine_RaftLogEngine&#45;&gt;engines</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M585.39,-801.54C685.29,-826.05 830.52,-845.83 946,-797 1035.58,-759.12 1107.84,-668.54 1147.55,-609.57"/>
<polygon fill="green" stroke="green" points="1150.55,-611.38 1153.17,-601.11 1144.72,-607.51 1150.55,-611.38"/>
</g>
<!-- Engines_RocksEngine_RocksEngine -->
<g id="node31" class="node">
<title>Engines_RocksEngine_RocksEngine</title>
<path fill="none" stroke="#1c2123" d="M365,-628C365,-628 569,-628 569,-628 575,-628 581,-634 581,-640 581,-640 581,-692 581,-692 581,-698 575,-704 569,-704 569,-704 365,-704 365,-704 359,-704 353,-698 353,-692 353,-692 353,-640 353,-640 353,-634 359,-628 365,-628"/>
<text text-anchor="start" x="361" y="-688.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Engines&lt;RocksEngine, RocksEngine&gt;</text>
<text text-anchor="start" x="361" y="-673.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> KV都使用RocksEngine</text>
<polyline fill="none" stroke="#1c2123" points="353,-666 581,-666 "/>
<text text-anchor="start" x="361" y="-650.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft engine路径为</text>
<text text-anchor="start" x="361" y="-635.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> config.raft_store.raftdb_path</text>
</g>
<!-- Engines_RocksEngine_RocksEngine&#45;&gt;init_engines -->
<g id="edge38" class="edge">
<title>Engines_RocksEngine_RocksEngine&#45;&gt;init_engines</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M581.27,-702.07C606.49,-710.11 632,-718.23 653.13,-724.96"/>
<polygon fill="green" stroke="green" points="652.24,-728.35 662.83,-728.05 654.36,-721.68 652.24,-728.35"/>
</g>
<!-- Engines_RocksEngine_RocksEngine&#45;&gt;engines -->
<g id="edge39" class="edge">
<title>Engines_RocksEngine_RocksEngine&#45;&gt;engines</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M581.2,-655.4C642.55,-649.12 719.6,-640.36 788,-630 905.98,-612.13 1042.59,-584.47 1119.7,-568.21"/>
<polygon fill="green" stroke="green" points="1120.66,-571.58 1129.72,-566.09 1119.21,-564.73 1120.66,-571.58"/>
</g>
<!-- init_raw_engines -->
<g id="node32" class="node">
<title>init_raw_engines</title>
<path fill="none" stroke="#1c2123" d="M114.5,-723C114.5,-723 296.5,-723 296.5,-723 302.5,-723 308.5,-729 308.5,-735 308.5,-735 308.5,-795 308.5,-795 308.5,-801 302.5,-807 296.5,-807 296.5,-807 114.5,-807 114.5,-807 108.5,-807 102.5,-801 102.5,-795 102.5,-795 102.5,-735 102.5,-735 102.5,-729 108.5,-723 114.5,-723"/>
<text text-anchor="middle" x="205.5" y="-791.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">init_raw_engines</text>
<polyline fill="none" stroke="#1c2123" points="102.5,-784 308.5,-784 "/>
<text text-anchor="start" x="110.5" y="-768.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">初始化kv engine, 数据库路径为</text>
<text text-anchor="start" x="110.5" y="-753.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> config.storage.data_dir/db</text>
<polyline fill="none" stroke="#1c2123" points="102.5,-746 308.5,-746 "/>
<text text-anchor="start" x="110.5" y="-730.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">初始化raft engine</text>
</g>
<!-- init_raw_engines&#45;&gt;Engines_RocksEngine_RaftLogEngine -->
<g id="edge34" class="edge">
<title>init_raw_engines&#45;&gt;Engines_RocksEngine_RaftLogEngine</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M308.69,-765C318.58,-765 328.7,-765 338.79,-765"/>
<polygon fill="green" stroke="green" points="338.88,-768.5 348.88,-765 338.88,-761.5 338.88,-768.5"/>
</g>
<!-- init_raw_engines&#45;&gt;Engines_RocksEngine_RocksEngine -->
<g id="edge35" class="edge">
<title>init_raw_engines&#45;&gt;Engines_RocksEngine_RocksEngine</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M308.69,-726.01C324.31,-720.06 340.49,-713.88 356.27,-707.86"/>
<polygon fill="green" stroke="green" points="357.93,-710.97 366.03,-704.14 355.44,-704.43 357.93,-710.97"/>
</g>
<!-- engines&#45;&gt;PollContext -->
<g id="edge41" class="edge">
<title>engines&#45;&gt;PollContext</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1234.32,-537.86C1276.96,-525.14 1339.5,-510 1395.5,-510 1395.5,-510 1395.5,-510 1738.5,-510 1851.78,-510 1909.55,-572.6 1993,-496 2058.47,-435.9 1975.62,-374.41 2021,-298 2093.93,-175.21 2248.2,-91.52 2327.18,-54.9"/>
<polygon fill="green" stroke="green" points="2328.79,-58.02 2336.42,-50.67 2325.87,-51.65 2328.79,-58.02"/>
</g>
<!-- engines&#45;&gt;start -->
<g id="edge40" class="edge">
<title>engines&#45;&gt;start</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1231.77,-508.9C1232.56,-507.62 1233.3,-506.31 1234,-505 1289.6,-400.22 1296.3,-254.51 1296.47,-193.57"/>
<polygon fill="green" stroke="green" points="1299.97,-193.2 1296.43,-183.21 1292.97,-193.22 1299.97,-193.2"/>
</g>
<!-- engines_kv_clone -->
<g id="node34" class="node">
<title>engines_kv_clone</title>
<path fill="none" stroke="#1c2123" d="M2033,-508.5C2033,-508.5 2200,-508.5 2200,-508.5 2206,-508.5 2212,-514.5 2212,-520.5 2212,-520.5 2212,-557.5 2212,-557.5 2212,-563.5 2206,-569.5 2200,-569.5 2200,-569.5 2033,-569.5 2033,-569.5 2027,-569.5 2021,-563.5 2021,-557.5 2021,-557.5 2021,-520.5 2021,-520.5 2021,-514.5 2027,-508.5 2033,-508.5"/>
<text text-anchor="middle" x="2116.5" y="-554.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">engines.kv.clone()</text>
<polyline fill="none" stroke="#1c2123" points="2021,-546.5 2212,-546.5 "/>
<text text-anchor="start" x="2029" y="-531.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyContext使用了kv Engine</text>
<text text-anchor="start" x="2029" y="-516.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 也就是RocksEngine</text>
</g>
<!-- engines&#45;&gt;engines_kv_clone -->
<g id="edge42" class="edge">
<title>engines&#45;&gt;engines_kv_clone</title>
<path fill="none" stroke="#666666" d="M1234.08,-552C1277.11,-549.73 1340.31,-547 1395.5,-547 1395.5,-547 1395.5,-547 1738.5,-547 1830.44,-547 1934.97,-544.59 2010.6,-542.42"/>
<polygon fill="#666666" stroke="#666666" points="2010.72,-545.92 2020.61,-542.13 2010.51,-538.92 2010.72,-545.92"/>
</g>
<!-- engines_kv_clone&#45;&gt;kv_wb -->
<g id="edge44" class="edge">
<title>engines_kv_clone&#45;&gt;kv_wb</title>
<path fill="none" stroke="#666666" d="M2195.66,-508.48C2204.01,-504.55 2212.27,-500.37 2220,-496 2253.49,-477.08 2288.29,-452.24 2316.49,-430.57"/>
<polygon fill="#666666" stroke="#666666" points="2318.88,-433.15 2324.64,-424.26 2314.59,-427.61 2318.88,-433.15"/>
</g>
<!-- engines_kv_clone&#45;&gt;ApplyContext -->
<g id="edge43" class="edge">
<title>engines_kv_clone&#45;&gt;ApplyContext</title>
<path fill="none" stroke="#666666" d="M2212.27,-519.08C2313.09,-497.89 2469.18,-465.07 2551.8,-447.71"/>
<polygon fill="#666666" stroke="#666666" points="2552.68,-451.1 2561.75,-445.62 2551.24,-444.25 2552.68,-451.1"/>
</g>
<!-- run_tikv -->
<g id="node35" class="node">
<title>run_tikv</title>
<path fill="none" stroke="#1c2123" d="M50,-783C50,-783 12,-783 12,-783 6,-783 0,-777 0,-771 0,-771 0,-759 0,-759 0,-753 6,-747 12,-747 12,-747 50,-747 50,-747 56,-747 62,-753 62,-759 62,-759 62,-771 62,-771 62,-777 56,-783 50,-783"/>
<text text-anchor="middle" x="31" y="-761.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">run_tikv</text>
</g>
<!-- run_tikv&#45;&gt;TiKVServer_init -->
<g id="edge45" class="edge">
<title>run_tikv&#45;&gt;TiKVServer_init</title>
<path fill="none" stroke="#666666" d="M50.85,-746.83C61.84,-736.64 76.23,-724.01 90,-714 103.09,-704.49 117.57,-695.09 131.72,-686.47"/>
<polygon fill="#666666" stroke="#666666" points="133.7,-689.36 140.47,-681.2 130.09,-683.36 133.7,-689.36"/>
</g>
<!-- run_tikv&#45;&gt;init_servers -->
<g id="edge46" class="edge">
<title>run_tikv&#45;&gt;init_servers</title>
<path fill="none" stroke="#666666" d="M32.47,-746.99C34.4,-710.37 43.92,-626.67 90,-579 90.93,-578.04 91.88,-577.11 92.85,-576.19"/>
<polygon fill="#666666" stroke="#666666" points="95.28,-578.72 100.72,-569.63 90.8,-573.35 95.28,-578.72"/>
</g>
<!-- run_tikv&#45;&gt;init_engines -->
<g id="edge47" class="edge">
<title>run_tikv&#45;&gt;init_engines</title>
<path fill="none" stroke="#666666" d="M33.73,-783.28C37.69,-813.47 50.38,-872.98 90,-899 172.84,-953.41 214.95,-913.46 313,-899 437.91,-880.58 470.31,-869.81 585,-817 615.91,-802.77 648.24,-781.54 671.31,-765.13"/>
<polygon fill="#666666" stroke="#666666" points="673.61,-767.79 679.68,-759.11 669.52,-762.11 673.61,-767.79"/>
</g>
<!-- run_tikv&#45;&gt;init_raw_engines -->
<g id="edge48" class="edge">
<title>run_tikv&#45;&gt;init_raw_engines</title>
<path fill="none" stroke="#666666" d="M62.05,-765C70.92,-765 81.19,-765 92.08,-765"/>
<polygon fill="#666666" stroke="#666666" points="92.22,-768.5 102.22,-765 92.22,-761.5 92.22,-768.5"/>
</g>
<!-- config_raft_engine_enable -->
<g id="node36" class="node">
<title>config_raft_engine_enable</title>
<path fill="none" stroke="#1c2123" d="M274,-890C274,-890 137,-890 137,-890 131,-890 125,-884 125,-878 125,-878 125,-866 125,-866 125,-860 131,-854 137,-854 137,-854 274,-854 274,-854 280,-854 286,-860 286,-866 286,-866 286,-878 286,-878 286,-884 280,-890 274,-890"/>
<text text-anchor="middle" x="205.5" y="-868.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">config_raft_engine_enable</text>
</g>
<!-- run_tikv&#45;&gt;config_raft_engine_enable -->
<g id="edge49" class="edge">
<title>run_tikv&#45;&gt;config_raft_engine_enable</title>
<path fill="none" stroke="#666666" d="M39.27,-783.1C48.18,-802.82 65.21,-833.72 90,-850 97.7,-855.06 106.29,-859.01 115.2,-862.1"/>
<polygon fill="#666666" stroke="#666666" points="114.38,-865.51 124.97,-865.11 116.45,-858.82 114.38,-865.51"/>
</g>
<!-- config_raft_engine_enable&#45;&gt;Engines_RocksEngine_RaftLogEngine -->
<g id="edge50" class="edge">
<title>config_raft_engine_enable&#45;&gt;Engines_RocksEngine_RaftLogEngine</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M286.06,-858.35C295.26,-855.95 304.42,-853.19 313,-850 339.77,-840.07 367.5,-825.97 391.88,-812.11"/>
<polygon fill="green" stroke="green" points="393.78,-815.05 400.7,-807.02 390.29,-808.99 393.78,-815.05"/>
</g>
<!-- config_raft_engine_enable&#45;&gt;Engines_RocksEngine_RocksEngine -->
<g id="edge51" class="edge">
<title>config_raft_engine_enable&#45;&gt;Engines_RocksEngine_RocksEngine</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M286.15,-865.91C296.07,-862.32 305.39,-857.2 313,-850 358.41,-807.02 307.77,-761 349,-714 349.88,-713 350.77,-712.02 351.7,-711.07"/>
<polygon fill="green" stroke="green" points="354.24,-713.48 359.17,-704.11 349.47,-708.36 354.24,-713.48"/>
</g>
</g>
</svg>
