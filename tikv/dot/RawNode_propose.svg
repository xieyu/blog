<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: propose Pages: 1 -->
<svg width="1750pt" height="520pt"
 viewBox="0.00 0.00 1750.00 520.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 516)">
<title>propose</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-516 1746,-516 1746,4 -4,4"/>
<g id="clust2" class="cluster">
<title>cluster_Unstable</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M962,-218C962,-218 1500,-218 1500,-218 1506,-218 1512,-224 1512,-230 1512,-230 1512,-376 1512,-376 1512,-382 1506,-388 1500,-388 1500,-388 962,-388 962,-388 956,-388 950,-382 950,-376 950,-376 950,-230 950,-230 950,-224 956,-218 962,-218"/>
<text text-anchor="middle" x="1231" y="-368" font-family="Times,serif" font-size="20.00">Unstable</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_RaftLog</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M772.5,-396C772.5,-396 1246,-396 1246,-396 1252,-396 1258,-402 1258,-408 1258,-408 1258,-492 1258,-492 1258,-498 1252,-504 1246,-504 1246,-504 772.5,-504 772.5,-504 766.5,-504 760.5,-498 760.5,-492 760.5,-492 760.5,-408 760.5,-408 760.5,-402 766.5,-396 772.5,-396"/>
<text text-anchor="middle" x="1009.25" y="-484" font-family="Times,serif" font-size="20.00">RaftLog</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_RaftCore</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M767,-8C767,-8 1722,-8 1722,-8 1728,-8 1734,-14 1734,-20 1734,-20 1734,-198 1734,-198 1734,-204 1728,-210 1722,-210 1722,-210 767,-210 767,-210 761,-210 755,-204 755,-198 755,-198 755,-20 755,-20 755,-14 761,-8 767,-8"/>
<text text-anchor="middle" x="1244.5" y="-190" font-family="Times,serif" font-size="20.00">RaftCore</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_Raft</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M345,-301C345,-301 723,-301 723,-301 729,-301 735,-307 735,-313 735,-313 735,-479 735,-479 735,-485 729,-491 723,-491 723,-491 345,-491 345,-491 339,-491 333,-485 333,-479 333,-479 333,-313 333,-313 333,-307 339,-301 345,-301"/>
<text text-anchor="middle" x="534" y="-471" font-family="Times,serif" font-size="20.00">Raft</text>
</g>
<!-- MsgPropose -->
<g id="node1" class="node">
<title>MsgPropose</title>
<path fill="#feed9b" stroke="#f7e495" d="M168,-384C168,-384 293,-384 293,-384 299,-384 305,-390 305,-396 305,-396 305,-418 305,-418 305,-424 299,-430 293,-430 293,-430 168,-430 168,-430 162,-430 156,-424 156,-418 156,-418 156,-396 156,-396 156,-390 162,-384 168,-384"/>
<text text-anchor="middle" x="230.5" y="-414.8" font-family="Times,serif" font-size="14.00" fill="#40575d">MsgPropose</text>
<polyline fill="none" stroke="#f7e495" points="156,-407 305,-407 "/>
<text text-anchor="middle" x="230.5" y="-391.8" font-family="Times,serif" font-size="14.00" fill="#40575d">from = self.raft.id Entry</text>
<polyline fill="none" stroke="#f7e495" points="156,-384 305,-384 "/>
<polyline fill="none" stroke="#f7e495" points="156,-384 305,-384 "/>
</g>
<!-- step -->
<g id="node3" class="node">
<title>step</title>
<path fill="none" stroke="#1c2123" d="M383,-399C383,-399 353,-399 353,-399 347,-399 341,-393 341,-387 341,-387 341,-375 341,-375 341,-369 347,-363 353,-363 353,-363 383,-363 383,-363 389,-363 395,-369 395,-375 395,-375 395,-387 395,-387 395,-393 389,-399 383,-399"/>
<text text-anchor="middle" x="368" y="-377.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">step</text>
</g>
<!-- MsgPropose&#45;&gt;step -->
<g id="edge3" class="edge">
<title>MsgPropose&#45;&gt;step</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M305.2,-392.86C314.09,-391.15 322.84,-389.47 330.84,-387.94"/>
<polygon fill="green" stroke="green" points="331.7,-391.34 340.86,-386.02 330.38,-384.46 331.7,-391.34"/>
</g>
<!-- RawNode_propose -->
<g id="node2" class="node">
<title>RawNode_propose</title>
<path fill="none" stroke="#1c2123" d="M108,-399C108,-399 12,-399 12,-399 6,-399 0,-393 0,-387 0,-387 0,-375 0,-375 0,-369 6,-363 12,-363 12,-363 108,-363 108,-363 114,-363 120,-369 120,-375 120,-375 120,-387 120,-387 120,-393 114,-399 108,-399"/>
<text text-anchor="middle" x="60" y="-377.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_propose</text>
</g>
<!-- RawNode_propose&#45;&gt;MsgPropose -->
<g id="edge1" class="edge">
<title>RawNode_propose&#45;&gt;MsgPropose</title>
<path fill="none" stroke="#666666" d="M120.41,-390.17C128.65,-391.44 137.24,-392.76 145.82,-394.09"/>
<polygon fill="#666666" stroke="#666666" points="145.45,-397.57 155.86,-395.64 146.52,-390.65 145.45,-397.57"/>
</g>
<!-- RawNode_propose&#45;&gt;step -->
<g id="edge2" class="edge">
<title>RawNode_propose&#45;&gt;step</title>
<path fill="none" stroke="#666666" d="M120.01,-376.69C131.92,-375.99 144.36,-375.37 156,-375 222.19,-372.91 238.85,-371.81 305,-375 313.37,-375.4 322.35,-376.11 330.81,-376.91"/>
<polygon fill="#666666" stroke="#666666" points="330.5,-380.39 340.79,-377.9 331.19,-373.43 330.5,-380.39"/>
</g>
<!-- step_leader -->
<g id="node18" class="node">
<title>step_leader</title>
<path fill="none" stroke="#1c2123" d="M443,-358C443,-358 589,-358 589,-358 595,-358 601,-364 601,-370 601,-370 601,-392 601,-392 601,-398 595,-404 589,-404 589,-404 443,-404 443,-404 437,-404 431,-398 431,-392 431,-392 431,-370 431,-370 431,-364 437,-358 443,-358"/>
<text text-anchor="middle" x="516" y="-388.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">step_leader</text>
<polyline fill="none" stroke="#1c2123" points="431,-381 601,-381 "/>
<text text-anchor="start" x="439" y="-365.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理MsgPropose类型消息</text>
</g>
<!-- step&#45;&gt;step_leader -->
<g id="edge18" class="edge">
<title>step&#45;&gt;step_leader</title>
<path fill="none" stroke="#666666" d="M395.1,-381C402.69,-381 411.45,-381 420.72,-381"/>
<polygon fill="#666666" stroke="#666666" points="420.93,-384.5 430.93,-381 420.93,-377.5 420.93,-384.5"/>
</g>
<!-- truncate_and_append -->
<g id="node4" class="node">
<title>truncate_and_append</title>
<path fill="none" stroke="#1c2123" d="M1078,-314C1078,-314 970,-314 970,-314 964,-314 958,-308 958,-302 958,-302 958,-290 958,-290 958,-284 964,-278 970,-278 970,-278 1078,-278 1078,-278 1084,-278 1090,-284 1090,-290 1090,-290 1090,-302 1090,-302 1090,-308 1084,-314 1078,-314"/>
<text text-anchor="middle" x="1024" y="-292.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">truncate_and_append</text>
</g>
<!-- entries -->
<g id="node5" class="node">
<title>entries</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1146,-226.5C1146,-226.5 1249,-226.5 1249,-226.5 1255,-226.5 1261,-232.5 1261,-238.5 1261,-238.5 1261,-283.5 1261,-283.5 1261,-289.5 1255,-295.5 1249,-295.5 1249,-295.5 1146,-295.5 1146,-295.5 1140,-295.5 1134,-289.5 1134,-283.5 1134,-283.5 1134,-238.5 1134,-238.5 1134,-232.5 1140,-226.5 1146,-226.5"/>
<text text-anchor="middle" x="1197.5" y="-280.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">entries</text>
<polyline fill="none" stroke="#60b5ac" points="1134,-272.5 1261,-272.5 "/>
<text text-anchor="middle" x="1197.5" y="-257.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Unstable</text>
<polyline fill="none" stroke="#60b5ac" points="1134,-249.5 1261,-249.5 "/>
<text text-anchor="start" x="1142" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">entries: Vec&lt;Entry&gt;</text>
</g>
<!-- truncate_and_append&#45;&gt;entries -->
<g id="edge4" class="edge">
<title>truncate_and_append&#45;&gt;entries</title>
<path fill="none" stroke="#666666" d="M1090.33,-282.67C1101.27,-280.43 1112.68,-278.11 1123.8,-275.84"/>
<polygon fill="#666666" stroke="#666666" points="1124.8,-279.2 1133.9,-273.78 1123.4,-272.35 1124.8,-279.2"/>
</g>
<!-- maybe_last_index -->
<g id="node6" class="node">
<title>maybe_last_index</title>
<path fill="none" stroke="#1c2123" d="M1243.5,-350C1243.5,-350 1151.5,-350 1151.5,-350 1145.5,-350 1139.5,-344 1139.5,-338 1139.5,-338 1139.5,-326 1139.5,-326 1139.5,-320 1145.5,-314 1151.5,-314 1151.5,-314 1243.5,-314 1243.5,-314 1249.5,-314 1255.5,-320 1255.5,-326 1255.5,-326 1255.5,-338 1255.5,-338 1255.5,-344 1249.5,-350 1243.5,-350"/>
<text text-anchor="middle" x="1197.5" y="-328.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_last_index</text>
</g>
<!-- snapshot -->
<g id="node7" class="node">
<title>snapshot</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1317,-280.5C1317,-280.5 1492,-280.5 1492,-280.5 1498,-280.5 1504,-286.5 1504,-292.5 1504,-292.5 1504,-337.5 1504,-337.5 1504,-343.5 1498,-349.5 1492,-349.5 1492,-349.5 1317,-349.5 1317,-349.5 1311,-349.5 1305,-343.5 1305,-337.5 1305,-337.5 1305,-292.5 1305,-292.5 1305,-286.5 1311,-280.5 1317,-280.5"/>
<text text-anchor="middle" x="1404.5" y="-334.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">snapshot</text>
<polyline fill="none" stroke="#60b5ac" points="1305,-326.5 1504,-326.5 "/>
<text text-anchor="start" x="1313" y="-311.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Unstable</text>
<polyline fill="none" stroke="#60b5ac" points="1305,-303.5 1504,-303.5 "/>
<text text-anchor="start" x="1313" y="-288.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub snapshot: Option&lt;Snapshot&gt;</text>
</g>
<!-- maybe_last_index&#45;&gt;snapshot -->
<g id="edge5" class="edge">
<title>maybe_last_index&#45;&gt;snapshot</title>
<path fill="none" stroke="#666666" d="M1255.6,-327.26C1267.78,-326.25 1281.03,-325.16 1294.43,-324.04"/>
<polygon fill="#666666" stroke="#666666" points="1295.02,-327.51 1304.69,-323.19 1294.44,-320.53 1295.02,-327.51"/>
</g>
<!-- last_index -->
<g id="node8" class="node">
<title>last_index</title>
<path fill="none" stroke="#1c2123" d="M1048,-453C1048,-453 1000,-453 1000,-453 994,-453 988,-447 988,-441 988,-441 988,-429 988,-429 988,-423 994,-417 1000,-417 1000,-417 1048,-417 1048,-417 1054,-417 1060,-423 1060,-429 1060,-429 1060,-441 1060,-441 1060,-447 1054,-453 1048,-453"/>
<text text-anchor="middle" x="1024" y="-431.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">last_index</text>
</g>
<!-- last_index&#45;&gt;maybe_last_index -->
<g id="edge6" class="edge">
<title>last_index&#45;&gt;maybe_last_index</title>
<path fill="none" stroke="#666666" d="M1055.27,-416.82C1083.71,-399.74 1126.43,-374.08 1157.43,-355.46"/>
<polygon fill="#666666" stroke="#666666" points="1159.48,-358.32 1166.25,-350.17 1155.87,-352.32 1159.48,-358.32"/>
</g>
<!-- store_last_index -->
<g id="node9" class="node">
<title>store_last_index</title>
<path fill="none" stroke="#1c2123" d="M1238,-453C1238,-453 1157,-453 1157,-453 1151,-453 1145,-447 1145,-441 1145,-441 1145,-429 1145,-429 1145,-423 1151,-417 1157,-417 1157,-417 1238,-417 1238,-417 1244,-417 1250,-423 1250,-429 1250,-429 1250,-441 1250,-441 1250,-447 1244,-453 1238,-453"/>
<text text-anchor="middle" x="1197.5" y="-431.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_last_index</text>
</g>
<!-- last_index&#45;&gt;store_last_index -->
<g id="edge7" class="edge">
<title>last_index&#45;&gt;store_last_index</title>
<path fill="none" stroke="#666666" d="M1060.12,-435C1081.57,-435 1109.6,-435 1134.66,-435"/>
<polygon fill="#666666" stroke="#666666" points="1134.83,-438.5 1144.83,-435 1134.83,-431.5 1134.83,-438.5"/>
</g>
<!-- append -->
<g id="node10" class="node">
<title>append</title>
<path fill="none" stroke="#1c2123" d="M780.5,-404.5C780.5,-404.5 904.5,-404.5 904.5,-404.5 910.5,-404.5 916.5,-410.5 916.5,-416.5 916.5,-416.5 916.5,-453.5 916.5,-453.5 916.5,-459.5 910.5,-465.5 904.5,-465.5 904.5,-465.5 780.5,-465.5 780.5,-465.5 774.5,-465.5 768.5,-459.5 768.5,-453.5 768.5,-453.5 768.5,-416.5 768.5,-416.5 768.5,-410.5 774.5,-404.5 780.5,-404.5"/>
<text text-anchor="middle" x="842.5" y="-450.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">append</text>
<polyline fill="none" stroke="#1c2123" points="768.5,-442.5 916.5,-442.5 "/>
<text text-anchor="start" x="776.5" y="-427.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Appends a set of entries</text>
<text text-anchor="start" x="776.5" y="-412.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> to the unstable list</text>
</g>
<!-- append&#45;&gt;truncate_and_append -->
<g id="edge8" class="edge">
<title>append&#45;&gt;truncate_and_append</title>
<path fill="none" stroke="#666666" d="M882.89,-404.5C915.53,-379.22 961.31,-343.77 991.54,-320.36"/>
<polygon fill="#666666" stroke="#666666" points="993.86,-322.99 999.63,-314.1 989.58,-317.45 993.86,-322.99"/>
</g>
<!-- append&#45;&gt;last_index -->
<g id="edge9" class="edge">
<title>append&#45;&gt;last_index</title>
<path fill="none" stroke="#666666" d="M916.51,-435C937.21,-435 959.15,-435 977.7,-435"/>
<polygon fill="#666666" stroke="#666666" points="977.91,-438.5 987.91,-435 977.91,-431.5 977.91,-438.5"/>
</g>
<!-- send_append -->
<g id="node11" class="node">
<title>send_append</title>
<path fill="none" stroke="#1c2123" d="M775,-76.5C775,-76.5 910,-76.5 910,-76.5 916,-76.5 922,-82.5 922,-88.5 922,-88.5 922,-155.5 922,-155.5 922,-161.5 916,-167.5 910,-167.5 910,-167.5 775,-167.5 775,-167.5 769,-167.5 763,-161.5 763,-155.5 763,-155.5 763,-88.5 763,-88.5 763,-82.5 769,-76.5 775,-76.5"/>
<text text-anchor="middle" x="842.5" y="-152.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_append</text>
<polyline fill="none" stroke="#1c2123" points="763,-144.5 922,-144.5 "/>
<text text-anchor="start" x="771" y="-129.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Sends an append RPC</text>
<text text-anchor="start" x="771" y="-114.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> with new entries and</text>
<text text-anchor="start" x="771" y="-99.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> the current commit index</text>
<text text-anchor="middle" x="842.5" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> to the given peer;</text>
</g>
<!-- maybe_send_append -->
<g id="node12" class="node">
<title>maybe_send_append</title>
<path fill="none" stroke="#1c2123" d="M1077.5,-138C1077.5,-138 970.5,-138 970.5,-138 964.5,-138 958.5,-132 958.5,-126 958.5,-126 958.5,-114 958.5,-114 958.5,-108 964.5,-102 970.5,-102 970.5,-102 1077.5,-102 1077.5,-102 1083.5,-102 1089.5,-108 1089.5,-114 1089.5,-114 1089.5,-126 1089.5,-126 1089.5,-132 1083.5,-138 1077.5,-138"/>
<text text-anchor="middle" x="1024" y="-116.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_send_append</text>
</g>
<!-- send_append&#45;&gt;maybe_send_append -->
<g id="edge10" class="edge">
<title>send_append&#45;&gt;maybe_send_append</title>
<path fill="none" stroke="#666666" d="M922.23,-121.12C930.9,-121.03 939.7,-120.93 948.32,-120.83"/>
<polygon fill="#666666" stroke="#666666" points="948.36,-124.33 958.32,-120.72 948.28,-117.33 948.36,-124.33"/>
</g>
<!-- prepare_send_snapshot -->
<g id="node13" class="node">
<title>prepare_send_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1257,-67C1257,-67 1138,-67 1138,-67 1132,-67 1126,-61 1126,-55 1126,-55 1126,-43 1126,-43 1126,-37 1132,-31 1138,-31 1138,-31 1257,-31 1257,-31 1263,-31 1269,-37 1269,-43 1269,-43 1269,-55 1269,-55 1269,-61 1263,-67 1257,-67"/>
<text text-anchor="middle" x="1197.5" y="-45.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">prepare_send_snapshot</text>
</g>
<!-- maybe_send_append&#45;&gt;prepare_send_snapshot -->
<g id="edge11" class="edge">
<title>maybe_send_append&#45;&gt;prepare_send_snapshot</title>
<path fill="none" stroke="#666666" d="M1068.72,-101.9C1091.5,-92.47 1119.54,-80.86 1143.54,-70.93"/>
<polygon fill="#666666" stroke="#666666" points="1144.96,-74.13 1152.86,-67.07 1142.28,-67.66 1144.96,-74.13"/>
</g>
<!-- prepare_send_entries -->
<g id="node14" class="node">
<title>prepare_send_entries</title>
<path fill="none" stroke="#1c2123" d="M1251,-137C1251,-137 1144,-137 1144,-137 1138,-137 1132,-131 1132,-125 1132,-125 1132,-113 1132,-113 1132,-107 1138,-101 1144,-101 1144,-101 1251,-101 1251,-101 1257,-101 1263,-107 1263,-113 1263,-113 1263,-125 1263,-125 1263,-131 1257,-137 1251,-137"/>
<text text-anchor="middle" x="1197.5" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">prepare_send_entries</text>
</g>
<!-- maybe_send_append&#45;&gt;prepare_send_entries -->
<g id="edge12" class="edge">
<title>maybe_send_append&#45;&gt;prepare_send_entries</title>
<path fill="none" stroke="#666666" d="M1089.84,-119.62C1100.26,-119.56 1111.12,-119.5 1121.75,-119.44"/>
<polygon fill="#666666" stroke="#666666" points="1121.88,-122.94 1131.86,-119.38 1121.84,-115.94 1121.88,-122.94"/>
</g>
<!-- send -->
<g id="node15" class="node">
<title>send</title>
<path fill="none" stroke="#1c2123" d="M1552,-67.5C1552,-67.5 1714,-67.5 1714,-67.5 1720,-67.5 1726,-73.5 1726,-79.5 1726,-79.5 1726,-154.5 1726,-154.5 1726,-160.5 1720,-166.5 1714,-166.5 1714,-166.5 1552,-166.5 1552,-166.5 1546,-166.5 1540,-160.5 1540,-154.5 1540,-154.5 1540,-79.5 1540,-79.5 1540,-73.5 1546,-67.5 1552,-67.5"/>
<text text-anchor="middle" x="1633" y="-151.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send</text>
<polyline fill="none" stroke="#1c2123" points="1540,-143.5 1726,-143.5 "/>
<text text-anchor="start" x="1548" y="-128.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send persists state to</text>
<text text-anchor="start" x="1548" y="-113.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> stable storage and then</text>
<text text-anchor="start" x="1548" y="-98.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> sends to its mailbox.</text>
<polyline fill="none" stroke="#1c2123" points="1540,-90.5 1726,-90.5 "/>
<text text-anchor="start" x="1548" y="-75.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将消息放入Raft.msgs数组中</text>
</g>
<!-- maybe_send_append&#45;&gt;send -->
<g id="edge13" class="edge">
<title>maybe_send_append&#45;&gt;send</title>
<path fill="none" stroke="#666666" d="M1088.23,-138.01C1100.67,-141.06 1113.68,-143.91 1126,-146 1295.27,-174.67 1342.96,-191.01 1512,-161 1517.88,-159.96 1523.85,-158.65 1529.82,-157.14"/>
<polygon fill="#666666" stroke="#666666" points="1531.13,-160.41 1539.87,-154.42 1529.3,-153.65 1531.13,-160.41"/>
</g>
<!-- MsgSnapshot -->
<g id="node17" class="node">
<title>MsgSnapshot</title>
<path fill="#feed9b" stroke="#f7e495" d="M1336.5,-17C1336.5,-17 1472.5,-17 1472.5,-17 1478.5,-17 1484.5,-23 1484.5,-29 1484.5,-29 1484.5,-51 1484.5,-51 1484.5,-57 1478.5,-63 1472.5,-63 1472.5,-63 1336.5,-63 1336.5,-63 1330.5,-63 1324.5,-57 1324.5,-51 1324.5,-51 1324.5,-29 1324.5,-29 1324.5,-23 1330.5,-17 1336.5,-17"/>
<text text-anchor="middle" x="1404.5" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#40575d">MsgSnapshot</text>
<polyline fill="none" stroke="#f7e495" points="1324.5,-40 1484.5,-40 "/>
<text text-anchor="start" x="1332.5" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pending_request_snapshot</text>
</g>
<!-- prepare_send_snapshot&#45;&gt;MsgSnapshot -->
<g id="edge15" class="edge">
<title>prepare_send_snapshot&#45;&gt;MsgSnapshot</title>
<path fill="none" stroke="#666666" d="M1269.05,-45.9C1283.54,-45.27 1298.98,-44.59 1314.04,-43.93"/>
<polygon fill="#666666" stroke="#666666" points="1314.55,-47.41 1324.38,-43.47 1314.24,-40.42 1314.55,-47.41"/>
</g>
<!-- MsgAppend -->
<g id="node16" class="node">
<title>MsgAppend</title>
<path fill="#feed9b" stroke="#f7e495" d="M1320,-82.5C1320,-82.5 1489,-82.5 1489,-82.5 1495,-82.5 1501,-88.5 1501,-94.5 1501,-94.5 1501,-139.5 1501,-139.5 1501,-145.5 1495,-151.5 1489,-151.5 1489,-151.5 1320,-151.5 1320,-151.5 1314,-151.5 1308,-145.5 1308,-139.5 1308,-139.5 1308,-94.5 1308,-94.5 1308,-88.5 1314,-82.5 1320,-82.5"/>
<text text-anchor="middle" x="1404.5" y="-136.3" font-family="Times,serif" font-size="14.00" fill="#40575d">MsgAppend</text>
<polyline fill="none" stroke="#f7e495" points="1308,-128.5 1501,-128.5 "/>
<text text-anchor="start" x="1316" y="-113.3" font-family="Times,serif" font-size="14.00" fill="#40575d">m.log_term = term</text>
<polyline fill="none" stroke="#f7e495" points="1308,-105.5 1501,-105.5 "/>
<text text-anchor="start" x="1316" y="-90.3" font-family="Times,serif" font-size="14.00" fill="#40575d">comit = self.raft_log.committed</text>
</g>
<!-- prepare_send_entries&#45;&gt;MsgAppend -->
<g id="edge14" class="edge">
<title>prepare_send_entries&#45;&gt;MsgAppend</title>
<path fill="none" stroke="#666666" d="M1263.08,-118.37C1274.07,-118.26 1285.73,-118.15 1297.45,-118.03"/>
<polygon fill="#666666" stroke="#666666" points="1297.78,-121.53 1307.75,-117.93 1297.71,-114.53 1297.78,-121.53"/>
</g>
<!-- MsgAppend&#45;&gt;send -->
<g id="edge16" class="edge">
<title>MsgAppend&#45;&gt;send</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1501.23,-117C1510.63,-117 1520.19,-117 1529.65,-117"/>
<polygon fill="green" stroke="green" points="1529.86,-120.5 1539.86,-117 1529.86,-113.5 1529.86,-120.5"/>
</g>
<!-- MsgSnapshot&#45;&gt;send -->
<g id="edge17" class="edge">
<title>MsgSnapshot&#45;&gt;send</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1481.57,-63.05C1491.83,-66.31 1502.19,-69.68 1512,-73 1517.93,-75.01 1524.01,-77.1 1530.14,-79.25"/>
<polygon fill="green" stroke="green" points="1529.2,-82.63 1539.79,-82.65 1531.53,-76.03 1529.2,-82.63"/>
</g>
<!-- contains_key -->
<g id="node19" class="node">
<title>contains_key</title>
<path fill="none" stroke="#1c2123" d="M714,-345C714,-345 650,-345 650,-345 644,-345 638,-339 638,-333 638,-333 638,-321 638,-321 638,-315 644,-309 650,-309 650,-309 714,-309 714,-309 720,-309 726,-315 726,-321 726,-321 726,-333 726,-333 726,-339 720,-345 714,-345"/>
<text text-anchor="middle" x="682" y="-323.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">contains_key</text>
</g>
<!-- step_leader&#45;&gt;contains_key -->
<g id="edge19" class="edge">
<title>step_leader&#45;&gt;contains_key</title>
<path fill="none" stroke="#666666" d="M587.03,-357.94C600.76,-353.42 614.96,-348.75 628.02,-344.44"/>
<polygon fill="#666666" stroke="#666666" points="629.36,-347.69 637.77,-341.23 627.18,-341.04 629.36,-347.69"/>
</g>
<!-- append_entry -->
<g id="node20" class="node">
<title>append_entry</title>
<path fill="none" stroke="#1c2123" d="M715,-453C715,-453 649,-453 649,-453 643,-453 637,-447 637,-441 637,-441 637,-429 637,-429 637,-423 643,-417 649,-417 649,-417 715,-417 715,-417 721,-417 727,-423 727,-429 727,-429 727,-441 727,-441 727,-447 721,-453 715,-453"/>
<text text-anchor="middle" x="682" y="-431.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">append_entry</text>
</g>
<!-- step_leader&#45;&gt;append_entry -->
<g id="edge20" class="edge">
<title>step_leader&#45;&gt;append_entry</title>
<path fill="none" stroke="#666666" d="M587.03,-404.06C600.49,-408.49 614.38,-413.07 627.23,-417.3"/>
<polygon fill="#666666" stroke="#666666" points="626.23,-420.65 636.82,-420.45 628.42,-414 626.23,-420.65"/>
</g>
<!-- bcast_append -->
<g id="node21" class="node">
<title>bcast_append</title>
<path fill="none" stroke="#1c2123" d="M715,-399C715,-399 649,-399 649,-399 643,-399 637,-393 637,-387 637,-387 637,-375 637,-375 637,-369 643,-363 649,-363 649,-363 715,-363 715,-363 721,-363 727,-369 727,-375 727,-375 727,-387 727,-387 727,-393 721,-399 715,-399"/>
<text text-anchor="middle" x="682" y="-377.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">bcast_append</text>
</g>
<!-- step_leader&#45;&gt;bcast_append -->
<g id="edge21" class="edge">
<title>step_leader&#45;&gt;bcast_append</title>
<path fill="none" stroke="#666666" d="M601.4,-381C610.01,-381 618.58,-381 626.74,-381"/>
<polygon fill="#666666" stroke="#666666" points="626.83,-384.5 636.83,-381 626.83,-377.5 626.83,-384.5"/>
</g>
<!-- append_entry&#45;&gt;last_index -->
<g id="edge22" class="edge">
<title>append_entry&#45;&gt;last_index</title>
<path fill="none" stroke="#666666" d="M707.98,-453.02C721.25,-461.49 738.25,-470.66 755,-475 826.85,-493.62 849.09,-488.91 922,-475 941.23,-471.33 961.46,-464.06 978.73,-456.72"/>
<polygon fill="#666666" stroke="#666666" points="980.24,-459.88 987.99,-452.65 977.43,-453.47 980.24,-459.88"/>
</g>
<!-- append_entry&#45;&gt;append -->
<g id="edge23" class="edge">
<title>append_entry&#45;&gt;append</title>
<path fill="none" stroke="#666666" d="M727.15,-435C736.87,-435 747.47,-435 758.17,-435"/>
<polygon fill="#666666" stroke="#666666" points="758.43,-438.5 768.43,-435 758.43,-431.5 758.43,-438.5"/>
</g>
<!-- bcast_append&#45;&gt;send_append -->
<g id="edge24" class="edge">
<title>bcast_append&#45;&gt;send_append</title>
<path fill="none" stroke="#666666" d="M724.31,-362.96C728.19,-360.3 731.84,-357.31 735,-354 782.72,-303.91 811.84,-228.65 827.3,-177.54"/>
<polygon fill="#666666" stroke="#666666" points="830.74,-178.23 830.21,-167.65 824.03,-176.25 830.74,-178.23"/>
</g>
</g>
</svg>
