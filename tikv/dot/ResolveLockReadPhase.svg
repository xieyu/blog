<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: ResolveLockReadPhase Pages: 1 -->
<svg width="904pt" height="478pt"
 viewBox="0.00 0.00 904.00 478.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 474)">
<title>ResolveLockReadPhase</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-474 900,-474 900,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_MvccReader</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M500,-8C500,-8 876,-8 876,-8 882,-8 888,-14 888,-20 888,-20 888,-188 888,-188 888,-194 882,-200 876,-200 876,-200 500,-200 500,-200 494,-200 488,-194 488,-188 488,-188 488,-20 488,-20 488,-14 494,-8 500,-8"/>
<text text-anchor="middle" x="688" y="-180" font-family="Times,serif" font-size="20.00">MvccReader</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_ResolveLockReadPhase</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-208C20,-208 703.5,-208 703.5,-208 709.5,-208 715.5,-214 715.5,-220 715.5,-220 715.5,-450 715.5,-450 715.5,-456 709.5,-462 703.5,-462 703.5,-462 20,-462 20,-462 14,-462 8,-456 8,-450 8,-450 8,-220 8,-220 8,-214 14,-208 20,-208"/>
<text text-anchor="middle" x="361.75" y="-442" font-family="Times,serif" font-size="20.00">ResolveLockReadPhase</text>
</g>
<!-- MvccReader_new -->
<g id="node1" class="node">
<title>MvccReader_new</title>
<path fill="none" stroke="#1c2123" d="M656.5,-162C656.5,-162 564.5,-162 564.5,-162 558.5,-162 552.5,-156 552.5,-150 552.5,-150 552.5,-138 552.5,-138 552.5,-132 558.5,-126 564.5,-126 564.5,-126 656.5,-126 656.5,-126 662.5,-126 668.5,-132 668.5,-138 668.5,-138 668.5,-150 668.5,-150 668.5,-156 662.5,-162 656.5,-162"/>
<text text-anchor="middle" x="610.5" y="-140.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">MvccReader_new</text>
</g>
<!-- scan_locks -->
<g id="node2" class="node">
<title>scan_locks</title>
<path fill="none" stroke="#1c2123" d="M508,-16.5C508,-16.5 713,-16.5 713,-16.5 719,-16.5 725,-22.5 725,-28.5 725,-28.5 725,-95.5 725,-95.5 725,-101.5 719,-107.5 713,-107.5 713,-107.5 508,-107.5 508,-107.5 502,-107.5 496,-101.5 496,-95.5 496,-95.5 496,-28.5 496,-28.5 496,-22.5 502,-16.5 508,-16.5"/>
<text text-anchor="middle" x="610.5" y="-92.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">scan_locks</text>
<polyline fill="none" stroke="#1c2123" points="496,-84.5 725,-84.5 "/>
<text text-anchor="start" x="504" y="-69.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Scan locks that satisfies</text>
<text text-anchor="start" x="504" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> `filter(lock)` returns true,</text>
<text text-anchor="start" x="504" y="-39.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> from the given start key `start`.</text>
<text text-anchor="start" x="504" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> At most `limit` locks will be returned.</text>
</g>
<!-- create_lock_cursor -->
<g id="node3" class="node">
<title>create_lock_cursor</title>
<path fill="none" stroke="#1c2123" d="M868,-52C868,-52 773,-52 773,-52 767,-52 761,-46 761,-40 761,-40 761,-28 761,-28 761,-22 767,-16 773,-16 773,-16 868,-16 868,-16 874,-16 880,-22 880,-28 880,-28 880,-40 880,-40 880,-46 874,-52 868,-52"/>
<text text-anchor="middle" x="820.5" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">create_lock_cursor</text>
</g>
<!-- scan_locks&#45;&gt;create_lock_cursor -->
<g id="edge1" class="edge">
<title>scan_locks&#45;&gt;create_lock_cursor</title>
<path fill="none" stroke="#666666" d="M725.24,-46.69C734,-45.51 742.68,-44.34 751,-43.22"/>
<polygon fill="#666666" stroke="#666666" points="751.53,-46.68 760.97,-41.88 750.59,-39.74 751.53,-46.68"/>
</g>
<!-- cursor_seek -->
<g id="node4" class="node">
<title>cursor_seek</title>
<path fill="none" stroke="#1c2123" d="M849,-106C849,-106 792,-106 792,-106 786,-106 780,-100 780,-94 780,-94 780,-82 780,-82 780,-76 786,-70 792,-70 792,-70 849,-70 849,-70 855,-70 861,-76 861,-82 861,-82 861,-94 861,-94 861,-100 855,-106 849,-106"/>
<text text-anchor="middle" x="820.5" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cursor_seek</text>
</g>
<!-- scan_locks&#45;&gt;cursor_seek -->
<g id="edge2" class="edge">
<title>scan_locks&#45;&gt;cursor_seek</title>
<path fill="none" stroke="#666666" d="M725.24,-76.22C740.81,-78.16 756.08,-80.07 769.65,-81.77"/>
<polygon fill="#666666" stroke="#666666" points="769.32,-85.25 779.67,-83.02 770.18,-78.31 769.32,-85.25"/>
</g>
<!-- Lock_parse -->
<g id="node5" class="node">
<title>Lock_parse</title>
<path fill="none" stroke="#1c2123" d="M848.5,-160C848.5,-160 792.5,-160 792.5,-160 786.5,-160 780.5,-154 780.5,-148 780.5,-148 780.5,-136 780.5,-136 780.5,-130 786.5,-124 792.5,-124 792.5,-124 848.5,-124 848.5,-124 854.5,-124 860.5,-130 860.5,-136 860.5,-136 860.5,-148 860.5,-148 860.5,-154 854.5,-160 848.5,-160"/>
<text text-anchor="middle" x="820.5" y="-138.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock_parse</text>
</g>
<!-- scan_locks&#45;&gt;Lock_parse -->
<g id="edge3" class="edge">
<title>scan_locks&#45;&gt;Lock_parse</title>
<path fill="none" stroke="#666666" d="M725.24,-105.75C741.11,-111.85 756.68,-117.84 770.45,-123.13"/>
<polygon fill="#666666" stroke="#666666" points="769.54,-126.54 780.13,-126.86 772.06,-120 769.54,-126.54"/>
</g>
<!-- scan_key -->
<g id="node6" class="node">
<title>scan_key</title>
<path fill="#feed9b" stroke="#f7e495" d="M306,-282C306,-282 375,-282 375,-282 381,-282 387,-288 387,-294 387,-294 387,-316 387,-316 387,-322 381,-328 375,-328 375,-328 306,-328 306,-328 300,-328 294,-322 294,-316 294,-316 294,-294 294,-294 294,-288 300,-282 306,-282"/>
<text text-anchor="middle" x="340.5" y="-312.8" font-family="Times,serif" font-size="14.00" fill="#40575d">scan_key</text>
<polyline fill="none" stroke="#f7e495" points="294,-305 387,-305 "/>
<text text-anchor="start" x="302" y="-289.8" font-family="Times,serif" font-size="14.00" fill="#40575d">Option&lt;Key&gt;</text>
</g>
<!-- scan_key&#45;&gt;scan_locks -->
<g id="edge6" class="edge">
<title>scan_key&#45;&gt;scan_locks</title>
<path fill="none" stroke="#666666" d="M387.21,-304.04C412.17,-301.04 441.63,-293.02 460,-273 507.62,-221.09 444.72,-172.58 488,-117 488.48,-116.38 488.97,-115.77 489.47,-115.17"/>
<polygon fill="#666666" stroke="#666666" points="492.15,-117.42 496.36,-107.7 487.01,-112.68 492.15,-117.42"/>
</g>
<!-- txn_status -->
<g id="node7" class="node">
<title>txn_status</title>
<path fill="#feed9b" stroke="#f7e495" d="M28,-221C28,-221 173,-221 173,-221 179,-221 185,-227 185,-233 185,-233 185,-247 185,-247 185,-253 179,-259 173,-259 173,-259 28,-259 28,-259 22,-259 16,-253 16,-247 16,-247 16,-233 16,-233 16,-227 22,-221 28,-221"/>
<text text-anchor="start" x="24" y="-243.8" font-family="Times,serif" font-size="14.00" fill="#40575d">txn_status: HashMap&lt;</text>
<text text-anchor="start" x="24" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> TimeStamp, TimeStamp&gt;,</text>
</g>
<!-- filter -->
<g id="node8" class="node">
<title>filter</title>
<path fill="none" stroke="#1c2123" d="M233,-217C233,-217 448,-217 448,-217 454,-217 460,-223 460,-229 460,-229 460,-251 460,-251 460,-257 454,-263 448,-263 448,-263 233,-263 233,-263 227,-263 221,-257 221,-251 221,-251 221,-229 221,-229 221,-223 227,-217 233,-217"/>
<text text-anchor="middle" x="340.5" y="-247.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">filter</text>
<polyline fill="none" stroke="#1c2123" points="221,-240 460,-240 "/>
<text text-anchor="middle" x="340.5" y="-224.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">|lock| txn_status.contains_key(&amp;lock.ts),</text>
</g>
<!-- txn_status&#45;&gt;filter -->
<g id="edge4" class="edge">
<title>txn_status&#45;&gt;filter</title>
<path fill="none" stroke="#666666" d="M185.08,-240C193.35,-240 201.89,-240 210.49,-240"/>
<polygon fill="#666666" stroke="#666666" points="210.6,-243.5 220.6,-240 210.6,-236.5 210.6,-243.5"/>
</g>
<!-- filter&#45;&gt;scan_locks -->
<g id="edge5" class="edge">
<title>filter&#45;&gt;scan_locks</title>
<path fill="none" stroke="#666666" d="M364.79,-216.92C392.44,-190.4 440.78,-146.72 488,-117 490.23,-115.6 492.5,-114.21 494.8,-112.84"/>
<polygon fill="#666666" stroke="#666666" points="496.92,-115.66 503.84,-107.65 493.43,-109.59 496.92,-115.66"/>
</g>
<!-- process_read -->
<g id="node9" class="node">
<title>process_read</title>
<path fill="none" stroke="#1c2123" d="M276.5,-347C276.5,-347 404.5,-347 404.5,-347 410.5,-347 416.5,-353 416.5,-359 416.5,-359 416.5,-411 416.5,-411 416.5,-417 410.5,-423 404.5,-423 404.5,-423 276.5,-423 276.5,-423 270.5,-423 264.5,-417 264.5,-411 264.5,-411 264.5,-359 264.5,-359 264.5,-353 270.5,-347 276.5,-347"/>
<text text-anchor="middle" x="340.5" y="-407.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">process_read</text>
<polyline fill="none" stroke="#1c2123" points="264.5,-400 416.5,-400 "/>
<text text-anchor="start" x="272.5" y="-384.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">scan locks for </text>
<text text-anchor="start" x="272.5" y="-369.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> resolving accoording to </text>
<text text-anchor="start" x="272.5" y="-354.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> txn_status</text>
</g>
<!-- process_read&#45;&gt;MvccReader_new -->
<g id="edge7" class="edge">
<title>process_read&#45;&gt;MvccReader_new</title>
<path fill="none" stroke="#666666" d="M416.66,-367.98C432.95,-361.1 448.67,-351.46 460,-338 499.18,-291.45 450.74,-252.1 488,-204 501.93,-186.02 522.67,-173.06 543.09,-163.89"/>
<polygon fill="#666666" stroke="#666666" points="544.58,-167.07 552.42,-159.95 541.85,-160.62 544.58,-167.07"/>
</g>
<!-- process_read&#45;&gt;scan_locks -->
<g id="edge8" class="edge">
<title>process_read&#45;&gt;scan_locks</title>
<path fill="none" stroke="#666666" d="M416.52,-369C433.12,-362.07 449.01,-352.17 460,-338 520.67,-259.76 429.2,-196.66 488,-117 488.46,-116.37 488.94,-115.75 489.42,-115.13"/>
<polygon fill="#666666" stroke="#666666" points="492.14,-117.34 496.14,-107.53 486.89,-112.71 492.14,-117.34"/>
</g>
<!-- ResolveLock_new -->
<g id="node10" class="node">
<title>ResolveLock_new</title>
<path fill="none" stroke="#1c2123" d="M525.5,-354.5C525.5,-354.5 695.5,-354.5 695.5,-354.5 701.5,-354.5 707.5,-360.5 707.5,-366.5 707.5,-366.5 707.5,-403.5 707.5,-403.5 707.5,-409.5 701.5,-415.5 695.5,-415.5 695.5,-415.5 525.5,-415.5 525.5,-415.5 519.5,-415.5 513.5,-409.5 513.5,-403.5 513.5,-403.5 513.5,-366.5 513.5,-366.5 513.5,-360.5 519.5,-354.5 525.5,-354.5"/>
<text text-anchor="middle" x="610.5" y="-400.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ResolveLock::new</text>
<polyline fill="none" stroke="#1c2123" points="513.5,-392.5 707.5,-392.5 "/>
<text text-anchor="start" x="521.5" y="-377.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果Kvparis不为空</text>
<text text-anchor="start" x="521.5" y="-362.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ResolveLock 为NextCommand</text>
</g>
<!-- process_read&#45;&gt;ResolveLock_new -->
<g id="edge9" class="edge">
<title>process_read&#45;&gt;ResolveLock_new</title>
<path fill="none" stroke="#666666" d="M416.51,-385C443.38,-385 474.21,-385 503.22,-385"/>
<polygon fill="#666666" stroke="#666666" points="503.4,-388.5 513.4,-385 503.4,-381.5 503.4,-388.5"/>
</g>
</g>
</svg>
