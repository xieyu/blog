<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: apply__handle_raft_entry_conf_change Pages: 1 -->
<svg width="1393pt" height="504pt"
 viewBox="0.00 0.00 1393.00 504.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 500)">
<title>apply__handle_raft_entry_conf_change</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-500 1389,-500 1389,4 -4,4"/>
<!-- ApplyDelegate__exec_change_peer -->
<g id="node1" class="node">
<title>ApplyDelegate__exec_change_peer</title>
<path fill="none" stroke="#1c2123" d="M200,-258C200,-258 12,-258 12,-258 6,-258 0,-252 0,-246 0,-246 0,-234 0,-234 0,-228 6,-222 12,-222 12,-222 200,-222 200,-222 206,-222 212,-228 212,-234 212,-234 212,-246 212,-246 212,-252 206,-258 200,-258"/>
<text text-anchor="middle" x="106" y="-236.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyDelegate__exec_change_peer</text>
</g>
<!-- Region__get_region_epoch__get_conf_ver -->
<g id="node2" class="node">
<title>Region__get_region_epoch__get_conf_ver</title>
<path fill="none" stroke="#1c2123" d="M487,-496C487,-496 260,-496 260,-496 254,-496 248,-490 248,-484 248,-484 248,-472 248,-472 248,-466 254,-460 260,-460 260,-460 487,-460 487,-460 493,-460 499,-466 499,-472 499,-472 499,-484 499,-484 499,-490 493,-496 487,-496"/>
<text text-anchor="middle" x="373.5" y="-474.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region__get_region_epoch__get_conf_ver</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;Region__get_region_epoch__get_conf_ver -->
<g id="edge1" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;Region__get_region_epoch__get_conf_ver</title>
<path fill="none" stroke="#666666" d="M114.1,-258.12C130.88,-298.51 177.01,-396.27 248,-446 253.22,-449.66 258.82,-452.89 264.66,-455.76"/>
<polygon fill="#666666" stroke="#666666" points="263.44,-459.05 274,-459.97 266.32,-452.67 263.44,-459.05"/>
</g>
<!-- Region__mut_region_epoch__set_conf_ver -->
<g id="node3" class="node">
<title>Region__mut_region_epoch__set_conf_ver</title>
<path fill="none" stroke="#1c2123" d="M777,-446C777,-446 547,-446 547,-446 541,-446 535,-440 535,-434 535,-434 535,-422 535,-422 535,-416 541,-410 547,-410 547,-410 777,-410 777,-410 783,-410 789,-416 789,-422 789,-422 789,-434 789,-434 789,-440 783,-446 777,-446"/>
<text text-anchor="middle" x="662" y="-424.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region__mut_region_epoch__set_conf_ver</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;Region__mut_region_epoch__set_conf_ver -->
<g id="edge2" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;Region__mut_region_epoch__set_conf_ver</title>
<path fill="none" stroke="#666666" d="M116.21,-258.12C135.26,-293.42 182.76,-370.75 248,-403 333.24,-445.13 440.75,-450.38 524.71,-445.62"/>
<polygon fill="#666666" stroke="#666666" points="525.06,-449.1 534.83,-444.99 524.63,-442.12 525.06,-449.1"/>
</g>
<!-- Region__mut_peers__push -->
<g id="node4" class="node">
<title>Region__mut_peers__push</title>
<path fill="none" stroke="#1c2123" d="M732.5,-388C732.5,-388 591.5,-388 591.5,-388 585.5,-388 579.5,-382 579.5,-376 579.5,-376 579.5,-364 579.5,-364 579.5,-358 585.5,-352 591.5,-352 591.5,-352 732.5,-352 732.5,-352 738.5,-352 744.5,-358 744.5,-364 744.5,-364 744.5,-376 744.5,-376 744.5,-382 738.5,-388 732.5,-388"/>
<text text-anchor="middle" x="662" y="-366.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region__mut_peers__push</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;Region__mut_peers__push -->
<g id="edge3" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;Region__mut_peers__push</title>
<path fill="none" stroke="#666666" d="M119.05,-258.49C140.55,-289.58 188.87,-351.26 248,-375 353.93,-417.54 487.83,-405.24 573.94,-389.85"/>
<polygon fill="#666666" stroke="#666666" points="574.74,-393.26 583.94,-388.01 573.47,-386.38 574.74,-393.26"/>
</g>
<!-- ApplyDelegate__stopped -->
<g id="node5" class="node">
<title>ApplyDelegate__stopped</title>
<path fill="none" stroke="#1c2123" d="M438.5,-366C438.5,-366 308.5,-366 308.5,-366 302.5,-366 296.5,-360 296.5,-354 296.5,-354 296.5,-342 296.5,-342 296.5,-336 302.5,-330 308.5,-330 308.5,-330 438.5,-330 438.5,-330 444.5,-330 450.5,-336 450.5,-342 450.5,-342 450.5,-354 450.5,-354 450.5,-360 444.5,-366 438.5,-366"/>
<text text-anchor="middle" x="373.5" y="-344.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyDelegate__stopped</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;ApplyDelegate__stopped -->
<g id="edge4" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;ApplyDelegate__stopped</title>
<path fill="none" stroke="#666666" d="M132.81,-258.1C160.19,-276.5 205.32,-304.57 248,-321 260.17,-325.69 273.34,-329.65 286.4,-332.96"/>
<polygon fill="#666666" stroke="#666666" points="285.81,-336.42 296.35,-335.38 287.46,-329.62 285.81,-336.42"/>
</g>
<!-- ApplyDelegate__pending_remove -->
<g id="node6" class="node">
<title>ApplyDelegate__pending_remove</title>
<path fill="none" stroke="#1c2123" d="M463,-258C463,-258 284,-258 284,-258 278,-258 272,-252 272,-246 272,-246 272,-234 272,-234 272,-228 278,-222 284,-222 284,-222 463,-222 463,-222 469,-222 475,-228 475,-234 475,-234 475,-246 475,-246 475,-252 469,-258 463,-258"/>
<text text-anchor="middle" x="373.5" y="-236.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyDelegate__pending_remove</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;ApplyDelegate__pending_remove -->
<g id="edge5" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;ApplyDelegate__pending_remove</title>
<path fill="none" stroke="#666666" d="M212.31,-240C228.5,-240 245.25,-240 261.56,-240"/>
<polygon fill="#666666" stroke="#666666" points="261.64,-243.5 271.64,-240 261.64,-236.5 261.64,-243.5"/>
</g>
<!-- remove_peer -->
<g id="node7" class="node">
<title>remove_peer</title>
<path fill="none" stroke="#1c2123" d="M405.5,-312C405.5,-312 341.5,-312 341.5,-312 335.5,-312 329.5,-306 329.5,-300 329.5,-300 329.5,-288 329.5,-288 329.5,-282 335.5,-276 341.5,-276 341.5,-276 405.5,-276 405.5,-276 411.5,-276 417.5,-282 417.5,-288 417.5,-288 417.5,-300 417.5,-300 417.5,-306 411.5,-312 405.5,-312"/>
<text text-anchor="middle" x="373.5" y="-290.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">remove_peer</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;remove_peer -->
<g id="edge6" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;remove_peer</title>
<path fill="none" stroke="#666666" d="M195.78,-258.06C236.66,-266.37 283.82,-275.96 319.14,-283.15"/>
<polygon fill="#666666" stroke="#666666" points="318.74,-286.64 329.23,-285.2 320.13,-279.78 318.74,-286.64"/>
</g>
<!-- find_peer -->
<g id="node8" class="node">
<title>find_peer</title>
<path fill="none" stroke="#1c2123" d="M395.5,-204C395.5,-204 351.5,-204 351.5,-204 345.5,-204 339.5,-198 339.5,-192 339.5,-192 339.5,-180 339.5,-180 339.5,-174 345.5,-168 351.5,-168 351.5,-168 395.5,-168 395.5,-168 401.5,-168 407.5,-174 407.5,-180 407.5,-180 407.5,-192 407.5,-192 407.5,-198 401.5,-204 395.5,-204"/>
<text text-anchor="middle" x="373.5" y="-182.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">find_peer</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;find_peer -->
<g id="edge7" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;find_peer</title>
<path fill="none" stroke="#666666" d="M195.78,-221.94C240.64,-212.82 293.06,-202.16 329.09,-194.83"/>
<polygon fill="#666666" stroke="#666666" points="330.16,-198.18 339.26,-192.76 328.77,-191.32 330.16,-198.18"/>
</g>
<!-- PeerState__TombStone -->
<g id="node9" class="node">
<title>PeerState__TombStone</title>
<path fill="none" stroke="#1c2123" d="M722.5,-182C722.5,-182 601.5,-182 601.5,-182 595.5,-182 589.5,-176 589.5,-170 589.5,-170 589.5,-158 589.5,-158 589.5,-152 595.5,-146 601.5,-146 601.5,-146 722.5,-146 722.5,-146 728.5,-146 734.5,-152 734.5,-158 734.5,-158 734.5,-170 734.5,-170 734.5,-176 728.5,-182 722.5,-182"/>
<text text-anchor="middle" x="662" y="-160.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerState__TombStone</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;PeerState__TombStone -->
<g id="edge8" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;PeerState__TombStone</title>
<path fill="none" stroke="#666666" d="M129.76,-221.84C156.32,-201.92 202.45,-171.15 248,-159 359.85,-129.16 494.87,-138.94 579.36,-150.24"/>
<polygon fill="#666666" stroke="#666666" points="579.02,-153.73 589.41,-151.63 579.98,-146.79 579.02,-153.73"/>
</g>
<!-- PeerState__Normal -->
<g id="node10" class="node">
<title>PeerState__Normal</title>
<path fill="none" stroke="#1c2123" d="M711.5,-128C711.5,-128 612.5,-128 612.5,-128 606.5,-128 600.5,-122 600.5,-116 600.5,-116 600.5,-104 600.5,-104 600.5,-98 606.5,-92 612.5,-92 612.5,-92 711.5,-92 711.5,-92 717.5,-92 723.5,-98 723.5,-104 723.5,-104 723.5,-116 723.5,-116 723.5,-122 717.5,-128 711.5,-128"/>
<text text-anchor="middle" x="662" y="-106.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerState__Normal</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;PeerState__Normal -->
<g id="edge9" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;PeerState__Normal</title>
<path fill="none" stroke="#666666" d="M124.08,-221.89C148.74,-197.12 196.97,-153.64 248,-135 362.27,-93.25 506.11,-95.8 590.38,-102.31"/>
<polygon fill="#666666" stroke="#666666" points="590.1,-105.8 600.35,-103.12 590.67,-98.82 590.1,-105.8"/>
</g>
<!-- write_peer_state -->
<g id="node11" class="node">
<title>write_peer_state</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1075,-62C1075,-62 1228,-62 1228,-62 1234,-62 1240,-68 1240,-74 1240,-74 1240,-126 1240,-126 1240,-132 1234,-138 1228,-138 1228,-138 1075,-138 1075,-138 1069,-138 1063,-132 1063,-126 1063,-126 1063,-74 1063,-74 1063,-68 1069,-62 1075,-62"/>
<text text-anchor="middle" x="1151.5" y="-122.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">write_peer_state</text>
<polyline fill="none" stroke="#8a8898" points="1063,-115 1240,-115 "/>
<text text-anchor="start" x="1071" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">将RaftLocalState写入kv_wb</text>
<text text-anchor="start" x="1071" y="-84.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> cf为CF_RAFT</text>
<text text-anchor="start" x="1071" y="-69.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> key为:region_state_key</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;write_peer_state -->
<g id="edge10" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;write_peer_state</title>
<path fill="none" stroke="#666666" d="M118.07,-221.94C138.91,-189.78 187.4,-123.32 248,-95 414.76,-17.07 476.93,-64 661,-64 661,-64 661,-64 860,-64 924.6,-64 996.67,-72.88 1052.87,-81.81"/>
<polygon fill="#666666" stroke="#666666" points="1052.38,-85.28 1062.81,-83.42 1053.5,-78.37 1052.38,-85.28"/>
</g>
<!-- ApplyRes -->
<g id="node12" class="node">
<title>ApplyRes</title>
<path fill="none" stroke="#1c2123" d="M397,-36C397,-36 350,-36 350,-36 344,-36 338,-30 338,-24 338,-24 338,-12 338,-12 338,-6 344,0 350,0 350,0 397,0 397,0 403,0 409,-6 409,-12 409,-12 409,-24 409,-24 409,-30 403,-36 397,-36"/>
<text text-anchor="middle" x="373.5" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyRes</text>
</g>
<!-- ApplyDelegate__exec_change_peer&#45;&gt;ApplyRes -->
<g id="edge11" class="edge">
<title>ApplyDelegate__exec_change_peer&#45;&gt;ApplyRes</title>
<path fill="none" stroke="#666666" d="M115.18,-221.86C133.31,-183.78 180.68,-95.27 248,-50 271.68,-34.08 302.77,-26.08 327.96,-22.06"/>
<polygon fill="#666666" stroke="#666666" points="328.6,-25.5 338,-20.61 327.6,-18.57 328.6,-25.5"/>
</g>
<!-- Region -->
<g id="node14" class="node">
<title>Region</title>
<path fill="none" stroke="#1c2123" d="M875,-354C875,-354 843,-354 843,-354 837,-354 831,-348 831,-342 831,-342 831,-330 831,-330 831,-324 837,-318 843,-318 843,-318 875,-318 875,-318 881,-318 887,-324 887,-330 887,-330 887,-342 887,-342 887,-348 881,-354 875,-354"/>
<text text-anchor="middle" x="859" y="-332.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region</text>
</g>
<!-- Region__mut_region_epoch__set_conf_ver&#45;&gt;Region -->
<g id="edge12" class="edge">
<title>Region__mut_region_epoch__set_conf_ver&#45;&gt;Region</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M758.07,-409.91C768.79,-406.33 779.32,-402.07 789,-397 806.12,-388.03 822.46,-373.92 834.94,-361.54"/>
<polygon fill="green" stroke="green" points="837.71,-363.71 842.18,-354.11 832.7,-358.83 837.71,-363.71"/>
</g>
<!-- Region__mut_peers__push&#45;&gt;Region -->
<g id="edge13" class="edge">
<title>Region__mut_peers__push&#45;&gt;Region</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M744.57,-355.78C771.12,-351.15 799.28,-346.24 820.91,-342.47"/>
<polygon fill="green" stroke="green" points="821.71,-345.88 830.96,-340.71 820.51,-338.98 821.71,-345.88"/>
</g>
<!-- ApplyDelegate__pending_remove&#45;&gt;PeerState__TombStone -->
<g id="edge22" class="edge">
<title>ApplyDelegate__pending_remove&#45;&gt;PeerState__TombStone</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M462.12,-221.92C474.54,-219.09 487.12,-216.08 499,-213 531.07,-204.69 566.32,-194.19 595.72,-185.05"/>
<polygon fill="green" stroke="green" points="596.96,-188.33 605.46,-182 594.87,-181.65 596.96,-188.33"/>
</g>
<!-- Region__mut_peers_remove -->
<g id="node13" class="node">
<title>Region__mut_peers_remove</title>
<path fill="none" stroke="#1c2123" d="M737,-327C737,-327 587,-327 587,-327 581,-327 575,-321 575,-315 575,-315 575,-303 575,-303 575,-297 581,-291 587,-291 587,-291 737,-291 737,-291 743,-291 749,-297 749,-303 749,-303 749,-315 749,-315 749,-321 743,-327 737,-327"/>
<text text-anchor="middle" x="662" y="-305.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region__mut_peers_remove</text>
</g>
<!-- remove_peer&#45;&gt;Region__mut_peers_remove -->
<g id="edge21" class="edge">
<title>remove_peer&#45;&gt;Region__mut_peers_remove</title>
<path fill="none" stroke="#666666" d="M417.7,-296.26C456.53,-298.29 514.95,-301.35 564.81,-303.96"/>
<polygon fill="#666666" stroke="#666666" points="564.81,-307.47 574.98,-304.5 565.18,-300.48 564.81,-307.47"/>
</g>
<!-- PeerState -->
<g id="node15" class="node">
<title>PeerState</title>
<path fill="none" stroke="#1c2123" d="M881,-155C881,-155 837,-155 837,-155 831,-155 825,-149 825,-143 825,-143 825,-131 825,-131 825,-125 831,-119 837,-119 837,-119 881,-119 881,-119 887,-119 893,-125 893,-131 893,-131 893,-143 893,-143 893,-149 887,-155 881,-155"/>
<text text-anchor="middle" x="859" y="-133.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerState</text>
</g>
<!-- PeerState__TombStone&#45;&gt;PeerState -->
<g id="edge15" class="edge">
<title>PeerState__TombStone&#45;&gt;PeerState</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M734.5,-154.1C761.49,-150.36 791.34,-146.23 814.93,-142.96"/>
<polygon fill="green" stroke="green" points="815.54,-146.41 824.97,-141.57 814.58,-139.48 815.54,-146.41"/>
</g>
<!-- PeerState__Normal&#45;&gt;PeerState -->
<g id="edge16" class="edge">
<title>PeerState__Normal&#45;&gt;PeerState</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M723.63,-118.39C753.14,-122.48 787.94,-127.3 814.73,-131.01"/>
<polygon fill="green" stroke="green" points="814.55,-134.52 824.94,-132.42 815.51,-127.58 814.55,-134.52"/>
</g>
<!-- region_state_key -->
<g id="node17" class="node">
<title>region_state_key</title>
<path fill="none" stroke="#1c2123" d="M1373,-118C1373,-118 1288,-118 1288,-118 1282,-118 1276,-112 1276,-106 1276,-106 1276,-94 1276,-94 1276,-88 1282,-82 1288,-82 1288,-82 1373,-82 1373,-82 1379,-82 1385,-88 1385,-94 1385,-94 1385,-106 1385,-106 1385,-112 1379,-118 1373,-118"/>
<text text-anchor="middle" x="1330.5" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">region_state_key</text>
</g>
<!-- write_peer_state&#45;&gt;region_state_key -->
<g id="edge20" class="edge">
<title>write_peer_state&#45;&gt;region_state_key</title>
<path fill="none" stroke="#666666" d="M1240.22,-100C1248.78,-100 1257.35,-100 1265.6,-100"/>
<polygon fill="#666666" stroke="#666666" points="1265.87,-103.5 1275.87,-100 1265.87,-96.5 1265.87,-103.5"/>
</g>
<!-- Region__mut_peers_remove&#45;&gt;Region -->
<g id="edge14" class="edge">
<title>Region__mut_peers_remove&#45;&gt;Region</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M749.1,-320.92C774.12,-324.39 800.16,-327.99 820.5,-330.81"/>
<polygon fill="green" stroke="green" points="820.19,-334.3 830.58,-332.2 821.15,-327.36 820.19,-334.3"/>
</g>
<!-- RaftLocalState -->
<g id="node16" class="node">
<title>RaftLocalState</title>
<path fill="none" stroke="#1c2123" d="M1015,-155C1015,-155 941,-155 941,-155 935,-155 929,-149 929,-143 929,-143 929,-131 929,-131 929,-125 935,-119 941,-119 941,-119 1015,-119 1015,-119 1021,-119 1027,-125 1027,-131 1027,-131 1027,-143 1027,-143 1027,-149 1021,-155 1015,-155"/>
<text text-anchor="middle" x="978" y="-133.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLocalState</text>
</g>
<!-- Region&#45;&gt;RaftLocalState -->
<g id="edge17" class="edge">
<title>Region&#45;&gt;RaftLocalState</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M870.59,-317.99C891.25,-282.85 937.01,-205.01 961.24,-163.8"/>
<polygon fill="green" stroke="green" points="964.3,-165.51 966.35,-155.11 958.26,-161.96 964.3,-165.51"/>
</g>
<!-- PeerState&#45;&gt;RaftLocalState -->
<g id="edge18" class="edge">
<title>PeerState&#45;&gt;RaftLocalState</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M893.21,-137C901.18,-137 909.92,-137 918.65,-137"/>
<polygon fill="green" stroke="green" points="918.85,-140.5 928.85,-137 918.85,-133.5 918.85,-140.5"/>
</g>
<!-- RaftLocalState&#45;&gt;write_peer_state -->
<g id="edge19" class="edge">
<title>RaftLocalState&#45;&gt;write_peer_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1027.23,-126.59C1035.45,-124.82 1044.24,-122.92 1053.21,-120.99"/>
<polygon fill="green" stroke="green" points="1053.95,-124.41 1062.99,-118.88 1052.48,-117.57 1053.95,-124.41"/>
</g>
</g>
</svg>
