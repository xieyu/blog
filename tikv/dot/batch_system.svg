<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: BatchSystem Pages: 1 -->
<svg width="1711pt" height="702pt"
 viewBox="0.00 0.00 1711.00 702.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 698)">
<title>BatchSystem</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-698 1707,-698 1707,4 -4,4"/>
<!-- Receiver -->
<g id="node1" class="node">
<title>Receiver</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M985,-588C985,-588 1075,-588 1075,-588 1081,-588 1087,-594 1087,-600 1087,-600 1087,-622 1087,-622 1087,-628 1081,-634 1075,-634 1075,-634 985,-634 985,-634 979,-634 973,-628 973,-622 973,-622 973,-600 973,-600 973,-594 979,-588 985,-588"/>
<text text-anchor="middle" x="1030" y="-618.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Receiver</text>
<polyline fill="none" stroke="#60b5ac" points="973,-611 1087,-611 "/>
<text text-anchor="middle" x="1030" y="-595.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">channel::Receiver</text>
</g>
<!-- BatchSystem -->
<g id="node2" class="node">
<title>BatchSystem</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M594,-455C594,-455 855,-455 855,-455 861,-455 867,-461 867,-467 867,-467 867,-627 867,-627 867,-633 861,-639 855,-639 855,-639 594,-639 594,-639 588,-639 582,-633 582,-627 582,-627 582,-467 582,-467 582,-461 588,-455 594,-455"/>
<text text-anchor="middle" x="724.5" y="-623.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">BatchSystem</text>
<polyline fill="none" stroke="#60b5ac" points="582,-616 867,-616 "/>
<text text-anchor="start" x="590" y="-600.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">name_prefix: Option&lt;String&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="582,-593 867,-593 "/>
<text text-anchor="start" x="590" y="-577.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">router: BatchRouter&lt;N, C&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="582,-570 867,-570 "/>
<text text-anchor="start" x="590" y="-554.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">receiver: channel::Receiver&lt;FsmTypes&lt;N, C&gt;&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="582,-547 867,-547 "/>
<text text-anchor="start" x="590" y="-531.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pool_size: usize,</text>
<polyline fill="none" stroke="#60b5ac" points="582,-524 867,-524 "/>
<text text-anchor="start" x="590" y="-508.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">max_batch_size: usize,</text>
<polyline fill="none" stroke="#60b5ac" points="582,-501 867,-501 "/>
<text text-anchor="start" x="590" y="-485.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">workers: Vec&lt;JoinHandle&lt;()&gt;&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="582,-478 867,-478 "/>
<text text-anchor="start" x="590" y="-462.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">reschedule_duration: Duration,</text>
</g>
<!-- BatchSystem&#45;&gt;Receiver -->
<g id="edge1" class="edge">
<title>BatchSystem&#45;&gt;Receiver</title>
<path fill="none" stroke="#666666" d="M867.03,-576.85C900.48,-583.9 934.59,-591.09 962.82,-597.05"/>
<polygon fill="#666666" stroke="#666666" points="962.44,-600.54 972.95,-599.18 963.89,-593.69 962.44,-600.54"/>
</g>
<!-- BatchRouter -->
<g id="node3" class="node">
<title>BatchRouter</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M915,-326C915,-326 1145,-326 1145,-326 1151,-326 1157,-332 1157,-338 1157,-338 1157,-390 1157,-390 1157,-396 1151,-402 1145,-402 1145,-402 915,-402 915,-402 909,-402 903,-396 903,-390 903,-390 903,-338 903,-338 903,-332 909,-326 915,-326"/>
<text text-anchor="middle" x="1030" y="-386.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">BatchRouter</text>
<polyline fill="none" stroke="#60b5ac" points="903,-379 1157,-379 "/>
<text text-anchor="start" x="911" y="-363.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub type BatchRouter&lt;N, C&gt; </text>
<text text-anchor="start" x="911" y="-348.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> = Router&lt;N, C, NormalScheduler&lt;N, C&gt;,</text>
<text text-anchor="start" x="911" y="-333.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> ControlScheduler&lt;N, C&gt;&gt;;</text>
</g>
<!-- BatchSystem&#45;&gt;BatchRouter -->
<g id="edge2" class="edge">
<title>BatchSystem&#45;&gt;BatchRouter</title>
<path fill="none" stroke="#666666" d="M867.03,-461.66C898.27,-442.83 930.08,-423.64 957.15,-407.32"/>
<polygon fill="#666666" stroke="#666666" points="959.01,-410.29 965.77,-402.13 955.4,-404.29 959.01,-410.29"/>
</g>
<!-- FsmTypes -->
<g id="node8" class="node">
<title>FsmTypes</title>
<path fill="none" stroke="#1c2123" d="M1055,-569C1055,-569 1005,-569 1005,-569 999,-569 993,-563 993,-557 993,-557 993,-545 993,-545 993,-539 999,-533 1005,-533 1005,-533 1055,-533 1055,-533 1061,-533 1067,-539 1067,-545 1067,-545 1067,-557 1067,-557 1067,-563 1061,-569 1055,-569"/>
<text text-anchor="middle" x="1030" y="-547.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">FsmTypes</text>
</g>
<!-- BatchSystem&#45;&gt;FsmTypes -->
<g id="edge3" class="edge">
<title>BatchSystem&#45;&gt;FsmTypes</title>
<path fill="none" stroke="#666666" d="M867.03,-548.87C908.82,-549.42 951.65,-549.98 982.77,-550.39"/>
<polygon fill="#666666" stroke="#666666" points="982.8,-553.89 992.85,-550.52 982.9,-546.89 982.8,-553.89"/>
</g>
<!-- JoinHandle -->
<g id="node9" class="node">
<title>JoinHandle</title>
<path fill="none" stroke="#1c2123" d="M1057,-515C1057,-515 1003,-515 1003,-515 997,-515 991,-509 991,-503 991,-503 991,-491 991,-491 991,-485 997,-479 1003,-479 1003,-479 1057,-479 1057,-479 1063,-479 1069,-485 1069,-491 1069,-491 1069,-503 1069,-503 1069,-509 1063,-515 1057,-515"/>
<text text-anchor="middle" x="1030" y="-493.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">JoinHandle</text>
</g>
<!-- BatchSystem&#45;&gt;JoinHandle -->
<g id="edge4" class="edge">
<title>BatchSystem&#45;&gt;JoinHandle</title>
<path fill="none" stroke="#666666" d="M867.03,-523.68C907.99,-516.94 949.95,-510.02 980.89,-504.93"/>
<polygon fill="#666666" stroke="#666666" points="981.65,-508.35 990.95,-503.27 980.51,-501.44 981.65,-508.35"/>
</g>
<!-- Router -->
<g id="node4" class="node">
<title>Router</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1205,-266.5C1205,-266.5 1542,-266.5 1542,-266.5 1548,-266.5 1554,-272.5 1554,-278.5 1554,-278.5 1554,-415.5 1554,-415.5 1554,-421.5 1548,-427.5 1542,-427.5 1542,-427.5 1205,-427.5 1205,-427.5 1199,-427.5 1193,-421.5 1193,-415.5 1193,-415.5 1193,-278.5 1193,-278.5 1193,-272.5 1199,-266.5 1205,-266.5"/>
<text text-anchor="middle" x="1373.5" y="-412.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Router</text>
<polyline fill="none" stroke="#60b5ac" points="1193,-404.5 1554,-404.5 "/>
<text text-anchor="start" x="1201" y="-389.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">normals: Arc&lt;Mutex&lt;HashMap&lt;u64, BasicMailbox&lt;N&gt;&gt;&gt;&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="1193,-381.5 1554,-381.5 "/>
<text text-anchor="start" x="1201" y="-366.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">caches: Cell&lt;LruCache&lt;u64, BasicMailbox&lt;N&gt;&gt;&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="1193,-358.5 1554,-358.5 "/>
<text text-anchor="start" x="1201" y="-343.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(super) control_box: BasicMailbox&lt;C&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="1193,-335.5 1554,-335.5 "/>
<text text-anchor="start" x="1201" y="-320.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) normal_scheduler: Ns,</text>
<polyline fill="none" stroke="#60b5ac" points="1193,-312.5 1554,-312.5 "/>
<text text-anchor="start" x="1201" y="-297.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">control_scheduler: Cs,</text>
<polyline fill="none" stroke="#60b5ac" points="1193,-289.5 1554,-289.5 "/>
<text text-anchor="start" x="1201" y="-274.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">shutdown: Arc&lt;AtomicBool&gt;,</text>
</g>
<!-- BatchRouter&#45;&gt;Router -->
<g id="edge8" class="edge">
<title>BatchRouter&#45;&gt;Router</title>
<path fill="none" stroke="#666666" d="M1157.19,-357.72C1165.59,-357.3 1174.14,-356.87 1182.76,-356.45"/>
<polygon fill="#666666" stroke="#666666" points="1183.09,-359.93 1192.9,-355.94 1182.74,-352.94 1183.09,-359.93"/>
</g>
<!-- NormalScheduler -->
<g id="node13" class="node">
<title>NormalScheduler</title>
<path fill="none" stroke="#1c2123" d="M1691,-460C1691,-460 1602,-460 1602,-460 1596,-460 1590,-454 1590,-448 1590,-448 1590,-436 1590,-436 1590,-430 1596,-424 1602,-424 1602,-424 1691,-424 1691,-424 1697,-424 1703,-430 1703,-436 1703,-436 1703,-448 1703,-448 1703,-454 1697,-460 1691,-460"/>
<text text-anchor="middle" x="1646.5" y="-438.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">NormalScheduler</text>
</g>
<!-- BatchRouter&#45;&gt;NormalScheduler -->
<g id="edge9" class="edge">
<title>BatchRouter&#45;&gt;NormalScheduler</title>
<path fill="none" stroke="#666666" d="M1099,-402.17C1127.18,-415.97 1160.77,-429.89 1193,-437 1327.86,-466.76 1490.88,-458.01 1579.79,-449.6"/>
<polygon fill="#666666" stroke="#666666" points="1580.38,-453.06 1590,-448.61 1579.7,-446.09 1580.38,-453.06"/>
</g>
<!-- ControlScheduler -->
<g id="node14" class="node">
<title>ControlScheduler</title>
<path fill="none" stroke="#1c2123" d="M1690.5,-271C1690.5,-271 1602.5,-271 1602.5,-271 1596.5,-271 1590.5,-265 1590.5,-259 1590.5,-259 1590.5,-247 1590.5,-247 1590.5,-241 1596.5,-235 1602.5,-235 1602.5,-235 1690.5,-235 1690.5,-235 1696.5,-235 1702.5,-241 1702.5,-247 1702.5,-247 1702.5,-259 1702.5,-259 1702.5,-265 1696.5,-271 1690.5,-271"/>
<text text-anchor="middle" x="1646.5" y="-249.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ControlScheduler</text>
</g>
<!-- BatchRouter&#45;&gt;ControlScheduler -->
<g id="edge10" class="edge">
<title>BatchRouter&#45;&gt;ControlScheduler</title>
<path fill="none" stroke="#666666" d="M1073.5,-325.95C1104.28,-301.05 1148.19,-270.68 1193,-257 1325.76,-216.47 1490.82,-229.98 1580.35,-242.24"/>
<polygon fill="#666666" stroke="#666666" points="1579.96,-245.73 1590.35,-243.65 1580.94,-238.79 1579.96,-245.73"/>
</g>
<!-- Router&#45;&gt;NormalScheduler -->
<g id="edge11" class="edge">
<title>Router&#45;&gt;NormalScheduler</title>
<path fill="none" stroke="#666666" d="M1554.13,-409.97C1564.76,-413.7 1574.98,-417.28 1584.49,-420.61"/>
<polygon fill="#666666" stroke="#666666" points="1583.54,-423.99 1594.14,-423.99 1585.86,-417.38 1583.54,-423.99"/>
</g>
<!-- Router&#45;&gt;ControlScheduler -->
<g id="edge12" class="edge">
<title>Router&#45;&gt;ControlScheduler</title>
<path fill="none" stroke="#666666" d="M1554.13,-284.69C1564.54,-281.08 1574.56,-277.61 1583.91,-274.36"/>
<polygon fill="#666666" stroke="#666666" points="1585.09,-277.66 1593.39,-271.08 1582.79,-271.05 1585.09,-277.66"/>
</g>
<!-- LruCache -->
<g id="node15" class="node">
<title>LruCache</title>
<path fill="none" stroke="#1c2123" d="M1669.5,-379C1669.5,-379 1623.5,-379 1623.5,-379 1617.5,-379 1611.5,-373 1611.5,-367 1611.5,-367 1611.5,-355 1611.5,-355 1611.5,-349 1617.5,-343 1623.5,-343 1623.5,-343 1669.5,-343 1669.5,-343 1675.5,-343 1681.5,-349 1681.5,-355 1681.5,-355 1681.5,-367 1681.5,-367 1681.5,-373 1675.5,-379 1669.5,-379"/>
<text text-anchor="middle" x="1646.5" y="-357.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LruCache</text>
</g>
<!-- Router&#45;&gt;LruCache -->
<g id="edge13" class="edge">
<title>Router&#45;&gt;LruCache</title>
<path fill="none" stroke="#666666" d="M1554.13,-356.28C1571.33,-357.17 1587.46,-358 1601.24,-358.71"/>
<polygon fill="#666666" stroke="#666666" points="1601.13,-362.21 1611.3,-359.23 1601.49,-355.22 1601.13,-362.21"/>
</g>
<!-- BasicMailbox -->
<g id="node16" class="node">
<title>BasicMailbox</title>
<path fill="none" stroke="#1c2123" d="M1681,-325C1681,-325 1612,-325 1612,-325 1606,-325 1600,-319 1600,-313 1600,-313 1600,-301 1600,-301 1600,-295 1606,-289 1612,-289 1612,-289 1681,-289 1681,-289 1687,-289 1693,-295 1693,-301 1693,-301 1693,-313 1693,-313 1693,-319 1687,-325 1681,-325"/>
<text text-anchor="middle" x="1646.5" y="-303.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">BasicMailbox</text>
</g>
<!-- Router&#45;&gt;BasicMailbox -->
<g id="edge14" class="edge">
<title>Router&#45;&gt;BasicMailbox</title>
<path fill="none" stroke="#666666" d="M1554.13,-320.49C1566.77,-318.62 1578.83,-316.84 1589.81,-315.22"/>
<polygon fill="#666666" stroke="#666666" points="1590.6,-318.64 1599.98,-313.72 1589.58,-311.72 1590.6,-318.64"/>
</g>
<!-- RaftRouter -->
<g id="node5" class="node">
<title>RaftRouter</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M290,-387.5C290,-387.5 534,-387.5 534,-387.5 540,-387.5 546,-393.5 546,-399.5 546,-399.5 546,-436.5 546,-436.5 546,-442.5 540,-448.5 534,-448.5 534,-448.5 290,-448.5 290,-448.5 284,-448.5 278,-442.5 278,-436.5 278,-436.5 278,-399.5 278,-399.5 278,-393.5 284,-387.5 290,-387.5"/>
<text text-anchor="middle" x="412" y="-433.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftRouter</text>
<polyline fill="none" stroke="#60b5ac" points="278,-425.5 546,-425.5 "/>
<text text-anchor="start" x="286" y="-410.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub router: BatchRouter&lt;PeerFsm&lt;EK, ER&gt;,</text>
<text text-anchor="start" x="286" y="-395.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> StoreFsm&lt;EK&gt;&gt;,</text>
</g>
<!-- RaftRouter&#45;&gt;BatchRouter -->
<g id="edge26" class="edge">
<title>RaftRouter&#45;&gt;BatchRouter</title>
<path fill="none" stroke="#666666" d="M546.14,-395.48C558.24,-393.81 570.33,-392.28 582,-391 685.81,-379.6 803.74,-372.73 892.4,-368.77"/>
<polygon fill="#666666" stroke="#666666" points="892.68,-372.27 902.52,-368.33 892.37,-365.27 892.68,-372.27"/>
</g>
<!-- PeerFsm -->
<g id="node21" class="node">
<title>PeerFsm</title>
<path fill="none" stroke="#1c2123" d="M745,-694C745,-694 704,-694 704,-694 698,-694 692,-688 692,-682 692,-682 692,-670 692,-670 692,-664 698,-658 704,-658 704,-658 745,-658 745,-658 751,-658 757,-664 757,-670 757,-670 757,-682 757,-682 757,-688 751,-694 745,-694"/>
<text text-anchor="middle" x="724.5" y="-672.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsm</text>
</g>
<!-- RaftRouter&#45;&gt;PeerFsm -->
<g id="edge27" class="edge">
<title>RaftRouter&#45;&gt;PeerFsm</title>
<path fill="none" stroke="#666666" d="M426.29,-448.88C449.78,-499.51 503.67,-599.47 582,-649 611.88,-667.89 651.89,-674.15 681.75,-675.97"/>
<polygon fill="#666666" stroke="#666666" points="681.7,-679.47 691.85,-676.44 682.02,-672.48 681.7,-679.47"/>
</g>
<!-- StoreFsm -->
<g id="node22" class="node">
<title>StoreFsm</title>
<path fill="none" stroke="#1c2123" d="M747,-436C747,-436 702,-436 702,-436 696,-436 690,-430 690,-424 690,-424 690,-412 690,-412 690,-406 696,-400 702,-400 702,-400 747,-400 747,-400 753,-400 759,-406 759,-412 759,-412 759,-424 759,-424 759,-430 753,-436 747,-436"/>
<text text-anchor="middle" x="724.5" y="-414.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreFsm</text>
</g>
<!-- RaftRouter&#45;&gt;StoreFsm -->
<g id="edge28" class="edge">
<title>RaftRouter&#45;&gt;StoreFsm</title>
<path fill="none" stroke="#666666" d="M546.03,-418C593.91,-418 644.68,-418 679.59,-418"/>
<polygon fill="#666666" stroke="#666666" points="679.89,-421.5 689.89,-418 679.89,-414.5 679.89,-421.5"/>
</g>
<!-- ApplyRouter -->
<g id="node6" class="node">
<title>ApplyRouter</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M321,-227.5C321,-227.5 503,-227.5 503,-227.5 509,-227.5 515,-233.5 515,-239.5 515,-239.5 515,-276.5 515,-276.5 515,-282.5 509,-288.5 503,-288.5 503,-288.5 321,-288.5 321,-288.5 315,-288.5 309,-282.5 309,-276.5 309,-276.5 309,-239.5 309,-239.5 309,-233.5 315,-227.5 321,-227.5"/>
<text text-anchor="middle" x="412" y="-273.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ApplyRouter</text>
<polyline fill="none" stroke="#60b5ac" points="309,-265.5 515,-265.5 "/>
<text text-anchor="start" x="317" y="-250.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub router: BatchRouter</text>
<text text-anchor="start" x="317" y="-235.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> &lt;ApplyFsm&lt;EK&gt;, ControlFsm&gt;,</text>
</g>
<!-- ApplyRouter&#45;&gt;BatchRouter -->
<g id="edge23" class="edge">
<title>ApplyRouter&#45;&gt;BatchRouter</title>
<path fill="none" stroke="#666666" d="M515.01,-235.75C608.93,-219.72 750.86,-206.93 867,-245 911.63,-259.63 954.11,-291.77 984.37,-318.97"/>
<polygon fill="#666666" stroke="#666666" points="982.05,-321.59 991.79,-325.76 986.78,-316.43 982.05,-321.59"/>
</g>
<!-- ApplyFsm -->
<g id="node19" class="node">
<title>ApplyFsm</title>
<path fill="none" stroke="#1c2123" d="M749.5,-344C749.5,-344 699.5,-344 699.5,-344 693.5,-344 687.5,-338 687.5,-332 687.5,-332 687.5,-320 687.5,-320 687.5,-314 693.5,-308 699.5,-308 699.5,-308 749.5,-308 749.5,-308 755.5,-308 761.5,-314 761.5,-320 761.5,-320 761.5,-332 761.5,-332 761.5,-338 755.5,-344 749.5,-344"/>
<text text-anchor="middle" x="724.5" y="-322.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsm</text>
</g>
<!-- ApplyRouter&#45;&gt;ApplyFsm -->
<g id="edge24" class="edge">
<title>ApplyRouter&#45;&gt;ApplyFsm</title>
<path fill="none" stroke="#666666" d="M515.14,-283.64C537.15,-288.92 560.31,-294.3 582,-299 613.64,-305.85 649.47,-312.68 677.16,-317.75"/>
<polygon fill="#666666" stroke="#666666" points="676.88,-321.26 687.34,-319.61 678.13,-314.37 676.88,-321.26"/>
</g>
<!-- ControlFsm -->
<g id="node20" class="node">
<title>ControlFsm</title>
<path fill="none" stroke="#1c2123" d="M753.5,-290C753.5,-290 695.5,-290 695.5,-290 689.5,-290 683.5,-284 683.5,-278 683.5,-278 683.5,-266 683.5,-266 683.5,-260 689.5,-254 695.5,-254 695.5,-254 753.5,-254 753.5,-254 759.5,-254 765.5,-260 765.5,-266 765.5,-266 765.5,-278 765.5,-278 765.5,-284 759.5,-290 753.5,-290"/>
<text text-anchor="middle" x="724.5" y="-268.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ControlFsm</text>
</g>
<!-- ApplyRouter&#45;&gt;ControlFsm -->
<g id="edge25" class="edge">
<title>ApplyRouter&#45;&gt;ControlFsm</title>
<path fill="none" stroke="#666666" d="M515.1,-262.6C568.17,-265 630.66,-267.81 673.28,-269.74"/>
<polygon fill="#666666" stroke="#666666" points="673.25,-273.24 683.4,-270.19 673.56,-266.24 673.25,-273.24"/>
</g>
<!-- ApplyBatchSystem -->
<g id="node7" class="node">
<title>ApplyBatchSystem</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M321,-307.5C321,-307.5 503,-307.5 503,-307.5 509,-307.5 515,-313.5 515,-319.5 515,-319.5 515,-356.5 515,-356.5 515,-362.5 509,-368.5 503,-368.5 503,-368.5 321,-368.5 321,-368.5 315,-368.5 309,-362.5 309,-356.5 309,-356.5 309,-319.5 309,-319.5 309,-313.5 315,-307.5 321,-307.5"/>
<text text-anchor="middle" x="412" y="-353.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ApplyBatchSystem</text>
<polyline fill="none" stroke="#60b5ac" points="309,-345.5 515,-345.5 "/>
<text text-anchor="start" x="317" y="-330.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">system: BatchSystem</text>
<text text-anchor="start" x="317" y="-315.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> &lt;ApplyFsm&lt;EK&gt;, ControlFsm&gt;,</text>
</g>
<!-- ApplyBatchSystem&#45;&gt;BatchSystem -->
<g id="edge20" class="edge">
<title>ApplyBatchSystem&#45;&gt;BatchSystem</title>
<path fill="none" stroke="#666666" d="M515.3,-359.5C526.33,-364.45 536.85,-370.53 546,-378 572.18,-399.39 559.72,-419.58 582,-445 582.72,-445.83 583.45,-446.65 584.19,-447.47"/>
<polygon fill="#666666" stroke="#666666" points="581.64,-449.86 591.04,-454.76 586.75,-445.07 581.64,-449.86"/>
</g>
<!-- ApplyBatchSystem&#45;&gt;ApplyFsm -->
<g id="edge21" class="edge">
<title>ApplyBatchSystem&#45;&gt;ApplyFsm</title>
<path fill="none" stroke="#666666" d="M515.1,-334.05C569.8,-331.94 634.52,-329.44 677.15,-327.79"/>
<polygon fill="#666666" stroke="#666666" points="677.37,-331.29 687.23,-327.4 677.1,-324.29 677.37,-331.29"/>
</g>
<!-- ApplyBatchSystem&#45;&gt;ControlFsm -->
<g id="edge22" class="edge">
<title>ApplyBatchSystem&#45;&gt;ControlFsm</title>
<path fill="none" stroke="#666666" d="M515.19,-313.76C537.19,-308.72 560.34,-303.56 582,-299 612.27,-292.62 646.33,-286.1 673.44,-281.07"/>
<polygon fill="#666666" stroke="#666666" points="674.27,-284.48 683.47,-279.22 673,-277.59 674.27,-284.48"/>
</g>
<!-- Normal -->
<g id="node10" class="node">
<title>Normal</title>
<path fill="none" stroke="#1c2123" d="M1391,-628C1391,-628 1356,-628 1356,-628 1350,-628 1344,-622 1344,-616 1344,-616 1344,-604 1344,-604 1344,-598 1350,-592 1356,-592 1356,-592 1391,-592 1391,-592 1397,-592 1403,-598 1403,-604 1403,-604 1403,-616 1403,-616 1403,-622 1397,-628 1391,-628"/>
<text text-anchor="middle" x="1373.5" y="-606.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Normal</text>
</g>
<!-- FsmTypes&#45;&gt;Normal -->
<g id="edge5" class="edge">
<title>FsmTypes&#45;&gt;Normal</title>
<path fill="none" stroke="#666666" d="M1067.26,-558.66C1100.04,-565.46 1149.64,-575.46 1193,-583 1241.32,-591.4 1297.23,-599.57 1333.65,-604.68"/>
<polygon fill="#666666" stroke="#666666" points="1333.45,-608.18 1343.83,-606.1 1334.41,-601.25 1333.45,-608.18"/>
</g>
<!-- Control -->
<g id="node11" class="node">
<title>Control</title>
<path fill="none" stroke="#1c2123" d="M1390.5,-574C1390.5,-574 1356.5,-574 1356.5,-574 1350.5,-574 1344.5,-568 1344.5,-562 1344.5,-562 1344.5,-550 1344.5,-550 1344.5,-544 1350.5,-538 1356.5,-538 1356.5,-538 1390.5,-538 1390.5,-538 1396.5,-538 1402.5,-544 1402.5,-550 1402.5,-550 1402.5,-562 1402.5,-562 1402.5,-568 1396.5,-574 1390.5,-574"/>
<text text-anchor="middle" x="1373.5" y="-552.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Control</text>
</g>
<!-- FsmTypes&#45;&gt;Control -->
<g id="edge6" class="edge">
<title>FsmTypes&#45;&gt;Control</title>
<path fill="none" stroke="#666666" d="M1067.22,-551.53C1132.24,-552.48 1268.11,-554.47 1334.44,-555.44"/>
<polygon fill="#666666" stroke="#666666" points="1334.41,-558.94 1344.46,-555.59 1334.51,-551.94 1334.41,-558.94"/>
</g>
<!-- Empty -->
<g id="node12" class="node">
<title>Empty</title>
<path fill="none" stroke="#1c2123" d="M1388.5,-520C1388.5,-520 1358.5,-520 1358.5,-520 1352.5,-520 1346.5,-514 1346.5,-508 1346.5,-508 1346.5,-496 1346.5,-496 1346.5,-490 1352.5,-484 1358.5,-484 1358.5,-484 1388.5,-484 1388.5,-484 1394.5,-484 1400.5,-490 1400.5,-496 1400.5,-496 1400.5,-508 1400.5,-508 1400.5,-514 1394.5,-520 1388.5,-520"/>
<text text-anchor="middle" x="1373.5" y="-498.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Empty</text>
</g>
<!-- FsmTypes&#45;&gt;Empty -->
<g id="edge7" class="edge">
<title>FsmTypes&#45;&gt;Empty</title>
<path fill="none" stroke="#666666" d="M1067.22,-545.8C1132.75,-536.4 1270.27,-516.67 1336,-507.24"/>
<polygon fill="#666666" stroke="#666666" points="1336.89,-510.65 1346.29,-505.76 1335.89,-503.72 1336.89,-510.65"/>
</g>
<!-- RaftBatchSystem -->
<g id="node17" class="node">
<title>RaftBatchSystem</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M12,-261.5C12,-261.5 230,-261.5 230,-261.5 236,-261.5 242,-267.5 242,-273.5 242,-273.5 242,-402.5 242,-402.5 242,-408.5 236,-414.5 230,-414.5 230,-414.5 12,-414.5 12,-414.5 6,-414.5 0,-408.5 0,-402.5 0,-402.5 0,-273.5 0,-273.5 0,-267.5 6,-261.5 12,-261.5"/>
<text text-anchor="middle" x="121" y="-399.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftBatchSystem</text>
<polyline fill="none" stroke="#60b5ac" points="0,-391.5 242,-391.5 "/>
<text text-anchor="start" x="8" y="-376.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">system: BatchSystem</text>
<text text-anchor="start" x="8" y="-361.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> &lt;PeerFsm&lt;EK, ER&gt;, StoreFsm&lt;EK&gt;&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-353.5 242,-353.5 "/>
<text text-anchor="start" x="8" y="-338.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">apply_router: ApplyRouter&lt;EK&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-330.5 242,-330.5 "/>
<text text-anchor="start" x="8" y="-315.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">apply_system: ApplyBatchSystem&lt;EK&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-307.5 242,-307.5 "/>
<text text-anchor="start" x="8" y="-292.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">router: RaftRouter&lt;EK, ER&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-284.5 242,-284.5 "/>
<text text-anchor="start" x="8" y="-269.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">workers: Option&lt;Workers&lt;EK&gt;&gt;,</text>
</g>
<!-- RaftBatchSystem&#45;&gt;BatchSystem -->
<g id="edge15" class="edge">
<title>RaftBatchSystem&#45;&gt;BatchSystem</title>
<path fill="none" stroke="#666666" d="M207.36,-414.76C229.16,-431.13 253.42,-446.83 278,-458 370.65,-500.09 483.08,-522.36 571.81,-534.1"/>
<polygon fill="#666666" stroke="#666666" points="571.6,-537.6 581.96,-535.41 572.49,-530.66 571.6,-537.6"/>
</g>
<!-- RaftBatchSystem&#45;&gt;RaftRouter -->
<g id="edge16" class="edge">
<title>RaftBatchSystem&#45;&gt;RaftRouter</title>
<path fill="none" stroke="#666666" d="M242.05,-371.23C258.1,-375.68 274.57,-380.23 290.63,-384.68"/>
<polygon fill="#666666" stroke="#666666" points="290,-388.14 300.57,-387.43 291.87,-381.39 290,-388.14"/>
</g>
<!-- RaftBatchSystem&#45;&gt;ApplyRouter -->
<g id="edge17" class="edge">
<title>RaftBatchSystem&#45;&gt;ApplyRouter</title>
<path fill="none" stroke="#666666" d="M242.05,-304.77C260.94,-299.54 280.4,-294.15 299.09,-288.98"/>
<polygon fill="#666666" stroke="#666666" points="300.08,-292.34 308.78,-286.3 298.21,-285.59 300.08,-292.34"/>
</g>
<!-- RaftBatchSystem&#45;&gt;ApplyBatchSystem -->
<g id="edge18" class="edge">
<title>RaftBatchSystem&#45;&gt;ApplyBatchSystem</title>
<path fill="none" stroke="#666666" d="M242.05,-338C260.76,-338 280.04,-338 298.57,-338"/>
<polygon fill="#666666" stroke="#666666" points="298.78,-341.5 308.78,-338 298.78,-334.5 298.78,-341.5"/>
</g>
<!-- Workers -->
<g id="node18" class="node">
<title>Workers</title>
<path fill="none" stroke="#1c2123" d="M431.5,-144C431.5,-144 392.5,-144 392.5,-144 386.5,-144 380.5,-138 380.5,-132 380.5,-132 380.5,-120 380.5,-120 380.5,-114 386.5,-108 392.5,-108 392.5,-108 431.5,-108 431.5,-108 437.5,-108 443.5,-114 443.5,-120 443.5,-120 443.5,-132 443.5,-132 443.5,-138 437.5,-144 431.5,-144"/>
<text text-anchor="middle" x="412" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Workers</text>
</g>
<!-- RaftBatchSystem&#45;&gt;Workers -->
<g id="edge19" class="edge">
<title>RaftBatchSystem&#45;&gt;Workers</title>
<path fill="none" stroke="#666666" d="M220.04,-261.38C239.14,-246.8 259.09,-231.8 278,-218 310.64,-194.18 348.62,-168.06 375.61,-149.76"/>
<polygon fill="#666666" stroke="#666666" points="377.65,-152.61 383.97,-144.11 373.73,-146.81 377.65,-152.61"/>
</g>
<!-- FutureWorker -->
<g id="node23" class="node">
<title>FutureWorker</title>
<path fill="none" stroke="#1c2123" d="M759,-144C759,-144 690,-144 690,-144 684,-144 678,-138 678,-132 678,-132 678,-120 678,-120 678,-114 684,-108 690,-108 690,-108 759,-108 759,-108 765,-108 771,-114 771,-120 771,-120 771,-132 771,-132 771,-138 765,-144 759,-144"/>
<text text-anchor="middle" x="724.5" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">FutureWorker</text>
</g>
<!-- Workers&#45;&gt;FutureWorker -->
<g id="edge29" class="edge">
<title>Workers&#45;&gt;FutureWorker</title>
<path fill="none" stroke="#666666" d="M443.62,-126C495.69,-126 602.18,-126 667.75,-126"/>
<polygon fill="#666666" stroke="#666666" points="667.91,-129.5 677.91,-126 667.91,-122.5 667.91,-129.5"/>
</g>
<!-- Worker -->
<g id="node24" class="node">
<title>Worker</title>
<path fill="none" stroke="#1c2123" d="M741.5,-90C741.5,-90 707.5,-90 707.5,-90 701.5,-90 695.5,-84 695.5,-78 695.5,-78 695.5,-66 695.5,-66 695.5,-60 701.5,-54 707.5,-54 707.5,-54 741.5,-54 741.5,-54 747.5,-54 753.5,-60 753.5,-66 753.5,-66 753.5,-78 753.5,-78 753.5,-84 747.5,-90 741.5,-90"/>
<text text-anchor="middle" x="724.5" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Worker</text>
</g>
<!-- Workers&#45;&gt;Worker -->
<g id="edge30" class="edge">
<title>Workers&#45;&gt;Worker</title>
<path fill="none" stroke="#666666" d="M443.62,-120.67C500.61,-110.76 622.79,-89.51 685.16,-78.67"/>
<polygon fill="#666666" stroke="#666666" points="686.11,-82.06 695.36,-76.89 684.91,-75.16 686.11,-82.06"/>
</g>
<!-- CoprocessorHost -->
<g id="node25" class="node">
<title>CoprocessorHost</title>
<path fill="none" stroke="#1c2123" d="M767.5,-36C767.5,-36 681.5,-36 681.5,-36 675.5,-36 669.5,-30 669.5,-24 669.5,-24 669.5,-12 669.5,-12 669.5,-6 675.5,0 681.5,0 681.5,0 767.5,0 767.5,0 773.5,0 779.5,-6 779.5,-12 779.5,-12 779.5,-24 779.5,-24 779.5,-30 773.5,-36 767.5,-36"/>
<text text-anchor="middle" x="724.5" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CoprocessorHost</text>
</g>
<!-- Workers&#45;&gt;CoprocessorHost -->
<g id="edge31" class="edge">
<title>Workers&#45;&gt;CoprocessorHost</title>
<path fill="none" stroke="#666666" d="M443.76,-108.26C476.88,-89.88 531.62,-61.57 582,-45 606.74,-36.86 634.77,-30.88 659.32,-26.64"/>
<polygon fill="#666666" stroke="#666666" points="659.96,-30.08 669.25,-24.99 658.81,-23.18 659.96,-30.08"/>
</g>
<!-- PdTask -->
<g id="node26" class="node">
<title>PdTask</title>
<path fill="none" stroke="#1c2123" d="M741,-198C741,-198 708,-198 708,-198 702,-198 696,-192 696,-186 696,-186 696,-174 696,-174 696,-168 702,-162 708,-162 708,-162 741,-162 741,-162 747,-162 753,-168 753,-174 753,-174 753,-186 753,-186 753,-192 747,-198 741,-198"/>
<text text-anchor="middle" x="724.5" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PdTask</text>
</g>
<!-- Workers&#45;&gt;PdTask -->
<g id="edge32" class="edge">
<title>Workers&#45;&gt;PdTask</title>
<path fill="none" stroke="#666666" d="M443.62,-131.33C500.75,-141.26 623.41,-162.59 685.63,-173.41"/>
<polygon fill="#666666" stroke="#666666" points="685.35,-176.92 695.8,-175.18 686.55,-170.02 685.35,-176.92"/>
</g>
</g>
</svg>
