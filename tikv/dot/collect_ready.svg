<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: collect_ready Pages: 1 -->
<svg width="1310pt" height="514pt"
 viewBox="0.00 0.00 1310.00 514.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 510)">
<title>collect_ready</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-510 1306,-510 1306,4 -4,4"/>
<g id="clust6" class="cluster">
<title>cluster_Peer</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M190,-302C190,-302 1187,-302 1187,-302 1193,-302 1199,-308 1199,-314 1199,-314 1199,-486 1199,-486 1199,-492 1193,-498 1187,-498 1187,-498 190,-498 190,-498 184,-498 178,-492 178,-486 178,-486 178,-314 178,-314 178,-308 184,-302 190,-302"/>
<text text-anchor="middle" x="688.5" y="-478" font-family="Times,serif" font-size="20.00">Peer</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_PeerFsmDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M12,-365C12,-365 146,-365 146,-365 152,-365 158,-371 158,-377 158,-377 158,-435 158,-435 158,-441 152,-447 146,-447 146,-447 12,-447 12,-447 6,-447 0,-441 0,-435 0,-435 0,-377 0,-377 0,-371 6,-365 12,-365"/>
<text text-anchor="middle" x="79" y="-427" font-family="Times,serif" font-size="20.00">PeerFsmDelegate</text>
</g>
<g id="clust1" class="cluster">
<title>cluster_raft</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M535,-36C535,-36 706,-36 706,-36 712,-36 718,-42 718,-48 718,-48 718,-278 718,-278 718,-284 712,-290 706,-290 706,-290 535,-290 535,-290 529,-290 523,-284 523,-278 523,-278 523,-48 523,-48 523,-42 529,-36 535,-36"/>
<text text-anchor="middle" x="620.5" y="-270" font-family="Times,serif" font-size="20.00">raft&#45;rs</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_PollContext</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1071,-34C1071,-34 1282,-34 1282,-34 1288,-34 1294,-40 1294,-46 1294,-46 1294,-104 1294,-104 1294,-110 1288,-116 1282,-116 1282,-116 1071,-116 1071,-116 1065,-116 1059,-110 1059,-104 1059,-104 1059,-46 1059,-46 1059,-40 1065,-34 1071,-34"/>
<text text-anchor="middle" x="1176.5" y="-96" font-family="Times,serif" font-size="20.00">PollContext</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_InvokeContext</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M750,-124C750,-124 1147.5,-124 1147.5,-124 1153.5,-124 1159.5,-130 1159.5,-136 1159.5,-136 1159.5,-282 1159.5,-282 1159.5,-288 1153.5,-294 1147.5,-294 1147.5,-294 750,-294 750,-294 744,-294 738,-288 738,-282 738,-282 738,-136 738,-136 738,-130 744,-124 750,-124"/>
<text text-anchor="middle" x="948.75" y="-274" font-family="Times,serif" font-size="20.00">InvokeContext</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_PeerStorage</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M786,-8C786,-8 921,-8 921,-8 927,-8 933,-14 933,-20 933,-20 933,-104 933,-104 933,-110 927,-116 921,-116 921,-116 786,-116 786,-116 780,-116 774,-110 774,-104 774,-104 774,-20 774,-20 774,-14 780,-8 786,-8"/>
<text text-anchor="middle" x="853.5" y="-96" font-family="Times,serif" font-size="20.00">PeerStorage</text>
</g>
<!-- has_ready -->
<g id="node1" class="node">
<title>has_ready</title>
<path fill="none" stroke="#1c2123" d="M483,-346C483,-346 436,-346 436,-346 430,-346 424,-340 424,-334 424,-334 424,-322 424,-322 424,-316 430,-310 436,-310 436,-310 483,-310 483,-310 489,-310 495,-316 495,-322 495,-322 495,-334 495,-334 495,-340 489,-346 483,-346"/>
<text text-anchor="middle" x="459.5" y="-324.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">has_ready</text>
</g>
<!-- ready -->
<g id="node2" class="node">
<title>ready</title>
<path fill="none" stroke="#1c2123" d="M474.5,-400C474.5,-400 444.5,-400 444.5,-400 438.5,-400 432.5,-394 432.5,-388 432.5,-388 432.5,-376 432.5,-376 432.5,-370 438.5,-364 444.5,-364 444.5,-364 474.5,-364 474.5,-364 480.5,-364 486.5,-370 486.5,-376 486.5,-376 486.5,-388 486.5,-388 486.5,-394 480.5,-400 474.5,-400"/>
<text text-anchor="middle" x="459.5" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ready</text>
</g>
<!-- Ready -->
<g id="node3" class="node">
<title>Ready</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M543,-44.5C543,-44.5 698,-44.5 698,-44.5 704,-44.5 710,-50.5 710,-56.5 710,-56.5 710,-239.5 710,-239.5 710,-245.5 704,-251.5 698,-251.5 698,-251.5 543,-251.5 543,-251.5 537,-251.5 531,-245.5 531,-239.5 531,-239.5 531,-56.5 531,-56.5 531,-50.5 537,-44.5 543,-44.5"/>
<text text-anchor="middle" x="620.5" y="-236.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Ready</text>
<polyline fill="none" stroke="#60b5ac" points="531,-228.5 710,-228.5 "/>
<text text-anchor="start" x="539" y="-213.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">number: u64,</text>
<polyline fill="none" stroke="#60b5ac" points="531,-205.5 710,-205.5 "/>
<text text-anchor="start" x="539" y="-190.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ss: Option&lt;SoftState&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="531,-182.5 710,-182.5 "/>
<text text-anchor="start" x="539" y="-167.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">hs: Option&lt;HardState&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="531,-159.5 710,-159.5 "/>
<text text-anchor="start" x="539" y="-144.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">read_states: Vec&lt;ReadState&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="531,-136.5 710,-136.5 "/>
<text text-anchor="start" x="539" y="-121.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">entries: Vec&lt;Entry&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="531,-113.5 710,-113.5 "/>
<text text-anchor="start" x="539" y="-98.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">snapshot: Snapshot,</text>
<polyline fill="none" stroke="#60b5ac" points="531,-90.5 710,-90.5 "/>
<text text-anchor="start" x="539" y="-75.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">light: LightReady,</text>
<polyline fill="none" stroke="#60b5ac" points="531,-67.5 710,-67.5 "/>
<text text-anchor="start" x="539" y="-52.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">must_sync: bool,</text>
</g>
<!-- ready&#45;&gt;Ready -->
<g id="edge1" class="edge">
<title>ready&#45;&gt;Ready</title>
<path fill="none" stroke="#666666" d="M486.56,-363.74C489.6,-361.01 492.51,-358.07 495,-355 512.78,-333.08 509.12,-322.58 523,-298 529.99,-285.62 537.58,-272.86 545.32,-260.25"/>
<polygon fill="#666666" stroke="#666666" points="548.42,-261.9 550.7,-251.55 542.47,-258.21 548.42,-261.9"/>
</g>
<!-- LightReady -->
<g id="node4" class="node">
<title>LightReady</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M765,-327C765,-327 942,-327 942,-327 948,-327 954,-333 954,-339 954,-339 954,-407 954,-407 954,-413 948,-419 942,-419 942,-419 765,-419 765,-419 759,-419 753,-413 753,-407 753,-407 753,-339 753,-339 753,-333 759,-327 765,-327"/>
<text text-anchor="middle" x="853.5" y="-403.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">LightReady</text>
<polyline fill="none" stroke="#60b5ac" points="753,-396 954,-396 "/>
<text text-anchor="start" x="761" y="-380.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">commit_index: Option&lt;u64&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="753,-373 954,-373 "/>
<text text-anchor="start" x="761" y="-357.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">committed_entries: Vec&lt;Entry&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="753,-350 954,-350 "/>
<text text-anchor="start" x="761" y="-334.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">messages: Vec&lt;Vec&lt;Message&gt;&gt;,</text>
</g>
<!-- Ready&#45;&gt;LightReady -->
<g id="edge2" class="edge">
<title>Ready:light&#45;&gt;LightReady</title>
<path fill="none" stroke="#666666" d="M711.5,-79C760.52,-79 712.14,-256.35 738,-298 742.97,-306.01 749.15,-313.33 756.04,-319.99"/>
<polygon fill="#666666" stroke="#666666" points="754.01,-322.87 763.78,-326.97 758.69,-317.67 754.01,-322.87"/>
</g>
<!-- raft_state -->
<g id="node7" class="node">
<title>raft_state</title>
<path fill="#feed9b" stroke="#f7e495" d="M758,-132.5C758,-132.5 949,-132.5 949,-132.5 955,-132.5 961,-138.5 961,-144.5 961,-144.5 961,-189.5 961,-189.5 961,-195.5 955,-201.5 949,-201.5 949,-201.5 758,-201.5 758,-201.5 752,-201.5 746,-195.5 746,-189.5 746,-189.5 746,-144.5 746,-144.5 746,-138.5 752,-132.5 758,-132.5"/>
<text text-anchor="middle" x="853.5" y="-186.3" font-family="Times,serif" font-size="14.00" fill="#40575d">raft_state</text>
<polyline fill="none" stroke="#f7e495" points="746,-178.5 961,-178.5 "/>
<text text-anchor="start" x="754" y="-163.3" font-family="Times,serif" font-size="14.00" fill="#40575d">RaftLocalState hard_state HardState</text>
<polyline fill="none" stroke="#f7e495" points="746,-155.5 961,-155.5 "/>
<text text-anchor="start" x="754" y="-140.3" font-family="Times,serif" font-size="14.00" fill="#40575d">last_index: u64</text>
</g>
<!-- Ready&#45;&gt;raft_state -->
<g id="edge12" class="edge">
<title>Ready:hs&#45;&gt;raft_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M711.5,-171C719.42,-171 727.59,-170.94 735.82,-170.82"/>
<polygon fill="green" stroke="green" points="735.94,-174.32 745.88,-170.67 735.83,-167.32 735.94,-174.32"/>
</g>
<!-- append -->
<g id="node11" class="node">
<title>append</title>
<path fill="none" stroke="#1c2123" d="M794,-16.5C794,-16.5 913,-16.5 913,-16.5 919,-16.5 925,-22.5 925,-28.5 925,-28.5 925,-65.5 925,-65.5 925,-71.5 919,-77.5 913,-77.5 913,-77.5 794,-77.5 794,-77.5 788,-77.5 782,-71.5 782,-65.5 782,-65.5 782,-28.5 782,-28.5 782,-22.5 788,-16.5 794,-16.5"/>
<text text-anchor="middle" x="853.5" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">append</text>
<polyline fill="none" stroke="#1c2123" points="782,-54.5 925,-54.5 "/>
<text text-anchor="start" x="790" y="-39.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将log entry 存到cache</text>
<text text-anchor="start" x="790" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 和raft_wb</text>
</g>
<!-- Ready&#45;&gt;append -->
<g id="edge11" class="edge">
<title>Ready:entries&#45;&gt;append</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M711.5,-125C730.23,-125 767.95,-103.66 799.66,-83.3"/>
<polygon fill="green" stroke="green" points="801.95,-85.99 808.43,-77.6 798.13,-80.12 801.95,-85.99"/>
</g>
<!-- handle_raft_committed_entries -->
<g id="node12" class="node">
<title>handle_raft_committed_entries</title>
<path fill="none" stroke="#1c2123" d="M1009,-382C1009,-382 1179,-382 1179,-382 1185,-382 1191,-388 1191,-394 1191,-394 1191,-446 1191,-446 1191,-452 1185,-458 1179,-458 1179,-458 1009,-458 1009,-458 1003,-458 997,-452 997,-446 997,-446 997,-394 997,-394 997,-388 1003,-382 1009,-382"/>
<text text-anchor="middle" x="1094" y="-442.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_committed_entries</text>
<polyline fill="none" stroke="#1c2123" points="997,-435 1191,-435 "/>
<text text-anchor="start" x="1005" y="-419.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用apply_router发送</text>
<text text-anchor="start" x="1005" y="-404.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ApplyTask::apply </text>
<text text-anchor="start" x="1005" y="-389.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 让ApplyDelegate执行log entry</text>
</g>
<!-- LightReady&#45;&gt;handle_raft_committed_entries -->
<g id="edge19" class="edge">
<title>LightReady:committed_entries&#45;&gt;handle_raft_committed_entries</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M955.5,-361C967.21,-361 987.71,-368.31 1009.37,-377.79"/>
<polygon fill="green" stroke="green" points="1008.14,-381.07 1018.7,-381.97 1011,-374.69 1008.14,-381.07"/>
</g>
<!-- send -->
<g id="node14" class="node">
<title>send</title>
<path fill="none" stroke="#1c2123" d="M1028.5,-316C1028.5,-316 1159.5,-316 1159.5,-316 1165.5,-316 1171.5,-322 1171.5,-328 1171.5,-328 1171.5,-350 1171.5,-350 1171.5,-356 1165.5,-362 1159.5,-362 1159.5,-362 1028.5,-362 1028.5,-362 1022.5,-362 1016.5,-356 1016.5,-350 1016.5,-350 1016.5,-328 1016.5,-328 1016.5,-322 1022.5,-316 1028.5,-316"/>
<text text-anchor="middle" x="1094" y="-346.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">send</text>
<polyline fill="none" stroke="#1c2123" points="1016.5,-339 1171.5,-339 "/>
<text text-anchor="start" x="1024.5" y="-323.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">发送ready中的messages</text>
</g>
<!-- LightReady&#45;&gt;send -->
<g id="edge18" class="edge">
<title>LightReady:messages&#45;&gt;send</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M955.5,-338C971.81,-338 989.21,-338.07 1005.95,-338.18"/>
<polygon fill="green" stroke="green" points="1006.25,-341.68 1016.27,-338.24 1006.3,-334.68 1006.25,-341.68"/>
</g>
<!-- raft_wb -->
<g id="node5" class="node">
<title>raft_wb</title>
<path fill="none" stroke="#1c2123" d="M1274,-78C1274,-78 1239,-78 1239,-78 1233,-78 1227,-72 1227,-66 1227,-66 1227,-54 1227,-54 1227,-48 1233,-42 1239,-42 1239,-42 1274,-42 1274,-42 1280,-42 1286,-48 1286,-54 1286,-54 1286,-66 1286,-66 1286,-72 1280,-78 1274,-78"/>
<text text-anchor="middle" x="1256.5" y="-56.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_wb</text>
</g>
<!-- kv_wb -->
<g id="node6" class="node">
<title>kv_wb</title>
<path fill="none" stroke="#1c2123" d="M1109,-78C1109,-78 1079,-78 1079,-78 1073,-78 1067,-72 1067,-66 1067,-66 1067,-54 1067,-54 1067,-48 1073,-42 1079,-42 1079,-42 1109,-42 1109,-42 1115,-42 1121,-48 1121,-54 1121,-54 1121,-66 1121,-66 1121,-72 1115,-78 1109,-78"/>
<text text-anchor="middle" x="1094" y="-56.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv_wb</text>
</g>
<!-- save_raft_state_to -->
<g id="node8" class="node">
<title>save_raft_state_to</title>
<path fill="none" stroke="#1c2123" d="M1139.5,-185C1139.5,-185 1048.5,-185 1048.5,-185 1042.5,-185 1036.5,-179 1036.5,-173 1036.5,-173 1036.5,-161 1036.5,-161 1036.5,-155 1042.5,-149 1048.5,-149 1048.5,-149 1139.5,-149 1139.5,-149 1145.5,-149 1151.5,-155 1151.5,-161 1151.5,-161 1151.5,-173 1151.5,-173 1151.5,-179 1145.5,-185 1139.5,-185"/>
<text text-anchor="middle" x="1094" y="-163.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">save_raft_state_to</text>
</g>
<!-- raft_state&#45;&gt;save_raft_state_to -->
<g id="edge3" class="edge">
<title>raft_state&#45;&gt;save_raft_state_to</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M961.19,-167C983.37,-167 1006.13,-167 1026.36,-167"/>
<polygon fill="green" stroke="green" points="1026.39,-170.5 1036.39,-167 1026.39,-163.5 1026.39,-170.5"/>
</g>
<!-- save_raft_state_to&#45;&gt;raft_wb -->
<g id="edge4" class="edge">
<title>save_raft_state_to&#45;&gt;raft_wb</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1145.3,-148.96C1163.09,-141.39 1182.71,-131.63 1199,-120 1212.44,-110.41 1225.24,-97.28 1235.25,-85.74"/>
<polygon fill="green" stroke="green" points="1237.94,-87.98 1241.7,-78.08 1232.59,-83.47 1237.94,-87.98"/>
</g>
<!-- save_snapshot_raft_state_to -->
<g id="node9" class="node">
<title>save_snapshot_raft_state_to</title>
<path fill="none" stroke="#1c2123" d="M926,-256C926,-256 781,-256 781,-256 775,-256 769,-250 769,-244 769,-244 769,-232 769,-232 769,-226 775,-220 781,-220 781,-220 926,-220 926,-220 932,-220 938,-226 938,-232 938,-232 938,-244 938,-244 938,-250 932,-256 926,-256"/>
<text text-anchor="middle" x="853.5" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">save_snapshot_raft_state_to</text>
</g>
<!-- save_snapshot_raft_state_to&#45;&gt;kv_wb -->
<g id="edge5" class="edge">
<title>save_snapshot_raft_state_to&#45;&gt;kv_wb</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M938.09,-225.23C946.42,-221.58 954.27,-216.92 961,-211 993.67,-182.28 969.17,-153.42 997,-120 1013.29,-100.44 1037.66,-85.32 1057.77,-75.15"/>
<polygon fill="green" stroke="green" points="1059.49,-78.21 1066.96,-70.69 1056.43,-71.91 1059.49,-78.21"/>
</g>
<!-- handle_raft_ready -->
<g id="node10" class="node">
<title>handle_raft_ready</title>
<path fill="none" stroke="#1c2123" d="M568.5,-310.5C568.5,-310.5 672.5,-310.5 672.5,-310.5 678.5,-310.5 684.5,-316.5 684.5,-322.5 684.5,-322.5 684.5,-359.5 684.5,-359.5 684.5,-365.5 678.5,-371.5 672.5,-371.5 672.5,-371.5 568.5,-371.5 568.5,-371.5 562.5,-371.5 556.5,-365.5 556.5,-359.5 556.5,-359.5 556.5,-322.5 556.5,-322.5 556.5,-316.5 562.5,-310.5 568.5,-310.5"/>
<text text-anchor="middle" x="620.5" y="-356.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_ready</text>
<polyline fill="none" stroke="#1c2123" points="556.5,-348.5 684.5,-348.5 "/>
<text text-anchor="start" x="564.5" y="-333.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">保存log entries</text>
<text text-anchor="start" x="564.5" y="-318.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> raft state 到raft_wb</text>
</g>
<!-- handle_raft_ready&#45;&gt;raft_state -->
<g id="edge6" class="edge">
<title>handle_raft_ready&#45;&gt;raft_state</title>
<path fill="none" stroke="#666666" d="M684.87,-320.08C697.34,-313.44 709.24,-304.89 718,-294 741.77,-264.42 712.97,-239.52 738,-211 738.74,-210.16 739.49,-209.34 740.26,-208.53"/>
<polygon fill="#666666" stroke="#666666" points="742.7,-211.04 747.64,-201.66 737.94,-205.91 742.7,-211.04"/>
</g>
<!-- handle_raft_ready&#45;&gt;save_raft_state_to -->
<g id="edge7" class="edge">
<title>handle_raft_ready&#45;&gt;save_raft_state_to</title>
<path fill="none" stroke="#666666" d="M684.69,-328.34C775.84,-309.84 936.08,-276.41 961,-265 1001.28,-246.56 1041.23,-214.46 1066.46,-192.04"/>
<polygon fill="#666666" stroke="#666666" points="1069.03,-194.43 1074.11,-185.13 1064.34,-189.23 1069.03,-194.43"/>
</g>
<!-- handle_raft_ready&#45;&gt;save_snapshot_raft_state_to -->
<g id="edge8" class="edge">
<title>handle_raft_ready&#45;&gt;save_snapshot_raft_state_to</title>
<path fill="none" stroke="#666666" d="M684.54,-313.14C695.96,-307.3 707.55,-300.83 718,-294 727.77,-287.62 727.86,-282.76 738,-277 749.83,-270.28 763,-264.47 776.08,-259.53"/>
<polygon fill="#666666" stroke="#666666" points="777.37,-262.79 785.57,-256.09 774.98,-256.21 777.37,-262.79"/>
</g>
<!-- handle_raft_ready&#45;&gt;append -->
<g id="edge9" class="edge">
<title>handle_raft_ready&#45;&gt;append</title>
<path fill="none" stroke="#666666" d="M684.9,-321.38C697.68,-314.63 709.71,-305.71 718,-294 762.98,-230.47 696.73,-186 738,-120 747.14,-105.38 760.41,-93.15 774.69,-83.15"/>
<polygon fill="#666666" stroke="#666666" points="776.8,-85.95 783.2,-77.51 772.93,-80.12 776.8,-85.95"/>
</g>
<!-- append&#45;&gt;raft_wb -->
<g id="edge10" class="edge">
<title>append&#45;&gt;raft_wb</title>
<path fill="none" stroke="#666666" d="M925.09,-33.48C995.42,-22.49 1106.03,-11.93 1199,-33 1205.19,-34.4 1211.5,-36.57 1217.55,-39.08"/>
<polygon fill="#666666" stroke="#666666" points="1216.23,-42.33 1226.79,-43.25 1219.11,-35.95 1216.23,-42.33"/>
</g>
<!-- handle_raft_ready_append -->
<g id="node13" class="node">
<title>handle_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M198,-323C198,-323 376,-323 376,-323 382,-323 388,-329 388,-335 388,-335 388,-447 388,-447 388,-453 382,-459 376,-459 376,-459 198,-459 198,-459 192,-459 186,-453 186,-447 186,-447 186,-335 186,-335 186,-329 192,-323 198,-323"/>
<text text-anchor="middle" x="287" y="-443.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_ready_append</text>
<polyline fill="none" stroke="#1c2123" points="186,-436 388,-436 "/>
<text text-anchor="start" x="194" y="-420.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">调用raft的ready</text>
<text text-anchor="start" x="194" y="-405.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 1.发送messages</text>
<text text-anchor="start" x="194" y="-390.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 2.将log entries 保存到raft_wb</text>
<text text-anchor="start" x="194" y="-375.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 3.保存ready hard state到raft_wb</text>
<text text-anchor="start" x="194" y="-360.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 4.发消息给apply router</text>
<text text-anchor="start" x="194" y="-345.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 由apply router apply</text>
<text text-anchor="start" x="194" y="-330.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> log entry 到state machine</text>
</g>
<!-- handle_raft_ready_append&#45;&gt;has_ready -->
<g id="edge13" class="edge">
<title>handle_raft_ready_append&#45;&gt;has_ready</title>
<path fill="none" stroke="#666666" d="M388.17,-353.99C397.24,-350.64 406.07,-347.37 414.25,-344.35"/>
<polygon fill="#666666" stroke="#666666" points="415.7,-347.55 423.87,-340.8 413.28,-340.98 415.7,-347.55"/>
</g>
<!-- handle_raft_ready_append&#45;&gt;ready -->
<g id="edge14" class="edge">
<title>handle_raft_ready_append&#45;&gt;ready</title>
<path fill="none" stroke="#666666" d="M388.17,-385.71C400.22,-385.08 411.86,-384.46 422.08,-383.92"/>
<polygon fill="#666666" stroke="#666666" points="422.38,-387.41 432.19,-383.39 422.02,-380.42 422.38,-387.41"/>
</g>
<!-- handle_raft_ready_append&#45;&gt;handle_raft_ready -->
<g id="edge15" class="edge">
<title>handle_raft_ready_append&#45;&gt;handle_raft_ready</title>
<path fill="none" stroke="#666666" d="M388.08,-413.1C422.38,-417.16 460.75,-417.74 495,-409 520.38,-402.52 546.16,-389.69 567.62,-376.9"/>
<polygon fill="#666666" stroke="#666666" points="569.53,-379.84 576.24,-371.64 565.88,-373.87 569.53,-379.84"/>
</g>
<!-- handle_raft_ready_append&#45;&gt;handle_raft_committed_entries -->
<g id="edge16" class="edge">
<title>handle_raft_ready_append&#45;&gt;handle_raft_committed_entries</title>
<path fill="none" stroke="#666666" d="M388,-411.89C400.09,-413.89 412.3,-415.67 424,-417 661.19,-444.05 722.41,-437.12 961,-429 969.33,-428.72 977.96,-428.33 986.62,-427.88"/>
<polygon fill="#666666" stroke="#666666" points="987,-431.37 996.79,-427.32 986.62,-424.38 987,-431.37"/>
</g>
<!-- handle_raft_ready_append&#45;&gt;send -->
<g id="edge17" class="edge">
<title>handle_raft_ready_append&#45;&gt;send</title>
<path fill="none" stroke="#666666" d="M388.19,-427.79C526.36,-471.94 778.94,-528.4 961,-429 986.97,-414.82 973.81,-391.37 997,-373 1000.18,-370.48 1003.57,-368.14 1007.09,-365.96"/>
<polygon fill="#666666" stroke="#666666" points="1009.11,-368.84 1016.11,-360.89 1005.68,-362.74 1009.11,-368.84"/>
</g>
<!-- collect_ready -->
<g id="node15" class="node">
<title>collect_ready</title>
<path fill="none" stroke="#1c2123" d="M111,-409C111,-409 46,-409 46,-409 40,-409 34,-403 34,-397 34,-397 34,-385 34,-385 34,-379 40,-373 46,-373 46,-373 111,-373 111,-373 117,-373 123,-379 123,-385 123,-385 123,-397 123,-397 123,-403 117,-409 111,-409"/>
<text text-anchor="middle" x="78.5" y="-387.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">collect_ready</text>
</g>
<!-- collect_ready&#45;&gt;handle_raft_ready_append -->
<g id="edge20" class="edge">
<title>collect_ready&#45;&gt;handle_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M123.04,-391C138.69,-391 157.12,-391 175.86,-391"/>
<polygon fill="#666666" stroke="#666666" points="175.98,-394.5 185.98,-391 175.98,-387.5 175.98,-394.5"/>
</g>
</g>
</svg>
