<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: collect_ready Pages: 1 -->
<svg width="1126pt" height="306pt"
 viewBox="0.00 0.00 1126.00 306.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 302)">
<title>collect_ready</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-302 1122,-302 1122,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_Raft</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M529,-8C529,-8 656,-8 656,-8 662,-8 668,-14 668,-20 668,-20 668,-132 668,-132 668,-138 662,-144 656,-144 656,-144 529,-144 529,-144 523,-144 517,-138 517,-132 517,-132 517,-20 517,-20 517,-14 523,-8 529,-8"/>
<text text-anchor="middle" x="592.5" y="-124" font-family="Times,serif" font-size="20.00">raft&#45;rs</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_Peer</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M332,-152C332,-152 1098,-152 1098,-152 1104,-152 1110,-158 1110,-164 1110,-164 1110,-278 1110,-278 1110,-284 1104,-290 1098,-290 1098,-290 332,-290 332,-290 326,-290 320,-284 320,-278 320,-278 320,-164 320,-164 320,-158 326,-152 332,-152"/>
<text text-anchor="middle" x="715" y="-270" font-family="Times,serif" font-size="20.00">Peer</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_PeerFsmDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M154,-152C154,-152 288,-152 288,-152 294,-152 300,-158 300,-164 300,-164 300,-276 300,-276 300,-282 294,-288 288,-288 288,-288 154,-288 154,-288 148,-288 142,-282 142,-276 142,-276 142,-164 142,-164 142,-158 148,-152 154,-152"/>
<text text-anchor="middle" x="221" y="-268" font-family="Times,serif" font-size="20.00">PeerFsmDelegate</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_RaftPoller</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-179C20,-179 110,-179 110,-179 116,-179 122,-185 122,-191 122,-191 122,-249 122,-249 122,-255 116,-261 110,-261 110,-261 20,-261 20,-261 14,-261 8,-255 8,-249 8,-249 8,-191 8,-191 8,-185 14,-179 20,-179"/>
<text text-anchor="middle" x="65" y="-241" font-family="Times,serif" font-size="20.00">RaftPoller</text>
</g>
<!-- propose_conf_change -->
<g id="node1" class="node">
<title>propose_conf_change</title>
<path fill="none" stroke="#1c2123" d="M648,-106C648,-106 537,-106 537,-106 531,-106 525,-100 525,-94 525,-94 525,-82 525,-82 525,-76 531,-70 537,-70 537,-70 648,-70 648,-70 654,-70 660,-76 660,-82 660,-82 660,-94 660,-94 660,-100 654,-106 648,-106"/>
<text text-anchor="middle" x="592.5" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose_conf_change</text>
</g>
<!-- ready -->
<g id="node2" class="node">
<title>ready</title>
<path fill="none" stroke="#1c2123" d="M607.5,-52C607.5,-52 577.5,-52 577.5,-52 571.5,-52 565.5,-46 565.5,-40 565.5,-40 565.5,-28 565.5,-28 565.5,-22 571.5,-16 577.5,-16 577.5,-16 607.5,-16 607.5,-16 613.5,-16 619.5,-22 619.5,-28 619.5,-28 619.5,-40 619.5,-40 619.5,-46 613.5,-52 607.5,-52"/>
<text text-anchor="middle" x="592.5" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ready</text>
</g>
<!-- handle_raft_committed_entries -->
<g id="node5" class="node">
<title>handle_raft_committed_entries</title>
<path fill="none" stroke="#1c2123" d="M871,-196C871,-196 708,-196 708,-196 702,-196 696,-190 696,-184 696,-184 696,-172 696,-172 696,-166 702,-160 708,-160 708,-160 871,-160 871,-160 877,-160 883,-166 883,-172 883,-172 883,-184 883,-184 883,-190 877,-196 871,-196"/>
<text text-anchor="middle" x="789.5" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_committed_entries</text>
</g>
<!-- ready&#45;&gt;handle_raft_committed_entries -->
<g id="edge3" class="edge">
<title>ready&#45;&gt;handle_raft_committed_entries</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M619.55,-40.49C634.45,-44.91 653.07,-51.66 668,-61 707.7,-85.85 745.02,-125.57 767.32,-151.72"/>
<polygon fill="green" stroke="green" points="764.9,-154.29 774.01,-159.7 770.26,-149.79 764.9,-154.29"/>
</g>
<!-- propose -->
<g id="node3" class="node">
<title>propose</title>
<path fill="none" stroke="#1c2123" d="M426,-250C426,-250 391,-250 391,-250 385,-250 379,-244 379,-238 379,-238 379,-226 379,-226 379,-220 385,-214 391,-214 391,-214 426,-214 426,-214 432,-214 438,-220 438,-226 438,-226 438,-238 438,-238 438,-244 432,-250 426,-250"/>
<text text-anchor="middle" x="408.5" y="-228.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose</text>
</g>
<!-- propose&#45;&gt;propose_conf_change -->
<g id="edge6" class="edge">
<title>propose&#45;&gt;propose_conf_change</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M438.37,-226.08C454.24,-221.91 473.73,-215.21 489,-205 525.1,-180.86 556.3,-140.88 574.5,-114.48"/>
<polygon fill="green" stroke="green" points="577.47,-116.34 580.17,-106.09 571.67,-112.42 577.47,-116.34"/>
</g>
<!-- handle_raft_ready_append -->
<g id="node4" class="node">
<title>handle_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M477,-196C477,-196 340,-196 340,-196 334,-196 328,-190 328,-184 328,-184 328,-172 328,-172 328,-166 334,-160 340,-160 340,-160 477,-160 477,-160 483,-160 489,-166 489,-172 489,-172 489,-184 489,-184 489,-190 483,-196 477,-196"/>
<text text-anchor="middle" x="408.5" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_ready_append</text>
</g>
<!-- handle_raft_ready_append&#45;&gt;ready -->
<g id="edge1" class="edge">
<title>handle_raft_ready_append&#45;&gt;ready</title>
<path fill="none" stroke="#666666" d="M421.98,-159.62C440.13,-134.15 476.14,-88.22 517,-61 528.56,-53.3 542.6,-47.47 555.36,-43.24"/>
<polygon fill="#666666" stroke="#666666" points="556.72,-46.48 565.24,-40.18 554.65,-39.79 556.72,-46.48"/>
</g>
<!-- handle_raft_ready_append&#45;&gt;handle_raft_committed_entries -->
<g id="edge2" class="edge">
<title>handle_raft_ready_append&#45;&gt;handle_raft_committed_entries</title>
<path fill="none" stroke="#666666" d="M489.41,-178C546.5,-178 623.81,-178 685.52,-178"/>
<polygon fill="#666666" stroke="#666666" points="685.68,-181.5 695.68,-178 685.68,-174.5 685.68,-181.5"/>
</g>
<!-- schedule_task_ApplyTask -->
<g id="node6" class="node">
<title>schedule_task_ApplyTask</title>
<path fill="none" stroke="#1c2123" d="M931,-160.5C931,-160.5 1090,-160.5 1090,-160.5 1096,-160.5 1102,-166.5 1102,-172.5 1102,-172.5 1102,-239.5 1102,-239.5 1102,-245.5 1096,-251.5 1090,-251.5 1090,-251.5 931,-251.5 931,-251.5 925,-251.5 919,-245.5 919,-239.5 919,-239.5 919,-172.5 919,-172.5 919,-166.5 925,-160.5 931,-160.5"/>
<text text-anchor="start" x="927" y="-236.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">让ApplyFsm处理comitted</text>
<text text-anchor="start" x="927" y="-221.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> log entries</text>
<polyline fill="none" stroke="#1c2123" points="919,-213.5 1102,-213.5 "/>
<text text-anchor="start" x="927" y="-198.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ctx.apply_router</text>
<text text-anchor="start" x="927" y="-183.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> .schedule_task(self.region_id,</text>
<text text-anchor="start" x="927" y="-168.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ApplyTask::aply(apply))</text>
</g>
<!-- handle_raft_committed_entries&#45;&gt;schedule_task_ApplyTask -->
<g id="edge4" class="edge">
<title>handle_raft_committed_entries&#45;&gt;schedule_task_ApplyTask</title>
<path fill="none" stroke="#666666" d="M883.06,-189.83C891.53,-190.92 900.15,-192.02 908.69,-193.11"/>
<polygon fill="#666666" stroke="#666666" points="908.31,-196.59 918.67,-194.39 909.2,-189.65 908.31,-196.59"/>
</g>
<!-- handle_msgs -->
<g id="node7" class="node">
<title>handle_msgs</title>
<path fill="none" stroke="#1c2123" d="M252.5,-250C252.5,-250 188.5,-250 188.5,-250 182.5,-250 176.5,-244 176.5,-238 176.5,-238 176.5,-226 176.5,-226 176.5,-220 182.5,-214 188.5,-214 188.5,-214 252.5,-214 252.5,-214 258.5,-214 264.5,-220 264.5,-226 264.5,-226 264.5,-238 264.5,-238 264.5,-244 258.5,-250 252.5,-250"/>
<text text-anchor="middle" x="220.5" y="-228.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_msgs</text>
</g>
<!-- handle_msgs&#45;&gt;propose -->
<g id="edge5" class="edge">
<title>handle_msgs&#45;&gt;propose</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M264.64,-232C296.03,-232 338.18,-232 368.55,-232"/>
<polygon fill="green" stroke="green" points="368.77,-235.5 378.77,-232 368.77,-228.5 368.77,-235.5"/>
</g>
<!-- collect_ready -->
<g id="node8" class="node">
<title>collect_ready</title>
<path fill="none" stroke="#1c2123" d="M253,-196C253,-196 188,-196 188,-196 182,-196 176,-190 176,-184 176,-184 176,-172 176,-172 176,-166 182,-160 188,-160 188,-160 253,-160 253,-160 259,-160 265,-166 265,-172 265,-172 265,-184 265,-184 265,-190 259,-196 253,-196"/>
<text text-anchor="middle" x="220.5" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">collect_ready</text>
</g>
<!-- collect_ready&#45;&gt;handle_raft_ready_append -->
<g id="edge7" class="edge">
<title>collect_ready&#45;&gt;handle_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M265.11,-178C280.87,-178 299.3,-178 317.58,-178"/>
<polygon fill="#666666" stroke="#666666" points="317.69,-181.5 327.69,-178 317.69,-174.5 317.69,-181.5"/>
</g>
<!-- handle_normal -->
<g id="node9" class="node">
<title>handle_normal</title>
<path fill="none" stroke="#1c2123" d="M102,-223C102,-223 28,-223 28,-223 22,-223 16,-217 16,-211 16,-211 16,-199 16,-199 16,-193 22,-187 28,-187 28,-187 102,-187 102,-187 108,-187 114,-193 114,-199 114,-199 114,-211 114,-211 114,-217 108,-223 102,-223"/>
<text text-anchor="middle" x="65" y="-201.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_normal</text>
</g>
<!-- handle_normal&#45;&gt;handle_msgs -->
<g id="edge8" class="edge">
<title>handle_normal&#45;&gt;handle_msgs</title>
<path fill="none" stroke="#666666" d="M114.15,-213.47C130.68,-216.38 149.27,-219.65 166.18,-222.62"/>
<polygon fill="#666666" stroke="#666666" points="166.01,-226.14 176.46,-224.43 167.22,-219.25 166.01,-226.14"/>
</g>
<!-- handle_normal&#45;&gt;collect_ready -->
<g id="edge9" class="edge">
<title>handle_normal&#45;&gt;collect_ready</title>
<path fill="none" stroke="#666666" d="M114.15,-196.53C130.53,-193.65 148.94,-190.41 165.74,-187.46"/>
<polygon fill="#666666" stroke="#666666" points="166.71,-190.84 175.95,-185.66 165.49,-183.95 166.71,-190.84"/>
</g>
</g>
</svg>
