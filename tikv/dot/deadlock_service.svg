<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: deadlock_service Pages: 1 -->
<svg width="1250pt" height="270pt"
 viewBox="0.00 0.00 1250.00 269.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 265.5)">
<title>deadlock_service</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-265.5 1246,-265.5 1246,4 -4,4"/>
<!-- deadlock_service -->
<g id="node1" class="node">
<title>deadlock_service</title>
<path fill="none" stroke="#1c2123" d="M193,-120C193,-120 333,-120 333,-120 339,-120 345,-126 345,-132 345,-132 345,-154 345,-154 345,-160 339,-166 333,-166 333,-166 193,-166 193,-166 187,-166 181,-160 181,-154 181,-154 181,-132 181,-132 181,-126 187,-120 193,-120"/>
<text text-anchor="middle" x="263" y="-150.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">deadlock_service</text>
<polyline fill="none" stroke="#1c2123" points="181,-143 345,-143 "/>
<text text-anchor="start" x="189" y="-127.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建deadlock grpc service</text>
</g>
<!-- DeadlockService_new -->
<g id="node2" class="node">
<title>DeadlockService_new</title>
<path fill="none" stroke="#1c2123" d="M507,-167C507,-167 393,-167 393,-167 387,-167 381,-161 381,-155 381,-155 381,-143 381,-143 381,-137 387,-131 393,-131 393,-131 507,-131 507,-131 513,-131 519,-137 519,-143 519,-143 519,-155 519,-155 519,-161 513,-167 507,-167"/>
<text text-anchor="middle" x="450" y="-145.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">DeadlockService_new</text>
</g>
<!-- deadlock_service&#45;&gt;DeadlockService_new -->
<g id="edge1" class="edge">
<title>deadlock_service&#45;&gt;DeadlockService_new</title>
<path fill="none" stroke="#666666" d="M345.14,-145.63C353.63,-145.91 362.25,-146.19 370.71,-146.46"/>
<polygon fill="#666666" stroke="#666666" points="370.82,-149.97 380.92,-146.79 371.04,-142.97 370.82,-149.97"/>
</g>
<!-- DetectorScheduler -->
<g id="node3" class="node">
<title>DetectorScheduler</title>
<path fill="none" stroke="#1c2123" d="M567,-159C567,-159 719,-159 719,-159 725,-159 731,-165 731,-171 731,-171 731,-193 731,-193 731,-199 725,-205 719,-205 719,-205 567,-205 567,-205 561,-205 555,-199 555,-193 555,-193 555,-171 555,-171 555,-165 561,-159 567,-159"/>
<text text-anchor="middle" x="643" y="-189.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">DetectorScheduler</text>
<polyline fill="none" stroke="#1c2123" points="555,-182 731,-182 "/>
<text text-anchor="start" x="563" y="-166.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">通过channel发送给Detector</text>
</g>
<!-- DeadlockService_new&#45;&gt;DetectorScheduler -->
<g id="edge2" class="edge">
<title>DeadlockService_new&#45;&gt;DetectorScheduler</title>
<path fill="none" stroke="#666666" d="M519.15,-160.77C527.46,-162.21 536.08,-163.7 544.72,-165.19"/>
<polygon fill="#666666" stroke="#666666" points="544.4,-168.69 554.85,-166.94 545.59,-161.79 544.4,-168.69"/>
</g>
<!-- Detector_run -->
<g id="node4" class="node">
<title>Detector_run</title>
<path fill="none" stroke="#1c2123" d="M779,-151.5C779,-151.5 878,-151.5 878,-151.5 884,-151.5 890,-157.5 890,-163.5 890,-163.5 890,-200.5 890,-200.5 890,-206.5 884,-212.5 878,-212.5 878,-212.5 779,-212.5 779,-212.5 773,-212.5 767,-206.5 767,-200.5 767,-200.5 767,-163.5 767,-163.5 767,-157.5 773,-151.5 779,-151.5"/>
<text text-anchor="middle" x="828.5" y="-197.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Detector::run</text>
<polyline fill="none" stroke="#1c2123" points="767,-189.5 890,-189.5 "/>
<text text-anchor="start" x="775" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">从channel中取task</text>
<text text-anchor="start" x="775" y="-159.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 执行task</text>
</g>
<!-- DetectorScheduler&#45;&gt;Detector_run -->
<g id="edge3" class="edge">
<title>DetectorScheduler&#45;&gt;Detector_run</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M731.18,-182C739.79,-182 748.46,-182 756.88,-182"/>
<polygon fill="green" stroke="green" points="757,-185.5 767,-182 757,-178.5 757,-185.5"/>
</g>
<!-- handle_detect_rpc -->
<g id="node10" class="node">
<title>handle_detect_rpc</title>
<path fill="none" stroke="#1c2123" d="M938,-159C938,-159 1072,-159 1072,-159 1078,-159 1084,-165 1084,-171 1084,-171 1084,-193 1084,-193 1084,-199 1078,-205 1072,-205 1072,-205 938,-205 938,-205 932,-205 926,-199 926,-193 926,-193 926,-171 926,-171 926,-165 932,-159 938,-159"/>
<text text-anchor="start" x="934" y="-189.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_detect_rpc</text>
<polyline fill="none" stroke="#1c2123" points="926,-182 1084,-182 "/>
<text text-anchor="start" x="934" y="-166.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理deadlock detect请求</text>
</g>
<!-- Detector_run&#45;&gt;handle_detect_rpc -->
<g id="edge9" class="edge">
<title>Detector_run&#45;&gt;handle_detect_rpc</title>
<path fill="none" stroke="#666666" d="M890.04,-182C898.32,-182 906.95,-182 915.6,-182"/>
<polygon fill="#666666" stroke="#666666" points="915.74,-185.5 925.74,-182 915.74,-178.5 915.74,-185.5"/>
</g>
<!-- Server_register_service -->
<g id="node5" class="node">
<title>Server_register_service</title>
<path fill="none" stroke="#1c2123" d="M12,-47.5C12,-47.5 133,-47.5 133,-47.5 139,-47.5 145,-53.5 145,-59.5 145,-59.5 145,-96.5 145,-96.5 145,-102.5 139,-108.5 133,-108.5 133,-108.5 12,-108.5 12,-108.5 6,-108.5 0,-102.5 0,-96.5 0,-96.5 0,-59.5 0,-59.5 0,-53.5 6,-47.5 12,-47.5"/>
<text text-anchor="middle" x="72.5" y="-93.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Server::register_service</text>
<polyline fill="none" stroke="#1c2123" points="0,-85.5 145,-85.5 "/>
<text text-anchor="start" x="8" y="-70.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">注册创建Deadlock</text>
<text text-anchor="start" x="8" y="-55.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Grpc Service</text>
</g>
<!-- Server_register_service&#45;&gt;deadlock_service -->
<g id="edge4" class="edge">
<title>Server_register_service&#45;&gt;deadlock_service</title>
<path fill="none" stroke="#666666" d="M145.03,-102.67C158.27,-107.23 172.15,-112.02 185.53,-116.63"/>
<polygon fill="#666666" stroke="#666666" points="184.58,-120.01 195.17,-119.96 186.86,-113.39 184.58,-120.01"/>
</g>
<!-- grpc_register_services -->
<g id="node6" class="node">
<title>grpc_register_services</title>
<path fill="none" stroke="#1c2123" d="M205.5,-55C205.5,-55 320.5,-55 320.5,-55 326.5,-55 332.5,-61 332.5,-67 332.5,-67 332.5,-89 332.5,-89 332.5,-95 326.5,-101 320.5,-101 320.5,-101 205.5,-101 205.5,-101 199.5,-101 193.5,-95 193.5,-89 193.5,-89 193.5,-67 193.5,-67 193.5,-61 199.5,-55 205.5,-55"/>
<text text-anchor="middle" x="263" y="-85.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">grpc::register_services</text>
<polyline fill="none" stroke="#1c2123" points="193.5,-78 332.5,-78 "/>
<text text-anchor="start" x="201.5" y="-62.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">注册grpc service</text>
</g>
<!-- Server_register_service&#45;&gt;grpc_register_services -->
<g id="edge5" class="edge">
<title>Server_register_service&#45;&gt;grpc_register_services</title>
<path fill="none" stroke="#666666" d="M145.03,-78C157.52,-78 170.58,-78 183.26,-78"/>
<polygon fill="#666666" stroke="#666666" points="183.32,-81.5 193.32,-78 183.32,-74.5 183.32,-81.5"/>
</g>
<!-- create_deadlock -->
<g id="node9" class="node">
<title>create_deadlock</title>
<path fill="none" stroke="#1c2123" d="M303,-36C303,-36 223,-36 223,-36 217,-36 211,-30 211,-24 211,-24 211,-12 211,-12 211,-6 217,0 223,0 223,0 303,0 303,0 309,0 315,-6 315,-12 315,-12 315,-24 315,-24 315,-30 309,-36 303,-36"/>
<text text-anchor="middle" x="263" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">create_deadlock</text>
</g>
<!-- Server_register_service&#45;&gt;create_deadlock -->
<g id="edge6" class="edge">
<title>Server_register_service&#45;&gt;create_deadlock</title>
<path fill="none" stroke="#666666" d="M145.03,-55.23C163.49,-49.36 183.18,-43.09 201.04,-37.4"/>
<polygon fill="#666666" stroke="#666666" points="202.28,-40.68 210.75,-34.31 200.16,-34.01 202.28,-40.68"/>
</g>
<!-- DeadlockService_detect -->
<g id="node7" class="node">
<title>DeadlockService_detect</title>
<path fill="none" stroke="#1c2123" d="M195,-185C195,-185 331,-185 331,-185 337,-185 343,-191 343,-197 343,-197 343,-249 343,-249 343,-255 337,-261 331,-261 331,-261 195,-261 195,-261 189,-261 183,-255 183,-249 183,-249 183,-197 183,-197 183,-191 189,-185 195,-185"/>
<text text-anchor="middle" x="263" y="-245.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">DeadlockService::detect</text>
<polyline fill="none" stroke="#1c2123" points="183,-238 343,-238 "/>
<text text-anchor="start" x="191" y="-222.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">service detect接口</text>
<text text-anchor="start" x="191" y="-207.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将Task发送到channel中</text>
<text text-anchor="start" x="191" y="-192.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 由Detector::run来处理</text>
</g>
<!-- Task_DetectRpc -->
<g id="node8" class="node">
<title>Task_DetectRpc</title>
<path fill="#feed9b" stroke="#f7e495" d="M393,-188.5C393,-188.5 507,-188.5 507,-188.5 513,-188.5 519,-194.5 519,-200.5 519,-200.5 519,-237.5 519,-237.5 519,-243.5 513,-249.5 507,-249.5 507,-249.5 393,-249.5 393,-249.5 387,-249.5 381,-243.5 381,-237.5 381,-237.5 381,-200.5 381,-200.5 381,-194.5 387,-188.5 393,-188.5"/>
<text text-anchor="middle" x="450" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Task::DetectRpc</text>
<polyline fill="none" stroke="#f7e495" points="381,-226.5 519,-226.5 "/>
<text text-anchor="start" x="389" y="-211.3" font-family="Times,serif" font-size="14.00" fill="#40575d">包含了grpc stream的</text>
<text text-anchor="start" x="389" y="-196.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> stream和sink</text>
</g>
<!-- DeadlockService_detect&#45;&gt;Task_DetectRpc -->
<g id="edge7" class="edge">
<title>DeadlockService_detect&#45;&gt;Task_DetectRpc</title>
<path fill="none" stroke="#666666" d="M343.26,-221.29C352.38,-221.09 361.68,-220.89 370.78,-220.69"/>
<polygon fill="#666666" stroke="#666666" points="371.04,-224.19 380.97,-220.47 370.89,-217.19 371.04,-224.19"/>
</g>
<!-- Task_DetectRpc&#45;&gt;DetectorScheduler -->
<g id="edge8" class="edge">
<title>Task_DetectRpc&#45;&gt;DetectorScheduler</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M519.15,-205.8C527.55,-204.17 536.27,-202.48 545,-200.79"/>
<polygon fill="green" stroke="green" points="545.7,-204.22 554.85,-198.88 544.37,-197.35 545.7,-204.22"/>
</g>
<!-- DetectTable_detect -->
<g id="node11" class="node">
<title>DetectTable_detect</title>
<path fill="none" stroke="#1c2123" d="M1132,-192C1132,-192 1230,-192 1230,-192 1236,-192 1242,-198 1242,-204 1242,-204 1242,-216 1242,-216 1242,-222 1236,-228 1230,-228 1230,-228 1132,-228 1132,-228 1126,-228 1120,-222 1120,-216 1120,-216 1120,-204 1120,-204 1120,-198 1126,-192 1132,-192"/>
<text text-anchor="middle" x="1181" y="-206.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">DetectTable::detect</text>
</g>
<!-- handle_detect_rpc&#45;&gt;DetectTable_detect -->
<g id="edge10" class="edge">
<title>handle_detect_rpc&#45;&gt;DetectTable_detect</title>
<path fill="none" stroke="#666666" d="M1084.09,-194.57C1092.73,-195.96 1101.48,-197.37 1110.01,-198.74"/>
<polygon fill="#666666" stroke="#666666" points="1109.47,-202.2 1119.9,-200.33 1110.58,-195.28 1109.47,-202.2"/>
</g>
<!-- spawn_local -->
<g id="node12" class="node">
<title>spawn_local</title>
<path fill="none" stroke="#1c2123" d="M1211,-173C1211,-173 1151,-173 1151,-173 1145,-173 1139,-167 1139,-161 1139,-161 1139,-149 1139,-149 1139,-143 1145,-137 1151,-137 1151,-137 1211,-137 1211,-137 1217,-137 1223,-143 1223,-149 1223,-149 1223,-161 1223,-161 1223,-167 1217,-173 1211,-173"/>
<text text-anchor="middle" x="1181" y="-151.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">spawn_local</text>
</g>
<!-- handle_detect_rpc&#45;&gt;spawn_local -->
<g id="edge11" class="edge">
<title>handle_detect_rpc&#45;&gt;spawn_local</title>
<path fill="none" stroke="#666666" d="M1084.09,-169.88C1099.21,-167.54 1114.7,-165.13 1128.69,-162.96"/>
<polygon fill="#666666" stroke="#666666" points="1129.25,-166.42 1138.59,-161.43 1128.17,-159.5 1129.25,-166.42"/>
</g>
</g>
</svg>
