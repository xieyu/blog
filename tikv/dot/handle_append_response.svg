<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: handle_append_response Pages: 1 -->
<svg width="2321pt" height="1041pt"
 viewBox="0.00 0.00 2321.00 1040.89" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1036.89)">
<title>handle_append_response</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1036.89 2317,-1036.89 2317,4 -4,4"/>
<g id="clust2" class="cluster">
<title>cluster_Progress</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M216,-708C216,-708 2094,-708 2094,-708 2100,-708 2106,-714 2106,-720 2106,-720 2106,-940 2106,-940 2106,-946 2100,-952 2094,-952 2094,-952 216,-952 216,-952 210,-952 204,-946 204,-940 204,-940 204,-720 204,-720 204,-714 210,-708 216,-708"/>
<text text-anchor="middle" x="1155" y="-932" font-family="Times,serif" font-size="20.00">Progress</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_RaftLog</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1082.5,-8C1082.5,-8 1836.5,-8 1836.5,-8 1842.5,-8 1848.5,-14 1848.5,-20 1848.5,-20 1848.5,-182 1848.5,-182 1848.5,-188 1842.5,-194 1836.5,-194 1836.5,-194 1082.5,-194 1082.5,-194 1076.5,-194 1070.5,-188 1070.5,-182 1070.5,-182 1070.5,-20 1070.5,-20 1070.5,-14 1076.5,-8 1082.5,-8"/>
<text text-anchor="middle" x="1459.5" y="-174" font-family="Times,serif" font-size="20.00">RaftLog</text>
</g>
<!-- ProgressTracker -->
<g id="node1" class="node">
<title>ProgressTracker</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1089,-354.5C1089,-354.5 1239,-354.5 1239,-354.5 1245,-354.5 1251,-360.5 1251,-366.5 1251,-366.5 1251,-503.5 1251,-503.5 1251,-509.5 1245,-515.5 1239,-515.5 1239,-515.5 1089,-515.5 1089,-515.5 1083,-515.5 1077,-509.5 1077,-503.5 1077,-503.5 1077,-366.5 1077,-366.5 1077,-360.5 1083,-354.5 1089,-354.5"/>
<text text-anchor="middle" x="1164" y="-500.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ProgressTracker</text>
<polyline fill="none" stroke="#60b5ac" points="1077,-492.5 1251,-492.5 "/>
<text text-anchor="start" x="1085" y="-477.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">progress: ProgressMap</text>
<polyline fill="none" stroke="#60b5ac" points="1077,-469.5 1251,-469.5 "/>
<text text-anchor="start" x="1085" y="-454.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">conf: Configuration</text>
<polyline fill="none" stroke="#60b5ac" points="1077,-446.5 1251,-446.5 "/>
<text text-anchor="start" x="1085" y="-431.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">votes: HashMap&lt;u64, bool&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="1077,-423.5 1251,-423.5 "/>
<text text-anchor="start" x="1085" y="-408.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">max_inflight: usize</text>
<polyline fill="none" stroke="#60b5ac" points="1077,-400.5 1251,-400.5 "/>
<text text-anchor="start" x="1085" y="-385.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">group_commit: bool</text>
<polyline fill="none" stroke="#60b5ac" points="1077,-377.5 1251,-377.5 "/>
<text text-anchor="start" x="1085" y="-362.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) logger: Logger</text>
</g>
<!-- Configuration -->
<g id="node3" class="node">
<title>Configuration</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1367.5,-358.5C1367.5,-358.5 1581.5,-358.5 1581.5,-358.5 1587.5,-358.5 1593.5,-364.5 1593.5,-370.5 1593.5,-370.5 1593.5,-461.5 1593.5,-461.5 1593.5,-467.5 1587.5,-473.5 1581.5,-473.5 1581.5,-473.5 1367.5,-473.5 1367.5,-473.5 1361.5,-473.5 1355.5,-467.5 1355.5,-461.5 1355.5,-461.5 1355.5,-370.5 1355.5,-370.5 1355.5,-364.5 1361.5,-358.5 1367.5,-358.5"/>
<text text-anchor="middle" x="1474.5" y="-458.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Configuration</text>
<polyline fill="none" stroke="#60b5ac" points="1355.5,-450.5 1593.5,-450.5 "/>
<text text-anchor="start" x="1363.5" y="-435.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) voters: JointConfig</text>
<polyline fill="none" stroke="#60b5ac" points="1355.5,-427.5 1593.5,-427.5 "/>
<text text-anchor="start" x="1363.5" y="-412.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) learners: HashSet&lt;u64&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="1355.5,-404.5 1593.5,-404.5 "/>
<text text-anchor="start" x="1363.5" y="-389.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) learners_next: HashSet&lt;u64&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="1355.5,-381.5 1593.5,-381.5 "/>
<text text-anchor="start" x="1363.5" y="-366.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) auto_leave: bool</text>
</g>
<!-- ProgressTracker&#45;&gt;Configuration -->
<g id="edge2" class="edge">
<title>ProgressTracker:conf&#45;&gt;Configuration</title>
<path fill="none" stroke="#666666" d="M1252,-458C1282.42,-458 1314.78,-454.13 1345.1,-448.74"/>
<polygon fill="#666666" stroke="#666666" points="1346.1,-452.11 1355.3,-446.86 1344.83,-445.23 1346.1,-452.11"/>
</g>
<!-- ProgressMap -->
<g id="node5" class="node">
<title>ProgressMap</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1337,-493C1337,-493 1612,-493 1612,-493 1618,-493 1624,-499 1624,-505 1624,-505 1624,-527 1624,-527 1624,-533 1618,-539 1612,-539 1612,-539 1337,-539 1337,-539 1331,-539 1325,-533 1325,-527 1325,-527 1325,-505 1325,-505 1325,-499 1331,-493 1337,-493"/>
<text text-anchor="middle" x="1474.5" y="-523.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ProgressMap</text>
<polyline fill="none" stroke="#60b5ac" points="1325,-516 1624,-516 "/>
<text text-anchor="middle" x="1474.5" y="-500.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub type ProgressMap = HashMap&lt;u64, Progress&gt;</text>
</g>
<!-- ProgressTracker&#45;&gt;ProgressMap -->
<g id="edge3" class="edge">
<title>ProgressTracker&#45;&gt;ProgressMap</title>
<path fill="none" stroke="#666666" d="M1251.03,-462.06C1274.89,-469.23 1300.87,-476.71 1325,-483 1334.88,-485.58 1345.16,-488.13 1355.49,-490.6"/>
<polygon fill="#666666" stroke="#666666" points="1354.87,-494.05 1365.41,-492.94 1356.48,-487.24 1354.87,-494.05"/>
</g>
<!-- ProgressState -->
<g id="node2" class="node">
<title>ProgressState</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M2020,-751C2020,-751 2086,-751 2086,-751 2092,-751 2098,-757 2098,-763 2098,-763 2098,-831 2098,-831 2098,-837 2092,-843 2086,-843 2086,-843 2020,-843 2020,-843 2014,-843 2008,-837 2008,-831 2008,-831 2008,-763 2008,-763 2008,-757 2014,-751 2020,-751"/>
<text text-anchor="middle" x="2053" y="-827.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ProgressState</text>
<polyline fill="none" stroke="#60b5ac" points="2008,-820 2098,-820 "/>
<text text-anchor="start" x="2016" y="-804.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Probe</text>
<polyline fill="none" stroke="#60b5ac" points="2008,-797 2098,-797 "/>
<text text-anchor="start" x="2016" y="-781.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Replicate</text>
<polyline fill="none" stroke="#60b5ac" points="2008,-774 2098,-774 "/>
<text text-anchor="start" x="2016" y="-758.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Snapshot</text>
</g>
<!-- JointConfig -->
<g id="node4" class="node">
<title>JointConfig</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1672,-356.5C1672,-356.5 1868,-356.5 1868,-356.5 1874,-356.5 1880,-362.5 1880,-368.5 1880,-368.5 1880,-413.5 1880,-413.5 1880,-419.5 1874,-425.5 1868,-425.5 1868,-425.5 1672,-425.5 1672,-425.5 1666,-425.5 1660,-419.5 1660,-413.5 1660,-413.5 1660,-368.5 1660,-368.5 1660,-362.5 1666,-356.5 1672,-356.5"/>
<text text-anchor="middle" x="1770" y="-410.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">JointConfig</text>
<polyline fill="none" stroke="#60b5ac" points="1660,-402.5 1880,-402.5 "/>
<text text-anchor="start" x="1668" y="-387.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) incoming: MajorityConfig</text>
<polyline fill="none" stroke="#60b5ac" points="1660,-379.5 1880,-379.5 "/>
<text text-anchor="start" x="1668" y="-364.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) outgoing: MajorityConfig</text>
</g>
<!-- Configuration&#45;&gt;JointConfig -->
<g id="edge1" class="edge">
<title>Configuration&#45;&gt;JointConfig</title>
<path fill="none" stroke="#666666" d="M1593.61,-405.94C1612.02,-404.37 1631.06,-402.75 1649.5,-401.18"/>
<polygon fill="#666666" stroke="#666666" points="1650.01,-404.65 1659.68,-400.31 1649.42,-397.67 1650.01,-404.65"/>
</g>
<!-- Progress -->
<g id="node6" class="node">
<title>Progress</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1700,-716.5C1700,-716.5 1840,-716.5 1840,-716.5 1846,-716.5 1852,-722.5 1852,-728.5 1852,-728.5 1852,-865.5 1852,-865.5 1852,-871.5 1846,-877.5 1840,-877.5 1840,-877.5 1700,-877.5 1700,-877.5 1694,-877.5 1688,-871.5 1688,-865.5 1688,-865.5 1688,-728.5 1688,-728.5 1688,-722.5 1694,-716.5 1700,-716.5"/>
<text text-anchor="middle" x="1770" y="-862.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Progress</text>
<polyline fill="none" stroke="#60b5ac" points="1688,-854.5 1852,-854.5 "/>
<text text-anchor="start" x="1696" y="-839.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub matched: u64</text>
<polyline fill="none" stroke="#60b5ac" points="1688,-831.5 1852,-831.5 "/>
<text text-anchor="start" x="1696" y="-816.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub next_idx: u64</text>
<polyline fill="none" stroke="#60b5ac" points="1688,-808.5 1852,-808.5 "/>
<text text-anchor="start" x="1696" y="-793.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub state: ProgressState</text>
<polyline fill="none" stroke="#60b5ac" points="1688,-785.5 1852,-785.5 "/>
<text text-anchor="start" x="1696" y="-770.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub committed_index: u64</text>
<polyline fill="none" stroke="#60b5ac" points="1688,-762.5 1852,-762.5 "/>
<text text-anchor="start" x="1696" y="-747.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub ins: Inflights</text>
<polyline fill="none" stroke="#60b5ac" points="1688,-739.5 1852,-739.5 "/>
<text text-anchor="start" x="1696" y="-724.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">...</text>
</g>
<!-- ProgressMap&#45;&gt;Progress -->
<g id="edge4" class="edge">
<title>ProgressMap&#45;&gt;Progress</title>
<path fill="none" stroke="#666666" d="M1598.64,-539.08C1607.64,-543.26 1616.22,-548.19 1624,-554 1675.51,-592.49 1712.26,-655.14 1735.87,-707.19"/>
<polygon fill="#666666" stroke="#666666" points="1732.72,-708.73 1739.98,-716.44 1739.11,-705.89 1732.72,-708.73"/>
</g>
<!-- acked_index -->
<g id="node30" class="node">
<title>acked_index</title>
<path fill="none" stroke="#1c2123" d="M1703,-472C1703,-472 1837,-472 1837,-472 1843,-472 1849,-478 1849,-484 1849,-484 1849,-506 1849,-506 1849,-512 1843,-518 1837,-518 1837,-518 1703,-518 1703,-518 1697,-518 1691,-512 1691,-506 1691,-506 1691,-484 1691,-484 1691,-478 1697,-472 1703,-472"/>
<text text-anchor="middle" x="1770" y="-502.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">acked_index</text>
<polyline fill="none" stroke="#1c2123" points="1691,-495 1849,-495 "/>
<text text-anchor="middle" x="1770" y="-479.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">获取vote_id对应的index</text>
</g>
<!-- ProgressMap&#45;&gt;acked_index -->
<g id="edge43" class="edge">
<title>ProgressMap&#45;&gt;acked_index</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1624.4,-505.35C1643.62,-503.97 1662.78,-502.6 1680.58,-501.33"/>
<polygon fill="green" stroke="green" points="1681.17,-504.79 1690.89,-500.59 1680.67,-497.81 1681.17,-504.79"/>
</g>
<!-- Progress&#45;&gt;ProgressState -->
<g id="edge5" class="edge">
<title>Progress&#45;&gt;ProgressState</title>
<path fill="none" stroke="#666666" d="M1852.28,-797C1899.05,-797 1956.54,-797 1997.81,-797"/>
<polygon fill="#666666" stroke="#666666" points="1997.93,-800.5 2007.93,-797 1997.93,-793.5 1997.93,-800.5"/>
</g>
<!-- old_paused -->
<g id="node24" class="node">
<title>old_paused</title>
<path fill="none" stroke="#1c2123" d="M2080,-996C2080,-996 2026,-996 2026,-996 2020,-996 2014,-990 2014,-984 2014,-984 2014,-972 2014,-972 2014,-966 2020,-960 2026,-960 2026,-960 2080,-960 2080,-960 2086,-960 2092,-966 2092,-972 2092,-972 2092,-984 2092,-984 2092,-990 2086,-996 2080,-996"/>
<text text-anchor="middle" x="2053" y="-974.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">old_paused</text>
</g>
<!-- Progress&#45;&gt;old_paused -->
<g id="edge31" class="edge">
<title>Progress&#45;&gt;old_paused</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1826.48,-877.8C1850.61,-906.95 1881.33,-937.25 1916,-956 1942.77,-970.48 1976.53,-976 2003.71,-977.89"/>
<polygon fill="green" stroke="green" points="2003.6,-981.39 2013.78,-978.45 2003.99,-974.4 2003.6,-981.39"/>
</g>
<!-- prs_get_mut -->
<g id="node7" class="node">
<title>prs_get_mut</title>
<path fill="none" stroke="#1c2123" d="M769.5,-404.5C769.5,-404.5 949.5,-404.5 949.5,-404.5 955.5,-404.5 961.5,-410.5 961.5,-416.5 961.5,-416.5 961.5,-453.5 961.5,-453.5 961.5,-459.5 955.5,-465.5 949.5,-465.5 949.5,-465.5 769.5,-465.5 769.5,-465.5 763.5,-465.5 757.5,-459.5 757.5,-453.5 757.5,-453.5 757.5,-416.5 757.5,-416.5 757.5,-410.5 763.5,-404.5 769.5,-404.5"/>
<text text-anchor="start" x="765.5" y="-450.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ProgressTracker.get_mut(m.form)</text>
<polyline fill="none" stroke="#1c2123" points="757.5,-442.5 961.5,-442.5 "/>
<text text-anchor="start" x="765.5" y="-427.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">找到发送消息peer</text>
<text text-anchor="start" x="765.5" y="-412.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 对应的Progress</text>
</g>
<!-- prs_get_mut&#45;&gt;ProgressTracker -->
<g id="edge6" class="edge">
<title>prs_get_mut&#45;&gt;ProgressTracker</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M961.65,-435C995.43,-435 1032.96,-435 1066.38,-435"/>
<polygon fill="green" stroke="green" points="1066.62,-438.5 1076.62,-435 1066.62,-431.5 1066.62,-438.5"/>
</g>
<!-- prs_get_mut&#45;&gt;Progress -->
<g id="edge7" class="edge">
<title>prs_get_mut&#45;&gt;Progress</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M961.73,-458.7C976.24,-464.41 990.48,-471.42 1003,-480 1024.12,-494.48 1017.2,-511.56 1039,-525 1135.68,-584.61 1180.15,-545.57 1289,-578 1442.06,-623.6 1480.92,-637.05 1624,-708 1642.19,-717.02 1661.07,-727.62 1678.96,-738.29"/>
<polygon fill="green" stroke="green" points="1677.28,-741.36 1687.65,-743.53 1680.89,-735.37 1677.28,-741.36"/>
</g>
<!-- pr_update_committed -->
<g id="node8" class="node">
<title>pr_update_committed</title>
<path fill="none" stroke="#1c2123" d="M475,-717C475,-717 668,-717 668,-717 674,-717 680,-723 680,-729 680,-729 680,-781 680,-781 680,-787 674,-793 668,-793 668,-793 475,-793 475,-793 469,-793 463,-787 463,-781 463,-781 463,-729 463,-729 463,-723 469,-717 475,-717"/>
<text text-anchor="start" x="471" y="-777.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Progress.update_committed</text>
<text text-anchor="start" x="471" y="-762.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> (&amp;mut self, committed_index: u64)</text>
<polyline fill="none" stroke="#1c2123" points="463,-755 680,-755 "/>
<text text-anchor="start" x="471" y="-739.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">update followers committed</text>
<text text-anchor="start" x="471" y="-724.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> index via append response</text>
</g>
<!-- pr_update_committed&#45;&gt;Progress -->
<g id="edge8" class="edge">
<title>pr_update_committed&#45;&gt;Progress:committed_index</title>
<path fill="none" stroke="#666666" d="M680.03,-773.4C774.32,-788.55 915.29,-808.82 1039,-817 1298.46,-834.17 1372.77,-875.07 1624,-808 1651.14,-800.76 1654.66,-779.8 1677.01,-774.99"/>
<polygon fill="#666666" stroke="#666666" points="1677.4,-778.47 1687,-774 1676.7,-771.51 1677.4,-778.47"/>
</g>
<!-- pr_maybe_update -->
<g id="node9" class="node">
<title>pr_maybe_update</title>
<path fill="none" stroke="#1c2123" d="M1051,-716.5C1051,-716.5 1277,-716.5 1277,-716.5 1283,-716.5 1289,-722.5 1289,-728.5 1289,-728.5 1289,-795.5 1289,-795.5 1289,-801.5 1283,-807.5 1277,-807.5 1277,-807.5 1051,-807.5 1051,-807.5 1045,-807.5 1039,-801.5 1039,-795.5 1039,-795.5 1039,-728.5 1039,-728.5 1039,-722.5 1045,-716.5 1051,-716.5"/>
<text text-anchor="start" x="1047" y="-792.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Progress.maybe_update(&amp;mut self, n:u64)</text>
<polyline fill="none" stroke="#1c2123" points="1039,-784.5 1289,-784.5 "/>
<text text-anchor="start" x="1047" y="-769.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">return false if the given n index comes</text>
<text text-anchor="start" x="1047" y="-754.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> from an outdated message</text>
<text text-anchor="start" x="1047" y="-739.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Otherwise it updates the </text>
<text text-anchor="start" x="1047" y="-724.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> progress and return true</text>
</g>
<!-- pr_maybe_update&#45;&gt;Progress -->
<g id="edge9" class="edge">
<title>pr_maybe_update&#45;&gt;Progress:next_idx</title>
<path fill="none" stroke="#666666" d="M1289.02,-783.6C1391.94,-799.68 1542.65,-819.03 1676.95,-819.96"/>
<polygon fill="#666666" stroke="#666666" points="1676.99,-823.46 1687,-820 1677.01,-816.46 1676.99,-823.46"/>
</g>
<!-- pr_maybe_decr_to -->
<g id="node10" class="node">
<title>pr_maybe_decr_to</title>
<path fill="none" stroke="#1c2123" d="M244.5,-852.5C244.5,-852.5 370.5,-852.5 370.5,-852.5 376.5,-852.5 382.5,-858.5 382.5,-864.5 382.5,-864.5 382.5,-901.5 382.5,-901.5 382.5,-907.5 376.5,-913.5 370.5,-913.5 370.5,-913.5 244.5,-913.5 244.5,-913.5 238.5,-913.5 232.5,-907.5 232.5,-901.5 232.5,-901.5 232.5,-864.5 232.5,-864.5 232.5,-858.5 238.5,-852.5 244.5,-852.5"/>
<text text-anchor="start" x="240.5" y="-898.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_decr_to</text>
<polyline fill="none" stroke="#1c2123" points="232.5,-890.5 382.5,-890.5 "/>
<text text-anchor="start" x="240.5" y="-875.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">收到消息m.rejct为true</text>
<text text-anchor="start" x="240.5" y="-860.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 需要调整发送的index</text>
</g>
<!-- pr_become_probe -->
<g id="node11" class="node">
<title>pr_become_probe</title>
<path fill="none" stroke="#1c2123" d="M535,-812C535,-812 608,-812 608,-812 614,-812 620,-818 620,-824 620,-824 620,-836 620,-836 620,-842 614,-848 608,-848 608,-848 535,-848 535,-848 529,-848 523,-842 523,-836 523,-836 523,-824 523,-824 523,-818 529,-812 535,-812"/>
<text text-anchor="start" x="531" y="-826.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">become_probe</text>
</g>
<!-- pr_maybe_decr_to&#45;&gt;pr_become_probe -->
<g id="edge11" class="edge">
<title>pr_maybe_decr_to&#45;&gt;pr_become_probe</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M382.53,-868.02C423.78,-859.68 474.4,-849.44 512.71,-841.69"/>
<polygon fill="green" stroke="green" points="513.57,-845.09 522.67,-839.67 512.18,-838.23 513.57,-845.09"/>
</g>
<!-- pr_maybe_snapshot_abort -->
<g id="node12" class="node">
<title>pr_maybe_snapshot_abort</title>
<path fill="none" stroke="#1c2123" d="M224,-772.5C224,-772.5 391,-772.5 391,-772.5 397,-772.5 403,-778.5 403,-784.5 403,-784.5 403,-821.5 403,-821.5 403,-827.5 397,-833.5 391,-833.5 391,-833.5 224,-833.5 224,-833.5 218,-833.5 212,-827.5 212,-821.5 212,-821.5 212,-784.5 212,-784.5 212,-778.5 218,-772.5 224,-772.5"/>
<text text-anchor="middle" x="307.5" y="-818.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_snapshot_abort</text>
<polyline fill="none" stroke="#1c2123" points="212,-810.5 403,-810.5 "/>
<text text-anchor="start" x="220" y="-795.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果peer当前状态为SnapShot</text>
<text text-anchor="middle" x="307.5" y="-780.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 且maybe_snapshot_abort</text>
</g>
<!-- pr_maybe_snapshot_abort&#45;&gt;pr_become_probe -->
<g id="edge10" class="edge">
<title>pr_maybe_snapshot_abort&#45;&gt;pr_become_probe</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M403.09,-812.75C439.72,-816.52 480.49,-820.72 512.62,-824.04"/>
<polygon fill="green" stroke="green" points="512.42,-827.53 522.73,-825.08 513.14,-820.57 512.42,-827.53"/>
</g>
<!-- pr_become_replicate -->
<g id="node13" class="node">
<title>pr_become_replicate</title>
<path fill="none" stroke="#1c2123" d="M263,-717C263,-717 352,-717 352,-717 358,-717 364,-723 364,-729 364,-729 364,-741 364,-741 364,-747 358,-753 352,-753 352,-753 263,-753 263,-753 257,-753 251,-747 251,-741 251,-741 251,-729 251,-729 251,-723 257,-717 263,-717"/>
<text text-anchor="middle" x="307.5" y="-731.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">become_replicate</text>
</g>
<!-- update_committed_leader -->
<g id="node14" class="node">
<title>update_committed_leader</title>
<path fill="none" stroke="#1c2123" d="M1395.5,-717C1395.5,-717 1553.5,-717 1553.5,-717 1559.5,-717 1565.5,-723 1565.5,-729 1565.5,-729 1565.5,-751 1565.5,-751 1565.5,-757 1559.5,-763 1553.5,-763 1553.5,-763 1395.5,-763 1395.5,-763 1389.5,-763 1383.5,-757 1383.5,-751 1383.5,-751 1383.5,-729 1383.5,-729 1383.5,-723 1389.5,-717 1395.5,-717"/>
<text text-anchor="middle" x="1474.5" y="-747.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">update_committed</text>
<polyline fill="none" stroke="#1c2123" points="1383.5,-740 1565.5,-740 "/>
<text text-anchor="start" x="1391.5" y="-724.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">更新leader的commited index</text>
</g>
<!-- update_committed_leader&#45;&gt;Progress -->
<g id="edge12" class="edge">
<title>update_committed_leader&#45;&gt;Progress:committed_index</title>
<path fill="none" stroke="#666666" d="M1565.56,-760.95C1599.71,-767.35 1639.33,-772.95 1676.57,-773.87"/>
<polygon fill="#666666" stroke="#666666" points="1676.96,-777.37 1687,-774 1677.04,-770.37 1676.96,-777.37"/>
</g>
<!-- handle_append_response -->
<g id="node15" class="node">
<title>handle_append_response</title>
<path fill="none" stroke="#1c2123" d="M140,-649C140,-649 12,-649 12,-649 6,-649 0,-643 0,-637 0,-637 0,-625 0,-625 0,-619 6,-613 12,-613 12,-613 140,-613 140,-613 146,-613 152,-619 152,-625 152,-625 152,-637 152,-637 152,-643 146,-649 140,-649"/>
<text text-anchor="middle" x="76" y="-627.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_append_response</text>
</g>
<!-- handle_append_response&#45;&gt;prs_get_mut -->
<g id="edge13" class="edge">
<title>handle_append_response&#45;&gt;prs_get_mut</title>
<path fill="none" stroke="#b83b5e" d="M90.09,-612.96C108.8,-588.7 145.65,-546.26 188,-526 369.82,-439.01 609.12,-427.75 747.17,-429.78"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="747.28,-433.28 757.34,-429.96 747.4,-426.28 747.28,-433.28"/>
</g>
<!-- handle_append_response&#45;&gt;pr_update_committed -->
<g id="edge14" class="edge">
<title>handle_append_response&#45;&gt;pr_update_committed</title>
<path fill="none" stroke="#b83b5e" d="M152.24,-631.82C224.4,-634.55 335.56,-643.89 427,-674 454.35,-683 482.37,-697.45 506.31,-711.66"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="504.57,-714.7 514.94,-716.88 508.19,-708.71 504.57,-714.7"/>
</g>
<!-- handle_append_response&#45;&gt;pr_maybe_update -->
<g id="edge15" class="edge">
<title>handle_append_response&#45;&gt;pr_maybe_update</title>
<path fill="none" stroke="#b83b5e" d="M152.27,-626.45C223.27,-623.13 332.59,-620.54 427,-629 485.83,-634.27 832.87,-699.24 1028.68,-736.38"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="1028.28,-739.87 1038.76,-738.3 1029.59,-732.99 1028.28,-739.87"/>
</g>
<!-- handle_append_response&#45;&gt;pr_maybe_decr_to -->
<g id="edge16" class="edge">
<title>handle_append_response&#45;&gt;pr_maybe_decr_to</title>
<path fill="none" stroke="#b83b5e" d="M81.54,-649.25C92.61,-689.99 124.83,-789.03 188,-843 198.13,-851.65 210.21,-858.46 222.73,-863.8"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="221.77,-867.19 232.36,-867.61 224.34,-860.68 221.77,-867.19"/>
</g>
<!-- handle_append_response&#45;&gt;pr_become_probe -->
<g id="edge17" class="edge">
<title>handle_append_response&#45;&gt;pr_become_probe</title>
<path fill="none" stroke="#b83b5e" d="M127.4,-649.04C146.24,-655.33 167.94,-662.05 188,-667 292.64,-692.8 343.83,-639.46 427,-708 461.85,-736.71 429.27,-772.98 463,-803 476.64,-815.14 494.93,-821.99 512.56,-825.8"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="512.35,-829.32 522.82,-827.71 513.63,-822.44 512.35,-829.32"/>
</g>
<!-- handle_append_response&#45;&gt;pr_maybe_snapshot_abort -->
<g id="edge18" class="edge">
<title>handle_append_response&#45;&gt;pr_maybe_snapshot_abort</title>
<path fill="none" stroke="#b83b5e" d="M87.6,-649.08C105.05,-677.35 142.48,-731.96 188,-763 192.6,-766.14 197.46,-769.04 202.49,-771.74"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="201.2,-775.01 211.71,-776.36 204.34,-768.75 201.2,-775.01"/>
</g>
<!-- handle_append_response&#45;&gt;pr_become_replicate -->
<g id="edge19" class="edge">
<title>handle_append_response&#45;&gt;pr_become_replicate</title>
<path fill="none" stroke="#b83b5e" d="M100.93,-649.3C122.64,-665.15 156.05,-687.72 188,-702 204.54,-709.39 223.14,-715.51 240.61,-720.39"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="240.17,-723.89 250.74,-723.11 241.99,-717.14 240.17,-723.89"/>
</g>
<!-- maybe_commit -->
<g id="node16" class="node">
<title>maybe_commit</title>
<path fill="none" stroke="#1c2123" d="M200,-352.5C200,-352.5 415,-352.5 415,-352.5 421,-352.5 427,-358.5 427,-364.5 427,-364.5 427,-431.5 427,-431.5 427,-437.5 421,-443.5 415,-443.5 415,-443.5 200,-443.5 200,-443.5 194,-443.5 188,-437.5 188,-431.5 188,-431.5 188,-364.5 188,-364.5 188,-358.5 194,-352.5 200,-352.5"/>
<text text-anchor="middle" x="307.5" y="-428.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_commit</text>
<polyline fill="none" stroke="#1c2123" points="188,-420.5 427,-420.5 "/>
<text text-anchor="start" x="196" y="-405.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Attempts to advance the commit index</text>
<text text-anchor="start" x="196" y="-390.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> return true if the commit index changed</text>
<text text-anchor="start" x="196" y="-375.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> in which case the caller should call</text>
<text text-anchor="start" x="196" y="-360.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> r.bcast_append</text>
</g>
<!-- handle_append_response&#45;&gt;maybe_commit -->
<g id="edge20" class="edge">
<title>handle_append_response&#45;&gt;maybe_commit</title>
<path fill="none" stroke="#b83b5e" d="M87.62,-612.76C105.67,-582.78 144.6,-522.18 188,-480 198.96,-469.34 211.45,-459.1 224.1,-449.69"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="226.4,-452.34 232.42,-443.62 222.28,-446.68 226.4,-452.34"/>
</g>
<!-- should_bcast_commit -->
<g id="node17" class="node">
<title>should_bcast_commit</title>
<path fill="none" stroke="#1c2123" d="M628,-558C628,-558 515,-558 515,-558 509,-558 503,-552 503,-546 503,-546 503,-534 503,-534 503,-528 509,-522 515,-522 515,-522 628,-522 628,-522 634,-522 640,-528 640,-534 640,-534 640,-546 640,-546 640,-552 634,-558 628,-558"/>
<text text-anchor="middle" x="571.5" y="-536.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">should_bcast_commit</text>
</g>
<!-- handle_append_response&#45;&gt;should_bcast_commit -->
<g id="edge21" class="edge">
<title>handle_append_response&#45;&gt;should_bcast_commit</title>
<path fill="none" stroke="#b83b5e" d="M97.82,-612.93C118.94,-595.81 153.37,-571.12 188,-560 289.49,-527.42 413.86,-527.8 492.66,-532.64"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="492.78,-536.15 502.99,-533.31 493.24,-529.17 492.78,-536.15"/>
</g>
<!-- bcast_append -->
<g id="node18" class="node">
<title>bcast_append</title>
<path fill="none" stroke="#1c2123" d="M892.5,-666C892.5,-666 826.5,-666 826.5,-666 820.5,-666 814.5,-660 814.5,-654 814.5,-654 814.5,-642 814.5,-642 814.5,-636 820.5,-630 826.5,-630 826.5,-630 892.5,-630 892.5,-630 898.5,-630 904.5,-636 904.5,-642 904.5,-642 904.5,-654 904.5,-654 904.5,-660 898.5,-666 892.5,-666"/>
<text text-anchor="middle" x="859.5" y="-644.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">bcast_append</text>
</g>
<!-- handle_append_response&#45;&gt;bcast_append -->
<g id="edge22" class="edge">
<title>handle_append_response&#45;&gt;bcast_append</title>
<path fill="none" stroke="#b83b5e" d="M126.59,-612.92C145.54,-606.91 167.51,-600.98 188,-598 293.12,-582.71 320.95,-591.88 427,-598 563.28,-605.87 722.57,-627.61 804.19,-639.67"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="803.83,-643.15 814.23,-641.16 804.86,-636.23 803.83,-643.15"/>
</g>
<!-- send_append -->
<g id="node19" class="node">
<title>send_append</title>
<path fill="none" stroke="#1c2123" d="M2301,-996C2301,-996 2238,-996 2238,-996 2232,-996 2226,-990 2226,-984 2226,-984 2226,-972 2226,-972 2226,-966 2232,-960 2238,-960 2238,-960 2301,-960 2301,-960 2307,-960 2313,-966 2313,-972 2313,-972 2313,-984 2313,-984 2313,-990 2307,-996 2301,-996"/>
<text text-anchor="middle" x="2269.5" y="-974.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_append</text>
</g>
<!-- handle_append_response&#45;&gt;send_append -->
<g id="edge23" class="edge">
<title>handle_append_response&#45;&gt;send_append</title>
<path fill="none" stroke="#b83b5e" d="M77.21,-649.21C78.89,-704.83 92.04,-873.72 188,-956 319.08,-1068.39 397.83,-1024 570.5,-1024 570.5,-1024 570.5,-1024 1771,-1024 1957.41,-1024 2006.88,-1039.89 2190,-1005 2198.64,-1003.35 2207.62,-1000.96 2216.29,-998.26"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="2217.5,-1001.55 2225.91,-995.12 2215.32,-994.9 2217.5,-1001.55"/>
</g>
<!-- maybe_send_append -->
<g id="node20" class="node">
<title>maybe_send_append</title>
<path fill="none" stroke="#1c2123" d="M221,-242.5C221,-242.5 394,-242.5 394,-242.5 400,-242.5 406,-248.5 406,-254.5 406,-254.5 406,-321.5 406,-321.5 406,-327.5 400,-333.5 394,-333.5 394,-333.5 221,-333.5 221,-333.5 215,-333.5 209,-327.5 209,-321.5 209,-321.5 209,-254.5 209,-254.5 209,-248.5 215,-242.5 221,-242.5"/>
<text text-anchor="middle" x="307.5" y="-318.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_send_append</text>
<polyline fill="none" stroke="#1c2123" points="209,-310.5 406,-310.5 "/>
<text text-anchor="start" x="217" y="-295.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">We&#39;ve updated flow control </text>
<text text-anchor="start" x="217" y="-280.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> information above, which may</text>
<text text-anchor="start" x="217" y="-265.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> allow us to send multiple </text>
<text text-anchor="start" x="217" y="-250.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> (size&#45;limited) in&#45;flight messages</text>
</g>
<!-- handle_append_response&#45;&gt;maybe_send_append -->
<g id="edge24" class="edge">
<title>handle_append_response&#45;&gt;maybe_send_append</title>
<path fill="none" stroke="#b83b5e" d="M79.26,-612.65C86.29,-562.98 112.04,-424.2 188,-343 191.83,-338.91 196.01,-335.1 200.46,-331.55"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="202.77,-334.2 208.72,-325.44 198.6,-328.57 202.77,-334.2"/>
</g>
<!-- maybe_commit&#45;&gt;update_committed_leader -->
<g id="edge27" class="edge">
<title>maybe_commit&#45;&gt;update_committed_leader</title>
<path fill="none" stroke="#666666" d="M427.22,-422.22C508.35,-438.33 618.43,-459.33 716,-475 843.04,-495.4 893.2,-445.92 1003,-513 1026.99,-527.66 1015.69,-549.3 1039,-565 1133.44,-628.62 1191.06,-562.92 1289,-621 1309.86,-633.37 1305.95,-647 1325,-662 1350.49,-682.07 1381.92,-699.44 1409.29,-712.67"/>
<polygon fill="#666666" stroke="#666666" points="1407.87,-715.86 1418.4,-716.99 1410.87,-709.54 1407.87,-715.86"/>
</g>
<!-- maybe_commit&#45;&gt;should_bcast_commit -->
<g id="edge25" class="edge">
<title>maybe_commit&#45;&gt;should_bcast_commit</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M392.48,-443.52C437.74,-468.04 491.63,-497.25 528.17,-517.06"/>
<polygon fill="green" stroke="green" points="526.61,-520.19 537.07,-521.88 529.95,-514.04 526.61,-520.19"/>
</g>
<!-- maybe_commit&#45;&gt;send_append -->
<g id="edge32" class="edge">
<title>maybe_commit&#45;&gt;send_append</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M413.77,-352.39C418.35,-349.4 422.79,-346.27 427,-343 446.96,-327.51 441.78,-312.72 463,-299 614.15,-201.3 678.52,-212 858.5,-212 858.5,-212 858.5,-212 1771,-212 1957.8,-212 2056.07,-114.78 2190,-245 2241.49,-295.06 2263.04,-820.84 2267.56,-949.64"/>
<polygon fill="green" stroke="green" points="2264.07,-949.99 2267.92,-959.87 2271.07,-949.75 2264.07,-949.99"/>
</g>
<!-- mut_prs -->
<g id="node21" class="node">
<title>mut_prs</title>
<path fill="none" stroke="#1c2123" d="M497.5,-345.5C497.5,-345.5 645.5,-345.5 645.5,-345.5 651.5,-345.5 657.5,-351.5 657.5,-357.5 657.5,-357.5 657.5,-394.5 657.5,-394.5 657.5,-400.5 651.5,-406.5 645.5,-406.5 645.5,-406.5 497.5,-406.5 497.5,-406.5 491.5,-406.5 485.5,-400.5 485.5,-394.5 485.5,-394.5 485.5,-357.5 485.5,-357.5 485.5,-351.5 491.5,-345.5 497.5,-345.5"/>
<text text-anchor="middle" x="571.5" y="-391.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">mut_prs</text>
<polyline fill="none" stroke="#1c2123" points="485.5,-383.5 657.5,-383.5 "/>
<text text-anchor="start" x="493.5" y="-368.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">获取prs: ProgressTracker的</text>
<text text-anchor="start" x="493.5" y="-353.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 可变引用</text>
</g>
<!-- maybe_commit&#45;&gt;mut_prs -->
<g id="edge28" class="edge">
<title>maybe_commit&#45;&gt;mut_prs</title>
<path fill="none" stroke="#666666" d="M427.23,-388.03C443.34,-386.68 459.69,-385.3 475.31,-383.99"/>
<polygon fill="#666666" stroke="#666666" points="475.79,-387.47 485.46,-383.14 475.2,-380.49 475.79,-387.47"/>
</g>
<!-- maximal_committed_index -->
<g id="node22" class="node">
<title>maximal_committed_index</title>
<path fill="none" stroke="#1c2123" d="M728,-241C728,-241 991,-241 991,-241 997,-241 1003,-247 1003,-253 1003,-253 1003,-335 1003,-335 1003,-341 997,-347 991,-347 991,-347 728,-347 728,-347 722,-347 716,-341 716,-335 716,-335 716,-253 716,-253 716,-247 722,-241 728,-241"/>
<text text-anchor="middle" x="859.5" y="-331.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">maximal_committed_index</text>
<polyline fill="none" stroke="#1c2123" points="716,-324 1003,-324 "/>
<text text-anchor="start" x="724" y="-308.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Return the maximal committed</text>
<text text-anchor="start" x="724" y="-293.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> index for the cluster</text>
<text text-anchor="start" x="724" y="-278.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> the bool flag indicates</text>
<text text-anchor="start" x="724" y="-263.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> whether the index is computed by group commit</text>
<text text-anchor="start" x="724" y="-248.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> algorithm successfully</text>
</g>
<!-- maybe_commit&#45;&gt;maximal_committed_index -->
<g id="edge29" class="edge">
<title>maybe_commit&#45;&gt;maximal_committed_index</title>
<path fill="none" stroke="#666666" d="M410.66,-352.44C427.87,-346.1 445.75,-340.29 463,-336 541.72,-316.43 631.47,-305.97 705.56,-300.39"/>
<polygon fill="#666666" stroke="#666666" points="706.19,-303.85 715.91,-299.63 705.68,-296.87 706.19,-303.85"/>
</g>
<!-- raft_log_maybe_commit -->
<g id="node23" class="node">
<title>raft_log_maybe_commit</title>
<path fill="none" stroke="#1c2123" d="M1090.5,-94.5C1090.5,-94.5 1237.5,-94.5 1237.5,-94.5 1243.5,-94.5 1249.5,-100.5 1249.5,-106.5 1249.5,-106.5 1249.5,-143.5 1249.5,-143.5 1249.5,-149.5 1243.5,-155.5 1237.5,-155.5 1237.5,-155.5 1090.5,-155.5 1090.5,-155.5 1084.5,-155.5 1078.5,-149.5 1078.5,-143.5 1078.5,-143.5 1078.5,-106.5 1078.5,-106.5 1078.5,-100.5 1084.5,-94.5 1090.5,-94.5"/>
<text text-anchor="middle" x="1164" y="-140.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_commit</text>
<polyline fill="none" stroke="#1c2123" points="1078.5,-132.5 1249.5,-132.5 "/>
<text text-anchor="start" x="1086.5" y="-117.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Sets the last committed</text>
<text text-anchor="start" x="1086.5" y="-102.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> value to the passed in value</text>
</g>
<!-- maybe_commit&#45;&gt;raft_log_maybe_commit -->
<g id="edge30" class="edge">
<title>maybe_commit&#45;&gt;raft_log_maybe_commit</title>
<path fill="none" stroke="#666666" d="M418.09,-352.41C421.27,-349.46 424.26,-346.32 427,-343 469.26,-291.78 412.89,-241.57 463,-198 632.68,-50.47 920.12,-77.32 1068.35,-104.08"/>
<polygon fill="#666666" stroke="#666666" points="1067.87,-107.55 1078.34,-105.92 1069.14,-100.67 1067.87,-107.55"/>
</g>
<!-- should_bcast_commit&#45;&gt;bcast_append -->
<g id="edge26" class="edge">
<title>should_bcast_commit&#45;&gt;bcast_append</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M640.1,-552.86C654.07,-557.45 668.14,-563.65 680,-572 702.1,-587.55 693.14,-606.59 716,-621 742.18,-637.5 776.07,-644.38 804.23,-647.07"/>
<polygon fill="green" stroke="green" points="804.07,-650.57 814.32,-647.88 804.64,-643.59 804.07,-650.57"/>
</g>
<!-- skip_bcast_commit -->
<g id="node27" class="node">
<title>skip_bcast_commit</title>
<path fill="none" stroke="#1c2123" d="M909,-558C909,-558 810,-558 810,-558 804,-558 798,-552 798,-546 798,-546 798,-534 798,-534 798,-528 804,-522 810,-522 810,-522 909,-522 909,-522 915,-522 921,-528 921,-534 921,-534 921,-546 921,-546 921,-552 915,-558 909,-558"/>
<text text-anchor="middle" x="859.5" y="-536.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">skip_bcast_commit</text>
</g>
<!-- should_bcast_commit&#45;&gt;skip_bcast_commit -->
<g id="edge38" class="edge">
<title>should_bcast_commit&#45;&gt;skip_bcast_commit</title>
<path fill="none" stroke="#666666" d="M640.28,-540C684.57,-540 742.31,-540 787.28,-540"/>
<polygon fill="#666666" stroke="#666666" points="787.54,-543.5 797.54,-540 787.54,-536.5 787.54,-543.5"/>
</g>
<!-- has_pending_conf -->
<g id="node28" class="node">
<title>has_pending_conf</title>
<path fill="none" stroke="#1c2123" d="M905.5,-612C905.5,-612 813.5,-612 813.5,-612 807.5,-612 801.5,-606 801.5,-600 801.5,-600 801.5,-588 801.5,-588 801.5,-582 807.5,-576 813.5,-576 813.5,-576 905.5,-576 905.5,-576 911.5,-576 917.5,-582 917.5,-588 917.5,-588 917.5,-600 917.5,-600 917.5,-606 911.5,-612 905.5,-612"/>
<text text-anchor="middle" x="859.5" y="-590.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">has_pending_conf</text>
</g>
<!-- should_bcast_commit&#45;&gt;has_pending_conf -->
<g id="edge39" class="edge">
<title>should_bcast_commit&#45;&gt;has_pending_conf</title>
<path fill="none" stroke="#666666" d="M640.28,-552.8C685.89,-561.41 745.77,-572.72 791.27,-581.31"/>
<polygon fill="#666666" stroke="#666666" points="790.85,-584.79 801.33,-583.21 792.15,-577.91 790.85,-584.79"/>
</g>
<!-- bcast_append&#45;&gt;ProgressTracker -->
<g id="edge40" class="edge">
<title>bcast_append&#45;&gt;ProgressTracker</title>
<path fill="none" stroke="#666666" d="M904.56,-647.13C934.14,-644.82 973.02,-638.32 1003,-621 1043.98,-597.33 1079.52,-559.17 1106.63,-523.56"/>
<polygon fill="#666666" stroke="#666666" points="1109.45,-525.64 1112.64,-515.53 1103.84,-521.45 1109.45,-525.64"/>
</g>
<!-- msgs -->
<g id="node29" class="node">
<title>msgs</title>
<path fill="none" stroke="#1c2123" d="M1179,-666C1179,-666 1149,-666 1149,-666 1143,-666 1137,-660 1137,-654 1137,-654 1137,-642 1137,-642 1137,-636 1143,-630 1149,-630 1149,-630 1179,-630 1179,-630 1185,-630 1191,-636 1191,-642 1191,-642 1191,-654 1191,-654 1191,-660 1185,-666 1179,-666"/>
<text text-anchor="middle" x="1164" y="-644.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">msgs</text>
</g>
<!-- bcast_append&#45;&gt;msgs -->
<g id="edge41" class="edge">
<title>bcast_append&#45;&gt;msgs</title>
<path fill="none" stroke="#666666" d="M904.81,-648C964.94,-648 1071.22,-648 1126.82,-648"/>
<polygon fill="#666666" stroke="#666666" points="1126.91,-651.5 1136.91,-648 1126.91,-644.5 1126.91,-651.5"/>
</g>
<!-- mut_prs&#45;&gt;ProgressTracker -->
<g id="edge34" class="edge">
<title>mut_prs&#45;&gt;ProgressTracker</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M657.52,-374.74C744.7,-374.62 883.99,-377.68 1003,-395 1023.91,-398.04 1046.07,-402.66 1067.01,-407.68"/>
<polygon fill="green" stroke="green" points="1066.31,-411.12 1076.86,-410.1 1067.98,-404.32 1066.31,-411.12"/>
</g>
<!-- mut_prs&#45;&gt;maximal_committed_index -->
<g id="edge35" class="edge">
<title>mut_prs&#45;&gt;maximal_committed_index</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M657.54,-351.62C672.95,-347.2 689.45,-342.47 706.12,-337.69"/>
<polygon fill="green" stroke="green" points="707.3,-340.99 715.95,-334.87 705.37,-334.26 707.3,-340.99"/>
</g>
<!-- maximal_committed_index&#45;&gt;raft_log_maybe_commit -->
<g id="edge45" class="edge">
<title>maximal_committed_index&#45;&gt;raft_log_maybe_commit</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M955.38,-240.99C1002.2,-214.84 1057.42,-183.99 1099.13,-160.68"/>
<polygon fill="green" stroke="green" points="1101.07,-163.61 1108.09,-155.68 1097.65,-157.5 1101.07,-163.61"/>
</g>
<!-- conf_voters_committed_index -->
<g id="node25" class="node">
<title>conf_voters_committed_index</title>
<path fill="none" stroke="#1c2123" d="M1353,-240.5C1353,-240.5 1596,-240.5 1596,-240.5 1602,-240.5 1608,-246.5 1608,-252.5 1608,-252.5 1608,-327.5 1608,-327.5 1608,-333.5 1602,-339.5 1596,-339.5 1596,-339.5 1353,-339.5 1353,-339.5 1347,-339.5 1341,-333.5 1341,-327.5 1341,-327.5 1341,-252.5 1341,-252.5 1341,-246.5 1347,-240.5 1353,-240.5"/>
<text text-anchor="middle" x="1474.5" y="-324.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">conf.voters.committed_index</text>
<polyline fill="none" stroke="#1c2123" points="1341,-316.5 1608,-316.5 "/>
<text text-anchor="start" x="1349" y="-301.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Returns the largest committed index</text>
<text text-anchor="start" x="1349" y="-286.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> for the given joint quorum</text>
<polyline fill="none" stroke="#1c2123" points="1341,-278.5 1608,-278.5 "/>
<text text-anchor="start" x="1349" y="-263.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">An index is jointly committed if </text>
<text text-anchor="start" x="1349" y="-248.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> it is committed in both constituent majorities</text>
</g>
<!-- maximal_committed_index&#45;&gt;conf_voters_committed_index -->
<g id="edge36" class="edge">
<title>maximal_committed_index&#45;&gt;conf_voters_committed_index</title>
<path fill="none" stroke="#666666" d="M1003.06,-293.07C1101.64,-292.43 1232.28,-291.57 1330.87,-290.93"/>
<polygon fill="#666666" stroke="#666666" points="1330.94,-294.43 1340.91,-290.87 1330.89,-287.43 1330.94,-294.43"/>
</g>
<!-- raft_log_maybe_commit&#45;&gt;update_committed_leader -->
<g id="edge46" class="edge">
<title>raft_log_maybe_commit&#45;&gt;update_committed_leader</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1186.86,-155.8C1214.96,-196.92 1263.2,-272.97 1289,-345 1320.05,-431.67 1287.65,-464.85 1325,-549 1353.4,-612.98 1407.75,-674.6 1442.23,-709.82"/>
<polygon fill="green" stroke="green" points="1439.75,-712.28 1449.27,-716.93 1444.72,-707.36 1439.75,-712.28"/>
</g>
<!-- commit_to -->
<g id="node31" class="node">
<title>commit_to</title>
<path fill="none" stroke="#1c2123" d="M1501,-117C1501,-117 1448,-117 1448,-117 1442,-117 1436,-111 1436,-105 1436,-105 1436,-93 1436,-93 1436,-87 1442,-81 1448,-81 1448,-81 1501,-81 1501,-81 1507,-81 1513,-87 1513,-93 1513,-93 1513,-105 1513,-105 1513,-111 1507,-117 1501,-117"/>
<text text-anchor="middle" x="1474.5" y="-95.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">commit_to</text>
</g>
<!-- raft_log_maybe_commit&#45;&gt;commit_to -->
<g id="edge47" class="edge">
<title>raft_log_maybe_commit&#45;&gt;commit_to</title>
<path fill="none" stroke="#666666" d="M1249.71,-117.86C1306.26,-113.1 1378.58,-107 1425.46,-103.05"/>
<polygon fill="#666666" stroke="#666666" points="1425.97,-106.52 1435.64,-102.19 1425.38,-99.54 1425.97,-106.52"/>
</g>
<!-- old_paused&#45;&gt;send_append -->
<g id="edge33" class="edge">
<title>old_paused&#45;&gt;send_append</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M2092.35,-978C2126.6,-978 2177.12,-978 2215.29,-978"/>
<polygon fill="green" stroke="green" points="2215.7,-981.5 2225.7,-978 2215.7,-974.5 2215.7,-981.5"/>
</g>
<!-- conf_voters_committed_index&#45;&gt;JointConfig -->
<g id="edge42" class="edge">
<title>conf_voters_committed_index&#45;&gt;JointConfig</title>
<path fill="none" stroke="#666666" d="M1608.08,-335.62C1625.1,-341.48 1642.37,-347.42 1658.97,-353.14"/>
<polygon fill="#666666" stroke="#666666" points="1658.07,-356.53 1668.67,-356.47 1660.35,-349.91 1658.07,-356.53"/>
</g>
<!-- committed_index -->
<g id="node26" class="node">
<title>committed_index</title>
<path fill="none" stroke="#1c2123" d="M1928,-254.5C1928,-254.5 2178,-254.5 2178,-254.5 2184,-254.5 2190,-260.5 2190,-266.5 2190,-266.5 2190,-341.5 2190,-341.5 2190,-347.5 2184,-353.5 2178,-353.5 2178,-353.5 1928,-353.5 1928,-353.5 1922,-353.5 1916,-347.5 1916,-341.5 1916,-341.5 1916,-266.5 1916,-266.5 1916,-260.5 1922,-254.5 1928,-254.5"/>
<text text-anchor="middle" x="2053" y="-338.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">committed_index</text>
<polyline fill="none" stroke="#1c2123" points="1916,-330.5 2190,-330.5 "/>
<text text-anchor="start" x="1924" y="-315.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Computes the committed index </text>
<text text-anchor="start" x="1924" y="-300.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> from those supplied via the</text>
<text text-anchor="start" x="1924" y="-285.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> provided AckedIndexer (for the active config).</text>
<polyline fill="none" stroke="#1c2123" points="1916,-277.5 2190,-277.5 "/>
<text text-anchor="start" x="1924" y="-262.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用了Progress.machted来统计</text>
</g>
<!-- conf_voters_committed_index&#45;&gt;committed_index -->
<g id="edge37" class="edge">
<title>conf_voters_committed_index&#45;&gt;committed_index</title>
<path fill="none" stroke="#666666" d="M1608.12,-293.22C1696.97,-295.38 1813.99,-298.22 1905.58,-300.44"/>
<polygon fill="#666666" stroke="#666666" points="1905.68,-303.95 1915.77,-300.69 1905.85,-296.95 1905.68,-303.95"/>
</g>
<!-- acked_index&#45;&gt;committed_index -->
<g id="edge44" class="edge">
<title>acked_index&#45;&gt;committed_index</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1816.42,-471.93C1836.33,-461.33 1859.72,-448.2 1880,-435 1915.23,-412.07 1952.55,-384.13 1983.4,-359.95"/>
<polygon fill="green" stroke="green" points="1985.81,-362.5 1991.5,-353.57 1981.48,-357 1985.81,-362.5"/>
</g>
<!-- RaftLog -->
<g id="node32" class="node">
<title>RaftLog</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1711.5,-17C1711.5,-17 1828.5,-17 1828.5,-17 1834.5,-17 1840.5,-23 1840.5,-29 1840.5,-29 1840.5,-143 1840.5,-143 1840.5,-149 1834.5,-155 1828.5,-155 1828.5,-155 1711.5,-155 1711.5,-155 1705.5,-155 1699.5,-149 1699.5,-143 1699.5,-143 1699.5,-29 1699.5,-29 1699.5,-23 1705.5,-17 1711.5,-17"/>
<text text-anchor="middle" x="1770" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftLog</text>
<polyline fill="none" stroke="#60b5ac" points="1699.5,-132 1840.5,-132 "/>
<text text-anchor="start" x="1707.5" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub store: T</text>
<polyline fill="none" stroke="#60b5ac" points="1699.5,-109 1840.5,-109 "/>
<text text-anchor="start" x="1707.5" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub unstable: Unstable</text>
<polyline fill="none" stroke="#60b5ac" points="1699.5,-86 1840.5,-86 "/>
<text text-anchor="start" x="1707.5" y="-70.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub committed: u64</text>
<polyline fill="none" stroke="#60b5ac" points="1699.5,-63 1840.5,-63 "/>
<text text-anchor="start" x="1707.5" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub persisted: u64</text>
<polyline fill="none" stroke="#60b5ac" points="1699.5,-40 1840.5,-40 "/>
<text text-anchor="start" x="1707.5" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub applied: u64</text>
</g>
<!-- commit_to&#45;&gt;RaftLog -->
<g id="edge48" class="edge">
<title>commit_to&#45;&gt;RaftLog:committed</title>
<path fill="none" stroke="#666666" d="M1513.15,-92.17C1555.04,-85.14 1625.12,-75.08 1687.98,-74.08"/>
<polygon fill="#666666" stroke="#666666" points="1688.03,-77.58 1698,-74 1687.97,-70.58 1688.03,-77.58"/>
</g>
</g>
</svg>
