<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: exec_change_peer Pages: 1 -->
<svg width="1661pt" height="264pt"
 viewBox="0.00 0.00 1661.00 264.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 260)">
<title>exec_change_peer</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-260 1657,-260 1657,4 -4,4"/>
<g id="clust2" class="cluster">
<title>cluster_ApplyDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-8C20,-8 1633,-8 1633,-8 1639,-8 1645,-14 1645,-20 1645,-20 1645,-236 1645,-236 1645,-242 1639,-248 1633,-248 1633,-248 20,-248 20,-248 14,-248 8,-242 8,-236 8,-236 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="826.5" y="-228" font-family="Times,serif" font-size="20.00">ApplyDelegate</text>
</g>
<!-- exec_admin_cmd -->
<g id="node1" class="node">
<title>exec_admin_cmd</title>
<path fill="none" stroke="#1c2123" d="M901,-210C901,-210 812,-210 812,-210 806,-210 800,-204 800,-198 800,-198 800,-186 800,-186 800,-180 806,-174 812,-174 812,-174 901,-174 901,-174 907,-174 913,-180 913,-186 913,-186 913,-198 913,-198 913,-204 907,-210 901,-210"/>
<text text-anchor="middle" x="856.5" y="-188.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">exec_admin_cmd</text>
</g>
<!-- exec_change_peer -->
<g id="node2" class="node">
<title>exec_change_peer</title>
<path fill="none" stroke="#1c2123" d="M1063.5,-156C1063.5,-156 971.5,-156 971.5,-156 965.5,-156 959.5,-150 959.5,-144 959.5,-144 959.5,-132 959.5,-132 959.5,-126 965.5,-120 971.5,-120 971.5,-120 1063.5,-120 1063.5,-120 1069.5,-120 1075.5,-126 1075.5,-132 1075.5,-132 1075.5,-144 1075.5,-144 1075.5,-150 1069.5,-156 1063.5,-156"/>
<text text-anchor="middle" x="1017.5" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">exec_change_peer</text>
</g>
<!-- exec_admin_cmd&#45;&gt;exec_change_peer -->
<g id="edge1" class="edge">
<title>exec_admin_cmd&#45;&gt;exec_change_peer</title>
<path fill="none" stroke="#666666" d="M910.89,-173.87C924.59,-169.21 939.47,-164.16 953.61,-159.36"/>
<polygon fill="#666666" stroke="#666666" points="954.91,-162.61 963.25,-156.08 952.66,-155.99 954.91,-162.61"/>
</g>
<!-- exec_change_peer_v2 -->
<g id="node3" class="node">
<title>exec_change_peer_v2</title>
<path fill="none" stroke="#1c2123" d="M1074,-210C1074,-210 961,-210 961,-210 955,-210 949,-204 949,-198 949,-198 949,-186 949,-186 949,-180 955,-174 961,-174 961,-174 1074,-174 1074,-174 1080,-174 1086,-180 1086,-186 1086,-186 1086,-198 1086,-198 1086,-204 1080,-210 1074,-210"/>
<text text-anchor="middle" x="1017.5" y="-188.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">exec_change_peer_v2</text>
</g>
<!-- exec_admin_cmd&#45;&gt;exec_change_peer_v2 -->
<g id="edge2" class="edge">
<title>exec_admin_cmd&#45;&gt;exec_change_peer_v2</title>
<path fill="none" stroke="#666666" d="M913.11,-192C921.41,-192 930.1,-192 938.76,-192"/>
<polygon fill="#666666" stroke="#666666" points="938.89,-195.5 948.89,-192 938.89,-188.5 938.89,-195.5"/>
</g>
<!-- write_peer_state -->
<g id="node4" class="node">
<title>write_peer_state</title>
<path fill="none" stroke="#1c2123" d="M1420.5,-210C1420.5,-210 1338.5,-210 1338.5,-210 1332.5,-210 1326.5,-204 1326.5,-198 1326.5,-198 1326.5,-186 1326.5,-186 1326.5,-180 1332.5,-174 1338.5,-174 1338.5,-174 1420.5,-174 1420.5,-174 1426.5,-174 1432.5,-180 1432.5,-186 1432.5,-186 1432.5,-198 1432.5,-198 1432.5,-204 1426.5,-210 1420.5,-210"/>
<text text-anchor="middle" x="1379.5" y="-188.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_peer_state</text>
</g>
<!-- exec_change_peer&#45;&gt;write_peer_state -->
<g id="edge3" class="edge">
<title>exec_change_peer&#45;&gt;write_peer_state</title>
<path fill="none" stroke="#666666" d="M1075.64,-154.54C1090.63,-158.43 1106.84,-162.24 1122,-165 1187.67,-176.95 1263.83,-184.14 1316,-188.06"/>
<polygon fill="#666666" stroke="#666666" points="1315.87,-191.56 1326.1,-188.8 1316.38,-184.58 1315.87,-191.56"/>
</g>
<!-- Region -->
<g id="node6" class="node">
<title>Region</title>
<path fill="#feed9b" stroke="#f7e495" d="M1134,-17C1134,-17 1625,-17 1625,-17 1631,-17 1637,-23 1637,-29 1637,-29 1637,-143 1637,-143 1637,-149 1631,-155 1625,-155 1625,-155 1134,-155 1134,-155 1128,-155 1122,-149 1122,-143 1122,-143 1122,-29 1122,-29 1122,-23 1128,-17 1134,-17"/>
<text text-anchor="middle" x="1379.5" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#40575d">Region</text>
<polyline fill="none" stroke="#f7e495" points="1122,-132 1637,-132 "/>
<text text-anchor="start" x="1130" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub start_key: ::std::vec::Vec&lt;u8&gt;,</text>
<polyline fill="none" stroke="#f7e495" points="1122,-109 1637,-109 "/>
<text text-anchor="start" x="1130" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub end_key: ::std::vec::Vec&lt;u8&gt;,</text>
<polyline fill="none" stroke="#f7e495" points="1122,-86 1637,-86 "/>
<text text-anchor="start" x="1130" y="-70.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub region_epoch: ::protobuf::SingularPtrField&lt;RegionEpoch&gt;,</text>
<polyline fill="none" stroke="#f7e495" points="1122,-63 1637,-63 "/>
<text text-anchor="start" x="1130" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub peers: ::protobuf::RepeatedField&lt;Peer&gt;,</text>
<polyline fill="none" stroke="#f7e495" points="1122,-40 1637,-40 "/>
<text text-anchor="start" x="1130" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub encryption_meta: ::protobuf::SingularPtrField&lt;super::encryptionpb::EncryptionMeta&gt;,</text>
</g>
<!-- exec_change_peer&#45;&gt;Region -->
<g id="edge6" class="edge">
<title>exec_change_peer&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M1075.54,-129.76C1086.52,-128.17 1098.67,-126.42 1111.61,-124.55"/>
<polygon fill="#666666" stroke="#666666" points="1112.25,-127.99 1121.65,-123.1 1111.25,-121.07 1112.25,-127.99"/>
</g>
<!-- exec_change_peer_v2&#45;&gt;write_peer_state -->
<g id="edge5" class="edge">
<title>exec_change_peer_v2&#45;&gt;write_peer_state</title>
<path fill="none" stroke="#666666" d="M1086.21,-192C1152.2,-192 1251.7,-192 1315.89,-192"/>
<polygon fill="#666666" stroke="#666666" points="1316.27,-195.5 1326.27,-192 1316.27,-188.5 1316.27,-195.5"/>
</g>
<!-- exec_change_peer_v2&#45;&gt;Region -->
<g id="edge7" class="edge">
<title>exec_change_peer_v2&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M1079.98,-173.9C1096.11,-169.15 1114.54,-163.72 1134.13,-157.95"/>
<polygon fill="#666666" stroke="#666666" points="1135.24,-161.28 1143.84,-155.09 1133.26,-154.56 1135.24,-161.28"/>
</g>
<!-- ExecResult_ChangePeer -->
<g id="node5" class="node">
<title>ExecResult_ChangePeer</title>
<path fill="#feed9b" stroke="#f7e495" d="M401,-17C401,-17 618,-17 618,-17 624,-17 630,-23 630,-29 630,-29 630,-143 630,-143 630,-149 624,-155 618,-155 618,-155 401,-155 401,-155 395,-155 389,-149 389,-143 389,-143 389,-29 389,-29 389,-23 395,-17 401,-17"/>
<text text-anchor="middle" x="509.5" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#40575d">ExecResult::ChangePeer</text>
<polyline fill="none" stroke="#f7e495" points="389,-132 630,-132 "/>
<text text-anchor="start" x="397" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#40575d">要发给peerFsmDelegate的消息</text>
<polyline fill="none" stroke="#f7e495" points="389,-109 630,-109 "/>
<text text-anchor="start" x="397" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub index: u64,</text>
<polyline fill="none" stroke="#f7e495" points="389,-86 630,-86 "/>
<text text-anchor="start" x="397" y="-70.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub conf_change: ConfChangeV2,</text>
<polyline fill="none" stroke="#f7e495" points="389,-63 630,-63 "/>
<text text-anchor="start" x="397" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub changes: Vec&lt;ChangePeerRequest&gt;,</text>
<polyline fill="none" stroke="#f7e495" points="389,-40 630,-40 "/>
<text text-anchor="start" x="397" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub region: Region,</text>
</g>
<!-- ExecResult_ChangePeer&#45;&gt;Region -->
<g id="edge4" class="edge">
<title>ExecResult_ChangePeer&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M630.28,-86C753.96,-86 951.01,-86 1111.85,-86"/>
<polygon fill="#666666" stroke="#666666" points="1111.9,-89.5 1121.9,-86 1111.9,-82.5 1111.9,-89.5"/>
</g>
<!-- handle_raft_entry_conf_change -->
<g id="node7" class="node">
<title>handle_raft_entry_conf_change</title>
<path fill="none" stroke="#1c2123" d="M28,-90.5C28,-90.5 192,-90.5 192,-90.5 198,-90.5 204,-96.5 204,-102.5 204,-102.5 204,-139.5 204,-139.5 204,-145.5 198,-151.5 192,-151.5 192,-151.5 28,-151.5 28,-151.5 22,-151.5 16,-145.5 16,-139.5 16,-139.5 16,-102.5 16,-102.5 16,-96.5 22,-90.5 28,-90.5"/>
<text text-anchor="middle" x="110" y="-136.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_entry_conf_change</text>
<polyline fill="none" stroke="#1c2123" points="16,-128.5 204,-128.5 "/>
<text text-anchor="start" x="24" y="-113.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将log entry的conf_change</text>
<text text-anchor="start" x="24" y="-98.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 最后再加在ExecResult上</text>
</g>
<!-- handle_raft_entry_conf_change&#45;&gt;ExecResult_ChangePeer -->
<g id="edge8" class="edge">
<title>handle_raft_entry_conf_change&#45;&gt;ExecResult_ChangePeer</title>
<path fill="none" stroke="#666666" d="M204.2,-112.79C256.15,-108.22 321.66,-102.45 378.58,-97.44"/>
<polygon fill="#666666" stroke="#666666" points="379.08,-100.91 388.73,-96.55 378.46,-93.94 379.08,-100.91"/>
</g>
<!-- process_raft_cmd -->
<g id="node8" class="node">
<title>process_raft_cmd</title>
<path fill="none" stroke="#1c2123" d="M341,-192C341,-192 252,-192 252,-192 246,-192 240,-186 240,-180 240,-180 240,-168 240,-168 240,-162 246,-156 252,-156 252,-156 341,-156 341,-156 347,-156 353,-162 353,-168 353,-168 353,-180 353,-180 353,-186 347,-192 341,-192"/>
<text text-anchor="middle" x="296.5" y="-170.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">process_raft_cmd</text>
</g>
<!-- handle_raft_entry_conf_change&#45;&gt;process_raft_cmd -->
<g id="edge9" class="edge">
<title>handle_raft_entry_conf_change&#45;&gt;process_raft_cmd</title>
<path fill="none" stroke="#666666" d="M204.06,-147.73C212.81,-150.25 221.56,-152.76 229.98,-155.18"/>
<polygon fill="#666666" stroke="#666666" points="229.12,-158.57 239.69,-157.97 231.05,-151.84 229.12,-158.57"/>
</g>
<!-- apply_raft_cmd -->
<g id="node9" class="node">
<title>apply_raft_cmd</title>
<path fill="none" stroke="#1c2123" d="M549,-210C549,-210 470,-210 470,-210 464,-210 458,-204 458,-198 458,-198 458,-186 458,-186 458,-180 464,-174 470,-174 470,-174 549,-174 549,-174 555,-174 561,-180 561,-186 561,-186 561,-198 561,-198 561,-204 555,-210 549,-210"/>
<text text-anchor="middle" x="509.5" y="-188.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">apply_raft_cmd</text>
</g>
<!-- process_raft_cmd&#45;&gt;apply_raft_cmd -->
<g id="edge10" class="edge">
<title>process_raft_cmd&#45;&gt;apply_raft_cmd</title>
<path fill="none" stroke="#666666" d="M353.21,-178.75C382.27,-181.23 417.85,-184.27 447.63,-186.81"/>
<polygon fill="#666666" stroke="#666666" points="447.63,-190.32 457.9,-187.68 448.23,-183.35 447.63,-190.32"/>
</g>
<!-- exec_raft_cmd -->
<g id="node10" class="node">
<title>exec_raft_cmd</title>
<path fill="none" stroke="#1c2123" d="M752,-210C752,-210 678,-210 678,-210 672,-210 666,-204 666,-198 666,-198 666,-186 666,-186 666,-180 672,-174 678,-174 678,-174 752,-174 752,-174 758,-174 764,-180 764,-186 764,-186 764,-198 764,-198 764,-204 758,-210 752,-210"/>
<text text-anchor="middle" x="715" y="-188.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">exec_raft_cmd</text>
</g>
<!-- apply_raft_cmd&#45;&gt;exec_raft_cmd -->
<g id="edge11" class="edge">
<title>apply_raft_cmd&#45;&gt;exec_raft_cmd</title>
<path fill="none" stroke="#666666" d="M561.06,-192C589.71,-192 625.66,-192 655.52,-192"/>
<polygon fill="#666666" stroke="#666666" points="655.8,-195.5 665.8,-192 655.8,-188.5 655.8,-195.5"/>
</g>
<!-- exec_raft_cmd&#45;&gt;exec_admin_cmd -->
<g id="edge12" class="edge">
<title>exec_raft_cmd&#45;&gt;exec_admin_cmd</title>
<path fill="none" stroke="#666666" d="M764.01,-192C772.28,-192 781,-192 789.65,-192"/>
<polygon fill="#666666" stroke="#666666" points="789.72,-195.5 799.72,-192 789.72,-188.5 789.72,-195.5"/>
</g>
</g>
</svg>
