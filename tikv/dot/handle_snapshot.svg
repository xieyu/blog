<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: handle_snapshot Pages: 1 -->
<svg width="1309pt" height="918pt"
 viewBox="0.00 0.00 1309.00 918.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 914)">
<title>handle_snapshot</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-914 1305,-914 1305,4 -4,4"/>
<!-- step_follower -->
<g id="node1" class="node">
<title>step_follower</title>
<path fill="none" stroke="#1c2123" d="M79,-748C79,-748 12,-748 12,-748 6,-748 0,-742 0,-736 0,-736 0,-724 0,-724 0,-718 6,-712 12,-712 12,-712 79,-712 79,-712 85,-712 91,-718 91,-724 91,-724 91,-736 91,-736 91,-742 85,-748 79,-748"/>
<text text-anchor="middle" x="45.5" y="-726.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">step_follower</text>
</g>
<!-- handle_snapshot -->
<g id="node2" class="node">
<title>handle_snapshot</title>
<path fill="none" stroke="#1c2123" d="M222,-748C222,-748 139,-748 139,-748 133,-748 127,-742 127,-736 127,-736 127,-724 127,-724 127,-718 133,-712 139,-712 139,-712 222,-712 222,-712 228,-712 234,-718 234,-724 234,-724 234,-736 234,-736 234,-742 228,-748 222,-748"/>
<text text-anchor="middle" x="180.5" y="-726.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_snapshot</text>
</g>
<!-- step_follower&#45;&gt;handle_snapshot -->
<g id="edge1" class="edge">
<title>step_follower&#45;&gt;handle_snapshot</title>
<path fill="none" stroke="#666666" d="M91.16,-730C99.4,-730 108.15,-730 116.81,-730"/>
<polygon fill="#666666" stroke="#666666" points="116.91,-733.5 126.91,-730 116.91,-726.5 116.91,-733.5"/>
</g>
<!-- get_metadata -->
<g id="node3" class="node">
<title>get_metadata</title>
<path fill="none" stroke="#1c2123" d="M735,-910C735,-910 670,-910 670,-910 664,-910 658,-904 658,-898 658,-898 658,-886 658,-886 658,-880 664,-874 670,-874 670,-874 735,-874 735,-874 741,-874 747,-880 747,-886 747,-886 747,-898 747,-898 747,-904 741,-910 735,-910"/>
<text text-anchor="middle" x="702.5" y="-888.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_metadata</text>
</g>
<!-- handle_snapshot&#45;&gt;get_metadata -->
<g id="edge2" class="edge">
<title>handle_snapshot&#45;&gt;get_metadata</title>
<path fill="none" stroke="#666666" d="M225.75,-748.07C296.15,-776.27 438.45,-831.02 563,-865 590.65,-872.54 621.94,-878.83 647.78,-883.43"/>
<polygon fill="#666666" stroke="#666666" points="647.31,-886.9 657.76,-885.18 648.52,-880.01 647.31,-886.9"/>
</g>
<!-- take_snapshot -->
<g id="node4" class="node">
<title>take_snapshot</title>
<path fill="none" stroke="#1c2123" d="M433,-748C433,-748 364,-748 364,-748 358,-748 352,-742 352,-736 352,-736 352,-724 352,-724 352,-718 358,-712 364,-712 364,-712 433,-712 433,-712 439,-712 445,-718 445,-724 445,-724 445,-736 445,-736 445,-742 439,-748 433,-748"/>
<text text-anchor="middle" x="398.5" y="-726.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">take_snapshot</text>
</g>
<!-- handle_snapshot&#45;&gt;take_snapshot -->
<g id="edge3" class="edge">
<title>handle_snapshot&#45;&gt;take_snapshot</title>
<path fill="none" stroke="#666666" d="M234.06,-730C266.66,-730 308.49,-730 341.67,-730"/>
<polygon fill="#666666" stroke="#666666" points="341.68,-733.5 351.68,-730 341.68,-726.5 341.68,-733.5"/>
</g>
<!-- restore -->
<g id="node5" class="node">
<title>restore</title>
<path fill="none" stroke="#1c2123" d="M282,-479.5C282,-479.5 515,-479.5 515,-479.5 521,-479.5 527,-485.5 527,-491.5 527,-491.5 527,-566.5 527,-566.5 527,-572.5 521,-578.5 515,-578.5 515,-578.5 282,-578.5 282,-578.5 276,-578.5 270,-572.5 270,-566.5 270,-566.5 270,-491.5 270,-491.5 270,-485.5 276,-479.5 282,-479.5"/>
<text text-anchor="middle" x="398.5" y="-563.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">restore</text>
<polyline fill="none" stroke="#1c2123" points="270,-555.5 527,-555.5 "/>
<text text-anchor="start" x="278" y="-540.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Recovers the state machine from a snapshot</text>
<text text-anchor="start" x="278" y="-525.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> It restores the log and the configuration</text>
<text text-anchor="start" x="278" y="-510.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> of state machine</text>
<polyline fill="none" stroke="#1c2123" points="270,-502.5 527,-502.5 "/>
<text text-anchor="start" x="278" y="-487.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">检查自己是否在confstate中</text>
</g>
<!-- handle_snapshot&#45;&gt;restore -->
<g id="edge4" class="edge">
<title>handle_snapshot&#45;&gt;restore</title>
<path fill="none" stroke="#666666" d="M201.05,-711.81C231.35,-683.61 290.91,-628.19 336.54,-585.73"/>
<polygon fill="#666666" stroke="#666666" points="339.09,-588.14 344.02,-578.76 334.32,-583.01 339.09,-588.14"/>
</g>
<!-- restore&#45;&gt;get_metadata -->
<g id="edge5" class="edge">
<title>restore&#45;&gt;get_metadata</title>
<path fill="none" stroke="#666666" d="M444.66,-578.74C472.32,-611.76 506.28,-657.29 527,-703 557.45,-770.18 510.17,-813.53 563,-865 585.04,-886.47 618.78,-893.37 647.44,-894.83"/>
<polygon fill="#666666" stroke="#666666" points="647.64,-898.34 657.74,-895.14 647.85,-891.34 647.64,-898.34"/>
</g>
<!-- raft_log_commit_to -->
<g id="node6" class="node">
<title>raft_log_commit_to</title>
<path fill="none" stroke="#1c2123" d="M589,-687C589,-687 816,-687 816,-687 822,-687 828,-693 828,-699 828,-699 828,-843 828,-843 828,-849 822,-855 816,-855 816,-855 589,-855 589,-855 583,-855 577,-849 577,-843 577,-843 577,-699 577,-699 577,-693 583,-687 589,-687"/>
<text text-anchor="middle" x="702.5" y="-839.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_log.commit_to(meta.index)</text>
<polyline fill="none" stroke="#1c2123" points="577,-832 828,-832 "/>
<text text-anchor="start" x="585" y="-816.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果没有请求snapshot,可以根据</text>
<text text-anchor="middle" x="702.5" y="-801.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> meta.index更新自己的commit_to</text>
<polyline fill="none" stroke="#1c2123" points="577,-794 828,-794 "/>
<text text-anchor="start" x="585" y="-762.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> if self.pending_request_snapshot </text>
<text text-anchor="start" x="585" y="-747.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> == INVALID_INDEX</text>
<text text-anchor="start" x="585" y="-732.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> &amp;&amp; self.raft_log.match_term(meta.index,</text>
<text text-anchor="start" x="585" y="-717.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> meta.term)</text>
<polyline fill="none" stroke="#1c2123" points="577,-710 828,-710 "/>
<text text-anchor="middle" x="702.5" y="-694.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.raft_log.commit_to(meta.index);</text>
</g>
<!-- restore&#45;&gt;raft_log_commit_to -->
<g id="edge6" class="edge">
<title>restore&#45;&gt;raft_log_commit_to</title>
<path fill="none" stroke="#666666" d="M450.53,-578.58C481.99,-608.27 523.71,-646.13 563,-677 564.81,-678.42 566.64,-679.85 568.49,-681.27"/>
<polygon fill="#666666" stroke="#666666" points="566.62,-684.25 576.7,-687.52 570.86,-678.68 566.62,-684.25"/>
</g>
<!-- become_follower -->
<g id="node7" class="node">
<title>become_follower</title>
<path fill="none" stroke="#1c2123" d="M746.5,-668C746.5,-668 658.5,-668 658.5,-668 652.5,-668 646.5,-662 646.5,-656 646.5,-656 646.5,-644 646.5,-644 646.5,-638 652.5,-632 658.5,-632 658.5,-632 746.5,-632 746.5,-632 752.5,-632 758.5,-638 758.5,-644 758.5,-644 758.5,-656 758.5,-656 758.5,-662 752.5,-668 746.5,-668"/>
<text text-anchor="middle" x="702.5" y="-646.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">become_follower</text>
</g>
<!-- restore&#45;&gt;become_follower -->
<g id="edge7" class="edge">
<title>restore&#45;&gt;become_follower</title>
<path fill="none" stroke="#666666" d="M473.88,-578.67C500.98,-594.87 532.48,-611.61 563,-623 586.3,-631.69 612.89,-637.74 636.51,-641.87"/>
<polygon fill="#666666" stroke="#666666" points="635.99,-645.33 646.43,-643.52 637.14,-638.42 635.99,-645.33"/>
</g>
<!-- get_conf_state -->
<g id="node8" class="node">
<title>get_conf_state</title>
<path fill="none" stroke="#1c2123" d="M738,-614C738,-614 667,-614 667,-614 661,-614 655,-608 655,-602 655,-602 655,-590 655,-590 655,-584 661,-578 667,-578 667,-578 738,-578 738,-578 744,-578 750,-584 750,-590 750,-590 750,-602 750,-602 750,-608 744,-614 738,-614"/>
<text text-anchor="middle" x="702.5" y="-592.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_conf_state</text>
</g>
<!-- restore&#45;&gt;get_conf_state -->
<g id="edge8" class="edge">
<title>restore&#45;&gt;get_conf_state</title>
<path fill="none" stroke="#666666" d="M527.44,-560.92C539.45,-563.72 551.44,-566.46 563,-569 589.81,-574.89 619.69,-580.8 644.81,-585.58"/>
<polygon fill="#666666" stroke="#666666" points="644.43,-589.07 654.9,-587.49 645.73,-582.19 644.43,-589.07"/>
</g>
<!-- raft_log_restore -->
<g id="node9" class="node">
<title>raft_log_restore</title>
<path fill="none" stroke="#1c2123" d="M647.5,-498.5C647.5,-498.5 757.5,-498.5 757.5,-498.5 763.5,-498.5 769.5,-504.5 769.5,-510.5 769.5,-510.5 769.5,-547.5 769.5,-547.5 769.5,-553.5 763.5,-559.5 757.5,-559.5 757.5,-559.5 647.5,-559.5 647.5,-559.5 641.5,-559.5 635.5,-553.5 635.5,-547.5 635.5,-547.5 635.5,-510.5 635.5,-510.5 635.5,-504.5 641.5,-498.5 647.5,-498.5"/>
<text text-anchor="middle" x="702.5" y="-544.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_log.restore(snap)</text>
<polyline fill="none" stroke="#1c2123" points="635.5,-536.5 769.5,-536.5 "/>
<text text-anchor="start" x="643.5" y="-521.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Restores the current</text>
<text text-anchor="start" x="643.5" y="-506.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> log from a snapshot</text>
</g>
<!-- restore&#45;&gt;raft_log_restore -->
<g id="edge9" class="edge">
<title>restore&#45;&gt;raft_log_restore</title>
<path fill="none" stroke="#666666" d="M527.14,-529C560.4,-529 595.22,-529 624.91,-529"/>
<polygon fill="#666666" stroke="#666666" points="625.19,-532.5 635.19,-529 625.19,-525.5 625.19,-532.5"/>
</g>
<!-- pr_maybe_update -->
<g id="node10" class="node">
<title>pr_maybe_update</title>
<path fill="none" stroke="#1c2123" d="M747.5,-480C747.5,-480 657.5,-480 657.5,-480 651.5,-480 645.5,-474 645.5,-468 645.5,-468 645.5,-456 645.5,-456 645.5,-450 651.5,-444 657.5,-444 657.5,-444 747.5,-444 747.5,-444 753.5,-444 759.5,-450 759.5,-456 759.5,-456 759.5,-468 759.5,-468 759.5,-474 753.5,-480 747.5,-480"/>
<text text-anchor="middle" x="702.5" y="-458.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pr_maybe_update</text>
</g>
<!-- restore&#45;&gt;pr_maybe_update -->
<g id="edge10" class="edge">
<title>restore&#45;&gt;pr_maybe_update</title>
<path fill="none" stroke="#666666" d="M527.44,-497.08C539.45,-494.28 551.44,-491.54 563,-489 586.55,-483.83 612.47,-478.64 635.45,-474.21"/>
<polygon fill="#666666" stroke="#666666" points="636.28,-477.62 645.44,-472.3 634.96,-470.74 636.28,-477.62"/>
</g>
<!-- pending_request_snapshot -->
<g id="node11" class="node">
<title>pending_request_snapshot</title>
<path fill="#feed9b" stroke="#f7e495" d="M575,-379C575,-379 830,-379 830,-379 836,-379 842,-385 842,-391 842,-391 842,-413 842,-413 842,-419 836,-425 830,-425 830,-425 575,-425 575,-425 569,-425 563,-419 563,-413 563,-413 563,-391 563,-391 563,-385 569,-379 575,-379"/>
<text text-anchor="middle" x="702.5" y="-409.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pending_request_snapshot</text>
<polyline fill="none" stroke="#f7e495" points="563,-402 842,-402 "/>
<text text-anchor="middle" x="702.5" y="-386.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pending_request_snapshot = INVALID_INDEX</text>
</g>
<!-- restore&#45;&gt;pending_request_snapshot -->
<g id="edge11" class="edge">
<title>restore&#45;&gt;pending_request_snapshot</title>
<path fill="none" stroke="#666666" d="M475.38,-479.31C502.23,-463.39 533.18,-446.84 563,-435 569.17,-432.55 575.58,-430.25 582.1,-428.1"/>
<polygon fill="#666666" stroke="#666666" points="583.24,-431.4 591.71,-425.04 581.12,-424.73 583.24,-431.4"/>
</g>
<!-- prs_clear -->
<g id="node12" class="node">
<title>prs_clear</title>
<path fill="none" stroke="#1c2123" d="M631,-298.5C631,-298.5 774,-298.5 774,-298.5 780,-298.5 786,-304.5 786,-310.5 786,-310.5 786,-347.5 786,-347.5 786,-353.5 780,-359.5 774,-359.5 774,-359.5 631,-359.5 631,-359.5 625,-359.5 619,-353.5 619,-347.5 619,-347.5 619,-310.5 619,-310.5 619,-304.5 625,-298.5 631,-298.5"/>
<text text-anchor="start" x="627" y="-344.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.prs.clear()</text>
<polyline fill="none" stroke="#1c2123" points="619,-336.5 786,-336.5 "/>
<text text-anchor="start" x="627" y="-321.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">清理掉自己的prs </text>
<text text-anchor="start" x="627" y="-306.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 准备使用snapshot的配置</text>
</g>
<!-- restore&#45;&gt;prs_clear -->
<g id="edge12" class="edge">
<title>restore&#45;&gt;prs_clear</title>
<path fill="none" stroke="#666666" d="M439.03,-479.39C469.48,-444.22 514.48,-398.41 563,-370 577.16,-361.71 593.12,-354.98 609.05,-349.56"/>
<polygon fill="#666666" stroke="#666666" points="610.52,-352.76 618.95,-346.34 608.35,-346.1 610.52,-352.76"/>
</g>
<!-- confchange_restore -->
<g id="node13" class="node">
<title>confchange_restore</title>
<path fill="none" stroke="#1c2123" d="M592.5,-173C592.5,-173 812.5,-173 812.5,-173 818.5,-173 824.5,-179 824.5,-185 824.5,-185 824.5,-267 824.5,-267 824.5,-273 818.5,-279 812.5,-279 812.5,-279 592.5,-279 592.5,-279 586.5,-279 580.5,-273 580.5,-267 580.5,-267 580.5,-185 580.5,-185 580.5,-179 586.5,-173 592.5,-173"/>
<text text-anchor="middle" x="702.5" y="-263.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">confchange_restore</text>
<polyline fill="none" stroke="#1c2123" points="580.5,-256 824.5,-256 "/>
<text text-anchor="start" x="588.5" y="-240.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Restore takes a Changer </text>
<text text-anchor="start" x="588.5" y="-225.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> (which must represent an</text>
<text text-anchor="start" x="588.5" y="-210.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> empty configuration), and runs a</text>
<text text-anchor="start" x="588.5" y="-195.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> sequence of changes enacting the</text>
<text text-anchor="start" x="588.5" y="-180.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> configuration described in the ConfState.</text>
</g>
<!-- restore&#45;&gt;confchange_restore -->
<g id="edge13" class="edge">
<title>restore&#45;&gt;confchange_restore</title>
<path fill="none" stroke="#666666" d="M422.92,-479.41C450.14,-426.28 499.56,-342.42 563,-289 565.9,-286.56 568.91,-284.19 572,-281.9"/>
<polygon fill="#666666" stroke="#666666" points="574.22,-284.63 580.39,-276.02 570.2,-278.9 574.22,-284.63"/>
</g>
<!-- post_conf_change -->
<g id="node14" class="node">
<title>post_conf_change</title>
<path fill="none" stroke="#1c2123" d="M748,-154C748,-154 657,-154 657,-154 651,-154 645,-148 645,-142 645,-142 645,-130 645,-130 645,-124 651,-118 657,-118 657,-118 748,-118 748,-118 754,-118 760,-124 760,-130 760,-130 760,-142 760,-142 760,-148 754,-154 748,-154"/>
<text text-anchor="middle" x="702.5" y="-132.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">post_conf_change</text>
</g>
<!-- restore&#45;&gt;post_conf_change -->
<g id="edge14" class="edge">
<title>restore&#45;&gt;post_conf_change</title>
<path fill="none" stroke="#666666" d="M407.04,-479.18C421.86,-399.53 462.54,-244.34 563,-164 583.12,-147.91 610.05,-140.31 634.8,-136.94"/>
<polygon fill="#666666" stroke="#666666" points="635.36,-140.4 644.89,-135.78 634.55,-133.44 635.36,-140.4"/>
</g>
<!-- unstable_restore -->
<g id="node15" class="node">
<title>unstable_restore</title>
<path fill="none" stroke="#1c2123" d="M1043.5,-547C1043.5,-547 962.5,-547 962.5,-547 956.5,-547 950.5,-541 950.5,-535 950.5,-535 950.5,-523 950.5,-523 950.5,-517 956.5,-511 962.5,-511 962.5,-511 1043.5,-511 1043.5,-511 1049.5,-511 1055.5,-517 1055.5,-523 1055.5,-523 1055.5,-535 1055.5,-535 1055.5,-541 1049.5,-547 1043.5,-547"/>
<text text-anchor="middle" x="1003" y="-525.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">unstable_restore</text>
</g>
<!-- raft_log_restore&#45;&gt;unstable_restore -->
<g id="edge15" class="edge">
<title>raft_log_restore&#45;&gt;unstable_restore</title>
<path fill="none" stroke="#666666" d="M769.75,-529C820.58,-529 890.25,-529 939.99,-529"/>
<polygon fill="#666666" stroke="#666666" points="940.29,-532.5 950.29,-529 940.29,-525.5 940.29,-532.5"/>
</g>
<!-- raft_log_committed -->
<g id="node16" class="node">
<title>raft_log_committed</title>
<path fill="#feed9b" stroke="#f7e495" d="M890,-408C890,-408 1116,-408 1116,-408 1122,-408 1128,-414 1128,-420 1128,-420 1128,-480 1128,-480 1128,-486 1122,-492 1116,-492 1116,-492 890,-492 890,-492 884,-492 878,-486 878,-480 878,-480 878,-420 878,-420 878,-414 884,-408 890,-408"/>
<text text-anchor="middle" x="1003" y="-476.8" font-family="Times,serif" font-size="14.00" fill="#40575d">raft_log.committed</text>
<polyline fill="none" stroke="#f7e495" points="878,-469 1128,-469 "/>
<text text-anchor="start" x="886" y="-453.8" font-family="Times,serif" font-size="14.00" fill="#40575d">更新committed</text>
<polyline fill="none" stroke="#f7e495" points="878,-446 1128,-446 "/>
<text text-anchor="start" x="886" y="-430.8" font-family="Times,serif" font-size="14.00" fill="#40575d">let index = snapshot.get_metadata().index;</text>
<text text-anchor="start" x="886" y="-415.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> self.committed = index;</text>
</g>
<!-- raft_log_restore&#45;&gt;raft_log_committed -->
<g id="edge16" class="edge">
<title>raft_log_restore&#45;&gt;raft_log_committed</title>
<path fill="none" stroke="#666666" d="M769.75,-511.47C798.75,-503.79 833.87,-494.5 867.94,-485.48"/>
<polygon fill="#666666" stroke="#666666" points="869.21,-488.76 877.99,-482.82 867.42,-482 869.21,-488.76"/>
</g>
<!-- unstable_entries_clear -->
<g id="node17" class="node">
<title>unstable_entries_clear</title>
<path fill="none" stroke="#1c2123" d="M1289,-574C1289,-574 1176,-574 1176,-574 1170,-574 1164,-568 1164,-562 1164,-562 1164,-550 1164,-550 1164,-544 1170,-538 1176,-538 1176,-538 1289,-538 1289,-538 1295,-538 1301,-544 1301,-550 1301,-550 1301,-562 1301,-562 1301,-568 1295,-574 1289,-574"/>
<text text-anchor="middle" x="1232.5" y="-552.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">unstable_entries_clear</text>
</g>
<!-- unstable_restore&#45;&gt;unstable_entries_clear -->
<g id="edge17" class="edge">
<title>unstable_restore&#45;&gt;unstable_entries_clear</title>
<path fill="none" stroke="#666666" d="M1055.62,-535.13C1084.49,-538.55 1121.05,-542.89 1153.35,-546.73"/>
<polygon fill="#666666" stroke="#666666" points="1153.33,-550.25 1163.68,-547.95 1154.16,-543.3 1153.33,-550.25"/>
</g>
<!-- unstable_offset -->
<g id="node18" class="node">
<title>unstable_offset</title>
<path fill="none" stroke="#1c2123" d="M1270,-520C1270,-520 1195,-520 1195,-520 1189,-520 1183,-514 1183,-508 1183,-508 1183,-496 1183,-496 1183,-490 1189,-484 1195,-484 1195,-484 1270,-484 1270,-484 1276,-484 1282,-490 1282,-496 1282,-496 1282,-508 1282,-508 1282,-514 1276,-520 1270,-520"/>
<text text-anchor="middle" x="1232.5" y="-498.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">unstable_offset</text>
</g>
<!-- unstable_restore&#45;&gt;unstable_offset -->
<g id="edge18" class="edge">
<title>unstable_restore&#45;&gt;unstable_offset</title>
<path fill="none" stroke="#666666" d="M1055.62,-522.87C1090.49,-518.73 1136.6,-513.26 1172.86,-508.96"/>
<polygon fill="#666666" stroke="#666666" points="1173.29,-512.43 1182.81,-507.78 1172.46,-505.48 1173.29,-512.43"/>
</g>
<!-- unstable_snapshot -->
<g id="node19" class="node">
<title>unstable_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1278.5,-441C1278.5,-441 1186.5,-441 1186.5,-441 1180.5,-441 1174.5,-435 1174.5,-429 1174.5,-429 1174.5,-417 1174.5,-417 1174.5,-411 1180.5,-405 1186.5,-405 1186.5,-405 1278.5,-405 1278.5,-405 1284.5,-405 1290.5,-411 1290.5,-417 1290.5,-417 1290.5,-429 1290.5,-429 1290.5,-435 1284.5,-441 1278.5,-441"/>
<text text-anchor="middle" x="1232.5" y="-419.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">unstable_snapshot</text>
</g>
<!-- unstable_restore&#45;&gt;unstable_snapshot -->
<g id="edge19" class="edge">
<title>unstable_restore&#45;&gt;unstable_snapshot</title>
<path fill="none" stroke="#666666" d="M1055.7,-522.92C1078.59,-518.94 1105.4,-512.45 1128,-502 1130.06,-501.05 1170.41,-470.09 1200.1,-447.22"/>
<polygon fill="#666666" stroke="#666666" points="1202.37,-449.89 1208.16,-441.02 1198.1,-444.35 1202.37,-449.89"/>
</g>
<!-- ready -->
<g id="node20" class="node">
<title>ready</title>
<path fill="none" stroke="#1c2123" d="M612,-0.5C612,-0.5 793,-0.5 793,-0.5 799,-0.5 805,-6.5 805,-12.5 805,-12.5 805,-87.5 805,-87.5 805,-93.5 799,-99.5 793,-99.5 793,-99.5 612,-99.5 612,-99.5 606,-99.5 600,-93.5 600,-87.5 600,-87.5 600,-12.5 600,-12.5 600,-6.5 606,-0.5 612,-0.5"/>
<text text-anchor="middle" x="702.5" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ready</text>
<polyline fill="none" stroke="#1c2123" points="600,-76.5 805,-76.5 "/>
<text text-anchor="start" x="608" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode.ready</text>
<polyline fill="none" stroke="#1c2123" points="600,-53.5 805,-53.5 "/>
<text text-anchor="start" x="608" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">集成raft服务获取snapshot</text>
<text text-anchor="start" x="608" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 负责把snapshot apply 到自己的</text>
<text text-anchor="start" x="608" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> statemachine上</text>
</g>
<!-- raft_log_unstable_snapshot -->
<g id="node21" class="node">
<title>raft_log_unstable_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1073.5,-229C1073.5,-229 932.5,-229 932.5,-229 926.5,-229 920.5,-223 920.5,-217 920.5,-217 920.5,-205 920.5,-205 920.5,-199 926.5,-193 932.5,-193 932.5,-193 1073.5,-193 1073.5,-193 1079.5,-193 1085.5,-199 1085.5,-205 1085.5,-205 1085.5,-217 1085.5,-217 1085.5,-223 1079.5,-229 1073.5,-229"/>
<text text-anchor="middle" x="1003" y="-207.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_log_unstable_snapshot</text>
</g>
<!-- ready&#45;&gt;raft_log_unstable_snapshot -->
<g id="edge20" class="edge">
<title>ready&#45;&gt;raft_log_unstable_snapshot</title>
<path fill="none" stroke="#666666" d="M805.02,-90.95C817.62,-96.7 830.21,-102.78 842,-109 887.15,-132.8 936.25,-165.15 967.99,-186.99"/>
<polygon fill="#666666" stroke="#666666" points="966.25,-190.04 976.46,-192.85 970.23,-184.28 966.25,-190.04"/>
</g>
<!-- raft_log_unstable_snapshot&#45;&gt;unstable_snapshot -->
<g id="edge21" class="edge">
<title>raft_log_unstable_snapshot&#45;&gt;unstable_snapshot</title>
<path fill="none" stroke="#666666" d="M1023.4,-229.08C1064.03,-266.94 1158.15,-354.65 1204.59,-397.92"/>
<polygon fill="#666666" stroke="#666666" points="1202.45,-400.71 1212.15,-404.97 1207.22,-395.59 1202.45,-400.71"/>
</g>
</g>
</svg>
