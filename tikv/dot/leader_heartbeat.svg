<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: leader_heartbeat Pages: 1 -->
<svg width="2086pt" height="466pt"
 viewBox="0.00 0.00 2086.00 466.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 462)">
<title>leader_heartbeat</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-462 2082,-462 2082,4 -4,4"/>
<!-- ProgressTracker -->
<g id="node1" class="node">
<title>ProgressTracker</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M644,-296.5C644,-296.5 794,-296.5 794,-296.5 800,-296.5 806,-302.5 806,-308.5 806,-308.5 806,-445.5 806,-445.5 806,-451.5 800,-457.5 794,-457.5 794,-457.5 644,-457.5 644,-457.5 638,-457.5 632,-451.5 632,-445.5 632,-445.5 632,-308.5 632,-308.5 632,-302.5 638,-296.5 644,-296.5"/>
<text text-anchor="middle" x="719" y="-442.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ProgressTracker</text>
<polyline fill="none" stroke="#60b5ac" points="632,-434.5 806,-434.5 "/>
<text text-anchor="start" x="640" y="-419.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">progress: ProgressMap</text>
<polyline fill="none" stroke="#60b5ac" points="632,-411.5 806,-411.5 "/>
<text text-anchor="start" x="640" y="-396.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">conf: Configuration</text>
<polyline fill="none" stroke="#60b5ac" points="632,-388.5 806,-388.5 "/>
<text text-anchor="start" x="640" y="-373.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">votes: HashMap&lt;u64, bool&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="632,-365.5 806,-365.5 "/>
<text text-anchor="start" x="640" y="-350.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">max_inflight: usize</text>
<polyline fill="none" stroke="#60b5ac" points="632,-342.5 806,-342.5 "/>
<text text-anchor="start" x="640" y="-327.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">group_commit: bool</text>
<polyline fill="none" stroke="#60b5ac" points="632,-319.5 806,-319.5 "/>
<text text-anchor="start" x="640" y="-304.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) logger: Logger</text>
</g>
<!-- Configuration -->
<g id="node3" class="node">
<title>Configuration</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M890.5,-342.5C890.5,-342.5 1104.5,-342.5 1104.5,-342.5 1110.5,-342.5 1116.5,-348.5 1116.5,-354.5 1116.5,-354.5 1116.5,-445.5 1116.5,-445.5 1116.5,-451.5 1110.5,-457.5 1104.5,-457.5 1104.5,-457.5 890.5,-457.5 890.5,-457.5 884.5,-457.5 878.5,-451.5 878.5,-445.5 878.5,-445.5 878.5,-354.5 878.5,-354.5 878.5,-348.5 884.5,-342.5 890.5,-342.5"/>
<text text-anchor="middle" x="997.5" y="-442.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Configuration</text>
<polyline fill="none" stroke="#60b5ac" points="878.5,-434.5 1116.5,-434.5 "/>
<text text-anchor="start" x="886.5" y="-419.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) voters: JointConfig</text>
<polyline fill="none" stroke="#60b5ac" points="878.5,-411.5 1116.5,-411.5 "/>
<text text-anchor="start" x="886.5" y="-396.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) learners: HashSet&lt;u64&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="878.5,-388.5 1116.5,-388.5 "/>
<text text-anchor="start" x="886.5" y="-373.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) learners_next: HashSet&lt;u64&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="878.5,-365.5 1116.5,-365.5 "/>
<text text-anchor="start" x="886.5" y="-350.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) auto_leave: bool</text>
</g>
<!-- ProgressTracker&#45;&gt;Configuration -->
<g id="edge2" class="edge">
<title>ProgressTracker:conf&#45;&gt;Configuration</title>
<path fill="none" stroke="#666666" d="M807,-400C826.86,-400 847.89,-400 868.44,-400"/>
<polygon fill="#666666" stroke="#666666" points="868.48,-403.5 878.48,-400 868.48,-396.5 868.48,-403.5"/>
</g>
<!-- ProgressMap -->
<g id="node5" class="node">
<title>ProgressMap</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M860,-236C860,-236 1135,-236 1135,-236 1141,-236 1147,-242 1147,-248 1147,-248 1147,-270 1147,-270 1147,-276 1141,-282 1135,-282 1135,-282 860,-282 860,-282 854,-282 848,-276 848,-270 848,-270 848,-248 848,-248 848,-242 854,-236 860,-236"/>
<text text-anchor="middle" x="997.5" y="-266.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ProgressMap</text>
<polyline fill="none" stroke="#60b5ac" points="848,-259 1147,-259 "/>
<text text-anchor="middle" x="997.5" y="-243.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub type ProgressMap = HashMap&lt;u64, Progress&gt;</text>
</g>
<!-- ProgressTracker&#45;&gt;ProgressMap -->
<g id="edge3" class="edge">
<title>ProgressTracker&#45;&gt;ProgressMap</title>
<path fill="none" stroke="#666666" d="M806.35,-340.15C847.4,-322.63 895.58,-302.07 933.18,-286.02"/>
<polygon fill="#666666" stroke="#666666" points="934.67,-289.19 942.5,-282.05 931.93,-282.75 934.67,-289.19"/>
</g>
<!-- ProgressState -->
<g id="node2" class="node">
<title>ProgressState</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1519,-131C1519,-131 1585,-131 1585,-131 1591,-131 1597,-137 1597,-143 1597,-143 1597,-211 1597,-211 1597,-217 1591,-223 1585,-223 1585,-223 1519,-223 1519,-223 1513,-223 1507,-217 1507,-211 1507,-211 1507,-143 1507,-143 1507,-137 1513,-131 1519,-131"/>
<text text-anchor="middle" x="1552" y="-207.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ProgressState</text>
<polyline fill="none" stroke="#60b5ac" points="1507,-200 1597,-200 "/>
<text text-anchor="start" x="1515" y="-184.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Probe</text>
<polyline fill="none" stroke="#60b5ac" points="1507,-177 1597,-177 "/>
<text text-anchor="start" x="1515" y="-161.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Replicate</text>
<polyline fill="none" stroke="#60b5ac" points="1507,-154 1597,-154 "/>
<text text-anchor="start" x="1515" y="-138.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Snapshot</text>
</g>
<!-- JointConfig -->
<g id="node4" class="node">
<title>JointConfig</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1195,-365.5C1195,-365.5 1391,-365.5 1391,-365.5 1397,-365.5 1403,-371.5 1403,-377.5 1403,-377.5 1403,-422.5 1403,-422.5 1403,-428.5 1397,-434.5 1391,-434.5 1391,-434.5 1195,-434.5 1195,-434.5 1189,-434.5 1183,-428.5 1183,-422.5 1183,-422.5 1183,-377.5 1183,-377.5 1183,-371.5 1189,-365.5 1195,-365.5"/>
<text text-anchor="middle" x="1293" y="-419.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">JointConfig</text>
<polyline fill="none" stroke="#60b5ac" points="1183,-411.5 1403,-411.5 "/>
<text text-anchor="start" x="1191" y="-396.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) incoming: MajorityConfig</text>
<polyline fill="none" stroke="#60b5ac" points="1183,-388.5 1403,-388.5 "/>
<text text-anchor="start" x="1191" y="-373.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) outgoing: MajorityConfig</text>
</g>
<!-- Configuration&#45;&gt;JointConfig -->
<g id="edge1" class="edge">
<title>Configuration&#45;&gt;JointConfig</title>
<path fill="none" stroke="#666666" d="M1116.61,-400C1135.02,-400 1154.06,-400 1172.5,-400"/>
<polygon fill="#666666" stroke="#666666" points="1172.68,-403.5 1182.68,-400 1172.68,-396.5 1172.68,-403.5"/>
</g>
<!-- Progress -->
<g id="node6" class="node">
<title>Progress</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1223,-184.5C1223,-184.5 1363,-184.5 1363,-184.5 1369,-184.5 1375,-190.5 1375,-196.5 1375,-196.5 1375,-333.5 1375,-333.5 1375,-339.5 1369,-345.5 1363,-345.5 1363,-345.5 1223,-345.5 1223,-345.5 1217,-345.5 1211,-339.5 1211,-333.5 1211,-333.5 1211,-196.5 1211,-196.5 1211,-190.5 1217,-184.5 1223,-184.5"/>
<text text-anchor="middle" x="1293" y="-330.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Progress</text>
<polyline fill="none" stroke="#60b5ac" points="1211,-322.5 1375,-322.5 "/>
<text text-anchor="start" x="1219" y="-307.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub matched: u64</text>
<polyline fill="none" stroke="#60b5ac" points="1211,-299.5 1375,-299.5 "/>
<text text-anchor="start" x="1219" y="-284.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub next_idx: u64</text>
<polyline fill="none" stroke="#60b5ac" points="1211,-276.5 1375,-276.5 "/>
<text text-anchor="start" x="1219" y="-261.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub state: ProgressState</text>
<polyline fill="none" stroke="#60b5ac" points="1211,-253.5 1375,-253.5 "/>
<text text-anchor="start" x="1219" y="-238.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub committed_index: u64</text>
<polyline fill="none" stroke="#60b5ac" points="1211,-230.5 1375,-230.5 "/>
<text text-anchor="start" x="1219" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub ins: Inflights</text>
<polyline fill="none" stroke="#60b5ac" points="1211,-207.5 1375,-207.5 "/>
<text text-anchor="start" x="1219" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">...</text>
</g>
<!-- ProgressMap&#45;&gt;Progress -->
<g id="edge4" class="edge">
<title>ProgressMap&#45;&gt;Progress</title>
<path fill="none" stroke="#666666" d="M1147.4,-262.04C1165.5,-262.41 1183.55,-262.78 1200.46,-263.13"/>
<polygon fill="#666666" stroke="#666666" points="1200.76,-266.64 1210.83,-263.34 1200.9,-259.64 1200.76,-266.64"/>
</g>
<!-- Progress&#45;&gt;ProgressState -->
<g id="edge5" class="edge">
<title>Progress&#45;&gt;ProgressState</title>
<path fill="none" stroke="#666666" d="M1375.32,-237.16C1415.1,-223.53 1461.9,-207.51 1497.19,-195.43"/>
<polygon fill="#666666" stroke="#666666" points="1498.49,-198.68 1506.82,-192.13 1496.23,-192.06 1498.49,-198.68"/>
</g>
<!-- MsgHeartbeat -->
<g id="node13" class="node">
<title>MsgHeartbeat</title>
<path fill="#feed9b" stroke="#f7e495" d="M1451,-242.5C1451,-242.5 1653,-242.5 1653,-242.5 1659,-242.5 1665,-248.5 1665,-254.5 1665,-254.5 1665,-291.5 1665,-291.5 1665,-297.5 1659,-303.5 1653,-303.5 1653,-303.5 1451,-303.5 1451,-303.5 1445,-303.5 1439,-297.5 1439,-291.5 1439,-291.5 1439,-254.5 1439,-254.5 1439,-248.5 1445,-242.5 1451,-242.5"/>
<text text-anchor="middle" x="1552" y="-288.3" font-family="Times,serif" font-size="14.00" fill="#40575d">MsgHeartbeat</text>
<polyline fill="none" stroke="#f7e495" points="1439,-280.5 1665,-280.5 "/>
<text text-anchor="start" x="1447" y="-265.3" font-family="Times,serif" font-size="14.00" fill="#40575d">let commit = cmp::min(</text>
<text text-anchor="start" x="1447" y="-250.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> pr.matched, self.raft_log.committed);</text>
</g>
<!-- Progress&#45;&gt;MsgHeartbeat -->
<g id="edge19" class="edge">
<title>Progress:matched&#45;&gt;MsgHeartbeat</title>
<path fill="none" stroke="#666666" d="M1376,-311C1395.28,-311 1415.49,-308.77 1435.05,-305.39"/>
<polygon fill="#666666" stroke="#666666" points="1435.7,-308.83 1444.9,-303.58 1434.43,-301.94 1435.7,-308.83"/>
</g>
<!-- step_leader -->
<g id="node7" class="node">
<title>step_leader</title>
<path fill="none" stroke="#1c2123" d="M66,-228C66,-228 12,-228 12,-228 6,-228 0,-222 0,-216 0,-216 0,-204 0,-204 0,-198 6,-192 12,-192 12,-192 66,-192 66,-192 72,-192 78,-198 78,-204 78,-204 78,-216 78,-216 78,-222 72,-228 66,-228"/>
<text text-anchor="middle" x="39" y="-206.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">step_leader</text>
</g>
<!-- bcast_heartbeat -->
<g id="node8" class="node">
<title>bcast_heartbeat</title>
<path fill="none" stroke="#1c2123" d="M155,-130.5C155,-130.5 358,-130.5 358,-130.5 364,-130.5 370,-136.5 370,-142.5 370,-142.5 370,-179.5 370,-179.5 370,-185.5 364,-191.5 358,-191.5 358,-191.5 155,-191.5 155,-191.5 149,-191.5 143,-185.5 143,-179.5 143,-179.5 143,-142.5 143,-142.5 143,-136.5 149,-130.5 155,-130.5"/>
<text text-anchor="middle" x="256.5" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">bcast_heartbeat</text>
<polyline fill="none" stroke="#1c2123" points="143,-168.5 370,-168.5 "/>
<text text-anchor="start" x="151" y="-153.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Sends RPC, wihout entries to all peers</text>
<text text-anchor="start" x="151" y="-138.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送空消息给所有的peers</text>
</g>
<!-- step_leader&#45;&gt;bcast_heartbeat -->
<g id="edge6" class="edge">
<title>step_leader&#45;&gt;bcast_heartbeat</title>
<path fill="none" stroke="#666666" d="M78.03,-201.35C93.81,-197.76 113.1,-193.38 133.06,-188.84"/>
<polygon fill="#666666" stroke="#666666" points="133.93,-192.23 142.91,-186.6 132.38,-185.41 133.93,-192.23"/>
</g>
<!-- handle_append_response -->
<g id="node18" class="node">
<title>handle_append_response</title>
<path fill="none" stroke="#1c2123" d="M126,-210.5C126,-210.5 387,-210.5 387,-210.5 393,-210.5 399,-216.5 399,-222.5 399,-222.5 399,-297.5 399,-297.5 399,-303.5 393,-309.5 387,-309.5 387,-309.5 126,-309.5 126,-309.5 120,-309.5 114,-303.5 114,-297.5 114,-297.5 114,-222.5 114,-222.5 114,-216.5 120,-210.5 126,-210.5"/>
<text text-anchor="middle" x="256.5" y="-294.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_append_response</text>
<polyline fill="none" stroke="#1c2123" points="114,-286.5 399,-286.5 "/>
<text text-anchor="start" x="122" y="-271.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理某follower的AE response</text>
<text text-anchor="start" x="122" y="-256.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 会更新该follower的matched index</text>
<polyline fill="none" stroke="#1c2123" points="114,-248.5 399,-248.5 "/>
<text text-anchor="start" x="122" y="-233.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">这样会保证heartbeat消息发送的commit index</text>
<text text-anchor="start" x="122" y="-218.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 不会超过follower本地的index</text>
</g>
<!-- step_leader&#45;&gt;handle_append_response -->
<g id="edge20" class="edge">
<title>step_leader&#45;&gt;handle_append_response</title>
<path fill="none" stroke="#666666" d="M78.03,-218.82C85.92,-220.65 94.69,-222.69 103.98,-224.84"/>
<polygon fill="#666666" stroke="#666666" points="103.3,-228.28 113.83,-227.13 104.88,-221.46 103.3,-228.28"/>
</g>
<!-- last_pending_request_ctx -->
<g id="node9" class="node">
<title>last_pending_request_ctx</title>
<path fill="none" stroke="#1c2123" d="M578,-206C578,-206 447,-206 447,-206 441,-206 435,-200 435,-194 435,-194 435,-182 435,-182 435,-176 441,-170 447,-170 447,-170 578,-170 578,-170 584,-170 590,-176 590,-182 590,-182 590,-194 590,-194 590,-200 584,-206 578,-206"/>
<text text-anchor="middle" x="512.5" y="-184.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">last_pending_request_ctx</text>
</g>
<!-- bcast_heartbeat&#45;&gt;last_pending_request_ctx -->
<g id="edge7" class="edge">
<title>bcast_heartbeat&#45;&gt;last_pending_request_ctx</title>
<path fill="none" stroke="#666666" d="M370.02,-172.96C388.32,-174.91 407.03,-176.89 424.6,-178.76"/>
<polygon fill="#666666" stroke="#666666" points="424.48,-182.27 434.8,-179.85 425.22,-175.31 424.48,-182.27"/>
</g>
<!-- bcast_heartbeat_with_ctx -->
<g id="node10" class="node">
<title>bcast_heartbeat_with_ctx</title>
<path fill="none" stroke="#1c2123" d="M578,-152C578,-152 447,-152 447,-152 441,-152 435,-146 435,-140 435,-140 435,-128 435,-128 435,-122 441,-116 447,-116 447,-116 578,-116 578,-116 584,-116 590,-122 590,-128 590,-128 590,-140 590,-140 590,-146 584,-152 578,-152"/>
<text text-anchor="middle" x="512.5" y="-130.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">bcast_heartbeat_with_ctx</text>
</g>
<!-- bcast_heartbeat&#45;&gt;bcast_heartbeat_with_ctx -->
<g id="edge8" class="edge">
<title>bcast_heartbeat&#45;&gt;bcast_heartbeat_with_ctx</title>
<path fill="none" stroke="#666666" d="M370.02,-149.04C388.32,-147.09 407.03,-145.11 424.6,-143.24"/>
<polygon fill="#666666" stroke="#666666" points="425.22,-146.69 434.8,-142.15 424.48,-139.73 425.22,-146.69"/>
</g>
<!-- iter_mut -->
<g id="node11" class="node">
<title>iter_mut</title>
<path fill="none" stroke="#1c2123" d="M638,-130.5C638,-130.5 800,-130.5 800,-130.5 806,-130.5 812,-136.5 812,-142.5 812,-142.5 812,-179.5 812,-179.5 812,-185.5 806,-191.5 800,-191.5 800,-191.5 638,-191.5 638,-191.5 632,-191.5 626,-185.5 626,-179.5 626,-179.5 626,-142.5 626,-142.5 626,-136.5 632,-130.5 638,-130.5"/>
<text text-anchor="middle" x="719" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">iter_mut</text>
<polyline fill="none" stroke="#1c2123" points="626,-168.5 812,-168.5 "/>
<text text-anchor="start" x="634" y="-153.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">遍历所有的progress</text>
<text text-anchor="start" x="634" y="-138.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 获取所有要发送的peer列表</text>
</g>
<!-- bcast_heartbeat_with_ctx&#45;&gt;iter_mut -->
<g id="edge9" class="edge">
<title>bcast_heartbeat_with_ctx&#45;&gt;iter_mut</title>
<path fill="none" stroke="#666666" d="M590.23,-144.13C598.54,-145.23 607.09,-146.36 615.64,-147.49"/>
<polygon fill="#666666" stroke="#666666" points="615.29,-150.97 625.66,-148.81 616.21,-144.03 615.29,-150.97"/>
</g>
<!-- send_heartbeat -->
<g id="node12" class="node">
<title>send_heartbeat</title>
<path fill="none" stroke="#1c2123" d="M923,-79C923,-79 1072,-79 1072,-79 1078,-79 1084,-85 1084,-91 1084,-91 1084,-113 1084,-113 1084,-119 1078,-125 1072,-125 1072,-125 923,-125 923,-125 917,-125 911,-119 911,-113 911,-113 911,-91 911,-91 911,-85 917,-79 923,-79"/>
<text text-anchor="middle" x="997.5" y="-109.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_heartbeat</text>
<polyline fill="none" stroke="#1c2123" points="911,-102 1084,-102 "/>
<text text-anchor="middle" x="997.5" y="-86.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">sends an empty MsgAppend</text>
</g>
<!-- bcast_heartbeat_with_ctx&#45;&gt;send_heartbeat -->
<g id="edge10" class="edge">
<title>bcast_heartbeat_with_ctx&#45;&gt;send_heartbeat</title>
<path fill="none" stroke="#666666" d="M590.29,-124.46C602.23,-123.17 614.44,-121.96 626,-121 719.03,-113.25 825.47,-108.18 900.33,-105.25"/>
<polygon fill="#666666" stroke="#666666" points="900.82,-108.73 910.67,-104.85 900.55,-101.74 900.82,-108.73"/>
</g>
<!-- iter_mut&#45;&gt;ProgressMap -->
<g id="edge11" class="edge">
<title>iter_mut&#45;&gt;ProgressMap</title>
<path fill="none" stroke="#666666" d="M806.35,-191.6C843.28,-204.69 886,-219.83 921.57,-232.44"/>
<polygon fill="#666666" stroke="#666666" points="920.81,-235.89 931.41,-235.93 923.15,-229.29 920.81,-235.89"/>
</g>
<!-- iter_mut&#45;&gt;send_heartbeat -->
<g id="edge12" class="edge">
<title>iter_mut&#45;&gt;send_heartbeat</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M812.07,-141.35C840.6,-135.27 872.09,-128.55 900.85,-122.41"/>
<polygon fill="green" stroke="green" points="901.85,-125.77 910.9,-120.26 900.39,-118.93 901.85,-125.77"/>
</g>
<!-- send_heartbeat&#45;&gt;MsgHeartbeat -->
<g id="edge13" class="edge">
<title>send_heartbeat&#45;&gt;MsgHeartbeat</title>
<path fill="none" stroke="#666666" d="M1084.15,-95C1187.9,-88.37 1354.8,-84.2 1403,-121 1444.22,-152.47 1403.02,-194.65 1439,-232 1440.26,-233.31 1441.56,-234.57 1442.91,-235.8"/>
<polygon fill="#666666" stroke="#666666" points="1441.05,-238.8 1451.02,-242.39 1445.47,-233.37 1441.05,-238.8"/>
</g>
<!-- raft_log_committed -->
<g id="node14" class="node">
<title>raft_log_committed</title>
<path fill="none" stroke="#1c2123" d="M1343.5,-36C1343.5,-36 1242.5,-36 1242.5,-36 1236.5,-36 1230.5,-30 1230.5,-24 1230.5,-24 1230.5,-12 1230.5,-12 1230.5,-6 1236.5,0 1242.5,0 1242.5,0 1343.5,0 1343.5,0 1349.5,0 1355.5,-6 1355.5,-12 1355.5,-12 1355.5,-24 1355.5,-24 1355.5,-30 1349.5,-36 1343.5,-36"/>
<text text-anchor="middle" x="1293" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_log_committed</text>
</g>
<!-- send_heartbeat&#45;&gt;raft_log_committed -->
<g id="edge14" class="edge">
<title>send_heartbeat&#45;&gt;raft_log_committed</title>
<path fill="none" stroke="#666666" d="M1079.09,-78.94C1123.33,-66.27 1177.72,-50.71 1220.45,-38.48"/>
<polygon fill="#666666" stroke="#666666" points="1221.56,-41.8 1230.21,-35.68 1219.63,-35.07 1221.56,-41.8"/>
</g>
<!-- pr_machted -->
<g id="node15" class="node">
<title>pr_machted</title>
<path fill="none" stroke="#1c2123" d="M1321.5,-166C1321.5,-166 1264.5,-166 1264.5,-166 1258.5,-166 1252.5,-160 1252.5,-154 1252.5,-154 1252.5,-142 1252.5,-142 1252.5,-136 1258.5,-130 1264.5,-130 1264.5,-130 1321.5,-130 1321.5,-130 1327.5,-130 1333.5,-136 1333.5,-142 1333.5,-142 1333.5,-154 1333.5,-154 1333.5,-160 1327.5,-166 1321.5,-166"/>
<text text-anchor="middle" x="1293" y="-144.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pr_machted</text>
</g>
<!-- send_heartbeat&#45;&gt;pr_machted -->
<g id="edge15" class="edge">
<title>send_heartbeat&#45;&gt;pr_machted</title>
<path fill="none" stroke="#666666" d="M1084.18,-115.43C1135.56,-123.48 1199.09,-133.44 1242.29,-140.21"/>
<polygon fill="#666666" stroke="#666666" points="1241.85,-143.68 1252.27,-141.77 1242.94,-136.77 1241.85,-143.68"/>
</g>
<!-- send -->
<g id="node16" class="node">
<title>send</title>
<path fill="none" stroke="#1c2123" d="M1713,-118.5C1713,-118.5 1869,-118.5 1869,-118.5 1875,-118.5 1881,-124.5 1881,-130.5 1881,-130.5 1881,-167.5 1881,-167.5 1881,-173.5 1875,-179.5 1869,-179.5 1869,-179.5 1713,-179.5 1713,-179.5 1707,-179.5 1701,-173.5 1701,-167.5 1701,-167.5 1701,-130.5 1701,-130.5 1701,-124.5 1707,-118.5 1713,-118.5"/>
<text text-anchor="middle" x="1791" y="-164.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send</text>
<polyline fill="none" stroke="#1c2123" points="1701,-156.5 1881,-156.5 "/>
<text text-anchor="start" x="1709" y="-141.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将HeartBeat消息放入Raft的</text>
<text text-anchor="start" x="1709" y="-126.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> msgs 数组中</text>
</g>
<!-- send_heartbeat&#45;&gt;send -->
<g id="edge16" class="edge">
<title>send_heartbeat&#45;&gt;send</title>
<path fill="none" stroke="#666666" d="M1084.3,-93.57C1115.36,-90.9 1150.73,-88.31 1183,-87 1397.58,-78.29 1453.51,-83.67 1665,-121 1673.43,-122.49 1682.16,-124.16 1690.9,-125.93"/>
<polygon fill="#666666" stroke="#666666" points="1690.25,-129.37 1700.75,-127.97 1691.67,-122.52 1690.25,-129.37"/>
</g>
<!-- MsgHeartbeat&#45;&gt;send -->
<g id="edge17" class="edge">
<title>MsgHeartbeat&#45;&gt;send</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1642.46,-242.43C1650.19,-239.13 1657.79,-235.65 1665,-232 1691.17,-218.75 1718.51,-201.1 1740.92,-185.48"/>
<polygon fill="green" stroke="green" points="1743.1,-188.23 1749.25,-179.61 1739.06,-182.51 1743.1,-188.23"/>
</g>
<!-- Raft -->
<g id="node17" class="node">
<title>Raft</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1929,-115C1929,-115 2066,-115 2066,-115 2072,-115 2078,-121 2078,-127 2078,-127 2078,-195 2078,-195 2078,-201 2072,-207 2066,-207 2066,-207 1929,-207 1929,-207 1923,-207 1917,-201 1917,-195 1917,-195 1917,-127 1917,-127 1917,-121 1923,-115 1929,-115"/>
<text text-anchor="middle" x="1997.5" y="-191.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Raft</text>
<polyline fill="none" stroke="#60b5ac" points="1917,-184 2078,-184 "/>
<text text-anchor="middle" x="1997.5" y="-168.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">prs: ProgressTracker</text>
<polyline fill="none" stroke="#60b5ac" points="1917,-161 2078,-161 "/>
<text text-anchor="middle" x="1997.5" y="-145.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub msgs: Vec&lt;Message&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="1917,-138 2078,-138 "/>
<text text-anchor="start" x="1925" y="-122.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub r: RaftCore&lt;T&gt;</text>
</g>
<!-- send&#45;&gt;Raft -->
<g id="edge18" class="edge">
<title>send&#45;&gt;Raft:msgs</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1881.11,-149C1889.69,-149 1898.34,-149 1906.8,-149"/>
<polygon fill="green" stroke="green" points="1907,-152.5 1917,-149 1907,-145.5 1907,-152.5"/>
</g>
<!-- maybe_update -->
<g id="node19" class="node">
<title>maybe_update</title>
<path fill="none" stroke="#1c2123" d="M755,-278C755,-278 683,-278 683,-278 677,-278 671,-272 671,-266 671,-266 671,-254 671,-254 671,-248 677,-242 683,-242 683,-242 755,-242 755,-242 761,-242 767,-248 767,-254 767,-254 767,-266 767,-266 767,-272 761,-278 755,-278"/>
<text text-anchor="middle" x="719" y="-256.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_update</text>
</g>
<!-- handle_append_response&#45;&gt;maybe_update -->
<g id="edge21" class="edge">
<title>handle_append_response&#45;&gt;maybe_update</title>
<path fill="none" stroke="#666666" d="M399.11,-260C487.18,-260 595.66,-260 660.7,-260"/>
<polygon fill="#666666" stroke="#666666" points="660.76,-263.5 670.76,-260 660.76,-256.5 660.76,-263.5"/>
</g>
<!-- maybe_update&#45;&gt;Progress -->
<g id="edge22" class="edge">
<title>maybe_update&#45;&gt;Progress:matched</title>
<path fill="none" stroke="#666666" d="M767.01,-273.56C791.03,-279.94 820.86,-287 848,-291 1003.99,-314 1047.03,-311.14 1199.78,-311"/>
<polygon fill="#666666" stroke="#666666" points="1200,-314.5 1210,-311 1200,-307.5 1200,-314.5"/>
</g>
</g>
</svg>
