<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: leader_lease Pages: 1 -->
<svg width="2227pt" height="452pt"
 viewBox="0.00 0.00 2227.00 452.33" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 448.33)">
<title>leader_lease</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-448.33 2223,-448.33 2223,4 -4,4"/>
<!-- Lease__expire -->
<g id="node1" class="node">
<title>Lease__expire</title>
<path fill="none" stroke="#1c2123" d="M1419,-194.83C1419,-194.83 1348,-194.83 1348,-194.83 1342,-194.83 1336,-188.83 1336,-182.83 1336,-182.83 1336,-170.83 1336,-170.83 1336,-164.83 1342,-158.83 1348,-158.83 1348,-158.83 1419,-158.83 1419,-158.83 1425,-158.83 1431,-164.83 1431,-170.83 1431,-170.83 1431,-182.83 1431,-182.83 1431,-188.83 1425,-194.83 1419,-194.83"/>
<text text-anchor="middle" x="1383.5" y="-173.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lease__expire</text>
</g>
<!-- Lease__expire_remote_lease -->
<g id="node2" class="node">
<title>Lease__expire_remote_lease</title>
<path fill="none" stroke="#1c2123" d="M1676,-194.83C1676,-194.83 1526,-194.83 1526,-194.83 1520,-194.83 1514,-188.83 1514,-182.83 1514,-182.83 1514,-170.83 1514,-170.83 1514,-164.83 1520,-158.83 1526,-158.83 1526,-158.83 1676,-158.83 1676,-158.83 1682,-158.83 1688,-164.83 1688,-170.83 1688,-170.83 1688,-182.83 1688,-182.83 1688,-188.83 1682,-194.83 1676,-194.83"/>
<text text-anchor="middle" x="1601" y="-173.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lease__expire_remote_lease</text>
</g>
<!-- Lease__expire&#45;&gt;Lease__expire_remote_lease -->
<g id="edge1" class="edge">
<title>Lease__expire&#45;&gt;Lease__expire_remote_lease</title>
<path fill="none" stroke="#666666" d="M1431.26,-176.83C1452.48,-176.83 1478.4,-176.83 1503.49,-176.83"/>
<polygon fill="#666666" stroke="#666666" points="1503.81,-180.33 1513.81,-176.83 1503.81,-173.33 1503.81,-180.33"/>
</g>
<!-- Lease__bound -->
<g id="node3" class="node">
<title>Lease__bound</title>
<path fill="#feed9b" stroke="#f7e495" d="M1515,-64.33C1515,-64.33 1687,-64.33 1687,-64.33 1693,-64.33 1699,-70.33 1699,-76.33 1699,-76.33 1699,-113.33 1699,-113.33 1699,-119.33 1693,-125.33 1687,-125.33 1687,-125.33 1515,-125.33 1515,-125.33 1509,-125.33 1503,-119.33 1503,-113.33 1503,-113.33 1503,-76.33 1503,-76.33 1503,-70.33 1509,-64.33 1515,-64.33"/>
<text text-anchor="start" x="1511" y="-110.13" font-family="Times,serif" font-size="14.00" fill="#40575d">Lease__bound</text>
<polyline fill="none" stroke="#f7e495" points="1503,-102.33 1699,-102.33 "/>
<text text-anchor="start" x="1511" y="-87.13" font-family="Times,serif" font-size="14.00" fill="#40575d">bound: Option&lt;</text>
<text text-anchor="start" x="1511" y="-72.13" font-family="Times,serif" font-size="14.00" fill="#40575d"> Either&lt;Timespec, Timespec&gt;&gt;,</text>
</g>
<!-- Lease__expire&#45;&gt;Lease__bound -->
<g id="edge2" class="edge">
<title>Lease__expire&#45;&gt;Lease__bound</title>
<path fill="none" stroke="#666666" d="M1431.4,-162.16C1443.09,-158.32 1455.55,-154.06 1467,-149.83 1484.1,-143.5 1502.27,-136.31 1519.49,-129.27"/>
<polygon fill="#666666" stroke="#666666" points="1521.04,-132.42 1528.95,-125.37 1518.37,-125.94 1521.04,-132.42"/>
</g>
<!-- RemoteLease__expire -->
<g id="node4" class="node">
<title>RemoteLease__expire</title>
<path fill="none" stroke="#1c2123" d="M1871.5,-210.83C1871.5,-210.83 1757.5,-210.83 1757.5,-210.83 1751.5,-210.83 1745.5,-204.83 1745.5,-198.83 1745.5,-198.83 1745.5,-186.83 1745.5,-186.83 1745.5,-180.83 1751.5,-174.83 1757.5,-174.83 1757.5,-174.83 1871.5,-174.83 1871.5,-174.83 1877.5,-174.83 1883.5,-180.83 1883.5,-186.83 1883.5,-186.83 1883.5,-198.83 1883.5,-198.83 1883.5,-204.83 1877.5,-210.83 1871.5,-210.83"/>
<text text-anchor="middle" x="1814.5" y="-189.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">RemoteLease__expire</text>
</g>
<!-- Lease__expire_remote_lease&#45;&gt;RemoteLease__expire -->
<g id="edge3" class="edge">
<title>Lease__expire_remote_lease&#45;&gt;RemoteLease__expire</title>
<path fill="none" stroke="#666666" d="M1688.03,-176.69C1703.69,-177.71 1719.96,-178.97 1735.38,-180.38"/>
<polygon fill="#666666" stroke="#666666" points="1735.1,-183.86 1745.38,-181.32 1735.75,-176.9 1735.1,-183.86"/>
</g>
<!-- Lease__expire_remote_lease&#45;&gt;RemoteLease__expire -->
<g id="edge17" class="edge">
<title>Lease__expire_remote_lease&#45;&gt;RemoteLease__expire</title>
<path fill="none" stroke="#666666" d="M1688.03,-189.98C1703.69,-191.33 1719.96,-192.53 1735.38,-193.46"/>
<polygon fill="#666666" stroke="#666666" points="1735.2,-196.95 1745.38,-194.03 1735.6,-189.96 1735.2,-196.95"/>
</g>
<!-- Lease__max_drift -->
<g id="node7" class="node">
<title>Lease__max_drift</title>
<path fill="none" stroke="#1c2123" d="M1942,-319.83C1942,-319.83 2034,-319.83 2034,-319.83 2040,-319.83 2046,-325.83 2046,-331.83 2046,-331.83 2046,-353.83 2046,-353.83 2046,-359.83 2040,-365.83 2034,-365.83 2034,-365.83 1942,-365.83 1942,-365.83 1936,-365.83 1930,-359.83 1930,-353.83 1930,-353.83 1930,-331.83 1930,-331.83 1930,-325.83 1936,-319.83 1942,-319.83"/>
<text text-anchor="middle" x="1988" y="-350.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lease__max_drift</text>
<polyline fill="none" stroke="#1c2123" points="1930,-342.83 2046,-342.83 "/>
<text text-anchor="start" x="1938" y="-327.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">是max_lease/3</text>
</g>
<!-- Lease__bound&#45;&gt;Lease__max_drift -->
<g id="edge8" class="edge">
<title>Lease__bound&#45;&gt;Lease__max_drift</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1645.08,-64.21C1706.3,-24.83 1819.29,32.21 1894,-23.83 1940.29,-58.55 1971.15,-234.78 1982.33,-309.39"/>
<polygon fill="green" stroke="green" points="1978.92,-310.25 1983.83,-319.63 1985.84,-309.23 1978.92,-310.25"/>
</g>
<!-- Either -->
<g id="node13" class="node">
<title>Either</title>
<path fill="none" stroke="#1c2123" d="M1747,-33.83C1747,-33.83 1882,-33.83 1882,-33.83 1888,-33.83 1894,-39.83 1894,-45.83 1894,-45.83 1894,-143.83 1894,-143.83 1894,-149.83 1888,-155.83 1882,-155.83 1882,-155.83 1747,-155.83 1747,-155.83 1741,-155.83 1735,-149.83 1735,-143.83 1735,-143.83 1735,-45.83 1735,-45.83 1735,-39.83 1741,-33.83 1747,-33.83"/>
<text text-anchor="middle" x="1814.5" y="-140.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">Either</text>
<polyline fill="none" stroke="#1c2123" points="1735,-132.83 1894,-132.83 "/>
<text text-anchor="start" x="1743" y="-117.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">Left(L),</text>
<polyline fill="none" stroke="#1c2123" points="1735,-109.83 1894,-109.83 "/>
<text text-anchor="start" x="1743" y="-94.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">Right(R),</text>
<polyline fill="none" stroke="#1c2123" points="1735,-86.83 1894,-86.83 "/>
<text text-anchor="start" x="1743" y="-71.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">Represents a value of</text>
<text text-anchor="start" x="1743" y="-56.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> one of two possible types</text>
<text text-anchor="start" x="1743" y="-41.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> (a more generic Result.)</text>
</g>
<!-- Lease__bound&#45;&gt;Either -->
<g id="edge15" class="edge">
<title>Lease__bound&#45;&gt;Either</title>
<path fill="none" stroke="#666666" d="M1699.08,-94.83C1707.58,-94.83 1716.14,-94.83 1724.56,-94.83"/>
<polygon fill="#666666" stroke="#666666" points="1724.75,-98.33 1734.75,-94.83 1724.75,-91.33 1724.75,-98.33"/>
</g>
<!-- Lease__renew -->
<g id="node5" class="node">
<title>Lease__renew</title>
<path fill="none" stroke="#1c2123" d="M1419,-386.83C1419,-386.83 1348,-386.83 1348,-386.83 1342,-386.83 1336,-380.83 1336,-374.83 1336,-374.83 1336,-362.83 1336,-362.83 1336,-356.83 1342,-350.83 1348,-350.83 1348,-350.83 1419,-350.83 1419,-350.83 1425,-350.83 1431,-356.83 1431,-362.83 1431,-362.83 1431,-374.83 1431,-374.83 1431,-380.83 1425,-386.83 1419,-386.83"/>
<text text-anchor="middle" x="1383.5" y="-365.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lease__renew</text>
</g>
<!-- Lease__next_expire_time -->
<g id="node6" class="node">
<title>Lease__next_expire_time</title>
<path fill="none" stroke="#1c2123" d="M1534.5,-293.83C1534.5,-293.83 1667.5,-293.83 1667.5,-293.83 1673.5,-293.83 1679.5,-299.83 1679.5,-305.83 1679.5,-305.83 1679.5,-327.83 1679.5,-327.83 1679.5,-333.83 1673.5,-339.83 1667.5,-339.83 1667.5,-339.83 1534.5,-339.83 1534.5,-339.83 1528.5,-339.83 1522.5,-333.83 1522.5,-327.83 1522.5,-327.83 1522.5,-305.83 1522.5,-305.83 1522.5,-299.83 1528.5,-293.83 1534.5,-293.83"/>
<text text-anchor="middle" x="1601" y="-324.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lease__next_expire_time</text>
<polyline fill="none" stroke="#1c2123" points="1522.5,-316.83 1679.5,-316.83 "/>
<text text-anchor="start" x="1530.5" y="-301.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_ts + self.max_lease</text>
</g>
<!-- Lease__renew&#45;&gt;Lease__next_expire_time -->
<g id="edge4" class="edge">
<title>Lease__renew&#45;&gt;Lease__next_expire_time</title>
<path fill="none" stroke="#666666" d="M1431.26,-357.54C1455.07,-351.8 1484.8,-344.63 1512.64,-337.91"/>
<polygon fill="#666666" stroke="#666666" points="1513.5,-341.3 1522.4,-335.55 1511.86,-334.49 1513.5,-341.3"/>
</g>
<!-- Lease__renew&#45;&gt;Lease__max_drift -->
<g id="edge5" class="edge">
<title>Lease__renew&#45;&gt;Lease__max_drift</title>
<path fill="none" stroke="#666666" d="M1431.28,-366.81C1537.37,-362.23 1796.57,-351.04 1919.8,-345.73"/>
<polygon fill="#666666" stroke="#666666" points="1920.02,-349.22 1929.86,-345.29 1919.72,-342.23 1920.02,-349.22"/>
</g>
<!-- Lease__last_update -->
<g id="node8" class="node">
<title>Lease__last_update</title>
<path fill="#feed9b" stroke="#f7e495" d="M1755,-397.83C1755,-397.83 1874,-397.83 1874,-397.83 1880,-397.83 1886,-403.83 1886,-409.83 1886,-409.83 1886,-431.83 1886,-431.83 1886,-437.83 1880,-443.83 1874,-443.83 1874,-443.83 1755,-443.83 1755,-443.83 1749,-443.83 1743,-437.83 1743,-431.83 1743,-431.83 1743,-409.83 1743,-409.83 1743,-403.83 1749,-397.83 1755,-397.83"/>
<text text-anchor="middle" x="1814.5" y="-428.63" font-family="Times,serif" font-size="14.00" fill="#40575d">Lease__last_update</text>
<polyline fill="none" stroke="#f7e495" points="1743,-420.83 1886,-420.83 "/>
<text text-anchor="start" x="1751" y="-405.63" font-family="Times,serif" font-size="14.00" fill="#40575d">last_update: Timespec,</text>
</g>
<!-- Lease__renew&#45;&gt;Lease__last_update -->
<g id="edge6" class="edge">
<title>Lease__renew&#45;&gt;Lease__last_update</title>
<path fill="none" stroke="#666666" d="M1431.23,-374.49C1503.58,-383.26 1643.63,-400.24 1732.64,-411.03"/>
<polygon fill="#666666" stroke="#666666" points="1732.35,-414.52 1742.7,-412.25 1733.19,-407.57 1732.35,-414.52"/>
</g>
<!-- Lease__max_lease -->
<g id="node9" class="node">
<title>Lease__max_lease</title>
<path fill="none" stroke="#1c2123" d="M1862,-337.83C1862,-337.83 1767,-337.83 1767,-337.83 1761,-337.83 1755,-331.83 1755,-325.83 1755,-325.83 1755,-313.83 1755,-313.83 1755,-307.83 1761,-301.83 1767,-301.83 1767,-301.83 1862,-301.83 1862,-301.83 1868,-301.83 1874,-307.83 1874,-313.83 1874,-313.83 1874,-325.83 1874,-325.83 1874,-331.83 1868,-337.83 1862,-337.83"/>
<text text-anchor="middle" x="1814.5" y="-316.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lease__max_lease</text>
</g>
<!-- Lease__next_expire_time&#45;&gt;Lease__max_lease -->
<g id="edge7" class="edge">
<title>Lease__next_expire_time&#45;&gt;Lease__max_lease</title>
<path fill="none" stroke="#666666" d="M1679.55,-317.93C1700.93,-318.23 1723.97,-318.56 1744.81,-318.85"/>
<polygon fill="#666666" stroke="#666666" points="1744.79,-322.35 1754.84,-319 1744.89,-315.35 1744.79,-322.35"/>
</g>
<!-- RemoteLease__renew -->
<g id="node10" class="node">
<title>RemoteLease__renew</title>
<path fill="none" stroke="#1c2123" d="M2207,-360.83C2207,-360.83 2094,-360.83 2094,-360.83 2088,-360.83 2082,-354.83 2082,-348.83 2082,-348.83 2082,-336.83 2082,-336.83 2082,-330.83 2088,-324.83 2094,-324.83 2094,-324.83 2207,-324.83 2207,-324.83 2213,-324.83 2219,-330.83 2219,-336.83 2219,-336.83 2219,-348.83 2219,-348.83 2219,-354.83 2213,-360.83 2207,-360.83"/>
<text text-anchor="middle" x="2150.5" y="-339.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">RemoteLease__renew</text>
</g>
<!-- Lease__max_drift&#45;&gt;RemoteLease__renew -->
<g id="edge10" class="edge">
<title>Lease__max_drift&#45;&gt;RemoteLease__renew</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M2046.04,-342.83C2054.39,-342.83 2063.11,-342.83 2071.8,-342.83"/>
<polygon fill="green" stroke="green" points="2071.94,-346.33 2081.94,-342.83 2071.94,-339.33 2071.94,-346.33"/>
</g>
<!-- Lease__last_update&#45;&gt;Lease__max_drift -->
<g id="edge9" class="edge">
<title>Lease__last_update&#45;&gt;Lease__max_drift</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1866.49,-397.64C1885.5,-388.99 1907.25,-379.1 1926.99,-370.12"/>
<polygon fill="green" stroke="green" points="1928.55,-373.26 1936.21,-365.93 1925.65,-366.88 1928.55,-373.26"/>
</g>
<!-- Lease__max_lease&#45;&gt;Lease__max_drift -->
<g id="edge16" class="edge">
<title>Lease__max_lease&#45;&gt;Lease__max_drift</title>
<path fill="none" stroke="#666666" d="M1874.04,-327.68C1888.71,-329.64 1904.55,-331.77 1919.61,-333.79"/>
<polygon fill="#666666" stroke="#666666" points="1919.51,-337.31 1929.88,-335.17 1920.44,-330.37 1919.51,-337.31"/>
</g>
<!-- Lease__suspect -->
<g id="node11" class="node">
<title>Lease__suspect</title>
<path fill="none" stroke="#1c2123" d="M1312,-213.33C1312,-213.33 1455,-213.33 1455,-213.33 1461,-213.33 1467,-219.33 1467,-225.33 1467,-225.33 1467,-262.33 1467,-262.33 1467,-268.33 1461,-274.33 1455,-274.33 1455,-274.33 1312,-274.33 1312,-274.33 1306,-274.33 1300,-268.33 1300,-262.33 1300,-262.33 1300,-225.33 1300,-225.33 1300,-219.33 1306,-213.33 1312,-213.33"/>
<text text-anchor="middle" x="1383.5" y="-259.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lease:::suspect</text>
<polyline fill="none" stroke="#1c2123" points="1300,-251.33 1467,-251.33 "/>
<text text-anchor="start" x="1308" y="-236.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.bound = </text>
<text text-anchor="start" x="1308" y="-221.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Some(Either::Left(bound))</text>
</g>
<!-- Lease__suspect&#45;&gt;Lease__expire_remote_lease -->
<g id="edge11" class="edge">
<title>Lease__suspect&#45;&gt;Lease__expire_remote_lease</title>
<path fill="none" stroke="#666666" d="M1467.19,-215.28C1479.17,-211.33 1491.38,-207.4 1503,-203.83 1509.57,-201.81 1516.4,-199.77 1523.27,-197.77"/>
<polygon fill="#666666" stroke="#666666" points="1524.69,-201 1533.33,-194.87 1522.75,-194.28 1524.69,-201"/>
</g>
<!-- Lease__suspect&#45;&gt;Lease__bound -->
<g id="edge12" class="edge">
<title>Lease__suspect&#45;&gt;Lease__bound</title>
<path fill="none" stroke="#666666" d="M1454.64,-213.23C1458.99,-210.31 1463.16,-207.17 1467,-203.83 1488.74,-184.87 1481.88,-169.47 1503,-149.83 1510.34,-143 1518.67,-136.69 1527.3,-130.96"/>
<polygon fill="#666666" stroke="#666666" points="1529.44,-133.75 1536,-125.43 1525.68,-127.84 1529.44,-133.75"/>
</g>
<!-- Lease__suspect&#45;&gt;Lease__next_expire_time -->
<g id="edge13" class="edge">
<title>Lease__suspect&#45;&gt;Lease__next_expire_time</title>
<path fill="none" stroke="#666666" d="M1467.2,-271.84C1485.23,-277.95 1504.25,-284.39 1522.08,-290.43"/>
<polygon fill="#666666" stroke="#666666" points="1521.26,-293.85 1531.85,-293.74 1523.5,-287.22 1521.26,-293.85"/>
</g>
<!-- Either__Left -->
<g id="node12" class="node">
<title>Either__Left</title>
<path fill="none" stroke="#1c2123" d="M1550.5,-213.33C1550.5,-213.33 1651.5,-213.33 1651.5,-213.33 1657.5,-213.33 1663.5,-219.33 1663.5,-225.33 1663.5,-225.33 1663.5,-262.33 1663.5,-262.33 1663.5,-268.33 1657.5,-274.33 1651.5,-274.33 1651.5,-274.33 1550.5,-274.33 1550.5,-274.33 1544.5,-274.33 1538.5,-268.33 1538.5,-262.33 1538.5,-262.33 1538.5,-225.33 1538.5,-225.33 1538.5,-219.33 1544.5,-213.33 1550.5,-213.33"/>
<text text-anchor="middle" x="1601" y="-259.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Either__Left</text>
<polyline fill="none" stroke="#1c2123" points="1538.5,-251.33 1663.5,-251.33 "/>
<text text-anchor="start" x="1546.5" y="-236.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">将bound值 设置为</text>
<text text-anchor="start" x="1546.5" y="-221.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Either::Left</text>
</g>
<!-- Lease__suspect&#45;&gt;Either__Left -->
<g id="edge14" class="edge">
<title>Lease__suspect&#45;&gt;Either__Left</title>
<path fill="none" stroke="#666666" d="M1467.2,-243.83C1487.32,-243.83 1508.66,-243.83 1528.22,-243.83"/>
<polygon fill="#666666" stroke="#666666" points="1528.27,-247.33 1538.27,-243.83 1528.27,-240.33 1528.27,-247.33"/>
</g>
<!-- Peer__on_leader_commit_idx_changed -->
<g id="node14" class="node">
<title>Peer__on_leader_commit_idx_changed</title>
<path fill="none" stroke="#1c2123" d="M1077,-255.33C1077,-255.33 1252,-255.33 1252,-255.33 1258,-255.33 1264,-261.33 1264,-267.33 1264,-267.33 1264,-364.33 1264,-364.33 1264,-370.33 1258,-376.33 1252,-376.33 1252,-376.33 1077,-376.33 1077,-376.33 1071,-376.33 1065,-370.33 1065,-364.33 1065,-364.33 1065,-267.33 1065,-267.33 1065,-261.33 1071,-255.33 1077,-255.33"/>
<text text-anchor="start" x="1073" y="-361.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="1073" y="-346.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> on_leader_commit_idx_changed</text>
<polyline fill="none" stroke="#1c2123" points="1065,-338.33 1264,-338.33 "/>
<text text-anchor="start" x="1073" y="-323.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理PrepareMerge</text>
<text text-anchor="start" x="1073" y="-308.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> leader不知道target</text>
<text text-anchor="start" x="1073" y="-293.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> merge进度</text>
<text text-anchor="start" x="1073" y="-278.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> prevent unsafe</text>
<text text-anchor="start" x="1073" y="-263.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> local read</text>
</g>
<!-- Peer__on_leader_commit_idx_changed&#45;&gt;Lease__suspect -->
<g id="edge18" class="edge">
<title>Peer__on_leader_commit_idx_changed&#45;&gt;Lease__suspect</title>
<path fill="none" stroke="#666666" d="M1264.16,-283.09C1272.86,-280.2 1281.65,-277.29 1290.3,-274.42"/>
<polygon fill="#666666" stroke="#666666" points="1291.6,-277.67 1299.99,-271.2 1289.4,-271.03 1291.6,-277.67"/>
</g>
<!-- Peer__send_MsgTimeoutNow -->
<g id="node15" class="node">
<title>Peer__send_MsgTimeoutNow</title>
<path fill="none" stroke="#1c2123" d="M1091.5,-145.33C1091.5,-145.33 1237.5,-145.33 1237.5,-145.33 1243.5,-145.33 1249.5,-151.33 1249.5,-157.33 1249.5,-157.33 1249.5,-224.33 1249.5,-224.33 1249.5,-230.33 1243.5,-236.33 1237.5,-236.33 1237.5,-236.33 1091.5,-236.33 1091.5,-236.33 1085.5,-236.33 1079.5,-230.33 1079.5,-224.33 1079.5,-224.33 1079.5,-157.33 1079.5,-157.33 1079.5,-151.33 1085.5,-145.33 1091.5,-145.33"/>
<text text-anchor="middle" x="1164.5" y="-221.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer::send</text>
<polyline fill="none" stroke="#1c2123" points="1079.5,-213.33 1249.5,-213.33 "/>
<text text-anchor="start" x="1087.5" y="-198.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果发送的消息为</text>
<text text-anchor="start" x="1087.5" y="-183.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> MsgTimeoutNow</text>
<text text-anchor="start" x="1087.5" y="-168.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 说明开始了leader transfer</text>
<text text-anchor="start" x="1087.5" y="-153.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 则调用Lease::suspect</text>
</g>
<!-- Peer__send_MsgTimeoutNow&#45;&gt;Lease__suspect -->
<g id="edge19" class="edge">
<title>Peer__send_MsgTimeoutNow&#45;&gt;Lease__suspect</title>
<path fill="none" stroke="#666666" d="M1249.71,-211.39C1262.81,-214.59 1276.41,-217.92 1289.69,-221.16"/>
<polygon fill="#666666" stroke="#666666" points="1289.22,-224.65 1299.77,-223.62 1290.88,-217.85 1289.22,-224.65"/>
</g>
<!-- Peer__step_MsgReadIndex -->
<g id="node16" class="node">
<title>Peer__step_MsgReadIndex</title>
<path fill="none" stroke="#1c2123" d="M986.5,-99.83C986.5,-99.83 844.5,-99.83 844.5,-99.83 838.5,-99.83 832.5,-93.83 832.5,-87.83 832.5,-87.83 832.5,-75.83 832.5,-75.83 832.5,-69.83 838.5,-63.83 844.5,-63.83 844.5,-63.83 986.5,-63.83 986.5,-63.83 992.5,-63.83 998.5,-69.83 998.5,-75.83 998.5,-75.83 998.5,-87.83 998.5,-87.83 998.5,-93.83 992.5,-99.83 986.5,-99.83"/>
<text text-anchor="middle" x="915.5" y="-78.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer__step_MsgReadIndex</text>
</g>
<!-- Store__commit_index -->
<g id="node17" class="node">
<title>Store__commit_index</title>
<path fill="none" stroke="#1c2123" d="M1221.5,-59.83C1221.5,-59.83 1107.5,-59.83 1107.5,-59.83 1101.5,-59.83 1095.5,-53.83 1095.5,-47.83 1095.5,-47.83 1095.5,-35.83 1095.5,-35.83 1095.5,-29.83 1101.5,-23.83 1107.5,-23.83 1107.5,-23.83 1221.5,-23.83 1221.5,-23.83 1227.5,-23.83 1233.5,-29.83 1233.5,-35.83 1233.5,-35.83 1233.5,-47.83 1233.5,-47.83 1233.5,-53.83 1227.5,-59.83 1221.5,-59.83"/>
<text text-anchor="middle" x="1164.5" y="-38.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Store__commit_index</text>
</g>
<!-- Peer__step_MsgReadIndex&#45;&gt;Store__commit_index -->
<g id="edge20" class="edge">
<title>Peer__step_MsgReadIndex&#45;&gt;Store__commit_index</title>
<path fill="none" stroke="#666666" d="M998.75,-68.51C1026.62,-63.99 1057.66,-58.97 1085.21,-54.5"/>
<polygon fill="#666666" stroke="#666666" points="1085.88,-57.94 1095.2,-52.89 1084.77,-51.03 1085.88,-57.94"/>
</g>
<!-- Peer__inspect_lease -->
<g id="node18" class="node">
<title>Peer__inspect_lease</title>
<path fill="none" stroke="#1c2123" d="M1215.5,-113.83C1215.5,-113.83 1113.5,-113.83 1113.5,-113.83 1107.5,-113.83 1101.5,-107.83 1101.5,-101.83 1101.5,-101.83 1101.5,-89.83 1101.5,-89.83 1101.5,-83.83 1107.5,-77.83 1113.5,-77.83 1113.5,-77.83 1215.5,-77.83 1215.5,-77.83 1221.5,-77.83 1227.5,-83.83 1227.5,-89.83 1227.5,-89.83 1227.5,-101.83 1227.5,-101.83 1227.5,-107.83 1221.5,-113.83 1215.5,-113.83"/>
<text text-anchor="middle" x="1164.5" y="-92.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer__inspect_lease</text>
</g>
<!-- Peer__step_MsgReadIndex&#45;&gt;Peer__inspect_lease -->
<g id="edge21" class="edge">
<title>Peer__step_MsgReadIndex&#45;&gt;Peer__inspect_lease</title>
<path fill="none" stroke="#666666" d="M998.75,-86.49C1028.62,-88.18 1062.14,-90.08 1091.11,-91.72"/>
<polygon fill="#666666" stroke="#666666" points="1090.96,-95.22 1101.15,-92.29 1091.36,-88.23 1090.96,-95.22"/>
</g>
<!-- Lease__inspect -->
<g id="node29" class="node">
<title>Lease__inspect</title>
<path fill="none" stroke="#1c2123" d="M1421.5,-86.83C1421.5,-86.83 1345.5,-86.83 1345.5,-86.83 1339.5,-86.83 1333.5,-80.83 1333.5,-74.83 1333.5,-74.83 1333.5,-62.83 1333.5,-62.83 1333.5,-56.83 1339.5,-50.83 1345.5,-50.83 1345.5,-50.83 1421.5,-50.83 1421.5,-50.83 1427.5,-50.83 1433.5,-56.83 1433.5,-62.83 1433.5,-62.83 1433.5,-74.83 1433.5,-74.83 1433.5,-80.83 1427.5,-86.83 1421.5,-86.83"/>
<text text-anchor="middle" x="1383.5" y="-65.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lease__inspect</text>
</g>
<!-- Peer__inspect_lease&#45;&gt;Lease__inspect -->
<g id="edge36" class="edge">
<title>Peer__inspect_lease&#45;&gt;Lease__inspect</title>
<path fill="none" stroke="#666666" d="M1227.68,-88.09C1257.71,-84.35 1293.56,-79.89 1323.19,-76.21"/>
<polygon fill="#666666" stroke="#666666" points="1323.91,-79.64 1333.4,-74.94 1323.04,-72.7 1323.91,-79.64"/>
</g>
<!-- Raft__in_lease -->
<g id="node30" class="node">
<title>Raft__in_lease</title>
<path fill="none" stroke="#1c2123" d="M1420.5,-140.83C1420.5,-140.83 1346.5,-140.83 1346.5,-140.83 1340.5,-140.83 1334.5,-134.83 1334.5,-128.83 1334.5,-128.83 1334.5,-116.83 1334.5,-116.83 1334.5,-110.83 1340.5,-104.83 1346.5,-104.83 1346.5,-104.83 1420.5,-104.83 1420.5,-104.83 1426.5,-104.83 1432.5,-110.83 1432.5,-116.83 1432.5,-116.83 1432.5,-128.83 1432.5,-128.83 1432.5,-134.83 1426.5,-140.83 1420.5,-140.83"/>
<text text-anchor="middle" x="1383.5" y="-119.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Raft__in_lease</text>
</g>
<!-- Peer__inspect_lease&#45;&gt;Raft__in_lease -->
<g id="edge37" class="edge">
<title>Peer__inspect_lease&#45;&gt;Raft__in_lease</title>
<path fill="none" stroke="#666666" d="M1227.68,-103.56C1258.04,-107.34 1294.36,-111.86 1324.19,-115.57"/>
<polygon fill="#666666" stroke="#666666" points="1324.09,-119.09 1334.45,-116.85 1324.96,-112.14 1324.09,-119.09"/>
</g>
<!-- Peer__handle_raft_ready_advance -->
<g id="node19" class="node">
<title>Peer__handle_raft_ready_advance</title>
<path fill="none" stroke="#1c2123" d="M842.5,-281.83C842.5,-281.83 988.5,-281.83 988.5,-281.83 994.5,-281.83 1000.5,-287.83 1000.5,-293.83 1000.5,-293.83 1000.5,-337.83 1000.5,-337.83 1000.5,-343.83 994.5,-349.83 988.5,-349.83 988.5,-349.83 842.5,-349.83 842.5,-349.83 836.5,-349.83 830.5,-343.83 830.5,-337.83 830.5,-337.83 830.5,-293.83 830.5,-293.83 830.5,-287.83 836.5,-281.83 842.5,-281.83"/>
<text text-anchor="start" x="838.5" y="-334.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="838.5" y="-319.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_ready_advance</text>
<text text-anchor="start" x="838.5" y="-304.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用raft ready</text>
<text text-anchor="start" x="838.5" y="-289.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 处理里面的messages</text>
</g>
<!-- Peer__handle_raft_ready_advance&#45;&gt;Peer__on_leader_commit_idx_changed -->
<g id="edge22" class="edge">
<title>Peer__handle_raft_ready_advance&#45;&gt;Peer__on_leader_commit_idx_changed</title>
<path fill="none" stroke="#666666" d="M1000.81,-315.83C1018.07,-315.83 1036.46,-315.83 1054.44,-315.83"/>
<polygon fill="#666666" stroke="#666666" points="1054.67,-319.33 1064.67,-315.83 1054.67,-312.33 1054.67,-319.33"/>
</g>
<!-- Peer__handle_raft_ready_advance&#45;&gt;Peer__send_MsgTimeoutNow -->
<g id="edge23" class="edge">
<title>Peer__handle_raft_ready_advance&#45;&gt;Peer__send_MsgTimeoutNow</title>
<path fill="none" stroke="#666666" d="M1000.62,-286.66C1010.37,-282.41 1020.03,-277.78 1029,-272.83 1046.51,-263.16 1048.23,-256.73 1065,-245.83 1067.12,-244.45 1069.28,-243.07 1071.46,-241.7"/>
<polygon fill="#666666" stroke="#666666" points="1073.34,-244.65 1080,-236.41 1069.65,-238.7 1073.34,-244.65"/>
</g>
<!-- Peer__handle_raft_ready_append -->
<g id="node20" class="node">
<title>Peer__handle_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M814,-118.83C814,-118.83 1017,-118.83 1017,-118.83 1023,-118.83 1029,-124.83 1029,-130.83 1029,-130.83 1029,-250.83 1029,-250.83 1029,-256.83 1023,-262.83 1017,-262.83 1017,-262.83 814,-262.83 814,-262.83 808,-262.83 802,-256.83 802,-250.83 802,-250.83 802,-130.83 802,-130.83 802,-124.83 808,-118.83 814,-118.83"/>
<text text-anchor="start" x="810" y="-247.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="810" y="-232.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_ready_append</text>
<polyline fill="none" stroke="#1c2123" points="802,-224.83 1029,-224.83 "/>
<text text-anchor="start" x="810" y="-209.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">调用raft ready</text>
<text text-anchor="start" x="810" y="-194.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 处理里面的messages</text>
<polyline fill="none" stroke="#1c2123" points="802,-186.83 1029,-186.83 "/>
<text text-anchor="start" x="810" y="-171.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果ready.hs不为None</text>
<text text-anchor="start" x="810" y="-156.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发生了变化</text>
<text text-anchor="start" x="810" y="-141.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 并且自己是leader</text>
<text text-anchor="start" x="810" y="-126.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用on_leader_commit_idx_changed</text>
</g>
<!-- Peer__handle_raft_ready_append&#45;&gt;Peer__on_leader_commit_idx_changed -->
<g id="edge24" class="edge">
<title>Peer__handle_raft_ready_append&#45;&gt;Peer__on_leader_commit_idx_changed</title>
<path fill="none" stroke="#666666" d="M1029.16,-247.84C1038.03,-252.33 1046.99,-256.86 1055.83,-261.34"/>
<polygon fill="#666666" stroke="#666666" points="1054.49,-264.58 1064.99,-265.98 1057.65,-258.34 1054.49,-264.58"/>
</g>
<!-- Peer__handle_raft_ready_append&#45;&gt;Peer__send_MsgTimeoutNow -->
<g id="edge25" class="edge">
<title>Peer__handle_raft_ready_append&#45;&gt;Peer__send_MsgTimeoutNow</title>
<path fill="none" stroke="#666666" d="M1029.16,-190.83C1042.51,-190.83 1056.03,-190.83 1069.1,-190.83"/>
<polygon fill="#666666" stroke="#666666" points="1069.46,-194.33 1079.46,-190.83 1069.46,-187.33 1069.46,-194.33"/>
</g>
<!-- PeerFsmDelegate__collect_ready -->
<g id="node21" class="node">
<title>PeerFsmDelegate__collect_ready</title>
<path fill="none" stroke="#1c2123" d="M426,-160.33C426,-160.33 515,-160.33 515,-160.33 521,-160.33 527,-166.33 527,-172.33 527,-172.33 527,-209.33 527,-209.33 527,-215.33 521,-221.33 515,-221.33 515,-221.33 426,-221.33 426,-221.33 420,-221.33 414,-215.33 414,-209.33 414,-209.33 414,-172.33 414,-172.33 414,-166.33 420,-160.33 426,-160.33"/>
<text text-anchor="start" x="422" y="-206.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate</text>
<text text-anchor="start" x="422" y="-191.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> collect_ready</text>
<polyline fill="none" stroke="#1c2123" points="414,-183.33 527,-183.33 "/>
<text text-anchor="start" x="422" y="-168.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理raft ready</text>
</g>
<!-- PeerFsmDelegate__collect_ready&#45;&gt;Peer__handle_raft_ready_append -->
<g id="edge26" class="edge">
<title>PeerFsmDelegate__collect_ready&#45;&gt;Peer__handle_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M527.16,-190.83C593.1,-190.83 704.93,-190.83 791.52,-190.83"/>
<polygon fill="#666666" stroke="#666666" points="791.69,-194.33 801.69,-190.83 791.69,-187.33 791.69,-194.33"/>
</g>
<!-- PeerFsmDelegate__post_raft_ready_append -->
<g id="node22" class="node">
<title>PeerFsmDelegate__post_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M617,-254.83C617,-254.83 754,-254.83 754,-254.83 760,-254.83 766,-260.83 766,-266.83 766,-266.83 766,-340.83 766,-340.83 766,-346.83 760,-352.83 754,-352.83 754,-352.83 617,-352.83 617,-352.83 611,-352.83 605,-346.83 605,-340.83 605,-340.83 605,-266.83 605,-266.83 605,-260.83 611,-254.83 617,-254.83"/>
<text text-anchor="start" x="613" y="-337.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate</text>
<text text-anchor="start" x="613" y="-322.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> post_raft_ready_append</text>
<text text-anchor="start" x="613" y="-307.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> raft state</text>
<text text-anchor="start" x="613" y="-292.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 日志保存完毕后</text>
<text text-anchor="start" x="613" y="-277.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 开始发送消息</text>
<text text-anchor="start" x="613" y="-262.63" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用raft group的advance</text>
</g>
<!-- PeerFsmDelegate__post_raft_ready_append&#45;&gt;Peer__handle_raft_ready_advance -->
<g id="edge27" class="edge">
<title>PeerFsmDelegate__post_raft_ready_append&#45;&gt;Peer__handle_raft_ready_advance</title>
<path fill="none" stroke="#666666" d="M766.24,-308.02C783.53,-308.93 801.97,-309.9 819.76,-310.84"/>
<polygon fill="#666666" stroke="#666666" points="819.98,-314.36 830.15,-311.39 820.35,-307.37 819.98,-314.36"/>
</g>
<!-- RaftPoller__end -->
<g id="node23" class="node">
<title>RaftPoller__end</title>
<path fill="none" stroke="#1c2123" d="M185,-254.83C185,-254.83 324,-254.83 324,-254.83 330,-254.83 336,-260.83 336,-266.83 336,-266.83 336,-288.83 336,-288.83 336,-294.83 330,-300.83 324,-300.83 324,-300.83 185,-300.83 185,-300.83 179,-300.83 173,-294.83 173,-288.83 173,-288.83 173,-266.83 173,-266.83 173,-260.83 179,-254.83 185,-254.83"/>
<text text-anchor="middle" x="254.5" y="-285.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftPoller::end</text>
<polyline fill="none" stroke="#1c2123" points="173,-277.83 336,-277.83 "/>
<text text-anchor="middle" x="254.5" y="-262.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">Poller处理完一批消息后</text>
</g>
<!-- RaftPoller__handle_raft_ready -->
<g id="node24" class="node">
<title>RaftPoller__handle_raft_ready</title>
<path fill="none" stroke="#1c2123" d="M410,-262.33C410,-262.33 531,-262.33 531,-262.33 537,-262.33 543,-268.33 543,-274.33 543,-274.33 543,-311.33 543,-311.33 543,-317.33 537,-323.33 531,-323.33 531,-323.33 410,-323.33 410,-323.33 404,-323.33 398,-317.33 398,-311.33 398,-311.33 398,-274.33 398,-274.33 398,-268.33 404,-262.33 410,-262.33"/>
<text text-anchor="start" x="406" y="-308.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftPoller</text>
<text text-anchor="start" x="406" y="-293.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_ready</text>
<polyline fill="none" stroke="#1c2123" points="398,-285.33 543,-285.33 "/>
<text text-anchor="start" x="406" y="-270.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">将writebatch写入磁盘</text>
</g>
<!-- RaftPoller__end&#45;&gt;RaftPoller__handle_raft_ready -->
<g id="edge28" class="edge">
<title>RaftPoller__end&#45;&gt;RaftPoller__handle_raft_ready</title>
<path fill="none" stroke="#666666" d="M336.1,-283.48C352.88,-284.65 370.58,-285.89 387.41,-287.07"/>
<polygon fill="#666666" stroke="#666666" points="387.54,-290.59 397.76,-287.8 388.03,-283.61 387.54,-290.59"/>
</g>
<!-- RaftPoller__handle_raft_ready&#45;&gt;PeerFsmDelegate__post_raft_ready_append -->
<g id="edge29" class="edge">
<title>RaftPoller__handle_raft_ready&#45;&gt;PeerFsmDelegate__post_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M543.02,-296.52C559.59,-297.38 577.43,-298.3 594.67,-299.19"/>
<polygon fill="#666666" stroke="#666666" points="594.57,-302.69 604.74,-299.71 594.93,-295.7 594.57,-302.69"/>
</g>
<!-- RaftPoller__handle_normal -->
<g id="node25" class="node">
<title>RaftPoller__handle_normal</title>
<path fill="none" stroke="#1c2123" d="M210,-160.33C210,-160.33 299,-160.33 299,-160.33 305,-160.33 311,-166.33 311,-172.33 311,-172.33 311,-209.33 311,-209.33 311,-215.33 305,-221.33 299,-221.33 299,-221.33 210,-221.33 210,-221.33 204,-221.33 198,-215.33 198,-209.33 198,-209.33 198,-172.33 198,-172.33 198,-166.33 204,-160.33 210,-160.33"/>
<text text-anchor="start" x="206" y="-206.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftPoller</text>
<text text-anchor="start" x="206" y="-191.13" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_normal</text>
<polyline fill="none" stroke="#1c2123" points="198,-183.33 311,-183.33 "/>
<text text-anchor="start" x="206" y="-168.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理normal消息</text>
</g>
<!-- RaftPoller__handle_normal&#45;&gt;PeerFsmDelegate__collect_ready -->
<g id="edge30" class="edge">
<title>RaftPoller__handle_normal&#45;&gt;PeerFsmDelegate__collect_ready</title>
<path fill="none" stroke="#666666" d="M311.17,-190.83C339.42,-190.83 373.92,-190.83 403.5,-190.83"/>
<polygon fill="#666666" stroke="#666666" points="403.74,-194.33 413.74,-190.83 403.74,-187.33 403.74,-194.33"/>
</g>
<!-- PeerFsmDelegate__handle_msgs -->
<g id="node26" class="node">
<title>PeerFsmDelegate__handle_msgs</title>
<path fill="none" stroke="#1c2123" d="M557,-131.83C557,-131.83 384,-131.83 384,-131.83 378,-131.83 372,-125.83 372,-119.83 372,-119.83 372,-107.83 372,-107.83 372,-101.83 378,-95.83 384,-95.83 384,-95.83 557,-95.83 557,-95.83 563,-95.83 569,-101.83 569,-107.83 569,-107.83 569,-119.83 569,-119.83 569,-125.83 563,-131.83 557,-131.83"/>
<text text-anchor="middle" x="470.5" y="-110.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate__handle_msgs</text>
</g>
<!-- RaftPoller__handle_normal&#45;&gt;PeerFsmDelegate__handle_msgs -->
<g id="edge31" class="edge">
<title>RaftPoller__handle_normal&#45;&gt;PeerFsmDelegate__handle_msgs</title>
<path fill="none" stroke="#666666" d="M311.17,-170.8C341.34,-159.94 378.65,-146.52 409.47,-135.43"/>
<polygon fill="#666666" stroke="#666666" points="411.01,-138.59 419.23,-131.91 408.64,-132.01 411.01,-138.59"/>
</g>
<!-- Peer__on_raft_message -->
<g id="node28" class="node">
<title>Peer__on_raft_message</title>
<path fill="none" stroke="#1c2123" d="M746.5,-120.83C746.5,-120.83 624.5,-120.83 624.5,-120.83 618.5,-120.83 612.5,-114.83 612.5,-108.83 612.5,-108.83 612.5,-96.83 612.5,-96.83 612.5,-90.83 618.5,-84.83 624.5,-84.83 624.5,-84.83 746.5,-84.83 746.5,-84.83 752.5,-84.83 758.5,-90.83 758.5,-96.83 758.5,-96.83 758.5,-108.83 758.5,-108.83 758.5,-114.83 752.5,-120.83 746.5,-120.83"/>
<text text-anchor="middle" x="685.5" y="-99.13" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer__on_raft_message</text>
</g>
<!-- PeerFsmDelegate__handle_msgs&#45;&gt;Peer__on_raft_message -->
<g id="edge34" class="edge">
<title>PeerFsmDelegate__handle_msgs&#45;&gt;Peer__on_raft_message</title>
<path fill="none" stroke="#666666" d="M569.27,-108.78C580.3,-108.21 591.44,-107.63 602.24,-107.08"/>
<polygon fill="#666666" stroke="#666666" points="602.66,-110.56 612.47,-106.55 602.3,-103.57 602.66,-110.56"/>
</g>
<!-- PollHandler_poll -->
<g id="node27" class="node">
<title>PollHandler_poll</title>
<path fill="none" stroke="#1c2123" d="M12,-203.83C12,-203.83 125,-203.83 125,-203.83 131,-203.83 137,-209.83 137,-215.83 137,-215.83 137,-237.83 137,-237.83 137,-243.83 131,-249.83 125,-249.83 125,-249.83 12,-249.83 12,-249.83 6,-249.83 0,-243.83 0,-237.83 0,-237.83 0,-215.83 0,-215.83 0,-209.83 6,-203.83 12,-203.83"/>
<text text-anchor="middle" x="68.5" y="-234.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollHandler::poll</text>
<polyline fill="none" stroke="#1c2123" points="0,-226.83 137,-226.83 "/>
<text text-anchor="start" x="8" y="-211.63" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftPoll 线程主循环</text>
</g>
<!-- PollHandler_poll&#45;&gt;RaftPoller__end -->
<g id="edge32" class="edge">
<title>PollHandler_poll&#45;&gt;RaftPoller__end</title>
<path fill="none" stroke="#666666" d="M137.23,-245.6C145.64,-247.93 154.35,-250.34 163.03,-252.75"/>
<polygon fill="#666666" stroke="#666666" points="162.25,-256.17 172.82,-255.46 164.12,-249.42 162.25,-256.17"/>
</g>
<!-- PollHandler_poll&#45;&gt;RaftPoller__handle_normal -->
<g id="edge33" class="edge">
<title>PollHandler_poll&#45;&gt;RaftPoller__handle_normal</title>
<path fill="none" stroke="#666666" d="M137.23,-213.58C153.78,-210.34 171.45,-206.88 187.9,-203.66"/>
<polygon fill="#666666" stroke="#666666" points="188.82,-207.05 197.96,-201.69 187.47,-200.18 188.82,-207.05"/>
</g>
<!-- Peer__on_raft_message&#45;&gt;Peer__step_MsgReadIndex -->
<g id="edge35" class="edge">
<title>Peer__on_raft_message&#45;&gt;Peer__step_MsgReadIndex</title>
<path fill="none" stroke="#666666" d="M758.64,-96.18C778.8,-94.33 800.99,-92.28 822.14,-90.33"/>
<polygon fill="#666666" stroke="#666666" points="822.47,-93.82 832.11,-89.42 821.83,-86.85 822.47,-93.82"/>
</g>
<!-- Lease__inspect&#45;&gt;Lease__bound -->
<g id="edge38" class="edge">
<title>Lease__inspect&#45;&gt;Lease__bound</title>
<path fill="none" stroke="#666666" d="M1433.67,-74.76C1451.28,-76.88 1471.9,-79.37 1492.5,-81.86"/>
<polygon fill="#666666" stroke="#666666" points="1492.26,-85.35 1502.6,-83.08 1493.09,-78.4 1492.26,-85.35"/>
</g>
</g>
</svg>
