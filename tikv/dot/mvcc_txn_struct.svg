<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: MvccTxn Pages: 1 -->
<svg width="1286pt" height="274pt"
 viewBox="0.00 0.00 1286.00 273.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 269.5)">
<title>MvccTxn</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-269.5 1282,-269.5 1282,4 -4,4"/>
<!-- MvccTxn -->
<g id="node1" class="node">
<title>MvccTxn</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M12,-15.5C12,-15.5 314,-15.5 314,-15.5 320,-15.5 326,-21.5 326,-27.5 326,-27.5 326,-210.5 326,-210.5 326,-216.5 320,-222.5 314,-222.5 314,-222.5 12,-222.5 12,-222.5 6,-222.5 0,-216.5 0,-210.5 0,-210.5 0,-27.5 0,-27.5 0,-21.5 6,-15.5 12,-15.5"/>
<text text-anchor="middle" x="163" y="-207.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">MvccTxn</text>
<polyline fill="none" stroke="#60b5ac" points="0,-199.5 326,-199.5 "/>
<text text-anchor="start" x="8" y="-184.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) reader: MvccReader&lt;S&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-176.5 326,-176.5 "/>
<text text-anchor="start" x="8" y="-161.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) start_ts: TimeStamp,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-153.5 326,-153.5 "/>
<text text-anchor="start" x="8" y="-138.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) write_size: usize,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-130.5 326,-130.5 "/>
<text text-anchor="start" x="8" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) modifies: Vec&lt;Modify&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-107.5 326,-107.5 "/>
<text text-anchor="start" x="8" y="-92.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) locks_for_1pc: Vec&lt;(Key, Lock, bool)&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-84.5 326,-84.5 "/>
<text text-anchor="start" x="8" y="-69.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) collapse_rollback: bool,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-61.5 326,-61.5 "/>
<text text-anchor="start" x="8" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) concurrency_manager: ConcurrencyManager,</text>
<polyline fill="none" stroke="#60b5ac" points="0,-38.5 326,-38.5 "/>
<text text-anchor="start" x="8" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) guards: Vec&lt;KeyHandleGuard&gt;,</text>
</g>
<!-- Modify -->
<g id="node2" class="node">
<title>Modify</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M374,-173C374,-173 586,-173 586,-173 592,-173 598,-179 598,-185 598,-185 598,-253 598,-253 598,-259 592,-265 586,-265 586,-265 374,-265 374,-265 368,-265 362,-259 362,-253 362,-253 362,-185 362,-185 362,-179 368,-173 374,-173"/>
<text text-anchor="middle" x="480" y="-249.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Modify</text>
<polyline fill="none" stroke="#60b5ac" points="362,-242 598,-242 "/>
<text text-anchor="start" x="370" y="-226.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Delete(CfName, Key),</text>
<polyline fill="none" stroke="#60b5ac" points="362,-219 598,-219 "/>
<text text-anchor="start" x="370" y="-203.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Put(CfName, Key, Value),</text>
<polyline fill="none" stroke="#60b5ac" points="362,-196 598,-196 "/>
<text text-anchor="start" x="370" y="-180.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">DeleteRange(CfName, Key, Key, bool),</text>
</g>
<!-- MvccTxn&#45;&gt;Modify -->
<g id="edge1" class="edge">
<title>MvccTxn&#45;&gt;Modify</title>
<path fill="none" stroke="#666666" d="M326.11,-170.46C334.88,-173.25 343.62,-176.02 352.23,-178.76"/>
<polygon fill="#666666" stroke="#666666" points="351.31,-182.14 361.9,-181.83 353.43,-175.46 351.31,-182.14"/>
</g>
<!-- ConcurrencyManager -->
<g id="node3" class="node">
<title>ConcurrencyManager</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M408,-84.5C408,-84.5 552,-84.5 552,-84.5 558,-84.5 564,-90.5 564,-96.5 564,-96.5 564,-141.5 564,-141.5 564,-147.5 558,-153.5 552,-153.5 552,-153.5 408,-153.5 408,-153.5 402,-153.5 396,-147.5 396,-141.5 396,-141.5 396,-96.5 396,-96.5 396,-90.5 402,-84.5 408,-84.5"/>
<text text-anchor="middle" x="480" y="-138.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ConcurrencyManager</text>
<polyline fill="none" stroke="#60b5ac" points="396,-130.5 564,-130.5 "/>
<text text-anchor="start" x="404" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">max_ts: Arc&lt;AtomicU64&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="396,-107.5 564,-107.5 "/>
<text text-anchor="start" x="404" y="-92.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">lock_table: LockTable,</text>
</g>
<!-- MvccTxn&#45;&gt;ConcurrencyManager -->
<g id="edge2" class="edge">
<title>MvccTxn&#45;&gt;ConcurrencyManager</title>
<path fill="none" stroke="#666666" d="M326.11,-119C346.56,-119 366.9,-119 385.76,-119"/>
<polygon fill="#666666" stroke="#666666" points="385.77,-122.5 395.77,-119 385.77,-115.5 385.77,-122.5"/>
</g>
<!-- KeyHandleGuard -->
<g id="node4" class="node">
<title>KeyHandleGuard</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M646,-0.5C646,-0.5 896,-0.5 896,-0.5 902,-0.5 908,-6.5 908,-12.5 908,-12.5 908,-57.5 908,-57.5 908,-63.5 902,-69.5 896,-69.5 896,-69.5 646,-69.5 646,-69.5 640,-69.5 634,-63.5 634,-57.5 634,-57.5 634,-12.5 634,-12.5 634,-6.5 640,-0.5 646,-0.5"/>
<text text-anchor="middle" x="771" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">KeyHandleGuard</text>
<polyline fill="none" stroke="#60b5ac" points="634,-46.5 908,-46.5 "/>
<text text-anchor="start" x="642" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">_mutex_guard: AsyncMutexGuard&lt;&#39;static, ()&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="634,-23.5 908,-23.5 "/>
<text text-anchor="start" x="642" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">handle: Arc&lt;KeyHandle&gt;,</text>
</g>
<!-- MvccTxn&#45;&gt;KeyHandleGuard -->
<g id="edge3" class="edge">
<title>MvccTxn&#45;&gt;KeyHandleGuard</title>
<path fill="none" stroke="#666666" d="M326.05,-81.33C338.18,-79.02 350.26,-76.87 362,-75 448.27,-61.24 545.6,-51.48 623.56,-45.04"/>
<polygon fill="#666666" stroke="#666666" points="624.26,-48.5 633.94,-44.2 623.69,-41.52 624.26,-48.5"/>
</g>
<!-- LockTable -->
<g id="node5" class="node">
<title>LockTable</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M692.5,-89C692.5,-89 849.5,-89 849.5,-89 855.5,-89 861.5,-95 861.5,-101 861.5,-101 861.5,-153 861.5,-153 861.5,-159 855.5,-165 849.5,-165 849.5,-165 692.5,-165 692.5,-165 686.5,-165 680.5,-159 680.5,-153 680.5,-153 680.5,-101 680.5,-101 680.5,-95 686.5,-89 692.5,-89"/>
<text text-anchor="middle" x="771" y="-149.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">LockTable</text>
<polyline fill="none" stroke="#60b5ac" points="680.5,-142 861.5,-142 "/>
<text text-anchor="start" x="688.5" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub struct LockTable(pub Arc</text>
<text text-anchor="start" x="688.5" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> &lt;SkipMap&lt;Key,</text>
<text text-anchor="start" x="688.5" y="-96.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> Weak&lt;KeyHandle&gt;&gt;&gt;);</text>
</g>
<!-- ConcurrencyManager&#45;&gt;LockTable -->
<g id="edge4" class="edge">
<title>ConcurrencyManager&#45;&gt;LockTable</title>
<path fill="none" stroke="#666666" d="M564.2,-121.3C597.29,-122.22 635.64,-123.28 670.2,-124.24"/>
<polygon fill="#666666" stroke="#666666" points="670.22,-127.74 680.32,-124.52 670.42,-120.74 670.22,-127.74"/>
</g>
<!-- KeyHandle -->
<g id="node6" class="node">
<title>KeyHandle</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M956,-23.5C956,-23.5 1176,-23.5 1176,-23.5 1182,-23.5 1188,-29.5 1188,-35.5 1188,-35.5 1188,-126.5 1188,-126.5 1188,-132.5 1182,-138.5 1176,-138.5 1176,-138.5 956,-138.5 956,-138.5 950,-138.5 944,-132.5 944,-126.5 944,-126.5 944,-35.5 944,-35.5 944,-29.5 950,-23.5 956,-23.5"/>
<text text-anchor="middle" x="1066" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">KeyHandle</text>
<polyline fill="none" stroke="#60b5ac" points="944,-115.5 1188,-115.5 "/>
<text text-anchor="start" x="952" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub key: Key,</text>
<polyline fill="none" stroke="#60b5ac" points="944,-92.5 1188,-92.5 "/>
<text text-anchor="start" x="952" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">table: UnsafeCell&lt;Option&lt;LockTable&gt;&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="944,-69.5 1188,-69.5 "/>
<text text-anchor="start" x="952" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">mutex: AsyncMutex&lt;()&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="944,-46.5 1188,-46.5 "/>
<text text-anchor="start" x="952" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">lock_store: Mutex&lt;Option&lt;Lock&gt;&gt;,</text>
</g>
<!-- KeyHandleGuard&#45;&gt;KeyHandle -->
<g id="edge7" class="edge">
<title>KeyHandleGuard&#45;&gt;KeyHandle</title>
<path fill="none" stroke="#666666" d="M908.21,-56.38C916.69,-57.72 925.22,-59.06 933.69,-60.38"/>
<polygon fill="#666666" stroke="#666666" points="933.16,-63.84 943.58,-61.94 934.25,-56.93 933.16,-63.84"/>
</g>
<!-- LockTable&#45;&gt;KeyHandle -->
<g id="edge6" class="edge">
<title>LockTable&#45;&gt;KeyHandle</title>
<path fill="none" stroke="#666666" d="M861.5,-112.95C884.35,-109.36 909.4,-105.43 933.87,-101.59"/>
<polygon fill="#666666" stroke="#666666" points="934.6,-105.01 943.94,-100.01 933.52,-98.1 934.6,-105.01"/>
</g>
<!-- Lock -->
<g id="node7" class="node">
<title>Lock</title>
<path fill="none" stroke="#1c2123" d="M1266,-99C1266,-99 1236,-99 1236,-99 1230,-99 1224,-93 1224,-87 1224,-87 1224,-75 1224,-75 1224,-69 1230,-63 1236,-63 1236,-63 1266,-63 1266,-63 1272,-63 1278,-69 1278,-75 1278,-75 1278,-87 1278,-87 1278,-93 1272,-99 1266,-99"/>
<text text-anchor="middle" x="1251" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock</text>
</g>
<!-- KeyHandle&#45;&gt;Lock -->
<g id="edge5" class="edge">
<title>KeyHandle&#45;&gt;Lock</title>
<path fill="none" stroke="#666666" d="M1188.04,-81C1197.18,-81 1205.88,-81 1213.72,-81"/>
<polygon fill="#666666" stroke="#666666" points="1213.83,-84.5 1223.83,-81 1213.83,-77.5 1213.83,-84.5"/>
</g>
</g>
</svg>
