<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: on_ready_change_peer_add Pages: 1 -->
<svg width="1033pt" height="678pt"
 viewBox="0.00 0.00 1033.00 678.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 674)">
<title>on_ready_change_peer_add</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-674 1029,-674 1029,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_raft_rs</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M259.5,-580C259.5,-580 373.5,-580 373.5,-580 379.5,-580 385.5,-586 385.5,-592 385.5,-592 385.5,-650 385.5,-650 385.5,-656 379.5,-662 373.5,-662 373.5,-662 259.5,-662 259.5,-662 253.5,-662 247.5,-656 247.5,-650 247.5,-650 247.5,-592 247.5,-592 247.5,-586 253.5,-580 259.5,-580"/>
<text text-anchor="middle" x="316.5" y="-642" font-family="Times,serif" font-size="20.00">raft&#45;rs</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_PeerStorage</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M830,-8C830,-8 1005,-8 1005,-8 1011,-8 1017,-14 1017,-20 1017,-20 1017,-90 1017,-90 1017,-96 1011,-102 1005,-102 1005,-102 830,-102 830,-102 824,-102 818,-96 818,-90 818,-90 818,-20 818,-20 818,-14 824,-8 830,-8"/>
<text text-anchor="middle" x="917.5" y="-82" font-family="Times,serif" font-size="20.00">PeerStorage</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Peer</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M213,-110C213,-110 1003,-110 1003,-110 1009,-110 1015,-116 1015,-122 1015,-122 1015,-354 1015,-354 1015,-360 1009,-366 1003,-366 1003,-366 213,-366 213,-366 207,-366 201,-360 201,-354 201,-354 201,-122 201,-122 201,-116 207,-110 213,-110"/>
<text text-anchor="middle" x="608" y="-346" font-family="Times,serif" font-size="20.00">Peer</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_StoreMeta</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M521,-580C521,-580 753,-580 753,-580 759,-580 765,-586 765,-592 765,-592 765,-650 765,-650 765,-656 759,-662 753,-662 753,-662 521,-662 521,-662 515,-662 509,-656 509,-650 509,-650 509,-592 509,-592 509,-586 515,-580 521,-580"/>
<text text-anchor="middle" x="637" y="-642" font-family="Times,serif" font-size="20.00">StoreMeta</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_PeerFmsDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-374C20,-374 985.5,-374 985.5,-374 991.5,-374 997.5,-380 997.5,-386 997.5,-386 997.5,-560 997.5,-560 997.5,-566 991.5,-572 985.5,-572 985.5,-572 20,-572 20,-572 14,-572 8,-566 8,-560 8,-560 8,-386 8,-386 8,-380 14,-374 20,-374"/>
<text text-anchor="middle" x="502.75" y="-552" font-family="Times,serif" font-size="20.00">PeerFmsDelegate</text>
</g>
<!-- apply_conf_change -->
<g id="node1" class="node">
<title>apply_conf_change</title>
<path fill="none" stroke="#1c2123" d="M365.5,-624C365.5,-624 267.5,-624 267.5,-624 261.5,-624 255.5,-618 255.5,-612 255.5,-612 255.5,-600 255.5,-600 255.5,-594 261.5,-588 267.5,-588 267.5,-588 365.5,-588 365.5,-588 371.5,-588 377.5,-594 377.5,-600 377.5,-600 377.5,-612 377.5,-612 377.5,-618 371.5,-624 365.5,-624"/>
<text text-anchor="middle" x="316.5" y="-602.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">apply_conf_change</text>
</g>
<!-- peerstore_set_region -->
<g id="node2" class="node">
<title>peerstore_set_region</title>
<path fill="none" stroke="#1c2123" d="M838,-17C838,-17 997,-17 997,-17 1003,-17 1009,-23 1009,-29 1009,-29 1009,-51 1009,-51 1009,-57 1003,-63 997,-63 997,-63 838,-63 838,-63 832,-63 826,-57 826,-51 826,-51 826,-29 826,-29 826,-23 832,-17 838,-17"/>
<text text-anchor="start" x="834" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">set_region</text>
<polyline fill="none" stroke="#1c2123" points="826,-40 1009,-40 "/>
<text text-anchor="start" x="834" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">更新自己的region 成员变量</text>
</g>
<!-- peer_heartbeats -->
<g id="node3" class="node">
<title>peer_heartbeats</title>
<path fill="none" stroke="#1c2123" d="M221,-281C221,-281 412,-281 412,-281 418,-281 424,-287 424,-293 424,-293 424,-315 424,-315 424,-321 418,-327 412,-327 412,-327 221,-327 221,-327 215,-327 209,-321 209,-315 209,-315 209,-293 209,-293 209,-287 215,-281 221,-281"/>
<text text-anchor="middle" x="316.5" y="-311.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">peer_heartbeats</text>
<polyline fill="none" stroke="#1c2123" points="209,-304 424,-304 "/>
<text text-anchor="start" x="217" y="-288.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">peer_heartbeats.insert(peer_id, now)</text>
</g>
<!-- peers_start_pending_time -->
<g id="node4" class="node">
<title>peers_start_pending_time</title>
<path fill="none" stroke="#1c2123" d="M487,-119C487,-119 620,-119 620,-119 626,-119 632,-125 632,-131 632,-131 632,-153 632,-153 632,-159 626,-165 620,-165 620,-165 487,-165 487,-165 481,-165 475,-159 475,-153 475,-153 475,-131 475,-131 475,-125 481,-119 487,-119"/>
<text text-anchor="middle" x="553.5" y="-149.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">peers_start_pending_time</text>
<polyline fill="none" stroke="#1c2123" points="475,-142 632,-142 "/>
<text text-anchor="start" x="483" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">push((peer_id, now))</text>
</g>
<!-- is_learner -->
<g id="node5" class="node">
<title>is_learner</title>
<path fill="none" stroke="#1c2123" d="M680,-225.5C680,-225.5 778,-225.5 778,-225.5 784,-225.5 790,-231.5 790,-237.5 790,-237.5 790,-274.5 790,-274.5 790,-280.5 784,-286.5 778,-286.5 778,-286.5 680,-286.5 680,-286.5 674,-286.5 668,-280.5 668,-274.5 668,-274.5 668,-237.5 668,-237.5 668,-231.5 674,-225.5 680,-225.5"/>
<text text-anchor="middle" x="729" y="-271.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">is_learner</text>
<polyline fill="none" stroke="#1c2123" points="668,-263.5 790,-263.5 "/>
<text text-anchor="start" x="676" y="-248.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">新的peer metapb</text>
<text text-anchor="start" x="676" y="-233.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> role成为了learner</text>
</g>
<!-- become_follower -->
<g id="node19" class="node">
<title>become_follower</title>
<path fill="none" stroke="#1c2123" d="M857.5,-383C857.5,-383 977.5,-383 977.5,-383 983.5,-383 989.5,-389 989.5,-395 989.5,-395 989.5,-447 989.5,-447 989.5,-453 983.5,-459 977.5,-459 977.5,-459 857.5,-459 857.5,-459 851.5,-459 845.5,-453 845.5,-447 845.5,-447 845.5,-395 845.5,-395 845.5,-389 851.5,-383 857.5,-383"/>
<text text-anchor="middle" x="917.5" y="-443.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">become_follower</text>
<polyline fill="none" stroke="#1c2123" points="845.5,-436 989.5,-436 "/>
<text text-anchor="start" x="853.5" y="-420.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">leader peer的</text>
<text text-anchor="start" x="853.5" y="-405.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> role变为了leader</text>
<text text-anchor="start" x="853.5" y="-390.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用become_follower</text>
</g>
<!-- is_learner&#45;&gt;become_follower -->
<g id="edge19" class="edge">
<title>is_learner&#45;&gt;become_follower</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M751.37,-286.66C772.11,-315.86 802.64,-357.18 818,-370 823.87,-374.9 830.29,-379.51 836.95,-383.8"/>
<polygon fill="green" stroke="green" points="835.14,-386.8 845.49,-389.06 838.81,-380.83 835.14,-386.8"/>
</g>
<!-- is_leader -->
<g id="node6" class="node">
<title>is_leader</title>
<path fill="none" stroke="#1c2123" d="M232,-216C232,-216 401,-216 401,-216 407,-216 413,-222 413,-228 413,-228 413,-250 413,-250 413,-256 407,-262 401,-262 401,-262 232,-262 232,-262 226,-262 220,-256 220,-250 220,-250 220,-228 220,-228 220,-222 226,-216 232,-216"/>
<text text-anchor="middle" x="316.5" y="-246.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">is_leader</text>
<polyline fill="none" stroke="#1c2123" points="220,-239 413,-239 "/>
<text text-anchor="start" x="228" y="-223.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">1. 异步的向pd发送region心跳</text>
</g>
<!-- is_leader&#45;&gt;peers_start_pending_time -->
<g id="edge21" class="edge">
<title>is_leader&#45;&gt;peers_start_pending_time</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M373.49,-215.89C407.64,-201.79 451.43,-183.72 487.16,-168.97"/>
<polygon fill="green" stroke="green" points="488.62,-172.15 496.53,-165.1 485.95,-165.68 488.62,-172.15"/>
</g>
<!-- heartbeat_pd -->
<g id="node7" class="node">
<title>heartbeat_pd</title>
<path fill="none" stroke="#1c2123" d="M584.5,-220C584.5,-220 522.5,-220 522.5,-220 516.5,-220 510.5,-214 510.5,-208 510.5,-208 510.5,-196 510.5,-196 510.5,-190 516.5,-184 522.5,-184 522.5,-184 584.5,-184 584.5,-184 590.5,-184 596.5,-190 596.5,-196 596.5,-196 596.5,-208 596.5,-208 596.5,-214 590.5,-220 584.5,-220"/>
<text text-anchor="middle" x="553.5" y="-198.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">heartbeat_pd</text>
</g>
<!-- is_leader&#45;&gt;heartbeat_pd -->
<g id="edge22" class="edge">
<title>is_leader&#45;&gt;heartbeat_pd</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M413.08,-223.95C442.92,-219.25 474.72,-214.25 500.4,-210.2"/>
<polygon fill="green" stroke="green" points="500.95,-213.66 510.28,-208.65 499.86,-206.74 500.95,-213.66"/>
</g>
<!-- is_leader&#45;&gt;become_follower -->
<g id="edge20" class="edge">
<title>is_leader&#45;&gt;become_follower</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M413.28,-256.93C422.49,-260.97 431.26,-265.93 439,-272 464.98,-292.38 448.25,-317.64 475,-337 489.54,-347.53 711.44,-386.34 834.98,-407.33"/>
<polygon fill="green" stroke="green" points="834.71,-410.83 845.15,-409.05 835.88,-403.93 834.71,-410.83"/>
</g>
<!-- need_ping -->
<g id="node20" class="node">
<title>need_ping</title>
<path fill="none" stroke="#1c2123" d="M578,-420C578,-420 529,-420 529,-420 523,-420 517,-414 517,-408 517,-408 517,-396 517,-396 517,-390 523,-384 529,-384 529,-384 578,-384 578,-384 584,-384 590,-390 590,-396 590,-396 590,-408 590,-408 590,-414 584,-420 578,-420"/>
<text text-anchor="middle" x="553.5" y="-398.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">need_ping</text>
</g>
<!-- is_leader&#45;&gt;need_ping -->
<g id="edge23" class="edge">
<title>is_leader&#45;&gt;need_ping</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M413.08,-255.19C422.54,-259.55 431.43,-265.06 439,-272 473.2,-303.36 442.84,-336.55 475,-370 483.75,-379.1 495.46,-385.71 507.13,-390.47"/>
<polygon fill="green" stroke="green" points="506.26,-393.88 516.85,-394.04 508.68,-387.31 506.26,-393.88"/>
</g>
<!-- insert_peer_cache -->
<g id="node8" class="node">
<title>insert_peer_cache</title>
<path fill="none" stroke="#1c2123" d="M598.5,-328C598.5,-328 508.5,-328 508.5,-328 502.5,-328 496.5,-322 496.5,-316 496.5,-316 496.5,-304 496.5,-304 496.5,-298 502.5,-292 508.5,-292 508.5,-292 598.5,-292 598.5,-292 604.5,-292 610.5,-298 610.5,-304 610.5,-304 610.5,-316 610.5,-316 610.5,-322 604.5,-328 598.5,-328"/>
<text text-anchor="middle" x="553.5" y="-306.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">insert_peer_cache</text>
</g>
<!-- metapb_peer -->
<g id="node9" class="node">
<title>metapb_peer</title>
<path fill="none" stroke="#1c2123" d="M585,-274C585,-274 522,-274 522,-274 516,-274 510,-268 510,-262 510,-262 510,-250 510,-250 510,-244 516,-238 522,-238 522,-238 585,-238 585,-238 591,-238 597,-244 597,-250 597,-250 597,-262 597,-262 597,-268 591,-274 585,-274"/>
<text text-anchor="middle" x="553.5" y="-252.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">metapb_peer</text>
</g>
<!-- metapb_peer&#45;&gt;is_learner -->
<g id="edge18" class="edge">
<title>metapb_peer&#45;&gt;is_learner</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M597.39,-256C615.59,-256 637.28,-256 657.71,-256"/>
<polygon fill="green" stroke="green" points="657.93,-259.5 667.93,-256 657.93,-252.5 657.93,-259.5"/>
</g>
<!-- peer_set_region -->
<g id="node10" class="node">
<title>peer_set_region</title>
<path fill="none" stroke="#1c2123" d="M704.5,-145C704.5,-145 753.5,-145 753.5,-145 759.5,-145 765.5,-151 765.5,-157 765.5,-157 765.5,-169 765.5,-169 765.5,-175 759.5,-181 753.5,-181 753.5,-181 704.5,-181 704.5,-181 698.5,-181 692.5,-175 692.5,-169 692.5,-169 692.5,-157 692.5,-157 692.5,-151 698.5,-145 704.5,-145"/>
<text text-anchor="middle" x="729" y="-159.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">set_region</text>
</g>
<!-- peer_set_region&#45;&gt;peerstore_set_region -->
<g id="edge1" class="edge">
<title>peer_set_region&#45;&gt;peerstore_set_region</title>
<path fill="none" stroke="#666666" d="M757.52,-144.85C787.88,-124.83 837.14,-92.34 872.8,-68.82"/>
<polygon fill="#666666" stroke="#666666" points="875.13,-71.48 881.55,-63.05 871.27,-65.64 875.13,-71.48"/>
</g>
<!-- expire_remote_lease -->
<g id="node11" class="node">
<title>expire_remote_lease</title>
<path fill="none" stroke="#1c2123" d="M970,-167C970,-167 865,-167 865,-167 859,-167 853,-161 853,-155 853,-155 853,-143 853,-143 853,-137 859,-131 865,-131 865,-131 970,-131 970,-131 976,-131 982,-137 982,-143 982,-143 982,-155 982,-155 982,-161 976,-167 970,-167"/>
<text text-anchor="middle" x="917.5" y="-145.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">expire_remote_lease</text>
</g>
<!-- peer_set_region&#45;&gt;expire_remote_lease -->
<g id="edge2" class="edge">
<title>peer_set_region&#45;&gt;expire_remote_lease</title>
<path fill="none" stroke="#666666" d="M765.52,-160.33C787.35,-158.69 816.15,-156.53 842.74,-154.54"/>
<polygon fill="#666666" stroke="#666666" points="843.09,-158.02 852.8,-153.78 842.57,-151.04 843.09,-158.02"/>
</g>
<!-- maybe_update_read_progress -->
<g id="node12" class="node">
<title>maybe_update_read_progress</title>
<path fill="none" stroke="#1c2123" d="M995,-221C995,-221 840,-221 840,-221 834,-221 828,-215 828,-209 828,-209 828,-197 828,-197 828,-191 834,-185 840,-185 840,-185 995,-185 995,-185 1001,-185 1007,-191 1007,-197 1007,-197 1007,-209 1007,-209 1007,-215 1001,-221 995,-221"/>
<text text-anchor="middle" x="917.5" y="-199.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_update_read_progress</text>
</g>
<!-- peer_set_region&#45;&gt;maybe_update_read_progress -->
<g id="edge3" class="edge">
<title>peer_set_region&#45;&gt;maybe_update_read_progress</title>
<path fill="none" stroke="#666666" d="M765.52,-170.62C781.87,-174.12 802.12,-178.47 822.42,-182.82"/>
<polygon fill="#666666" stroke="#666666" points="821.86,-186.28 832.38,-184.96 823.33,-179.44 821.86,-186.28"/>
</g>
<!-- set_region -->
<g id="node13" class="node">
<title>set_region</title>
<path fill="none" stroke="#1c2123" d="M578,-624C578,-624 529,-624 529,-624 523,-624 517,-618 517,-612 517,-612 517,-600 517,-600 517,-594 523,-588 529,-588 529,-588 578,-588 578,-588 584,-588 590,-594 590,-600 590,-600 590,-612 590,-612 590,-618 584,-624 578,-624"/>
<text text-anchor="middle" x="553.5" y="-602.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">set_region</text>
</g>
<!-- set_region&#45;&gt;peer_set_region -->
<g id="edge4" class="edge">
<title>set_region&#45;&gt;peer_set_region</title>
<path fill="none" stroke="#666666" d="M590.39,-600.63C605.58,-596.47 622.04,-589.09 632,-576 680.69,-512.02 631.34,-287.55 668,-216 673.59,-205.08 682.47,-195.39 691.69,-187.38"/>
<polygon fill="#666666" stroke="#666666" points="693.91,-190.08 699.45,-181.05 689.49,-184.65 693.91,-190.08"/>
</g>
<!-- regions -->
<g id="node14" class="node">
<title>regions</title>
<path fill="none" stroke="#1c2123" d="M745,-624C745,-624 713,-624 713,-624 707,-624 701,-618 701,-612 701,-612 701,-600 701,-600 701,-594 707,-588 713,-588 713,-588 745,-588 745,-588 751,-588 757,-594 757,-600 757,-600 757,-612 757,-612 757,-618 751,-624 745,-624"/>
<text text-anchor="middle" x="729" y="-602.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">regions</text>
</g>
<!-- set_region&#45;&gt;regions -->
<g id="edge5" class="edge">
<title>set_region&#45;&gt;regions</title>
<path fill="none" stroke="#666666" d="M590.03,-606C619.38,-606 660.93,-606 690.75,-606"/>
<polygon fill="#666666" stroke="#666666" points="690.77,-609.5 700.77,-606 690.77,-602.5 690.77,-609.5"/>
</g>
<!-- on_ready_change_peer -->
<g id="node15" class="node">
<title>on_ready_change_peer</title>
<path fill="none" stroke="#1c2123" d="M146,-428C146,-428 28,-428 28,-428 22,-428 16,-422 16,-416 16,-416 16,-404 16,-404 16,-398 22,-392 28,-392 28,-392 146,-392 146,-392 152,-392 158,-398 158,-404 158,-404 158,-416 158,-416 158,-422 152,-428 146,-428"/>
<text text-anchor="middle" x="87" y="-406.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_ready_change_peer</text>
</g>
<!-- on_ready_change_peer&#45;&gt;apply_conf_change -->
<g id="edge6" class="edge">
<title>on_ready_change_peer&#45;&gt;apply_conf_change</title>
<path fill="none" stroke="#666666" d="M94.36,-428.22C107.36,-462.72 140.38,-537.53 194,-576 209.04,-586.79 227.54,-593.72 245.51,-598.17"/>
<polygon fill="#666666" stroke="#666666" points="244.9,-601.62 255.42,-600.39 246.43,-594.79 244.9,-601.62"/>
</g>
<!-- on_ready_change_peer&#45;&gt;peer_heartbeats -->
<g id="edge7" class="edge">
<title>on_ready_change_peer&#45;&gt;peer_heartbeats</title>
<path fill="none" stroke="#666666" d="M126.85,-391.9C162.52,-375.28 215.89,-350.41 256.77,-331.36"/>
<polygon fill="#666666" stroke="#666666" points="258.5,-334.42 266.08,-327.03 255.54,-328.08 258.5,-334.42"/>
</g>
<!-- on_ready_change_peer&#45;&gt;peers_start_pending_time -->
<g id="edge8" class="edge">
<title>on_ready_change_peer&#45;&gt;peers_start_pending_time</title>
<path fill="none" stroke="#666666" d="M91.8,-391.87C101.28,-351.52 129.96,-254.13 194,-207 272.5,-149.23 386.37,-137.45 464.6,-137.23"/>
<polygon fill="#666666" stroke="#666666" points="464.91,-140.74 474.92,-137.27 464.93,-133.74 464.91,-140.74"/>
</g>
<!-- on_ready_change_peer&#45;&gt;is_learner -->
<g id="edge9" class="edge">
<title>on_ready_change_peer&#45;&gt;is_learner</title>
<path fill="none" stroke="#666666" d="M88.76,-391.66C91.94,-340.95 108.46,-198.31 194,-134 349.83,-16.84 468.53,-3.76 632,-110 665.03,-131.47 646.35,-158.09 668,-191 674.07,-200.23 681.47,-209.41 688.98,-217.84"/>
<polygon fill="#666666" stroke="#666666" points="686.52,-220.34 695.86,-225.34 691.68,-215.61 686.52,-220.34"/>
</g>
<!-- on_ready_change_peer&#45;&gt;is_leader -->
<g id="edge10" class="edge">
<title>on_ready_change_peer&#45;&gt;is_leader</title>
<path fill="none" stroke="#666666" d="M96.97,-391.71C112.52,-361.96 147.32,-303.29 194,-272 199.24,-268.49 204.85,-265.34 210.67,-262.54"/>
<polygon fill="#666666" stroke="#666666" points="212.26,-265.66 219.97,-258.39 209.41,-259.27 212.26,-265.66"/>
</g>
<!-- update_region -->
<g id="node16" class="node">
<title>update_region</title>
<path fill="none" stroke="#1c2123" d="M206,-383C206,-383 427,-383 427,-383 433,-383 439,-389 439,-395 439,-395 439,-447 439,-447 439,-453 433,-459 427,-459 427,-459 206,-459 206,-459 200,-459 194,-453 194,-447 194,-447 194,-395 194,-395 194,-389 200,-383 206,-383"/>
<text text-anchor="middle" x="316.5" y="-443.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">update_region</text>
<polyline fill="none" stroke="#1c2123" points="194,-436 439,-436 "/>
<text text-anchor="start" x="202" y="-420.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">1.更新StoreMeta的region信息</text>
<text text-anchor="start" x="202" y="-405.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 2.更新自己fsm.peer.peer的metapb信息</text>
<text text-anchor="start" x="202" y="-390.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 3.插入peer_cache</text>
</g>
<!-- on_ready_change_peer&#45;&gt;update_region -->
<g id="edge11" class="edge">
<title>on_ready_change_peer&#45;&gt;update_region</title>
<path fill="none" stroke="#666666" d="M158.11,-413.39C166.28,-413.78 174.8,-414.2 183.46,-414.62"/>
<polygon fill="#666666" stroke="#666666" points="183.52,-418.12 193.68,-415.11 183.86,-411.13 183.52,-418.12"/>
</g>
<!-- assign_commit_groups -->
<g id="node17" class="node">
<title>assign_commit_groups</title>
<path fill="none" stroke="#1c2123" d="M613,-515C613,-515 494,-515 494,-515 488,-515 482,-509 482,-503 482,-503 482,-491 482,-491 482,-485 488,-479 494,-479 494,-479 613,-479 613,-479 619,-479 625,-485 625,-491 625,-491 625,-503 625,-503 625,-509 619,-515 613,-515"/>
<text text-anchor="middle" x="553.5" y="-493.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">assign_commit_groups</text>
</g>
<!-- on_ready_change_peer&#45;&gt;assign_commit_groups -->
<g id="edge12" class="edge">
<title>on_ready_change_peer&#45;&gt;assign_commit_groups</title>
<path fill="none" stroke="#666666" d="M113.16,-428.12C133.81,-441.93 164.36,-460.06 194,-469 200.58,-470.98 367.81,-483.49 471.52,-491.1"/>
<polygon fill="#666666" stroke="#666666" points="471.43,-494.61 481.66,-491.85 471.94,-487.63 471.43,-494.61"/>
</g>
<!-- group_id -->
<g id="node18" class="node">
<title>group_id</title>
<path fill="none" stroke="#1c2123" d="M337,-534C337,-534 296,-534 296,-534 290,-534 284,-528 284,-522 284,-522 284,-510 284,-510 284,-504 290,-498 296,-498 296,-498 337,-498 337,-498 343,-498 349,-504 349,-510 349,-510 349,-522 349,-522 349,-528 343,-534 337,-534"/>
<text text-anchor="middle" x="316.5" y="-512.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">group_id</text>
</g>
<!-- on_ready_change_peer&#45;&gt;group_id -->
<g id="edge13" class="edge">
<title>on_ready_change_peer&#45;&gt;group_id</title>
<path fill="none" stroke="#666666" d="M108.95,-428C129.4,-444.72 162.02,-469.2 194,-484 219.38,-495.75 249.8,-503.75 273.86,-508.82"/>
<polygon fill="#666666" stroke="#666666" points="273.25,-512.27 283.75,-510.81 274.64,-505.4 273.25,-512.27"/>
</g>
<!-- update_region&#45;&gt;insert_peer_cache -->
<g id="edge15" class="edge">
<title>update_region&#45;&gt;insert_peer_cache</title>
<path fill="none" stroke="#666666" d="M410.75,-382.86C420.34,-378.64 429.9,-374.3 439,-370 463.33,-358.49 489.96,-344.49 511.31,-332.91"/>
<polygon fill="#666666" stroke="#666666" points="513.01,-335.97 520.11,-328.11 509.65,-329.82 513.01,-335.97"/>
</g>
<!-- update_region&#45;&gt;metapb_peer -->
<g id="edge16" class="edge">
<title>update_region&#45;&gt;metapb_peer</title>
<path fill="none" stroke="#666666" d="M423.64,-382.91C429.14,-378.99 434.32,-374.7 439,-370 468.51,-340.34 444.58,-311.73 475,-283 482.15,-276.25 491.08,-271.17 500.31,-267.36"/>
<polygon fill="#666666" stroke="#666666" points="501.78,-270.55 509.97,-263.83 499.38,-263.98 501.78,-270.55"/>
</g>
<!-- update_region&#45;&gt;set_region -->
<g id="edge17" class="edge">
<title>update_region&#45;&gt;set_region</title>
<path fill="none" stroke="#666666" d="M402.99,-459.06C416.19,-467.56 428.8,-477.53 439,-489 466.8,-520.28 445.07,-546.75 475,-576 483.87,-584.67 495.52,-590.89 507.08,-595.35"/>
<polygon fill="#666666" stroke="#666666" points="506.11,-598.71 516.71,-598.68 508.4,-592.1 506.11,-598.71"/>
</g>
<!-- group_id&#45;&gt;assign_commit_groups -->
<g id="edge14" class="edge">
<title>group_id&#45;&gt;assign_commit_groups</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M349.19,-513.44C380.51,-510.91 429.7,-506.93 471.86,-503.52"/>
<polygon fill="green" stroke="green" points="472.16,-507.01 481.85,-502.71 471.6,-500.03 472.16,-507.01"/>
</g>
</g>
</svg>
