<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: pd_merge_checker Pages: 1 -->
<svg width="1695pt" height="630pt"
 viewBox="0.00 0.00 1695.00 630.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 626)">
<title>pd_merge_checker</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-626 1691,-626 1691,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_regionTree</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M504.5,-96C504.5,-96 798.5,-96 798.5,-96 804.5,-96 810.5,-102 810.5,-108 810.5,-108 810.5,-232 810.5,-232 810.5,-238 804.5,-244 798.5,-244 798.5,-244 504.5,-244 504.5,-244 498.5,-244 492.5,-238 492.5,-232 492.5,-232 492.5,-108 492.5,-108 492.5,-102 498.5,-96 504.5,-96"/>
<text text-anchor="middle" x="651.5" y="-224" font-family="Times,serif" font-size="20.00">regionTree</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_RegionsInfo</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20.5,-8C20.5,-8 435,-8 435,-8 441,-8 447,-14 447,-20 447,-20 447,-270 447,-270 447,-276 441,-282 435,-282 435,-282 20.5,-282 20.5,-282 14.5,-282 8.5,-276 8.5,-270 8.5,-270 8.5,-20 8.5,-20 8.5,-14 14.5,-8 20.5,-8"/>
<text text-anchor="middle" x="227.75" y="-262" font-family="Times,serif" font-size="20.00">RegionsInfo</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_MergeChecker</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-290C20,-290 1667,-290 1667,-290 1673,-290 1679,-296 1679,-302 1679,-302 1679,-602 1679,-602 1679,-608 1673,-614 1667,-614 1667,-614 20,-614 20,-614 14,-614 8,-608 8,-602 8,-602 8,-302 8,-302 8,-296 14,-290 20,-290"/>
<text text-anchor="middle" x="843.5" y="-594" font-family="Times,serif" font-size="20.00">MergeChecker</text>
</g>
<!-- getAdjacentRegions -->
<g id="node1" class="node">
<title>getAdjacentRegions</title>
<path fill="none" stroke="#1c2123" d="M614.5,-206C614.5,-206 512.5,-206 512.5,-206 506.5,-206 500.5,-200 500.5,-194 500.5,-194 500.5,-182 500.5,-182 500.5,-176 506.5,-170 512.5,-170 512.5,-170 614.5,-170 614.5,-170 620.5,-170 626.5,-176 626.5,-182 626.5,-182 626.5,-194 626.5,-194 626.5,-200 620.5,-206 614.5,-206"/>
<text text-anchor="middle" x="563.5" y="-184.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">getAdjacentRegions</text>
</g>
<!-- Btree -->
<g id="node2" class="node">
<title>Btree</title>
<path fill="none" stroke="#1c2123" d="M790.5,-206C790.5,-206 760.5,-206 760.5,-206 754.5,-206 748.5,-200 748.5,-194 748.5,-194 748.5,-182 748.5,-182 748.5,-176 754.5,-170 760.5,-170 760.5,-170 790.5,-170 790.5,-170 796.5,-170 802.5,-176 802.5,-182 802.5,-182 802.5,-194 802.5,-194 802.5,-200 796.5,-206 790.5,-206"/>
<text text-anchor="middle" x="775.5" y="-184.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Btree</text>
</g>
<!-- getAdjacentRegions&#45;&gt;Btree -->
<g id="edge1" class="edge">
<title>getAdjacentRegions&#45;&gt;Btree</title>
<path fill="none" stroke="#666666" d="M626.65,-188C662.9,-188 707.36,-188 738.01,-188"/>
<polygon fill="#666666" stroke="#666666" points="738.24,-191.5 748.24,-188 738.24,-184.5 738.24,-191.5"/>
</g>
<!-- regionTree -->
<g id="node3" class="node">
<title>regionTree</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M520,-105C520,-105 607,-105 607,-105 613,-105 619,-111 619,-117 619,-117 619,-139 619,-139 619,-145 613,-151 607,-151 607,-151 520,-151 520,-151 514,-151 508,-145 508,-139 508,-139 508,-117 508,-117 508,-111 514,-105 520,-105"/>
<text text-anchor="middle" x="563.5" y="-135.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">regionTree</text>
<polyline fill="none" stroke="#60b5ac" points="508,-128 619,-128 "/>
<text text-anchor="start" x="516" y="-112.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">tree * btree.Btree</text>
</g>
<!-- GetAdjacentRegions -->
<g id="node4" class="node">
<title>GetAdjacentRegions</title>
<path fill="none" stroke="#1c2123" d="M249.5,-197C249.5,-197 380.5,-197 380.5,-197 386.5,-197 392.5,-203 392.5,-209 392.5,-209 392.5,-231 392.5,-231 392.5,-237 386.5,-243 380.5,-243 380.5,-243 249.5,-243 249.5,-243 243.5,-243 237.5,-237 237.5,-231 237.5,-231 237.5,-209 237.5,-209 237.5,-203 243.5,-197 249.5,-197"/>
<text text-anchor="middle" x="315" y="-227.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">GetAdjacentRegions</text>
<polyline fill="none" stroke="#1c2123" points="237.5,-220 392.5,-220 "/>
<text text-anchor="start" x="245.5" y="-204.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">返回region的prev和next</text>
</g>
<!-- GetAdjacentRegions&#45;&gt;getAdjacentRegions -->
<g id="edge2" class="edge">
<title>GetAdjacentRegions&#45;&gt;getAdjacentRegions</title>
<path fill="none" stroke="#666666" d="M392.64,-210.05C423.75,-206.01 459.51,-201.37 490.16,-197.39"/>
<polygon fill="#666666" stroke="#666666" points="490.88,-200.83 500.35,-196.07 489.98,-193.88 490.88,-200.83"/>
</g>
<!-- checkTarget -->
<g id="node12" class="node">
<title>checkTarget</title>
<path fill="none" stroke="#1c2123" d="M487,-369.5C487,-369.5 640,-369.5 640,-369.5 646,-369.5 652,-375.5 652,-381.5 652,-381.5 652,-418.5 652,-418.5 652,-424.5 646,-430.5 640,-430.5 640,-430.5 487,-430.5 487,-430.5 481,-430.5 475,-424.5 475,-418.5 475,-418.5 475,-381.5 475,-381.5 475,-375.5 481,-369.5 487,-369.5"/>
<text text-anchor="middle" x="563.5" y="-415.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">checkTarget</text>
<polyline fill="none" stroke="#1c2123" points="475,-407.5 652,-407.5 "/>
<text text-anchor="start" x="483" y="-392.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">检查region和adjacent region</text>
<text text-anchor="start" x="483" y="-377.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 是否可以merge</text>
</g>
<!-- GetAdjacentRegions&#45;&gt;checkTarget -->
<g id="edge19" class="edge">
<title>GetAdjacentRegions&#45;&gt;checkTarget</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M371.08,-243.06C395.36,-254.39 423.63,-269.21 447,-286 477.56,-307.95 507.67,-338.02 529.48,-361.77"/>
<polygon fill="green" stroke="green" points="526.95,-364.18 536.26,-369.24 532.13,-359.48 526.95,-364.18"/>
</g>
<!-- RegionsInfo -->
<g id="node5" class="node">
<title>RegionsInfo</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M203,-16.5C203,-16.5 427,-16.5 427,-16.5 433,-16.5 439,-22.5 439,-28.5 439,-28.5 439,-165.5 439,-165.5 439,-171.5 433,-177.5 427,-177.5 427,-177.5 203,-177.5 203,-177.5 197,-177.5 191,-171.5 191,-165.5 191,-165.5 191,-28.5 191,-28.5 191,-22.5 197,-16.5 203,-16.5"/>
<text text-anchor="middle" x="315" y="-162.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">RegionsInfo</text>
<polyline fill="none" stroke="#60b5ac" points="191,-154.5 439,-154.5 "/>
<text text-anchor="start" x="199" y="-139.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">tree *regionTree</text>
<polyline fill="none" stroke="#60b5ac" points="191,-131.5 439,-131.5 "/>
<text text-anchor="start" x="199" y="-116.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">regions *regionMap </text>
<polyline fill="none" stroke="#60b5ac" points="191,-108.5 439,-108.5 "/>
<text text-anchor="start" x="199" y="-93.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">leaders map[uint64]*regionSubTree</text>
<polyline fill="none" stroke="#60b5ac" points="191,-85.5 439,-85.5 "/>
<text text-anchor="start" x="199" y="-70.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">followers map[uint64]*regionSubTree</text>
<polyline fill="none" stroke="#60b5ac" points="191,-62.5 439,-62.5 "/>
<text text-anchor="start" x="199" y="-47.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">learners map[uint64]*regionSubTree</text>
<polyline fill="none" stroke="#60b5ac" points="191,-39.5 439,-39.5 "/>
<text text-anchor="start" x="199" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pendingPeers map[uint64]*regionSubTree</text>
</g>
<!-- RegionsInfo&#45;&gt;regionTree -->
<g id="edge3" class="edge">
<title>RegionsInfo&#45;&gt;regionTree</title>
<path fill="none" stroke="#666666" d="M439.25,-112.5C459.47,-115.04 479.68,-117.58 497.72,-119.85"/>
<polygon fill="#666666" stroke="#666666" points="497.44,-123.34 507.79,-121.12 498.31,-116.4 497.44,-123.34"/>
</g>
<!-- BasicCluster -->
<g id="node6" class="node">
<title>BasicCluster</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M28.5,-39.5C28.5,-39.5 142.5,-39.5 142.5,-39.5 148.5,-39.5 154.5,-45.5 154.5,-51.5 154.5,-51.5 154.5,-142.5 154.5,-142.5 154.5,-148.5 148.5,-154.5 142.5,-154.5 142.5,-154.5 28.5,-154.5 28.5,-154.5 22.5,-154.5 16.5,-148.5 16.5,-142.5 16.5,-142.5 16.5,-51.5 16.5,-51.5 16.5,-45.5 22.5,-39.5 28.5,-39.5"/>
<text text-anchor="middle" x="85.5" y="-139.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">BasicCluster</text>
<polyline fill="none" stroke="#60b5ac" points="16.5,-131.5 154.5,-131.5 "/>
<text text-anchor="start" x="24.5" y="-116.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">sync.RWMutex</text>
<polyline fill="none" stroke="#60b5ac" points="16.5,-108.5 154.5,-108.5 "/>
<text text-anchor="start" x="24.5" y="-93.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Stores *StoresInfo</text>
<polyline fill="none" stroke="#60b5ac" points="16.5,-85.5 154.5,-85.5 "/>
<text text-anchor="start" x="24.5" y="-70.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Regions *RegionsInfo</text>
<polyline fill="none" stroke="#60b5ac" points="16.5,-62.5 154.5,-62.5 "/>
<text text-anchor="middle" x="85.5" y="-47.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> </text>
</g>
<!-- BasicCluster&#45;&gt;RegionsInfo -->
<g id="edge4" class="edge">
<title>BasicCluster&#45;&gt;RegionsInfo</title>
<path fill="none" stroke="#666666" d="M154.76,-97C163.13,-97 171.89,-97 180.81,-97"/>
<polygon fill="#666666" stroke="#666666" points="180.95,-100.5 190.95,-97 180.95,-93.5 180.95,-100.5"/>
</g>
<!-- Check -->
<g id="node7" class="node">
<title>Check</title>
<path fill="none" stroke="#1c2123" d="M28,-414C28,-414 143,-414 143,-414 149,-414 155,-420 155,-426 155,-426 155,-448 155,-448 155,-454 149,-460 143,-460 143,-460 28,-460 28,-460 22,-460 16,-454 16,-448 16,-448 16,-426 16,-426 16,-420 22,-414 28,-414"/>
<text text-anchor="middle" x="85.5" y="-444.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Check</text>
<polyline fill="none" stroke="#1c2123" points="16,-437 155,-437 "/>
<text text-anchor="middle" x="85.5" y="-421.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">一些需要skip的情况</text>
</g>
<!-- Check&#45;&gt;GetAdjacentRegions -->
<g id="edge5" class="edge">
<title>Check&#45;&gt;GetAdjacentRegions</title>
<path fill="none" stroke="#666666" d="M98.05,-413.75C114.88,-381.71 148.79,-323.69 191,-286 208.01,-270.81 229.13,-257.87 249.04,-247.58"/>
<polygon fill="#666666" stroke="#666666" points="250.72,-250.65 258.09,-243.04 247.58,-244.4 250.72,-250.65"/>
</g>
<!-- IsRegionHot -->
<g id="node8" class="node">
<title>IsRegionHot</title>
<path fill="none" stroke="#1c2123" d="M806.5,-522C806.5,-522 744.5,-522 744.5,-522 738.5,-522 732.5,-516 732.5,-510 732.5,-510 732.5,-498 732.5,-498 732.5,-492 738.5,-486 744.5,-486 744.5,-486 806.5,-486 806.5,-486 812.5,-486 818.5,-492 818.5,-498 818.5,-498 818.5,-510 818.5,-510 818.5,-516 812.5,-522 806.5,-522"/>
<text text-anchor="middle" x="775.5" y="-500.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">IsRegionHot</text>
</g>
<!-- Check&#45;&gt;IsRegionHot -->
<g id="edge6" class="edge">
<title>Check&#45;&gt;IsRegionHot</title>
<path fill="none" stroke="#666666" d="M155.3,-443.7C292.87,-457.1 599.16,-486.92 722.02,-498.89"/>
<polygon fill="#666666" stroke="#666666" points="722,-502.4 732.29,-499.89 722.68,-495.44 722,-502.4"/>
</g>
<!-- IsRegionReplicated -->
<g id="node9" class="node">
<title>IsRegionReplicated</title>
<path fill="none" stroke="#1c2123" d="M825,-576C825,-576 726,-576 726,-576 720,-576 714,-570 714,-564 714,-564 714,-552 714,-552 714,-546 720,-540 726,-540 726,-540 825,-540 825,-540 831,-540 837,-546 837,-552 837,-552 837,-564 837,-564 837,-570 831,-576 825,-576"/>
<text text-anchor="middle" x="775.5" y="-554.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">IsRegionReplicated</text>
</g>
<!-- Check&#45;&gt;IsRegionReplicated -->
<g id="edge7" class="edge">
<title>Check&#45;&gt;IsRegionReplicated</title>
<path fill="none" stroke="#666666" d="M155.15,-455.71C167.06,-458.67 179.35,-461.56 191,-464 374.58,-502.42 593.49,-533.9 703.68,-548.76"/>
<polygon fill="#666666" stroke="#666666" points="703.3,-552.24 713.68,-550.1 704.23,-545.3 703.3,-552.24"/>
</g>
<!-- IsRegionHealthy -->
<g id="node10" class="node">
<title>IsRegionHealthy</title>
<path fill="none" stroke="#1c2123" d="M817.5,-334C817.5,-334 733.5,-334 733.5,-334 727.5,-334 721.5,-328 721.5,-322 721.5,-322 721.5,-310 721.5,-310 721.5,-304 727.5,-298 733.5,-298 733.5,-298 817.5,-298 817.5,-298 823.5,-298 829.5,-304 829.5,-310 829.5,-310 829.5,-322 829.5,-322 829.5,-328 823.5,-334 817.5,-334"/>
<text text-anchor="middle" x="775.5" y="-312.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">IsRegionHealthy</text>
</g>
<!-- Check&#45;&gt;IsRegionHealthy -->
<g id="edge8" class="edge">
<title>Check&#45;&gt;IsRegionHealthy</title>
<path fill="none" stroke="#666666" d="M155.27,-414.45C167.11,-411 179.35,-407.69 191,-405 377.91,-361.8 603.5,-334.19 711.24,-322.47"/>
<polygon fill="#666666" stroke="#666666" points="711.72,-325.93 721.29,-321.38 710.97,-318.97 711.72,-325.93"/>
</g>
<!-- CreateMergeRegionOperator -->
<g id="node11" class="node">
<title>CreateMergeRegionOperator</title>
<path fill="none" stroke="#1c2123" d="M851,-468C851,-468 700,-468 700,-468 694,-468 688,-462 688,-456 688,-456 688,-444 688,-444 688,-438 694,-432 700,-432 700,-432 851,-432 851,-432 857,-432 863,-438 863,-444 863,-444 863,-456 863,-456 863,-462 857,-468 851,-468"/>
<text text-anchor="middle" x="775.5" y="-446.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CreateMergeRegionOperator</text>
</g>
<!-- Check&#45;&gt;CreateMergeRegionOperator -->
<g id="edge9" class="edge">
<title>Check&#45;&gt;CreateMergeRegionOperator</title>
<path fill="none" stroke="#666666" d="M155.3,-438.3C278.39,-440.63 536.59,-445.5 677.57,-448.17"/>
<polygon fill="#666666" stroke="#666666" points="677.87,-451.67 687.93,-448.36 678,-444.68 677.87,-451.67"/>
</g>
<!-- Check&#45;&gt;checkTarget -->
<g id="edge10" class="edge">
<title>Check&#45;&gt;checkTarget</title>
<path fill="none" stroke="#666666" d="M155.21,-431.66C236.48,-425.34 372.35,-414.78 464.61,-407.61"/>
<polygon fill="#666666" stroke="#666666" points="465.1,-411.08 474.8,-406.82 464.56,-404.1 465.1,-411.08"/>
</g>
<!-- isRegionMatch -->
<g id="node13" class="node">
<title>isRegionMatch</title>
<path fill="none" stroke="#1c2123" d="M911,-351C911,-351 1048,-351 1048,-351 1054,-351 1060,-357 1060,-363 1060,-363 1060,-415 1060,-415 1060,-421 1054,-427 1048,-427 1048,-427 911,-427 911,-427 905,-427 899,-421 899,-415 899,-415 899,-363 899,-363 899,-357 905,-351 911,-351"/>
<text text-anchor="middle" x="979.5" y="-411.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">isRegionMatch</text>
<polyline fill="none" stroke="#1c2123" points="899,-404 1060,-404 "/>
<text text-anchor="start" x="907" y="-388.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">遍历source的peers</text>
<text text-anchor="start" x="907" y="-373.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 检查target在source peers</text>
<text text-anchor="start" x="907" y="-358.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> storeID上 是否也有peer</text>
</g>
<!-- CreateMergeRegionOperator&#45;&gt;isRegionMatch -->
<g id="edge11" class="edge">
<title>CreateMergeRegionOperator&#45;&gt;isRegionMatch</title>
<path fill="none" stroke="#666666" d="M836.29,-431.95C852.78,-426.97 871.04,-421.45 888.82,-416.08"/>
<polygon fill="#666666" stroke="#666666" points="890.08,-419.36 898.64,-413.12 888.06,-412.66 890.08,-419.36"/>
</g>
<!-- NewBuilder_source_SetPeers -->
<g id="node14" class="node">
<title>NewBuilder_source_SetPeers</title>
<path fill="none" stroke="#1c2123" d="M1127.5,-429.5C1127.5,-429.5 1266.5,-429.5 1266.5,-429.5 1272.5,-429.5 1278.5,-435.5 1278.5,-441.5 1278.5,-441.5 1278.5,-508.5 1278.5,-508.5 1278.5,-514.5 1272.5,-520.5 1266.5,-520.5 1266.5,-520.5 1127.5,-520.5 1127.5,-520.5 1121.5,-520.5 1115.5,-514.5 1115.5,-508.5 1115.5,-508.5 1115.5,-441.5 1115.5,-441.5 1115.5,-435.5 1121.5,-429.5 1127.5,-429.5"/>
<text text-anchor="start" x="1123.5" y="-505.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">NewBuilder(&quot;&quot;, cluster,</text>
<text text-anchor="start" x="1123.5" y="-490.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> source).SetPeers(peers)</text>
<polyline fill="none" stroke="#1c2123" points="1115.5,-482.5 1278.5,-482.5 "/>
<text text-anchor="start" x="1123.5" y="-467.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果不match</text>
<text text-anchor="start" x="1123.5" y="-452.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 向让source region的peer</text>
<text text-anchor="start" x="1123.5" y="-437.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 的storeID和target的一致</text>
</g>
<!-- CreateMergeRegionOperator&#45;&gt;NewBuilder_source_SetPeers -->
<g id="edge12" class="edge">
<title>CreateMergeRegionOperator&#45;&gt;NewBuilder_source_SetPeers</title>
<path fill="none" stroke="#666666" d="M863.17,-455.16C933.83,-459.38 1033.32,-465.31 1105.1,-469.58"/>
<polygon fill="#666666" stroke="#666666" points="1105.3,-473.1 1115.49,-470.2 1105.71,-466.11 1105.3,-473.1"/>
</g>
<!-- MergeRegion -->
<g id="node15" class="node">
<title>MergeRegion</title>
<path fill="none" stroke="#1c2123" d="M1659,-525C1659,-525 1591,-525 1591,-525 1585,-525 1579,-519 1579,-513 1579,-513 1579,-501 1579,-501 1579,-495 1585,-489 1591,-489 1591,-489 1659,-489 1659,-489 1665,-489 1671,-495 1671,-501 1671,-501 1671,-513 1671,-513 1671,-519 1665,-525 1659,-525"/>
<text text-anchor="middle" x="1625" y="-503.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">MergeRegion</text>
</g>
<!-- CreateMergeRegionOperator&#45;&gt;MergeRegion -->
<g id="edge13" class="edge">
<title>CreateMergeRegionOperator&#45;&gt;MergeRegion</title>
<path fill="none" stroke="#666666" d="M841.38,-468.05C919.8,-489.53 1047.27,-523.37 1096,-530 1292.87,-556.8 1347.24,-569.99 1543,-536 1552.82,-534.29 1563.03,-531.51 1572.75,-528.32"/>
<polygon fill="#666666" stroke="#666666" points="1573.98,-531.6 1582.28,-525.02 1571.69,-524.98 1573.98,-531.6"/>
</g>
<!-- checkTarget&#45;&gt;IsRegionHot -->
<g id="edge21" class="edge">
<title>checkTarget&#45;&gt;IsRegionHot</title>
<path fill="none" stroke="#666666" d="M607.56,-430.64C630.62,-446.06 659.98,-464.15 688,-477 698.95,-482.02 711.08,-486.45 722.72,-490.2"/>
<polygon fill="#666666" stroke="#666666" points="721.75,-493.57 732.34,-493.19 723.82,-486.88 721.75,-493.57"/>
</g>
<!-- checkTarget&#45;&gt;IsRegionReplicated -->
<g id="edge22" class="edge">
<title>checkTarget&#45;&gt;IsRegionReplicated</title>
<path fill="none" stroke="#666666" d="M585.9,-430.54C608.19,-460.22 645.73,-504.57 688,-531 693.04,-534.15 698.48,-536.96 704.09,-539.46"/>
<polygon fill="#666666" stroke="#666666" points="703.07,-542.83 713.65,-543.38 705.72,-536.35 703.07,-542.83"/>
</g>
<!-- checkTarget&#45;&gt;IsRegionHealthy -->
<g id="edge23" class="edge">
<title>checkTarget&#45;&gt;IsRegionHealthy</title>
<path fill="none" stroke="#666666" d="M626.65,-369.4C646.07,-360.36 667.73,-350.81 688,-343 695.52,-340.11 703.48,-337.29 711.42,-334.64"/>
<polygon fill="#666666" stroke="#666666" points="712.64,-337.92 721.06,-331.49 710.47,-331.27 712.64,-337.92"/>
</g>
<!-- checkTarget&#45;&gt;CreateMergeRegionOperator -->
<g id="edge20" class="edge">
<title>checkTarget&#45;&gt;CreateMergeRegionOperator</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M652.04,-420.84C664.17,-423.73 676.63,-426.7 688.73,-429.58"/>
<polygon fill="green" stroke="green" points="688.25,-433.06 698.79,-431.97 689.88,-426.25 688.25,-433.06"/>
</g>
<!-- AllowMerge -->
<g id="node19" class="node">
<title>AllowMerge</title>
<path fill="none" stroke="#1c2123" d="M731.5,-352.5C731.5,-352.5 819.5,-352.5 819.5,-352.5 825.5,-352.5 831.5,-358.5 831.5,-364.5 831.5,-364.5 831.5,-401.5 831.5,-401.5 831.5,-407.5 825.5,-413.5 819.5,-413.5 819.5,-413.5 731.5,-413.5 731.5,-413.5 725.5,-413.5 719.5,-407.5 719.5,-401.5 719.5,-401.5 719.5,-364.5 719.5,-364.5 719.5,-358.5 725.5,-352.5 731.5,-352.5"/>
<text text-anchor="middle" x="775.5" y="-398.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">AllowMerge</text>
<polyline fill="none" stroke="#1c2123" points="719.5,-390.5 831.5,-390.5 "/>
<text text-anchor="start" x="727.5" y="-375.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">检查两个region</text>
<text text-anchor="start" x="727.5" y="-360.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 是否允许merge</text>
</g>
<!-- checkTarget&#45;&gt;AllowMerge -->
<g id="edge24" class="edge">
<title>checkTarget&#45;&gt;AllowMerge</title>
<path fill="none" stroke="#666666" d="M652.04,-392.91C671.23,-391.36 691.21,-389.74 709.34,-388.27"/>
<polygon fill="#666666" stroke="#666666" points="709.8,-391.75 719.49,-387.45 709.24,-384.77 709.8,-391.75"/>
</g>
<!-- isRegionMatch&#45;&gt;NewBuilder_source_SetPeers -->
<g id="edge14" class="edge">
<title>isRegionMatch&#45;&gt;NewBuilder_source_SetPeers</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1060.13,-420.78C1075.03,-426.72 1090.69,-432.97 1105.87,-439.03"/>
<polygon fill="green" stroke="green" points="1104.67,-442.32 1115.26,-442.78 1107.26,-435.82 1104.67,-442.32"/>
</g>
<!-- IsLearner -->
<g id="node17" class="node">
<title>IsLearner</title>
<path fill="none" stroke="#1c2123" d="M1167.5,-364C1167.5,-364 1226.5,-364 1226.5,-364 1232.5,-364 1238.5,-370 1238.5,-376 1238.5,-376 1238.5,-398 1238.5,-398 1238.5,-404 1232.5,-410 1226.5,-410 1226.5,-410 1167.5,-410 1167.5,-410 1161.5,-410 1155.5,-404 1155.5,-398 1155.5,-398 1155.5,-376 1155.5,-376 1155.5,-370 1161.5,-364 1167.5,-364"/>
<text text-anchor="middle" x="1197" y="-394.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">IsLearner</text>
<polyline fill="none" stroke="#1c2123" points="1155.5,-387 1238.5,-387 "/>
<text text-anchor="middle" x="1197" y="-371.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">learner不算</text>
</g>
<!-- isRegionMatch&#45;&gt;IsLearner -->
<g id="edge17" class="edge">
<title>isRegionMatch&#45;&gt;IsLearner</title>
<path fill="none" stroke="#666666" d="M1060.13,-388.26C1088.58,-388 1119.85,-387.71 1145.21,-387.47"/>
<polygon fill="#666666" stroke="#666666" points="1145.36,-390.97 1155.33,-387.38 1145.3,-383.97 1145.36,-390.97"/>
</g>
<!-- GetStorePeer -->
<g id="node18" class="node">
<title>GetStorePeer</title>
<path fill="none" stroke="#1c2123" d="M1108,-299C1108,-299 1286,-299 1286,-299 1292,-299 1298,-305 1298,-311 1298,-311 1298,-333 1298,-333 1298,-339 1292,-345 1286,-345 1286,-345 1108,-345 1108,-345 1102,-345 1096,-339 1096,-333 1096,-333 1096,-311 1096,-311 1096,-305 1102,-299 1108,-299"/>
<text text-anchor="middle" x="1197" y="-329.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">GetStorePeer</text>
<polyline fill="none" stroke="#1c2123" points="1096,-322 1298,-322 "/>
<text text-anchor="start" x="1104" y="-306.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">rerturns the peer in specified store</text>
</g>
<!-- isRegionMatch&#45;&gt;GetStorePeer -->
<g id="edge18" class="edge">
<title>isRegionMatch&#45;&gt;GetStorePeer</title>
<path fill="none" stroke="#666666" d="M1060.13,-364.24C1076.97,-359.01 1094.79,-353.47 1111.79,-348.18"/>
<polygon fill="#666666" stroke="#666666" points="1113.19,-351.41 1121.7,-345.1 1111.11,-344.73 1113.19,-351.41"/>
</g>
<!-- matchOp -->
<g id="node16" class="node">
<title>matchOp</title>
<path fill="none" stroke="#1c2123" d="M1346,-412C1346,-412 1531,-412 1531,-412 1537,-412 1543,-418 1543,-424 1543,-424 1543,-514 1543,-514 1543,-520 1537,-526 1531,-526 1531,-526 1346,-526 1346,-526 1340,-526 1334,-520 1334,-514 1334,-514 1334,-424 1334,-424 1334,-418 1340,-412 1346,-412"/>
<text text-anchor="middle" x="1438.5" y="-510.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">matchOp</text>
<polyline fill="none" stroke="#1c2123" points="1334,-503 1543,-503 "/>
<text text-anchor="start" x="1342" y="-487.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">matchOp会发给source region</text>
<text text-anchor="start" x="1342" y="-472.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将source region的peers</text>
<text text-anchor="start" x="1342" y="-457.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 对齐到target上</text>
<polyline fill="none" stroke="#1c2123" points="1334,-450 1543,-450 "/>
<text text-anchor="start" x="1342" y="-434.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">执行完之后，再发Merge Region</text>
<text text-anchor="start" x="1342" y="-419.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Op给soure region</text>
</g>
<!-- NewBuilder_source_SetPeers&#45;&gt;matchOp -->
<g id="edge15" class="edge">
<title>NewBuilder_source_SetPeers&#45;&gt;matchOp</title>
<path fill="none" stroke="#666666" d="M1278.75,-472.98C1293.09,-472.62 1308.28,-472.24 1323.34,-471.86"/>
<polygon fill="#666666" stroke="#666666" points="1323.83,-475.35 1333.74,-471.6 1323.65,-468.35 1323.83,-475.35"/>
</g>
<!-- matchOp&#45;&gt;MergeRegion -->
<g id="edge16" class="edge">
<title>matchOp&#45;&gt;MergeRegion</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1543.08,-490.33C1551.95,-492.16 1560.69,-493.96 1568.94,-495.66"/>
<polygon fill="green" stroke="green" points="1568.26,-499.09 1578.76,-497.68 1569.67,-492.24 1568.26,-499.09"/>
</g>
</g>
</svg>
