<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: peer_propose_normal Pages: 1 -->
<svg width="1411pt" height="718pt"
 viewBox="0.00 0.00 1411.00 717.53" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 713.53)">
<title>peer_propose_normal</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-713.53 1407,-713.53 1407,4 -4,4"/>
<!-- Peer__propose -->
<g id="node1" class="node">
<title>Peer__propose</title>
<path fill="none" stroke="#1c2123" d="M12,-133C12,-133 51,-133 51,-133 57,-133 63,-139 63,-145 63,-145 63,-159 63,-159 63,-165 57,-171 51,-171 51,-171 12,-171 12,-171 6,-171 0,-165 0,-159 0,-159 0,-145 0,-145 0,-139 6,-133 12,-133"/>
<text text-anchor="start" x="8" y="-155.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="8" y="-140.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> propose</text>
</g>
<!-- Peer__propose_normal -->
<g id="node2" class="node">
<title>Peer__propose_normal</title>
<path fill="none" stroke="#1c2123" d="M188.5,-469C188.5,-469 273.5,-469 273.5,-469 279.5,-469 285.5,-475 285.5,-481 285.5,-481 285.5,-525 285.5,-525 285.5,-531 279.5,-537 273.5,-537 273.5,-537 188.5,-537 188.5,-537 182.5,-537 176.5,-531 176.5,-525 176.5,-525 176.5,-481 176.5,-481 176.5,-475 182.5,-469 188.5,-469"/>
<text text-anchor="start" x="184.5" y="-521.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="184.5" y="-506.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> propose_normal</text>
<text text-anchor="start" x="184.5" y="-491.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 返回proposal</text>
<text text-anchor="start" x="184.5" y="-476.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> index</text>
</g>
<!-- Peer__propose&#45;&gt;Peer__propose_normal -->
<g id="edge1" class="edge">
<title>Peer__propose&#45;&gt;Peer__propose_normal</title>
<path fill="none" stroke="#666666" d="M43.26,-171.12C73.97,-225.7 162.59,-383.19 205.77,-459.94"/>
<polygon fill="#666666" stroke="#666666" points="202.85,-461.89 210.81,-468.89 208.95,-458.46 202.85,-461.89"/>
</g>
<!-- Peer__post_propose -->
<g id="node3" class="node">
<title>Peer__post_propose</title>
<path fill="none" stroke="#1c2123" d="M175.5,-0.5C175.5,-0.5 286.5,-0.5 286.5,-0.5 292.5,-0.5 298.5,-6.5 298.5,-12.5 298.5,-12.5 298.5,-49.5 298.5,-49.5 298.5,-55.5 292.5,-61.5 286.5,-61.5 286.5,-61.5 175.5,-61.5 175.5,-61.5 169.5,-61.5 163.5,-55.5 163.5,-49.5 163.5,-49.5 163.5,-12.5 163.5,-12.5 163.5,-6.5 169.5,-0.5 175.5,-0.5"/>
<text text-anchor="start" x="171.5" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="171.5" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> post_propose</text>
<polyline fill="none" stroke="#1c2123" points="163.5,-23.5 298.5,-23.5 "/>
<text text-anchor="start" x="171.5" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将Proposal加入队列</text>
</g>
<!-- Peer__propose&#45;&gt;Peer__post_propose -->
<g id="edge2" class="edge">
<title>Peer__propose&#45;&gt;Peer__post_propose</title>
<path fill="none" stroke="#666666" d="M43.55,-132.86C55.13,-114.44 74.96,-87.09 99,-71 115.32,-60.07 134.75,-52.03 153.58,-46.16"/>
<polygon fill="#666666" stroke="#666666" points="154.75,-49.46 163.35,-43.27 152.77,-42.75 154.75,-49.46"/>
</g>
<!-- CmdEpochChecker__attach_to_conflict_cmd -->
<g id="node4" class="node">
<title>CmdEpochChecker__attach_to_conflict_cmd</title>
<path fill="none" stroke="#1c2123" d="M351,-170C351,-170 111,-170 111,-170 105,-170 99,-164 99,-158 99,-158 99,-146 99,-146 99,-140 105,-134 111,-134 111,-134 351,-134 351,-134 357,-134 363,-140 363,-146 363,-146 363,-158 363,-158 363,-164 357,-170 351,-170"/>
<text text-anchor="middle" x="231" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdEpochChecker__attach_to_conflict_cmd</text>
</g>
<!-- Peer__propose&#45;&gt;CmdEpochChecker__attach_to_conflict_cmd -->
<g id="edge3" class="edge">
<title>Peer__propose&#45;&gt;CmdEpochChecker__attach_to_conflict_cmd</title>
<path fill="none" stroke="#666666" d="M63.36,-152C70.93,-152 79.53,-152 88.74,-152"/>
<polygon fill="#666666" stroke="#666666" points="88.95,-155.5 98.95,-152 88.95,-148.5 88.95,-155.5"/>
</g>
<!-- CmdEpochChecker__post_propose -->
<g id="node5" class="node">
<title>CmdEpochChecker__post_propose</title>
<path fill="none" stroke="#1c2123" d="M323.5,-116C323.5,-116 138.5,-116 138.5,-116 132.5,-116 126.5,-110 126.5,-104 126.5,-104 126.5,-92 126.5,-92 126.5,-86 132.5,-80 138.5,-80 138.5,-80 323.5,-80 323.5,-80 329.5,-80 335.5,-86 335.5,-92 335.5,-92 335.5,-104 335.5,-104 335.5,-110 329.5,-116 323.5,-116"/>
<text text-anchor="middle" x="231" y="-94.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdEpochChecker__post_propose</text>
</g>
<!-- Peer__propose&#45;&gt;CmdEpochChecker__post_propose -->
<g id="edge4" class="edge">
<title>Peer__propose&#45;&gt;CmdEpochChecker__post_propose</title>
<path fill="none" stroke="#666666" d="M63.2,-138.17C74.32,-133.53 87.08,-128.62 99,-125 106.66,-122.68 114.64,-120.49 122.7,-118.44"/>
<polygon fill="#666666" stroke="#666666" points="123.69,-121.8 132.57,-116.02 122.02,-115.01 123.69,-121.8"/>
</g>
<!-- Proposal -->
<g id="node6" class="node">
<title>Proposal</title>
<path fill="none" stroke="#1c2123" d="M689,-57.5C689,-57.5 922,-57.5 922,-57.5 928,-57.5 934,-63.5 934,-69.5 934,-69.5 934,-198.5 934,-198.5 934,-204.5 928,-210.5 922,-210.5 922,-210.5 689,-210.5 689,-210.5 683,-210.5 677,-204.5 677,-198.5 677,-198.5 677,-69.5 677,-69.5 677,-63.5 683,-57.5 689,-57.5"/>
<text text-anchor="middle" x="805.5" y="-195.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Proposal</text>
<polyline fill="none" stroke="#1c2123" points="677,-187.5 934,-187.5 "/>
<text text-anchor="start" x="685" y="-172.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub is_conf_change: bool,</text>
<polyline fill="none" stroke="#1c2123" points="677,-164.5 934,-164.5 "/>
<text text-anchor="start" x="685" y="-149.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub index: u64,</text>
<polyline fill="none" stroke="#1c2123" points="677,-141.5 934,-141.5 "/>
<text text-anchor="start" x="685" y="-126.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub term: u64,</text>
<polyline fill="none" stroke="#1c2123" points="677,-118.5 934,-118.5 "/>
<text text-anchor="start" x="685" y="-103.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub cb: Callback&lt;S&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="677,-95.5 934,-95.5 "/>
<text text-anchor="start" x="685" y="-80.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub renew_lease_time: Option&lt;Timespec&gt;,</text>
<text text-anchor="start" x="685" y="-65.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> pub must_pass_epoch_check: bool,</text>
</g>
<!-- Peer__propose&#45;&gt;Proposal -->
<g id="edge5" class="edge">
<title>Peer__propose&#45;&gt;Proposal</title>
<path fill="none" stroke="#666666" d="M63.2,-167.34C74.2,-172.06 86.89,-176.64 99,-179 293.54,-216.99 523.4,-189.14 666.59,-163.4"/>
<polygon fill="#666666" stroke="#666666" points="667.54,-166.78 676.75,-161.55 666.29,-159.9 667.54,-166.78"/>
</g>
<!-- Peer__next_proposal_index -->
<g id="node9" class="node">
<title>Peer__next_proposal_index</title>
<path fill="none" stroke="#1c2123" d="M419.5,-242C419.5,-242 620.5,-242 620.5,-242 626.5,-242 632.5,-248 632.5,-254 632.5,-254 632.5,-374 632.5,-374 632.5,-380 626.5,-386 620.5,-386 620.5,-386 419.5,-386 419.5,-386 413.5,-386 407.5,-380 407.5,-374 407.5,-374 407.5,-254 407.5,-254 407.5,-248 413.5,-242 419.5,-242"/>
<text text-anchor="start" x="415.5" y="-370.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="415.5" y="-355.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> next_proposal_index</text>
<polyline fill="none" stroke="#1c2123" points="407.5,-348 632.5,-348 "/>
<text text-anchor="start" x="415.5" y="-332.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_group.raft.raft_log.last_index +1</text>
<text text-anchor="start" x="415.5" y="-317.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 在调用RawNode::Propose前后调用</text>
<text text-anchor="start" x="415.5" y="-302.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 用来检查message 是否</text>
<text text-anchor="start" x="415.5" y="-287.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 被drop silently</text>
<polyline fill="none" stroke="#1c2123" points="407.5,-280 632.5,-280 "/>
<text text-anchor="start" x="415.5" y="-264.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">也会被用来设置后面</text>
<text text-anchor="start" x="415.5" y="-249.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 的Proposal的index字段</text>
</g>
<!-- Peer__propose_normal&#45;&gt;Peer__next_proposal_index -->
<g id="edge12" class="edge">
<title>Peer__propose_normal&#45;&gt;Peer__next_proposal_index</title>
<path fill="none" stroke="#666666" d="M283.64,-468.99C316.4,-447.42 360.19,-418.58 401.1,-391.64"/>
<polygon fill="#666666" stroke="#666666" points="403.09,-394.52 409.51,-386.1 399.24,-388.68 403.09,-394.52"/>
</g>
<!-- Peer__pre_propose -->
<g id="node11" class="node">
<title>Peer__pre_propose</title>
<path fill="none" stroke="#1c2123" d="M464.5,-413.5C464.5,-413.5 575.5,-413.5 575.5,-413.5 581.5,-413.5 587.5,-419.5 587.5,-425.5 587.5,-425.5 587.5,-462.5 587.5,-462.5 587.5,-468.5 581.5,-474.5 575.5,-474.5 575.5,-474.5 464.5,-474.5 464.5,-474.5 458.5,-474.5 452.5,-468.5 452.5,-462.5 452.5,-462.5 452.5,-425.5 452.5,-425.5 452.5,-419.5 458.5,-413.5 464.5,-413.5"/>
<text text-anchor="start" x="460.5" y="-459.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="460.5" y="-444.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> pre_propose</text>
<polyline fill="none" stroke="#1c2123" points="452.5,-436.5 587.5,-436.5 "/>
<text text-anchor="start" x="460.5" y="-421.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建ProposalContext</text>
</g>
<!-- Peer__propose_normal&#45;&gt;Peer__pre_propose -->
<g id="edge13" class="edge">
<title>Peer__propose_normal&#45;&gt;Peer__pre_propose</title>
<path fill="none" stroke="#666666" d="M285.65,-491.97C329.82,-482.89 392.99,-469.9 442.47,-459.73"/>
<polygon fill="#666666" stroke="#666666" points="443.4,-463.11 452.49,-457.67 441.99,-456.26 443.4,-463.11"/>
</g>
<!-- Peer__has_applied_to_current_term -->
<g id="node12" class="node">
<title>Peer__has_applied_to_current_term</title>
<path fill="none" stroke="#1c2123" d="M614.5,-621C614.5,-621 425.5,-621 425.5,-621 419.5,-621 413.5,-615 413.5,-609 413.5,-609 413.5,-597 413.5,-597 413.5,-591 419.5,-585 425.5,-585 425.5,-585 614.5,-585 614.5,-585 620.5,-585 626.5,-591 626.5,-597 626.5,-597 626.5,-609 626.5,-609 626.5,-615 620.5,-621 614.5,-621"/>
<text text-anchor="middle" x="520" y="-599.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer__has_applied_to_current_term</text>
</g>
<!-- Peer__propose_normal&#45;&gt;Peer__has_applied_to_current_term -->
<g id="edge14" class="edge">
<title>Peer__propose_normal&#45;&gt;Peer__has_applied_to_current_term</title>
<path fill="none" stroke="#666666" d="M285.51,-529.51C317.78,-544.71 360.06,-563.24 399,-576 405.84,-578.24 412.95,-580.36 420.15,-582.35"/>
<polygon fill="#666666" stroke="#666666" points="419.44,-585.78 430.01,-584.98 421.25,-579.02 419.44,-585.78"/>
</g>
<!-- RawNode__propose -->
<g id="node13" class="node">
<title>RawNode__propose</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1020,-318.5C1020,-318.5 1114,-318.5 1114,-318.5 1120,-318.5 1126,-324.5 1126,-330.5 1126,-330.5 1126,-367.5 1126,-367.5 1126,-373.5 1120,-379.5 1114,-379.5 1114,-379.5 1020,-379.5 1020,-379.5 1014,-379.5 1008,-373.5 1008,-367.5 1008,-367.5 1008,-330.5 1008,-330.5 1008,-324.5 1014,-318.5 1020,-318.5"/>
<text text-anchor="start" x="1016" y="-364.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">RawNode</text>
<text text-anchor="start" x="1016" y="-349.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> propose</text>
<polyline fill="none" stroke="#8a8898" points="1008,-341.5 1126,-341.5 "/>
<text text-anchor="start" x="1016" y="-326.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">调用raft的propsal</text>
</g>
<!-- Peer__propose_normal&#45;&gt;RawNode__propose -->
<g id="edge15" class="edge">
<title>Peer__propose_normal&#45;&gt;RawNode__propose</title>
<path fill="none" stroke="#666666" d="M263.33,-537.01C294.33,-567.96 344.87,-611.54 399,-630 624.05,-706.75 733.45,-759.75 934,-632 1018.46,-578.2 1049.76,-454.7 1060.64,-390.09"/>
<polygon fill="#666666" stroke="#666666" points="1064.15,-390.3 1062.28,-379.87 1057.24,-389.19 1064.15,-390.3"/>
</g>
<!-- CmdEpochChecker__propose_check_epoch -->
<g id="node14" class="node">
<title>CmdEpochChecker__propose_check_epoch</title>
<path fill="none" stroke="#1c2123" d="M747.5,-584C747.5,-584 863.5,-584 863.5,-584 869.5,-584 875.5,-590 875.5,-596 875.5,-596 875.5,-610 875.5,-610 875.5,-616 869.5,-622 863.5,-622 863.5,-622 747.5,-622 747.5,-622 741.5,-622 735.5,-616 735.5,-610 735.5,-610 735.5,-596 735.5,-596 735.5,-590 741.5,-584 747.5,-584"/>
<text text-anchor="start" x="743.5" y="-606.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdEpochChecker</text>
<text text-anchor="start" x="743.5" y="-591.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> propose_check_epoch</text>
</g>
<!-- Peer__propose_normal&#45;&gt;CmdEpochChecker__propose_check_epoch -->
<g id="edge16" class="edge">
<title>Peer__propose_normal&#45;&gt;CmdEpochChecker__propose_check_epoch</title>
<path fill="none" stroke="#666666" d="M285.85,-499.71C382.65,-494.73 581.54,-489.06 641,-522 665.59,-535.62 653.71,-558.26 677,-574 691.31,-583.67 708.37,-590.16 725.29,-594.49"/>
<polygon fill="#666666" stroke="#666666" points="724.67,-597.94 735.21,-596.81 726.26,-591.13 724.67,-597.94"/>
</g>
<!-- Peer__last_proposed_prepare_merge_idx -->
<g id="node15" class="node">
<title>Peer__last_proposed_prepare_merge_idx</title>
<path fill="none" stroke="#1c2123" d="M629,-567C629,-567 411,-567 411,-567 405,-567 399,-561 399,-555 399,-555 399,-543 399,-543 399,-537 405,-531 411,-531 411,-531 629,-531 629,-531 635,-531 641,-537 641,-543 641,-543 641,-555 641,-555 641,-561 635,-567 629,-567"/>
<text text-anchor="middle" x="520" y="-545.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer__last_proposed_prepare_merge_idx</text>
</g>
<!-- Peer__propose_normal&#45;&gt;Peer__last_proposed_prepare_merge_idx -->
<g id="edge17" class="edge">
<title>Peer__propose_normal&#45;&gt;Peer__last_proposed_prepare_merge_idx</title>
<path fill="none" stroke="#666666" d="M285.65,-511.6C316.85,-516.6 357.53,-523.12 396.17,-529.31"/>
<polygon fill="#666666" stroke="#666666" points="396.05,-532.84 406.48,-530.96 397.16,-525.93 396.05,-532.84"/>
</g>
<!-- Peer__proposals -->
<g id="node7" class="node">
<title>Peer__proposals</title>
<path fill="#feed9b" stroke="#f7e495" d="M982,-51.5C982,-51.5 1152,-51.5 1152,-51.5 1158,-51.5 1164,-57.5 1164,-63.5 1164,-63.5 1164,-100.5 1164,-100.5 1164,-106.5 1158,-112.5 1152,-112.5 1152,-112.5 982,-112.5 982,-112.5 976,-112.5 970,-106.5 970,-100.5 970,-100.5 970,-63.5 970,-63.5 970,-57.5 976,-51.5 982,-51.5"/>
<text text-anchor="start" x="978" y="-97.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Peer</text>
<text text-anchor="start" x="978" y="-82.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> proposals</text>
<polyline fill="none" stroke="#f7e495" points="970,-74.5 1164,-74.5 "/>
<text text-anchor="start" x="978" y="-59.3" font-family="Times,serif" font-size="14.00" fill="#40575d">ProposalQueue&lt;EK::Snapshot&gt;,</text>
</g>
<!-- Peer__post_propose&#45;&gt;Peer__proposals -->
<g id="edge6" class="edge">
<title>Peer__post_propose&#45;&gt;Peer__proposals</title>
<path fill="none" stroke="#666666" d="M298.71,-27.59C423.93,-22.3 702.46,-15.81 934,-48 942.52,-49.18 951.27,-50.72 960.03,-52.47"/>
<polygon fill="#666666" stroke="#666666" points="959.4,-55.92 969.91,-54.55 960.84,-49.07 959.4,-55.92"/>
</g>
<!-- monotonic_raw_now -->
<g id="node8" class="node">
<title>monotonic_raw_now</title>
<path fill="none" stroke="#1c2123" d="M466,-51.5C466,-51.5 574,-51.5 574,-51.5 580,-51.5 586,-57.5 586,-63.5 586,-63.5 586,-100.5 586,-100.5 586,-106.5 580,-112.5 574,-112.5 574,-112.5 466,-112.5 466,-112.5 460,-112.5 454,-106.5 454,-100.5 454,-100.5 454,-63.5 454,-63.5 454,-57.5 460,-51.5 466,-51.5"/>
<text text-anchor="middle" x="520" y="-97.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">monotonic_raw_now</text>
<polyline fill="none" stroke="#1c2123" points="454,-89.5 586,-89.5 "/>
<text text-anchor="start" x="462" y="-74.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">作为Proposal的</text>
<text text-anchor="start" x="462" y="-59.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> renew_lease_time</text>
</g>
<!-- Peer__post_propose&#45;&gt;monotonic_raw_now -->
<g id="edge7" class="edge">
<title>Peer__post_propose&#45;&gt;monotonic_raw_now</title>
<path fill="none" stroke="#666666" d="M298.56,-42.83C341.98,-50.54 398.73,-60.63 443.78,-68.63"/>
<polygon fill="#666666" stroke="#666666" points="443.33,-72.11 453.79,-70.41 444.55,-65.22 443.33,-72.11"/>
</g>
<!-- Proposal&#45;&gt;Peer__proposals -->
<g id="edge11" class="edge">
<title>Proposal&#45;&gt;Peer__proposals</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M934.35,-108.38C942.9,-106.67 951.46,-104.95 959.89,-103.26"/>
<polygon fill="green" stroke="green" points="960.59,-106.69 969.71,-101.3 959.21,-99.83 960.59,-106.69"/>
</g>
<!-- ProposalQueue -->
<g id="node10" class="node">
<title>ProposalQueue</title>
<path fill="none" stroke="#1c2123" d="M1212,-47.5C1212,-47.5 1391,-47.5 1391,-47.5 1397,-47.5 1403,-53.5 1403,-59.5 1403,-59.5 1403,-104.5 1403,-104.5 1403,-110.5 1397,-116.5 1391,-116.5 1391,-116.5 1212,-116.5 1212,-116.5 1206,-116.5 1200,-110.5 1200,-104.5 1200,-104.5 1200,-59.5 1200,-59.5 1200,-53.5 1206,-47.5 1212,-47.5"/>
<text text-anchor="middle" x="1301.5" y="-101.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ProposalQueue</text>
<polyline fill="none" stroke="#1c2123" points="1200,-93.5 1403,-93.5 "/>
<text text-anchor="start" x="1208" y="-78.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tag: String,</text>
<polyline fill="none" stroke="#1c2123" points="1200,-70.5 1403,-70.5 "/>
<text text-anchor="start" x="1208" y="-55.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">queue: VecDeque&lt;Proposal&lt;S&gt;&gt;,</text>
</g>
<!-- Peer__proposals&#45;&gt;ProposalQueue -->
<g id="edge10" class="edge">
<title>Peer__proposals&#45;&gt;ProposalQueue</title>
<path fill="none" stroke="#666666" d="M1164.24,-82C1172.69,-82 1181.27,-82 1189.82,-82"/>
<polygon fill="#666666" stroke="#666666" points="1189.82,-85.5 1199.82,-82 1189.82,-78.5 1189.82,-85.5"/>
</g>
<!-- monotonic_raw_now&#45;&gt;Proposal -->
<g id="edge8" class="edge">
<title>monotonic_raw_now&#45;&gt;Proposal:renew_lease_time</title>
<path fill="none" stroke="#666666" d="M586.25,-78.37C611.03,-77.25 639.78,-76.25 666.76,-76.04"/>
<polygon fill="#666666" stroke="#666666" points="667.01,-79.54 677,-76 666.99,-72.54 667.01,-79.54"/>
</g>
<!-- Peer__next_proposal_index&#45;&gt;Proposal -->
<g id="edge9" class="edge">
<title>Peer__next_proposal_index&#45;&gt;Proposal:index</title>
<path fill="none" stroke="#666666" d="M612.42,-241.76C622.53,-232.21 632.3,-222.19 641,-212 658.3,-191.75 649.57,-162.25 666.98,-154.77"/>
<polygon fill="#666666" stroke="#666666" points="667.76,-158.19 677,-153 666.54,-151.3 667.76,-158.19"/>
</g>
<!-- ProposalContext -->
<g id="node16" class="node">
<title>ProposalContext</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M689,-295.5C689,-295.5 922,-295.5 922,-295.5 928,-295.5 934,-301.5 934,-307.5 934,-307.5 934,-390.5 934,-390.5 934,-396.5 928,-402.5 922,-402.5 922,-402.5 689,-402.5 689,-402.5 683,-402.5 677,-396.5 677,-390.5 677,-390.5 677,-307.5 677,-307.5 677,-301.5 683,-295.5 689,-295.5"/>
<text text-anchor="middle" x="805.5" y="-387.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ProposalContext</text>
<polyline fill="none" stroke="#8a8898" points="677,-379.5 934,-379.5 "/>
<text text-anchor="start" x="685" y="-364.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">bitflags</text>
<text text-anchor="start" x="685" y="-349.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> const SYNC_LOG = 0b0000_0001;</text>
<polyline fill="none" stroke="#8a8898" points="677,-341.5 934,-341.5 "/>
<text text-anchor="start" x="685" y="-326.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">const SPLIT = 0b0000_0010;</text>
<polyline fill="none" stroke="#8a8898" points="677,-318.5 934,-318.5 "/>
<text text-anchor="start" x="685" y="-303.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">const PREPARE_MERGE = 0b0000_0100;</text>
</g>
<!-- Peer__pre_propose&#45;&gt;ProposalContext -->
<g id="edge18" class="edge">
<title>Peer__pre_propose&#45;&gt;ProposalContext</title>
<path fill="none" stroke="#666666" d="M587.83,-421.61C611.7,-413.61 639.54,-404.28 667.16,-395.02"/>
<polygon fill="#666666" stroke="#666666" points="668.55,-398.25 676.92,-391.75 666.33,-391.61 668.55,-398.25"/>
</g>
<!-- Peer__pre_propose_prepare_merge -->
<g id="node17" class="node">
<title>Peer__pre_propose_prepare_merge</title>
<path fill="none" stroke="#1c2123" d="M898,-565C898,-565 713,-565 713,-565 707,-565 701,-559 701,-553 701,-553 701,-541 701,-541 701,-535 707,-529 713,-529 713,-529 898,-529 898,-529 904,-529 910,-535 910,-541 910,-541 910,-553 910,-553 910,-559 904,-565 898,-565"/>
<text text-anchor="middle" x="805.5" y="-543.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer__pre_propose_prepare_merge</text>
</g>
<!-- Peer__pre_propose&#45;&gt;Peer__pre_propose_prepare_merge -->
<g id="edge19" class="edge">
<title>Peer__pre_propose&#45;&gt;Peer__pre_propose_prepare_merge</title>
<path fill="none" stroke="#666666" d="M587.69,-464.27C605.59,-470.97 624.54,-479.25 641,-489 659.17,-499.76 658.08,-510.63 677,-520 681.57,-522.26 686.33,-524.34 691.2,-526.24"/>
<polygon fill="#666666" stroke="#666666" points="690.1,-529.56 700.69,-529.69 692.49,-522.98 690.1,-529.56"/>
</g>
<!-- CoprocessorHost__pre_propose -->
<g id="node18" class="node">
<title>CoprocessorHost__pre_propose</title>
<path fill="none" stroke="#1c2123" d="M888.5,-511C888.5,-511 722.5,-511 722.5,-511 716.5,-511 710.5,-505 710.5,-499 710.5,-499 710.5,-487 710.5,-487 710.5,-481 716.5,-475 722.5,-475 722.5,-475 888.5,-475 888.5,-475 894.5,-475 900.5,-481 900.5,-487 900.5,-487 900.5,-499 900.5,-499 900.5,-505 894.5,-511 888.5,-511"/>
<text text-anchor="middle" x="805.5" y="-489.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CoprocessorHost__pre_propose</text>
</g>
<!-- Peer__pre_propose&#45;&gt;CoprocessorHost__pre_propose -->
<g id="edge20" class="edge">
<title>Peer__pre_propose&#45;&gt;CoprocessorHost__pre_propose</title>
<path fill="none" stroke="#666666" d="M587.83,-455.55C621.41,-461.36 662.87,-468.52 700.51,-475.03"/>
<polygon fill="#666666" stroke="#666666" points="700.04,-478.5 710.49,-476.75 701.24,-471.6 700.04,-478.5"/>
</g>
<!-- get_sync_log_from_request -->
<g id="node19" class="node">
<title>get_sync_log_from_request</title>
<path fill="none" stroke="#1c2123" d="M877.5,-457C877.5,-457 733.5,-457 733.5,-457 727.5,-457 721.5,-451 721.5,-445 721.5,-445 721.5,-433 721.5,-433 721.5,-427 727.5,-421 733.5,-421 733.5,-421 877.5,-421 877.5,-421 883.5,-421 889.5,-427 889.5,-433 889.5,-433 889.5,-445 889.5,-445 889.5,-451 883.5,-457 877.5,-457"/>
<text text-anchor="middle" x="805.5" y="-435.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_sync_log_from_request</text>
</g>
<!-- Peer__pre_propose&#45;&gt;get_sync_log_from_request -->
<g id="edge21" class="edge">
<title>Peer__pre_propose&#45;&gt;get_sync_log_from_request</title>
<path fill="none" stroke="#666666" d="M587.83,-442.82C624.65,-442.17 670.94,-441.36 711.27,-440.64"/>
<polygon fill="#666666" stroke="#666666" points="711.45,-444.14 721.38,-440.47 711.32,-437.14 711.45,-444.14"/>
</g>
<!-- Peer__has_applied_to_current_term&#45;&gt;CmdEpochChecker__propose_check_epoch -->
<g id="edge24" class="edge">
<title>Peer__has_applied_to_current_term&#45;&gt;CmdEpochChecker__propose_check_epoch</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M626.56,-603C659.24,-603 694.66,-603 725.23,-603"/>
<polygon fill="green" stroke="green" points="725.4,-606.5 735.4,-603 725.4,-599.5 725.4,-606.5"/>
</g>
<!-- ProposalContext&#45;&gt;RawNode__propose -->
<g id="edge22" class="edge">
<title>ProposalContext&#45;&gt;RawNode__propose</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M934.35,-349C956.15,-349 978.02,-349 997.49,-349"/>
<polygon fill="green" stroke="green" points="997.75,-352.5 1007.75,-349 997.75,-345.5 997.75,-352.5"/>
</g>
<!-- RaftCmdRequest -->
<g id="node20" class="node">
<title>RaftCmdRequest</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M753.5,-230C753.5,-230 857.5,-230 857.5,-230 863.5,-230 869.5,-236 869.5,-242 869.5,-242 869.5,-264 869.5,-264 869.5,-270 863.5,-276 857.5,-276 857.5,-276 753.5,-276 753.5,-276 747.5,-276 741.5,-270 741.5,-264 741.5,-264 741.5,-242 741.5,-242 741.5,-236 747.5,-230 753.5,-230"/>
<text text-anchor="middle" x="805.5" y="-260.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftCmdRequest</text>
<polyline fill="none" stroke="#8a8898" points="741.5,-253 869.5,-253 "/>
<text text-anchor="start" x="749.5" y="-237.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">proposal 的raft cmd</text>
</g>
<!-- RaftCmdRequest&#45;&gt;RawNode__propose -->
<g id="edge23" class="edge">
<title>RaftCmdRequest&#45;&gt;RawNode__propose</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M869.81,-266.84C890.53,-272.04 913.48,-278.53 934,-286 955.62,-293.88 978.48,-304.07 998.98,-313.95"/>
<polygon fill="green" stroke="green" points="997.7,-317.22 1008.23,-318.46 1000.77,-310.93 997.7,-317.22"/>
</g>
</g>
</svg>
