<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: Storage Pages: 1 -->
<svg width="1316pt" height="1357pt"
 viewBox="0.00 0.00 1316.00 1356.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1352.5)">
<title>Storage</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1352.5 1312,-1352.5 1312,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_EntryCache</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-267C20,-267 583,-267 583,-267 589,-267 595,-273 595,-279 595,-279 595,-499 595,-499 595,-505 589,-511 583,-511 583,-511 20,-511 20,-511 14,-511 8,-505 8,-499 8,-499 8,-279 8,-279 8,-273 14,-267 20,-267"/>
<text text-anchor="middle" x="301.5" y="-491" font-family="Times,serif" font-size="20.00">EntryCache</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_RaftEngine</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M457.5,-177C457.5,-177 576.5,-177 576.5,-177 582.5,-177 588.5,-183 588.5,-189 588.5,-189 588.5,-247 588.5,-247 588.5,-253 582.5,-259 576.5,-259 576.5,-259 457.5,-259 457.5,-259 451.5,-259 445.5,-253 445.5,-247 445.5,-247 445.5,-189 445.5,-189 445.5,-183 451.5,-177 457.5,-177"/>
<text text-anchor="middle" x="517" y="-239" font-family="Times,serif" font-size="20.00">trait RaftEngine</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_RaftState</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M266.5,-603C266.5,-603 356.5,-603 356.5,-603 362.5,-603 368.5,-609 368.5,-615 368.5,-615 368.5,-739 368.5,-739 368.5,-745 362.5,-751 356.5,-751 356.5,-751 266.5,-751 266.5,-751 260.5,-751 254.5,-745 254.5,-739 254.5,-739 254.5,-615 254.5,-615 254.5,-609 260.5,-603 266.5,-603"/>
<text text-anchor="middle" x="311.5" y="-731" font-family="Times,serif" font-size="20.00">RaftState</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_ApplyState</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M254.5,-759C254.5,-759 368.5,-759 368.5,-759 374.5,-759 380.5,-765 380.5,-771 380.5,-771 380.5,-895 380.5,-895 380.5,-901 374.5,-907 368.5,-907 368.5,-907 254.5,-907 254.5,-907 248.5,-907 242.5,-901 242.5,-895 242.5,-895 242.5,-771 242.5,-771 242.5,-765 248.5,-759 254.5,-759"/>
<text text-anchor="middle" x="311.5" y="-887" font-family="Times,serif" font-size="20.00">ApplyState</text>
</g>
<!-- cache_first_index -->
<g id="node1" class="node">
<title>cache_first_index</title>
<path fill="none" stroke="#1c2123" d="M560.5,-365C560.5,-365 472.5,-365 472.5,-365 466.5,-365 460.5,-359 460.5,-353 460.5,-353 460.5,-341 460.5,-341 460.5,-335 466.5,-329 472.5,-329 472.5,-329 560.5,-329 560.5,-329 566.5,-329 572.5,-335 572.5,-341 572.5,-341 572.5,-353 572.5,-353 572.5,-359 566.5,-365 560.5,-365"/>
<text text-anchor="middle" x="516.5" y="-343.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cache_first_index</text>
</g>
<!-- cache_miss_update -->
<g id="node2" class="node">
<title>cache_miss_update</title>
<path fill="none" stroke="#1c2123" d="M565.5,-311C565.5,-311 467.5,-311 467.5,-311 461.5,-311 455.5,-305 455.5,-299 455.5,-299 455.5,-287 455.5,-287 455.5,-281 461.5,-275 467.5,-275 467.5,-275 565.5,-275 565.5,-275 571.5,-275 577.5,-281 577.5,-287 577.5,-287 577.5,-299 577.5,-299 577.5,-305 571.5,-311 565.5,-311"/>
<text text-anchor="middle" x="516.5" y="-289.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cache_miss_update</text>
</g>
<!-- cache_hit_update -->
<g id="node3" class="node">
<title>cache_hit_update</title>
<path fill="none" stroke="#1c2123" d="M560,-473C560,-473 473,-473 473,-473 467,-473 461,-467 461,-461 461,-461 461,-449 461,-449 461,-443 467,-437 473,-437 473,-437 560,-437 560,-437 566,-437 572,-443 572,-449 572,-449 572,-461 572,-461 572,-467 566,-473 560,-473"/>
<text text-anchor="middle" x="516.5" y="-451.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cache_hit_update</text>
</g>
<!-- cache_fetch_entries_to -->
<g id="node4" class="node">
<title>cache_fetch_entries_to</title>
<path fill="none" stroke="#1c2123" d="M575,-419C575,-419 458,-419 458,-419 452,-419 446,-413 446,-407 446,-407 446,-395 446,-395 446,-389 452,-383 458,-383 458,-383 575,-383 575,-383 581,-383 587,-389 587,-395 587,-395 587,-407 587,-407 587,-413 581,-419 575,-419"/>
<text text-anchor="middle" x="516.5" y="-397.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cache_fetch_entries_to</text>
</g>
<!-- EntryCache -->
<g id="node5" class="node">
<title>EntryCache</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M28,-316.5C28,-316.5 165,-316.5 165,-316.5 171,-316.5 177,-322.5 177,-328.5 177,-328.5 177,-419.5 177,-419.5 177,-425.5 171,-431.5 165,-431.5 165,-431.5 28,-431.5 28,-431.5 22,-431.5 16,-425.5 16,-419.5 16,-419.5 16,-328.5 16,-328.5 16,-322.5 22,-316.5 28,-316.5"/>
<text text-anchor="middle" x="96.5" y="-416.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">EntryCache</text>
<polyline fill="none" stroke="#60b5ac" points="16,-408.5 177,-408.5 "/>
<text text-anchor="start" x="24" y="-393.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">cache: VecDeque&lt;Entry&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="16,-385.5 177,-385.5 "/>
<text text-anchor="start" x="24" y="-370.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">hit: Cell&lt;i64&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="16,-362.5 177,-362.5 "/>
<text text-anchor="start" x="24" y="-347.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">miss: Cell&lt;i64&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="16,-339.5 177,-339.5 "/>
<text text-anchor="start" x="24" y="-324.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">mem_size_change: i64,</text>
</g>
<!-- fetch_entries_to -->
<g id="node6" class="node">
<title>fetch_entries_to</title>
<path fill="none" stroke="#1c2123" d="M556.5,-221C556.5,-221 476.5,-221 476.5,-221 470.5,-221 464.5,-215 464.5,-209 464.5,-209 464.5,-197 464.5,-197 464.5,-191 470.5,-185 476.5,-185 476.5,-185 556.5,-185 556.5,-185 562.5,-185 568.5,-191 568.5,-197 568.5,-197 568.5,-209 568.5,-209 568.5,-215 562.5,-221 556.5,-221"/>
<text text-anchor="middle" x="516.5" y="-199.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">fetch_entries_to</text>
</g>
<!-- raft_state -->
<g id="node7" class="node">
<title>raft_state</title>
<path fill="#feed9b" stroke="#f7e495" d="M274.5,-612C274.5,-612 348.5,-612 348.5,-612 354.5,-612 360.5,-618 360.5,-624 360.5,-624 360.5,-646 360.5,-646 360.5,-652 354.5,-658 348.5,-658 348.5,-658 274.5,-658 274.5,-658 268.5,-658 262.5,-652 262.5,-646 262.5,-646 262.5,-624 262.5,-624 262.5,-618 268.5,-612 274.5,-612"/>
<text text-anchor="middle" x="311.5" y="-642.8" font-family="Times,serif" font-size="14.00" fill="#40575d">raft_state</text>
<polyline fill="none" stroke="#f7e495" points="262.5,-635 360.5,-635 "/>
<text text-anchor="middle" x="311.5" y="-619.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RaftLocalState</text>
</g>
<!-- get_last_index -->
<g id="node8" class="node">
<title>get_last_index</title>
<path fill="none" stroke="#1c2123" d="M347,-713C347,-713 276,-713 276,-713 270,-713 264,-707 264,-701 264,-701 264,-689 264,-689 264,-683 270,-677 276,-677 276,-677 347,-677 347,-677 353,-677 359,-683 359,-689 359,-689 359,-701 359,-701 359,-707 353,-713 347,-713"/>
<text text-anchor="middle" x="311.5" y="-691.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_last_index</text>
</g>
<!-- apply_state -->
<g id="node9" class="node">
<title>apply_state</title>
<path fill="#feed9b" stroke="#f7e495" d="M284.5,-822C284.5,-822 338.5,-822 338.5,-822 344.5,-822 350.5,-828 350.5,-834 350.5,-834 350.5,-856 350.5,-856 350.5,-862 344.5,-868 338.5,-868 338.5,-868 284.5,-868 284.5,-868 278.5,-868 272.5,-862 272.5,-856 272.5,-856 272.5,-834 272.5,-834 272.5,-828 278.5,-822 284.5,-822"/>
<text text-anchor="middle" x="311.5" y="-852.8" font-family="Times,serif" font-size="14.00" fill="#40575d">apply_state</text>
<polyline fill="none" stroke="#f7e495" points="272.5,-845 350.5,-845 "/>
<text text-anchor="middle" x="311.5" y="-829.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> </text>
</g>
<!-- get_truncated_state -->
<g id="node10" class="node">
<title>get_truncated_state</title>
<path fill="none" stroke="#1c2123" d="M360.5,-803C360.5,-803 262.5,-803 262.5,-803 256.5,-803 250.5,-797 250.5,-791 250.5,-791 250.5,-779 250.5,-779 250.5,-773 256.5,-767 262.5,-767 262.5,-767 360.5,-767 360.5,-767 366.5,-767 372.5,-773 372.5,-779 372.5,-779 372.5,-791 372.5,-791 372.5,-797 366.5,-803 360.5,-803"/>
<text text-anchor="middle" x="311.5" y="-781.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_truncated_state</text>
</g>
<!-- apply_snapshot -->
<g id="node21" class="node">
<title>apply_snapshot</title>
<path fill="none" stroke="#1c2123" d="M555,-803C555,-803 478,-803 478,-803 472,-803 466,-797 466,-791 466,-791 466,-779 466,-779 466,-773 472,-767 478,-767 478,-767 555,-767 555,-767 561,-767 567,-773 567,-779 567,-779 567,-791 567,-791 567,-797 561,-803 555,-803"/>
<text text-anchor="middle" x="516.5" y="-781.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">apply_snapshot</text>
</g>
<!-- get_truncated_state&#45;&gt;apply_snapshot -->
<g id="edge18" class="edge">
<title>get_truncated_state&#45;&gt;apply_snapshot</title>
<path fill="none" stroke="#666666" d="M372.58,-785C398.8,-785 429.46,-785 455.65,-785"/>
<polygon fill="#666666" stroke="#666666" points="455.83,-788.5 465.83,-785 455.83,-781.5 455.83,-788.5"/>
</g>
<!-- region -->
<g id="node11" class="node">
<title>region</title>
<path fill="#feed9b" stroke="#f7e495" d="M501.5,-540C501.5,-540 531.5,-540 531.5,-540 537.5,-540 543.5,-546 543.5,-552 543.5,-552 543.5,-574 543.5,-574 543.5,-580 537.5,-586 531.5,-586 531.5,-586 501.5,-586 501.5,-586 495.5,-586 489.5,-580 489.5,-574 489.5,-574 489.5,-552 489.5,-552 489.5,-546 495.5,-540 501.5,-540"/>
<text text-anchor="middle" x="516.5" y="-570.8" font-family="Times,serif" font-size="14.00" fill="#40575d">region</text>
<polyline fill="none" stroke="#f7e495" points="489.5,-563 543.5,-563 "/>
<text text-anchor="middle" x="516.5" y="-547.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> </text>
</g>
<!-- initial_state -->
<g id="node12" class="node">
<title>initial_state</title>
<path fill="none" stroke="#1c2123" d="M124.5,-601C124.5,-601 68.5,-601 68.5,-601 62.5,-601 56.5,-595 56.5,-589 56.5,-589 56.5,-577 56.5,-577 56.5,-571 62.5,-565 68.5,-565 68.5,-565 124.5,-565 124.5,-565 130.5,-565 136.5,-571 136.5,-577 136.5,-577 136.5,-589 136.5,-589 136.5,-595 130.5,-601 124.5,-601"/>
<text text-anchor="middle" x="96.5" y="-579.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">initial_state</text>
</g>
<!-- initial_state&#45;&gt;raft_state -->
<g id="edge1" class="edge">
<title>initial_state&#45;&gt;raft_state</title>
<path fill="none" stroke="#666666" d="M136.57,-592.54C168.95,-600.44 215.47,-611.8 252.25,-620.78"/>
<polygon fill="#666666" stroke="#666666" points="251.8,-624.27 262.35,-623.24 253.46,-617.47 251.8,-624.27"/>
</g>
<!-- initial_state&#45;&gt;region -->
<g id="edge2" class="edge">
<title>initial_state&#45;&gt;region</title>
<path fill="none" stroke="#666666" d="M136.97,-581.38C196.26,-578.92 311.83,-573.99 410,-569 433.09,-567.83 459.02,-566.35 479.39,-565.16"/>
<polygon fill="#666666" stroke="#666666" points="479.71,-568.65 489.49,-564.57 479.3,-561.66 479.71,-568.65"/>
</g>
<!-- conf_state_from_region -->
<g id="node13" class="node">
<title>conf_state_from_region</title>
<path fill="none" stroke="#1c2123" d="M373,-555C373,-555 250,-555 250,-555 244,-555 238,-549 238,-543 238,-543 238,-531 238,-531 238,-525 244,-519 250,-519 250,-519 373,-519 373,-519 379,-519 385,-525 385,-531 385,-531 385,-543 385,-543 385,-549 379,-555 373,-555"/>
<text text-anchor="middle" x="311.5" y="-533.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">conf_state_from_region</text>
</g>
<!-- initial_state&#45;&gt;conf_state_from_region -->
<g id="edge3" class="edge">
<title>initial_state&#45;&gt;conf_state_from_region</title>
<path fill="none" stroke="#666666" d="M136.57,-574.56C162.03,-569.06 196.24,-561.68 227.58,-554.91"/>
<polygon fill="#666666" stroke="#666666" points="228.6,-558.27 237.64,-552.74 227.13,-551.42 228.6,-558.27"/>
</g>
<!-- conf_state_from_region&#45;&gt;region -->
<g id="edge4" class="edge">
<title>conf_state_from_region&#45;&gt;region</title>
<path fill="none" stroke="#666666" d="M385.21,-546.31C417.01,-550.39 452.92,-554.98 478.97,-558.32"/>
<polygon fill="#666666" stroke="#666666" points="478.78,-561.83 489.14,-559.62 479.67,-554.88 478.78,-561.83"/>
</g>
<!-- entries -->
<g id="node14" class="node">
<title>entries</title>
<path fill="none" stroke="#1c2123" d="M326.5,-259C326.5,-259 296.5,-259 296.5,-259 290.5,-259 284.5,-253 284.5,-247 284.5,-247 284.5,-235 284.5,-235 284.5,-229 290.5,-223 296.5,-223 296.5,-223 326.5,-223 326.5,-223 332.5,-223 338.5,-229 338.5,-235 338.5,-235 338.5,-247 338.5,-247 338.5,-253 332.5,-259 326.5,-259"/>
<text text-anchor="middle" x="311.5" y="-237.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">entries</text>
</g>
<!-- entries&#45;&gt;cache_first_index -->
<g id="edge5" class="edge">
<title>entries&#45;&gt;cache_first_index</title>
<path fill="none" stroke="#666666" d="M338.77,-258.4C365.08,-275.39 407.09,-301.35 445.5,-320 449.02,-321.71 452.69,-323.39 456.41,-325.03"/>
<polygon fill="#666666" stroke="#666666" points="455.15,-328.3 465.72,-328.99 457.89,-321.86 455.15,-328.3"/>
</g>
<!-- entries&#45;&gt;cache_miss_update -->
<g id="edge6" class="edge">
<title>entries&#45;&gt;cache_miss_update</title>
<path fill="none" stroke="#666666" d="M338.62,-247.69C365.56,-254.59 408.71,-265.65 445.66,-275.11"/>
<polygon fill="#666666" stroke="#666666" points="444.84,-278.51 455.39,-277.6 446.58,-271.73 444.84,-278.51"/>
</g>
<!-- entries&#45;&gt;cache_hit_update -->
<g id="edge7" class="edge">
<title>entries&#45;&gt;cache_hit_update</title>
<path fill="none" stroke="#666666" d="M320.83,-259.11C338.63,-295.93 383.83,-380.1 445.5,-428 447.53,-429.57 449.65,-431.06 451.86,-432.48"/>
<polygon fill="#666666" stroke="#666666" points="450.25,-435.59 460.66,-437.54 453.74,-429.52 450.25,-435.59"/>
</g>
<!-- entries&#45;&gt;cache_fetch_entries_to -->
<g id="edge8" class="edge">
<title>entries&#45;&gt;cache_fetch_entries_to</title>
<path fill="none" stroke="#666666" d="M326.56,-259.33C348.97,-287.45 395.41,-341.41 445.5,-374 447.78,-375.48 450.15,-376.9 452.58,-378.26"/>
<polygon fill="#666666" stroke="#666666" points="451.11,-381.44 461.61,-382.9 454.31,-375.21 451.11,-381.44"/>
</g>
<!-- entries&#45;&gt;fetch_entries_to -->
<g id="edge9" class="edge">
<title>entries&#45;&gt;fetch_entries_to</title>
<path fill="none" stroke="#666666" d="M338.62,-236.11C367.62,-230.68 415.43,-221.73 454.03,-214.51"/>
<polygon fill="#666666" stroke="#666666" points="454.95,-217.89 464.14,-212.61 453.66,-211.01 454.95,-217.89"/>
</g>
<!-- check_range -->
<g id="node15" class="node">
<title>check_range</title>
<path fill="none" stroke="#1c2123" d="M547,-167C547,-167 486,-167 486,-167 480,-167 474,-161 474,-155 474,-155 474,-143 474,-143 474,-137 480,-131 486,-131 486,-131 547,-131 547,-131 553,-131 559,-137 559,-143 559,-143 559,-155 559,-155 559,-161 553,-167 547,-167"/>
<text text-anchor="middle" x="516.5" y="-145.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">check_range</text>
</g>
<!-- entries&#45;&gt;check_range -->
<g id="edge10" class="edge">
<title>entries&#45;&gt;check_range</title>
<path fill="none" stroke="#666666" d="M338.72,-226.19C365.17,-211.58 407.43,-189.16 445.5,-173 451.4,-170.5 457.65,-168.06 463.91,-165.75"/>
<polygon fill="#666666" stroke="#666666" points="465.44,-168.92 473.68,-162.25 463.08,-162.33 465.44,-168.92"/>
</g>
<!-- term -->
<g id="node16" class="node">
<title>term</title>
<path fill="none" stroke="#1c2123" d="M111.5,-144C111.5,-144 81.5,-144 81.5,-144 75.5,-144 69.5,-138 69.5,-132 69.5,-132 69.5,-120 69.5,-120 69.5,-114 75.5,-108 81.5,-108 81.5,-108 111.5,-108 111.5,-108 117.5,-108 123.5,-114 123.5,-120 123.5,-120 123.5,-132 123.5,-132 123.5,-138 117.5,-144 111.5,-144"/>
<text text-anchor="middle" x="96.5" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">term</text>
</g>
<!-- term&#45;&gt;entries -->
<g id="edge11" class="edge">
<title>term&#45;&gt;entries</title>
<path fill="none" stroke="#666666" d="M123.62,-140.1C161.7,-160.66 232.58,-198.93 275.25,-221.97"/>
<polygon fill="#666666" stroke="#666666" points="273.71,-225.11 284.17,-226.78 277.03,-218.95 273.71,-225.11"/>
</g>
<!-- term&#45;&gt;check_range -->
<g id="edge12" class="edge">
<title>term&#45;&gt;check_range</title>
<path fill="none" stroke="#666666" d="M123.8,-133.97C147.02,-140.57 181.91,-149.41 213,-153 300.55,-163.1 403.29,-158.24 463.69,-153.69"/>
<polygon fill="#666666" stroke="#666666" points="464.04,-157.18 473.74,-152.91 463.5,-150.2 464.04,-157.18"/>
</g>
<!-- truncated_index -->
<g id="node17" class="node">
<title>truncated_index</title>
<path fill="none" stroke="#1c2123" d="M351.5,-144C351.5,-144 271.5,-144 271.5,-144 265.5,-144 259.5,-138 259.5,-132 259.5,-132 259.5,-120 259.5,-120 259.5,-114 265.5,-108 271.5,-108 271.5,-108 351.5,-108 351.5,-108 357.5,-108 363.5,-114 363.5,-120 363.5,-120 363.5,-132 363.5,-132 363.5,-138 357.5,-144 351.5,-144"/>
<text text-anchor="middle" x="311.5" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">truncated_index</text>
</g>
<!-- term&#45;&gt;truncated_index -->
<g id="edge13" class="edge">
<title>term&#45;&gt;truncated_index</title>
<path fill="none" stroke="#666666" d="M123.62,-126C154.71,-126 207.67,-126 249.28,-126"/>
<polygon fill="#666666" stroke="#666666" points="249.33,-129.5 259.33,-126 249.33,-122.5 249.33,-129.5"/>
</g>
<!-- truncated_term -->
<g id="node18" class="node">
<title>truncated_term</title>
<path fill="none" stroke="#1c2123" d="M349,-90C349,-90 274,-90 274,-90 268,-90 262,-84 262,-78 262,-78 262,-66 262,-66 262,-60 268,-54 274,-54 274,-54 349,-54 349,-54 355,-54 361,-60 361,-66 361,-66 361,-78 361,-78 361,-84 355,-90 349,-90"/>
<text text-anchor="middle" x="311.5" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">truncated_term</text>
</g>
<!-- term&#45;&gt;truncated_term -->
<g id="edge14" class="edge">
<title>term&#45;&gt;truncated_term</title>
<path fill="none" stroke="#666666" d="M123.62,-119.38C155.4,-111.32 210,-97.48 252.01,-86.83"/>
<polygon fill="#666666" stroke="#666666" points="253.02,-90.18 261.85,-84.33 251.3,-83.4 253.02,-90.18"/>
</g>
<!-- get_term -->
<g id="node19" class="node">
<title>get_term</title>
<path fill="none" stroke="#1c2123" d="M332,-36C332,-36 291,-36 291,-36 285,-36 279,-30 279,-24 279,-24 279,-12 279,-12 279,-6 285,0 291,0 291,0 332,0 332,0 338,0 344,-6 344,-12 344,-12 344,-24 344,-24 344,-30 338,-36 332,-36"/>
<text text-anchor="middle" x="311.5" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_term</text>
</g>
<!-- term&#45;&gt;get_term -->
<g id="edge15" class="edge">
<title>term&#45;&gt;get_term</title>
<path fill="none" stroke="#666666" d="M118.68,-107.77C140.85,-89.53 177.34,-61.83 213,-45 230.53,-36.73 251.06,-30.57 268.75,-26.24"/>
<polygon fill="#666666" stroke="#666666" points="269.85,-29.58 278.79,-23.9 268.26,-22.76 269.85,-29.58"/>
</g>
<!-- first_index -->
<g id="node20" class="node">
<title>first_index</title>
<path fill="none" stroke="#1c2123" d="M121.5,-833C121.5,-833 71.5,-833 71.5,-833 65.5,-833 59.5,-827 59.5,-821 59.5,-821 59.5,-809 59.5,-809 59.5,-803 65.5,-797 71.5,-797 71.5,-797 121.5,-797 121.5,-797 127.5,-797 133.5,-803 133.5,-809 133.5,-809 133.5,-821 133.5,-821 133.5,-827 127.5,-833 121.5,-833"/>
<text text-anchor="middle" x="96.5" y="-811.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">first_index</text>
</g>
<!-- first_index&#45;&gt;apply_state -->
<g id="edge16" class="edge">
<title>first_index&#45;&gt;apply_state</title>
<path fill="none" stroke="#666666" d="M133.63,-820.09C169.04,-825.08 223.24,-832.71 262.3,-838.21"/>
<polygon fill="#666666" stroke="#666666" points="262,-841.7 272.39,-839.63 262.98,-834.77 262,-841.7"/>
</g>
<!-- first_index&#45;&gt;get_truncated_state -->
<g id="edge17" class="edge">
<title>first_index&#45;&gt;get_truncated_state</title>
<path fill="none" stroke="#666666" d="M133.63,-809.91C162.69,-805.82 204.4,-799.94 240.02,-794.93"/>
<polygon fill="#666666" stroke="#666666" points="240.96,-798.33 250.37,-793.47 239.98,-791.4 240.96,-798.33"/>
</g>
<!-- last_index -->
<g id="node22" class="node">
<title>last_index</title>
<path fill="none" stroke="#1c2123" d="M120.5,-684C120.5,-684 72.5,-684 72.5,-684 66.5,-684 60.5,-678 60.5,-672 60.5,-672 60.5,-660 60.5,-660 60.5,-654 66.5,-648 72.5,-648 72.5,-648 120.5,-648 120.5,-648 126.5,-648 132.5,-654 132.5,-660 132.5,-660 132.5,-672 132.5,-672 132.5,-678 126.5,-684 120.5,-684"/>
<text text-anchor="middle" x="96.5" y="-662.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">last_index</text>
</g>
<!-- last_index&#45;&gt;raft_state -->
<g id="edge19" class="edge">
<title>last_index&#45;&gt;raft_state</title>
<path fill="none" stroke="#666666" d="M132.67,-660.88C165.1,-656.16 213.87,-649.06 252.13,-643.49"/>
<polygon fill="#666666" stroke="#666666" points="252.73,-646.94 262.12,-642.04 251.72,-640.02 252.73,-646.94"/>
</g>
<!-- last_index&#45;&gt;get_last_index -->
<g id="edge20" class="edge">
<title>last_index&#45;&gt;get_last_index</title>
<path fill="none" stroke="#666666" d="M132.67,-670.79C165.54,-675.26 215.18,-682.02 253.66,-687.26"/>
<polygon fill="#666666" stroke="#666666" points="253.31,-690.75 263.69,-688.63 254.26,-683.81 253.31,-690.75"/>
</g>
<!-- snapshot -->
<g id="node23" class="node">
<title>snapshot</title>
<path fill="none" stroke="#1c2123" d="M116.5,-1169C116.5,-1169 76.5,-1169 76.5,-1169 70.5,-1169 64.5,-1163 64.5,-1157 64.5,-1157 64.5,-1145 64.5,-1145 64.5,-1139 70.5,-1133 76.5,-1133 76.5,-1133 116.5,-1133 116.5,-1133 122.5,-1133 128.5,-1139 128.5,-1145 128.5,-1145 128.5,-1157 128.5,-1157 128.5,-1163 122.5,-1169 116.5,-1169"/>
<text text-anchor="middle" x="96.5" y="-1147.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">snapshot</text>
</g>
<!-- snap_state -->
<g id="node24" class="node">
<title>snap_state</title>
<path fill="#feed9b" stroke="#f7e495" d="M225,-1302C225,-1302 398,-1302 398,-1302 404,-1302 410,-1308 410,-1314 410,-1314 410,-1336 410,-1336 410,-1342 404,-1348 398,-1348 398,-1348 225,-1348 225,-1348 219,-1348 213,-1342 213,-1336 213,-1336 213,-1314 213,-1314 213,-1308 219,-1302 225,-1302"/>
<text text-anchor="middle" x="311.5" y="-1332.8" font-family="Times,serif" font-size="14.00" fill="#40575d">snap_state</text>
<polyline fill="none" stroke="#f7e495" points="213,-1325 410,-1325 "/>
<text text-anchor="start" x="221" y="-1309.8" font-family="Times,serif" font-size="14.00" fill="#40575d">snap_state: RefCell&lt;SnapState&gt;,</text>
</g>
<!-- snapshot&#45;&gt;snap_state -->
<g id="edge21" class="edge">
<title>snapshot&#45;&gt;snap_state</title>
<path fill="none" stroke="#666666" d="M106.87,-1169.45C122.91,-1199.23 158.51,-1258.06 211.1,-1296.19"/>
<polygon fill="#666666" stroke="#666666" points="209.12,-1299.07 219.33,-1301.89 213.1,-1293.32 209.12,-1299.07"/>
</g>
<!-- snap_tried_cnt -->
<g id="node25" class="node">
<title>snap_tried_cnt</title>
<path fill="none" stroke="#1c2123" d="M347.5,-1283C347.5,-1283 275.5,-1283 275.5,-1283 269.5,-1283 263.5,-1277 263.5,-1271 263.5,-1271 263.5,-1259 263.5,-1259 263.5,-1253 269.5,-1247 275.5,-1247 275.5,-1247 347.5,-1247 347.5,-1247 353.5,-1247 359.5,-1253 359.5,-1259 359.5,-1259 359.5,-1271 359.5,-1271 359.5,-1277 353.5,-1283 347.5,-1283"/>
<text text-anchor="middle" x="311.5" y="-1261.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">snap_tried_cnt</text>
</g>
<!-- snapshot&#45;&gt;snap_tried_cnt -->
<g id="edge22" class="edge">
<title>snapshot&#45;&gt;snap_tried_cnt</title>
<path fill="none" stroke="#666666" d="M114.92,-1169.16C136.11,-1190.17 173.94,-1224.26 213,-1243 225.59,-1249.04 239.9,-1253.46 253.6,-1256.67"/>
<polygon fill="#666666" stroke="#666666" points="252.92,-1260.11 263.44,-1258.81 254.41,-1253.27 252.92,-1260.11"/>
</g>
<!-- try_recv -->
<g id="node26" class="node">
<title>try_recv</title>
<path fill="none" stroke="#1c2123" d="M1036,-989C1036,-989 998,-989 998,-989 992,-989 986,-983 986,-977 986,-977 986,-965 986,-965 986,-959 992,-953 998,-953 998,-953 1036,-953 1036,-953 1042,-953 1048,-959 1048,-965 1048,-965 1048,-977 1048,-977 1048,-983 1042,-989 1036,-989"/>
<text text-anchor="middle" x="1017" y="-967.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">try_recv</text>
</g>
<!-- snapshot&#45;&gt;try_recv -->
<g id="edge23" class="edge">
<title>snapshot&#45;&gt;try_recv</title>
<path fill="none" stroke="#666666" d="M109.81,-1132.96C128.81,-1106.5 167.86,-1057.48 213,-1031 468.96,-880.84 579.57,-915.97 875,-944 909.47,-947.27 948.06,-954.94 976.14,-961.28"/>
<polygon fill="#666666" stroke="#666666" points="975.45,-964.71 985.98,-963.54 977.02,-957.89 975.45,-964.71"/>
</g>
<!-- validate_snap -->
<g id="node27" class="node">
<title>validate_snap</title>
<path fill="none" stroke="#1c2123" d="M1171,-1072C1171,-1072 1296,-1072 1296,-1072 1302,-1072 1308,-1078 1308,-1084 1308,-1084 1308,-1106 1308,-1106 1308,-1112 1302,-1118 1296,-1118 1296,-1118 1171,-1118 1171,-1118 1165,-1118 1159,-1112 1159,-1106 1159,-1106 1159,-1084 1159,-1084 1159,-1078 1165,-1072 1171,-1072"/>
<text text-anchor="middle" x="1233.5" y="-1102.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">validate_snap</text>
<polyline fill="none" stroke="#1c2123" points="1159,-1095 1308,-1095 "/>
<text text-anchor="start" x="1167" y="-1079.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">验证snapshot是否有效</text>
</g>
<!-- snapshot&#45;&gt;validate_snap -->
<g id="edge24" class="edge">
<title>snapshot&#45;&gt;validate_snap</title>
<path fill="none" stroke="#666666" d="M127.66,-1169.11C150.28,-1181.68 182.48,-1197.47 213,-1205 343.67,-1237.23 380.91,-1219 515.5,-1219 515.5,-1219 515.5,-1219 750,-1219 904.95,-1219 1079.34,-1158.27 1170.07,-1121.81"/>
<polygon fill="#666666" stroke="#666666" points="1171.43,-1125.03 1179.38,-1118.03 1168.8,-1118.55 1171.43,-1125.03"/>
</g>
<!-- SnapState_Generating -->
<g id="node28" class="node">
<title>SnapState_Generating</title>
<path fill="none" stroke="#1c2123" d="M805.5,-989C805.5,-989 692.5,-989 692.5,-989 686.5,-989 680.5,-983 680.5,-977 680.5,-977 680.5,-965 680.5,-965 680.5,-959 686.5,-953 692.5,-953 692.5,-953 805.5,-953 805.5,-953 811.5,-953 817.5,-959 817.5,-965 817.5,-965 817.5,-977 817.5,-977 817.5,-983 811.5,-989 805.5,-989"/>
<text text-anchor="middle" x="749" y="-967.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapState_Generating</text>
</g>
<!-- snapshot&#45;&gt;SnapState_Generating -->
<g id="edge25" class="edge">
<title>snapshot&#45;&gt;SnapState_Generating</title>
<path fill="none" stroke="#666666" d="M128.94,-1133.32C151.93,-1120.66 184.03,-1103.53 213,-1090 314.14,-1042.77 336.9,-1020.83 445.5,-995 520.51,-977.16 608.62,-971.87 670.34,-970.62"/>
<polygon fill="#666666" stroke="#666666" points="670.45,-974.12 680.39,-970.44 670.33,-967.12 670.45,-974.12"/>
</g>
<!-- GenSnapTask -->
<g id="node29" class="node">
<title>GenSnapTask</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M635,-1076C635,-1076 863,-1076 863,-1076 869,-1076 875,-1082 875,-1088 875,-1088 875,-1156 875,-1156 875,-1162 869,-1168 863,-1168 863,-1168 635,-1168 635,-1168 629,-1168 623,-1162 623,-1156 623,-1156 623,-1088 623,-1088 623,-1082 629,-1076 635,-1076"/>
<text text-anchor="middle" x="749" y="-1152.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">GenSnapTask</text>
<polyline fill="none" stroke="#60b5ac" points="623,-1145 875,-1145 "/>
<text text-anchor="start" x="631" y="-1129.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) region_id: u64,</text>
<polyline fill="none" stroke="#60b5ac" points="623,-1122 875,-1122 "/>
<text text-anchor="start" x="631" y="-1106.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">snap_notifier: SyncSender&lt;RaftSnapshot&gt;,</text>
<polyline fill="none" stroke="#60b5ac" points="623,-1099 875,-1099 "/>
<text text-anchor="start" x="631" y="-1083.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">for_balance: bool,</text>
</g>
<!-- snapshot&#45;&gt;GenSnapTask -->
<g id="edge26" class="edge">
<title>snapshot&#45;&gt;GenSnapTask</title>
<path fill="none" stroke="#666666" d="M128.75,-1156.52C151.92,-1160.32 184.32,-1165.02 213,-1167 382.39,-1178.68 426.9,-1185.92 595,-1162 600.83,-1161.17 606.76,-1160.2 612.73,-1159.11"/>
<polygon fill="#666666" stroke="#666666" points="613.64,-1162.5 622.81,-1157.19 612.33,-1155.63 613.64,-1162.5"/>
</g>
<!-- gen_snap_task -->
<g id="node30" class="node">
<title>gen_snap_task</title>
<path fill="#feed9b" stroke="#f7e495" d="M923,-1049.5C923,-1049.5 1111,-1049.5 1111,-1049.5 1117,-1049.5 1123,-1055.5 1123,-1061.5 1123,-1061.5 1123,-1098.5 1123,-1098.5 1123,-1104.5 1117,-1110.5 1111,-1110.5 1111,-1110.5 923,-1110.5 923,-1110.5 917,-1110.5 911,-1104.5 911,-1098.5 911,-1098.5 911,-1061.5 911,-1061.5 911,-1055.5 917,-1049.5 923,-1049.5"/>
<text text-anchor="middle" x="1017" y="-1095.3" font-family="Times,serif" font-size="14.00" fill="#40575d">gen_snap_task</text>
<polyline fill="none" stroke="#f7e495" points="911,-1087.5 1123,-1087.5 "/>
<text text-anchor="start" x="919" y="-1072.3" font-family="Times,serif" font-size="14.00" fill="#40575d">成员变量gen_snap_task:</text>
<text text-anchor="start" x="919" y="-1057.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> RefCell&lt;Option&lt;GenSnapTask&gt;&gt;,</text>
</g>
<!-- snapshot&#45;&gt;gen_snap_task -->
<g id="edge27" class="edge">
<title>snapshot&#45;&gt;gen_snap_task</title>
<path fill="none" stroke="#666666" d="M128.67,-1135.9C188.42,-1107.89 323.92,-1048.85 445.5,-1028 602.06,-1001.15 785.34,-1028.04 901.05,-1052.07"/>
<polygon fill="#666666" stroke="#666666" points="900.48,-1055.53 910.99,-1054.16 901.93,-1048.68 900.48,-1055.53"/>
</g>
<!-- sync_channel -->
<g id="node31" class="node">
<title>sync_channel</title>
<path fill="none" stroke="#1c2123" d="M244.5,-1099C244.5,-1099 378.5,-1099 378.5,-1099 384.5,-1099 390.5,-1105 390.5,-1111 390.5,-1111 390.5,-1133 390.5,-1133 390.5,-1139 384.5,-1145 378.5,-1145 378.5,-1145 244.5,-1145 244.5,-1145 238.5,-1145 232.5,-1139 232.5,-1133 232.5,-1133 232.5,-1111 232.5,-1111 232.5,-1105 238.5,-1099 244.5,-1099"/>
<text text-anchor="middle" x="311.5" y="-1129.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">sync_channel</text>
<polyline fill="none" stroke="#1c2123" points="232.5,-1122 390.5,-1122 "/>
<text text-anchor="middle" x="311.5" y="-1106.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用一个同步的channel</text>
</g>
<!-- snapshot&#45;&gt;sync_channel -->
<g id="edge28" class="edge">
<title>snapshot&#45;&gt;sync_channel</title>
<path fill="none" stroke="#666666" d="M128.93,-1146.72C153.57,-1143.37 189.13,-1138.52 222.26,-1134.01"/>
<polygon fill="#666666" stroke="#666666" points="223.01,-1137.44 232.45,-1132.63 222.07,-1130.51 223.01,-1137.44"/>
</g>
<!-- try_recv&#45;&gt;validate_snap -->
<g id="edge36" class="edge">
<title>try_recv&#45;&gt;validate_snap</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1048.28,-988.5C1083.46,-1008.84 1142,-1042.68 1183.64,-1066.75"/>
<polygon fill="green" stroke="green" points="1182.11,-1069.91 1192.52,-1071.89 1185.61,-1063.85 1182.11,-1069.91"/>
</g>
<!-- SnapState_Generating&#45;&gt;try_recv -->
<g id="edge31" class="edge">
<title>SnapState_Generating&#45;&gt;try_recv</title>
<path fill="none" stroke="#666666" d="M817.81,-965.03C867.76,-963.73 934,-964.05 975.83,-966"/>
<polygon fill="#666666" stroke="#666666" points="975.74,-969.5 985.91,-966.53 976.1,-962.51 975.74,-969.5"/>
</g>
<!-- SnapState_Generating&#45;&gt;try_recv -->
<g id="edge35" class="edge">
<title>SnapState_Generating&#45;&gt;try_recv</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M817.81,-976.97C867.76,-978.27 934,-977.95 975.83,-976"/>
<polygon fill="green" stroke="green" points="976.1,-979.49 985.91,-975.47 975.74,-972.5 976.1,-979.49"/>
</g>
<!-- GenSnapTask&#45;&gt;gen_snap_task -->
<g id="edge34" class="edge">
<title>GenSnapTask&#45;&gt;gen_snap_task</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M875.21,-1102.23C883.73,-1100.88 892.3,-1099.53 900.77,-1098.19"/>
<polygon fill="green" stroke="green" points="901.32,-1101.65 910.65,-1096.63 900.23,-1094.74 901.32,-1101.65"/>
</g>
<!-- tx -->
<g id="node32" class="node">
<title>tx</title>
<path fill="none" stroke="#1c2123" d="M463,-1091.5C463,-1091.5 570,-1091.5 570,-1091.5 576,-1091.5 582,-1097.5 582,-1103.5 582,-1103.5 582,-1140.5 582,-1140.5 582,-1146.5 576,-1152.5 570,-1152.5 570,-1152.5 463,-1152.5 463,-1152.5 457,-1152.5 451,-1146.5 451,-1140.5 451,-1140.5 451,-1103.5 451,-1103.5 451,-1097.5 457,-1091.5 463,-1091.5"/>
<text text-anchor="middle" x="516.5" y="-1137.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tx</text>
<polyline fill="none" stroke="#1c2123" points="451,-1129.5 582,-1129.5 "/>
<text text-anchor="start" x="459" y="-1114.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">发送端，用来触发</text>
<text text-anchor="middle" x="516.5" y="-1099.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> snapshot已准备好</text>
</g>
<!-- sync_channel&#45;&gt;tx -->
<g id="edge29" class="edge">
<title>sync_channel&#45;&gt;tx</title>
<path fill="none" stroke="#666666" d="M390.69,-1122C407.16,-1122 424.49,-1122 440.82,-1122"/>
<polygon fill="#666666" stroke="#666666" points="440.84,-1125.5 450.84,-1122 440.84,-1118.5 440.84,-1125.5"/>
</g>
<!-- rx -->
<g id="node33" class="node">
<title>rx</title>
<path fill="none" stroke="#1c2123" d="M531.5,-1073C531.5,-1073 501.5,-1073 501.5,-1073 495.5,-1073 489.5,-1067 489.5,-1061 489.5,-1061 489.5,-1049 489.5,-1049 489.5,-1043 495.5,-1037 501.5,-1037 501.5,-1037 531.5,-1037 531.5,-1037 537.5,-1037 543.5,-1043 543.5,-1049 543.5,-1049 543.5,-1061 543.5,-1061 543.5,-1067 537.5,-1073 531.5,-1073"/>
<text text-anchor="middle" x="516.5" y="-1051.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">rx</text>
</g>
<!-- sync_channel&#45;&gt;rx -->
<g id="edge30" class="edge">
<title>sync_channel&#45;&gt;rx</title>
<path fill="none" stroke="#666666" d="M390.66,-1101.05C397.22,-1099.08 403.74,-1097.05 410,-1095 416.99,-1092.71 452.13,-1079.33 479.96,-1068.66"/>
<polygon fill="#666666" stroke="#666666" points="481.36,-1071.87 489.44,-1065.02 478.85,-1065.34 481.36,-1071.87"/>
</g>
<!-- tx&#45;&gt;GenSnapTask -->
<g id="edge33" class="edge">
<title>tx&#45;&gt;GenSnapTask</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M582.01,-1122C591.7,-1122 601.99,-1122 612.51,-1122"/>
<polygon fill="green" stroke="green" points="612.65,-1125.5 622.65,-1122 612.65,-1118.5 612.65,-1125.5"/>
</g>
<!-- rx&#45;&gt;SnapState_Generating -->
<g id="edge32" class="edge">
<title>rx&#45;&gt;SnapState_Generating</title>
<path fill="none" stroke="#666666" d="M543.94,-1045.36C579.12,-1032.54 642.32,-1009.51 689.09,-992.47"/>
<polygon fill="#666666" stroke="#666666" points="690.31,-995.75 698.51,-989.04 687.91,-989.17 690.31,-995.75"/>
</g>
</g>
</svg>
