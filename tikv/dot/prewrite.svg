<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: prewrite Pages: 1 -->
<svg width="1550pt" height="1729pt"
 viewBox="0.00 0.00 1550.00 1729.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1725)">
<title>prewrite</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1725 1546,-1725 1546,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_PrewriteKind</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M169.5,-1631C169.5,-1631 609,-1631 609,-1631 615,-1631 621,-1637 621,-1643 621,-1643 621,-1701 621,-1701 621,-1707 615,-1713 609,-1713 609,-1713 169.5,-1713 169.5,-1713 163.5,-1713 157.5,-1707 157.5,-1701 157.5,-1701 157.5,-1643 157.5,-1643 157.5,-1637 163.5,-1631 169.5,-1631"/>
<text text-anchor="middle" x="389.25" y="-1693" font-family="Times,serif" font-size="20.00">PrewriteKind</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_MvccTxn</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M901,-1091C901,-1091 1274,-1091 1274,-1091 1280,-1091 1286,-1097 1286,-1103 1286,-1103 1286,-1321 1286,-1321 1286,-1327 1280,-1333 1274,-1333 1274,-1333 901,-1333 901,-1333 895,-1333 889,-1327 889,-1321 889,-1321 889,-1103 889,-1103 889,-1097 895,-1091 901,-1091"/>
<text text-anchor="middle" x="1087.5" y="-1313" font-family="Times,serif" font-size="20.00">MvccTxn</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_MvccReader</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M663,-8C663,-8 1104.5,-8 1104.5,-8 1110.5,-8 1116.5,-14 1116.5,-20 1116.5,-20 1116.5,-120 1116.5,-120 1116.5,-126 1110.5,-132 1104.5,-132 1104.5,-132 663,-132 663,-132 657,-132 651,-126 651,-120 651,-120 651,-20 651,-20 651,-14 657,-8 663,-8"/>
<text text-anchor="middle" x="883.75" y="-112" font-family="Times,serif" font-size="20.00">MvccReader</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_PrewriteMuation</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M653,-368C653,-368 1295,-368 1295,-368 1301,-368 1307,-374 1307,-380 1307,-380 1307,-1071 1307,-1071 1307,-1077 1301,-1083 1295,-1083 1295,-1083 653,-1083 653,-1083 647,-1083 641,-1077 641,-1071 641,-1071 641,-380 641,-380 641,-374 647,-368 653,-368"/>
<text text-anchor="middle" x="974" y="-1063" font-family="Times,serif" font-size="20.00">PrewriteMuation</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_txn_actions_prewrite</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M412.5,-170C412.5,-170 821.5,-170 821.5,-170 827.5,-170 833.5,-176 833.5,-182 833.5,-182 833.5,-348 833.5,-348 833.5,-354 827.5,-360 821.5,-360 821.5,-360 412.5,-360 412.5,-360 406.5,-360 400.5,-354 400.5,-348 400.5,-348 400.5,-182 400.5,-182 400.5,-176 406.5,-170 412.5,-170"/>
<text text-anchor="middle" x="617" y="-340" font-family="Times,serif" font-size="20.00">txn::actions::prewrite</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_Prewriter</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-1341C20,-1341 1522,-1341 1522,-1341 1528,-1341 1534,-1347 1534,-1353 1534,-1353 1534,-1611 1534,-1611 1534,-1617 1528,-1623 1522,-1623 1522,-1623 20,-1623 20,-1623 14,-1623 8,-1617 8,-1611 8,-1611 8,-1353 8,-1353 8,-1347 14,-1341 20,-1341"/>
<text text-anchor="middle" x="771" y="-1603" font-family="Times,serif" font-size="20.00">Prewriter</text>
</g>
<!-- can_skip_constraint_check -->
<g id="node1" class="node">
<title>can_skip_constraint_check</title>
<path fill="none" stroke="#1c2123" d="M316.5,-1675C316.5,-1675 177.5,-1675 177.5,-1675 171.5,-1675 165.5,-1669 165.5,-1663 165.5,-1663 165.5,-1651 165.5,-1651 165.5,-1645 171.5,-1639 177.5,-1639 177.5,-1639 316.5,-1639 316.5,-1639 322.5,-1639 328.5,-1645 328.5,-1651 328.5,-1651 328.5,-1663 328.5,-1663 328.5,-1669 322.5,-1675 316.5,-1675"/>
<text text-anchor="middle" x="247" y="-1653.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">can_skip_constraint_check</text>
</g>
<!-- Optimistic_can_skip_constraint_check -->
<g id="node2" class="node">
<title>Optimistic_can_skip_constraint_check</title>
<path fill="none" stroke="#1c2123" d="M601,-1675C601,-1675 398,-1675 398,-1675 392,-1675 386,-1669 386,-1663 386,-1663 386,-1651 386,-1651 386,-1645 392,-1639 398,-1639 398,-1639 601,-1639 601,-1639 607,-1639 613,-1645 613,-1651 613,-1651 613,-1663 613,-1663 613,-1669 607,-1675 601,-1675"/>
<text text-anchor="middle" x="499.5" y="-1653.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Optimistic_can_skip_constraint_check</text>
</g>
<!-- can_skip_constraint_check&#45;&gt;Optimistic_can_skip_constraint_check -->
<g id="edge1" class="edge">
<title>can_skip_constraint_check&#45;&gt;Optimistic_can_skip_constraint_check</title>
<path fill="none" stroke="#666666" d="M328.64,-1657C343.54,-1657 359.41,-1657 375.24,-1657"/>
<polygon fill="#666666" stroke="#666666" points="375.62,-1660.5 385.62,-1657 375.62,-1653.5 375.62,-1660.5"/>
</g>
<!-- put_lock -->
<g id="node3" class="node">
<title>put_lock</title>
<path fill="none" stroke="#1c2123" d="M909,-1099.5C909,-1099.5 1107,-1099.5 1107,-1099.5 1113,-1099.5 1119,-1105.5 1119,-1111.5 1119,-1111.5 1119,-1148.5 1119,-1148.5 1119,-1154.5 1113,-1160.5 1107,-1160.5 1107,-1160.5 909,-1160.5 909,-1160.5 903,-1160.5 897,-1154.5 897,-1148.5 897,-1148.5 897,-1111.5 897,-1111.5 897,-1105.5 903,-1099.5 909,-1099.5"/>
<text text-anchor="middle" x="1008" y="-1145.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">put_lock</text>
<polyline fill="none" stroke="#1c2123" points="897,-1137.5 1119,-1137.5 "/>
<text text-anchor="start" x="905" y="-1122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">向CF_LOCK写lock信息</text>
<text text-anchor="start" x="905" y="-1107.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> put(CF_LOCK, key, lock.to_bytes())</text>
</g>
<!-- into_modifies -->
<g id="node5" class="node">
<title>into_modifies</title>
<path fill="none" stroke="#1c2123" d="M1266,-1288C1266,-1288 1198,-1288 1198,-1288 1192,-1288 1186,-1282 1186,-1276 1186,-1276 1186,-1264 1186,-1264 1186,-1258 1192,-1252 1198,-1252 1198,-1252 1266,-1252 1266,-1252 1272,-1252 1278,-1258 1278,-1264 1278,-1264 1278,-1276 1278,-1276 1278,-1282 1272,-1288 1266,-1288"/>
<text text-anchor="middle" x="1232" y="-1266.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">into_modifies</text>
</g>
<!-- put_lock&#45;&gt;into_modifies -->
<g id="edge2" class="edge">
<title>put_lock&#45;&gt;into_modifies</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1111.61,-1160.59C1117.63,-1163.49 1123.47,-1166.62 1129,-1170 1161.41,-1189.81 1191.56,-1221.72 1210.54,-1244.15"/>
<polygon fill="green" stroke="green" points="1207.94,-1246.49 1217.02,-1251.95 1213.32,-1242.02 1207.94,-1246.49"/>
</g>
<!-- put_value -->
<g id="node4" class="node">
<title>put_value</title>
<path fill="none" stroke="#1c2123" d="M933.5,-1233.5C933.5,-1233.5 1082.5,-1233.5 1082.5,-1233.5 1088.5,-1233.5 1094.5,-1239.5 1094.5,-1245.5 1094.5,-1245.5 1094.5,-1282.5 1094.5,-1282.5 1094.5,-1288.5 1088.5,-1294.5 1082.5,-1294.5 1082.5,-1294.5 933.5,-1294.5 933.5,-1294.5 927.5,-1294.5 921.5,-1288.5 921.5,-1282.5 921.5,-1282.5 921.5,-1245.5 921.5,-1245.5 921.5,-1239.5 927.5,-1233.5 933.5,-1233.5"/>
<text text-anchor="middle" x="1008" y="-1279.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">put_value</text>
<polyline fill="none" stroke="#1c2123" points="921.5,-1271.5 1094.5,-1271.5 "/>
<text text-anchor="start" x="929.5" y="-1256.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">向CF_DEFAULT写入数据</text>
<text text-anchor="start" x="929.5" y="-1241.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 写入key, start_ts, value</text>
</g>
<!-- put_value&#45;&gt;into_modifies -->
<g id="edge3" class="edge">
<title>put_value&#45;&gt;into_modifies</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1094.51,-1266.31C1121.77,-1267.05 1151.19,-1267.84 1175.71,-1268.51"/>
<polygon fill="green" stroke="green" points="1175.81,-1272.01 1185.9,-1268.78 1176,-1265.01 1175.81,-1272.01"/>
</g>
<!-- WriteData -->
<g id="node35" class="node">
<title>WriteData</title>
<path fill="none" stroke="#1c2123" d="M1396,-1385C1396,-1385 1347,-1385 1347,-1385 1341,-1385 1335,-1379 1335,-1373 1335,-1373 1335,-1361 1335,-1361 1335,-1355 1341,-1349 1347,-1349 1347,-1349 1396,-1349 1396,-1349 1402,-1349 1408,-1355 1408,-1361 1408,-1361 1408,-1373 1408,-1373 1408,-1379 1402,-1385 1396,-1385"/>
<text text-anchor="middle" x="1371.5" y="-1363.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteData</text>
</g>
<!-- into_modifies&#45;&gt;WriteData -->
<g id="edge38" class="edge">
<title>into_modifies&#45;&gt;WriteData</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1258.54,-1288.02C1280.49,-1303.5 1312.33,-1325.97 1336.45,-1342.98"/>
<polygon fill="green" stroke="green" points="1334.44,-1345.85 1344.63,-1348.75 1338.48,-1340.13 1334.44,-1345.85"/>
</g>
<!-- put_locks_for_1pc -->
<g id="node6" class="node">
<title>put_locks_for_1pc</title>
<path fill="none" stroke="#1c2123" d="M1055,-1215C1055,-1215 961,-1215 961,-1215 955,-1215 949,-1209 949,-1203 949,-1203 949,-1191 949,-1191 949,-1185 955,-1179 961,-1179 961,-1179 1055,-1179 1055,-1179 1061,-1179 1067,-1185 1067,-1191 1067,-1191 1067,-1203 1067,-1203 1067,-1209 1061,-1215 1055,-1215"/>
<text text-anchor="middle" x="1008" y="-1193.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">put_locks_for_1pc</text>
</g>
<!-- load_lock -->
<g id="node7" class="node">
<title>load_lock</title>
<path fill="none" stroke="#1c2123" d="M671,-32.5C671,-32.5 829,-32.5 829,-32.5 835,-32.5 841,-38.5 841,-44.5 841,-44.5 841,-81.5 841,-81.5 841,-87.5 835,-93.5 829,-93.5 829,-93.5 671,-93.5 671,-93.5 665,-93.5 659,-87.5 659,-81.5 659,-81.5 659,-44.5 659,-44.5 659,-38.5 665,-32.5 671,-32.5"/>
<text text-anchor="middle" x="750" y="-78.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">load_lock</text>
<polyline fill="none" stroke="#1c2123" points="659,-70.5 841,-70.5 "/>
<text text-anchor="start" x="667" y="-55.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">加载key对应的lock</text>
<text text-anchor="middle" x="750" y="-40.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果key没有Lock返回None</text>
</g>
<!-- check_lock -->
<g id="node10" class="node">
<title>check_lock</title>
<path fill="none" stroke="#1c2123" d="M899,-376.5C899,-376.5 1117,-376.5 1117,-376.5 1123,-376.5 1129,-382.5 1129,-388.5 1129,-388.5 1129,-493.5 1129,-493.5 1129,-499.5 1123,-505.5 1117,-505.5 1117,-505.5 899,-505.5 899,-505.5 893,-505.5 887,-499.5 887,-493.5 887,-493.5 887,-388.5 887,-388.5 887,-382.5 893,-376.5 899,-376.5"/>
<text text-anchor="middle" x="1008" y="-490.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">check_lock</text>
<polyline fill="none" stroke="#1c2123" points="887,-482.5 1129,-482.5 "/>
<text text-anchor="start" x="895" y="-467.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果key已经有lock</text>
<text text-anchor="start" x="895" y="-452.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 检查key lock信息</text>
<text text-anchor="start" x="895" y="-437.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 是不是自己加的lock ?</text>
<text text-anchor="start" x="895" y="-422.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Check whether the current key</text>
<text text-anchor="start" x="895" y="-407.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> is locked at any timestamp</text>
<polyline fill="none" stroke="#1c2123" points="887,-399.5 1129,-399.5 "/>
<text text-anchor="start" x="895" y="-384.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">检查lock的ts,type和事务的ts是否一致</text>
</g>
<!-- load_lock&#45;&gt;check_lock -->
<g id="edge27" class="edge">
<title>load_lock&#45;&gt;check_lock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M802.37,-93.61C819.28,-105.38 837.26,-119.9 851,-136 910.25,-205.42 954.52,-301.21 980.48,-366.81"/>
<polygon fill="green" stroke="green" points="977.28,-368.22 984.18,-376.26 983.79,-365.67 977.28,-368.22"/>
</g>
<!-- seek_write -->
<g id="node8" class="node">
<title>seek_write</title>
<path fill="none" stroke="#1c2123" d="M919.5,-17C919.5,-17 1096.5,-17 1096.5,-17 1102.5,-17 1108.5,-23 1108.5,-29 1108.5,-29 1108.5,-81 1108.5,-81 1108.5,-87 1102.5,-93 1096.5,-93 1096.5,-93 919.5,-93 919.5,-93 913.5,-93 907.5,-87 907.5,-81 907.5,-81 907.5,-29 907.5,-29 907.5,-23 913.5,-17 919.5,-17"/>
<text text-anchor="middle" x="1008" y="-77.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">seek_write</text>
<polyline fill="none" stroke="#1c2123" points="907.5,-70 1108.5,-70 "/>
<text text-anchor="start" x="915.5" y="-54.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Return (commit_ts, write_record)</text>
<text text-anchor="start" x="915.5" y="-39.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> of the write record for `key`</text>
<text text-anchor="start" x="915.5" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> committed before or equal to`ts`</text>
</g>
<!-- PrewriteMutation_from_mutation -->
<g id="node9" class="node">
<title>PrewriteMutation_from_mutation</title>
<path fill="none" stroke="#1c2123" d="M839,-896C839,-896 661,-896 661,-896 655,-896 649,-890 649,-884 649,-884 649,-872 649,-872 649,-866 655,-860 661,-860 661,-860 839,-860 839,-860 845,-860 851,-866 851,-872 851,-872 851,-884 851,-884 851,-890 845,-896 839,-896"/>
<text text-anchor="middle" x="750" y="-874.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PrewriteMutation_from_mutation</text>
</g>
<!-- lock_ts -->
<g id="node11" class="node">
<title>lock_ts</title>
<path fill="none" stroke="#1c2123" d="M1248,-412C1248,-412 1216,-412 1216,-412 1210,-412 1204,-406 1204,-400 1204,-400 1204,-388 1204,-388 1204,-382 1210,-376 1216,-376 1216,-376 1248,-376 1248,-376 1254,-376 1260,-382 1260,-388 1260,-388 1260,-400 1260,-400 1260,-406 1254,-412 1248,-412"/>
<text text-anchor="middle" x="1232" y="-390.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">lock_ts</text>
</g>
<!-- check_lock&#45;&gt;lock_ts -->
<g id="edge4" class="edge">
<title>check_lock&#45;&gt;lock_ts</title>
<path fill="none" stroke="#666666" d="M1129.1,-415.57C1152.78,-410.56 1175.9,-405.66 1194.12,-401.81"/>
<polygon fill="#666666" stroke="#666666" points="1194.92,-405.22 1203.98,-399.72 1193.47,-398.37 1194.92,-405.22"/>
</g>
<!-- lock_type -->
<g id="node12" class="node">
<title>lock_type</title>
<path fill="none" stroke="#1c2123" d="M1255,-466C1255,-466 1209,-466 1209,-466 1203,-466 1197,-460 1197,-454 1197,-454 1197,-442 1197,-442 1197,-436 1203,-430 1209,-430 1209,-430 1255,-430 1255,-430 1261,-430 1267,-436 1267,-442 1267,-442 1267,-454 1267,-454 1267,-460 1261,-466 1255,-466"/>
<text text-anchor="middle" x="1232" y="-444.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">lock_type</text>
</g>
<!-- check_lock&#45;&gt;lock_type -->
<g id="edge5" class="edge">
<title>check_lock&#45;&gt;lock_type</title>
<path fill="none" stroke="#666666" d="M1129.1,-444.79C1149.74,-445.44 1169.96,-446.08 1186.88,-446.61"/>
<polygon fill="#666666" stroke="#666666" points="1186.85,-450.11 1196.96,-446.93 1187.07,-443.11 1186.85,-450.11"/>
</g>
<!-- lock_ttl -->
<g id="node13" class="node">
<title>lock_ttl</title>
<path fill="none" stroke="#1c2123" d="M1249,-520C1249,-520 1215,-520 1215,-520 1209,-520 1203,-514 1203,-508 1203,-508 1203,-496 1203,-496 1203,-490 1209,-484 1215,-484 1215,-484 1249,-484 1249,-484 1255,-484 1261,-490 1261,-496 1261,-496 1261,-508 1261,-508 1261,-514 1255,-520 1249,-520"/>
<text text-anchor="middle" x="1232" y="-498.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">lock_ttl</text>
</g>
<!-- check_lock&#45;&gt;lock_ttl -->
<g id="edge6" class="edge">
<title>check_lock&#45;&gt;lock_ttl</title>
<path fill="none" stroke="#666666" d="M1129.1,-474C1152.26,-480.37 1174.9,-486.58 1192.93,-491.54"/>
<polygon fill="#666666" stroke="#666666" points="1192.14,-494.95 1202.71,-494.23 1194,-488.2 1192.14,-494.95"/>
</g>
<!-- lock_min_commit_ts -->
<g id="node14" class="node">
<title>lock_min_commit_ts</title>
<path fill="none" stroke="#1c2123" d="M1287,-574C1287,-574 1177,-574 1177,-574 1171,-574 1165,-568 1165,-562 1165,-562 1165,-550 1165,-550 1165,-544 1171,-538 1177,-538 1177,-538 1287,-538 1287,-538 1293,-538 1299,-544 1299,-550 1299,-550 1299,-562 1299,-562 1299,-568 1293,-574 1287,-574"/>
<text text-anchor="middle" x="1232" y="-552.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">lock_min_commit_ts</text>
</g>
<!-- check_lock&#45;&gt;lock_min_commit_ts -->
<g id="edge7" class="edge">
<title>check_lock&#45;&gt;lock_min_commit_ts</title>
<path fill="none" stroke="#666666" d="M1119.73,-505.7C1134.79,-513.84 1150.17,-521.82 1165,-529 1168.37,-530.63 1171.87,-532.26 1175.42,-533.85"/>
<polygon fill="#666666" stroke="#666666" points="1174.31,-537.19 1184.87,-537.99 1177.12,-530.78 1174.31,-537.19"/>
</g>
<!-- write_lock -->
<g id="node15" class="node">
<title>write_lock</title>
<path fill="#feed9b" stroke="#f7e495" d="M674,-780.5C674,-780.5 826,-780.5 826,-780.5 832,-780.5 838,-786.5 838,-792.5 838,-792.5 838,-829.5 838,-829.5 838,-835.5 832,-841.5 826,-841.5 826,-841.5 674,-841.5 674,-841.5 668,-841.5 662,-835.5 662,-829.5 662,-829.5 662,-792.5 662,-792.5 662,-786.5 668,-780.5 674,-780.5"/>
<text text-anchor="middle" x="750" y="-826.3" font-family="Times,serif" font-size="14.00" fill="#40575d">write_lock</text>
<polyline fill="none" stroke="#f7e495" points="662,-818.5 838,-818.5 "/>
<text text-anchor="start" x="670" y="-803.3" font-family="Times,serif" font-size="14.00" fill="#40575d">向column lock 写入lockinfo</text>
<text text-anchor="start" x="670" y="-788.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> 给key加上锁</text>
</g>
<!-- write_lock&#45;&gt;put_lock -->
<g id="edge8" class="edge">
<title>write_lock&#45;&gt;put_lock</title>
<path fill="none" stroke="#666666" d="M838.16,-838.52C842.93,-842.17 847.28,-846.31 851,-851 916.96,-934.11 819.54,-1005.1 887,-1087 888.66,-1089.02 890.43,-1090.94 892.28,-1092.77"/>
<polygon fill="#666666" stroke="#666666" points="890.02,-1095.44 899.84,-1099.41 894.63,-1090.18 890.02,-1095.44"/>
</g>
<!-- write_lock&#45;&gt;put_value -->
<g id="edge9" class="edge">
<title>write_lock&#45;&gt;put_value</title>
<path fill="none" stroke="#666666" d="M838.02,-837.94C842.89,-841.73 847.3,-846.06 851,-851 950.9,-984.26 783.23,-1093.73 887,-1224 893.86,-1232.61 902.64,-1239.39 912.32,-1244.71"/>
<polygon fill="#666666" stroke="#666666" points="910.92,-1247.92 921.43,-1249.21 914.01,-1241.65 910.92,-1247.92"/>
</g>
<!-- write_lock&#45;&gt;put_locks_for_1pc -->
<g id="edge10" class="edge">
<title>write_lock&#45;&gt;put_locks_for_1pc</title>
<path fill="none" stroke="#666666" d="M838.37,-838.35C843.09,-842.05 847.37,-846.24 851,-851 937.5,-964.47 791.75,-1063.77 887,-1170 900.17,-1184.69 919.47,-1192.29 938.75,-1196.01"/>
<polygon fill="#666666" stroke="#666666" points="938.37,-1199.5 948.8,-1197.62 939.48,-1192.58 938.37,-1199.5"/>
</g>
<!-- Lock_new -->
<g id="node16" class="node">
<title>Lock_new</title>
<path fill="none" stroke="#1c2123" d="M921.5,-848C921.5,-848 1094.5,-848 1094.5,-848 1100.5,-848 1106.5,-854 1106.5,-860 1106.5,-860 1106.5,-1032 1106.5,-1032 1106.5,-1038 1100.5,-1044 1094.5,-1044 1094.5,-1044 921.5,-1044 921.5,-1044 915.5,-1044 909.5,-1038 909.5,-1032 909.5,-1032 909.5,-860 909.5,-860 909.5,-854 915.5,-848 921.5,-848"/>
<text text-anchor="middle" x="1008" y="-1028.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock_new</text>
<polyline fill="none" stroke="#1c2123" points="909.5,-1021 1106.5,-1021 "/>
<text text-anchor="start" x="917.5" y="-1005.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">写入的Lock信息</text>
<text text-anchor="start" x="917.5" y="-990.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> let mut lock = Lock::new(</text>
<text text-anchor="start" x="917.5" y="-975.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.lock_type.unwrap(),</text>
<text text-anchor="start" x="917.5" y="-960.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.txn_props.primary.to_vec(),</text>
<text text-anchor="start" x="917.5" y="-945.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.txn_props.start_ts,</text>
<text text-anchor="start" x="917.5" y="-930.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.lock_ttl,</text>
<text text-anchor="start" x="917.5" y="-915.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> None,</text>
<text text-anchor="start" x="917.5" y="-900.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.txn_props.for_update_ts(),</text>
<text text-anchor="start" x="917.5" y="-885.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.txn_props.txn_size,</text>
<text text-anchor="start" x="917.5" y="-870.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.min_commit_ts,</text>
<text text-anchor="start" x="917.5" y="-855.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> );</text>
</g>
<!-- write_lock&#45;&gt;Lock_new -->
<g id="edge11" class="edge">
<title>write_lock&#45;&gt;Lock_new</title>
<path fill="none" stroke="#666666" d="M830.95,-841.58C837.8,-844.62 844.56,-847.78 851,-851 867.27,-859.14 884.09,-868.4 900.38,-877.87"/>
<polygon fill="#666666" stroke="#666666" points="898.98,-881.11 909.38,-883.15 902.52,-875.07 898.98,-881.11"/>
</g>
<!-- is_short_value -->
<g id="node17" class="node">
<title>is_short_value</title>
<path fill="none" stroke="#1c2123" d="M946,-644C946,-644 1070,-644 1070,-644 1076,-644 1082,-650 1082,-656 1082,-656 1082,-708 1082,-708 1082,-714 1076,-720 1070,-720 1070,-720 946,-720 946,-720 940,-720 934,-714 934,-708 934,-708 934,-656 934,-656 934,-650 940,-644 946,-644"/>
<text text-anchor="middle" x="1008" y="-704.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">is_short_value</text>
<polyline fill="none" stroke="#1c2123" points="934,-697 1082,-697 "/>
<text text-anchor="start" x="942" y="-681.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">对short value做了优化</text>
<text text-anchor="start" x="942" y="-666.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 对于short_value 直接</text>
<text text-anchor="start" x="942" y="-651.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 写入Lock中</text>
</g>
<!-- write_lock&#45;&gt;is_short_value -->
<g id="edge12" class="edge">
<title>write_lock&#45;&gt;is_short_value</title>
<path fill="none" stroke="#666666" d="M798.13,-780.45C823.85,-764.41 856.57,-745.03 887,-730 898.86,-724.14 911.63,-718.43 924.25,-713.12"/>
<polygon fill="#666666" stroke="#666666" points="925.96,-716.2 933.86,-709.14 923.28,-709.73 925.96,-716.2"/>
</g>
<!-- async_commit_timestamps -->
<g id="node18" class="node">
<title>async_commit_timestamps</title>
<path fill="none" stroke="#1c2123" d="M1079.5,-775C1079.5,-775 936.5,-775 936.5,-775 930.5,-775 924.5,-769 924.5,-763 924.5,-763 924.5,-751 924.5,-751 924.5,-745 930.5,-739 936.5,-739 936.5,-739 1079.5,-739 1079.5,-739 1085.5,-739 1091.5,-745 1091.5,-751 1091.5,-751 1091.5,-763 1091.5,-763 1091.5,-769 1085.5,-775 1079.5,-775"/>
<text text-anchor="middle" x="1008" y="-753.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">async_commit_timestamps</text>
</g>
<!-- write_lock&#45;&gt;async_commit_timestamps -->
<g id="edge13" class="edge">
<title>write_lock&#45;&gt;async_commit_timestamps</title>
<path fill="none" stroke="#666666" d="M838.03,-792.64C862.6,-787.46 889.42,-781.8 914.31,-776.55"/>
<polygon fill="#666666" stroke="#666666" points="915.04,-779.97 924.11,-774.49 913.6,-773.13 915.04,-779.97"/>
</g>
<!-- try_one_pc -->
<g id="node19" class="node">
<title>try_one_pc</title>
<path fill="none" stroke="#1c2123" d="M1034.5,-829C1034.5,-829 981.5,-829 981.5,-829 975.5,-829 969.5,-823 969.5,-817 969.5,-817 969.5,-805 969.5,-805 969.5,-799 975.5,-793 981.5,-793 981.5,-793 1034.5,-793 1034.5,-793 1040.5,-793 1046.5,-799 1046.5,-805 1046.5,-805 1046.5,-817 1046.5,-817 1046.5,-823 1040.5,-829 1034.5,-829"/>
<text text-anchor="middle" x="1008" y="-807.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">try_one_pc</text>
</g>
<!-- write_lock&#45;&gt;try_one_pc -->
<g id="edge14" class="edge">
<title>write_lock&#45;&gt;try_one_pc</title>
<path fill="none" stroke="#666666" d="M838.03,-811C878.62,-811 925.35,-811 959.37,-811"/>
<polygon fill="#666666" stroke="#666666" points="959.5,-814.5 969.5,-811 959.5,-807.5 959.5,-814.5"/>
</g>
<!-- skip_constraint_check -->
<g id="node20" class="node">
<title>skip_constraint_check</title>
<path fill="none" stroke="#1c2123" d="M806.5,-492C806.5,-492 693.5,-492 693.5,-492 687.5,-492 681.5,-486 681.5,-480 681.5,-480 681.5,-468 681.5,-468 681.5,-462 687.5,-456 693.5,-456 693.5,-456 806.5,-456 806.5,-456 812.5,-456 818.5,-462 818.5,-468 818.5,-468 818.5,-480 818.5,-480 818.5,-486 812.5,-492 806.5,-492"/>
<text text-anchor="middle" x="750" y="-470.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">skip_constraint_check</text>
</g>
<!-- check_for_newer_version -->
<g id="node21" class="node">
<title>check_for_newer_version</title>
<path fill="none" stroke="#1c2123" d="M683.5,-376.5C683.5,-376.5 816.5,-376.5 816.5,-376.5 822.5,-376.5 828.5,-382.5 828.5,-388.5 828.5,-388.5 828.5,-425.5 828.5,-425.5 828.5,-431.5 822.5,-437.5 816.5,-437.5 816.5,-437.5 683.5,-437.5 683.5,-437.5 677.5,-437.5 671.5,-431.5 671.5,-425.5 671.5,-425.5 671.5,-388.5 671.5,-388.5 671.5,-382.5 677.5,-376.5 683.5,-376.5"/>
<text text-anchor="middle" x="750" y="-422.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">check_for_newer_version</text>
<polyline fill="none" stroke="#1c2123" points="671.5,-414.5 828.5,-414.5 "/>
<text text-anchor="start" x="679.5" y="-399.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">在CF_WRITE中检查</text>
<text text-anchor="start" x="679.5" y="-384.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 是否有新版本的数据</text>
</g>
<!-- check_for_newer_version&#45;&gt;seek_write -->
<g id="edge15" class="edge">
<title>check_for_newer_version&#45;&gt;seek_write</title>
<path fill="none" stroke="#666666" d="M828.68,-380.28C836.75,-375.61 844.39,-370.21 851,-364 928.97,-290.68 973.96,-169.81 994.12,-103.05"/>
<polygon fill="#666666" stroke="#666666" points="997.55,-103.79 997.03,-93.21 990.83,-101.81 997.55,-103.79"/>
</g>
<!-- write_conflict_error -->
<g id="node22" class="node">
<title>write_conflict_error</title>
<path fill="none" stroke="#1c2123" d="M957.5,-579C957.5,-579 1058.5,-579 1058.5,-579 1064.5,-579 1070.5,-585 1070.5,-591 1070.5,-591 1070.5,-613 1070.5,-613 1070.5,-619 1064.5,-625 1058.5,-625 1058.5,-625 957.5,-625 957.5,-625 951.5,-625 945.5,-619 945.5,-613 945.5,-613 945.5,-591 945.5,-591 945.5,-585 951.5,-579 957.5,-579"/>
<text text-anchor="middle" x="1008" y="-609.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_conflict_error</text>
<polyline fill="none" stroke="#1c2123" points="945.5,-602 1070.5,-602 "/>
<text text-anchor="middle" x="1008" y="-586.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">返回写冲突error</text>
</g>
<!-- check_for_newer_version&#45;&gt;write_conflict_error -->
<g id="edge16" class="edge">
<title>check_for_newer_version&#45;&gt;write_conflict_error</title>
<path fill="none" stroke="#666666" d="M828.82,-429.59C837.06,-434.35 844.71,-440.09 851,-447 889.06,-488.8 846.66,-529.4 887,-569 900.14,-581.9 917.83,-589.87 935.58,-594.76"/>
<polygon fill="#666666" stroke="#666666" points="934.88,-598.19 945.42,-597.17 936.55,-591.39 934.88,-598.19"/>
</g>
<!-- check_data_constraint -->
<g id="node23" class="node">
<title>check_data_constraint</title>
<path fill="none" stroke="#1c2123" d="M1064.5,-560C1064.5,-560 951.5,-560 951.5,-560 945.5,-560 939.5,-554 939.5,-548 939.5,-548 939.5,-536 939.5,-536 939.5,-530 945.5,-524 951.5,-524 951.5,-524 1064.5,-524 1064.5,-524 1070.5,-524 1076.5,-530 1076.5,-536 1076.5,-536 1076.5,-548 1076.5,-548 1076.5,-554 1070.5,-560 1064.5,-560"/>
<text text-anchor="middle" x="1008" y="-538.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">check_data_constraint</text>
</g>
<!-- check_for_newer_version&#45;&gt;check_data_constraint -->
<g id="edge17" class="edge">
<title>check_for_newer_version&#45;&gt;check_data_constraint</title>
<path fill="none" stroke="#666666" d="M828.55,-431.43C836.64,-435.84 844.33,-441 851,-447 876.43,-469.86 859.83,-494.23 887,-515 899.32,-524.41 914.3,-530.66 929.44,-534.78"/>
<polygon fill="#666666" stroke="#666666" points="928.85,-538.24 939.39,-537.19 930.5,-531.43 928.85,-538.24"/>
</g>
<!-- txn_actions_prewrite -->
<g id="node24" class="node">
<title>txn_actions_prewrite</title>
<path fill="none" stroke="#1c2123" d="M420.5,-245C420.5,-245 578.5,-245 578.5,-245 584.5,-245 590.5,-251 590.5,-257 590.5,-257 590.5,-309 590.5,-309 590.5,-315 584.5,-321 578.5,-321 578.5,-321 420.5,-321 420.5,-321 414.5,-321 408.5,-315 408.5,-309 408.5,-309 408.5,-257 408.5,-257 408.5,-251 414.5,-245 420.5,-245"/>
<text text-anchor="middle" x="499.5" y="-305.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">prewrite</text>
<polyline fill="none" stroke="#1c2123" points="408.5,-298 590.5,-298 "/>
<text text-anchor="start" x="416.5" y="-282.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">prewrite a single mutation</text>
<text text-anchor="start" x="416.5" y="-267.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> by creating and storing a lock</text>
<text text-anchor="start" x="416.5" y="-252.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> and value</text>
</g>
<!-- txn_actions_prewrite&#45;&gt;load_lock -->
<g id="edge18" class="edge">
<title>txn_actions_prewrite&#45;&gt;load_lock</title>
<path fill="none" stroke="#666666" d="M532.83,-244.9C560.08,-213.87 600.94,-169.82 641,-136 656.31,-123.07 673.96,-110.35 690.49,-99.24"/>
<polygon fill="#666666" stroke="#666666" points="692.61,-102.03 699.01,-93.59 688.74,-96.2 692.61,-102.03"/>
</g>
<!-- txn_actions_prewrite&#45;&gt;PrewriteMutation_from_mutation -->
<g id="edge19" class="edge">
<title>txn_actions_prewrite&#45;&gt;PrewriteMutation_from_mutation</title>
<path fill="none" stroke="#666666" d="M504.83,-321.22C518.62,-436.07 565.04,-774.86 641,-851 641.82,-851.82 642.66,-852.62 643.52,-853.39"/>
<polygon fill="#666666" stroke="#666666" points="641.69,-856.4 651.74,-859.76 645.98,-850.87 641.69,-856.4"/>
</g>
<!-- txn_actions_prewrite&#45;&gt;check_lock -->
<g id="edge20" class="edge">
<title>txn_actions_prewrite&#45;&gt;check_lock</title>
<path fill="none" stroke="#666666" d="M533.71,-244.75C559.79,-217.83 598.66,-184.01 641,-169 728.96,-137.8 770.24,-122.22 851,-169 923.81,-211.18 965.57,-301.58 987.23,-366.59"/>
<polygon fill="#666666" stroke="#666666" points="983.99,-367.96 990.4,-376.4 990.65,-365.81 983.99,-367.96"/>
</g>
<!-- txn_actions_prewrite&#45;&gt;write_lock -->
<g id="edge21" class="edge">
<title>txn_actions_prewrite&#45;&gt;write_lock</title>
<path fill="none" stroke="#666666" d="M518.57,-321.4C564.18,-418.31 683.64,-672.13 730.12,-770.88"/>
<polygon fill="#666666" stroke="#666666" points="727.09,-772.66 734.51,-780.22 733.42,-769.68 727.09,-772.66"/>
</g>
<!-- txn_actions_prewrite&#45;&gt;skip_constraint_check -->
<g id="edge22" class="edge">
<title>txn_actions_prewrite&#45;&gt;skip_constraint_check</title>
<path fill="none" stroke="#666666" d="M523.2,-321.23C547.59,-358.93 589.82,-415.36 641,-447 650.31,-452.76 660.8,-457.29 671.47,-460.86"/>
<polygon fill="#666666" stroke="#666666" points="670.71,-464.28 681.3,-463.87 672.76,-457.59 670.71,-464.28"/>
</g>
<!-- txn_actions_prewrite&#45;&gt;check_for_newer_version -->
<g id="edge23" class="edge">
<title>txn_actions_prewrite&#45;&gt;check_for_newer_version</title>
<path fill="none" stroke="#666666" d="M562.06,-321.06C586.25,-335.33 614.52,-351.18 641,-364 647.83,-367.31 654.99,-370.57 662.23,-373.74"/>
<polygon fill="#666666" stroke="#666666" points="660.85,-376.95 671.42,-377.68 663.61,-370.52 660.85,-376.95"/>
</g>
<!-- amend_pessimistic_lock -->
<g id="node25" class="node">
<title>amend_pessimistic_lock</title>
<path fill="none" stroke="#1c2123" d="M813.5,-268C813.5,-268 686.5,-268 686.5,-268 680.5,-268 674.5,-262 674.5,-256 674.5,-256 674.5,-244 674.5,-244 674.5,-238 680.5,-232 686.5,-232 686.5,-232 813.5,-232 813.5,-232 819.5,-232 825.5,-238 825.5,-244 825.5,-244 825.5,-256 825.5,-256 825.5,-262 819.5,-268 813.5,-268"/>
<text text-anchor="middle" x="750" y="-246.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">amend_pessimistic_lock</text>
</g>
<!-- txn_actions_prewrite&#45;&gt;amend_pessimistic_lock -->
<g id="edge24" class="edge">
<title>txn_actions_prewrite&#45;&gt;amend_pessimistic_lock</title>
<path fill="none" stroke="#666666" d="M590.57,-271.04C614.63,-267.84 640.55,-264.4 664.31,-261.25"/>
<polygon fill="#666666" stroke="#666666" points="664.9,-264.7 674.35,-259.91 663.98,-257.76 664.9,-264.7"/>
</g>
<!-- may_have_old_value -->
<g id="node26" class="node">
<title>may_have_old_value</title>
<path fill="none" stroke="#1c2123" d="M804.5,-322C804.5,-322 695.5,-322 695.5,-322 689.5,-322 683.5,-316 683.5,-310 683.5,-310 683.5,-298 683.5,-298 683.5,-292 689.5,-286 695.5,-286 695.5,-286 804.5,-286 804.5,-286 810.5,-286 816.5,-292 816.5,-298 816.5,-298 816.5,-310 816.5,-310 816.5,-316 810.5,-322 804.5,-322"/>
<text text-anchor="middle" x="750" y="-300.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">may_have_old_value</text>
</g>
<!-- txn_actions_prewrite&#45;&gt;may_have_old_value -->
<g id="edge25" class="edge">
<title>txn_actions_prewrite&#45;&gt;may_have_old_value</title>
<path fill="none" stroke="#666666" d="M590.57,-290.61C617.67,-292.9 647.12,-295.39 673.19,-297.59"/>
<polygon fill="#666666" stroke="#666666" points="673.13,-301.1 683.39,-298.46 673.72,-294.13 673.13,-301.1"/>
</g>
<!-- get_old_value -->
<g id="node27" class="node">
<title>get_old_value</title>
<path fill="none" stroke="#1c2123" d="M784.5,-214C784.5,-214 715.5,-214 715.5,-214 709.5,-214 703.5,-208 703.5,-202 703.5,-202 703.5,-190 703.5,-190 703.5,-184 709.5,-178 715.5,-178 715.5,-178 784.5,-178 784.5,-178 790.5,-178 796.5,-184 796.5,-190 796.5,-190 796.5,-202 796.5,-202 796.5,-208 790.5,-214 784.5,-214"/>
<text text-anchor="middle" x="750" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_old_value</text>
</g>
<!-- txn_actions_prewrite&#45;&gt;get_old_value -->
<g id="edge26" class="edge">
<title>txn_actions_prewrite&#45;&gt;get_old_value</title>
<path fill="none" stroke="#666666" d="M583.61,-244.94C602.28,-237.11 622.14,-229.34 641,-223 657.85,-217.34 676.52,-212.26 693.54,-208.08"/>
<polygon fill="#666666" stroke="#666666" points="694.44,-211.46 703.35,-205.72 692.81,-204.65 694.44,-211.46"/>
</g>
<!-- process_write -->
<g id="node28" class="node">
<title>process_write</title>
<path fill="none" stroke="#1c2123" d="M96,-1531C96,-1531 28,-1531 28,-1531 22,-1531 16,-1525 16,-1519 16,-1519 16,-1507 16,-1507 16,-1501 22,-1495 28,-1495 28,-1495 96,-1495 96,-1495 102,-1495 108,-1501 108,-1507 108,-1507 108,-1519 108,-1519 108,-1525 102,-1531 96,-1531"/>
<text text-anchor="middle" x="62" y="-1509.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">process_write</text>
</g>
<!-- process_write&#45;&gt;can_skip_constraint_check -->
<g id="edge28" class="edge">
<title>process_write&#45;&gt;can_skip_constraint_check</title>
<path fill="none" stroke="#666666" d="M71.18,-1531.31C83.4,-1556.59 108.82,-1601.91 144,-1627 147.88,-1629.77 152.02,-1632.28 156.32,-1634.57"/>
<polygon fill="#666666" stroke="#666666" points="154.82,-1637.73 165.35,-1638.94 157.87,-1631.43 154.82,-1637.73"/>
</g>
<!-- check_max_ts_synced -->
<g id="node29" class="node">
<title>check_max_ts_synced</title>
<path fill="none" stroke="#1c2123" d="M304.5,-1531C304.5,-1531 189.5,-1531 189.5,-1531 183.5,-1531 177.5,-1525 177.5,-1519 177.5,-1519 177.5,-1507 177.5,-1507 177.5,-1501 183.5,-1495 189.5,-1495 189.5,-1495 304.5,-1495 304.5,-1495 310.5,-1495 316.5,-1501 316.5,-1507 316.5,-1507 316.5,-1519 316.5,-1519 316.5,-1525 310.5,-1531 304.5,-1531"/>
<text text-anchor="middle" x="247" y="-1509.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">check_max_ts_synced</text>
</g>
<!-- process_write&#45;&gt;check_max_ts_synced -->
<g id="edge29" class="edge">
<title>process_write&#45;&gt;check_max_ts_synced</title>
<path fill="none" stroke="#666666" d="M108.24,-1513C126.07,-1513 147.09,-1513 167.27,-1513"/>
<polygon fill="#666666" stroke="#666666" points="167.4,-1516.5 177.4,-1513 167.4,-1509.5 167.4,-1516.5"/>
</g>
<!-- MvccTxn_new -->
<g id="node30" class="node">
<title>MvccTxn_new</title>
<path fill="none" stroke="#1c2123" d="M284.5,-1585C284.5,-1585 209.5,-1585 209.5,-1585 203.5,-1585 197.5,-1579 197.5,-1573 197.5,-1573 197.5,-1561 197.5,-1561 197.5,-1555 203.5,-1549 209.5,-1549 209.5,-1549 284.5,-1549 284.5,-1549 290.5,-1549 296.5,-1555 296.5,-1561 296.5,-1561 296.5,-1573 296.5,-1573 296.5,-1579 290.5,-1585 284.5,-1585"/>
<text text-anchor="middle" x="247" y="-1563.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">MvccTxn_new</text>
</g>
<!-- process_write&#45;&gt;MvccTxn_new -->
<g id="edge30" class="edge">
<title>process_write&#45;&gt;MvccTxn_new</title>
<path fill="none" stroke="#666666" d="M108.25,-1528.64C119.86,-1532.5 132.35,-1536.52 144,-1540 158.05,-1544.2 173.28,-1548.41 187.58,-1552.21"/>
<polygon fill="#666666" stroke="#666666" points="186.75,-1555.61 197.31,-1554.78 188.54,-1548.85 186.75,-1555.61"/>
</g>
<!-- prewrite -->
<g id="node31" class="node">
<title>prewrite</title>
<path fill="none" stroke="#1c2123" d="M156,-1349.5C156,-1349.5 338,-1349.5 338,-1349.5 344,-1349.5 350,-1355.5 350,-1361.5 350,-1361.5 350,-1444.5 350,-1444.5 350,-1450.5 344,-1456.5 338,-1456.5 338,-1456.5 156,-1456.5 156,-1456.5 150,-1456.5 144,-1450.5 144,-1444.5 144,-1444.5 144,-1361.5 144,-1361.5 144,-1355.5 150,-1349.5 156,-1349.5"/>
<text text-anchor="middle" x="247" y="-1441.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">prewrite</text>
<polyline fill="none" stroke="#1c2123" points="144,-1433.5 350,-1433.5 "/>
<text text-anchor="middle" x="247" y="-1418.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">遍历所有的mutaions</text>
<polyline fill="none" stroke="#1c2123" points="144,-1410.5 350,-1410.5 "/>
<text text-anchor="start" x="152" y="-1395.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">返回locks和final_min_commit_ts</text>
<polyline fill="none" stroke="#1c2123" points="144,-1387.5 350,-1387.5 "/>
<text text-anchor="start" x="152" y="-1372.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">对于每个mutation，</text>
<text text-anchor="start" x="152" y="-1357.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用txn::actions::prewrite</text>
</g>
<!-- process_write&#45;&gt;prewrite -->
<g id="edge31" class="edge">
<title>process_write&#45;&gt;prewrite</title>
<path fill="none" stroke="#666666" d="M93.22,-1494.84C108.59,-1485.6 128.22,-1473.8 148.26,-1461.75"/>
<polygon fill="#666666" stroke="#666666" points="150.09,-1464.73 156.86,-1456.58 146.48,-1458.73 150.09,-1464.73"/>
</g>
<!-- write_result -->
<g id="node32" class="node">
<title>write_result</title>
<path fill="none" stroke="#1c2123" d="M778.5,-1466C778.5,-1466 721.5,-1466 721.5,-1466 715.5,-1466 709.5,-1460 709.5,-1454 709.5,-1454 709.5,-1442 709.5,-1442 709.5,-1436 715.5,-1430 721.5,-1430 721.5,-1430 778.5,-1430 778.5,-1430 784.5,-1430 790.5,-1436 790.5,-1442 790.5,-1442 790.5,-1454 790.5,-1454 790.5,-1460 784.5,-1466 778.5,-1466"/>
<text text-anchor="middle" x="750" y="-1444.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_result</text>
</g>
<!-- process_write&#45;&gt;write_result -->
<g id="edge32" class="edge">
<title>process_write&#45;&gt;write_result</title>
<path fill="none" stroke="#666666" d="M108.19,-1495.09C119.69,-1491.33 132.15,-1487.92 144,-1486 234.37,-1471.33 260.44,-1466.99 350,-1486 367.13,-1489.63 368.87,-1498.37 386,-1502 488.17,-1523.68 518.63,-1522.71 621,-1502 651.19,-1495.89 683.1,-1482.44 707.52,-1470.5"/>
<polygon fill="#666666" stroke="#666666" points="709.11,-1473.61 716.48,-1466.01 705.98,-1467.35 709.11,-1473.61"/>
</g>
<!-- prewrite&#45;&gt;txn_actions_prewrite -->
<g id="edge40" class="edge">
<title>prewrite&#45;&gt;txn_actions_prewrite</title>
<path fill="none" stroke="#666666" d="M260,-1349.36C302.74,-1158.26 447.19,-512.43 487.8,-330.85"/>
<polygon fill="#666666" stroke="#666666" points="491.22,-331.58 489.99,-321.06 484.39,-330.05 491.22,-331.58"/>
</g>
<!-- locks -->
<g id="node33" class="node">
<title>locks</title>
<path fill="none" stroke="#1c2123" d="M514.5,-1439C514.5,-1439 484.5,-1439 484.5,-1439 478.5,-1439 472.5,-1433 472.5,-1427 472.5,-1427 472.5,-1415 472.5,-1415 472.5,-1409 478.5,-1403 484.5,-1403 484.5,-1403 514.5,-1403 514.5,-1403 520.5,-1403 526.5,-1409 526.5,-1415 526.5,-1415 526.5,-1427 526.5,-1427 526.5,-1433 520.5,-1439 514.5,-1439"/>
<text text-anchor="middle" x="499.5" y="-1417.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">locks</text>
</g>
<!-- prewrite&#45;&gt;locks -->
<g id="edge33" class="edge">
<title>prewrite&#45;&gt;locks</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M350.25,-1410.35C389.89,-1413.2 432.71,-1416.27 462.09,-1418.38"/>
<polygon fill="green" stroke="green" points="462.05,-1421.89 472.28,-1419.12 462.56,-1414.91 462.05,-1421.89"/>
</g>
<!-- final_min_commit_ts -->
<g id="node34" class="node">
<title>final_min_commit_ts</title>
<path fill="none" stroke="#1c2123" d="M554.5,-1493C554.5,-1493 444.5,-1493 444.5,-1493 438.5,-1493 432.5,-1487 432.5,-1481 432.5,-1481 432.5,-1469 432.5,-1469 432.5,-1463 438.5,-1457 444.5,-1457 444.5,-1457 554.5,-1457 554.5,-1457 560.5,-1457 566.5,-1463 566.5,-1469 566.5,-1469 566.5,-1481 566.5,-1481 566.5,-1487 560.5,-1493 554.5,-1493"/>
<text text-anchor="middle" x="499.5" y="-1471.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">final_min_commit_ts</text>
</g>
<!-- prewrite&#45;&gt;final_min_commit_ts -->
<g id="edge34" class="edge">
<title>prewrite&#45;&gt;final_min_commit_ts</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M350.21,-1437.33C362.23,-1441.07 374.36,-1444.71 386,-1448 397.74,-1451.32 410.25,-1454.58 422.5,-1457.63"/>
<polygon fill="green" stroke="green" points="421.69,-1461.04 432.24,-1460.03 423.37,-1454.24 421.69,-1461.04"/>
</g>
<!-- TransactionProperties -->
<g id="node37" class="node">
<title>TransactionProperties</title>
<path fill="none" stroke="#1c2123" d="M555,-1385C555,-1385 444,-1385 444,-1385 438,-1385 432,-1379 432,-1373 432,-1373 432,-1361 432,-1361 432,-1355 438,-1349 444,-1349 444,-1349 555,-1349 555,-1349 561,-1349 567,-1355 567,-1361 567,-1361 567,-1373 567,-1373 567,-1379 561,-1385 555,-1385"/>
<text text-anchor="middle" x="499.5" y="-1363.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TransactionProperties</text>
</g>
<!-- prewrite&#45;&gt;TransactionProperties -->
<g id="edge41" class="edge">
<title>prewrite&#45;&gt;TransactionProperties</title>
<path fill="none" stroke="#666666" d="M350.25,-1388.31C374.06,-1384.88 399.03,-1381.3 421.54,-1378.06"/>
<polygon fill="#666666" stroke="#666666" points="422.29,-1381.49 431.69,-1376.6 421.3,-1374.56 422.29,-1381.49"/>
</g>
<!-- write_result&#45;&gt;into_modifies -->
<g id="edge37" class="edge">
<title>write_result&#45;&gt;into_modifies</title>
<path fill="none" stroke="#666666" d="M790.69,-1433.28C876.33,-1401.52 1078.62,-1326.51 1176.32,-1290.28"/>
<polygon fill="#666666" stroke="#666666" points="1177.56,-1293.55 1185.72,-1286.79 1175.13,-1286.99 1177.56,-1293.55"/>
</g>
<!-- locks&#45;&gt;write_result -->
<g id="edge35" class="edge">
<title>locks&#45;&gt;write_result</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M526.62,-1423.84C567.51,-1428.28 647.33,-1436.95 699.38,-1442.61"/>
<polygon fill="green" stroke="green" points="699.08,-1446.1 709.4,-1443.7 699.84,-1439.14 699.08,-1446.1"/>
</g>
<!-- final_min_commit_ts&#45;&gt;write_result -->
<g id="edge36" class="edge">
<title>final_min_commit_ts&#45;&gt;write_result</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M566.77,-1467.8C608.3,-1463.29 660.97,-1457.57 698.99,-1453.43"/>
<polygon fill="green" stroke="green" points="699.74,-1456.87 709.3,-1452.31 698.98,-1449.91 699.74,-1456.87"/>
</g>
<!-- WriteResult -->
<g id="node36" class="node">
<title>WriteResult</title>
<path fill="none" stroke="#1c2123" d="M1514,-1385C1514,-1385 1456,-1385 1456,-1385 1450,-1385 1444,-1379 1444,-1373 1444,-1373 1444,-1361 1444,-1361 1444,-1355 1450,-1349 1456,-1349 1456,-1349 1514,-1349 1514,-1349 1520,-1349 1526,-1355 1526,-1361 1526,-1361 1526,-1373 1526,-1373 1526,-1379 1520,-1385 1514,-1385"/>
<text text-anchor="middle" x="1485" y="-1363.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteResult</text>
</g>
<!-- WriteData&#45;&gt;WriteResult -->
<g id="edge39" class="edge">
<title>WriteData&#45;&gt;WriteResult</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1408.09,-1367C1416.24,-1367 1425.06,-1367 1433.7,-1367"/>
<polygon fill="green" stroke="green" points="1433.72,-1370.5 1443.72,-1367 1433.72,-1363.5 1433.72,-1370.5"/>
</g>
</g>
</svg>
