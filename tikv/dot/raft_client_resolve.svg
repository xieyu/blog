<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: reaft_client_resolve Pages: 1 -->
<svg width="1929pt" height="688pt"
 viewBox="0.00 0.00 1929.00 688.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 684)">
<title>reaft_client_resolve</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-684 1925,-684 1925,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_PeerFsmDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1705,-21C1705,-21 1839,-21 1839,-21 1845,-21 1851,-27 1851,-33 1851,-33 1851,-91 1851,-91 1851,-97 1845,-103 1839,-103 1839,-103 1705,-103 1705,-103 1699,-103 1693,-97 1693,-91 1693,-91 1693,-33 1693,-33 1693,-27 1699,-21 1705,-21"/>
<text text-anchor="middle" x="1772" y="-83" font-family="Times,serif" font-size="20.00">PeerFsmDelegate</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_RaftStoreRouter</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1188,-8C1188,-8 1598,-8 1598,-8 1604,-8 1610,-14 1610,-20 1610,-20 1610,-104 1610,-104 1610,-110 1604,-116 1598,-116 1598,-116 1188,-116 1188,-116 1182,-116 1176,-110 1176,-104 1176,-104 1176,-20 1176,-20 1176,-14 1182,-8 1188,-8"/>
<text text-anchor="middle" x="1393" y="-96" font-family="Times,serif" font-size="20.00">RaftStoreRouter</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_resolver</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M459,-212C459,-212 1901,-212 1901,-212 1907,-212 1913,-218 1913,-224 1913,-224 1913,-660 1913,-660 1913,-666 1907,-672 1901,-672 1901,-672 459,-672 459,-672 453,-672 447,-666 447,-660 447,-660 447,-224 447,-224 447,-218 453,-212 459,-212"/>
<text text-anchor="middle" x="1180" y="-652" font-family="Times,serif" font-size="20.00">resolver.rs/Runner</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_PdStoreResolver</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M145,-302C145,-302 415,-302 415,-302 421,-302 427,-308 427,-314 427,-314 427,-472 427,-472 427,-478 421,-484 415,-484 415,-484 145,-484 145,-484 139,-484 133,-478 133,-472 133,-472 133,-314 133,-314 133,-308 139,-302 145,-302"/>
<text text-anchor="middle" x="280" y="-464" font-family="Times,serif" font-size="20.00">PdStoreResolver</text>
</g>
<!-- on_significant_msg -->
<g id="node1" class="node">
<title>on_significant_msg</title>
<path fill="none" stroke="#1c2123" d="M1821,-65C1821,-65 1722,-65 1722,-65 1716,-65 1710,-59 1710,-53 1710,-53 1710,-41 1710,-41 1710,-35 1716,-29 1722,-29 1722,-29 1821,-29 1821,-29 1827,-29 1833,-35 1833,-41 1833,-41 1833,-53 1833,-53 1833,-59 1827,-65 1821,-65"/>
<text text-anchor="middle" x="1771.5" y="-43.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_significant_msg</text>
</g>
<!-- RaftStoreRouter_report_resolved -->
<g id="node2" class="node">
<title>RaftStoreRouter_report_resolved</title>
<path fill="none" stroke="#1c2123" d="M1196,-16.5C1196,-16.5 1351,-16.5 1351,-16.5 1357,-16.5 1363,-22.5 1363,-28.5 1363,-28.5 1363,-65.5 1363,-65.5 1363,-71.5 1357,-77.5 1351,-77.5 1351,-77.5 1196,-77.5 1196,-77.5 1190,-77.5 1184,-71.5 1184,-65.5 1184,-65.5 1184,-28.5 1184,-28.5 1184,-22.5 1190,-16.5 1196,-16.5"/>
<text text-anchor="middle" x="1273.5" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">report_resolved</text>
<polyline fill="none" stroke="#1c2123" points="1184,-54.5 1363,-54.5 "/>
<text text-anchor="start" x="1192" y="-39.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Report a StoreResolved event</text>
<text text-anchor="start" x="1192" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> to all raft groups</text>
</g>
<!-- broadcast_normal -->
<g id="node3" class="node">
<title>broadcast_normal</title>
<path fill="none" stroke="#1c2123" d="M1428,-24C1428,-24 1590,-24 1590,-24 1596,-24 1602,-30 1602,-36 1602,-36 1602,-58 1602,-58 1602,-64 1596,-70 1590,-70 1590,-70 1428,-70 1428,-70 1422,-70 1416,-64 1416,-58 1416,-58 1416,-36 1416,-36 1416,-30 1422,-24 1428,-24"/>
<text text-anchor="middle" x="1509" y="-54.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">broadcast_normal</text>
<polyline fill="none" stroke="#1c2123" points="1416,-47 1602,-47 "/>
<text text-anchor="start" x="1424" y="-31.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">SignificantMsg::StoreResolved</text>
</g>
<!-- RaftStoreRouter_report_resolved&#45;&gt;broadcast_normal -->
<g id="edge1" class="edge">
<title>RaftStoreRouter_report_resolved&#45;&gt;broadcast_normal</title>
<path fill="none" stroke="#666666" d="M1363.11,-47C1377.02,-47 1391.5,-47 1405.69,-47"/>
<polygon fill="#666666" stroke="#666666" points="1405.96,-50.5 1415.96,-47 1405.96,-43.5 1405.96,-50.5"/>
</g>
<!-- broadcast_normal&#45;&gt;on_significant_msg -->
<g id="edge2" class="edge">
<title>broadcast_normal&#45;&gt;on_significant_msg</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1602.21,-47C1634.16,-47 1669.45,-47 1699.43,-47"/>
<polygon fill="green" stroke="green" points="1699.8,-50.5 1709.8,-47 1699.8,-43.5 1699.8,-50.5"/>
</g>
<!-- Runner -->
<g id="node4" class="node">
<title>Runner</title>
<path fill="none" stroke="#1c2123" d="M1650,-476.5C1650,-476.5 1893,-476.5 1893,-476.5 1899,-476.5 1905,-482.5 1905,-488.5 1905,-488.5 1905,-579.5 1905,-579.5 1905,-585.5 1899,-591.5 1893,-591.5 1893,-591.5 1650,-591.5 1650,-591.5 1644,-591.5 1638,-585.5 1638,-579.5 1638,-579.5 1638,-488.5 1638,-488.5 1638,-482.5 1644,-476.5 1650,-476.5"/>
<text text-anchor="middle" x="1771.5" y="-576.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Runner</text>
<polyline fill="none" stroke="#1c2123" points="1638,-568.5 1905,-568.5 "/>
<text text-anchor="start" x="1646" y="-553.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pd_client: Arc&lt;T&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1638,-545.5 1905,-545.5 "/>
<text text-anchor="start" x="1646" y="-530.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_addrs: HashMap&lt;u64, StoreAddr&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1638,-522.5 1905,-522.5 "/>
<text text-anchor="start" x="1646" y="-507.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">state: Arc&lt;Mutex&lt;GlobalReplicationState&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1638,-499.5 1905,-499.5 "/>
<text text-anchor="start" x="1646" y="-484.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">router: RR,</text>
</g>
<!-- resolve -->
<g id="node5" class="node">
<title>resolve</title>
<path fill="none" stroke="#1c2123" d="M759,-364C759,-364 967,-364 967,-364 973,-364 979,-370 979,-376 979,-376 979,-428 979,-428 979,-434 973,-440 967,-440 967,-440 759,-440 759,-440 753,-440 747,-434 747,-428 747,-428 747,-376 747,-376 747,-370 753,-364 759,-364"/>
<text text-anchor="middle" x="863" y="-424.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve</text>
<polyline fill="none" stroke="#1c2123" points="747,-417 979,-417 "/>
<text text-anchor="start" x="755" y="-401.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">先从store_addrs本地cache中取addr</text>
<text text-anchor="start" x="755" y="-386.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 失败的调用get_address去pd server</text>
<text text-anchor="start" x="755" y="-371.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 获取addr地址，然后保存到cache中</text>
</g>
<!-- task_cb -->
<g id="node8" class="node">
<title>task_cb</title>
<path fill="none" stroke="#1c2123" d="M1027,-304.5C1027,-304.5 1119,-304.5 1119,-304.5 1125,-304.5 1131,-310.5 1131,-316.5 1131,-316.5 1131,-353.5 1131,-353.5 1131,-359.5 1125,-365.5 1119,-365.5 1119,-365.5 1027,-365.5 1027,-365.5 1021,-365.5 1015,-359.5 1015,-353.5 1015,-353.5 1015,-316.5 1015,-316.5 1015,-310.5 1021,-304.5 1027,-304.5"/>
<text text-anchor="middle" x="1073" y="-350.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">task_cb</text>
<polyline fill="none" stroke="#1c2123" points="1015,-342.5 1131,-342.5 "/>
<text text-anchor="start" x="1023" y="-327.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">解析完毕后调用</text>
<text text-anchor="start" x="1023" y="-312.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> task的回调</text>
</g>
<!-- resolve&#45;&gt;task_cb -->
<g id="edge20" class="edge">
<title>resolve&#45;&gt;task_cb</title>
<path fill="none" stroke="#666666" d="M979.25,-364.87C988.08,-362.03 996.8,-359.22 1005.14,-356.54"/>
<polygon fill="#666666" stroke="#666666" points="1006.31,-359.84 1014.76,-353.44 1004.17,-353.17 1006.31,-359.84"/>
</g>
<!-- get_address -->
<g id="node9" class="node">
<title>get_address</title>
<path fill="none" stroke="#1c2123" d="M1101,-420C1101,-420 1045,-420 1045,-420 1039,-420 1033,-414 1033,-408 1033,-408 1033,-396 1033,-396 1033,-390 1039,-384 1045,-384 1045,-384 1101,-384 1101,-384 1107,-384 1113,-390 1113,-396 1113,-396 1113,-408 1113,-408 1113,-414 1107,-420 1101,-420"/>
<text text-anchor="middle" x="1073" y="-398.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_address</text>
</g>
<!-- resolve&#45;&gt;get_address -->
<g id="edge6" class="edge">
<title>resolve&#45;&gt;get_address</title>
<path fill="none" stroke="#666666" d="M979.25,-402C994.49,-402 1009.4,-402 1022.65,-402"/>
<polygon fill="#666666" stroke="#666666" points="1022.9,-405.5 1032.9,-402 1022.9,-398.5 1022.9,-405.5"/>
</g>
<!-- store_addrs_get -->
<g id="node10" class="node">
<title>store_addrs_get</title>
<path fill="none" stroke="#1c2123" d="M1432,-542.5C1432,-542.5 1586,-542.5 1586,-542.5 1592,-542.5 1598,-548.5 1598,-554.5 1598,-554.5 1598,-621.5 1598,-621.5 1598,-627.5 1592,-633.5 1586,-633.5 1586,-633.5 1432,-633.5 1432,-633.5 1426,-633.5 1420,-627.5 1420,-621.5 1420,-621.5 1420,-554.5 1420,-554.5 1420,-548.5 1426,-542.5 1432,-542.5"/>
<text text-anchor="middle" x="1509" y="-618.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_addrs.get</text>
<polyline fill="none" stroke="#1c2123" points="1420,-610.5 1598,-610.5 "/>
<text text-anchor="start" x="1428" y="-595.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">从缓存中获取store addr</text>
<text text-anchor="start" x="1428" y="-580.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果超过了refresh 时间</text>
<text text-anchor="start" x="1428" y="-565.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 就是用pd_client去pd server</text>
<text text-anchor="start" x="1428" y="-550.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 重新解析store addr</text>
</g>
<!-- resolve&#45;&gt;store_addrs_get -->
<g id="edge7" class="edge">
<title>resolve&#45;&gt;store_addrs_get</title>
<path fill="none" stroke="#666666" d="M883.62,-440.34C908.15,-484.14 954.4,-554.46 1015,-591 1135.36,-663.57 1304.14,-641.81 1409.72,-616.88"/>
<polygon fill="#666666" stroke="#666666" points="1410.83,-620.21 1419.73,-614.46 1409.19,-613.4 1410.83,-620.21"/>
</g>
<!-- store_addrs_insert -->
<g id="node11" class="node">
<title>store_addrs_insert</title>
<path fill="none" stroke="#1c2123" d="M1442.5,-462.5C1442.5,-462.5 1575.5,-462.5 1575.5,-462.5 1581.5,-462.5 1587.5,-468.5 1587.5,-474.5 1587.5,-474.5 1587.5,-511.5 1587.5,-511.5 1587.5,-517.5 1581.5,-523.5 1575.5,-523.5 1575.5,-523.5 1442.5,-523.5 1442.5,-523.5 1436.5,-523.5 1430.5,-517.5 1430.5,-511.5 1430.5,-511.5 1430.5,-474.5 1430.5,-474.5 1430.5,-468.5 1436.5,-462.5 1442.5,-462.5"/>
<text text-anchor="middle" x="1509" y="-508.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_addrs.insert</text>
<polyline fill="none" stroke="#1c2123" points="1430.5,-500.5 1587.5,-500.5 "/>
<text text-anchor="start" x="1438.5" y="-485.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将store地址和当前时间</text>
<text text-anchor="start" x="1438.5" y="-470.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 戳插入缓存中</text>
</g>
<!-- resolve&#45;&gt;store_addrs_insert -->
<g id="edge8" class="edge">
<title>resolve&#45;&gt;store_addrs_insert</title>
<path fill="none" stroke="#666666" d="M886.9,-440.22C912.82,-479.95 958.84,-540.76 1015,-573 1074.72,-607.28 1098.47,-596.3 1167,-603 1261.22,-612.21 1299.19,-652.31 1380,-603 1409.86,-584.78 1390.47,-556.92 1416,-533 1417.89,-531.23 1419.87,-529.53 1421.93,-527.9"/>
<polygon fill="#666666" stroke="#666666" points="1424.12,-530.63 1430.19,-521.94 1420.03,-524.95 1424.12,-530.63"/>
</g>
<!-- start_impl -->
<g id="node6" class="node">
<title>start_impl</title>
<path fill="none" stroke="#1c2123" d="M467,-326.5C467,-326.5 609,-326.5 609,-326.5 615,-326.5 621,-332.5 621,-338.5 621,-338.5 621,-405.5 621,-405.5 621,-411.5 615,-417.5 609,-417.5 609,-417.5 467,-417.5 467,-417.5 461,-417.5 455,-411.5 455,-405.5 455,-405.5 455,-338.5 455,-338.5 455,-332.5 461,-326.5 467,-326.5"/>
<text text-anchor="middle" x="538" y="-402.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start_impl</text>
<polyline fill="none" stroke="#1c2123" points="455,-394.5 621,-394.5 "/>
<text text-anchor="start" x="463" y="-379.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">spawn线程</text>
<text text-anchor="start" x="463" y="-364.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 在线程while循环中</text>
<text text-anchor="start" x="463" y="-349.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 从rx中获取task</text>
<text text-anchor="middle" x="538" y="-334.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后调用run 执行task.cb</text>
</g>
<!-- run -->
<g id="node7" class="node">
<title>run</title>
<path fill="none" stroke="#1c2123" d="M699,-390C699,-390 669,-390 669,-390 663,-390 657,-384 657,-378 657,-378 657,-366 657,-366 657,-360 663,-354 669,-354 669,-354 699,-354 699,-354 705,-354 711,-360 711,-366 711,-366 711,-378 711,-378 711,-384 705,-390 699,-390"/>
<text text-anchor="middle" x="684" y="-368.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">run</text>
</g>
<!-- start_impl&#45;&gt;run -->
<g id="edge3" class="edge">
<title>start_impl&#45;&gt;run</title>
<path fill="none" stroke="#666666" d="M621.1,-372C629.95,-372 638.6,-372 646.5,-372"/>
<polygon fill="#666666" stroke="#666666" points="646.73,-375.5 656.73,-372 646.73,-368.5 646.73,-375.5"/>
</g>
<!-- run&#45;&gt;resolve -->
<g id="edge4" class="edge">
<title>run&#45;&gt;resolve</title>
<path fill="none" stroke="#666666" d="M711.12,-376.43C718.61,-377.7 727.32,-379.17 736.7,-380.76"/>
<polygon fill="#666666" stroke="#666666" points="736.25,-384.24 746.69,-382.46 737.42,-377.33 736.25,-384.24"/>
</g>
<!-- run&#45;&gt;task_cb -->
<g id="edge5" class="edge">
<title>run&#45;&gt;task_cb</title>
<path fill="none" stroke="#666666" d="M711.28,-363.5C722.22,-360.31 735.11,-356.97 747,-355 835.27,-340.34 938.63,-336.17 1004.67,-335.11"/>
<polygon fill="#666666" stroke="#666666" points="1004.99,-338.61 1014.95,-334.97 1004.9,-331.61 1004.99,-338.61"/>
</g>
<!-- oneshot_channel -->
<g id="node23" class="node">
<title>oneshot_channel</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1179,-125C1179,-125 1368,-125 1368,-125 1374,-125 1380,-131 1380,-137 1380,-137 1380,-189 1380,-189 1380,-195 1374,-201 1368,-201 1368,-201 1179,-201 1179,-201 1173,-201 1167,-195 1167,-189 1167,-189 1167,-137 1167,-137 1167,-131 1173,-125 1179,-125"/>
<text text-anchor="middle" x="1273.5" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">oneshot::channel</text>
<polyline fill="none" stroke="#8a8898" points="1167,-178 1380,-178 "/>
<text text-anchor="start" x="1175" y="-162.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">store addr解析完毕</text>
<text text-anchor="start" x="1175" y="-147.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 回调中使用</text>
<text text-anchor="start" x="1175" y="-132.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> oneshot::channel的tx 触发rx.await</text>
</g>
<!-- task_cb&#45;&gt;oneshot_channel -->
<g id="edge25" class="edge">
<title>task_cb&#45;&gt;oneshot_channel</title>
<path fill="none" stroke="#666666" d="M1090.05,-304.41C1106.2,-276.13 1133.5,-234.59 1167,-208 1167.38,-207.7 1167.76,-207.4 1168.15,-207.1"/>
<polygon fill="#666666" stroke="#666666" points="1170.45,-209.75 1176.53,-201.08 1166.37,-204.07 1170.45,-209.75"/>
</g>
<!-- get_address&#45;&gt;RaftStoreRouter_report_resolved -->
<g id="edge11" class="edge">
<title>get_address&#45;&gt;RaftStoreRouter_report_resolved</title>
<path fill="none" stroke="#666666" d="M1113.07,-389.9C1119.97,-386.13 1126.4,-381.27 1131,-375 1199.78,-281.32 1104.79,-214.17 1167,-116 1175,-103.38 1186.23,-92.59 1198.4,-83.54"/>
<polygon fill="#666666" stroke="#666666" points="1200.76,-86.16 1206.95,-77.56 1196.75,-80.43 1200.76,-86.16"/>
</g>
<!-- PDClient_get_store -->
<g id="node12" class="node">
<title>PDClient_get_store</title>
<path fill="none" stroke="#1c2123" d="M1323,-474C1323,-474 1224,-474 1224,-474 1218,-474 1212,-468 1212,-462 1212,-462 1212,-450 1212,-450 1212,-444 1218,-438 1224,-438 1224,-438 1323,-438 1323,-438 1329,-438 1335,-444 1335,-450 1335,-450 1335,-462 1335,-462 1335,-468 1329,-474 1323,-474"/>
<text text-anchor="middle" x="1273.5" y="-452.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PDClient_get_store</text>
</g>
<!-- get_address&#45;&gt;PDClient_get_store -->
<g id="edge12" class="edge">
<title>get_address&#45;&gt;PDClient_get_store</title>
<path fill="none" stroke="#666666" d="M1113.29,-413.71C1129.84,-418.56 1149.32,-424.17 1167,-429 1178.33,-432.09 1190.37,-435.27 1202.11,-438.32"/>
<polygon fill="#666666" stroke="#666666" points="1201.32,-441.73 1211.88,-440.84 1203.07,-434.95 1201.32,-441.73"/>
</g>
<!-- state_status_get_mode -->
<g id="node13" class="node">
<title>state_status_get_mode</title>
<path fill="none" stroke="#1c2123" d="M1331.5,-256C1331.5,-256 1215.5,-256 1215.5,-256 1209.5,-256 1203.5,-250 1203.5,-244 1203.5,-244 1203.5,-232 1203.5,-232 1203.5,-226 1209.5,-220 1215.5,-220 1215.5,-220 1331.5,-220 1331.5,-220 1337.5,-220 1343.5,-226 1343.5,-232 1343.5,-232 1343.5,-244 1343.5,-244 1343.5,-250 1337.5,-256 1331.5,-256"/>
<text text-anchor="middle" x="1273.5" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">state_status_get_mode</text>
</g>
<!-- get_address&#45;&gt;state_status_get_mode -->
<g id="edge13" class="edge">
<title>get_address&#45;&gt;state_status_get_mode</title>
<path fill="none" stroke="#666666" d="M1113.11,-388.74C1119.75,-385.11 1126.08,-380.59 1131,-375 1165.01,-336.41 1129.45,-300.16 1167,-265 1174.63,-257.85 1183.9,-252.53 1193.73,-248.58"/>
<polygon fill="#666666" stroke="#666666" points="1195.03,-251.84 1203.29,-245.2 1192.69,-245.24 1195.03,-251.84"/>
</g>
<!-- StoreGroup_register_store -->
<g id="node14" class="node">
<title>StoreGroup_register_store</title>
<path fill="none" stroke="#1c2123" d="M1225,-274.5C1225,-274.5 1322,-274.5 1322,-274.5 1328,-274.5 1334,-280.5 1334,-286.5 1334,-286.5 1334,-353.5 1334,-353.5 1334,-359.5 1328,-365.5 1322,-365.5 1322,-365.5 1225,-365.5 1225,-365.5 1219,-365.5 1213,-359.5 1213,-353.5 1213,-353.5 1213,-286.5 1213,-286.5 1213,-280.5 1219,-274.5 1225,-274.5"/>
<text text-anchor="middle" x="1273.5" y="-350.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreGroup</text>
<text text-anchor="middle" x="1273.5" y="-335.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> register_store</text>
<polyline fill="none" stroke="#1c2123" points="1213,-327.5 1334,-327.5 "/>
<text text-anchor="start" x="1221" y="-312.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Registers the store </text>
<text text-anchor="start" x="1221" y="-297.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> with given label</text>
<text text-anchor="middle" x="1273.5" y="-282.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> value</text>
</g>
<!-- get_address&#45;&gt;StoreGroup_register_store -->
<g id="edge14" class="edge">
<title>get_address&#45;&gt;StoreGroup_register_store</title>
<path fill="none" stroke="#666666" d="M1113.22,-385.8C1138.81,-375.23 1172.93,-361.13 1203.02,-348.7"/>
<polygon fill="#666666" stroke="#666666" points="1204.73,-351.78 1212.63,-344.73 1202.06,-345.31 1204.73,-351.78"/>
</g>
<!-- group_id -->
<g id="node15" class="node">
<title>group_id</title>
<path fill="none" stroke="#1c2123" d="M1294,-420C1294,-420 1253,-420 1253,-420 1247,-420 1241,-414 1241,-408 1241,-408 1241,-396 1241,-396 1241,-390 1247,-384 1253,-384 1253,-384 1294,-384 1294,-384 1300,-384 1306,-390 1306,-396 1306,-396 1306,-408 1306,-408 1306,-414 1300,-420 1294,-420"/>
<text text-anchor="middle" x="1273.5" y="-398.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">group_id</text>
</g>
<!-- get_address&#45;&gt;group_id -->
<g id="edge15" class="edge">
<title>get_address&#45;&gt;group_id</title>
<path fill="none" stroke="#666666" d="M1113.22,-402C1147.11,-402 1195.96,-402 1230.61,-402"/>
<polygon fill="#666666" stroke="#666666" points="1230.88,-405.5 1240.88,-402 1230.88,-398.5 1230.88,-405.5"/>
</g>
<!-- take_peer_address -->
<g id="node16" class="node">
<title>take_peer_address</title>
<path fill="none" stroke="#1c2123" d="M1227.5,-493C1227.5,-493 1319.5,-493 1319.5,-493 1325.5,-493 1331.5,-499 1331.5,-505 1331.5,-505 1331.5,-527 1331.5,-527 1331.5,-533 1325.5,-539 1319.5,-539 1319.5,-539 1227.5,-539 1227.5,-539 1221.5,-539 1215.5,-533 1215.5,-527 1215.5,-527 1215.5,-505 1215.5,-505 1215.5,-499 1221.5,-493 1227.5,-493"/>
<text text-anchor="middle" x="1273.5" y="-523.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">take_peer_address</text>
<polyline fill="none" stroke="#1c2123" points="1215.5,-516 1331.5,-516 "/>
<text text-anchor="middle" x="1273.5" y="-500.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">返回peer addr</text>
</g>
<!-- get_address&#45;&gt;take_peer_address -->
<g id="edge16" class="edge">
<title>get_address&#45;&gt;take_peer_address</title>
<path fill="none" stroke="#666666" d="M1090.49,-420.23C1107.89,-438.48 1136.91,-466.18 1167,-483 1179,-489.71 1192.54,-495.25 1205.82,-499.74"/>
<polygon fill="#666666" stroke="#666666" points="1204.83,-503.1 1215.42,-502.83 1206.97,-496.44 1204.83,-503.1"/>
</g>
<!-- store_addrs_get&#45;&gt;Runner -->
<g id="edge9" class="edge">
<title>store_addrs_get&#45;&gt;Runner:store_addrs</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1591.95,-542.44C1603.59,-538.48 1615.73,-535.56 1627.84,-534.47"/>
<polygon fill="green" stroke="green" points="1628.17,-537.96 1638,-534 1627.85,-530.96 1628.17,-537.96"/>
</g>
<!-- store_addrs_insert&#45;&gt;Runner -->
<g id="edge10" class="edge">
<title>store_addrs_insert&#45;&gt;Runner:store_addrs</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1578.82,-523.55C1594.4,-528.5 1611.24,-532.42 1627.76,-533.62"/>
<polygon fill="green" stroke="green" points="1627.88,-537.13 1638,-534 1628.14,-530.13 1627.88,-537.13"/>
</g>
<!-- take_peer_address&#45;&gt;store_addrs_insert -->
<g id="edge19" class="edge">
<title>take_peer_address&#45;&gt;store_addrs_insert</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1331.62,-510.37C1358.31,-507.74 1390.68,-504.56 1420.36,-501.63"/>
<polygon fill="green" stroke="green" points="1420.71,-505.12 1430.31,-500.65 1420.02,-498.15 1420.71,-505.12"/>
</g>
<!-- get_store -->
<g id="node17" class="node">
<title>get_store</title>
<path fill="none" stroke="#1c2123" d="M1094,-564C1094,-564 1052,-564 1052,-564 1046,-564 1040,-558 1040,-552 1040,-552 1040,-540 1040,-540 1040,-534 1046,-528 1052,-528 1052,-528 1094,-528 1094,-528 1100,-528 1106,-534 1106,-540 1106,-540 1106,-552 1106,-552 1106,-558 1100,-564 1094,-564"/>
<text text-anchor="middle" x="1073" y="-542.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_store</text>
</g>
<!-- get_store&#45;&gt;take_peer_address -->
<g id="edge17" class="edge">
<title>get_store&#45;&gt;take_peer_address</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1106.33,-541.11C1133.02,-537.08 1171.77,-531.22 1205.15,-526.18"/>
<polygon fill="green" stroke="green" points="1205.95,-529.6 1215.31,-524.64 1204.9,-522.68 1205.95,-529.6"/>
</g>
<!-- register_store -->
<g id="node18" class="node">
<title>register_store</title>
<path fill="none" stroke="#1c2123" d="M1306.5,-594C1306.5,-594 1240.5,-594 1240.5,-594 1234.5,-594 1228.5,-588 1228.5,-582 1228.5,-582 1228.5,-570 1228.5,-570 1228.5,-564 1234.5,-558 1240.5,-558 1240.5,-558 1306.5,-558 1306.5,-558 1312.5,-558 1318.5,-564 1318.5,-570 1318.5,-570 1318.5,-582 1318.5,-582 1318.5,-588 1312.5,-594 1306.5,-594"/>
<text text-anchor="middle" x="1273.5" y="-572.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">register_store</text>
</g>
<!-- get_store&#45;&gt;register_store -->
<g id="edge18" class="edge">
<title>get_store&#45;&gt;register_store</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1106.33,-550.89C1136.53,-555.45 1182.2,-562.35 1218.02,-567.77"/>
<polygon fill="green" stroke="green" points="1217.9,-571.29 1228.31,-569.32 1218.95,-564.37 1217.9,-571.29"/>
</g>
<!-- PdStoreAddrResolver -->
<g id="node19" class="node">
<title>PdStoreAddrResolver</title>
<path fill="none" stroke="#1c2123" d="M171,-376.5C171,-376.5 299,-376.5 299,-376.5 305,-376.5 311,-382.5 311,-388.5 311,-388.5 311,-433.5 311,-433.5 311,-439.5 305,-445.5 299,-445.5 299,-445.5 171,-445.5 171,-445.5 165,-445.5 159,-439.5 159,-433.5 159,-433.5 159,-388.5 159,-388.5 159,-382.5 165,-376.5 171,-376.5"/>
<text text-anchor="middle" x="235" y="-430.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PdStoreAddrResolver</text>
<polyline fill="none" stroke="#1c2123" points="159,-422.5 311,-422.5 "/>
<text text-anchor="start" x="167" y="-407.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">sched: Scheduler&lt;Task&gt;</text>
<polyline fill="none" stroke="#1c2123" points="159,-399.5 311,-399.5 "/>
<text text-anchor="start" x="167" y="-384.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用tx发消息给runner</text>
</g>
<!-- tx -->
<g id="node20" class="node">
<title>tx</title>
<path fill="none" stroke="#1c2123" d="M407,-390C407,-390 377,-390 377,-390 371,-390 365,-384 365,-378 365,-378 365,-366 365,-366 365,-360 371,-354 377,-354 377,-354 407,-354 407,-354 413,-354 419,-360 419,-366 419,-366 419,-378 419,-378 419,-384 413,-390 407,-390"/>
<text text-anchor="middle" x="392" y="-368.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tx</text>
</g>
<!-- PdStoreAddrResolver&#45;&gt;tx -->
<g id="edge21" class="edge">
<title>PdStoreAddrResolver&#45;&gt;tx</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M311.23,-392.07C326.45,-388.24 341.78,-384.38 354.88,-381.09"/>
<polygon fill="green" stroke="green" points="356.02,-384.41 364.86,-378.58 354.31,-377.62 356.02,-384.41"/>
</g>
<!-- tx&#45;&gt;start_impl -->
<g id="edge22" class="edge">
<title>tx&#45;&gt;start_impl</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M419.08,-372C426.64,-372 435.35,-372 444.56,-372"/>
<polygon fill="green" stroke="green" points="444.7,-375.5 454.7,-372 444.7,-368.5 444.7,-375.5"/>
</g>
<!-- PdStoreAddrResolver_resolve -->
<g id="node21" class="node">
<title>PdStoreAddrResolver_resolve</title>
<path fill="none" stroke="#1c2123" d="M153,-311C153,-311 317,-311 317,-311 323,-311 329,-317 329,-323 329,-323 329,-345 329,-345 329,-351 323,-357 317,-357 317,-357 153,-357 153,-357 147,-357 141,-351 141,-345 141,-345 141,-323 141,-323 141,-317 147,-311 153,-311"/>
<text text-anchor="middle" x="235" y="-341.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve</text>
<polyline fill="none" stroke="#1c2123" points="141,-334 329,-334 "/>
<text text-anchor="start" x="149" y="-318.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将Task{store_id, cb}发送给tx</text>
</g>
<!-- PdStoreAddrResolver_resolve&#45;&gt;tx -->
<g id="edge23" class="edge">
<title>PdStoreAddrResolver_resolve&#45;&gt;tx</title>
<path fill="none" stroke="#666666" d="M329.29,-356.87C338.3,-359.08 347.01,-361.21 354.9,-363.15"/>
<polygon fill="#666666" stroke="#666666" points="354.23,-366.59 364.77,-365.57 355.89,-359.79 354.23,-366.59"/>
</g>
<!-- StreamBackEnd_resolve -->
<g id="node22" class="node">
<title>StreamBackEnd_resolve</title>
<path fill="none" stroke="#1c2123" d="M12,-315C12,-315 93,-315 93,-315 99,-315 105,-321 105,-327 105,-327 105,-341 105,-341 105,-347 99,-353 93,-353 93,-353 12,-353 12,-353 6,-353 0,-347 0,-341 0,-341 0,-327 0,-327 0,-321 6,-315 12,-315"/>
<text text-anchor="middle" x="52.5" y="-337.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">StreamBackEnd</text>
<text text-anchor="middle" x="52.5" y="-322.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> resolve</text>
</g>
<!-- StreamBackEnd_resolve&#45;&gt;PdStoreAddrResolver_resolve -->
<g id="edge24" class="edge">
<title>StreamBackEnd_resolve&#45;&gt;PdStoreAddrResolver_resolve</title>
<path fill="none" stroke="#666666" d="M105.22,-334C113.24,-334 121.75,-334 130.42,-334"/>
<polygon fill="#666666" stroke="#666666" points="130.67,-337.5 140.67,-334 130.67,-330.5 130.67,-337.5"/>
</g>
</g>
</svg>
