<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raft_client_send Pages: 1 -->
<svg width="1229pt" height="897pt"
 viewBox="0.00 0.00 1229.00 897.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 893)">
<title>raft_client_send</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-893 1225,-893 1225,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_Queue</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M387.5,-8C387.5,-8 1183,-8 1183,-8 1189,-8 1195,-14 1195,-20 1195,-20 1195,-136 1195,-136 1195,-142 1189,-148 1183,-148 1183,-148 387.5,-148 387.5,-148 381.5,-148 375.5,-142 375.5,-136 375.5,-136 375.5,-20 375.5,-20 375.5,-14 381.5,-8 387.5,-8"/>
<text text-anchor="middle" x="785.25" y="-128" font-family="Times,serif" font-size="20.00">Queue</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_LruCache</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M406,-156C406,-156 849.5,-156 849.5,-156 855.5,-156 861.5,-162 861.5,-168 861.5,-168 861.5,-349 861.5,-349 861.5,-355 855.5,-361 849.5,-361 849.5,-361 406,-361 406,-361 400,-361 394,-355 394,-349 394,-349 394,-168 394,-168 394,-162 400,-156 406,-156"/>
<text text-anchor="middle" x="627.75" y="-341" font-family="Times,serif" font-size="20.00">LruCache</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_ConnectionPool</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M629,-369C629,-369 926,-369 926,-369 932,-369 938,-375 938,-381 938,-381 938,-613 938,-613 938,-619 932,-625 926,-625 926,-625 629,-625 629,-625 623,-625 617,-619 617,-613 617,-613 617,-381 617,-381 617,-375 623,-369 629,-369"/>
<text text-anchor="middle" x="777.5" y="-605" font-family="Times,serif" font-size="20.00">ConnectionPool</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_RaftClient</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-633C20,-633 1201,-633 1201,-633 1207,-633 1213,-639 1213,-645 1213,-645 1213,-869 1213,-869 1213,-875 1207,-881 1201,-881 1201,-881 20,-881 20,-881 14,-881 8,-875 8,-869 8,-869 8,-645 8,-645 8,-639 14,-633 20,-633"/>
<text text-anchor="middle" x="610.5" y="-861" font-family="Times,serif" font-size="20.00">RaftClient</text>
</g>
<!-- push -->
<g id="node1" class="node">
<title>push</title>
<path fill="none" stroke="#1c2123" d="M725.5,-48.5C725.5,-48.5 829.5,-48.5 829.5,-48.5 835.5,-48.5 841.5,-54.5 841.5,-60.5 841.5,-60.5 841.5,-97.5 841.5,-97.5 841.5,-103.5 835.5,-109.5 829.5,-109.5 829.5,-109.5 725.5,-109.5 725.5,-109.5 719.5,-109.5 713.5,-103.5 713.5,-97.5 713.5,-97.5 713.5,-60.5 713.5,-60.5 713.5,-54.5 719.5,-48.5 725.5,-48.5"/>
<text text-anchor="middle" x="777.5" y="-94.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">push</text>
<polyline fill="none" stroke="#1c2123" points="713.5,-86.5 841.5,-86.5 "/>
<text text-anchor="start" x="721.5" y="-71.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">向消息队列中push</text>
<text text-anchor="start" x="721.5" y="-56.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> RaftMessage</text>
</g>
<!-- Queue -->
<g id="node3" class="node">
<title>Queue</title>
<path fill="none" stroke="#1c2123" d="M996,-17C996,-17 1175,-17 1175,-17 1181,-17 1187,-23 1187,-29 1187,-29 1187,-97 1187,-97 1187,-103 1181,-109 1175,-109 1175,-109 996,-109 996,-109 990,-109 984,-103 984,-97 984,-97 984,-29 984,-29 984,-23 990,-17 996,-17"/>
<text text-anchor="middle" x="1085.5" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Queue</text>
<polyline fill="none" stroke="#1c2123" points="984,-86 1187,-86 "/>
<text text-anchor="start" x="992" y="-70.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">buf: ArrayQueue&lt;RaftMessage&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="984,-63 1187,-63 "/>
<text text-anchor="start" x="992" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">connected: AtomicBool,</text>
<polyline fill="none" stroke="#1c2123" points="984,-40 1187,-40 "/>
<text text-anchor="start" x="992" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">waker: Mutex&lt;Option&lt;Waker&gt;&gt;,</text>
</g>
<!-- push&#45;&gt;Queue -->
<g id="edge1" class="edge">
<title>push&#45;&gt;Queue:buf</title>
<path fill="none" stroke="#666666" d="M841.9,-77.12C879.33,-76.15 927.97,-75.15 972.48,-75.02"/>
<polygon fill="#666666" stroke="#666666" points="972.51,-78.52 982.5,-75 972.49,-71.52 972.51,-78.52"/>
</g>
<!-- notify -->
<g id="node2" class="node">
<title>notify</title>
<path fill="none" stroke="#1c2123" d="M395.5,-21C395.5,-21 523.5,-21 523.5,-21 529.5,-21 535.5,-27 535.5,-33 535.5,-33 535.5,-85 535.5,-85 535.5,-91 529.5,-97 523.5,-97 523.5,-97 395.5,-97 395.5,-97 389.5,-97 383.5,-91 383.5,-85 383.5,-85 383.5,-33 383.5,-33 383.5,-27 389.5,-21 395.5,-21"/>
<text text-anchor="middle" x="459.5" y="-81.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">notify</text>
<polyline fill="none" stroke="#1c2123" points="383.5,-74 535.5,-74 "/>
<text text-anchor="start" x="391.5" y="-58.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果push返回Full错误</text>
<text text-anchor="start" x="391.5" y="-43.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用notify</text>
<text text-anchor="start" x="391.5" y="-28.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 通知RaftCall发送消息</text>
</g>
<!-- notify&#45;&gt;Queue -->
<g id="edge2" class="edge">
<title>notify&#45;&gt;Queue:waker</title>
<path fill="none" stroke="#666666" d="M535.57,-47.9C561.33,-44.5 590.38,-41.1 617,-39 775.54,-26.51 818.17,-27.93 972.19,-28"/>
<polygon fill="#666666" stroke="#666666" points="972.5,-31.5 982.5,-28 972.5,-24.5 972.5,-31.5"/>
</g>
<!-- cache_get_mut -->
<g id="node4" class="node">
<title>cache_get_mut</title>
<path fill="none" stroke="#1c2123" d="M414,-246C414,-246 505,-246 505,-246 511,-246 517,-252 517,-258 517,-258 517,-310 517,-310 517,-316 511,-322 505,-322 505,-322 414,-322 414,-322 408,-322 402,-316 402,-310 402,-310 402,-258 402,-258 402,-252 408,-246 414,-246"/>
<text text-anchor="middle" x="459.5" y="-306.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_mut</text>
<polyline fill="none" stroke="#1c2123" points="402,-299 517,-299 "/>
<text text-anchor="start" x="410" y="-283.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">从cache中获取</text>
<text text-anchor="start" x="410" y="-268.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> store_id, conn_id</text>
<text text-anchor="start" x="410" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 的Queue</text>
</g>
<!-- cache_get_mut&#45;&gt;push -->
<g id="edge12" class="edge">
<title>cache_get_mut&#45;&gt;push</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M499.65,-245.75C529.96,-217.48 573.92,-179.31 617,-152 644.15,-134.79 676.03,-119.36 704.13,-107.17"/>
<polygon fill="green" stroke="green" points="705.68,-110.31 713.5,-103.16 702.93,-103.87 705.68,-110.31"/>
</g>
<!-- cache_insert -->
<g id="node5" class="node">
<title>cache_insert</title>
<path fill="none" stroke="#1c2123" d="M713.5,-276C713.5,-276 841.5,-276 841.5,-276 847.5,-276 853.5,-282 853.5,-288 853.5,-288 853.5,-310 853.5,-310 853.5,-316 847.5,-322 841.5,-322 841.5,-322 713.5,-322 713.5,-322 707.5,-322 701.5,-316 701.5,-310 701.5,-310 701.5,-288 701.5,-288 701.5,-282 707.5,-276 713.5,-276"/>
<text text-anchor="middle" x="777.5" y="-306.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">insert</text>
<polyline fill="none" stroke="#1c2123" points="701.5,-299 853.5,-299 "/>
<text text-anchor="middle" x="777.5" y="-283.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将queue放入LRUCache</text>
</g>
<!-- CachedQueue -->
<g id="node6" class="node">
<title>CachedQueue</title>
<path fill="none" stroke="#1c2123" d="M724,-165C724,-165 831,-165 831,-165 837,-165 843,-171 843,-177 843,-177 843,-245 843,-245 843,-251 837,-257 831,-257 831,-257 724,-257 724,-257 718,-257 712,-251 712,-245 712,-245 712,-177 712,-177 712,-171 718,-165 724,-165"/>
<text text-anchor="middle" x="777.5" y="-241.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">CachedQueue</text>
<polyline fill="none" stroke="#1c2123" points="712,-234 843,-234 "/>
<text text-anchor="start" x="720" y="-218.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">queue: Arc&lt;Queue&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="712,-211 843,-211 "/>
<text text-anchor="start" x="720" y="-195.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">dirty: bool,</text>
<polyline fill="none" stroke="#1c2123" points="712,-188 843,-188 "/>
<text text-anchor="start" x="720" y="-172.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">full: bool,</text>
</g>
<!-- CachedQueue&#45;&gt;Queue -->
<g id="edge23" class="edge">
<title>CachedQueue&#45;&gt;Queue</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M843.31,-190.2C872.75,-179.95 907.69,-166.64 938,-152 960.73,-141.02 984.47,-127.54 1006.07,-114.44"/>
<polygon fill="green" stroke="green" points="1008.17,-117.25 1014.87,-109.04 1004.51,-111.29 1008.17,-117.25"/>
</g>
<!-- entry_or_insert_with -->
<g id="node7" class="node">
<title>entry_or_insert_with</title>
<path fill="none" stroke="#1c2123" d="M707.5,-465.5C707.5,-465.5 847.5,-465.5 847.5,-465.5 853.5,-465.5 859.5,-471.5 859.5,-477.5 859.5,-477.5 859.5,-574.5 859.5,-574.5 859.5,-580.5 853.5,-586.5 847.5,-586.5 847.5,-586.5 707.5,-586.5 707.5,-586.5 701.5,-586.5 695.5,-580.5 695.5,-574.5 695.5,-574.5 695.5,-477.5 695.5,-477.5 695.5,-471.5 701.5,-465.5 707.5,-465.5"/>
<text text-anchor="start" x="703.5" y="-571.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">connections</text>
<text text-anchor="start" x="703.5" y="-556.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> .entry((store_id, conn_id))</text>
<text text-anchor="start" x="703.5" y="-541.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> .or_insert_with</text>
<polyline fill="none" stroke="#1c2123" points="695.5,-533.5 859.5,-533.5 "/>
<text text-anchor="start" x="703.5" y="-518.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">先从connections获取</text>
<text text-anchor="start" x="703.5" y="-503.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> store_id, conn_id的Queue</text>
<text text-anchor="start" x="703.5" y="-488.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果没有就创建一个</text>
<text text-anchor="middle" x="777.5" y="-473.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后插入到hashmap中</text>
</g>
<!-- ConnectionPool -->
<g id="node8" class="node">
<title>ConnectionPool</title>
<path fill="none" stroke="#1c2123" d="M637,-377.5C637,-377.5 918,-377.5 918,-377.5 924,-377.5 930,-383.5 930,-389.5 930,-389.5 930,-434.5 930,-434.5 930,-440.5 924,-446.5 918,-446.5 918,-446.5 637,-446.5 637,-446.5 631,-446.5 625,-440.5 625,-434.5 625,-434.5 625,-389.5 625,-389.5 625,-383.5 631,-377.5 637,-377.5"/>
<text text-anchor="middle" x="777.5" y="-431.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ConnectionPool</text>
<polyline fill="none" stroke="#1c2123" points="625,-423.5 930,-423.5 "/>
<text text-anchor="start" x="633" y="-408.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">connections: HashMap&lt;(u64, usize), Arc&lt;Queue&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="625,-400.5 930,-400.5 "/>
<text text-anchor="start" x="633" y="-385.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tombstone_stores: HashSet&lt;u64&gt;,</text>
</g>
<!-- ConnectionPool&#45;&gt;Queue -->
<g id="edge3" class="edge">
<title>ConnectionPool&#45;&gt;Queue</title>
<path fill="none" stroke="#666666" d="M920.66,-377.42C926.78,-373.7 932.6,-369.57 938,-365 1014.13,-300.51 1053.95,-187.2 1071.99,-119.22"/>
<polygon fill="#666666" stroke="#666666" points="1075.48,-119.68 1074.59,-109.12 1068.7,-117.93 1075.48,-119.68"/>
</g>
<!-- conn_id -->
<g id="node9" class="node">
<title>conn_id</title>
<path fill="none" stroke="#1c2123" d="M145,-761.5C145,-761.5 255,-761.5 255,-761.5 261,-761.5 267,-767.5 267,-773.5 267,-773.5 267,-810.5 267,-810.5 267,-816.5 261,-822.5 255,-822.5 255,-822.5 145,-822.5 145,-822.5 139,-822.5 133,-816.5 133,-810.5 133,-810.5 133,-773.5 133,-773.5 133,-767.5 139,-761.5 145,-761.5"/>
<text text-anchor="middle" x="200" y="-807.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">conn_id</text>
<polyline fill="none" stroke="#1c2123" points="133,-799.5 267,-799.5 "/>
<text text-anchor="start" x="141" y="-784.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">msg.region_id %</text>
<text text-anchor="start" x="141" y="-769.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> grpc_raft_conn_num</text>
</g>
<!-- conn_id&#45;&gt;cache_get_mut -->
<g id="edge11" class="edge">
<title>conn_id&#45;&gt;cache_get_mut</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M267.36,-772.21C277.3,-766.92 286.66,-760.29 294,-752 331.76,-709.35 312.05,-683.06 330,-629 365.66,-521.61 413.46,-397.75 439.55,-331.56"/>
<polygon fill="green" stroke="green" points="442.82,-332.81 443.23,-322.23 436.31,-330.24 442.82,-332.81"/>
</g>
<!-- load_stream -->
<g id="node10" class="node">
<title>load_stream</title>
<path fill="none" stroke="#1c2123" d="M342,-642.5C342,-642.5 577,-642.5 577,-642.5 583,-642.5 589,-648.5 589,-654.5 589,-654.5 589,-721.5 589,-721.5 589,-727.5 583,-733.5 577,-733.5 577,-733.5 342,-733.5 342,-733.5 336,-733.5 330,-727.5 330,-721.5 330,-721.5 330,-654.5 330,-654.5 330,-648.5 336,-642.5 342,-642.5"/>
<text text-anchor="middle" x="459.5" y="-718.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">load_stream</text>
<polyline fill="none" stroke="#1c2123" points="330,-710.5 589,-710.5 "/>
<text text-anchor="start" x="338" y="-695.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">load connection from pool</text>
<text text-anchor="start" x="338" y="-680.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Lru cache中没有store_id,conn_id的stream</text>
<text text-anchor="start" x="338" y="-665.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 从connection pool中获取一个</text>
<text text-anchor="middle" x="459.5" y="-650.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 没有的话创建一个StreamBackend;</text>
</g>
<!-- load_stream&#45;&gt;Queue -->
<g id="edge13" class="edge">
<title>load_stream&#45;&gt;Queue</title>
<path fill="none" stroke="#666666" d="M589.36,-665.94C598.71,-664.54 607.99,-663.21 617,-662 688.07,-652.45 883.62,-675.74 938,-629 1015.66,-562.25 1061.91,-249.07 1078.02,-119.42"/>
<polygon fill="#666666" stroke="#666666" points="1081.52,-119.65 1079.26,-109.3 1074.57,-118.8 1081.52,-119.65"/>
</g>
<!-- load_stream&#45;&gt;cache_insert -->
<g id="edge14" class="edge">
<title>load_stream&#45;&gt;cache_insert</title>
<path fill="none" stroke="#666666" d="M471.41,-642.42C490.07,-573.59 534.37,-442.9 617,-365 637.88,-345.32 665.45,-331.13 691.78,-321.07"/>
<polygon fill="#666666" stroke="#666666" points="693.23,-324.27 701.42,-317.55 690.82,-317.7 693.23,-324.27"/>
</g>
<!-- load_stream&#45;&gt;CachedQueue -->
<g id="edge15" class="edge">
<title>load_stream&#45;&gt;CachedQueue</title>
<path fill="none" stroke="#666666" d="M480.38,-642.28C506.98,-580.18 554.78,-465.4 589,-365 603.61,-322.12 585.93,-299.97 617,-267 639.15,-243.49 671.74,-229.85 701.69,-221.93"/>
<polygon fill="#666666" stroke="#666666" points="702.86,-225.25 711.73,-219.46 701.18,-218.45 702.86,-225.25"/>
</g>
<!-- load_stream&#45;&gt;entry_or_insert_with -->
<g id="edge16" class="edge">
<title>load_stream&#45;&gt;entry_or_insert_with</title>
<path fill="none" stroke="#666666" d="M549.36,-642.44C592.14,-620.51 643.34,-594.27 686.29,-572.25"/>
<polygon fill="#666666" stroke="#666666" points="688.02,-575.29 695.33,-567.61 684.83,-569.06 688.02,-575.29"/>
</g>
<!-- StreamBackEnd -->
<g id="node14" class="node">
<title>StreamBackEnd</title>
<path fill="none" stroke="#1c2123" d="M818,-707C818,-707 737,-707 737,-707 731,-707 725,-701 725,-695 725,-695 725,-683 725,-683 725,-677 731,-671 737,-671 737,-671 818,-671 818,-671 824,-671 830,-677 830,-683 830,-683 830,-695 830,-695 830,-701 824,-707 818,-707"/>
<text text-anchor="middle" x="777.5" y="-685.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StreamBackEnd</text>
</g>
<!-- load_stream&#45;&gt;StreamBackEnd -->
<g id="edge17" class="edge">
<title>load_stream&#45;&gt;StreamBackEnd</title>
<path fill="none" stroke="#666666" d="M589.03,-688.41C632.42,-688.54 678.88,-688.69 714.7,-688.8"/>
<polygon fill="#666666" stroke="#666666" points="714.97,-692.31 724.98,-688.84 714.99,-685.31 714.97,-692.31"/>
</g>
<!-- start -->
<g id="node15" class="node">
<title>start</title>
<path fill="none" stroke="#1c2123" d="M978,-646.5C978,-646.5 1193,-646.5 1193,-646.5 1199,-646.5 1205,-652.5 1205,-658.5 1205,-658.5 1205,-793.5 1205,-793.5 1205,-799.5 1199,-805.5 1193,-805.5 1193,-805.5 978,-805.5 978,-805.5 972,-805.5 966,-799.5 966,-793.5 966,-793.5 966,-658.5 966,-658.5 966,-652.5 972,-646.5 978,-646.5"/>
<text text-anchor="middle" x="1085.5" y="-790.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start</text>
<polyline fill="none" stroke="#1c2123" points="966,-782.5 1205,-782.5 "/>
<text text-anchor="start" x="974" y="-767.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">生成一个future</text>
<text text-anchor="start" x="974" y="-752.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 1.resolve adress</text>
<text text-anchor="start" x="974" y="-737.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 2.connect</text>
<text text-anchor="start" x="974" y="-722.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 3.make batch call</text>
<text text-anchor="start" x="974" y="-707.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 4.fallback to legacy API if incompatible</text>
<polyline fill="none" stroke="#1c2123" points="966,-699.5 1205,-699.5 "/>
<text text-anchor="start" x="974" y="-684.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">batch call中会不断的去</text>
<text text-anchor="start" x="974" y="-669.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Queue中pop raftMessage</text>
<text text-anchor="start" x="974" y="-654.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后send</text>
</g>
<!-- load_stream&#45;&gt;start -->
<g id="edge18" class="edge">
<title>load_stream&#45;&gt;start</title>
<path fill="none" stroke="#666666" d="M589.24,-712.67C598.61,-713.96 607.94,-715.1 617,-716 730.99,-727.35 861.36,-729.22 955.41,-728.62"/>
<polygon fill="#666666" stroke="#666666" points="955.57,-732.12 965.55,-728.55 955.52,-725.12 955.57,-732.12"/>
</g>
<!-- spawn -->
<g id="node16" class="node">
<title>spawn</title>
<path fill="none" stroke="#1c2123" d="M690.5,-746C690.5,-746 864.5,-746 864.5,-746 870.5,-746 876.5,-752 876.5,-758 876.5,-758 876.5,-780 876.5,-780 876.5,-786 870.5,-792 864.5,-792 864.5,-792 690.5,-792 690.5,-792 684.5,-792 678.5,-786 678.5,-780 678.5,-780 678.5,-758 678.5,-758 678.5,-752 684.5,-746 690.5,-746"/>
<text text-anchor="middle" x="777.5" y="-776.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">spawn</text>
<polyline fill="none" stroke="#1c2123" points="678.5,-769 876.5,-769 "/>
<text text-anchor="middle" x="777.5" y="-753.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">在future thread pool中执行 start</text>
</g>
<!-- load_stream&#45;&gt;spawn -->
<g id="edge19" class="edge">
<title>load_stream&#45;&gt;spawn</title>
<path fill="none" stroke="#666666" d="M589.37,-723.78C598.71,-726.26 607.99,-728.69 617,-731 633.48,-735.23 650.96,-739.55 668.07,-743.7"/>
<polygon fill="#666666" stroke="#666666" points="667.56,-747.17 678.1,-746.11 669.2,-740.37 667.56,-747.17"/>
</g>
<!-- send -->
<g id="node11" class="node">
<title>send</title>
<path fill="none" stroke="#1c2123" d="M58,-683C58,-683 28,-683 28,-683 22,-683 16,-677 16,-671 16,-671 16,-659 16,-659 16,-653 22,-647 28,-647 28,-647 58,-647 58,-647 64,-647 70,-653 70,-659 70,-659 70,-671 70,-671 70,-677 64,-683 58,-683"/>
<text text-anchor="middle" x="43" y="-661.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send</text>
</g>
<!-- send&#45;&gt;push -->
<g id="edge4" class="edge">
<title>send&#45;&gt;push</title>
<path fill="none" stroke="#666666" d="M46.37,-646.89C52.13,-606.98 69.16,-509.22 106,-436 178.25,-292.39 191.5,-233.62 330,-152 345.94,-142.61 580.37,-107.48 702.98,-89.6"/>
<polygon fill="#666666" stroke="#666666" points="703.65,-93.04 713.04,-88.14 702.64,-86.11 703.65,-93.04"/>
</g>
<!-- send&#45;&gt;notify -->
<g id="edge5" class="edge">
<title>send&#45;&gt;notify</title>
<path fill="none" stroke="#666666" d="M44.79,-646.82C48.89,-556.55 68.95,-159.26 106,-120 173.44,-48.52 292.18,-42.1 373.04,-47.62"/>
<polygon fill="#666666" stroke="#666666" points="372.97,-51.12 383.2,-48.39 373.49,-44.14 372.97,-51.12"/>
</g>
<!-- send&#45;&gt;cache_get_mut -->
<g id="edge6" class="edge">
<title>send&#45;&gt;cache_get_mut</title>
<path fill="none" stroke="#666666" d="M63.71,-646.88C125.76,-589.85 318.32,-412.85 409.58,-328.97"/>
<polygon fill="#666666" stroke="#666666" points="412.04,-331.46 417.03,-322.12 407.3,-326.31 412.04,-331.46"/>
</g>
<!-- send&#45;&gt;conn_id -->
<g id="edge7" class="edge">
<title>send&#45;&gt;conn_id</title>
<path fill="none" stroke="#666666" d="M53.09,-683.23C63.54,-702.57 82.33,-732.9 106,-752 111.55,-756.48 117.67,-760.54 124.05,-764.21"/>
<polygon fill="#666666" stroke="#666666" points="122.42,-767.3 132.88,-768.96 125.74,-761.14 122.42,-767.3"/>
</g>
<!-- send&#45;&gt;load_stream -->
<g id="edge8" class="edge">
<title>send&#45;&gt;load_stream</title>
<path fill="none" stroke="#666666" d="M44.45,-683.06C46.43,-718.7 56.49,-797.57 106,-832 174.6,-879.71 215.79,-861.4 294,-832 342.19,-813.89 385.49,-774.55 415.55,-741.56"/>
<polygon fill="#666666" stroke="#666666" points="418.47,-743.55 422.53,-733.76 413.25,-738.88 418.47,-743.55"/>
</g>
<!-- need_flush -->
<g id="node12" class="node">
<title>need_flush</title>
<path fill="none" stroke="#1c2123" d="M118,-642C118,-642 282,-642 282,-642 288,-642 294,-648 294,-654 294,-654 294,-676 294,-676 294,-682 288,-688 282,-688 282,-688 118,-688 118,-688 112,-688 106,-682 106,-676 106,-676 106,-654 106,-654 106,-648 112,-642 118,-642"/>
<text text-anchor="middle" x="200" y="-672.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">need_flush</text>
<polyline fill="none" stroke="#1c2123" points="106,-665 294,-665 "/>
<text text-anchor="start" x="114" y="-649.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">need_flush: Vec&lt;(u64, usize)&gt;,</text>
</g>
<!-- send&#45;&gt;need_flush -->
<g id="edge9" class="edge">
<title>send&#45;&gt;need_flush</title>
<path fill="none" stroke="#666666" d="M70.29,-665C77.78,-665 86.42,-665 95.6,-665"/>
<polygon fill="#666666" stroke="#666666" points="95.76,-668.5 105.76,-665 95.76,-661.5 95.76,-668.5"/>
</g>
<!-- full_stores -->
<g id="node13" class="node">
<title>full_stores</title>
<path fill="none" stroke="#1c2123" d="M225,-743C225,-743 175,-743 175,-743 169,-743 163,-737 163,-731 163,-731 163,-719 163,-719 163,-713 169,-707 175,-707 175,-707 225,-707 225,-707 231,-707 237,-713 237,-719 237,-719 237,-731 237,-731 237,-737 231,-743 225,-743"/>
<text text-anchor="middle" x="200" y="-721.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">full_stores</text>
</g>
<!-- send&#45;&gt;full_stores -->
<g id="edge10" class="edge">
<title>send&#45;&gt;full_stores</title>
<path fill="none" stroke="#666666" d="M70.28,-680.53C81.1,-686.52 93.91,-693.09 106,-698 120.95,-704.07 137.76,-709.39 152.94,-713.66"/>
<polygon fill="#666666" stroke="#666666" points="152.07,-717.05 162.64,-716.31 153.92,-710.3 152.07,-717.05"/>
</g>
<!-- StreamBackEnd&#45;&gt;Queue -->
<g id="edge22" class="edge">
<title>StreamBackEnd&#45;&gt;Queue</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M830.22,-692.07C865.05,-691.25 909.64,-684.14 938,-657 1015.87,-582.47 1062.35,-252.75 1078.27,-119.33"/>
<polygon fill="green" stroke="green" points="1081.75,-119.65 1079.45,-109.31 1074.8,-118.83 1081.75,-119.65"/>
</g>
<!-- StreamBackEnd&#45;&gt;start -->
<g id="edge20" class="edge">
<title>StreamBackEnd&#45;&gt;start</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M830.06,-695.23C864.58,-699.41 911.64,-705.1 955.9,-710.45"/>
<polygon fill="green" stroke="green" points="955.55,-713.93 965.89,-711.66 956.39,-706.98 955.55,-713.93"/>
</g>
<!-- spawn&#45;&gt;start -->
<g id="edge21" class="edge">
<title>spawn&#45;&gt;start</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M876.58,-755.22C901.77,-751.68 929.25,-747.82 955.74,-744.09"/>
<polygon fill="green" stroke="green" points="956.41,-747.53 965.83,-742.68 955.44,-740.6 956.41,-747.53"/>
</g>
</g>
</svg>
