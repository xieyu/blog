<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raft_client_start Pages: 1 -->
<svg width="1214pt" height="616pt"
 viewBox="0.00 0.00 1214.00 616.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 612)">
<title>raft_client_start</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-612 1210,-612 1210,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_PdStoreAddrResolver</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M307.5,-484C307.5,-484 474.5,-484 474.5,-484 480.5,-484 486.5,-490 486.5,-496 486.5,-496 486.5,-588 486.5,-588 486.5,-594 480.5,-600 474.5,-600 474.5,-600 307.5,-600 307.5,-600 301.5,-600 295.5,-594 295.5,-588 295.5,-588 295.5,-496 295.5,-496 295.5,-490 301.5,-484 307.5,-484"/>
<text text-anchor="middle" x="391" y="-580" font-family="Times,serif" font-size="20.00">PdStoreAddrResolver</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_RaftCall</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M518,-8C518,-8 1186,-8 1186,-8 1192,-8 1198,-14 1198,-20 1198,-20 1198,-388 1198,-388 1198,-394 1192,-400 1186,-400 1186,-400 518,-400 518,-400 512,-400 506,-394 506,-388 506,-388 506,-20 506,-20 506,-14 512,-8 518,-8"/>
<text text-anchor="middle" x="852" y="-380" font-family="Times,serif" font-size="20.00">RaftCall</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_TikvClient</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M317,-148C317,-148 465,-148 465,-148 471,-148 477,-154 477,-160 477,-160 477,-464 477,-464 477,-470 471,-476 465,-476 465,-476 317,-476 317,-476 311,-476 305,-470 305,-464 305,-464 305,-160 305,-160 305,-154 311,-148 317,-148"/>
<text text-anchor="middle" x="391" y="-456" font-family="Times,serif" font-size="20.00">TikvClient</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_StreamBackend</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M94,-177C94,-177 264,-177 264,-177 270,-177 276,-183 276,-189 276,-189 276,-515 276,-515 276,-521 270,-527 264,-527 264,-527 94,-527 94,-527 88,-527 82,-521 82,-515 82,-515 82,-189 82,-189 82,-183 88,-177 94,-177"/>
<text text-anchor="middle" x="179" y="-507" font-family="Times,serif" font-size="20.00">StreamBackend</text>
</g>
<!-- PdStoreAddrResolver_resolve -->
<g id="node1" class="node">
<title>PdStoreAddrResolver_resolve</title>
<path fill="#de3737" stroke="#000000" d="M340.5,-493C340.5,-493 441.5,-493 441.5,-493 447.5,-493 453.5,-499 453.5,-505 453.5,-505 453.5,-549 453.5,-549 453.5,-555 447.5,-561 441.5,-561 441.5,-561 340.5,-561 340.5,-561 334.5,-561 328.5,-555 328.5,-549 328.5,-549 328.5,-505 328.5,-505 328.5,-499 334.5,-493 340.5,-493"/>
<text text-anchor="start" x="336.5" y="-545.8" font-family="Times,serif" font-size="14.00" fill="#ffffff">resolve</text>
<text text-anchor="start" x="336.5" y="-530.8" font-family="Times,serif" font-size="14.00" fill="#ffffff"> 发消息给resolver </text>
<text text-anchor="start" x="336.5" y="-515.8" font-family="Times,serif" font-size="14.00" fill="#ffffff"> runner channel</text>
<text text-anchor="start" x="336.5" y="-500.8" font-family="Times,serif" font-size="14.00" fill="#ffffff"> 并等待callback</text>
</g>
<!-- RaftCall -->
<g id="node2" class="node">
<title>RaftCall</title>
<path fill="none" stroke="#1c2123" d="M526,-17C526,-17 748,-17 748,-17 754,-17 760,-23 760,-29 760,-29 760,-295 760,-295 760,-301 754,-307 748,-307 748,-307 526,-307 526,-307 520,-307 514,-301 514,-295 514,-295 514,-29 514,-29 514,-23 520,-17 526,-17"/>
<text text-anchor="middle" x="637" y="-291.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCall</text>
<polyline fill="none" stroke="#1c2123" points="514,-284 760,-284 "/>
<text text-anchor="start" x="522" y="-268.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">sender/receive为</text>
<text text-anchor="start" x="522" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> grpc stream的输入输出</text>
<text text-anchor="start" x="522" y="-238.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> RaftCall会不断的去Queue中pop消息</text>
<text text-anchor="start" x="522" y="-223.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 使用sender发送出去</text>
<text text-anchor="start" x="522" y="-208.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> sender: ClientCStreamSender&lt;M&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="514,-201 760,-201 "/>
<text text-anchor="start" x="522" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">receiver: ClientCStreamReceiver&lt;Done&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="514,-178 760,-178 "/>
<text text-anchor="start" x="522" y="-162.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">queue: Arc&lt;Queue&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="514,-155 760,-155 "/>
<text text-anchor="start" x="522" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">buffer: B,</text>
<polyline fill="none" stroke="#1c2123" points="514,-132 760,-132 "/>
<text text-anchor="start" x="522" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">router: R,</text>
<polyline fill="none" stroke="#1c2123" points="514,-109 760,-109 "/>
<text text-anchor="start" x="522" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">snap_scheduler: Scheduler&lt;SnapTask&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="514,-86 760,-86 "/>
<text text-anchor="start" x="522" y="-70.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">lifetime: Option&lt;oneshot::Sender&lt;()&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="514,-63 760,-63 "/>
<text text-anchor="start" x="522" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_id: u64,</text>
<polyline fill="none" stroke="#1c2123" points="514,-40 760,-40 "/>
<text text-anchor="start" x="522" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">addr: String,</text>
</g>
<!-- poll -->
<g id="node3" class="node">
<title>poll</title>
<path fill="none" stroke="#1c2123" d="M652,-362C652,-362 622,-362 622,-362 616,-362 610,-356 610,-350 610,-350 610,-338 610,-338 610,-332 616,-326 622,-326 622,-326 652,-326 652,-326 658,-326 664,-332 664,-338 664,-338 664,-350 664,-350 664,-356 658,-362 652,-362"/>
<text text-anchor="middle" x="637" y="-340.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">poll</text>
</g>
<!-- fill_msg -->
<g id="node4" class="node">
<title>fill_msg</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M808,-92C808,-92 953,-92 953,-92 959,-92 965,-98 965,-104 965,-104 965,-156 965,-156 965,-162 959,-168 953,-168 953,-168 808,-168 808,-168 802,-168 796,-162 796,-156 796,-156 796,-104 796,-104 796,-98 802,-92 808,-92"/>
<text text-anchor="middle" x="880.5" y="-152.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">fill_msg</text>
<polyline fill="none" stroke="#60b5ac" points="796,-145 965,-145 "/>
<text text-anchor="start" x="804" y="-129.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">从queue中pop消息</text>
<text text-anchor="start" x="804" y="-114.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 放入buffer中</text>
<text text-anchor="start" x="804" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> skip掉 hassnapshot的消息</text>
</g>
<!-- poll&#45;&gt;fill_msg -->
<g id="edge1" class="edge">
<title>poll&#45;&gt;fill_msg</title>
<path fill="none" stroke="#666666" d="M664.05,-345.38C691.57,-345.35 734.45,-340.85 760,-316 805.75,-271.51 757.09,-227.58 796,-177 796.38,-176.51 796.77,-176.02 797.16,-175.53"/>
<polygon fill="#666666" stroke="#666666" points="799.86,-177.77 804.06,-168.04 794.71,-173.02 799.86,-177.77"/>
</g>
<!-- sender_poll_ready -->
<g id="node5" class="node">
<title>sender_poll_ready</title>
<path fill="none" stroke="#1c2123" d="M823.5,-187C823.5,-187 937.5,-187 937.5,-187 943.5,-187 949.5,-193 949.5,-199 949.5,-199 949.5,-221 949.5,-221 949.5,-227 943.5,-233 937.5,-233 937.5,-233 823.5,-233 823.5,-233 817.5,-233 811.5,-227 811.5,-221 811.5,-221 811.5,-199 811.5,-199 811.5,-193 817.5,-187 823.5,-187"/>
<text text-anchor="middle" x="880.5" y="-217.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">sender.poll_ready(ctx)</text>
<polyline fill="none" stroke="#1c2123" points="811.5,-210 949.5,-210 "/>
<text text-anchor="start" x="819.5" y="-194.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">等待sender ready</text>
</g>
<!-- poll&#45;&gt;sender_poll_ready -->
<g id="edge2" class="edge">
<title>poll&#45;&gt;sender_poll_ready</title>
<path fill="none" stroke="#666666" d="M664.1,-344.28C690.87,-343.25 732.39,-337.84 760,-316 788.37,-293.56 769.4,-267.51 796,-243 798.15,-241.02 800.43,-239.15 802.82,-237.39"/>
<polygon fill="#666666" stroke="#666666" points="804.85,-240.24 811.27,-231.81 801,-234.4 804.85,-240.24"/>
</g>
<!-- sender_poll_flush -->
<g id="node6" class="node">
<title>sender_poll_flush</title>
<path fill="none" stroke="#1c2123" d="M925,-288C925,-288 836,-288 836,-288 830,-288 824,-282 824,-276 824,-276 824,-264 824,-264 824,-258 830,-252 836,-252 836,-252 925,-252 925,-252 931,-252 937,-258 937,-264 937,-264 937,-276 937,-276 937,-282 931,-288 925,-288"/>
<text text-anchor="middle" x="880.5" y="-266.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">sender_poll_flush</text>
</g>
<!-- poll&#45;&gt;sender_poll_flush -->
<g id="edge3" class="edge">
<title>poll&#45;&gt;sender_poll_flush</title>
<path fill="none" stroke="#666666" d="M664.27,-340.01C689.38,-335.72 728.02,-327.88 760,-316 776.96,-309.7 779.33,-304.03 796,-297 801.8,-294.55 807.91,-292.19 814.07,-289.95"/>
<polygon fill="#666666" stroke="#666666" points="815.49,-293.16 823.76,-286.54 813.17,-286.56 815.49,-293.16"/>
</g>
<!-- receiver_poll -->
<g id="node7" class="node">
<title>receiver_poll</title>
<path fill="none" stroke="#1c2123" d="M912.5,-342C912.5,-342 848.5,-342 848.5,-342 842.5,-342 836.5,-336 836.5,-330 836.5,-330 836.5,-318 836.5,-318 836.5,-312 842.5,-306 848.5,-306 848.5,-306 912.5,-306 912.5,-306 918.5,-306 924.5,-312 924.5,-318 924.5,-318 924.5,-330 924.5,-330 924.5,-336 918.5,-342 912.5,-342"/>
<text text-anchor="middle" x="880.5" y="-320.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">receiver_poll</text>
</g>
<!-- poll&#45;&gt;receiver_poll -->
<g id="edge4" class="edge">
<title>poll&#45;&gt;receiver_poll</title>
<path fill="none" stroke="#666666" d="M664.3,-341.82C702.96,-338.62 775.95,-332.58 826.12,-328.42"/>
<polygon fill="#666666" stroke="#666666" points="826.47,-331.9 836.15,-327.59 825.89,-324.93 826.47,-331.9"/>
</g>
<!-- buffer_flush -->
<g id="node8" class="node">
<title>buffer_flush</title>
<path fill="none" stroke="#1c2123" d="M1033,-269.5C1033,-269.5 1158,-269.5 1158,-269.5 1164,-269.5 1170,-275.5 1170,-281.5 1170,-281.5 1170,-318.5 1170,-318.5 1170,-324.5 1164,-330.5 1158,-330.5 1158,-330.5 1033,-330.5 1033,-330.5 1027,-330.5 1021,-324.5 1021,-318.5 1021,-318.5 1021,-281.5 1021,-281.5 1021,-275.5 1027,-269.5 1033,-269.5"/>
<text text-anchor="middle" x="1095.5" y="-315.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">buffer.flush(sender)</text>
<polyline fill="none" stroke="#1c2123" points="1021,-307.5 1170,-307.5 "/>
<text text-anchor="start" x="1029" y="-292.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用grpc stream sender</text>
<text text-anchor="start" x="1029" y="-277.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送消息</text>
</g>
<!-- poll&#45;&gt;buffer_flush -->
<g id="edge5" class="edge">
<title>poll&#45;&gt;buffer_flush</title>
<path fill="none" stroke="#666666" d="M664.16,-348.21C720.02,-356.39 854.82,-371.91 965,-351 983.63,-347.46 1003,-341.3 1020.92,-334.46"/>
<polygon fill="#666666" stroke="#666666" points="1022.69,-337.53 1030.71,-330.6 1020.12,-331.01 1022.69,-337.53"/>
</g>
<!-- fill_msg&#45;&gt;buffer_flush -->
<g id="edge6" class="edge">
<title>fill_msg&#45;&gt;buffer_flush</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M952.44,-168.28C956.77,-171.12 960.99,-174.04 965,-177 999.51,-202.49 1034.54,-236.35 1059.45,-262.09"/>
<polygon fill="green" stroke="green" points="1057.07,-264.67 1066.52,-269.46 1062.12,-259.82 1057.07,-264.67"/>
</g>
<!-- pop -->
<g id="node9" class="node">
<title>pop</title>
<path fill="none" stroke="#1c2123" d="M1042.5,-49.5C1042.5,-49.5 1148.5,-49.5 1148.5,-49.5 1154.5,-49.5 1160.5,-55.5 1160.5,-61.5 1160.5,-61.5 1160.5,-98.5 1160.5,-98.5 1160.5,-104.5 1154.5,-110.5 1148.5,-110.5 1148.5,-110.5 1042.5,-110.5 1042.5,-110.5 1036.5,-110.5 1030.5,-104.5 1030.5,-98.5 1030.5,-98.5 1030.5,-61.5 1030.5,-61.5 1030.5,-55.5 1036.5,-49.5 1042.5,-49.5"/>
<text text-anchor="middle" x="1095.5" y="-95.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Queue::pop</text>
<polyline fill="none" stroke="#1c2123" points="1030.5,-87.5 1160.5,-87.5 "/>
<text text-anchor="start" x="1038.5" y="-72.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.queue.pop</text>
<text text-anchor="start" x="1038.5" y="-57.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 从queue中pop消息</text>
</g>
<!-- fill_msg&#45;&gt;pop -->
<g id="edge7" class="edge">
<title>fill_msg&#45;&gt;pop</title>
<path fill="none" stroke="#666666" d="M965.07,-110.38C983.36,-106.09 1002.6,-101.57 1020.49,-97.37"/>
<polygon fill="#666666" stroke="#666666" points="1021.33,-100.77 1030.27,-95.08 1019.74,-93.96 1021.33,-100.77"/>
</g>
<!-- send_snapshot_sock -->
<g id="node10" class="node">
<title>send_snapshot_sock</title>
<path fill="#de3737" stroke="#000000" d="M1013,-129.5C1013,-129.5 1178,-129.5 1178,-129.5 1184,-129.5 1190,-135.5 1190,-141.5 1190,-141.5 1190,-178.5 1190,-178.5 1190,-184.5 1184,-190.5 1178,-190.5 1178,-190.5 1013,-190.5 1013,-190.5 1007,-190.5 1001,-184.5 1001,-178.5 1001,-178.5 1001,-141.5 1001,-141.5 1001,-135.5 1007,-129.5 1013,-129.5"/>
<text text-anchor="middle" x="1095.5" y="-175.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">send_snapshot_sock</text>
<polyline fill="none" stroke="#000000" points="1001,-167.5 1190,-167.5 "/>
<text text-anchor="start" x="1009" y="-152.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">使用scheduler 由snap handler</text>
<text text-anchor="middle" x="1095.5" y="-137.3" font-family="Times,serif" font-size="14.00" fill="#ffffff"> 处理包含snapshot 的message</text>
</g>
<!-- fill_msg&#45;&gt;send_snapshot_sock -->
<g id="edge8" class="edge">
<title>fill_msg&#45;&gt;send_snapshot_sock</title>
<path fill="none" stroke="#666666" d="M965.07,-141.77C973.53,-142.96 982.2,-144.18 990.83,-145.4"/>
<polygon fill="#666666" stroke="#666666" points="990.56,-148.9 1000.95,-146.82 991.54,-141.96 990.56,-148.9"/>
</g>
<!-- TikvClient -->
<g id="node11" class="node">
<title>TikvClient</title>
<path fill="none" stroke="#1c2123" d="M416.5,-438C416.5,-438 365.5,-438 365.5,-438 359.5,-438 353.5,-432 353.5,-426 353.5,-426 353.5,-414 353.5,-414 353.5,-408 359.5,-402 365.5,-402 365.5,-402 416.5,-402 416.5,-402 422.5,-402 428.5,-408 428.5,-414 428.5,-414 428.5,-426 428.5,-426 428.5,-432 422.5,-438 416.5,-438"/>
<text text-anchor="middle" x="391" y="-416.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TikvClient</text>
</g>
<!-- client_batch_raft -->
<g id="node12" class="node">
<title>client_batch_raft</title>
<path fill="none" stroke="#1c2123" d="M325,-157C325,-157 457,-157 457,-157 463,-157 469,-163 469,-169 469,-169 469,-221 469,-221 469,-227 463,-233 457,-233 457,-233 325,-233 325,-233 319,-233 313,-227 313,-221 313,-221 313,-169 313,-169 313,-163 319,-157 325,-157"/>
<text text-anchor="middle" x="391" y="-217.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">batch_raft</text>
<polyline fill="none" stroke="#1c2123" points="313,-210 469,-210 "/>
<text text-anchor="start" x="321" y="-194.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">调用grpc batch_raft接口</text>
<text text-anchor="start" x="321" y="-179.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将返回的stream, sink</text>
<text text-anchor="start" x="321" y="-164.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 放入RaftCall</text>
</g>
<!-- client_batch_raft&#45;&gt;RaftCall -->
<g id="edge9" class="edge">
<title>client_batch_raft&#45;&gt;RaftCall</title>
<path fill="none" stroke="#666666" d="M469.2,-184.56C480.33,-183.05 492.03,-181.47 503.86,-179.87"/>
<polygon fill="#666666" stroke="#666666" points="504.38,-183.33 513.82,-178.52 503.44,-176.4 504.38,-183.33"/>
</g>
<!-- client_raft -->
<g id="node13" class="node">
<title>client_raft</title>
<path fill="none" stroke="#1c2123" d="M331,-307C331,-307 451,-307 451,-307 457,-307 463,-313 463,-319 463,-319 463,-371 463,-371 463,-377 457,-383 451,-383 451,-383 331,-383 331,-383 325,-383 319,-377 319,-371 319,-371 319,-319 319,-319 319,-313 325,-307 331,-307"/>
<text text-anchor="middle" x="391" y="-367.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft</text>
<polyline fill="none" stroke="#1c2123" points="319,-360 463,-360 "/>
<text text-anchor="start" x="327" y="-344.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">调用grcp raft接口</text>
<text text-anchor="start" x="327" y="-329.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将返回的stream, sink</text>
<text text-anchor="start" x="327" y="-314.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 放入RaftCall</text>
</g>
<!-- client_raft&#45;&gt;RaftCall -->
<g id="edge10" class="edge">
<title>client_raft&#45;&gt;RaftCall</title>
<path fill="none" stroke="#666666" d="M463.36,-311.34C471.35,-306.82 479.22,-302 486.5,-297 492.88,-292.61 499.28,-287.97 505.64,-283.16"/>
<polygon fill="#666666" stroke="#666666" points="507.89,-285.85 513.68,-276.97 503.62,-280.3 507.89,-285.85"/>
</g>
<!-- spawn -->
<g id="node14" class="node">
<title>spawn</title>
<path fill="none" stroke="#1c2123" d="M406,-288C406,-288 376,-288 376,-288 370,-288 364,-282 364,-276 364,-276 364,-264 364,-264 364,-258 370,-252 376,-252 376,-252 406,-252 406,-252 412,-252 418,-258 418,-264 418,-264 418,-276 418,-276 418,-282 412,-288 406,-288"/>
<text text-anchor="middle" x="391" y="-266.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">spawn</text>
</g>
<!-- spawn&#45;&gt;RaftCall -->
<g id="edge11" class="edge">
<title>spawn&#45;&gt;RaftCall</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M418.16,-263.78C437.41,-258.84 464.02,-251.23 486.5,-242 492.4,-239.58 498.37,-236.99 504.35,-234.29"/>
<polygon fill="green" stroke="green" points="506.15,-237.32 513.77,-229.95 503.22,-230.96 506.15,-237.32"/>
</g>
<!-- spawn&#45;&gt;poll -->
<g id="edge12" class="edge">
<title>spawn&#45;&gt;poll</title>
<path fill="none" stroke="#666666" d="M418.23,-273.91C438,-277.67 465.24,-284.68 486.5,-297 496.97,-303.07 495.34,-310.28 506,-316 535.19,-331.65 572.49,-338.56 599.64,-341.6"/>
<polygon fill="#666666" stroke="#666666" points="599.58,-345.11 609.87,-342.62 600.27,-338.14 599.58,-345.11"/>
</g>
<!-- resolve -->
<g id="node15" class="node">
<title>resolve</title>
<path fill="none" stroke="#1c2123" d="M127.5,-442C127.5,-442 230.5,-442 230.5,-442 236.5,-442 242.5,-448 242.5,-454 242.5,-454 242.5,-476 242.5,-476 242.5,-482 236.5,-488 230.5,-488 230.5,-488 127.5,-488 127.5,-488 121.5,-488 115.5,-482 115.5,-476 115.5,-476 115.5,-454 115.5,-454 115.5,-448 121.5,-442 127.5,-442"/>
<text text-anchor="middle" x="179" y="-472.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve</text>
<polyline fill="none" stroke="#1c2123" points="115.5,-465 242.5,-465 "/>
<text text-anchor="start" x="123.5" y="-449.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">解析store_id的addr</text>
</g>
<!-- resolve&#45;&gt;PdStoreAddrResolver_resolve -->
<g id="edge13" class="edge">
<title>resolve&#45;&gt;PdStoreAddrResolver_resolve</title>
<path fill="none" stroke="#666666" d="M242.72,-483.52C266.62,-490.57 294.03,-498.67 318.67,-505.94"/>
<polygon fill="#666666" stroke="#666666" points="317.74,-509.32 328.32,-508.79 319.72,-502.6 317.74,-509.32"/>
</g>
<!-- connect -->
<g id="node16" class="node">
<title>connect</title>
<path fill="none" stroke="#1c2123" d="M133.5,-361.5C133.5,-361.5 224.5,-361.5 224.5,-361.5 230.5,-361.5 236.5,-367.5 236.5,-373.5 236.5,-373.5 236.5,-410.5 236.5,-410.5 236.5,-416.5 230.5,-422.5 224.5,-422.5 224.5,-422.5 133.5,-422.5 133.5,-422.5 127.5,-422.5 121.5,-416.5 121.5,-410.5 121.5,-410.5 121.5,-373.5 121.5,-373.5 121.5,-367.5 127.5,-361.5 133.5,-361.5"/>
<text text-anchor="middle" x="179" y="-407.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">connect</text>
<polyline fill="none" stroke="#1c2123" points="121.5,-399.5 236.5,-399.5 "/>
<text text-anchor="start" x="129.5" y="-384.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建grpc channel</text>
<text text-anchor="start" x="129.5" y="-369.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 返回TiKVClient</text>
</g>
<!-- connect&#45;&gt;TikvClient -->
<g id="edge14" class="edge">
<title>connect&#45;&gt;TikvClient</title>
<path fill="none" stroke="#666666" d="M236.55,-399.54C269.84,-403.98 311.45,-409.53 342.94,-413.73"/>
<polygon fill="#666666" stroke="#666666" points="342.83,-417.24 353.2,-415.09 343.75,-410.3 342.83,-417.24"/>
</g>
<!-- batch_call -->
<g id="node17" class="node">
<title>batch_call</title>
<path fill="none" stroke="#1c2123" d="M102,-186C102,-186 256,-186 256,-186 262,-186 268,-192 268,-198 268,-198 268,-250 268,-250 268,-256 262,-262 256,-262 256,-262 102,-262 102,-262 96,-262 90,-256 90,-250 90,-250 90,-198 90,-198 90,-192 96,-186 102,-186"/>
<text text-anchor="middle" x="179" y="-246.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">batch_call</text>
<polyline fill="none" stroke="#1c2123" points="90,-239 268,-239 "/>
<text text-anchor="start" x="98" y="-223.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用新接口batch_raft</text>
<text text-anchor="start" x="98" y="-208.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果失败的话，fallback到</text>
<text text-anchor="start" x="98" y="-193.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 兼容模式</text>
</g>
<!-- batch_call&#45;&gt;RaftCall -->
<g id="edge19" class="edge">
<title>batch_call&#45;&gt;RaftCall</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M266.05,-185.94C269.63,-182.86 272.98,-179.55 276,-176 294.74,-154.02 272.21,-131.09 295.5,-114 354.92,-70.4 436.2,-80.01 504.45,-101.65"/>
<polygon fill="green" stroke="green" points="503.4,-104.99 513.99,-104.78 505.58,-98.34 503.4,-104.99"/>
</g>
<!-- batch_call&#45;&gt;client_batch_raft -->
<g id="edge15" class="edge">
<title>batch_call&#45;&gt;client_batch_raft</title>
<path fill="none" stroke="#666666" d="M268.15,-211.83C279.61,-210.24 291.34,-208.62 302.78,-207.04"/>
<polygon fill="#666666" stroke="#666666" points="303.32,-210.5 312.75,-205.67 302.37,-203.57 303.32,-210.5"/>
</g>
<!-- batch_call&#45;&gt;spawn -->
<g id="edge16" class="edge">
<title>batch_call&#45;&gt;spawn</title>
<path fill="none" stroke="#666666" d="M268.15,-243.31C298.26,-249.9 330.27,-256.92 353.93,-262.1"/>
<polygon fill="#666666" stroke="#666666" points="353.33,-265.55 363.85,-264.27 354.83,-258.71 353.33,-265.55"/>
</g>
<!-- call -->
<g id="node18" class="node">
<title>call</title>
<path fill="none" stroke="#1c2123" d="M125.5,-281.5C125.5,-281.5 232.5,-281.5 232.5,-281.5 238.5,-281.5 244.5,-287.5 244.5,-293.5 244.5,-293.5 244.5,-330.5 244.5,-330.5 244.5,-336.5 238.5,-342.5 232.5,-342.5 232.5,-342.5 125.5,-342.5 125.5,-342.5 119.5,-342.5 113.5,-336.5 113.5,-330.5 113.5,-330.5 113.5,-293.5 113.5,-293.5 113.5,-287.5 119.5,-281.5 125.5,-281.5"/>
<text text-anchor="middle" x="179" y="-327.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">call</text>
<polyline fill="none" stroke="#1c2123" points="113.5,-319.5 244.5,-319.5 "/>
<text text-anchor="start" x="121.5" y="-304.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">fallback到兼容模式</text>
<text text-anchor="middle" x="179" y="-289.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用grpc raft接口</text>
</g>
<!-- call&#45;&gt;RaftCall -->
<g id="edge20" class="edge">
<title>call&#45;&gt;RaftCall</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M244.6,-295.13C256.6,-289.28 267.89,-281.45 276,-271 311,-225.88 252.16,-181.19 295.5,-144 326.31,-117.56 421.87,-124.62 503.94,-136.88"/>
<polygon fill="green" stroke="green" points="503.46,-140.34 513.87,-138.39 504.52,-133.42 503.46,-140.34"/>
</g>
<!-- call&#45;&gt;client_raft -->
<g id="edge17" class="edge">
<title>call&#45;&gt;client_raft</title>
<path fill="none" stroke="#666666" d="M244.72,-322.17C265.01,-325.36 287.66,-328.92 308.93,-332.26"/>
<polygon fill="#666666" stroke="#666666" points="308.49,-335.73 318.91,-333.83 309.58,-328.82 308.49,-335.73"/>
</g>
<!-- call&#45;&gt;spawn -->
<g id="edge18" class="edge">
<title>call&#45;&gt;spawn</title>
<path fill="none" stroke="#666666" d="M244.72,-299.06C280.62,-291.88 323.92,-283.22 353.86,-277.23"/>
<polygon fill="#666666" stroke="#666666" points="354.74,-280.62 363.86,-275.23 353.37,-273.76 354.74,-280.62"/>
</g>
<!-- start -->
<g id="node19" class="node">
<title>start</title>
<path fill="none" stroke="#1c2123" d="M42,-286C42,-286 12,-286 12,-286 6,-286 0,-280 0,-274 0,-274 0,-262 0,-262 0,-256 6,-250 12,-250 12,-250 42,-250 42,-250 48,-250 54,-256 54,-262 54,-262 54,-274 54,-274 54,-280 48,-286 42,-286"/>
<text text-anchor="middle" x="27" y="-264.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start</text>
</g>
<!-- start&#45;&gt;resolve -->
<g id="edge21" class="edge">
<title>start&#45;&gt;resolve</title>
<path fill="none" stroke="#666666" d="M28.88,-286.21C31.46,-319.64 41.67,-391.15 82,-432 88.8,-438.89 97.1,-444.34 105.94,-448.65"/>
<polygon fill="#666666" stroke="#666666" points="104.75,-451.95 115.32,-452.75 107.56,-445.54 104.75,-451.95"/>
</g>
<!-- start&#45;&gt;connect -->
<g id="edge22" class="edge">
<title>start&#45;&gt;connect</title>
<path fill="none" stroke="#666666" d="M35.62,-286.02C44.37,-304.76 60.33,-333.86 82,-352 90.89,-359.44 101.35,-365.67 112.05,-370.82"/>
<polygon fill="#666666" stroke="#666666" points="110.92,-374.15 121.47,-375.07 113.8,-367.77 110.92,-374.15"/>
</g>
<!-- start&#45;&gt;batch_call -->
<g id="edge23" class="edge">
<title>start&#45;&gt;batch_call</title>
<path fill="none" stroke="#666666" d="M54.13,-260.34C61.73,-258.11 70.51,-255.53 79.83,-252.8"/>
<polygon fill="#666666" stroke="#666666" points="81.09,-256.07 89.7,-249.9 79.12,-249.36 81.09,-256.07"/>
</g>
<!-- start&#45;&gt;call -->
<g id="edge24" class="edge">
<title>start&#45;&gt;call</title>
<path fill="none" stroke="#666666" d="M54.13,-275.66C68.01,-279.74 85.85,-284.97 103.64,-290.19"/>
<polygon fill="#666666" stroke="#666666" points="102.91,-293.62 113.49,-293.08 104.88,-286.9 102.91,-293.62"/>
</g>
<!-- maybe_backoff -->
<g id="node20" class="node">
<title>maybe_backoff</title>
<path fill="none" stroke="#1c2123" d="M217.5,-167C217.5,-167 140.5,-167 140.5,-167 134.5,-167 128.5,-161 128.5,-155 128.5,-155 128.5,-143 128.5,-143 128.5,-137 134.5,-131 140.5,-131 140.5,-131 217.5,-131 217.5,-131 223.5,-131 229.5,-137 229.5,-143 229.5,-143 229.5,-155 229.5,-155 229.5,-161 223.5,-167 217.5,-167"/>
<text text-anchor="middle" x="179" y="-145.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_backoff</text>
</g>
<!-- start&#45;&gt;maybe_backoff -->
<g id="edge25" class="edge">
<title>start&#45;&gt;maybe_backoff</title>
<path fill="none" stroke="#666666" d="M33.49,-249.64C40.93,-228 56.31,-192.5 82,-173 92.58,-164.97 105.52,-159.6 118.43,-156.02"/>
<polygon fill="#666666" stroke="#666666" points="119.38,-159.39 128.26,-153.61 117.72,-152.59 119.38,-159.39"/>
</g>
<!-- broadcast_unreachable -->
<g id="node21" class="node">
<title>broadcast_unreachable</title>
<path fill="none" stroke="#1c2123" d="M237,-113C237,-113 121,-113 121,-113 115,-113 109,-107 109,-101 109,-101 109,-89 109,-89 109,-83 115,-77 121,-77 121,-77 237,-77 237,-77 243,-77 249,-83 249,-89 249,-89 249,-101 249,-101 249,-107 243,-113 237,-113"/>
<text text-anchor="middle" x="179" y="-91.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">broadcast_unreachable</text>
</g>
<!-- start&#45;&gt;broadcast_unreachable -->
<g id="edge26" class="edge">
<title>start&#45;&gt;broadcast_unreachable</title>
<path fill="none" stroke="#666666" d="M29.5,-249.86C33.04,-219.05 44.66,-156.46 82,-122 87.13,-117.27 93.02,-113.35 99.31,-110.12"/>
<polygon fill="#666666" stroke="#666666" points="101.1,-113.16 108.77,-105.86 98.22,-106.78 101.1,-113.16"/>
</g>
</g>
</svg>
