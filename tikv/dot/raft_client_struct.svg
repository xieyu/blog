<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raft_client Pages: 1 -->
<svg width="1801pt" height="999pt"
 viewBox="0.00 0.00 1801.00 998.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 994.5)">
<title>raft_client</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-994.5 1797,-994.5 1797,4 -4,4"/>
<!-- RaftClient -->
<g id="node1" class="node">
<title>RaftClient</title>
<path fill="none" stroke="#1c2123" d="M12,-459C12,-459 264,-459 264,-459 270,-459 276,-465 276,-471 276,-471 276,-646 276,-646 276,-652 270,-658 264,-658 264,-658 12,-658 12,-658 6,-658 0,-652 0,-646 0,-646 0,-471 0,-471 0,-465 6,-459 12,-459"/>
<text text-anchor="middle" x="138" y="-642.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftClient</text>
<polyline fill="none" stroke="#1c2123" points="0,-635 276,-635 "/>
<text text-anchor="start" x="8" y="-619.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">管理connection</text>
<text text-anchor="start" x="8" y="-604.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发消息时，先调用send，最后flush</text>
<polyline fill="none" stroke="#1c2123" points="0,-597 276,-597 "/>
<text text-anchor="start" x="8" y="-581.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pool: Arc&lt;Mutex&lt;ConnectionPool&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-574 276,-574 "/>
<text text-anchor="start" x="8" y="-558.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">cache: LruCache&lt;(u64, usize), CachedQueue&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-551 276,-551 "/>
<text text-anchor="start" x="8" y="-535.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">need_flush: Vec&lt;(u64, usize)&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-528 276,-528 "/>
<text text-anchor="start" x="8" y="-512.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">full_stores: Vec&lt;(u64, usize)&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-505 276,-505 "/>
<text text-anchor="start" x="8" y="-489.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">future_pool: Arc&lt;ThreadPool&lt;TaskCell&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-482 276,-482 "/>
<text text-anchor="start" x="8" y="-466.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">builder: ConnectionBuilder&lt;S, R&gt;,</text>
</g>
<!-- ConnectionPool -->
<g id="node2" class="node">
<title>ConnectionPool</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M324,-883C324,-883 605,-883 605,-883 611,-883 617,-889 617,-895 617,-895 617,-978 617,-978 617,-984 611,-990 605,-990 605,-990 324,-990 324,-990 318,-990 312,-984 312,-978 312,-978 312,-895 312,-895 312,-889 318,-883 324,-883"/>
<text text-anchor="middle" x="464.5" y="-974.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ConnectionPool</text>
<polyline fill="none" stroke="#8a8898" points="312,-967 617,-967 "/>
<text text-anchor="start" x="320" y="-951.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">管理连接池</text>
<text text-anchor="start" x="320" y="-936.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> key为store_id, conn_id</text>
<polyline fill="none" stroke="#8a8898" points="312,-929 617,-929 "/>
<text text-anchor="start" x="320" y="-913.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">connections: HashMap&lt;(u64, usize), Arc&lt;Queue&gt;&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="312,-906 617,-906 "/>
<text text-anchor="start" x="320" y="-890.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">tombstone_stores: HashSet&lt;u64&gt;,</text>
</g>
<!-- RaftClient&#45;&gt;ConnectionPool -->
<g id="edge6" class="edge">
<title>RaftClient&#45;&gt;ConnectionPool</title>
<path fill="none" stroke="#666666" d="M173.48,-658.35C201.51,-726.74 247.1,-815.27 312,-873.5 313.13,-874.51 314.27,-875.51 315.43,-876.49"/>
<polygon fill="#666666" stroke="#666666" points="313.33,-879.29 323.34,-882.75 317.68,-873.8 313.33,-879.29"/>
</g>
<!-- CachedQueue -->
<g id="node3" class="node">
<title>CachedQueue</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M723.5,-777.5C723.5,-777.5 830.5,-777.5 830.5,-777.5 836.5,-777.5 842.5,-783.5 842.5,-789.5 842.5,-789.5 842.5,-895.5 842.5,-895.5 842.5,-901.5 836.5,-907.5 830.5,-907.5 830.5,-907.5 723.5,-907.5 723.5,-907.5 717.5,-907.5 711.5,-901.5 711.5,-895.5 711.5,-895.5 711.5,-789.5 711.5,-789.5 711.5,-783.5 717.5,-777.5 723.5,-777.5"/>
<text text-anchor="middle" x="777" y="-892.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">CachedQueue</text>
<polyline fill="none" stroke="#8a8898" points="711.5,-884.5 842.5,-884.5 "/>
<text text-anchor="start" x="719.5" y="-869.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">如果dirty/full会</text>
<text text-anchor="start" x="719.5" y="-854.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 调用queue的notify</text>
<polyline fill="none" stroke="#8a8898" points="711.5,-846.5 842.5,-846.5 "/>
<text text-anchor="start" x="719.5" y="-831.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">queue: Arc&lt;Queue&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="711.5,-823.5 842.5,-823.5 "/>
<text text-anchor="start" x="719.5" y="-808.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">dirty: bool,</text>
<polyline fill="none" stroke="#8a8898" points="711.5,-800.5 842.5,-800.5 "/>
<text text-anchor="start" x="719.5" y="-785.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">full: bool,</text>
</g>
<!-- RaftClient&#45;&gt;CachedQueue -->
<g id="edge7" class="edge">
<title>RaftClient&#45;&gt;CachedQueue</title>
<path fill="none" stroke="#666666" d="M276.07,-622.08C288.07,-626.37 300.16,-630.27 312,-633.5 377.89,-651.49 562.76,-629.99 617,-671.5 650.56,-697.18 626.34,-726.72 653,-759.5 666.69,-776.33 684.68,-791.07 702.67,-803.28"/>
<polygon fill="#666666" stroke="#666666" points="701.2,-806.5 711.48,-809.06 705.04,-800.65 701.2,-806.5"/>
</g>
<!-- ConnectionBuilder -->
<g id="node5" class="node">
<title>ConnectionBuilder</title>
<path fill="none" stroke="#1c2123" d="M671.5,-112.5C671.5,-112.5 882.5,-112.5 882.5,-112.5 888.5,-112.5 894.5,-118.5 894.5,-124.5 894.5,-124.5 894.5,-314.5 894.5,-314.5 894.5,-320.5 888.5,-326.5 882.5,-326.5 882.5,-326.5 671.5,-326.5 671.5,-326.5 665.5,-326.5 659.5,-320.5 659.5,-314.5 659.5,-314.5 659.5,-124.5 659.5,-124.5 659.5,-118.5 665.5,-112.5 671.5,-112.5"/>
<text text-anchor="middle" x="777" y="-311.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ConnectionBuilder</text>
<polyline fill="none" stroke="#1c2123" points="659.5,-303.5 894.5,-303.5 "/>
<text text-anchor="start" x="667.5" y="-288.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve store addr</text>
<text text-anchor="start" x="667.5" y="-273.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 用于创建connection</text>
<text text-anchor="start" x="667.5" y="-258.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 创建grpc channel</text>
<polyline fill="none" stroke="#1c2123" points="659.5,-250.5 894.5,-250.5 "/>
<text text-anchor="start" x="667.5" y="-235.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">env: Arc&lt;Environment&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="659.5,-227.5 894.5,-227.5 "/>
<text text-anchor="start" x="667.5" y="-212.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cfg: Arc&lt;Config&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="659.5,-204.5 894.5,-204.5 "/>
<text text-anchor="start" x="667.5" y="-189.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">security_mgr: Arc&lt;SecurityManager&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="659.5,-181.5 894.5,-181.5 "/>
<text text-anchor="start" x="667.5" y="-166.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolver: S,</text>
<polyline fill="none" stroke="#1c2123" points="659.5,-158.5 894.5,-158.5 "/>
<text text-anchor="start" x="667.5" y="-143.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">router: R,</text>
<polyline fill="none" stroke="#1c2123" points="659.5,-135.5 894.5,-135.5 "/>
<text text-anchor="start" x="667.5" y="-120.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">snap_scheduler: Scheduler&lt;SnapTask&gt;,</text>
</g>
<!-- RaftClient&#45;&gt;ConnectionBuilder -->
<g id="edge8" class="edge">
<title>RaftClient&#45;&gt;ConnectionBuilder</title>
<path fill="none" stroke="#666666" d="M226.58,-458.94C252.25,-433.85 281.63,-408.64 312,-389.5 417.25,-323.15 552.15,-277.42 649.34,-250.24"/>
<polygon fill="#666666" stroke="#666666" points="650.51,-253.55 659.22,-247.51 648.65,-246.8 650.51,-253.55"/>
</g>
<!-- TaskCell -->
<g id="node8" class="node">
<title>TaskCell</title>
<path fill="none" stroke="#1c2123" d="M689.5,-47.5C689.5,-47.5 864.5,-47.5 864.5,-47.5 870.5,-47.5 876.5,-53.5 876.5,-59.5 876.5,-59.5 876.5,-81.5 876.5,-81.5 876.5,-87.5 870.5,-93.5 864.5,-93.5 864.5,-93.5 689.5,-93.5 689.5,-93.5 683.5,-93.5 677.5,-87.5 677.5,-81.5 677.5,-81.5 677.5,-59.5 677.5,-59.5 677.5,-53.5 683.5,-47.5 689.5,-47.5"/>
<text text-anchor="middle" x="777" y="-78.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TaskCell</text>
<polyline fill="none" stroke="#1c2123" points="677.5,-70.5 876.5,-70.5 "/>
<text text-anchor="start" x="685.5" y="-55.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub struct TaskCell(Arc&lt;Task&gt;);</text>
</g>
<!-- RaftClient&#45;&gt;TaskCell -->
<g id="edge9" class="edge">
<title>RaftClient&#45;&gt;TaskCell</title>
<path fill="none" stroke="#666666" d="M176.99,-458.77C205.82,-394.13 250.95,-311.96 312,-256.5 413.03,-164.73 565.03,-115.52 667.26,-91.21"/>
<polygon fill="#666666" stroke="#666666" points="668.36,-94.55 677.3,-88.86 666.77,-87.73 668.36,-94.55"/>
</g>
<!-- LruCache -->
<g id="node9" class="node">
<title>LruCache</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M355,-681C355,-681 574,-681 574,-681 580,-681 586,-687 586,-693 586,-693 586,-852 586,-852 586,-858 580,-864 574,-864 574,-864 355,-864 355,-864 349,-864 343,-858 343,-852 343,-852 343,-693 343,-693 343,-687 349,-681 355,-681"/>
<text text-anchor="middle" x="464.5" y="-848.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">LruCache</text>
<polyline fill="none" stroke="#8a8898" points="343,-841 586,-841 "/>
<text text-anchor="start" x="351" y="-825.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">key为store_id, conn_id</text>
<text text-anchor="start" x="351" y="-810.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> value为cached queue</text>
<polyline fill="none" stroke="#8a8898" points="343,-803 586,-803 "/>
<text text-anchor="start" x="351" y="-787.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">在发消息时先从cache中获取</text>
<text text-anchor="start" x="351" y="-772.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> store_id, conn_id对应的queue</text>
<text text-anchor="start" x="351" y="-757.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 成功话，就把消息push到queue中</text>
<polyline fill="none" stroke="#8a8898" points="343,-750 586,-750 "/>
<text text-anchor="start" x="351" y="-734.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">map: HashMap&lt;K, ValueEntry&lt;K, V&gt;&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="343,-727 586,-727 "/>
<text text-anchor="start" x="351" y="-711.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">trace: Trace&lt;K&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="343,-704 586,-704 "/>
<text text-anchor="start" x="351" y="-688.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">capacity: usize,</text>
</g>
<!-- RaftClient&#45;&gt;LruCache -->
<g id="edge10" class="edge">
<title>RaftClient&#45;&gt;LruCache</title>
<path fill="none" stroke="#666666" d="M276.15,-648.95C295.43,-661.66 315.21,-674.7 334.34,-687.32"/>
<polygon fill="#666666" stroke="#666666" points="332.51,-690.31 342.78,-692.89 336.36,-684.46 332.51,-690.31"/>
</g>
<!-- StreamBackEnd -->
<g id="node10" class="node">
<title>StreamBackEnd</title>
<path fill="none" stroke="#1c2123" d="M372,-493.5C372,-493.5 557,-493.5 557,-493.5 563,-493.5 569,-499.5 569,-505.5 569,-505.5 569,-611.5 569,-611.5 569,-617.5 563,-623.5 557,-623.5 557,-623.5 372,-623.5 372,-623.5 366,-623.5 360,-617.5 360,-611.5 360,-611.5 360,-505.5 360,-505.5 360,-499.5 366,-493.5 372,-493.5"/>
<text text-anchor="middle" x="464.5" y="-608.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StreamBackEnd</text>
<polyline fill="none" stroke="#1c2123" points="360,-600.5 569,-600.5 "/>
<text text-anchor="start" x="368" y="-585.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">watches lifetime of a connection</text>
<text text-anchor="start" x="368" y="-570.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> and handles reconnecting</text>
<polyline fill="none" stroke="#1c2123" points="360,-562.5 569,-562.5 "/>
<text text-anchor="start" x="368" y="-547.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_id: u64,</text>
<polyline fill="none" stroke="#1c2123" points="360,-539.5 569,-539.5 "/>
<text text-anchor="start" x="368" y="-524.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">queue: Arc&lt;Queue&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="360,-516.5 569,-516.5 "/>
<text text-anchor="start" x="368" y="-501.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">builder: ConnectionBuilder&lt;S, R&gt;,</text>
</g>
<!-- RaftClient&#45;&gt;StreamBackEnd -->
<g id="edge25" class="edge">
<title>RaftClient&#45;&gt;StreamBackEnd</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M276.15,-558.5C300.67,-558.5 325.97,-558.5 349.74,-558.5"/>
<polygon fill="green" stroke="green" points="349.83,-562 359.83,-558.5 349.83,-555 349.83,-562"/>
</g>
<!-- ThreadPool -->
<g id="node20" class="node">
<title>ThreadPool</title>
<path fill="none" stroke="#1c2123" d="M388.5,-398.5C388.5,-398.5 540.5,-398.5 540.5,-398.5 546.5,-398.5 552.5,-404.5 552.5,-410.5 552.5,-410.5 552.5,-462.5 552.5,-462.5 552.5,-468.5 546.5,-474.5 540.5,-474.5 540.5,-474.5 388.5,-474.5 388.5,-474.5 382.5,-474.5 376.5,-468.5 376.5,-462.5 376.5,-462.5 376.5,-410.5 376.5,-410.5 376.5,-404.5 382.5,-398.5 388.5,-398.5"/>
<text text-anchor="middle" x="464.5" y="-459.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ThreadPool</text>
<polyline fill="none" stroke="#1c2123" points="376.5,-451.5 552.5,-451.5 "/>
<text text-anchor="start" x="384.5" y="-436.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">驱动RaftCall的poll</text>
<text text-anchor="start" x="384.5" y="-421.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 从queue中取raft msg</text>
<text text-anchor="start" x="384.5" y="-406.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后使用grpc channel发送</text>
</g>
<!-- RaftClient&#45;&gt;ThreadPool -->
<g id="edge26" class="edge">
<title>RaftClient&#45;&gt;ThreadPool</title>
<path fill="none" stroke="#666666" d="M276.38,-498.31C288.37,-493.49 300.36,-488.82 312,-484.5 329.62,-477.96 348.59,-471.5 366.95,-465.54"/>
<polygon fill="#666666" stroke="#666666" points="368.03,-468.87 376.48,-462.47 365.89,-462.2 368.03,-468.87"/>
</g>
<!-- Queue -->
<g id="node4" class="node">
<title>Queue</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M992.5,-704C992.5,-704 1171.5,-704 1171.5,-704 1177.5,-704 1183.5,-710 1183.5,-716 1183.5,-716 1183.5,-875 1183.5,-875 1183.5,-881 1177.5,-887 1171.5,-887 1171.5,-887 992.5,-887 992.5,-887 986.5,-887 980.5,-881 980.5,-875 980.5,-875 980.5,-716 980.5,-716 980.5,-710 986.5,-704 992.5,-704"/>
<text text-anchor="middle" x="1082" y="-871.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Queue</text>
<polyline fill="none" stroke="#8a8898" points="980.5,-864 1183.5,-864 "/>
<text text-anchor="start" x="988.5" y="-848.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">store_id, conn_id的</text>
<text text-anchor="start" x="988.5" y="-833.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 消息发送队列</text>
<polyline fill="none" stroke="#8a8898" points="980.5,-826 1183.5,-826 "/>
<text text-anchor="start" x="988.5" y="-810.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">消息先放入buf</text>
<text text-anchor="start" x="988.5" y="-795.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 等队列满或者flush时</text>
<text text-anchor="start" x="988.5" y="-780.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> notify waker pop处理消息</text>
<polyline fill="none" stroke="#8a8898" points="980.5,-773 1183.5,-773 "/>
<text text-anchor="start" x="988.5" y="-757.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">buf: ArrayQueue&lt;RaftMessage&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="980.5,-750 1183.5,-750 "/>
<text text-anchor="start" x="988.5" y="-734.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">connected: AtomicBool,</text>
<polyline fill="none" stroke="#8a8898" points="980.5,-727 1183.5,-727 "/>
<text text-anchor="start" x="988.5" y="-711.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">waker: Mutex&lt;Option&lt;Waker&gt;&gt;,</text>
</g>
<!-- ConnectionPool&#45;&gt;Queue -->
<g id="edge22" class="edge">
<title>ConnectionPool&#45;&gt;Queue</title>
<path fill="none" stroke="#666666" d="M617.05,-949.92C702.5,-952.58 810.02,-947.61 901,-917.5 925.2,-909.49 949.17,-897.21 971.33,-883.48"/>
<polygon fill="#666666" stroke="#666666" points="973.49,-886.26 980.05,-877.94 969.73,-880.35 973.49,-886.26"/>
</g>
<!-- CachedQueue&#45;&gt;Queue -->
<g id="edge11" class="edge">
<title>CachedQueue&#45;&gt;Queue</title>
<path fill="none" stroke="#666666" d="M842.63,-832.47C879.8,-826.71 927.5,-819.31 970.45,-812.65"/>
<polygon fill="#666666" stroke="#666666" points="971.05,-816.1 980.4,-811.11 969.98,-809.18 971.05,-816.1"/>
</g>
<!-- RaftMessage -->
<g id="node22" class="node">
<title>RaftMessage</title>
<path fill="none" stroke="#1c2123" d="M1425,-813.5C1425,-813.5 1361,-813.5 1361,-813.5 1355,-813.5 1349,-807.5 1349,-801.5 1349,-801.5 1349,-789.5 1349,-789.5 1349,-783.5 1355,-777.5 1361,-777.5 1361,-777.5 1425,-777.5 1425,-777.5 1431,-777.5 1437,-783.5 1437,-789.5 1437,-789.5 1437,-801.5 1437,-801.5 1437,-807.5 1431,-813.5 1425,-813.5"/>
<text text-anchor="middle" x="1393" y="-791.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftMessage</text>
</g>
<!-- Queue&#45;&gt;RaftMessage -->
<g id="edge15" class="edge">
<title>Queue&#45;&gt;RaftMessage</title>
<path fill="none" stroke="#666666" d="M1183.75,-795.5C1235.33,-795.5 1296.03,-795.5 1338.55,-795.5"/>
<polygon fill="#666666" stroke="#666666" points="1338.68,-799 1348.68,-795.5 1338.68,-792 1338.68,-799"/>
</g>
<!-- StoreAddrResolver -->
<g id="node11" class="node">
<title>StoreAddrResolver</title>
<path fill="none" stroke="#1c2123" d="M1016.5,-206.5C1016.5,-206.5 1147.5,-206.5 1147.5,-206.5 1153.5,-206.5 1159.5,-212.5 1159.5,-218.5 1159.5,-218.5 1159.5,-240.5 1159.5,-240.5 1159.5,-246.5 1153.5,-252.5 1147.5,-252.5 1147.5,-252.5 1016.5,-252.5 1016.5,-252.5 1010.5,-252.5 1004.5,-246.5 1004.5,-240.5 1004.5,-240.5 1004.5,-218.5 1004.5,-218.5 1004.5,-212.5 1010.5,-206.5 1016.5,-206.5"/>
<text text-anchor="middle" x="1082" y="-237.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreAddrResolver</text>
<polyline fill="none" stroke="#1c2123" points="1004.5,-229.5 1159.5,-229.5 "/>
<text text-anchor="middle" x="1082" y="-214.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">解析store_id对应的addr</text>
</g>
<!-- ConnectionBuilder&#45;&gt;StoreAddrResolver -->
<g id="edge1" class="edge">
<title>ConnectionBuilder&#45;&gt;StoreAddrResolver</title>
<path fill="none" stroke="#666666" d="M894.71,-223.35C927.67,-224.44 962.94,-225.6 993.83,-226.62"/>
<polygon fill="#666666" stroke="#666666" points="994.02,-230.13 1004.13,-226.96 994.25,-223.13 994.02,-230.13"/>
</g>
<!-- SecurityManager -->
<g id="node16" class="node">
<title>SecurityManager</title>
<path fill="none" stroke="#1c2123" d="M1039,-141.5C1039,-141.5 1125,-141.5 1125,-141.5 1131,-141.5 1137,-147.5 1137,-153.5 1137,-153.5 1137,-175.5 1137,-175.5 1137,-181.5 1131,-187.5 1125,-187.5 1125,-187.5 1039,-187.5 1039,-187.5 1033,-187.5 1027,-181.5 1027,-175.5 1027,-175.5 1027,-153.5 1027,-153.5 1027,-147.5 1033,-141.5 1039,-141.5"/>
<text text-anchor="middle" x="1082" y="-172.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SecurityManager</text>
<polyline fill="none" stroke="#1c2123" points="1027,-164.5 1137,-164.5 "/>
<text text-anchor="middle" x="1082" y="-149.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">管理ssl证书</text>
</g>
<!-- ConnectionBuilder&#45;&gt;SecurityManager -->
<g id="edge2" class="edge">
<title>ConnectionBuilder&#45;&gt;SecurityManager</title>
<path fill="none" stroke="#666666" d="M894.71,-198.31C936.14,-190.8 981.23,-182.61 1016.67,-176.18"/>
<polygon fill="#666666" stroke="#666666" points="1017.66,-179.55 1026.87,-174.33 1016.41,-172.67 1017.66,-179.55"/>
</g>
<!-- ChannelBuilder -->
<g id="node18" class="node">
<title>ChannelBuilder</title>
<path fill="none" stroke="#1c2123" d="M949,-364.5C949,-364.5 1215,-364.5 1215,-364.5 1221,-364.5 1227,-370.5 1227,-376.5 1227,-376.5 1227,-444.5 1227,-444.5 1227,-450.5 1221,-456.5 1215,-456.5 1215,-456.5 949,-456.5 949,-456.5 943,-456.5 937,-450.5 937,-444.5 937,-444.5 937,-376.5 937,-376.5 937,-370.5 943,-364.5 949,-364.5"/>
<text text-anchor="middle" x="1082" y="-441.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">grpcio/ChannelBuilder</text>
<polyline fill="none" stroke="#1c2123" points="937,-433.5 1227,-433.5 "/>
<text text-anchor="start" x="945" y="-418.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建grpc channel 会引用env</text>
<polyline fill="none" stroke="#1c2123" points="937,-410.5 1227,-410.5 "/>
<text text-anchor="start" x="945" y="-395.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">env: Arc&lt;Environment&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="937,-387.5 1227,-387.5 "/>
<text text-anchor="start" x="945" y="-372.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">options: HashMap&lt;Cow&lt;&#39;static, [u8]&gt;, Options&gt;,</text>
</g>
<!-- ConnectionBuilder&#45;&gt;ChannelBuilder -->
<g id="edge3" class="edge">
<title>ConnectionBuilder&#45;&gt;ChannelBuilder</title>
<path fill="none" stroke="#666666" d="M894.56,-325.78C908.39,-336.15 922.69,-345.97 937,-354.5 939.88,-356.22 942.82,-357.9 945.81,-359.55"/>
<polygon fill="#666666" stroke="#666666" points="944.45,-362.78 954.92,-364.38 947.73,-356.6 944.45,-362.78"/>
</g>
<!-- Environment -->
<g id="node19" class="node">
<title>Environment</title>
<path fill="none" stroke="#1c2123" d="M1305,-337.5C1305,-337.5 1481,-337.5 1481,-337.5 1487,-337.5 1493,-343.5 1493,-349.5 1493,-349.5 1493,-417.5 1493,-417.5 1493,-423.5 1487,-429.5 1481,-429.5 1481,-429.5 1305,-429.5 1305,-429.5 1299,-429.5 1293,-423.5 1293,-417.5 1293,-417.5 1293,-349.5 1293,-349.5 1293,-343.5 1299,-337.5 1305,-337.5"/>
<text text-anchor="middle" x="1393" y="-414.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Environment</text>
<polyline fill="none" stroke="#1c2123" points="1293,-406.5 1493,-406.5 "/>
<text text-anchor="start" x="1301" y="-391.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cqs: Vec&lt;CompletionQueue&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1293,-383.5 1493,-383.5 "/>
<text text-anchor="start" x="1301" y="-368.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">idx: AtomicUsize,</text>
<polyline fill="none" stroke="#1c2123" points="1293,-360.5 1493,-360.5 "/>
<text text-anchor="start" x="1301" y="-345.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">_handles: Vec&lt;JoinHandle&lt;()&gt;&gt;,</text>
</g>
<!-- ConnectionBuilder&#45;&gt;Environment -->
<g id="edge4" class="edge">
<title>ConnectionBuilder&#45;&gt;Environment</title>
<path fill="none" stroke="#666666" d="M894.8,-252.99C908.95,-256.48 923.26,-259.75 937,-262.5 1064.47,-287.97 1102.75,-262.31 1227,-300.5 1253.09,-308.52 1280.08,-320.38 1304.47,-332.65"/>
<polygon fill="#666666" stroke="#666666" points="1303.19,-335.92 1313.69,-337.36 1306.38,-329.69 1303.19,-335.92"/>
</g>
<!-- RaftStoreRouter -->
<g id="node21" class="node">
<title>RaftStoreRouter</title>
<path fill="none" stroke="#1c2123" d="M1122.5,-345.5C1122.5,-345.5 1041.5,-345.5 1041.5,-345.5 1035.5,-345.5 1029.5,-339.5 1029.5,-333.5 1029.5,-333.5 1029.5,-321.5 1029.5,-321.5 1029.5,-315.5 1035.5,-309.5 1041.5,-309.5 1041.5,-309.5 1122.5,-309.5 1122.5,-309.5 1128.5,-309.5 1134.5,-315.5 1134.5,-321.5 1134.5,-321.5 1134.5,-333.5 1134.5,-333.5 1134.5,-339.5 1128.5,-345.5 1122.5,-345.5"/>
<text text-anchor="middle" x="1082" y="-323.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftStoreRouter</text>
</g>
<!-- ConnectionBuilder&#45;&gt;RaftStoreRouter -->
<g id="edge5" class="edge">
<title>ConnectionBuilder&#45;&gt;RaftStoreRouter</title>
<path fill="none" stroke="#666666" d="M894.83,-279C908.85,-285.04 923.12,-290.71 937,-295.5 963.39,-304.61 993.43,-311.76 1019.21,-316.97"/>
<polygon fill="#666666" stroke="#666666" points="1018.74,-320.45 1029.23,-318.95 1020.1,-313.58 1018.74,-320.45"/>
</g>
<!-- TaskExtras -->
<g id="node6" class="node">
<title>TaskExtras</title>
<path fill="none" stroke="#1c2123" d="M1275,-27C1275,-27 1511,-27 1511,-27 1517,-27 1523,-33 1523,-39 1523,-39 1523,-84 1523,-84 1523,-90 1517,-96 1511,-96 1511,-96 1275,-96 1275,-96 1269,-96 1263,-90 1263,-84 1263,-84 1263,-39 1263,-39 1263,-33 1269,-27 1275,-27"/>
<text text-anchor="middle" x="1393" y="-80.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">TaskExtras</text>
<polyline fill="none" stroke="#1c2123" points="1263,-73 1523,-73 "/>
<text text-anchor="start" x="1271" y="-57.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">extras: Extras,</text>
<polyline fill="none" stroke="#1c2123" points="1263,-50 1523,-50 "/>
<text text-anchor="start" x="1271" y="-34.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">remote: Option&lt;WeakRemote&lt;TaskCell&gt;&gt;,</text>
</g>
<!-- Task -->
<g id="node7" class="node">
<title>Task</title>
<path fill="none" stroke="#1c2123" d="M995,-0.5C995,-0.5 1169,-0.5 1169,-0.5 1175,-0.5 1181,-6.5 1181,-12.5 1181,-12.5 1181,-110.5 1181,-110.5 1181,-116.5 1175,-122.5 1169,-122.5 1169,-122.5 995,-122.5 995,-122.5 989,-122.5 983,-116.5 983,-110.5 983,-110.5 983,-12.5 983,-12.5 983,-6.5 989,-0.5 995,-0.5"/>
<text text-anchor="middle" x="1082" y="-107.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Task</text>
<polyline fill="none" stroke="#1c2123" points="983,-99.5 1181,-99.5 "/>
<text text-anchor="start" x="991" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">status: AtomicU8,</text>
<polyline fill="none" stroke="#1c2123" points="983,-76.5 1181,-76.5 "/>
<text text-anchor="start" x="991" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">extras: UnsafeCell&lt;TaskExtras&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="983,-53.5 1181,-53.5 "/>
<text text-anchor="start" x="991" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">future: UnsafeCell&lt;Pin</text>
<text text-anchor="start" x="991" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> &lt;Box&lt;dyn Future&lt;Output = ()&gt;</text>
<text text-anchor="start" x="991" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> + Send + &#39;static&gt;&gt;&gt;,</text>
</g>
<!-- Task&#45;&gt;TaskExtras -->
<g id="edge13" class="edge">
<title>Task&#45;&gt;TaskExtras</title>
<path fill="none" stroke="#666666" d="M1181.19,-61.5C1203.92,-61.5 1228.54,-61.5 1252.66,-61.5"/>
<polygon fill="#666666" stroke="#666666" points="1252.95,-65 1262.95,-61.5 1252.95,-58 1252.95,-65"/>
</g>
<!-- TaskCell&#45;&gt;Task -->
<g id="edge12" class="edge">
<title>TaskCell&#45;&gt;Task</title>
<path fill="none" stroke="#666666" d="M876.79,-67.57C907.49,-66.65 941.49,-65.64 972.8,-64.71"/>
<polygon fill="#666666" stroke="#666666" points="972.97,-68.21 982.86,-64.42 972.76,-61.21 972.97,-68.21"/>
</g>
<!-- LruCache&#45;&gt;CachedQueue -->
<g id="edge14" class="edge">
<title>LruCache&#45;&gt;CachedQueue</title>
<path fill="none" stroke="#666666" d="M586.44,-799.76C625.18,-808.5 666.93,-817.91 701.36,-825.67"/>
<polygon fill="#666666" stroke="#666666" points="700.8,-829.14 711.33,-827.92 702.34,-822.31 700.8,-829.14"/>
</g>
<!-- StreamBackEnd&#45;&gt;Queue -->
<g id="edge16" class="edge">
<title>StreamBackEnd&#45;&gt;Queue</title>
<path fill="none" stroke="#666666" d="M569.31,-600.88C586.77,-611.3 603.55,-623.79 617,-638.5 644.96,-669.08 620.51,-698.79 653,-724.5 659.27,-729.46 845.73,-759.11 970.45,-778.49"/>
<polygon fill="#666666" stroke="#666666" points="970.02,-781.97 980.44,-780.04 971.1,-775.05 970.02,-781.97"/>
</g>
<!-- StreamBackEnd&#45;&gt;ConnectionBuilder -->
<g id="edge17" class="edge">
<title>StreamBackEnd&#45;&gt;ConnectionBuilder</title>
<path fill="none" stroke="#666666" d="M569.26,-523.14C587.25,-513.05 604.25,-500.35 617,-484.5 659.44,-431.76 619.1,-395.1 653,-336.5 653.31,-335.96 653.63,-335.42 653.94,-334.89"/>
<polygon fill="#666666" stroke="#666666" points="656.99,-336.62 659.35,-326.29 651.07,-332.89 656.99,-336.62"/>
</g>
<!-- RaftCall -->
<g id="node15" class="node">
<title>RaftCall</title>
<path fill="none" stroke="#1c2123" d="M665,-345.5C665,-345.5 889,-345.5 889,-345.5 895,-345.5 901,-351.5 901,-357.5 901,-357.5 901,-669.5 901,-669.5 901,-675.5 895,-681.5 889,-681.5 889,-681.5 665,-681.5 665,-681.5 659,-681.5 653,-675.5 653,-669.5 653,-669.5 653,-357.5 653,-357.5 653,-351.5 659,-345.5 665,-345.5"/>
<text text-anchor="middle" x="777" y="-666.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCall</text>
<polyline fill="none" stroke="#1c2123" points="653,-658.5 901,-658.5 "/>
<text text-anchor="start" x="661" y="-643.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">struct tracks the lifetime of</text>
<text text-anchor="start" x="661" y="-628.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> a raft or batch_raft rpc sender/receiver 为</text>
<text text-anchor="start" x="661" y="-613.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> grpc stream的输入输出</text>
<polyline fill="none" stroke="#1c2123" points="653,-605.5 901,-605.5 "/>
<text text-anchor="start" x="661" y="-590.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">被poll时不断的Queue中pop消息</text>
<text text-anchor="start" x="661" y="-575.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发到sender, 然后poll receiver</text>
<text text-anchor="start" x="661" y="-560.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> router用来broadcast store unreachable</text>
<polyline fill="none" stroke="#1c2123" points="653,-552.5 901,-552.5 "/>
<text text-anchor="start" x="661" y="-537.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">sender: ClientCStreamSender&lt;M&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="653,-529.5 901,-529.5 "/>
<text text-anchor="start" x="661" y="-514.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">receiver: ClientCStreamReceiver&lt;Done&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="653,-506.5 901,-506.5 "/>
<text text-anchor="start" x="661" y="-491.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">queue: Arc&lt;Queue&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="653,-483.5 901,-483.5 "/>
<text text-anchor="start" x="661" y="-468.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">buffer: B,</text>
<polyline fill="none" stroke="#1c2123" points="653,-460.5 901,-460.5 "/>
<text text-anchor="start" x="661" y="-445.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">router: R,</text>
<polyline fill="none" stroke="#1c2123" points="653,-437.5 901,-437.5 "/>
<text text-anchor="start" x="661" y="-422.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">snap_scheduler: Scheduler&lt;SnapTask&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="653,-414.5 901,-414.5 "/>
<text text-anchor="start" x="661" y="-399.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">lifetime: Option&lt;oneshot::Sender&lt;()&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="653,-391.5 901,-391.5 "/>
<text text-anchor="start" x="661" y="-376.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_id: u64,</text>
<polyline fill="none" stroke="#1c2123" points="653,-368.5 901,-368.5 "/>
<text text-anchor="start" x="661" y="-353.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">addr: String,</text>
</g>
<!-- StreamBackEnd&#45;&gt;RaftCall -->
<g id="edge27" class="edge">
<title>StreamBackEnd&#45;&gt;RaftCall</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M569.32,-543.45C592.88,-540.04 618.21,-536.37 642.79,-532.81"/>
<polygon fill="green" stroke="green" points="643.5,-536.24 652.9,-531.34 642.5,-529.31 643.5,-536.24"/>
</g>
<!-- StreamBackEnd&#45;&gt;ChannelBuilder -->
<g id="edge18" class="edge">
<title>StreamBackEnd&#45;&gt;ChannelBuilder</title>
<path fill="none" stroke="#666666" d="M569.39,-604.58C586.25,-614.46 602.81,-625.81 617,-638.5 638.22,-657.49 627.84,-678.17 653,-691.5 750.4,-743.09 804.3,-744.4 901,-691.5 988.32,-643.73 1039.51,-533.52 1063.73,-466.2"/>
<polygon fill="#666666" stroke="#666666" points="1067.1,-467.18 1067.11,-456.59 1060.49,-464.86 1067.1,-467.18"/>
</g>
<!-- PdStoreAddrResolver -->
<g id="node12" class="node">
<title>PdStoreAddrResolver</title>
<path fill="none" stroke="#1c2123" d="M1299,-229C1299,-229 1487,-229 1487,-229 1493,-229 1499,-235 1499,-241 1499,-241 1499,-278 1499,-278 1499,-284 1493,-290 1487,-290 1487,-290 1299,-290 1299,-290 1293,-290 1287,-284 1287,-278 1287,-278 1287,-241 1287,-241 1287,-235 1293,-229 1299,-229"/>
<text text-anchor="middle" x="1393" y="-274.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PdStoreAddrResolver</text>
<polyline fill="none" stroke="#1c2123" points="1287,-267 1499,-267 "/>
<text text-anchor="start" x="1295" y="-251.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">去Pd服务请求store_id对应的addr</text>
<text text-anchor="start" x="1295" y="-236.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> sched: Scheduler&lt;Task&gt;,</text>
</g>
<!-- StoreAddrResolver&#45;&gt;PdStoreAddrResolver -->
<g id="edge19" class="edge">
<title>StoreAddrResolver&#45;&gt;PdStoreAddrResolver</title>
<path fill="none" stroke="#666666" d="M1159.78,-236.95C1194.97,-240.37 1237.44,-244.49 1276.39,-248.28"/>
<polygon fill="#666666" stroke="#666666" points="1276.44,-251.8 1286.74,-249.28 1277.12,-244.83 1276.44,-251.8"/>
</g>
<!-- resolve_Task -->
<g id="node13" class="node">
<title>resolve_Task</title>
<path fill="none" stroke="#1c2123" d="M1604.5,-289.5C1604.5,-289.5 1747.5,-289.5 1747.5,-289.5 1753.5,-289.5 1759.5,-295.5 1759.5,-301.5 1759.5,-301.5 1759.5,-323.5 1759.5,-323.5 1759.5,-329.5 1753.5,-335.5 1747.5,-335.5 1747.5,-335.5 1604.5,-335.5 1604.5,-335.5 1598.5,-335.5 1592.5,-329.5 1592.5,-323.5 1592.5,-323.5 1592.5,-301.5 1592.5,-301.5 1592.5,-295.5 1598.5,-289.5 1604.5,-289.5"/>
<text text-anchor="middle" x="1676" y="-320.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve.rs/Task</text>
<polyline fill="none" stroke="#1c2123" points="1592.5,-312.5 1759.5,-312.5 "/>
<text text-anchor="middle" x="1676" y="-297.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_id: u64, cb: Callback,</text>
</g>
<!-- PdStoreAddrResolver&#45;&gt;resolve_Task -->
<g id="edge20" class="edge">
<title>PdStoreAddrResolver&#45;&gt;resolve_Task</title>
<path fill="none" stroke="#666666" d="M1499.03,-279.31C1526.4,-284.47 1555.69,-290 1582.37,-295.03"/>
<polygon fill="#666666" stroke="#666666" points="1581.98,-298.52 1592.45,-296.93 1583.28,-291.64 1581.98,-298.52"/>
</g>
<!-- Scheduler -->
<g id="node14" class="node">
<title>Scheduler</title>
<path fill="none" stroke="#1c2123" d="M1571,-140.5C1571,-140.5 1781,-140.5 1781,-140.5 1787,-140.5 1793,-146.5 1793,-152.5 1793,-152.5 1793,-258.5 1793,-258.5 1793,-264.5 1787,-270.5 1781,-270.5 1781,-270.5 1571,-270.5 1571,-270.5 1565,-270.5 1559,-264.5 1559,-258.5 1559,-258.5 1559,-152.5 1559,-152.5 1559,-146.5 1565,-140.5 1571,-140.5"/>
<text text-anchor="middle" x="1676" y="-255.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Scheduler</text>
<polyline fill="none" stroke="#1c2123" points="1559,-247.5 1793,-247.5 "/>
<text text-anchor="start" x="1567" y="-232.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用sender向worker线程发送task</text>
<text text-anchor="start" x="1567" y="-217.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> counter: Arc&lt;AtomicUsize&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1559,-209.5 1793,-209.5 "/>
<text text-anchor="start" x="1567" y="-194.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">sender: UnboundedSender&lt;Msg&lt;T&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1559,-186.5 1793,-186.5 "/>
<text text-anchor="start" x="1567" y="-171.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pending_capacity: usize,</text>
<polyline fill="none" stroke="#1c2123" points="1559,-163.5 1793,-163.5 "/>
<text text-anchor="start" x="1567" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">metrics_pending_task_count: IntGauge,</text>
</g>
<!-- PdStoreAddrResolver&#45;&gt;Scheduler -->
<g id="edge21" class="edge">
<title>PdStoreAddrResolver&#45;&gt;Scheduler</title>
<path fill="none" stroke="#666666" d="M1499.03,-239.32C1515.17,-236.21 1531.97,-232.99 1548.52,-229.81"/>
<polygon fill="#666666" stroke="#666666" points="1549.62,-233.16 1558.78,-227.83 1548.29,-226.29 1549.62,-233.16"/>
</g>
<!-- RaftCall&#45;&gt;Queue -->
<g id="edge23" class="edge">
<title>RaftCall&#45;&gt;Queue</title>
<path fill="none" stroke="#666666" d="M901.24,-628.2C925.74,-651 951.26,-674.75 975.12,-696.96"/>
<polygon fill="#666666" stroke="#666666" points="972.76,-699.55 982.47,-703.8 977.53,-694.42 972.76,-699.55"/>
</g>
<!-- RaftCall&#45;&gt;RaftStoreRouter -->
<g id="edge24" class="edge">
<title>RaftCall&#45;&gt;RaftStoreRouter</title>
<path fill="none" stroke="#666666" d="M901.02,-378.52C912.58,-369.9 924.62,-362.06 937,-355.5 962.14,-342.18 992.77,-335.15 1019.3,-331.46"/>
<polygon fill="#666666" stroke="#666666" points="1019.77,-334.93 1029.25,-330.21 1018.89,-327.99 1019.77,-334.93"/>
</g>
<!-- SecurityConfig -->
<g id="node17" class="node">
<title>SecurityConfig</title>
<path fill="none" stroke="#1c2123" d="M1337.5,-117.5C1337.5,-117.5 1448.5,-117.5 1448.5,-117.5 1454.5,-117.5 1460.5,-123.5 1460.5,-129.5 1460.5,-129.5 1460.5,-197.5 1460.5,-197.5 1460.5,-203.5 1454.5,-209.5 1448.5,-209.5 1448.5,-209.5 1337.5,-209.5 1337.5,-209.5 1331.5,-209.5 1325.5,-203.5 1325.5,-197.5 1325.5,-197.5 1325.5,-129.5 1325.5,-129.5 1325.5,-123.5 1331.5,-117.5 1337.5,-117.5"/>
<text text-anchor="middle" x="1393" y="-194.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SecurityConfig</text>
<polyline fill="none" stroke="#1c2123" points="1325.5,-186.5 1460.5,-186.5 "/>
<text text-anchor="start" x="1333.5" y="-171.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub ca_path: String,</text>
<polyline fill="none" stroke="#1c2123" points="1325.5,-163.5 1460.5,-163.5 "/>
<text text-anchor="start" x="1333.5" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub cert_path: String,</text>
<polyline fill="none" stroke="#1c2123" points="1325.5,-140.5 1460.5,-140.5 "/>
<text text-anchor="start" x="1333.5" y="-125.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub key_path: String,</text>
</g>
<!-- SecurityManager&#45;&gt;SecurityConfig -->
<g id="edge28" class="edge">
<title>SecurityManager&#45;&gt;SecurityConfig</title>
<path fill="none" stroke="#666666" d="M1137.18,-164.32C1186.55,-164.16 1260,-163.93 1315.38,-163.75"/>
<polygon fill="#666666" stroke="#666666" points="1315.51,-167.25 1325.5,-163.72 1315.49,-160.25 1315.51,-167.25"/>
</g>
<!-- ChannelBuilder&#45;&gt;Environment -->
<g id="edge29" class="edge">
<title>ChannelBuilder&#45;&gt;Environment</title>
<path fill="none" stroke="#666666" d="M1227.1,-397.91C1245.73,-396.28 1264.56,-394.64 1282.51,-393.07"/>
<polygon fill="#666666" stroke="#666666" points="1283.01,-396.54 1292.67,-392.18 1282.41,-389.56 1283.01,-396.54"/>
</g>
<!-- ThreadPool&#45;&gt;TaskCell -->
<g id="edge31" class="edge">
<title>ThreadPool&#45;&gt;TaskCell</title>
<path fill="none" stroke="#666666" d="M496.85,-398.33C530.42,-355.9 583.39,-284.25 617,-215.5 640.15,-168.15 614.74,-138.75 653,-102.5 657.68,-98.07 662.89,-94.23 668.45,-90.91"/>
<polygon fill="#666666" stroke="#666666" points="670.28,-93.9 677.45,-86.11 666.98,-87.73 670.28,-93.9"/>
</g>
<!-- ThreadPool&#45;&gt;RaftCall -->
<g id="edge30" class="edge">
<title>ThreadPool&#45;&gt;RaftCall</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M552.82,-458.15C580.82,-465.1 612.49,-472.95 643,-480.52"/>
<polygon fill="green" stroke="green" points="642.3,-483.95 652.85,-482.96 643.99,-477.16 642.3,-483.95"/>
</g>
</g>
</svg>
