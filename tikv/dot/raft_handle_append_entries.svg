<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: follower_handle_append_entries Pages: 1 -->
<svg width="1155pt" height="256pt"
 viewBox="0.00 0.00 1155.00 256.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 252)">
<title>follower_handle_append_entries</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-252 1151,-252 1151,4 -4,4"/>
<!-- RaftCore__step -->
<g id="node1" class="node">
<title>RaftCore__step</title>
<path fill="none" stroke="#1c2123" d="M89,-127C89,-127 12,-127 12,-127 6,-127 0,-121 0,-115 0,-115 0,-103 0,-103 0,-97 6,-91 12,-91 12,-91 89,-91 89,-91 95,-91 101,-97 101,-103 101,-103 101,-115 101,-115 101,-121 95,-127 89,-127"/>
<text text-anchor="middle" x="50.5" y="-105.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__step</text>
</g>
<!-- RaftCore__step_follower -->
<g id="node2" class="node">
<title>RaftCore__step_follower</title>
<path fill="none" stroke="#1c2123" d="M282,-154C282,-154 152,-154 152,-154 146,-154 140,-148 140,-142 140,-142 140,-130 140,-130 140,-124 146,-118 152,-118 152,-118 282,-118 282,-118 288,-118 294,-124 294,-130 294,-130 294,-142 294,-142 294,-148 288,-154 282,-154"/>
<text text-anchor="middle" x="217" y="-132.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__step_follower</text>
</g>
<!-- RaftCore__step&#45;&gt;RaftCore__step_follower -->
<g id="edge1" class="edge">
<title>RaftCore__step&#45;&gt;RaftCore__step_follower</title>
<path fill="none" stroke="#666666" d="M101.3,-117.17C110.36,-118.66 120.03,-120.25 129.79,-121.85"/>
<polygon fill="#666666" stroke="#666666" points="129.52,-125.35 139.95,-123.52 130.65,-118.44 129.52,-125.35"/>
</g>
<!-- RaftCore__step_candidate -->
<g id="node3" class="node">
<title>RaftCore__step_candidate</title>
<path fill="none" stroke="#1c2123" d="M285,-100C285,-100 149,-100 149,-100 143,-100 137,-94 137,-88 137,-88 137,-76 137,-76 137,-70 143,-64 149,-64 149,-64 285,-64 285,-64 291,-64 297,-70 297,-76 297,-76 297,-88 297,-88 297,-94 291,-100 285,-100"/>
<text text-anchor="middle" x="217" y="-78.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__step_candidate</text>
</g>
<!-- RaftCore__step&#45;&gt;RaftCore__step_candidate -->
<g id="edge2" class="edge">
<title>RaftCore__step&#45;&gt;RaftCore__step_candidate</title>
<path fill="none" stroke="#666666" d="M101.3,-100.83C109.48,-99.48 118.16,-98.06 126.95,-96.62"/>
<polygon fill="#666666" stroke="#666666" points="127.6,-100.06 136.9,-94.98 126.46,-93.15 127.6,-100.06"/>
</g>
<!-- RaftCore__handle_append_entries -->
<g id="node4" class="node">
<title>RaftCore__handle_append_entries</title>
<path fill="none" stroke="#1c2123" d="M525,-127C525,-127 345,-127 345,-127 339,-127 333,-121 333,-115 333,-115 333,-103 333,-103 333,-97 339,-91 345,-91 345,-91 525,-91 525,-91 531,-91 537,-97 537,-103 537,-103 537,-115 537,-115 537,-121 531,-127 525,-127"/>
<text text-anchor="middle" x="435" y="-105.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__handle_append_entries</text>
</g>
<!-- RaftCore__step_follower&#45;&gt;RaftCore__handle_append_entries -->
<g id="edge3" class="edge">
<title>RaftCore__step_follower&#45;&gt;RaftCore__handle_append_entries</title>
<path fill="none" stroke="#666666" d="M294.15,-126.48C303.44,-125.32 313.07,-124.12 322.73,-122.91"/>
<polygon fill="#666666" stroke="#666666" points="323.32,-126.36 332.8,-121.65 322.45,-119.42 323.32,-126.36"/>
</g>
<!-- RaftCore__election_elapsed -->
<g id="node5" class="node">
<title>RaftCore__election_elapsed</title>
<path fill="none" stroke="#1c2123" d="M508,-181C508,-181 362,-181 362,-181 356,-181 350,-175 350,-169 350,-169 350,-157 350,-157 350,-151 356,-145 362,-145 362,-145 508,-145 508,-145 514,-145 520,-151 520,-157 520,-157 520,-169 520,-169 520,-175 514,-181 508,-181"/>
<text text-anchor="middle" x="435" y="-159.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__election_elapsed</text>
</g>
<!-- RaftCore__step_follower&#45;&gt;RaftCore__election_elapsed -->
<g id="edge4" class="edge">
<title>RaftCore__step_follower&#45;&gt;RaftCore__election_elapsed</title>
<path fill="none" stroke="#666666" d="M294.15,-145.52C308.9,-147.36 324.52,-149.31 339.76,-151.22"/>
<polygon fill="#666666" stroke="#666666" points="339.35,-154.7 349.71,-152.46 340.22,-147.75 339.35,-154.7"/>
</g>
<!-- RaftCore__step_candidate&#45;&gt;RaftCore__handle_append_entries -->
<g id="edge5" class="edge">
<title>RaftCore__step_candidate&#45;&gt;RaftCore__handle_append_entries</title>
<path fill="none" stroke="#666666" d="M297.2,-91.9C305.51,-92.94 314.06,-94.01 322.65,-95.08"/>
<polygon fill="#666666" stroke="#666666" points="322.36,-98.57 332.72,-96.34 323.23,-91.63 322.36,-98.57"/>
</g>
<!-- RaftCore__become_follower -->
<g id="node6" class="node">
<title>RaftCore__become_follower</title>
<path fill="none" stroke="#1c2123" d="M510.5,-73C510.5,-73 359.5,-73 359.5,-73 353.5,-73 347.5,-67 347.5,-61 347.5,-61 347.5,-49 347.5,-49 347.5,-43 353.5,-37 359.5,-37 359.5,-37 510.5,-37 510.5,-37 516.5,-37 522.5,-43 522.5,-49 522.5,-49 522.5,-61 522.5,-61 522.5,-67 516.5,-73 510.5,-73"/>
<text text-anchor="middle" x="435" y="-51.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__become_follower</text>
</g>
<!-- RaftCore__step_candidate&#45;&gt;RaftCore__become_follower -->
<g id="edge6" class="edge">
<title>RaftCore__step_candidate&#45;&gt;RaftCore__become_follower</title>
<path fill="none" stroke="#666666" d="M297.2,-72.1C310.16,-70.48 323.71,-68.79 337.03,-67.12"/>
<polygon fill="#666666" stroke="#666666" points="337.67,-70.57 347.16,-65.86 336.8,-63.62 337.67,-70.57"/>
</g>
<!-- RaftLog__committed -->
<g id="node7" class="node">
<title>RaftLog__committed</title>
<path fill="none" stroke="#1c2123" d="M734.5,-240C734.5,-240 624.5,-240 624.5,-240 618.5,-240 612.5,-234 612.5,-228 612.5,-228 612.5,-216 612.5,-216 612.5,-210 618.5,-204 624.5,-204 624.5,-204 734.5,-204 734.5,-204 740.5,-204 746.5,-210 746.5,-216 746.5,-216 746.5,-228 746.5,-228 746.5,-234 740.5,-240 734.5,-240"/>
<text text-anchor="middle" x="679.5" y="-218.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog__committed</text>
</g>
<!-- RaftCore__handle_append_entries&#45;&gt;RaftLog__committed -->
<g id="edge7" class="edge">
<title>RaftCore__handle_append_entries&#45;&gt;RaftLog__committed</title>
<path fill="none" stroke="#666666" d="M522.44,-127.14C527.58,-129.71 532.48,-132.65 537,-136 561.37,-154.08 548.62,-175.95 573,-194 581.8,-200.52 592.01,-205.52 602.54,-209.36"/>
<polygon fill="#666666" stroke="#666666" points="601.67,-212.76 612.26,-212.57 603.86,-206.11 601.67,-212.76"/>
</g>
<!-- RaftLog__maybe_append -->
<g id="node8" class="node">
<title>RaftLog__maybe_append</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M585,-109C585,-109 774,-109 774,-109 780,-109 786,-115 786,-121 786,-121 786,-173 786,-173 786,-179 780,-185 774,-185 774,-185 585,-185 585,-185 579,-185 573,-179 573,-173 573,-173 573,-121 573,-121 573,-115 579,-109 585,-109"/>
<text text-anchor="middle" x="679.5" y="-169.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftLog__maybe_append</text>
<polyline fill="none" stroke="#8a8898" points="573,-162 786,-162 "/>
<text text-anchor="start" x="581" y="-146.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">如果idx的term和自己的term匹配</text>
<text text-anchor="start" x="581" y="-131.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 就append，否则就reject</text>
<text text-anchor="start" x="581" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 让leader重新发送AppendMsg</text>
</g>
<!-- RaftCore__handle_append_entries&#45;&gt;RaftLog__maybe_append -->
<g id="edge8" class="edge">
<title>RaftCore__handle_append_entries&#45;&gt;RaftLog__maybe_append</title>
<path fill="none" stroke="#666666" d="M537.09,-124.84C545.59,-126.17 554.22,-127.53 562.82,-128.87"/>
<polygon fill="#666666" stroke="#666666" points="562.47,-132.36 572.89,-130.45 563.55,-125.44 562.47,-132.36"/>
</g>
<!-- RaftLog__last_index -->
<g id="node9" class="node">
<title>RaftLog__last_index</title>
<path fill="none" stroke="#1c2123" d="M733,-90C733,-90 626,-90 626,-90 620,-90 614,-84 614,-78 614,-78 614,-66 614,-66 614,-60 620,-54 626,-54 626,-54 733,-54 733,-54 739,-54 745,-60 745,-66 745,-66 745,-78 745,-78 745,-84 739,-90 733,-90"/>
<text text-anchor="middle" x="679.5" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog__last_index</text>
</g>
<!-- RaftCore__handle_append_entries&#45;&gt;RaftLog__last_index -->
<g id="edge9" class="edge">
<title>RaftCore__handle_append_entries&#45;&gt;RaftLog__last_index</title>
<path fill="none" stroke="#666666" d="M537.09,-93.58C559.42,-90.17 582.7,-86.62 603.77,-83.4"/>
<polygon fill="#666666" stroke="#666666" points="604.56,-86.82 613.92,-81.85 603.5,-79.9 604.56,-86.82"/>
</g>
<!-- RaftCore__send -->
<g id="node10" class="node">
<title>RaftCore__send</title>
<path fill="none" stroke="#1c2123" d="M719.5,-36C719.5,-36 639.5,-36 639.5,-36 633.5,-36 627.5,-30 627.5,-24 627.5,-24 627.5,-12 627.5,-12 627.5,-6 633.5,0 639.5,0 639.5,0 719.5,0 719.5,0 725.5,0 731.5,-6 731.5,-12 731.5,-12 731.5,-24 731.5,-24 731.5,-30 725.5,-36 719.5,-36"/>
<text text-anchor="middle" x="679.5" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__send</text>
</g>
<!-- RaftCore__handle_append_entries&#45;&gt;RaftCore__send -->
<g id="edge10" class="edge">
<title>RaftCore__handle_append_entries&#45;&gt;RaftCore__send</title>
<path fill="none" stroke="#666666" d="M518.56,-90.98C524.98,-88.37 531.21,-85.4 537,-82 556.79,-70.4 553.14,-56.5 573,-45 586.56,-37.15 602.39,-31.55 617.6,-27.57"/>
<polygon fill="#666666" stroke="#666666" points="618.58,-30.94 627.48,-25.19 616.94,-24.13 618.58,-30.94"/>
</g>
<!-- RaftLog__mach_term -->
<g id="node11" class="node">
<title>RaftLog__mach_term</title>
<path fill="none" stroke="#1c2123" d="M950,-248C950,-248 837,-248 837,-248 831,-248 825,-242 825,-236 825,-236 825,-224 825,-224 825,-218 831,-212 837,-212 837,-212 950,-212 950,-212 956,-212 962,-218 962,-224 962,-224 962,-236 962,-236 962,-242 956,-248 950,-248"/>
<text text-anchor="middle" x="893.5" y="-226.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog__mach_term</text>
</g>
<!-- RaftLog__maybe_append&#45;&gt;RaftLog__mach_term -->
<g id="edge11" class="edge">
<title>RaftLog__maybe_append&#45;&gt;RaftLog__mach_term</title>
<path fill="none" stroke="#666666" d="M777.81,-185.1C798.11,-193.05 818.84,-201.16 836.99,-208.27"/>
<polygon fill="#666666" stroke="#666666" points="835.92,-211.61 846.51,-211.99 838.47,-205.09 835.92,-211.61"/>
</g>
<!-- RaftLog__find_conflict -->
<g id="node12" class="node">
<title>RaftLog__find_conflict</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M834,-157C834,-157 953,-157 953,-157 959,-157 965,-163 965,-169 965,-169 965,-181 965,-181 965,-187 959,-193 953,-193 953,-193 834,-193 834,-193 828,-193 822,-187 822,-181 822,-181 822,-169 822,-169 822,-163 828,-157 834,-157"/>
<text text-anchor="middle" x="893.5" y="-171.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftLog__find_conflict</text>
</g>
<!-- RaftLog__maybe_append&#45;&gt;RaftLog__find_conflict -->
<g id="edge12" class="edge">
<title>RaftLog__maybe_append&#45;&gt;RaftLog__find_conflict</title>
<path fill="none" stroke="#666666" d="M786.19,-160.96C794.82,-162.1 803.45,-163.24 811.85,-164.35"/>
<polygon fill="#666666" stroke="#666666" points="811.6,-167.85 821.97,-165.69 812.52,-160.91 811.6,-167.85"/>
</g>
<!-- RaftLog__append -->
<g id="node13" class="node">
<title>RaftLog__append</title>
<path fill="none" stroke="#1c2123" d="M938.5,-138C938.5,-138 848.5,-138 848.5,-138 842.5,-138 836.5,-132 836.5,-126 836.5,-126 836.5,-114 836.5,-114 836.5,-108 842.5,-102 848.5,-102 848.5,-102 938.5,-102 938.5,-102 944.5,-102 950.5,-108 950.5,-114 950.5,-114 950.5,-126 950.5,-126 950.5,-132 944.5,-138 938.5,-138"/>
<text text-anchor="middle" x="893.5" y="-116.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog__append</text>
</g>
<!-- RaftLog__maybe_append&#45;&gt;RaftLog__append -->
<g id="edge13" class="edge">
<title>RaftLog__maybe_append&#45;&gt;RaftLog__append</title>
<path fill="none" stroke="#666666" d="M786.19,-133.54C799.86,-131.8 813.53,-130.06 826.3,-128.43"/>
<polygon fill="#666666" stroke="#666666" points="826.86,-131.89 836.34,-127.15 825.97,-124.94 826.86,-131.89"/>
</g>
<!-- RaftLog__commit_to -->
<g id="node14" class="node">
<title>RaftLog__commit_to</title>
<path fill="none" stroke="#1c2123" d="M949,-84C949,-84 838,-84 838,-84 832,-84 826,-78 826,-72 826,-72 826,-60 826,-60 826,-54 832,-48 838,-48 838,-48 949,-48 949,-48 955,-48 961,-54 961,-60 961,-60 961,-72 961,-72 961,-78 955,-84 949,-84"/>
<text text-anchor="middle" x="893.5" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog__commit_to</text>
</g>
<!-- RaftLog__maybe_append&#45;&gt;RaftLog__commit_to -->
<g id="edge14" class="edge">
<title>RaftLog__maybe_append&#45;&gt;RaftLog__commit_to</title>
<path fill="none" stroke="#666666" d="M779.98,-108.99C799.23,-101.64 818.76,-94.18 836.03,-87.58"/>
<polygon fill="#666666" stroke="#666666" points="837.28,-90.85 845.37,-84.01 834.78,-84.31 837.28,-90.85"/>
</g>
<!-- RafftLog__match_term -->
<g id="node15" class="node">
<title>RafftLog__match_term</title>
<path fill="none" stroke="#1c2123" d="M1135,-193C1135,-193 1013,-193 1013,-193 1007,-193 1001,-187 1001,-181 1001,-181 1001,-169 1001,-169 1001,-163 1007,-157 1013,-157 1013,-157 1135,-157 1135,-157 1141,-157 1147,-163 1147,-169 1147,-169 1147,-181 1147,-181 1147,-187 1141,-193 1135,-193"/>
<text text-anchor="middle" x="1074" y="-171.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RafftLog__match_term</text>
</g>
<!-- RaftLog__find_conflict&#45;&gt;RafftLog__match_term -->
<g id="edge15" class="edge">
<title>RaftLog__find_conflict&#45;&gt;RafftLog__match_term</title>
<path fill="none" stroke="#666666" d="M965.05,-175C973.52,-175 982.23,-175 990.86,-175"/>
<polygon fill="#666666" stroke="#666666" points="990.92,-178.5 1000.92,-175 990.92,-171.5 990.92,-178.5"/>
</g>
</g>
</svg>
