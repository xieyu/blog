<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raft_hard_state Pages: 1 -->
<svg width="1590pt" height="462pt"
 viewBox="0.00 0.00 1590.00 462.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 458)">
<title>raft_hard_state</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-458 1586,-458 1586,4 -4,4"/>
<!-- RaftCore__term -->
<g id="node1" class="node">
<title>RaftCore__term</title>
<path fill="none" stroke="#1c2123" d="M1436.5,-332C1436.5,-332 1355.5,-332 1355.5,-332 1349.5,-332 1343.5,-326 1343.5,-320 1343.5,-320 1343.5,-308 1343.5,-308 1343.5,-302 1349.5,-296 1355.5,-296 1355.5,-296 1436.5,-296 1436.5,-296 1442.5,-296 1448.5,-302 1448.5,-308 1448.5,-308 1448.5,-320 1448.5,-320 1448.5,-326 1442.5,-332 1436.5,-332"/>
<text text-anchor="middle" x="1396" y="-310.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__term</text>
</g>
<!-- HardState -->
<g id="node3" class="node">
<title>HardState</title>
<path fill="none" stroke="#1c2123" d="M1570,-359C1570,-359 1523,-359 1523,-359 1517,-359 1511,-353 1511,-347 1511,-347 1511,-335 1511,-335 1511,-329 1517,-323 1523,-323 1523,-323 1570,-323 1570,-323 1576,-323 1582,-329 1582,-335 1582,-335 1582,-347 1582,-347 1582,-353 1576,-359 1570,-359"/>
<text text-anchor="middle" x="1546.5" y="-337.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">HardState</text>
</g>
<!-- RaftCore__term&#45;&gt;HardState -->
<g id="edge1" class="edge">
<title>RaftCore__term&#45;&gt;HardState</title>
<path fill="none" stroke="#666666" d="M1448.52,-323.37C1465.59,-326.47 1484.43,-329.9 1500.92,-332.9"/>
<polygon fill="#666666" stroke="#666666" points="1500.39,-336.36 1510.86,-334.7 1501.65,-329.47 1500.39,-336.36"/>
</g>
<!-- RaftCore__vote -->
<g id="node2" class="node">
<title>RaftCore__vote</title>
<path fill="none" stroke="#1c2123" d="M1435.5,-386C1435.5,-386 1356.5,-386 1356.5,-386 1350.5,-386 1344.5,-380 1344.5,-374 1344.5,-374 1344.5,-362 1344.5,-362 1344.5,-356 1350.5,-350 1356.5,-350 1356.5,-350 1435.5,-350 1435.5,-350 1441.5,-350 1447.5,-356 1447.5,-362 1447.5,-362 1447.5,-374 1447.5,-374 1447.5,-380 1441.5,-386 1435.5,-386"/>
<text text-anchor="middle" x="1396" y="-364.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__vote</text>
</g>
<!-- RaftCore__vote&#45;&gt;HardState -->
<g id="edge2" class="edge">
<title>RaftCore__vote&#45;&gt;HardState</title>
<path fill="none" stroke="#666666" d="M1447.69,-358.78C1464.95,-355.65 1484.1,-352.16 1500.84,-349.12"/>
<polygon fill="#666666" stroke="#666666" points="1501.71,-352.52 1510.92,-347.29 1500.46,-345.63 1501.71,-352.52"/>
</g>
<!-- RaftCore__reset -->
<g id="node4" class="node">
<title>RaftCore__reset</title>
<path fill="none" stroke="#1c2123" d="M1256.5,-332C1256.5,-332 1175.5,-332 1175.5,-332 1169.5,-332 1163.5,-326 1163.5,-320 1163.5,-320 1163.5,-308 1163.5,-308 1163.5,-302 1169.5,-296 1175.5,-296 1175.5,-296 1256.5,-296 1256.5,-296 1262.5,-296 1268.5,-302 1268.5,-308 1268.5,-308 1268.5,-320 1268.5,-320 1268.5,-326 1262.5,-332 1256.5,-332"/>
<text text-anchor="middle" x="1216" y="-310.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__reset</text>
</g>
<!-- RaftCore__reset&#45;&gt;RaftCore__term -->
<g id="edge3" class="edge">
<title>RaftCore__reset&#45;&gt;RaftCore__term</title>
<path fill="none" stroke="#666666" d="M1268.96,-314C1289.07,-314 1312.25,-314 1333.2,-314"/>
<polygon fill="#666666" stroke="#666666" points="1333.28,-317.5 1343.28,-314 1333.28,-310.5 1333.28,-317.5"/>
</g>
<!-- RaftCore__reset&#45;&gt;RaftCore__vote -->
<g id="edge4" class="edge">
<title>RaftCore__reset&#45;&gt;RaftCore__vote</title>
<path fill="none" stroke="#666666" d="M1268.96,-329.76C1289.52,-336 1313.28,-343.21 1334.6,-349.68"/>
<polygon fill="#666666" stroke="#666666" points="1333.61,-353.03 1344.2,-352.59 1335.65,-346.34 1333.61,-353.03"/>
</g>
<!-- RaftCore__leader_id -->
<g id="node5" class="node">
<title>RaftCore__leader_id</title>
<path fill="none" stroke="#1c2123" d="M1269,-270C1269,-270 1163,-270 1163,-270 1157,-270 1151,-264 1151,-258 1151,-258 1151,-246 1151,-246 1151,-240 1157,-234 1163,-234 1163,-234 1269,-234 1269,-234 1275,-234 1281,-240 1281,-246 1281,-246 1281,-258 1281,-258 1281,-264 1275,-270 1269,-270"/>
<text text-anchor="middle" x="1216" y="-248.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__leader_id</text>
</g>
<!-- SoftState -->
<g id="node7" class="node">
<title>SoftState</title>
<path fill="none" stroke="#1c2123" d="M1329,-192.5C1329,-192.5 1463,-192.5 1463,-192.5 1469,-192.5 1475,-198.5 1475,-204.5 1475,-204.5 1475,-241.5 1475,-241.5 1475,-247.5 1469,-253.5 1463,-253.5 1463,-253.5 1329,-253.5 1329,-253.5 1323,-253.5 1317,-247.5 1317,-241.5 1317,-241.5 1317,-204.5 1317,-204.5 1317,-198.5 1323,-192.5 1329,-192.5"/>
<text text-anchor="middle" x="1396" y="-238.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SoftState</text>
<polyline fill="none" stroke="#1c2123" points="1317,-230.5 1475,-230.5 "/>
<text text-anchor="start" x="1325" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.leader_id: u64;</text>
<text text-anchor="start" x="1325" y="-200.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> pub raft_state: StateRole,</text>
</g>
<!-- RaftCore__leader_id&#45;&gt;SoftState -->
<g id="edge5" class="edge">
<title>RaftCore__leader_id&#45;&gt;SoftState</title>
<path fill="none" stroke="#666666" d="M1281.01,-241.57C1289.48,-240.19 1298.28,-238.76 1307.07,-237.33"/>
<polygon fill="#666666" stroke="#666666" points="1307.66,-240.78 1316.97,-235.71 1306.54,-233.87 1307.66,-240.78"/>
</g>
<!-- RaftCore__state -->
<g id="node6" class="node">
<title>RaftCore__state</title>
<path fill="none" stroke="#1c2123" d="M1256,-216C1256,-216 1176,-216 1176,-216 1170,-216 1164,-210 1164,-204 1164,-204 1164,-192 1164,-192 1164,-186 1170,-180 1176,-180 1176,-180 1256,-180 1256,-180 1262,-180 1268,-186 1268,-192 1268,-192 1268,-204 1268,-204 1268,-210 1262,-216 1256,-216"/>
<text text-anchor="middle" x="1216" y="-194.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__state</text>
</g>
<!-- RaftCore__state&#45;&gt;SoftState -->
<g id="edge6" class="edge">
<title>RaftCore__state&#45;&gt;SoftState</title>
<path fill="none" stroke="#666666" d="M1268.01,-205.16C1280.12,-206.87 1293.4,-208.73 1306.65,-210.59"/>
<polygon fill="#666666" stroke="#666666" points="1306.37,-214.09 1316.76,-212.01 1307.34,-207.15 1306.37,-214.09"/>
</g>
<!-- RaftCore__become_leader -->
<g id="node8" class="node">
<title>RaftCore__become_leader</title>
<path fill="none" stroke="#1c2123" d="M925.5,-222.5C925.5,-222.5 1083.5,-222.5 1083.5,-222.5 1089.5,-222.5 1095.5,-228.5 1095.5,-234.5 1095.5,-234.5 1095.5,-279.5 1095.5,-279.5 1095.5,-285.5 1089.5,-291.5 1083.5,-291.5 1083.5,-291.5 925.5,-291.5 925.5,-291.5 919.5,-291.5 913.5,-285.5 913.5,-279.5 913.5,-279.5 913.5,-234.5 913.5,-234.5 913.5,-228.5 919.5,-222.5 925.5,-222.5"/>
<text text-anchor="middle" x="1004.5" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__become_leader</text>
<polyline fill="none" stroke="#1c2123" points="913.5,-268.5 1095.5,-268.5 "/>
<text text-anchor="start" x="921.5" y="-253.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.leader_id = self.id;</text>
<polyline fill="none" stroke="#1c2123" points="913.5,-245.5 1095.5,-245.5 "/>
<text text-anchor="start" x="921.5" y="-230.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.state = StateRole::Leader;</text>
</g>
<!-- RaftCore__become_leader&#45;&gt;RaftCore__reset -->
<g id="edge7" class="edge">
<title>RaftCore__become_leader&#45;&gt;RaftCore__reset</title>
<path fill="none" stroke="#666666" d="M1095.56,-281.5C1115.12,-286.82 1135.37,-292.34 1153.52,-297.27"/>
<polygon fill="#666666" stroke="#666666" points="1152.8,-300.71 1163.37,-299.95 1154.64,-293.95 1152.8,-300.71"/>
</g>
<!-- RaftCore__become_leader&#45;&gt;RaftCore__leader_id -->
<g id="edge20" class="edge">
<title>RaftCore__become_leader&#45;&gt;RaftCore__leader_id</title>
<path fill="none" stroke="#666666" d="M1095.56,-254.85C1110.7,-254.49 1126.26,-254.12 1140.93,-253.77"/>
<polygon fill="#666666" stroke="#666666" points="1141.02,-257.27 1150.93,-253.53 1140.85,-250.27 1141.02,-257.27"/>
</g>
<!-- RaftCore__become_leader&#45;&gt;RaftCore__state -->
<g id="edge21" class="edge">
<title>RaftCore__become_leader&#45;&gt;RaftCore__state</title>
<path fill="none" stroke="#666666" d="M1095.56,-231.64C1115.4,-226.05 1135.95,-220.26 1154.3,-215.1"/>
<polygon fill="#666666" stroke="#666666" points="1155.28,-218.45 1163.96,-212.37 1153.39,-211.72 1155.28,-218.45"/>
</g>
<!-- RaftCore__become_candidate -->
<g id="node9" class="node">
<title>RaftCore__become_candidate</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M915,-311C915,-311 1094,-311 1094,-311 1100,-311 1106,-317 1106,-323 1106,-323 1106,-413 1106,-413 1106,-419 1100,-425 1094,-425 1094,-425 915,-425 915,-425 909,-425 903,-419 903,-413 903,-413 903,-323 903,-323 903,-317 909,-311 915,-311"/>
<text text-anchor="middle" x="1004.5" y="-409.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftCore__become_candidate</text>
<polyline fill="none" stroke="#8a8898" points="903,-402 1106,-402 "/>
<text text-anchor="start" x="911" y="-386.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">self.term = term +1</text>
<text text-anchor="start" x="911" y="-371.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> elf.vote = id</text>
<text text-anchor="start" x="911" y="-356.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> self.state = StateRole::Candidate;</text>
<polyline fill="none" stroke="#8a8898" points="903,-349 1106,-349 "/>
<text text-anchor="start" x="911" y="-333.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">将term +1并且给自己投一票</text>
<text text-anchor="start" x="911" y="-318.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 将StateRole设置为Candidate</text>
</g>
<!-- RaftCore__become_candidate&#45;&gt;RaftCore__vote -->
<g id="edge19" class="edge">
<title>RaftCore__become_candidate&#45;&gt;RaftCore__vote</title>
<path fill="none" stroke="red" d="M1106.06,-368C1178.29,-368 1273.3,-368 1334.27,-368"/>
<polygon fill="red" stroke="red" points="1334.5,-371.5 1344.5,-368 1334.5,-364.5 1334.5,-371.5"/>
</g>
<!-- RaftCore__become_candidate&#45;&gt;RaftCore__reset -->
<g id="edge8" class="edge">
<title>RaftCore__become_candidate&#45;&gt;RaftCore__reset</title>
<path fill="none" stroke="#666666" d="M1106.26,-342.03C1122.36,-337.88 1138.58,-333.7 1153.41,-329.88"/>
<polygon fill="#666666" stroke="#666666" points="1154.62,-333.18 1163.43,-327.29 1152.87,-326.4 1154.62,-333.18"/>
</g>
<!-- RaftCore__become_candidate&#45;&gt;RaftCore__leader_id -->
<g id="edge22" class="edge">
<title>RaftCore__become_candidate&#45;&gt;RaftCore__leader_id</title>
<path fill="none" stroke="#666666" d="M1106.02,-311.91C1121.09,-303.54 1136.44,-295.03 1151,-287 1158.02,-283.13 1165.48,-279.03 1172.73,-275.06"/>
<polygon fill="#666666" stroke="#666666" points="1174.66,-277.99 1181.76,-270.12 1171.3,-271.85 1174.66,-277.99"/>
</g>
<!-- RaftCore__become_candidate&#45;&gt;RaftCore__state -->
<g id="edge23" class="edge">
<title>RaftCore__become_candidate&#45;&gt;RaftCore__state</title>
<path fill="none" stroke="#666666" d="M1105.25,-310.85C1108.68,-307.68 1111.95,-304.4 1115,-301 1139.98,-273.2 1124.01,-250.85 1151,-225 1152.44,-223.62 1153.95,-222.31 1155.54,-221.06"/>
<polygon fill="#666666" stroke="#666666" points="1157.63,-223.87 1163.91,-215.33 1153.68,-218.09 1157.63,-223.87"/>
</g>
<!-- RaftCore__become_follower -->
<g id="node10" class="node">
<title>RaftCore__become_follower</title>
<path fill="none" stroke="#1c2123" d="M920,-111C920,-111 1089,-111 1089,-111 1095,-111 1101,-117 1101,-123 1101,-123 1101,-191 1101,-191 1101,-197 1095,-203 1089,-203 1089,-203 920,-203 920,-203 914,-203 908,-197 908,-191 908,-191 908,-123 908,-123 908,-117 914,-111 920,-111"/>
<text text-anchor="middle" x="1004.5" y="-187.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__become_follower</text>
<polyline fill="none" stroke="#1c2123" points="908,-180 1101,-180 "/>
<text text-anchor="start" x="916" y="-164.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.reset(term);</text>
<polyline fill="none" stroke="#1c2123" points="908,-157 1101,-157 "/>
<text text-anchor="start" x="916" y="-141.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.leader_id = leader_id;</text>
<polyline fill="none" stroke="#1c2123" points="908,-134 1101,-134 "/>
<text text-anchor="start" x="916" y="-118.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.state = StateRole::Follower;</text>
</g>
<!-- RaftCore__become_follower&#45;&gt;RaftCore__reset -->
<g id="edge9" class="edge">
<title>RaftCore__become_follower&#45;&gt;RaftCore__reset</title>
<path fill="none" stroke="#666666" d="M1101.16,-201.21C1106.06,-204.9 1110.72,-208.83 1115,-213 1138.94,-236.31 1127.39,-255.36 1151,-279 1155.19,-283.19 1159.98,-287.02 1165.01,-290.47"/>
<polygon fill="#666666" stroke="#666666" points="1163.34,-293.55 1173.66,-295.94 1167.08,-287.64 1163.34,-293.55"/>
</g>
<!-- RaftCore__become_follower&#45;&gt;RaftCore__leader_id -->
<g id="edge24" class="edge">
<title>RaftCore__become_follower&#45;&gt;RaftCore__leader_id</title>
<path fill="none" stroke="#666666" d="M1101.14,-202.33C1117.71,-210 1134.82,-217.81 1151,-225 1154.62,-226.61 1158.36,-228.25 1162.13,-229.88"/>
<polygon fill="#666666" stroke="#666666" points="1160.96,-233.19 1171.53,-233.92 1163.72,-226.76 1160.96,-233.19"/>
</g>
<!-- RaftCore__become_follower&#45;&gt;RaftCore__state -->
<g id="edge25" class="edge">
<title>RaftCore__become_follower&#45;&gt;RaftCore__state</title>
<path fill="none" stroke="#666666" d="M1101.05,-175.7C1119.02,-179.22 1137.34,-182.8 1153.9,-186.04"/>
<polygon fill="#666666" stroke="#666666" points="1153.47,-189.53 1163.96,-188.01 1154.82,-182.66 1153.47,-189.53"/>
</g>
<!-- RaftCore__poll -->
<g id="node11" class="node">
<title>RaftCore__poll</title>
<path fill="none" stroke="#1c2123" d="M540,-246C540,-246 677,-246 677,-246 683,-246 689,-252 689,-258 689,-258 689,-348 689,-348 689,-354 683,-360 677,-360 677,-360 540,-360 540,-360 534,-360 528,-354 528,-348 528,-348 528,-258 528,-258 528,-252 534,-246 540,-246"/>
<text text-anchor="middle" x="608.5" y="-344.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__poll</text>
<polyline fill="none" stroke="#1c2123" points="528,-337 689,-337 "/>
<text text-anchor="start" x="536" y="-321.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果赢得了PreCandidate</text>
<text text-anchor="start" x="536" y="-306.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 就再次发起campaign</text>
<text text-anchor="start" x="536" y="-291.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 开始ELECTION</text>
<polyline fill="none" stroke="#1c2123" points="528,-284 689,-284 "/>
<text text-anchor="start" x="536" y="-268.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果赢得了ELECTION</text>
<text text-anchor="start" x="536" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 就become leader</text>
</g>
<!-- RaftCore__poll&#45;&gt;RaftCore__become_leader -->
<g id="edge10" class="edge">
<title>RaftCore__poll&#45;&gt;RaftCore__become_leader</title>
<path fill="none" stroke="#666666" d="M689.02,-282.64C701.01,-280.09 713.29,-277.76 725,-276 783.76,-267.19 850.11,-262.46 903.31,-259.92"/>
<polygon fill="#666666" stroke="#666666" points="903.59,-263.41 913.42,-259.46 903.27,-256.42 903.59,-263.41"/>
</g>
<!-- RaftCore__campaign -->
<g id="node12" class="node">
<title>RaftCore__campaign</title>
<path fill="none" stroke="#1c2123" d="M846,-321C846,-321 737,-321 737,-321 731,-321 725,-315 725,-309 725,-309 725,-297 725,-297 725,-291 731,-285 737,-285 737,-285 846,-285 846,-285 852,-285 858,-291 858,-297 858,-297 858,-309 858,-309 858,-315 852,-321 846,-321"/>
<text text-anchor="middle" x="791.5" y="-299.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__campaign</text>
</g>
<!-- RaftCore__poll&#45;&gt;RaftCore__campaign -->
<g id="edge11" class="edge">
<title>RaftCore__poll&#45;&gt;RaftCore__campaign</title>
<path fill="none" stroke="#666666" d="M689.15,-296.29C697.65,-296.23 706.27,-296.24 714.72,-296.33"/>
<polygon fill="#666666" stroke="#666666" points="714.87,-299.83 724.92,-296.48 714.98,-292.83 714.87,-299.83"/>
</g>
<!-- RaftCore__campaign&#45;&gt;RaftCore__become_candidate -->
<g id="edge13" class="edge">
<title>RaftCore__campaign&#45;&gt;RaftCore__become_candidate</title>
<path fill="none" stroke="#666666" d="M851,-321.02C864.2,-325.09 878.64,-329.54 893.21,-334.02"/>
<polygon fill="#666666" stroke="#666666" points="892.19,-337.37 902.78,-336.97 894.26,-330.68 892.19,-337.37"/>
</g>
<!-- RaftCore__campaign&#45;&gt;RaftCore__poll -->
<g id="edge14" class="edge">
<title>RaftCore__campaign&#45;&gt;RaftCore__poll</title>
<path fill="none" stroke="#666666" d="M724.92,-309.52C716.58,-309.68 707.92,-309.75 699.28,-309.75"/>
<polygon fill="#666666" stroke="#666666" points="699.17,-306.25 689.15,-309.71 699.14,-313.25 699.17,-306.25"/>
</g>
<!-- RaftCore__become_pre_candidate -->
<g id="node14" class="node">
<title>RaftCore__become_pre_candidate</title>
<path fill="none" stroke="#1c2123" d="M906,-0.5C906,-0.5 1103,-0.5 1103,-0.5 1109,-0.5 1115,-6.5 1115,-12.5 1115,-12.5 1115,-79.5 1115,-79.5 1115,-85.5 1109,-91.5 1103,-91.5 1103,-91.5 906,-91.5 906,-91.5 900,-91.5 894,-85.5 894,-79.5 894,-79.5 894,-12.5 894,-12.5 894,-6.5 900,-0.5 906,-0.5"/>
<text text-anchor="middle" x="1004.5" y="-76.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__become_pre_candidate</text>
<polyline fill="none" stroke="#1c2123" points="894,-68.5 1115,-68.5 "/>
<text text-anchor="start" x="902" y="-53.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">角色设置为PreCandidate</text>
<text text-anchor="start" x="902" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.state = StateRole::PreCandidate;</text>
<text text-anchor="start" x="902" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.leader_id = INVALID_ID;</text>
<text text-anchor="start" x="902" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.prs.reset_votes();</text>
</g>
<!-- RaftCore__campaign&#45;&gt;RaftCore__become_pre_candidate -->
<g id="edge15" class="edge">
<title>RaftCore__campaign&#45;&gt;RaftCore__become_pre_candidate</title>
<path fill="none" stroke="#666666" d="M797.39,-284.76C808.54,-246.28 839.18,-155.81 894,-101 894.93,-100.07 895.88,-99.15 896.85,-98.25"/>
<polygon fill="#666666" stroke="#666666" points="899.31,-100.75 904.58,-91.56 894.73,-95.45 899.31,-100.75"/>
</g>
<!-- RaftCore__step_candidate -->
<g id="node13" class="node">
<title>RaftCore__step_candidate</title>
<path fill="none" stroke="#1c2123" d="M480,-321C480,-321 344,-321 344,-321 338,-321 332,-315 332,-309 332,-309 332,-297 332,-297 332,-291 338,-285 344,-285 344,-285 480,-285 480,-285 486,-285 492,-291 492,-297 492,-297 492,-309 492,-309 492,-315 486,-321 480,-321"/>
<text text-anchor="middle" x="412" y="-299.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__step_candidate</text>
</g>
<!-- RaftCore__step_candidate&#45;&gt;RaftCore__poll -->
<g id="edge12" class="edge">
<title>RaftCore__step_candidate&#45;&gt;RaftCore__poll</title>
<path fill="none" stroke="#666666" d="M492.11,-303C500.58,-303 509.23,-303 517.81,-303"/>
<polygon fill="#666666" stroke="#666666" points="517.83,-306.5 527.83,-303 517.83,-299.5 517.83,-306.5"/>
</g>
<!-- RaftCore__become_pre_candidate&#45;&gt;RaftCore__leader_id -->
<g id="edge26" class="edge">
<title>RaftCore__become_pre_candidate&#45;&gt;RaftCore__leader_id</title>
<path fill="none" stroke="#666666" d="M1106.16,-91.71C1109.31,-94.63 1112.28,-97.73 1115,-101 1151.7,-145.12 1112.86,-182.12 1151,-225 1151.74,-225.83 1152.51,-226.64 1153.31,-227.43"/>
<polygon fill="#666666" stroke="#666666" points="1151.19,-230.21 1161.14,-233.85 1155.63,-224.8 1151.19,-230.21"/>
</g>
<!-- RaftCore__become_pre_candidate&#45;&gt;RaftCore__state -->
<g id="edge27" class="edge">
<title>RaftCore__become_pre_candidate&#45;&gt;RaftCore__state</title>
<path fill="none" stroke="#666666" d="M1100.92,-91.65C1105.77,-94.68 1110.49,-97.8 1115,-101 1144.37,-121.87 1173.42,-151.3 1192.58,-172.26"/>
<polygon fill="#666666" stroke="#666666" points="1190.12,-174.76 1199.42,-179.84 1195.32,-170.07 1190.12,-174.76"/>
</g>
<!-- RaftCore__step -->
<g id="node15" class="node">
<title>RaftCore__step</title>
<path fill="none" stroke="#1c2123" d="M12,-223.5C12,-223.5 284,-223.5 284,-223.5 290,-223.5 296,-229.5 296,-235.5 296,-235.5 296,-370.5 296,-370.5 296,-376.5 290,-382.5 284,-382.5 284,-382.5 12,-382.5 12,-382.5 6,-382.5 0,-376.5 0,-370.5 0,-370.5 0,-235.5 0,-235.5 0,-229.5 6,-223.5 12,-223.5"/>
<text text-anchor="middle" x="148" y="-367.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__step</text>
<polyline fill="none" stroke="#1c2123" points="0,-359.5 296,-359.5 "/>
<text text-anchor="start" x="8" y="-344.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">收到的msg(MsgAppend, </text>
<text text-anchor="start" x="8" y="-329.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> MsgHeartbeat, MsgSnapshot)</text>
<text text-anchor="start" x="8" y="-314.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> term比自己大,成为它的follower</text>
<polyline fill="none" stroke="#1c2123" points="0,-306.5 296,-306.5 "/>
<text text-anchor="start" x="8" y="-291.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">收到MsgRequestVote</text>
<text text-anchor="start" x="8" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 且经过检查, is_up_to_date且</text>
<text text-anchor="start" x="8" y="-261.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> m.index &gt; self.raft_log.last_index 则给它投一票</text>
<text text-anchor="start" x="8" y="-246.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.election_elapsed = 0;</text>
<text text-anchor="start" x="8" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.vote = m.from;</text>
</g>
<!-- RaftCore__step&#45;&gt;RaftCore__vote -->
<g id="edge18" class="edge">
<title>RaftCore__step&#45;&gt;RaftCore__vote</title>
<path fill="none" stroke="red" d="M296.26,-377.84C384.26,-415.81 499.6,-454 607.5,-454 607.5,-454 607.5,-454 1005.5,-454 1125.13,-454 1260.66,-414.84 1336.16,-389.37"/>
<polygon fill="red" stroke="red" points="1337.63,-392.57 1345.96,-386.03 1335.37,-385.94 1337.63,-392.57"/>
</g>
<!-- RaftCore__step&#45;&gt;RaftCore__become_follower -->
<g id="edge16" class="edge">
<title>RaftCore__step&#45;&gt;RaftCore__become_follower</title>
<path fill="none" stroke="#666666" d="M296.07,-276.64C366.26,-264.15 451.44,-249.13 528,-236 655.06,-214.21 801.38,-190.04 897.78,-174.24"/>
<polygon fill="#666666" stroke="#666666" points="898.52,-177.67 907.82,-172.6 897.39,-170.76 898.52,-177.67"/>
</g>
<!-- RaftCore__step&#45;&gt;RaftCore__step_candidate -->
<g id="edge17" class="edge">
<title>RaftCore__step&#45;&gt;RaftCore__step_candidate</title>
<path fill="none" stroke="#666666" d="M296.08,-303C304.79,-303 313.4,-303 321.76,-303"/>
<polygon fill="#666666" stroke="#666666" points="321.82,-306.5 331.82,-303 321.82,-299.5 321.82,-306.5"/>
</g>
</g>
</svg>
