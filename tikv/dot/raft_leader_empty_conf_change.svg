<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raft_leader_empty_conf_change Pages: 1 -->
<svg width="833pt" height="172pt"
 viewBox="0.00 0.00 833.00 172.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 168)">
<title>raft_leader_empty_conf_change</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-168 829,-168 829,4 -4,4"/>
<!-- RawNode__advance -->
<g id="node1" class="node">
<title>RawNode__advance</title>
<path fill="none" stroke="#1c2123" d="M116,-137C116,-137 12,-137 12,-137 6,-137 0,-131 0,-125 0,-125 0,-113 0,-113 0,-107 6,-101 12,-101 12,-101 116,-101 116,-101 122,-101 128,-107 128,-113 128,-113 128,-125 128,-125 128,-131 122,-137 116,-137"/>
<text text-anchor="middle" x="64" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode__advance</text>
</g>
<!-- RawNode__advance_apend -->
<g id="node2" class="node">
<title>RawNode__advance_apend</title>
<path fill="none" stroke="#1c2123" d="M326.5,-164C326.5,-164 183.5,-164 183.5,-164 177.5,-164 171.5,-158 171.5,-152 171.5,-152 171.5,-140 171.5,-140 171.5,-134 177.5,-128 183.5,-128 183.5,-128 326.5,-128 326.5,-128 332.5,-128 338.5,-134 338.5,-140 338.5,-140 338.5,-152 338.5,-152 338.5,-158 332.5,-164 326.5,-164"/>
<text text-anchor="middle" x="255" y="-142.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode__advance_apend</text>
</g>
<!-- RawNode__advance&#45;&gt;RawNode__advance_apend -->
<g id="edge1" class="edge">
<title>RawNode__advance&#45;&gt;RawNode__advance_apend</title>
<path fill="none" stroke="#666666" d="M128.2,-128.03C138.8,-129.54 149.99,-131.14 161.15,-132.74"/>
<polygon fill="#666666" stroke="#666666" points="160.98,-136.25 171.37,-134.2 161.97,-129.32 160.98,-136.25"/>
</g>
<!-- RawNode__advance_apply_to -->
<g id="node3" class="node">
<title>RawNode__advance_apply_to</title>
<path fill="none" stroke="#1c2123" d="M334,-110C334,-110 176,-110 176,-110 170,-110 164,-104 164,-98 164,-98 164,-86 164,-86 164,-80 170,-74 176,-74 176,-74 334,-74 334,-74 340,-74 346,-80 346,-86 346,-86 346,-98 346,-98 346,-104 340,-110 334,-110"/>
<text text-anchor="middle" x="255" y="-88.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode__advance_apply_to</text>
</g>
<!-- RawNode__advance&#45;&gt;RawNode__advance_apply_to -->
<g id="edge2" class="edge">
<title>RawNode__advance&#45;&gt;RawNode__advance_apply_to</title>
<path fill="none" stroke="#666666" d="M128.2,-109.97C136.54,-108.78 145.25,-107.54 154.02,-106.28"/>
<polygon fill="#666666" stroke="#666666" points="154.53,-109.75 163.94,-104.87 153.54,-102.82 154.53,-109.75"/>
</g>
<!-- RaftCore__commit_apply -->
<g id="node4" class="node">
<title>RaftCore__commit_apply</title>
<path fill="none" stroke="#1c2123" d="M394,-0.5C394,-0.5 585,-0.5 585,-0.5 591,-0.5 597,-6.5 597,-12.5 597,-12.5 597,-117.5 597,-117.5 597,-123.5 591,-129.5 585,-129.5 585,-129.5 394,-129.5 394,-129.5 388,-129.5 382,-123.5 382,-117.5 382,-117.5 382,-12.5 382,-12.5 382,-6.5 388,-0.5 394,-0.5"/>
<text text-anchor="middle" x="489.5" y="-114.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore__commit_apply</text>
<polyline fill="none" stroke="#1c2123" points="382,-106.5 597,-106.5 "/>
<text text-anchor="start" x="390" y="-91.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果本次被apply的log entry中</text>
<text text-anchor="start" x="390" y="-76.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 包含EntryConfChange</text>
<text text-anchor="start" x="390" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 且开启了auto_leave</text>
<text text-anchor="start" x="390" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 且当前节点是leader</text>
<polyline fill="none" stroke="#1c2123" points="382,-38.5 597,-38.5 "/>
<text text-anchor="start" x="390" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">则插入一个空的EntryConfChange</text>
<text text-anchor="start" x="390" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 消息到日志中</text>
</g>
<!-- RawNode__advance_apply_to&#45;&gt;RaftCore__commit_apply -->
<g id="edge3" class="edge">
<title>RawNode__advance_apply_to&#45;&gt;RaftCore__commit_apply</title>
<path fill="none" stroke="#666666" d="M346.22,-81.52C354.57,-80.55 363.11,-79.56 371.65,-78.57"/>
<polygon fill="#666666" stroke="#666666" points="372.14,-82.04 381.67,-77.41 371.33,-75.08 372.14,-82.04"/>
</g>
<!-- RaftLog__applied -->
<g id="node6" class="node">
<title>RaftLog__applied</title>
<path fill="none" stroke="#1c2123" d="M667.5,-115C667.5,-115 790.5,-115 790.5,-115 796.5,-115 802.5,-121 802.5,-127 802.5,-127 802.5,-149 802.5,-149 802.5,-155 796.5,-161 790.5,-161 790.5,-161 667.5,-161 667.5,-161 661.5,-161 655.5,-155 655.5,-149 655.5,-149 655.5,-127 655.5,-127 655.5,-121 661.5,-115 667.5,-115"/>
<text text-anchor="middle" x="729" y="-145.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog__applied</text>
<polyline fill="none" stroke="#1c2123" points="655.5,-138 802.5,-138 "/>
<text text-anchor="start" x="663.5" y="-122.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">记录已经applied index</text>
</g>
<!-- RaftCore__commit_apply&#45;&gt;RaftLog__applied -->
<g id="edge5" class="edge">
<title>RaftCore__commit_apply&#45;&gt;RaftLog__applied</title>
<path fill="none" stroke="#666666" d="M597.09,-97.76C613.43,-102.79 630.08,-107.9 645.79,-112.73"/>
<polygon fill="#666666" stroke="#666666" points="644.84,-116.1 655.43,-115.69 646.9,-109.41 644.84,-116.1"/>
</g>
<!-- RaftCore__pending_conf_index -->
<g id="node7" class="node">
<title>RaftCore__pending_conf_index</title>
<path fill="#feed9b" stroke="#f7e495" d="M645,-34.5C645,-34.5 813,-34.5 813,-34.5 819,-34.5 825,-40.5 825,-46.5 825,-46.5 825,-83.5 825,-83.5 825,-89.5 819,-95.5 813,-95.5 813,-95.5 645,-95.5 645,-95.5 639,-95.5 633,-89.5 633,-83.5 633,-83.5 633,-46.5 633,-46.5 633,-40.5 639,-34.5 645,-34.5"/>
<text text-anchor="middle" x="729" y="-80.3" font-family="Times,serif" font-size="14.00" fill="#40575d">RaftCore__pending_conf_index</text>
<polyline fill="none" stroke="#f7e495" points="633,-72.5 825,-72.5 "/>
<text text-anchor="start" x="641" y="-57.3" font-family="Times,serif" font-size="14.00" fill="#40575d">记录当前conf change log entry</text>
<text text-anchor="start" x="641" y="-42.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> 的index</text>
</g>
<!-- RaftCore__commit_apply&#45;&gt;RaftCore__pending_conf_index -->
<g id="edge6" class="edge">
<title>RaftCore__commit_apply&#45;&gt;RaftCore__pending_conf_index</title>
<path fill="none" stroke="#666666" d="M597.09,-58.28C605.69,-58.24 614.37,-58.24 622.96,-58.29"/>
<polygon fill="#666666" stroke="#666666" points="622.96,-61.79 632.98,-58.37 623.01,-54.79 622.96,-61.79"/>
</g>
<!-- RaftCore__commit_apply&#45;&gt;RaftCore__pending_conf_index -->
<g id="edge7" class="edge">
<title>RaftCore__commit_apply&#45;&gt;RaftCore__pending_conf_index</title>
<path fill="none" stroke="#666666" d="M597.09,-71.72C605.69,-71.76 614.37,-71.76 622.96,-71.71"/>
<polygon fill="#666666" stroke="#666666" points="623.01,-75.21 632.98,-71.63 622.96,-68.21 623.01,-75.21"/>
</g>
<!-- RawNode__advance_apply -->
<g id="node5" class="node">
<title>RawNode__advance_apply</title>
<path fill="none" stroke="#1c2123" d="M325.5,-56C325.5,-56 184.5,-56 184.5,-56 178.5,-56 172.5,-50 172.5,-44 172.5,-44 172.5,-32 172.5,-32 172.5,-26 178.5,-20 184.5,-20 184.5,-20 325.5,-20 325.5,-20 331.5,-20 337.5,-26 337.5,-32 337.5,-32 337.5,-44 337.5,-44 337.5,-50 331.5,-56 325.5,-56"/>
<text text-anchor="middle" x="255" y="-34.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode__advance_apply</text>
</g>
<!-- RawNode__advance_apply&#45;&gt;RaftCore__commit_apply -->
<g id="edge4" class="edge">
<title>RawNode__advance_apply&#45;&gt;RaftCore__commit_apply</title>
<path fill="none" stroke="#666666" d="M337.64,-47.48C348.67,-48.76 360.16,-50.1 371.66,-51.43"/>
<polygon fill="#666666" stroke="#666666" points="371.42,-54.93 381.75,-52.6 372.22,-47.97 371.42,-54.93"/>
</g>
</g>
</svg>
