<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: raft_log_batch Pages: 1 -->
<svg width="864pt" height="414pt"
 viewBox="0.00 0.00 864.00 414.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 410)">
<title>raft_log_batch</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-410 860,-410 860,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_RaftLogBatch</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-260C20,-260 367,-260 367,-260 373,-260 379,-266 379,-272 379,-272 379,-386 379,-386 379,-392 373,-398 367,-398 367,-398 20,-398 20,-398 14,-398 8,-392 8,-386 8,-386 8,-272 8,-272 8,-266 14,-260 20,-260"/>
<text text-anchor="middle" x="193.5" y="-378" font-family="Times,serif" font-size="20.00">RaftLogBatch</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_WriteBatch</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M693,-61C693,-61 844,-61 844,-61 850,-61 856,-67 856,-73 856,-73 856,-133 856,-133 856,-139 850,-145 844,-145 844,-145 693,-145 693,-145 687,-145 681,-139 681,-133 681,-133 681,-73 681,-73 681,-67 687,-61 693,-61"/>
<text text-anchor="middle" x="768.5" y="-125" font-family="Times,serif" font-size="20.00">rocksdb/WriteBatch</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_RocksWriteBatch</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M167.5,-8C167.5,-8 649,-8 649,-8 655,-8 661,-14 661,-20 661,-20 661,-240 661,-240 661,-246 655,-252 649,-252 649,-252 167.5,-252 167.5,-252 161.5,-252 155.5,-246 155.5,-240 155.5,-240 155.5,-20 155.5,-20 155.5,-14 161.5,-8 167.5,-8"/>
<text text-anchor="middle" x="408.25" y="-232" font-family="Times,serif" font-size="20.00">RocksWriteBatch</text>
</g>
<!-- RaftLogBatch_append -->
<g id="node1" class="node">
<title>RaftLogBatch_append</title>
<path fill="none" stroke="#1c2123" d="M28,-269C28,-269 60,-269 60,-269 66,-269 72,-275 72,-281 72,-281 72,-293 72,-293 72,-299 66,-305 60,-305 60,-305 28,-305 28,-305 22,-305 16,-299 16,-293 16,-293 16,-281 16,-281 16,-275 22,-269 28,-269"/>
<text text-anchor="middle" x="44" y="-283.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">append</text>
</g>
<!-- RocksWriteBatch_append -->
<g id="node4" class="node">
<title>RocksWriteBatch_append</title>
<path fill="none" stroke="#1c2123" d="M175.5,-141C175.5,-141 303.5,-141 303.5,-141 309.5,-141 315.5,-147 315.5,-153 315.5,-153 315.5,-175 315.5,-175 315.5,-181 309.5,-187 303.5,-187 303.5,-187 175.5,-187 175.5,-187 169.5,-187 163.5,-181 163.5,-175 163.5,-175 163.5,-153 163.5,-153 163.5,-147 169.5,-141 175.5,-141"/>
<text text-anchor="middle" x="239.5" y="-171.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">append</text>
<polyline fill="none" stroke="#1c2123" points="163.5,-164 315.5,-164 "/>
<text text-anchor="start" x="171.5" y="-148.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将数据写入write_batch</text>
</g>
<!-- RaftLogBatch_append&#45;&gt;RocksWriteBatch_append -->
<g id="edge1" class="edge">
<title>RaftLogBatch_append&#45;&gt;RocksWriteBatch_append</title>
<path fill="none" stroke="#666666" d="M72.31,-269.64C103.75,-249.65 155.87,-216.52 193.37,-192.69"/>
<polygon fill="#666666" stroke="#666666" points="195.52,-195.47 202.08,-187.15 191.77,-189.56 195.52,-195.47"/>
</g>
<!-- RaftLogBatch_cut_logs -->
<g id="node2" class="node">
<title>RaftLogBatch_cut_logs</title>
<path fill="none" stroke="#1c2123" d="M120,-268.5C120,-268.5 359,-268.5 359,-268.5 365,-268.5 371,-274.5 371,-280.5 371,-280.5 371,-347.5 371,-347.5 371,-353.5 365,-359.5 359,-359.5 359,-359.5 120,-359.5 120,-359.5 114,-359.5 108,-353.5 108,-347.5 108,-347.5 108,-280.5 108,-280.5 108,-274.5 114,-268.5 120,-268.5"/>
<text text-anchor="middle" x="239.5" y="-344.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cut_logs</text>
<polyline fill="none" stroke="#1c2123" points="108,-336.5 371,-336.5 "/>
<text text-anchor="start" x="116" y="-321.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cut_Logs(region_id,</text>
<text text-anchor="start" x="116" y="-306.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> last_index + 1,</text>
<text text-anchor="start" x="116" y="-291.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> prev_last_index) delete any previous append</text>
<text text-anchor="start" x="116" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> log entries which never committed</text>
</g>
<!-- RocksWriteBatch_cut_logs -->
<g id="node5" class="node">
<title>RocksWriteBatch_cut_logs</title>
<path fill="none" stroke="#1c2123" d="M432,-177C432,-177 470,-177 470,-177 476,-177 482,-183 482,-189 482,-189 482,-201 482,-201 482,-207 476,-213 470,-213 470,-213 432,-213 432,-213 426,-213 420,-207 420,-201 420,-201 420,-189 420,-189 420,-183 426,-177 432,-177"/>
<text text-anchor="middle" x="451" y="-191.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cut_logs</text>
</g>
<!-- RaftLogBatch_cut_logs&#45;&gt;RocksWriteBatch_cut_logs -->
<g id="edge2" class="edge">
<title>RaftLogBatch_cut_logs&#45;&gt;RocksWriteBatch_cut_logs</title>
<path fill="none" stroke="#666666" d="M357.11,-268.37C364.65,-264.45 372.01,-260.31 379,-256 395.37,-245.89 411.79,-232.08 424.71,-220.16"/>
<polygon fill="#666666" stroke="#666666" points="427.4,-222.43 432.27,-213.03 422.59,-217.34 427.4,-222.43"/>
</g>
<!-- WriteBatch_put -->
<g id="node3" class="node">
<title>WriteBatch_put</title>
<path fill="none" stroke="#1c2123" d="M753,-70C753,-70 783,-70 783,-70 789,-70 795,-76 795,-82 795,-82 795,-94 795,-94 795,-100 789,-106 783,-106 783,-106 753,-106 753,-106 747,-106 741,-100 741,-94 741,-94 741,-82 741,-82 741,-76 747,-70 753,-70"/>
<text text-anchor="middle" x="768" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">put</text>
</g>
<!-- append_impl -->
<g id="node6" class="node">
<title>append_impl</title>
<path fill="none" stroke="#1c2123" d="M483,-131C483,-131 419,-131 419,-131 413,-131 407,-125 407,-119 407,-119 407,-107 407,-107 407,-101 413,-95 419,-95 419,-95 483,-95 483,-95 489,-95 495,-101 495,-107 495,-107 495,-119 495,-119 495,-125 489,-131 483,-131"/>
<text text-anchor="middle" x="451" y="-109.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">append_impl</text>
</g>
<!-- RocksWriteBatch_append&#45;&gt;append_impl -->
<g id="edge3" class="edge">
<title>RocksWriteBatch_append&#45;&gt;append_impl</title>
<path fill="none" stroke="#666666" d="M315.54,-145.73C342.48,-139.18 372.27,-131.92 396.95,-125.92"/>
<polygon fill="#666666" stroke="#666666" points="397.95,-129.27 406.83,-123.51 396.29,-122.47 397.95,-129.27"/>
</g>
<!-- raft_log_key -->
<g id="node7" class="node">
<title>raft_log_key</title>
<path fill="none" stroke="#1c2123" d="M623,-160C623,-160 561,-160 561,-160 555,-160 549,-154 549,-148 549,-148 549,-136 549,-136 549,-130 555,-124 561,-124 561,-124 623,-124 623,-124 629,-124 635,-130 635,-136 635,-136 635,-148 635,-148 635,-154 629,-160 623,-160"/>
<text text-anchor="middle" x="592" y="-138.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_log_key</text>
</g>
<!-- RocksWriteBatch_cut_logs&#45;&gt;raft_log_key -->
<g id="edge8" class="edge">
<title>RocksWriteBatch_cut_logs&#45;&gt;raft_log_key</title>
<path fill="none" stroke="#666666" d="M482.16,-183.5C498.83,-177.14 519.99,-169.07 539.22,-161.74"/>
<polygon fill="#666666" stroke="#666666" points="540.67,-164.93 548.77,-158.1 538.18,-158.39 540.67,-164.93"/>
</g>
<!-- delete -->
<g id="node10" class="node">
<title>delete</title>
<path fill="none" stroke="#1c2123" d="M607,-214C607,-214 577,-214 577,-214 571,-214 565,-208 565,-202 565,-202 565,-190 565,-190 565,-184 571,-178 577,-178 577,-178 607,-178 607,-178 613,-178 619,-184 619,-190 619,-190 619,-202 619,-202 619,-208 613,-214 607,-214"/>
<text text-anchor="middle" x="592" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">delete</text>
</g>
<!-- RocksWriteBatch_cut_logs&#45;&gt;delete -->
<g id="edge9" class="edge">
<title>RocksWriteBatch_cut_logs&#45;&gt;delete</title>
<path fill="none" stroke="#666666" d="M482.16,-195.22C503.39,-195.37 531.92,-195.57 554.45,-195.74"/>
<polygon fill="#666666" stroke="#666666" points="554.62,-199.24 564.65,-195.81 554.67,-192.24 554.62,-199.24"/>
</g>
<!-- append_impl&#45;&gt;raft_log_key -->
<g id="edge4" class="edge">
<title>append_impl&#45;&gt;raft_log_key</title>
<path fill="none" stroke="#666666" d="M495.22,-122.02C508.94,-124.88 524.27,-128.08 538.57,-131.06"/>
<polygon fill="#666666" stroke="#666666" points="538.26,-134.57 548.76,-133.19 539.69,-127.72 538.26,-134.57"/>
</g>
<!-- entry_write_to_vec -->
<g id="node8" class="node">
<title>entry_write_to_vec</title>
<path fill="none" stroke="#1c2123" d="M641,-52C641,-52 543,-52 543,-52 537,-52 531,-46 531,-40 531,-40 531,-28 531,-28 531,-22 537,-16 543,-16 543,-16 641,-16 641,-16 647,-16 653,-22 653,-28 653,-28 653,-40 653,-40 653,-46 647,-52 641,-52"/>
<text text-anchor="middle" x="592" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">entry_write_to_vec</text>
</g>
<!-- append_impl&#45;&gt;entry_write_to_vec -->
<g id="edge5" class="edge">
<title>append_impl&#45;&gt;entry_write_to_vec</title>
<path fill="none" stroke="#666666" d="M477.33,-94.84C492.52,-84.33 512.44,-71.2 531,-61 533.72,-59.51 536.53,-58.03 539.39,-56.58"/>
<polygon fill="#666666" stroke="#666666" points="541.19,-59.59 548.62,-52.05 538.1,-53.31 541.19,-59.59"/>
</g>
<!-- put -->
<g id="node9" class="node">
<title>put</title>
<path fill="none" stroke="#1c2123" d="M607,-106C607,-106 577,-106 577,-106 571,-106 565,-100 565,-94 565,-94 565,-82 565,-82 565,-76 571,-70 577,-70 577,-70 607,-70 607,-70 613,-70 619,-76 619,-82 619,-82 619,-94 619,-94 619,-100 613,-106 607,-106"/>
<text text-anchor="middle" x="592" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">put</text>
</g>
<!-- append_impl&#45;&gt;put -->
<g id="edge6" class="edge">
<title>append_impl&#45;&gt;put</title>
<path fill="none" stroke="#666666" d="M495.22,-105.23C514.36,-101.78 536.62,-97.78 554.86,-94.5"/>
<polygon fill="#666666" stroke="#666666" points="555.59,-97.93 564.81,-92.71 554.35,-91.04 555.59,-97.93"/>
</g>
<!-- put&#45;&gt;WriteBatch_put -->
<g id="edge7" class="edge">
<title>put&#45;&gt;WriteBatch_put</title>
<path fill="none" stroke="#666666" d="M619.05,-88C648.65,-88 697.16,-88 730.52,-88"/>
<polygon fill="#666666" stroke="#666666" points="730.77,-91.5 740.77,-88 730.77,-84.5 730.77,-91.5"/>
</g>
</g>
</svg>
