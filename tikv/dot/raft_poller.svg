<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raftPoller Pages: 1 -->
<svg width="1523pt" height="926pt"
 viewBox="0.00 0.00 1523.00 926.12" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 922.12)">
<title>raftPoller</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-922.12 1519,-922.12 1519,4 -4,4"/>
<!-- begin -->
<g id="node1" class="node">
<title>begin</title>
<path fill="none" stroke="#1c2123" d="M154,-526.5C154,-526.5 124,-526.5 124,-526.5 118,-526.5 112,-520.5 112,-514.5 112,-514.5 112,-502.5 112,-502.5 112,-496.5 118,-490.5 124,-490.5 124,-490.5 154,-490.5 154,-490.5 160,-490.5 166,-496.5 166,-502.5 166,-502.5 166,-514.5 166,-514.5 166,-520.5 160,-526.5 154,-526.5"/>
<text text-anchor="middle" x="139" y="-504.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">begin</text>
</g>
<!-- end -->
<g id="node2" class="node">
<title>end</title>
<path fill="none" stroke="#1c2123" d="M154,-472.5C154,-472.5 124,-472.5 124,-472.5 118,-472.5 112,-466.5 112,-460.5 112,-460.5 112,-448.5 112,-448.5 112,-442.5 118,-436.5 124,-436.5 124,-436.5 154,-436.5 154,-436.5 160,-436.5 166,-442.5 166,-448.5 166,-448.5 166,-460.5 166,-460.5 166,-466.5 160,-472.5 154,-472.5"/>
<text text-anchor="middle" x="139" y="-450.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">end</text>
</g>
<!-- flush_ticks -->
<g id="node28" class="node">
<title>flush_ticks</title>
<path fill="none" stroke="#1c2123" d="M283,-691C283,-691 401,-691 401,-691 407,-691 413,-697 413,-703 413,-703 413,-740 413,-740 413,-746 407,-752 401,-752 401,-752 283,-752 283,-752 277,-752 271,-746 271,-740 271,-740 271,-703 271,-703 271,-697 277,-691 283,-691"/>
<text text-anchor="middle" x="342" y="-736.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">flush_ticks</text>
<polyline fill="none" stroke="#1c2123" points="271,-729 413,-729 "/>
<text text-anchor="start" x="279" y="-713.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">触发pollContext.timer</text>
<text text-anchor="middle" x="342" y="-698.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> delay</text>
</g>
<!-- end&#45;&gt;flush_ticks -->
<g id="edge26" class="edge">
<title>end&#45;&gt;flush_ticks</title>
<path fill="none" stroke="#666666" d="M166.49,-466.37C173.96,-470.49 181.75,-475.59 188,-481.5 196.46,-489.51 275.52,-616.01 316.55,-682.05"/>
<polygon fill="#666666" stroke="#666666" points="313.82,-684.29 322.07,-690.94 319.77,-680.6 313.82,-684.29"/>
</g>
<!-- handle_raft_ready -->
<g id="node29" class="node">
<title>handle_raft_ready</title>
<path fill="none" stroke="#1c2123" d="M278,-479.5C278,-479.5 406,-479.5 406,-479.5 412,-479.5 418,-485.5 418,-491.5 418,-491.5 418,-513.5 418,-513.5 418,-519.5 412,-525.5 406,-525.5 406,-525.5 278,-525.5 278,-525.5 272,-525.5 266,-519.5 266,-513.5 266,-513.5 266,-491.5 266,-491.5 266,-485.5 272,-479.5 278,-479.5"/>
<text text-anchor="middle" x="342" y="-510.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_ready</text>
<polyline fill="none" stroke="#1c2123" points="266,-502.5 418,-502.5 "/>
<text text-anchor="middle" x="342" y="-487.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将write_batch写入磁盘</text>
</g>
<!-- end&#45;&gt;handle_raft_ready -->
<g id="edge27" class="edge">
<title>end&#45;&gt;handle_raft_ready</title>
<path fill="none" stroke="#666666" d="M166.28,-460.78C189.13,-466.23 223.56,-474.45 255.83,-482.16"/>
<polygon fill="#666666" stroke="#666666" points="255.22,-485.61 265.76,-484.53 256.84,-478.8 255.22,-485.61"/>
</g>
<!-- handle_normal -->
<g id="node3" class="node">
<title>handle_normal</title>
<path fill="none" stroke="#1c2123" d="M176,-322.5C176,-322.5 102,-322.5 102,-322.5 96,-322.5 90,-316.5 90,-310.5 90,-310.5 90,-298.5 90,-298.5 90,-292.5 96,-286.5 102,-286.5 102,-286.5 176,-286.5 176,-286.5 182,-286.5 188,-292.5 188,-298.5 188,-298.5 188,-310.5 188,-310.5 188,-316.5 182,-322.5 176,-322.5"/>
<text text-anchor="middle" x="139" y="-300.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_normal</text>
</g>
<!-- PeerFsm_reciver_try_recv -->
<g id="node8" class="node">
<title>PeerFsm_reciver_try_recv</title>
<path fill="none" stroke="#1c2123" d="M236,-245C236,-245 448,-245 448,-245 454,-245 460,-251 460,-257 460,-257 460,-294 460,-294 460,-300 454,-306 448,-306 448,-306 236,-306 236,-306 230,-306 224,-300 224,-294 224,-294 224,-257 224,-257 224,-251 230,-245 236,-245"/>
<text text-anchor="middle" x="342" y="-290.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsm::reciver.try_recv</text>
<polyline fill="none" stroke="#1c2123" points="224,-283 460,-283 "/>
<text text-anchor="start" x="232" y="-267.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">非block的从PeerFsm.reciver读取消息</text>
<text text-anchor="start" x="232" y="-252.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 最多读取message_per_tick消息</text>
</g>
<!-- handle_normal&#45;&gt;PeerFsm_reciver_try_recv -->
<g id="edge8" class="edge">
<title>handle_normal&#45;&gt;PeerFsm_reciver_try_recv</title>
<path fill="none" stroke="#666666" d="M188.14,-297.55C196.25,-296.38 204.98,-295.12 214.02,-293.82"/>
<polygon fill="#666666" stroke="#666666" points="214.54,-297.28 223.94,-292.39 213.54,-290.35 214.54,-297.28"/>
</g>
<!-- PeerFsmDelegate_handle_msgs -->
<g id="node9" class="node">
<title>PeerFsmDelegate_handle_msgs</title>
<path fill="none" stroke="#1c2123" d="M510.5,-159.5C510.5,-159.5 677.5,-159.5 677.5,-159.5 683.5,-159.5 689.5,-165.5 689.5,-171.5 689.5,-171.5 689.5,-193.5 689.5,-193.5 689.5,-199.5 683.5,-205.5 677.5,-205.5 677.5,-205.5 510.5,-205.5 510.5,-205.5 504.5,-205.5 498.5,-199.5 498.5,-193.5 498.5,-193.5 498.5,-171.5 498.5,-171.5 498.5,-165.5 504.5,-159.5 510.5,-159.5"/>
<text text-anchor="middle" x="594" y="-190.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate::handle_msgs</text>
<polyline fill="none" stroke="#1c2123" points="498.5,-182.5 689.5,-182.5 "/>
<text text-anchor="start" x="506.5" y="-167.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理消息</text>
</g>
<!-- handle_normal&#45;&gt;PeerFsmDelegate_handle_msgs -->
<g id="edge9" class="edge">
<title>handle_normal&#45;&gt;PeerFsmDelegate_handle_msgs</title>
<path fill="none" stroke="#666666" d="M156.41,-286.26C172.09,-270.1 197.23,-247.3 224,-235.5 307.88,-198.53 411.9,-186.24 488.1,-182.64"/>
<polygon fill="#666666" stroke="#666666" points="488.35,-186.14 498.19,-182.21 488.05,-179.14 488.35,-186.14"/>
</g>
<!-- PeerFsmDelegate_collect_ready -->
<g id="node10" class="node">
<title>PeerFsmDelegate_collect_ready</title>
<path fill="none" stroke="#1c2123" d="M509.5,-303C509.5,-303 678.5,-303 678.5,-303 684.5,-303 690.5,-309 690.5,-315 690.5,-315 690.5,-352 690.5,-352 690.5,-358 684.5,-364 678.5,-364 678.5,-364 509.5,-364 509.5,-364 503.5,-364 497.5,-358 497.5,-352 497.5,-352 497.5,-315 497.5,-315 497.5,-309 503.5,-303 509.5,-303"/>
<text text-anchor="middle" x="594" y="-348.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate::collect_ready</text>
<polyline fill="none" stroke="#1c2123" points="497.5,-341 690.5,-341 "/>
<text text-anchor="start" x="505.5" y="-325.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理raft中已经</text>
<text text-anchor="start" x="505.5" y="-310.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ready的消息</text>
</g>
<!-- handle_normal&#45;&gt;PeerFsmDelegate_collect_ready -->
<g id="edge10" class="edge">
<title>handle_normal&#45;&gt;PeerFsmDelegate_collect_ready</title>
<path fill="none" stroke="#666666" d="M188.34,-311.51C200,-313.02 212.43,-314.46 224,-315.5 312.47,-323.44 413.2,-328.05 487.05,-330.62"/>
<polygon fill="#666666" stroke="#666666" points="487.17,-334.13 497.28,-330.97 487.41,-327.13 487.17,-334.13"/>
</g>
<!-- handle_control -->
<g id="node4" class="node">
<title>handle_control</title>
<path fill="none" stroke="#1c2123" d="M176,-196.5C176,-196.5 102,-196.5 102,-196.5 96,-196.5 90,-190.5 90,-184.5 90,-184.5 90,-172.5 90,-172.5 90,-166.5 96,-160.5 102,-160.5 102,-160.5 176,-160.5 176,-160.5 182,-160.5 188,-166.5 188,-172.5 188,-172.5 188,-184.5 188,-184.5 188,-190.5 182,-196.5 176,-196.5"/>
<text text-anchor="middle" x="139" y="-174.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_control</text>
</g>
<!-- store_reciver_try_recv -->
<g id="node6" class="node">
<title>store_reciver_try_recv</title>
<path fill="none" stroke="#1c2123" d="M247,-73.5C247,-73.5 437,-73.5 437,-73.5 443,-73.5 449,-79.5 449,-85.5 449,-85.5 449,-137.5 449,-137.5 449,-143.5 443,-149.5 437,-149.5 437,-149.5 247,-149.5 247,-149.5 241,-149.5 235,-143.5 235,-137.5 235,-137.5 235,-85.5 235,-85.5 235,-79.5 241,-73.5 247,-73.5"/>
<text text-anchor="start" x="243" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreFsm::reciver.try_recv()</text>
<text text-anchor="start" x="243" y="-119.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 尝试从StoreFsm.reciver中取消息</text>
<text text-anchor="start" x="243" y="-104.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 存到store_msg_buf</text>
<polyline fill="none" stroke="#1c2123" points="235,-96.5 449,-96.5 "/>
<text text-anchor="start" x="243" y="-81.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">最多去message_per_tick个消息</text>
</g>
<!-- handle_control&#45;&gt;store_reciver_try_recv -->
<g id="edge5" class="edge">
<title>handle_control&#45;&gt;store_reciver_try_recv</title>
<path fill="none" stroke="#666666" d="M188.14,-162.45C199.55,-158.65 212.2,-154.43 225.19,-150.1"/>
<polygon fill="#666666" stroke="#666666" points="226.33,-153.41 234.71,-146.93 224.11,-146.77 226.33,-153.41"/>
</g>
<!-- StoreFsmDelegate_handle_msgs -->
<g id="node7" class="node">
<title>StoreFsmDelegate_handle_msgs</title>
<path fill="none" stroke="#1c2123" d="M508,-92.5C508,-92.5 680,-92.5 680,-92.5 686,-92.5 692,-98.5 692,-104.5 692,-104.5 692,-126.5 692,-126.5 692,-132.5 686,-138.5 680,-138.5 680,-138.5 508,-138.5 508,-138.5 502,-138.5 496,-132.5 496,-126.5 496,-126.5 496,-104.5 496,-104.5 496,-98.5 502,-92.5 508,-92.5"/>
<text text-anchor="middle" x="594" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreFsmDelegate::handle_msgs</text>
<polyline fill="none" stroke="#1c2123" points="496,-115.5 692,-115.5 "/>
<text text-anchor="start" x="504" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理msg buf中消息</text>
</g>
<!-- handle_control&#45;&gt;StoreFsmDelegate_handle_msgs -->
<g id="edge6" class="edge">
<title>handle_control&#45;&gt;StoreFsmDelegate_handle_msgs</title>
<path fill="none" stroke="#666666" d="M188.17,-179.22C251.21,-179.31 364.84,-176.56 460,-158.5 471.73,-156.27 494.11,-149.4 517.21,-141.78"/>
<polygon fill="#666666" stroke="#666666" points="518.38,-145.08 526.77,-138.6 516.18,-138.44 518.38,-145.08"/>
</g>
<!-- poll -->
<g id="node5" class="node">
<title>poll</title>
<path fill="none" stroke="#1c2123" d="M42,-349.5C42,-349.5 12,-349.5 12,-349.5 6,-349.5 0,-343.5 0,-337.5 0,-337.5 0,-325.5 0,-325.5 0,-319.5 6,-313.5 12,-313.5 12,-313.5 42,-313.5 42,-313.5 48,-313.5 54,-319.5 54,-325.5 54,-325.5 54,-337.5 54,-337.5 54,-343.5 48,-349.5 42,-349.5"/>
<text text-anchor="middle" x="27" y="-327.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">poll</text>
</g>
<!-- poll&#45;&gt;begin -->
<g id="edge1" class="edge">
<title>poll&#45;&gt;begin</title>
<path fill="none" stroke="#666666" d="M31.47,-349.72C38.08,-380.2 55.05,-442.06 90,-481.5 93.73,-485.7 98.27,-489.4 103.06,-492.6"/>
<polygon fill="#666666" stroke="#666666" points="101.44,-495.71 111.82,-497.83 105.03,-489.7 101.44,-495.71"/>
</g>
<!-- poll&#45;&gt;end -->
<g id="edge2" class="edge">
<title>poll&#45;&gt;end</title>
<path fill="none" stroke="#666666" d="M44.23,-349.65C62.92,-370.54 93.75,-405.02 114.92,-428.7"/>
<polygon fill="#666666" stroke="#666666" points="112.43,-431.16 121.7,-436.28 117.65,-426.49 112.43,-431.16"/>
</g>
<!-- poll&#45;&gt;handle_normal -->
<g id="edge3" class="edge">
<title>poll&#45;&gt;handle_normal</title>
<path fill="none" stroke="#666666" d="M54.07,-325.1C61.91,-323.18 70.84,-320.98 79.89,-318.76"/>
<polygon fill="#666666" stroke="#666666" points="80.83,-322.14 89.7,-316.35 79.16,-315.34 80.83,-322.14"/>
</g>
<!-- poll&#45;&gt;handle_control -->
<g id="edge4" class="edge">
<title>poll&#45;&gt;handle_control</title>
<path fill="none" stroke="#666666" d="M41.05,-313.35C60.4,-286.43 96.81,-235.79 119.08,-204.81"/>
<polygon fill="#666666" stroke="#666666" points="121.97,-206.79 124.97,-196.63 116.29,-202.7 121.97,-206.79"/>
</g>
<!-- store_reciver_try_recv&#45;&gt;StoreFsmDelegate_handle_msgs -->
<g id="edge7" class="edge">
<title>store_reciver_try_recv&#45;&gt;StoreFsmDelegate_handle_msgs</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M449.02,-113.2C461.19,-113.39 473.6,-113.59 485.78,-113.78"/>
<polygon fill="green" stroke="green" points="485.89,-117.29 495.94,-113.95 486,-110.29 485.89,-117.29"/>
</g>
<!-- PeerFsm_reciver_try_recv&#45;&gt;PeerFsmDelegate_handle_msgs -->
<g id="edge11" class="edge">
<title>PeerFsm_reciver_try_recv&#45;&gt;PeerFsmDelegate_handle_msgs</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M425.21,-244.92C456.28,-233.36 491.37,-220.31 521.4,-209.14"/>
<polygon fill="green" stroke="green" points="522.81,-212.35 530.96,-205.58 520.37,-205.79 522.81,-212.35"/>
</g>
<!-- PeerFsm_reciver_try_recv&#45;&gt;PeerFsmDelegate_collect_ready -->
<g id="edge12" class="edge">
<title>PeerFsm_reciver_try_recv&#45;&gt;PeerFsmDelegate_collect_ready</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M460.31,-302.72C469.44,-304.84 478.63,-306.97 487.67,-309.06"/>
<polygon fill="green" stroke="green" points="486.89,-312.48 497.42,-311.33 488.47,-305.66 486.89,-312.48"/>
</g>
<!-- Peer_step -->
<g id="node11" class="node">
<title>Peer_step</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M801,-61.5C801,-61.5 847,-61.5 847,-61.5 853,-61.5 859,-67.5 859,-73.5 859,-73.5 859,-85.5 859,-85.5 859,-91.5 853,-97.5 847,-97.5 847,-97.5 801,-97.5 801,-97.5 795,-97.5 789,-91.5 789,-85.5 789,-85.5 789,-73.5 789,-73.5 789,-67.5 795,-61.5 801,-61.5"/>
<text text-anchor="middle" x="824" y="-75.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Peer::step</text>
</g>
<!-- PeerFsmDelegate_handle_msgs&#45;&gt;Peer_step -->
<g id="edge13" class="edge">
<title>PeerFsmDelegate_handle_msgs&#45;&gt;Peer_step</title>
<path fill="none" stroke="#666666" d="M668.74,-159.43C676.81,-155.88 684.72,-151.9 692,-147.5 710.57,-136.26 709.47,-125.8 728,-114.5 743.68,-104.94 762.39,-97.35 779.04,-91.72"/>
<polygon fill="#666666" stroke="#666666" points="780.14,-95.05 788.57,-88.63 777.98,-88.39 780.14,-95.05"/>
</g>
<!-- Peer_post_apply -->
<g id="node12" class="node">
<title>Peer_post_apply</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M782.5,-2.5C782.5,-2.5 865.5,-2.5 865.5,-2.5 871.5,-2.5 877.5,-8.5 877.5,-14.5 877.5,-14.5 877.5,-26.5 877.5,-26.5 877.5,-32.5 871.5,-38.5 865.5,-38.5 865.5,-38.5 782.5,-38.5 782.5,-38.5 776.5,-38.5 770.5,-32.5 770.5,-26.5 770.5,-26.5 770.5,-14.5 770.5,-14.5 770.5,-8.5 776.5,-2.5 782.5,-2.5"/>
<text text-anchor="middle" x="824" y="-16.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Peer::post_apply</text>
</g>
<!-- PeerFsmDelegate_handle_msgs&#45;&gt;Peer_post_apply -->
<g id="edge14" class="edge">
<title>PeerFsmDelegate_handle_msgs&#45;&gt;Peer_post_apply</title>
<path fill="none" stroke="#666666" d="M676.62,-159.42C682.2,-155.98 687.41,-152.03 692,-147.5 724.42,-115.48 695.09,-83.02 728,-51.5 737.1,-42.79 748.67,-36.53 760.59,-32.02"/>
<polygon fill="#666666" stroke="#666666" points="761.83,-35.3 770.18,-28.78 759.59,-28.67 761.83,-35.3"/>
</g>
<!-- Peer_propose -->
<g id="node13" class="node">
<title>Peer_propose</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M790.5,-165.5C790.5,-165.5 857.5,-165.5 857.5,-165.5 863.5,-165.5 869.5,-171.5 869.5,-177.5 869.5,-177.5 869.5,-189.5 869.5,-189.5 869.5,-195.5 863.5,-201.5 857.5,-201.5 857.5,-201.5 790.5,-201.5 790.5,-201.5 784.5,-201.5 778.5,-195.5 778.5,-189.5 778.5,-189.5 778.5,-177.5 778.5,-177.5 778.5,-171.5 784.5,-165.5 790.5,-165.5"/>
<text text-anchor="middle" x="824" y="-179.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Peer::propose</text>
</g>
<!-- PeerFsmDelegate_handle_msgs&#45;&gt;Peer_propose -->
<g id="edge15" class="edge">
<title>PeerFsmDelegate_handle_msgs&#45;&gt;Peer_propose</title>
<path fill="none" stroke="#666666" d="M689.71,-182.92C716.46,-183.03 744.67,-183.16 768.22,-183.26"/>
<polygon fill="#666666" stroke="#666666" points="768.33,-186.76 778.34,-183.3 768.36,-179.76 768.33,-186.76"/>
</g>
<!-- RawNode_tick -->
<g id="node14" class="node">
<title>RawNode_tick</title>
<path fill="#feed9b" stroke="#f7e495" d="M1011.5,-110.5C1011.5,-110.5 1085.5,-110.5 1085.5,-110.5 1091.5,-110.5 1097.5,-116.5 1097.5,-122.5 1097.5,-122.5 1097.5,-134.5 1097.5,-134.5 1097.5,-140.5 1091.5,-146.5 1085.5,-146.5 1085.5,-146.5 1011.5,-146.5 1011.5,-146.5 1005.5,-146.5 999.5,-140.5 999.5,-134.5 999.5,-134.5 999.5,-122.5 999.5,-122.5 999.5,-116.5 1005.5,-110.5 1011.5,-110.5"/>
<text text-anchor="middle" x="1048.5" y="-124.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RawNode::tick</text>
</g>
<!-- PeerFsmDelegate_handle_msgs&#45;&gt;RawNode_tick -->
<g id="edge16" class="edge">
<title>PeerFsmDelegate_handle_msgs&#45;&gt;RawNode_tick</title>
<path fill="none" stroke="#666666" d="M689.58,-161.9C702.45,-159.51 715.52,-157.29 728,-155.5 818.69,-142.51 924.83,-135.06 989.07,-131.4"/>
<polygon fill="#666666" stroke="#666666" points="989.61,-134.87 999.4,-130.82 989.22,-127.89 989.61,-134.87"/>
</g>
<!-- Peer_handle_raft_ready_append -->
<g id="node15" class="node">
<title>Peer_handle_raft_ready_append</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M740,-315.5C740,-315.5 908,-315.5 908,-315.5 914,-315.5 920,-321.5 920,-327.5 920,-327.5 920,-339.5 920,-339.5 920,-345.5 914,-351.5 908,-351.5 908,-351.5 740,-351.5 740,-351.5 734,-351.5 728,-345.5 728,-339.5 728,-339.5 728,-327.5 728,-327.5 728,-321.5 734,-315.5 740,-315.5"/>
<text text-anchor="middle" x="824" y="-329.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Peer::handle_raft_ready_append</text>
</g>
<!-- PeerFsmDelegate_collect_ready&#45;&gt;Peer_handle_raft_ready_append -->
<g id="edge20" class="edge">
<title>PeerFsmDelegate_collect_ready&#45;&gt;Peer_handle_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M690.7,-333.5C699.64,-333.5 708.74,-333.5 717.76,-333.5"/>
<polygon fill="#666666" stroke="#666666" points="717.91,-337 727.91,-333.5 717.91,-330 717.91,-337"/>
</g>
<!-- RawNode_step -->
<g id="node20" class="node">
<title>RawNode_step</title>
<path fill="#feed9b" stroke="#f7e495" d="M1010.5,-55.5C1010.5,-55.5 1086.5,-55.5 1086.5,-55.5 1092.5,-55.5 1098.5,-61.5 1098.5,-67.5 1098.5,-67.5 1098.5,-79.5 1098.5,-79.5 1098.5,-85.5 1092.5,-91.5 1086.5,-91.5 1086.5,-91.5 1010.5,-91.5 1010.5,-91.5 1004.5,-91.5 998.5,-85.5 998.5,-79.5 998.5,-79.5 998.5,-67.5 998.5,-67.5 998.5,-61.5 1004.5,-55.5 1010.5,-55.5"/>
<text text-anchor="middle" x="1048.5" y="-69.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RawNode::step</text>
</g>
<!-- Peer_step&#45;&gt;RawNode_step -->
<g id="edge17" class="edge">
<title>Peer_step&#45;&gt;RawNode_step</title>
<path fill="none" stroke="#666666" d="M859.28,-78.58C893.55,-77.65 946.95,-76.21 988.12,-75.1"/>
<polygon fill="#666666" stroke="#666666" points="988.41,-78.59 998.31,-74.83 988.22,-71.6 988.41,-78.59"/>
</g>
<!-- RawNode_advance_apply_to -->
<g id="node21" class="node">
<title>RawNode_advance_apply_to</title>
<path fill="#feed9b" stroke="#f7e495" d="M972.5,-0.5C972.5,-0.5 1124.5,-0.5 1124.5,-0.5 1130.5,-0.5 1136.5,-6.5 1136.5,-12.5 1136.5,-12.5 1136.5,-24.5 1136.5,-24.5 1136.5,-30.5 1130.5,-36.5 1124.5,-36.5 1124.5,-36.5 972.5,-36.5 972.5,-36.5 966.5,-36.5 960.5,-30.5 960.5,-24.5 960.5,-24.5 960.5,-12.5 960.5,-12.5 960.5,-6.5 966.5,-0.5 972.5,-0.5"/>
<text text-anchor="middle" x="1048.5" y="-14.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RawNode::advance_apply_to</text>
</g>
<!-- Peer_post_apply&#45;&gt;RawNode_advance_apply_to -->
<g id="edge18" class="edge">
<title>Peer_post_apply&#45;&gt;RawNode_advance_apply_to</title>
<path fill="none" stroke="#666666" d="M877.73,-20.03C899.42,-19.83 925.25,-19.6 950.14,-19.38"/>
<polygon fill="#666666" stroke="#666666" points="950.39,-22.87 960.36,-19.28 950.33,-15.87 950.39,-22.87"/>
</g>
<!-- RawNode_propose -->
<g id="node22" class="node">
<title>RawNode_propose</title>
<path fill="#feed9b" stroke="#f7e495" d="M1000,-165.5C1000,-165.5 1097,-165.5 1097,-165.5 1103,-165.5 1109,-171.5 1109,-177.5 1109,-177.5 1109,-189.5 1109,-189.5 1109,-195.5 1103,-201.5 1097,-201.5 1097,-201.5 1000,-201.5 1000,-201.5 994,-201.5 988,-195.5 988,-189.5 988,-189.5 988,-177.5 988,-177.5 988,-171.5 994,-165.5 1000,-165.5"/>
<text text-anchor="middle" x="1048.5" y="-179.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RawNode::propose</text>
</g>
<!-- Peer_propose&#45;&gt;RawNode_propose -->
<g id="edge19" class="edge">
<title>Peer_propose&#45;&gt;RawNode_propose</title>
<path fill="none" stroke="#666666" d="M869.76,-183.5C900.6,-183.5 942.2,-183.5 977.41,-183.5"/>
<polygon fill="#666666" stroke="#666666" points="977.63,-187 987.63,-183.5 977.63,-180 977.63,-187"/>
</g>
<!-- RawNode_ready -->
<g id="node19" class="node">
<title>RawNode_ready</title>
<path fill="#feed9b" stroke="#f7e495" d="M1006.5,-315.5C1006.5,-315.5 1090.5,-315.5 1090.5,-315.5 1096.5,-315.5 1102.5,-321.5 1102.5,-327.5 1102.5,-327.5 1102.5,-339.5 1102.5,-339.5 1102.5,-345.5 1096.5,-351.5 1090.5,-351.5 1090.5,-351.5 1006.5,-351.5 1006.5,-351.5 1000.5,-351.5 994.5,-345.5 994.5,-339.5 994.5,-339.5 994.5,-327.5 994.5,-327.5 994.5,-321.5 1000.5,-315.5 1006.5,-315.5"/>
<text text-anchor="middle" x="1048.5" y="-329.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RawNode::ready</text>
</g>
<!-- Peer_handle_raft_ready_append&#45;&gt;RawNode_ready -->
<g id="edge21" class="edge">
<title>Peer_handle_raft_ready_append&#45;&gt;RawNode_ready</title>
<path fill="none" stroke="#666666" d="M920.01,-333.5C941.63,-333.5 964.09,-333.5 984.03,-333.5"/>
<polygon fill="#666666" stroke="#666666" points="984.2,-337 994.2,-333.5 984.2,-330 984.2,-337"/>
</g>
<!-- PeerStorage_handle_raft_ready -->
<g id="node24" class="node">
<title>PeerStorage_handle_raft_ready</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M993,-370.5C993,-370.5 1104,-370.5 1104,-370.5 1110,-370.5 1116,-376.5 1116,-382.5 1116,-382.5 1116,-442.5 1116,-442.5 1116,-448.5 1110,-454.5 1104,-454.5 1104,-454.5 993,-454.5 993,-454.5 987,-454.5 981,-448.5 981,-442.5 981,-442.5 981,-382.5 981,-382.5 981,-376.5 987,-370.5 993,-370.5"/>
<text text-anchor="start" x="989" y="-439.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">PeerStorage</text>
<polyline fill="none" stroke="#60b5ac" points="981,-431.5 1116,-431.5 "/>
<text text-anchor="start" x="989" y="-416.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">handle_raft_ready</text>
<polyline fill="none" stroke="#60b5ac" points="981,-408.5 1116,-408.5 "/>
<text text-anchor="start" x="989" y="-393.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">将raft日志，状态等</text>
<text text-anchor="start" x="989" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 写入write batch</text>
</g>
<!-- Peer_handle_raft_ready_append&#45;&gt;PeerStorage_handle_raft_ready -->
<g id="edge22" class="edge">
<title>Peer_handle_raft_ready_append&#45;&gt;PeerStorage_handle_raft_ready</title>
<path fill="none" stroke="#666666" d="M875.77,-351.53C904.01,-361.55 939.73,-374.24 971.27,-385.43"/>
<polygon fill="#666666" stroke="#666666" points="970.31,-388.81 980.91,-388.86 972.66,-382.21 970.31,-388.81"/>
</g>
<!-- ApplyRouter_schedule_task_apply -->
<g id="node25" class="node">
<title>ApplyRouter_schedule_task_apply</title>
<path fill="#de3737" stroke="#000000" d="M968,-220.5C968,-220.5 1129,-220.5 1129,-220.5 1135,-220.5 1141,-226.5 1141,-232.5 1141,-232.5 1141,-284.5 1141,-284.5 1141,-290.5 1135,-296.5 1129,-296.5 1129,-296.5 968,-296.5 968,-296.5 962,-296.5 956,-290.5 956,-284.5 956,-284.5 956,-232.5 956,-232.5 956,-226.5 962,-220.5 968,-220.5"/>
<text text-anchor="middle" x="1048.5" y="-281.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">ApplyRouter</text>
<text text-anchor="middle" x="1048.5" y="-266.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">schedule_task(Task::apply(...))</text>
<polyline fill="none" stroke="#000000" points="956,-258.5 1141,-258.5 "/>
<text text-anchor="start" x="964" y="-243.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">向apply router发送</text>
<text text-anchor="start" x="964" y="-228.3" font-family="Times,serif" font-size="14.00" fill="#ffffff"> apply task消息</text>
</g>
<!-- Peer_handle_raft_ready_append&#45;&gt;ApplyRouter_schedule_task_apply -->
<g id="edge23" class="edge">
<title>Peer_handle_raft_ready_append&#45;&gt;ApplyRouter_schedule_task_apply</title>
<path fill="none" stroke="#666666" d="M878.58,-315.44C898.92,-308.58 922.82,-300.53 946.14,-292.67"/>
<polygon fill="#666666" stroke="#666666" points="947.37,-295.95 955.73,-289.43 945.13,-289.31 947.37,-295.95"/>
</g>
<!-- Peer_handle_raft_ready_advance -->
<g id="node16" class="node">
<title>Peer_handle_raft_ready_advance</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M753,-652.5C753,-652.5 895,-652.5 895,-652.5 901,-652.5 907,-658.5 907,-664.5 907,-664.5 907,-686.5 907,-686.5 907,-692.5 901,-698.5 895,-698.5 895,-698.5 753,-698.5 753,-698.5 747,-698.5 741,-692.5 741,-686.5 741,-686.5 741,-664.5 741,-664.5 741,-658.5 747,-652.5 753,-652.5"/>
<text text-anchor="start" x="749" y="-683.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Peer</text>
<polyline fill="none" stroke="#8a8898" points="741,-675.5 907,-675.5 "/>
<text text-anchor="start" x="749" y="-660.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">handle_raft_ready_advance</text>
</g>
<!-- RawNode_on_persist_ready -->
<g id="node23" class="node">
<title>RawNode_on_persist_ready</title>
<path fill="#feed9b" stroke="#f7e495" d="M1006,-712.5C1006,-712.5 1091,-712.5 1091,-712.5 1097,-712.5 1103,-718.5 1103,-724.5 1103,-724.5 1103,-746.5 1103,-746.5 1103,-752.5 1097,-758.5 1091,-758.5 1091,-758.5 1006,-758.5 1006,-758.5 1000,-758.5 994,-752.5 994,-746.5 994,-746.5 994,-724.5 994,-724.5 994,-718.5 1000,-712.5 1006,-712.5"/>
<text text-anchor="start" x="1002" y="-743.3" font-family="Times,serif" font-size="14.00" fill="#40575d">RawNode</text>
<polyline fill="none" stroke="#f7e495" points="994,-735.5 1103,-735.5 "/>
<text text-anchor="start" x="1002" y="-720.3" font-family="Times,serif" font-size="14.00" fill="#40575d">on_persist_ready</text>
</g>
<!-- Peer_handle_raft_ready_advance&#45;&gt;RawNode_on_persist_ready -->
<g id="edge35" class="edge">
<title>Peer_handle_raft_ready_advance&#45;&gt;RawNode_on_persist_ready</title>
<path fill="none" stroke="#666666" d="M907.22,-697.67C932.68,-704.54 960.32,-711.99 984.28,-718.45"/>
<polygon fill="#666666" stroke="#666666" points="983.39,-721.84 993.96,-721.06 985.22,-715.08 983.39,-721.84"/>
</g>
<!-- RawNode_advance_append -->
<g id="node33" class="node">
<title>RawNode_advance_append</title>
<path fill="#feed9b" stroke="#f7e495" d="M976.5,-657.5C976.5,-657.5 1120.5,-657.5 1120.5,-657.5 1126.5,-657.5 1132.5,-663.5 1132.5,-669.5 1132.5,-669.5 1132.5,-681.5 1132.5,-681.5 1132.5,-687.5 1126.5,-693.5 1120.5,-693.5 1120.5,-693.5 976.5,-693.5 976.5,-693.5 970.5,-693.5 964.5,-687.5 964.5,-681.5 964.5,-681.5 964.5,-669.5 964.5,-669.5 964.5,-663.5 970.5,-657.5 976.5,-657.5"/>
<text text-anchor="middle" x="1048.5" y="-671.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RawNode::advance_append</text>
</g>
<!-- Peer_handle_raft_ready_advance&#45;&gt;RawNode_advance_append -->
<g id="edge36" class="edge">
<title>Peer_handle_raft_ready_advance&#45;&gt;RawNode_advance_append</title>
<path fill="none" stroke="#666666" d="M907.22,-675.5C922.45,-675.5 938.46,-675.5 954,-675.5"/>
<polygon fill="#666666" stroke="#666666" points="954.13,-679 964.13,-675.5 954.13,-672 954.13,-679"/>
</g>
<!-- Peer_send -->
<g id="node34" class="node">
<title>Peer_send</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1014.5,-592.5C1014.5,-592.5 1082.5,-592.5 1082.5,-592.5 1088.5,-592.5 1094.5,-598.5 1094.5,-604.5 1094.5,-604.5 1094.5,-626.5 1094.5,-626.5 1094.5,-632.5 1088.5,-638.5 1082.5,-638.5 1082.5,-638.5 1014.5,-638.5 1014.5,-638.5 1008.5,-638.5 1002.5,-632.5 1002.5,-626.5 1002.5,-626.5 1002.5,-604.5 1002.5,-604.5 1002.5,-598.5 1008.5,-592.5 1014.5,-592.5"/>
<text text-anchor="middle" x="1048.5" y="-623.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Peer::send</text>
<polyline fill="none" stroke="#8a8898" points="1002.5,-615.5 1094.5,-615.5 "/>
<text text-anchor="middle" x="1048.5" y="-600.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">发送raft消息</text>
</g>
<!-- Peer_handle_raft_ready_advance&#45;&gt;Peer_send -->
<g id="edge37" class="edge">
<title>Peer_handle_raft_ready_advance&#45;&gt;Peer_send</title>
<path fill="none" stroke="#666666" d="M907.22,-653.33C935.63,-645.67 966.76,-637.27 992.47,-630.34"/>
<polygon fill="#666666" stroke="#666666" points="993.65,-633.65 1002.39,-627.66 991.83,-626.89 993.65,-633.65"/>
</g>
<!-- Peer_post_raft_ready_append -->
<g id="node17" class="node">
<title>Peer_post_raft_ready_append</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M762.5,-757.5C762.5,-757.5 885.5,-757.5 885.5,-757.5 891.5,-757.5 897.5,-763.5 897.5,-769.5 897.5,-769.5 897.5,-791.5 897.5,-791.5 897.5,-797.5 891.5,-803.5 885.5,-803.5 885.5,-803.5 762.5,-803.5 762.5,-803.5 756.5,-803.5 750.5,-797.5 750.5,-791.5 750.5,-791.5 750.5,-769.5 750.5,-769.5 750.5,-763.5 756.5,-757.5 762.5,-757.5"/>
<text text-anchor="start" x="758.5" y="-788.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Peer</text>
<polyline fill="none" stroke="#8a8898" points="750.5,-780.5 897.5,-780.5 "/>
<text text-anchor="start" x="758.5" y="-765.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">post_raft_ready_append</text>
</g>
<!-- PeerStorage_post_ready -->
<g id="node18" class="node">
<title>PeerStorage_post_ready</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M979,-777.5C979,-777.5 1118,-777.5 1118,-777.5 1124,-777.5 1130,-783.5 1130,-789.5 1130,-789.5 1130,-849.5 1130,-849.5 1130,-855.5 1124,-861.5 1118,-861.5 1118,-861.5 979,-861.5 979,-861.5 973,-861.5 967,-855.5 967,-849.5 967,-849.5 967,-789.5 967,-789.5 967,-783.5 973,-777.5 979,-777.5"/>
<text text-anchor="start" x="975" y="-846.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">PeerStorage</text>
<polyline fill="none" stroke="#60b5ac" points="967,-838.5 1130,-838.5 "/>
<text text-anchor="start" x="975" y="-823.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">post_ready</text>
<polyline fill="none" stroke="#60b5ac" points="967,-815.5 1130,-815.5 "/>
<text text-anchor="start" x="975" y="-800.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">raft log, state已写入磁盘</text>
<text text-anchor="start" x="975" y="-785.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 更新内存中的一些状态</text>
</g>
<!-- Peer_post_raft_ready_append&#45;&gt;PeerStorage_post_ready -->
<g id="edge38" class="edge">
<title>Peer_post_raft_ready_append&#45;&gt;PeerStorage_post_ready</title>
<path fill="none" stroke="#666666" d="M897.55,-793.22C916.53,-796.54 937.24,-800.17 957.03,-803.64"/>
<polygon fill="#666666" stroke="#666666" points="956.52,-807.11 966.97,-805.38 957.72,-800.21 956.52,-807.11"/>
</g>
<!-- PollContext_raft_wb -->
<g id="node26" class="node">
<title>PollContext_raft_wb</title>
<path fill="none" stroke="#1c2123" d="M1302,-401.5C1302,-401.5 1196,-401.5 1196,-401.5 1190,-401.5 1184,-395.5 1184,-389.5 1184,-389.5 1184,-377.5 1184,-377.5 1184,-371.5 1190,-365.5 1196,-365.5 1196,-365.5 1302,-365.5 1302,-365.5 1308,-365.5 1314,-371.5 1314,-377.5 1314,-377.5 1314,-389.5 1314,-389.5 1314,-395.5 1308,-401.5 1302,-401.5"/>
<text text-anchor="middle" x="1249" y="-379.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollContext_raft_wb</text>
</g>
<!-- PeerStorage_handle_raft_ready&#45;&gt;PollContext_raft_wb -->
<g id="edge24" class="edge">
<title>PeerStorage_handle_raft_ready&#45;&gt;PollContext_raft_wb</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1116.15,-402.76C1134.67,-400.06 1154.9,-397.1 1173.82,-394.34"/>
<polygon fill="green" stroke="green" points="1174.49,-397.78 1183.88,-392.87 1173.48,-390.85 1174.49,-397.78"/>
</g>
<!-- PollContext_kv_wb -->
<g id="node27" class="node">
<title>PollContext_kv_wb</title>
<path fill="none" stroke="#1c2123" d="M1299.5,-455.5C1299.5,-455.5 1198.5,-455.5 1198.5,-455.5 1192.5,-455.5 1186.5,-449.5 1186.5,-443.5 1186.5,-443.5 1186.5,-431.5 1186.5,-431.5 1186.5,-425.5 1192.5,-419.5 1198.5,-419.5 1198.5,-419.5 1299.5,-419.5 1299.5,-419.5 1305.5,-419.5 1311.5,-425.5 1311.5,-431.5 1311.5,-431.5 1311.5,-443.5 1311.5,-443.5 1311.5,-449.5 1305.5,-455.5 1299.5,-455.5"/>
<text text-anchor="middle" x="1249" y="-433.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollContext_kv_wb</text>
</g>
<!-- PeerStorage_handle_raft_ready&#45;&gt;PollContext_kv_wb -->
<g id="edge25" class="edge">
<title>PeerStorage_handle_raft_ready&#45;&gt;PollContext_kv_wb</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1116.15,-420.89C1135.43,-423.32 1156.55,-425.98 1176.13,-428.45"/>
<polygon fill="green" stroke="green" points="1175.86,-431.94 1186.21,-429.72 1176.73,-425 1175.86,-431.94"/>
</g>
<!-- PollContext_engines_raft_consume_and_shrink -->
<g id="node31" class="node">
<title>PollContext_engines_raft_consume_and_shrink</title>
<path fill="none" stroke="#1c2123" d="M1369,-374C1369,-374 1503,-374 1503,-374 1509,-374 1515,-380 1515,-386 1515,-386 1515,-431 1515,-431 1515,-437 1509,-443 1503,-443 1503,-443 1369,-443 1369,-443 1363,-443 1357,-437 1357,-431 1357,-431 1357,-386 1357,-386 1357,-380 1363,-374 1369,-374"/>
<text text-anchor="start" x="1365" y="-427.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollContext</text>
<polyline fill="none" stroke="#1c2123" points="1357,-420 1515,-420 "/>
<text text-anchor="start" x="1365" y="-404.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_consume_and_shrink</text>
<polyline fill="none" stroke="#1c2123" points="1357,-397 1515,-397 "/>
<text text-anchor="middle" x="1436" y="-381.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将raftlog写入磁盘</text>
</g>
<!-- PollContext_raft_wb&#45;&gt;PollContext_engines_raft_consume_and_shrink -->
<g id="edge31" class="edge">
<title>PollContext_raft_wb&#45;&gt;PollContext_engines_raft_consume_and_shrink</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1314.18,-392.17C1324.73,-393.6 1335.82,-395.1 1346.83,-396.59"/>
<polygon fill="green" stroke="green" points="1346.52,-400.08 1356.9,-397.95 1347.46,-393.14 1346.52,-400.08"/>
</g>
<!-- PollContext_kv_wb_write_opt -->
<g id="node30" class="node">
<title>PollContext_kv_wb_write_opt</title>
<path fill="none" stroke="#1c2123" d="M1385.5,-474C1385.5,-474 1486.5,-474 1486.5,-474 1492.5,-474 1498.5,-480 1498.5,-486 1498.5,-486 1498.5,-531 1498.5,-531 1498.5,-537 1492.5,-543 1486.5,-543 1486.5,-543 1385.5,-543 1385.5,-543 1379.5,-543 1373.5,-537 1373.5,-531 1373.5,-531 1373.5,-486 1373.5,-486 1373.5,-480 1379.5,-474 1385.5,-474"/>
<text text-anchor="start" x="1381.5" y="-527.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollContext</text>
<polyline fill="none" stroke="#1c2123" points="1373.5,-520 1498.5,-520 "/>
<text text-anchor="middle" x="1436" y="-504.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv_wb.write_opt</text>
<polyline fill="none" stroke="#1c2123" points="1373.5,-497 1498.5,-497 "/>
<text text-anchor="middle" x="1436" y="-481.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将kv_wb写入磁盘</text>
</g>
<!-- PollContext_kv_wb&#45;&gt;PollContext_kv_wb_write_opt -->
<g id="edge32" class="edge">
<title>PollContext_kv_wb&#45;&gt;PollContext_kv_wb_write_opt</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1297.16,-455.6C1317.39,-463.37 1341.47,-472.61 1363.8,-481.17"/>
<polygon fill="green" stroke="green" points="1362.65,-484.48 1373.24,-484.8 1365.16,-477.95 1362.65,-484.48"/>
</g>
<!-- PollContext_tick_batch -->
<g id="node35" class="node">
<title>PollContext_tick_batch</title>
<path fill="none" stroke="#1c2123" d="M1309,-746.5C1309,-746.5 1189,-746.5 1189,-746.5 1183,-746.5 1177,-740.5 1177,-734.5 1177,-734.5 1177,-722.5 1177,-722.5 1177,-716.5 1183,-710.5 1189,-710.5 1189,-710.5 1309,-710.5 1309,-710.5 1315,-710.5 1321,-716.5 1321,-722.5 1321,-722.5 1321,-734.5 1321,-734.5 1321,-740.5 1315,-746.5 1309,-746.5"/>
<text text-anchor="middle" x="1249" y="-724.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollContext_tick_batch</text>
</g>
<!-- flush_ticks&#45;&gt;PollContext_tick_batch -->
<g id="edge39" class="edge">
<title>flush_ticks&#45;&gt;PollContext_tick_batch</title>
<path fill="none" stroke="#666666" d="M394.15,-752.12C525.46,-826.44 882.28,-1001.04 1141,-871.5 1189.07,-847.43 1221.11,-790.37 1236.78,-756.05"/>
<polygon fill="#666666" stroke="#666666" points="1240.11,-757.16 1240.94,-746.6 1233.71,-754.34 1240.11,-757.16"/>
</g>
<!-- handle_raft_ready&#45;&gt;PollContext_kv_wb_write_opt -->
<g id="edge28" class="edge">
<title>handle_raft_ready&#45;&gt;PollContext_kv_wb_write_opt</title>
<path fill="none" stroke="#666666" d="M418.2,-507.32C512.67,-512.95 679.76,-521.5 823,-521.5 823,-521.5 823,-521.5 1049.5,-521.5 1158.93,-521.5 1285.73,-516.2 1363.14,-512.37"/>
<polygon fill="#666666" stroke="#666666" points="1363.45,-515.86 1373.26,-511.86 1363.1,-508.87 1363.45,-515.86"/>
</g>
<!-- handle_raft_ready&#45;&gt;PollContext_engines_raft_consume_and_shrink -->
<g id="edge29" class="edge">
<title>handle_raft_ready&#45;&gt;PollContext_engines_raft_consume_and_shrink</title>
<path fill="none" stroke="#666666" d="M418.2,-497.68C512.67,-492.05 679.76,-483.5 823,-483.5 823,-483.5 823,-483.5 1049.5,-483.5 1170.46,-483.5 1204.21,-495.98 1321,-464.5 1336.11,-460.43 1351.6,-454.31 1366.1,-447.6"/>
<polygon fill="#666666" stroke="#666666" points="1367.96,-450.59 1375.47,-443.11 1364.94,-444.27 1367.96,-450.59"/>
</g>
<!-- PeerFsmDelegate_post_raft_ready_append -->
<g id="node32" class="node">
<title>PeerFsmDelegate_post_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M532.5,-633.5C532.5,-633.5 655.5,-633.5 655.5,-633.5 661.5,-633.5 667.5,-639.5 667.5,-645.5 667.5,-645.5 667.5,-705.5 667.5,-705.5 667.5,-711.5 661.5,-717.5 655.5,-717.5 655.5,-717.5 532.5,-717.5 532.5,-717.5 526.5,-717.5 520.5,-711.5 520.5,-705.5 520.5,-705.5 520.5,-645.5 520.5,-645.5 520.5,-639.5 526.5,-633.5 532.5,-633.5"/>
<text text-anchor="start" x="528.5" y="-702.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate</text>
<polyline fill="none" stroke="#1c2123" points="520.5,-694.5 667.5,-694.5 "/>
<text text-anchor="start" x="528.5" y="-679.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">post_raft_ready_append</text>
<polyline fill="none" stroke="#1c2123" points="520.5,-671.5 667.5,-671.5 "/>
<text text-anchor="start" x="528.5" y="-656.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft消息写完磁盘后</text>
<text text-anchor="start" x="528.5" y="-641.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 做一些更新操作</text>
</g>
<!-- handle_raft_ready&#45;&gt;PeerFsmDelegate_post_raft_ready_append -->
<g id="edge30" class="edge">
<title>handle_raft_ready&#45;&gt;PeerFsmDelegate_post_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M376.46,-525.65C413.86,-551.54 475.47,-594.17 523.43,-627.36"/>
<polygon fill="#666666" stroke="#666666" points="521.7,-630.42 531.91,-633.23 525.68,-624.66 521.7,-630.42"/>
</g>
<!-- PeerFsmDelegate_post_raft_ready_append&#45;&gt;Peer_handle_raft_ready_advance -->
<g id="edge33" class="edge">
<title>PeerFsmDelegate_post_raft_ready_append&#45;&gt;Peer_handle_raft_ready_advance</title>
<path fill="none" stroke="#666666" d="M667.77,-675.5C687.7,-675.5 709.58,-675.5 730.47,-675.5"/>
<polygon fill="#666666" stroke="#666666" points="730.62,-679 740.62,-675.5 730.62,-672 730.62,-679"/>
</g>
<!-- PeerFsmDelegate_post_raft_ready_append&#45;&gt;Peer_post_raft_ready_append -->
<g id="edge34" class="edge">
<title>PeerFsmDelegate_post_raft_ready_append&#45;&gt;Peer_post_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M667.77,-709.01C698.7,-723.25 734.3,-739.65 763.61,-753.15"/>
<polygon fill="#666666" stroke="#666666" points="762.34,-756.42 772.89,-757.42 765.27,-750.06 762.34,-756.42"/>
</g>
<!-- Peer_schedule_ticks -->
<g id="node36" class="node">
<title>Peer_schedule_ticks</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M772,-550.5C772,-550.5 876,-550.5 876,-550.5 882,-550.5 888,-556.5 888,-562.5 888,-562.5 888,-574.5 888,-574.5 888,-580.5 882,-586.5 876,-586.5 876,-586.5 772,-586.5 772,-586.5 766,-586.5 760,-580.5 760,-574.5 760,-574.5 760,-562.5 760,-562.5 760,-556.5 766,-550.5 772,-550.5"/>
<text text-anchor="middle" x="824" y="-564.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Peer::schedule_ticks</text>
</g>
<!-- Peer_schedule_ticks&#45;&gt;PollContext_tick_batch -->
<g id="edge40" class="edge">
<title>Peer_schedule_ticks&#45;&gt;PollContext_tick_batch</title>
<path fill="none" stroke="#666666" d="M888.26,-556.03C955.22,-546.16 1061.96,-540.21 1141,-582.5 1189.04,-608.21 1221.09,-666.06 1236.77,-700.73"/>
<polygon fill="#666666" stroke="#666666" points="1233.73,-702.5 1240.94,-710.26 1240.14,-699.7 1233.73,-702.5"/>
</g>
</g>
</svg>
