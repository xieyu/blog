<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raftsnapshot Pages: 1 -->
<svg width="1184pt" height="516pt"
 viewBox="0.00 0.00 1184.00 516.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 512)">
<title>raftsnapshot</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-512 1180,-512 1180,4 -4,4"/>
<!-- RaftSnapshotData -->
<g id="node1" class="node">
<title>RaftSnapshotData</title>
<path fill="none" stroke="#1c2123" d="M245,-235.5C245,-235.5 393,-235.5 393,-235.5 399,-235.5 405,-241.5 405,-247.5 405,-247.5 405,-361.5 405,-361.5 405,-367.5 399,-373.5 393,-373.5 393,-373.5 245,-373.5 245,-373.5 239,-373.5 233,-367.5 233,-361.5 233,-361.5 233,-247.5 233,-247.5 233,-241.5 239,-235.5 245,-235.5"/>
<text text-anchor="middle" x="319" y="-358.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftSnapshotData</text>
<polyline fill="none" stroke="#1c2123" points="233,-350.5 405,-350.5 "/>
<text text-anchor="start" x="241" y="-335.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">metapb.Region region = 1;</text>
<polyline fill="none" stroke="#1c2123" points="233,-327.5 405,-327.5 "/>
<text text-anchor="start" x="241" y="-312.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 file_size = 2;</text>
<polyline fill="none" stroke="#1c2123" points="233,-304.5 405,-304.5 "/>
<text text-anchor="start" x="241" y="-289.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated KeyValue data = 3;</text>
<polyline fill="none" stroke="#1c2123" points="233,-281.5 405,-281.5 "/>
<text text-anchor="start" x="241" y="-266.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 version = 4;</text>
<polyline fill="none" stroke="#1c2123" points="233,-258.5 405,-258.5 "/>
<text text-anchor="start" x="241" y="-243.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapshotMeta meta = 5;</text>
</g>
<!-- KeyValue -->
<g id="node2" class="node">
<title>KeyValue</title>
<path fill="none" stroke="#1c2123" d="M512.5,-275C512.5,-275 592.5,-275 592.5,-275 598.5,-275 604.5,-281 604.5,-287 604.5,-287 604.5,-332 604.5,-332 604.5,-338 598.5,-344 592.5,-344 592.5,-344 512.5,-344 512.5,-344 506.5,-344 500.5,-338 500.5,-332 500.5,-332 500.5,-287 500.5,-287 500.5,-281 506.5,-275 512.5,-275"/>
<text text-anchor="middle" x="552.5" y="-328.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">KeyValue</text>
<polyline fill="none" stroke="#1c2123" points="500.5,-321 604.5,-321 "/>
<text text-anchor="start" x="508.5" y="-305.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">bytes key = 1;</text>
<polyline fill="none" stroke="#1c2123" points="500.5,-298 604.5,-298 "/>
<text text-anchor="start" x="508.5" y="-282.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">bytes value = 2;</text>
</g>
<!-- RaftSnapshotData&#45;&gt;KeyValue -->
<g id="edge1" class="edge">
<title>RaftSnapshotData&#45;&gt;KeyValue</title>
<path fill="none" stroke="#666666" d="M405.22,-306.34C433.44,-306.95 464.28,-307.62 490.33,-308.18"/>
<polygon fill="#666666" stroke="#666666" points="490.36,-311.68 500.43,-308.4 490.51,-304.68 490.36,-311.68"/>
</g>
<!-- SnapshotMeta -->
<g id="node3" class="node">
<title>SnapshotMeta</title>
<path fill="none" stroke="#1c2123" d="M453,-124C453,-124 652,-124 652,-124 658,-124 664,-130 664,-136 664,-136 664,-181 664,-181 664,-187 658,-193 652,-193 652,-193 453,-193 453,-193 447,-193 441,-187 441,-181 441,-181 441,-136 441,-136 441,-130 447,-124 453,-124"/>
<text text-anchor="middle" x="552.5" y="-177.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapshotMeta</text>
<polyline fill="none" stroke="#1c2123" points="441,-170 664,-170 "/>
<text text-anchor="start" x="449" y="-154.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated SnapshotCFFile cf_files = 1;</text>
<polyline fill="none" stroke="#1c2123" points="441,-147 664,-147 "/>
<text text-anchor="start" x="449" y="-131.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">bool for_balance = 2;</text>
</g>
<!-- RaftSnapshotData&#45;&gt;SnapshotMeta -->
<g id="edge2" class="edge">
<title>RaftSnapshotData&#45;&gt;SnapshotMeta</title>
<path fill="none" stroke="#666666" d="M405.02,-235.68C416.84,-227.15 429.04,-218.85 441,-211.5 448.65,-206.79 456.79,-202.2 465.04,-197.81"/>
<polygon fill="#666666" stroke="#666666" points="466.77,-200.85 474.02,-193.12 463.53,-194.64 466.77,-200.85"/>
</g>
<!-- Region -->
<g id="node4" class="node">
<title>Region</title>
<path fill="none" stroke="#1c2123" d="M568.5,-256.5C568.5,-256.5 536.5,-256.5 536.5,-256.5 530.5,-256.5 524.5,-250.5 524.5,-244.5 524.5,-244.5 524.5,-232.5 524.5,-232.5 524.5,-226.5 530.5,-220.5 536.5,-220.5 536.5,-220.5 568.5,-220.5 568.5,-220.5 574.5,-220.5 580.5,-226.5 580.5,-232.5 580.5,-232.5 580.5,-244.5 580.5,-244.5 580.5,-250.5 574.5,-256.5 568.5,-256.5"/>
<text text-anchor="middle" x="552.5" y="-234.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region</text>
</g>
<!-- RaftSnapshotData&#45;&gt;Region -->
<g id="edge3" class="edge">
<title>RaftSnapshotData&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M405.04,-276.24C417.07,-272.49 429.32,-268.8 441,-265.5 465.17,-258.66 492.6,-251.95 514.08,-246.93"/>
<polygon fill="#666666" stroke="#666666" points="515.16,-250.28 524.11,-244.61 513.58,-243.46 515.16,-250.28"/>
</g>
<!-- SnapshotCFFile -->
<g id="node5" class="node">
<title>SnapshotCFFile</title>
<path fill="none" stroke="#1c2123" d="M712,-107.5C712,-107.5 824,-107.5 824,-107.5 830,-107.5 836,-113.5 836,-119.5 836,-119.5 836,-187.5 836,-187.5 836,-193.5 830,-199.5 824,-199.5 824,-199.5 712,-199.5 712,-199.5 706,-199.5 700,-193.5 700,-187.5 700,-187.5 700,-119.5 700,-119.5 700,-113.5 706,-107.5 712,-107.5"/>
<text text-anchor="middle" x="768" y="-184.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapshotCFFile</text>
<polyline fill="none" stroke="#1c2123" points="700,-176.5 836,-176.5 "/>
<text text-anchor="start" x="708" y="-161.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">string cf = 1;</text>
<polyline fill="none" stroke="#1c2123" points="700,-153.5 836,-153.5 "/>
<text text-anchor="start" x="708" y="-138.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 size = 2;</text>
<polyline fill="none" stroke="#1c2123" points="700,-130.5 836,-130.5 "/>
<text text-anchor="start" x="708" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint32 checksum = 3;</text>
</g>
<!-- SnapshotMeta&#45;&gt;SnapshotCFFile -->
<g id="edge4" class="edge">
<title>SnapshotMeta&#45;&gt;SnapshotCFFile</title>
<path fill="none" stroke="#666666" d="M664,-155.91C672.68,-155.71 681.33,-155.51 689.71,-155.31"/>
<polygon fill="#666666" stroke="#666666" points="689.88,-158.81 699.8,-155.07 689.72,-151.81 689.88,-158.81"/>
</g>
<!-- CfFile -->
<g id="node9" class="node">
<title>CfFile</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M884,-0.5C884,-0.5 1164,-0.5 1164,-0.5 1170,-0.5 1176,-6.5 1176,-12.5 1176,-12.5 1176,-218.5 1176,-218.5 1176,-224.5 1170,-230.5 1164,-230.5 1164,-230.5 884,-230.5 884,-230.5 878,-230.5 872,-224.5 872,-218.5 872,-218.5 872,-12.5 872,-12.5 872,-6.5 878,-0.5 884,-0.5"/>
<text text-anchor="middle" x="1024" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">CfFile</text>
<polyline fill="none" stroke="#8a8898" points="872,-207.5 1176,-207.5 "/>
<text text-anchor="start" x="880" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub cf: CfName,</text>
<polyline fill="none" stroke="#8a8898" points="872,-184.5 1176,-184.5 "/>
<text text-anchor="start" x="880" y="-169.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub path: PathBuf,</text>
<polyline fill="none" stroke="#8a8898" points="872,-161.5 1176,-161.5 "/>
<text text-anchor="start" x="880" y="-146.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub tmp_path: PathBuf,</text>
<polyline fill="none" stroke="#8a8898" points="872,-138.5 1176,-138.5 "/>
<text text-anchor="start" x="880" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub clone_path: PathBuf,</text>
<polyline fill="none" stroke="#8a8898" points="872,-115.5 1176,-115.5 "/>
<text text-anchor="start" x="880" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">file_for_sending: Option&lt;Box&lt;dyn Read + Send&gt;&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="872,-92.5 1176,-92.5 "/>
<text text-anchor="start" x="880" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">file_for_recving: Option&lt;CfFileForRecving&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="872,-69.5 1176,-69.5 "/>
<text text-anchor="start" x="880" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub kv_count: u64,</text>
<polyline fill="none" stroke="#8a8898" points="872,-46.5 1176,-46.5 "/>
<text text-anchor="start" x="880" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub size: u64,</text>
<polyline fill="none" stroke="#8a8898" points="872,-23.5 1176,-23.5 "/>
<text text-anchor="start" x="880" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub checksum: u32,</text>
</g>
<!-- SnapshotCFFile&#45;&gt;CfFile -->
<g id="edge7" class="edge">
<title>SnapshotCFFile&#45;&gt;CfFile</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M836.07,-143.47C844.29,-142.24 852.95,-140.94 861.85,-139.61"/>
<polygon fill="green" stroke="green" points="862.62,-143.03 871.99,-138.09 861.58,-136.11 862.62,-143.03"/>
</g>
<!-- Snapshot -->
<g id="node6" class="node">
<title>Snapshot</title>
<path fill="none" stroke="#1c2123" d="M12,-404C12,-404 185,-404 185,-404 191,-404 197,-410 197,-416 197,-416 197,-461 197,-461 197,-467 191,-473 185,-473 185,-473 12,-473 12,-473 6,-473 0,-467 0,-461 0,-461 0,-416 0,-416 0,-410 6,-404 12,-404"/>
<text text-anchor="middle" x="98.5" y="-457.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Snapshot</text>
<polyline fill="none" stroke="#1c2123" points="0,-450 197,-450 "/>
<text text-anchor="start" x="8" y="-434.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">bytes data = 1;</text>
<polyline fill="none" stroke="#1c2123" points="0,-427 197,-427 "/>
<text text-anchor="start" x="8" y="-411.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapshotMetadata metadata = 2;</text>
</g>
<!-- SnapshotMetadata -->
<g id="node7" class="node">
<title>SnapshotMetadata</title>
<path fill="none" stroke="#1c2123" d="M253,-392.5C253,-392.5 385,-392.5 385,-392.5 391,-392.5 397,-398.5 397,-404.5 397,-404.5 397,-472.5 397,-472.5 397,-478.5 391,-484.5 385,-484.5 385,-484.5 253,-484.5 253,-484.5 247,-484.5 241,-478.5 241,-472.5 241,-472.5 241,-404.5 241,-404.5 241,-398.5 247,-392.5 253,-392.5"/>
<text text-anchor="middle" x="319" y="-469.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapshotMetadata</text>
<polyline fill="none" stroke="#1c2123" points="241,-461.5 397,-461.5 "/>
<text text-anchor="start" x="249" y="-446.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ConfState conf_state = 1;</text>
<polyline fill="none" stroke="#1c2123" points="241,-438.5 397,-438.5 "/>
<text text-anchor="start" x="249" y="-423.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 index = 2;</text>
<polyline fill="none" stroke="#1c2123" points="241,-415.5 397,-415.5 "/>
<text text-anchor="start" x="249" y="-400.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 term = 3;</text>
</g>
<!-- Snapshot&#45;&gt;SnapshotMetadata -->
<g id="edge5" class="edge">
<title>Snapshot&#45;&gt;SnapshotMetadata</title>
<path fill="none" stroke="#666666" d="M197.25,-438.5C208.47,-438.5 219.86,-438.5 230.92,-438.5"/>
<polygon fill="#666666" stroke="#666666" points="230.99,-442 240.99,-438.5 230.99,-435 230.99,-442"/>
</g>
<!-- ConfState -->
<g id="node8" class="node">
<title>ConfState</title>
<path fill="none" stroke="#1c2123" d="M455.5,-369.5C455.5,-369.5 649.5,-369.5 649.5,-369.5 655.5,-369.5 661.5,-375.5 661.5,-381.5 661.5,-381.5 661.5,-495.5 661.5,-495.5 661.5,-501.5 655.5,-507.5 649.5,-507.5 649.5,-507.5 455.5,-507.5 455.5,-507.5 449.5,-507.5 443.5,-501.5 443.5,-495.5 443.5,-495.5 443.5,-381.5 443.5,-381.5 443.5,-375.5 449.5,-369.5 455.5,-369.5"/>
<text text-anchor="middle" x="552.5" y="-492.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ConfState</text>
<polyline fill="none" stroke="#1c2123" points="443.5,-484.5 661.5,-484.5 "/>
<text text-anchor="start" x="451.5" y="-469.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated uint64 voters = 1;</text>
<polyline fill="none" stroke="#1c2123" points="443.5,-461.5 661.5,-461.5 "/>
<text text-anchor="start" x="451.5" y="-446.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated uint64 learners = 2;</text>
<polyline fill="none" stroke="#1c2123" points="443.5,-438.5 661.5,-438.5 "/>
<text text-anchor="start" x="451.5" y="-423.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated uint64 voters_outgoing = 3;</text>
<polyline fill="none" stroke="#1c2123" points="443.5,-415.5 661.5,-415.5 "/>
<text text-anchor="start" x="451.5" y="-400.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated uint64 learners_next = 4;</text>
<polyline fill="none" stroke="#1c2123" points="443.5,-392.5 661.5,-392.5 "/>
<text text-anchor="start" x="451.5" y="-377.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">bool auto_leave = 5;</text>
</g>
<!-- SnapshotMetadata&#45;&gt;ConfState -->
<g id="edge6" class="edge">
<title>SnapshotMetadata&#45;&gt;ConfState</title>
<path fill="none" stroke="#666666" d="M397.09,-438.5C408.7,-438.5 420.9,-438.5 433.13,-438.5"/>
<polygon fill="#666666" stroke="#666666" points="433.41,-442 443.41,-438.5 433.41,-435 433.41,-442"/>
</g>
<!-- MetaFile -->
<g id="node10" class="node">
<title>MetaFile</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M252.5,-101C252.5,-101 385.5,-101 385.5,-101 391.5,-101 397.5,-107 397.5,-113 397.5,-113 397.5,-204 397.5,-204 397.5,-210 391.5,-216 385.5,-216 385.5,-216 252.5,-216 252.5,-216 246.5,-216 240.5,-210 240.5,-204 240.5,-204 240.5,-113 240.5,-113 240.5,-107 246.5,-101 252.5,-101"/>
<text text-anchor="middle" x="319" y="-200.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">MetaFile</text>
<polyline fill="none" stroke="#8a8898" points="240.5,-193 397.5,-193 "/>
<text text-anchor="start" x="248.5" y="-177.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub meta: SnapshotMeta,</text>
<polyline fill="none" stroke="#8a8898" points="240.5,-170 397.5,-170 "/>
<text text-anchor="start" x="248.5" y="-154.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub path: PathBuf,</text>
<polyline fill="none" stroke="#8a8898" points="240.5,-147 397.5,-147 "/>
<text text-anchor="start" x="248.5" y="-131.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub file: Option&lt;File&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="240.5,-124 397.5,-124 "/>
<text text-anchor="start" x="248.5" y="-108.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub tmp_path: PathBuf,</text>
</g>
<!-- MetaFile&#45;&gt;SnapshotMeta -->
<g id="edge8" class="edge">
<title>MetaFile&#45;&gt;SnapshotMeta</title>
<path fill="none" stroke="#666666" d="M397.73,-158.5C408.29,-158.5 419.32,-158.5 430.42,-158.5"/>
<polygon fill="#666666" stroke="#666666" points="430.62,-162 440.62,-158.5 430.62,-155 430.62,-162"/>
</g>
<!-- Snap -->
<g id="node11" class="node">
<title>Snap</title>
<path fill="none" stroke="#1c2123" d="M34.5,-12C34.5,-12 162.5,-12 162.5,-12 168.5,-12 174.5,-18 174.5,-24 174.5,-24 174.5,-207 174.5,-207 174.5,-213 168.5,-219 162.5,-219 162.5,-219 34.5,-219 34.5,-219 28.5,-219 22.5,-213 22.5,-207 22.5,-207 22.5,-24 22.5,-24 22.5,-18 28.5,-12 34.5,-12"/>
<text text-anchor="middle" x="98.5" y="-203.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Snap</text>
<polyline fill="none" stroke="#1c2123" points="22.5,-196 174.5,-196 "/>
<text text-anchor="start" x="30.5" y="-180.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">key: SnapKey,</text>
<polyline fill="none" stroke="#1c2123" points="22.5,-173 174.5,-173 "/>
<text text-anchor="start" x="30.5" y="-157.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">display_path: String,</text>
<polyline fill="none" stroke="#1c2123" points="22.5,-150 174.5,-150 "/>
<text text-anchor="start" x="30.5" y="-134.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">dir_path: PathBuf,</text>
<polyline fill="none" stroke="#1c2123" points="22.5,-127 174.5,-127 "/>
<text text-anchor="start" x="30.5" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">cf_files: Vec&lt;CfFile&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="22.5,-104 174.5,-104 "/>
<text text-anchor="start" x="30.5" y="-88.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">cf_index: usize,</text>
<polyline fill="none" stroke="#1c2123" points="22.5,-81 174.5,-81 "/>
<text text-anchor="start" x="30.5" y="-65.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">meta_file: MetaFile,</text>
<polyline fill="none" stroke="#1c2123" points="22.5,-58 174.5,-58 "/>
<text text-anchor="start" x="30.5" y="-42.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">hold_tmp_files: bool,</text>
<polyline fill="none" stroke="#1c2123" points="22.5,-35 174.5,-35 "/>
<text text-anchor="start" x="30.5" y="-19.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">mgr: SnapManagerCore,</text>
</g>
<!-- Snap&#45;&gt;CfFile -->
<g id="edge9" class="edge">
<title>Snap&#45;&gt;CfFile</title>
<path fill="none" stroke="#666666" d="M174.73,-99.56C193.66,-96.22 214,-93.19 233,-91.5 319.54,-83.78 649.16,-87.22 836,-97.5 844.37,-97.96 852.94,-98.51 861.59,-99.12"/>
<polygon fill="#666666" stroke="#666666" points="861.54,-102.63 871.78,-99.88 862.06,-95.65 861.54,-102.63"/>
</g>
<!-- Snap&#45;&gt;MetaFile -->
<g id="edge10" class="edge">
<title>Snap&#45;&gt;MetaFile</title>
<path fill="none" stroke="#666666" d="M174.7,-130.3C192.69,-133.84 212.06,-137.65 230.56,-141.29"/>
<polygon fill="#666666" stroke="#666666" points="229.95,-144.74 240.44,-143.24 231.3,-137.87 229.95,-144.74"/>
</g>
</g>
</svg>
