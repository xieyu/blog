<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raft_storage Pages: 1 -->
<svg width="2828pt" height="1527pt"
 viewBox="0.00 0.00 2828.00 1527.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1523)">
<title>raft_storage</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1523 2824,-1523 2824,4 -4,4"/>
<!-- RaftCore_new -->
<g id="node1" class="node">
<title>RaftCore_new</title>
<path fill="none" stroke="#1c2123" d="M1863,-1480C1863,-1480 1792,-1480 1792,-1480 1786,-1480 1780,-1474 1780,-1468 1780,-1468 1780,-1456 1780,-1456 1780,-1450 1786,-1444 1792,-1444 1792,-1444 1863,-1444 1863,-1444 1869,-1444 1875,-1450 1875,-1456 1875,-1456 1875,-1468 1875,-1468 1875,-1474 1869,-1480 1863,-1480"/>
<text text-anchor="middle" x="1827.5" y="-1458.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_new</text>
</g>
<!-- Storage_initial_state -->
<g id="node2" class="node">
<title>Storage_initial_state</title>
<path fill="none" stroke="#1c2123" d="M2808,-1519C2808,-1519 2704,-1519 2704,-1519 2698,-1519 2692,-1513 2692,-1507 2692,-1507 2692,-1495 2692,-1495 2692,-1489 2698,-1483 2704,-1483 2704,-1483 2808,-1483 2808,-1483 2814,-1483 2820,-1489 2820,-1495 2820,-1495 2820,-1507 2820,-1507 2820,-1513 2814,-1519 2808,-1519"/>
<text text-anchor="middle" x="2756" y="-1497.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage_initial_state</text>
</g>
<!-- RaftCore_new&#45;&gt;Storage_initial_state -->
<g id="edge1" class="edge">
<title>RaftCore_new&#45;&gt;Storage_initial_state</title>
<path fill="none" stroke="#666666" d="M1875.14,-1466.08C1909.39,-1468.95 1957.06,-1472.68 1999,-1475 2249.16,-1488.83 2546.33,-1496.49 2681.51,-1499.49"/>
<polygon fill="#666666" stroke="#666666" points="2681.66,-1502.99 2691.74,-1499.72 2681.82,-1496 2681.66,-1502.99"/>
</g>
<!-- RaftCore_commit_apply -->
<g id="node3" class="node">
<title>RaftCore_commit_apply</title>
<path fill="#feed9b" stroke="#f7e495" d="M2017,-1350C2017,-1350 2194,-1350 2194,-1350 2200,-1350 2206,-1356 2206,-1362 2206,-1362 2206,-1422 2206,-1422 2206,-1428 2200,-1434 2194,-1434 2194,-1434 2017,-1434 2017,-1434 2011,-1434 2005,-1428 2005,-1422 2005,-1422 2005,-1362 2005,-1362 2005,-1356 2011,-1350 2017,-1350"/>
<text text-anchor="middle" x="2105.5" y="-1418.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RaftCore_commit_apply</text>
<polyline fill="none" stroke="#f7e495" points="2005,-1411 2206,-1411 "/>
<text text-anchor="start" x="2013" y="-1395.8" font-family="Times,serif" font-size="14.00" fill="#40575d">Commit that the Raft peer</text>
<text text-anchor="start" x="2013" y="-1380.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> has applied up to the given index</text>
<polyline fill="none" stroke="#f7e495" points="2005,-1373 2206,-1373 "/>
<text text-anchor="start" x="2013" y="-1357.8" font-family="Times,serif" font-size="14.00" fill="#40575d">影响pending_conf_index</text>
</g>
<!-- RaftCore_new&#45;&gt;RaftCore_commit_apply -->
<g id="edge2" class="edge">
<title>RaftCore_new&#45;&gt;RaftCore_commit_apply</title>
<path fill="none" stroke="#666666" d="M1875.01,-1450.2C1907.79,-1441.89 1953.11,-1430.4 1994.82,-1419.82"/>
<polygon fill="#666666" stroke="#666666" points="1995.95,-1423.14 2004.78,-1417.29 1994.23,-1416.36 1995.95,-1423.14"/>
</g>
<!-- RaftLog_new -->
<g id="node4" class="node">
<title>RaftLog_new</title>
<path fill="none" stroke="#1c2123" d="M2626.5,-1073C2626.5,-1073 2559.5,-1073 2559.5,-1073 2553.5,-1073 2547.5,-1067 2547.5,-1061 2547.5,-1061 2547.5,-1049 2547.5,-1049 2547.5,-1043 2553.5,-1037 2559.5,-1037 2559.5,-1037 2626.5,-1037 2626.5,-1037 2632.5,-1037 2638.5,-1043 2638.5,-1049 2638.5,-1049 2638.5,-1061 2638.5,-1061 2638.5,-1067 2632.5,-1073 2626.5,-1073"/>
<text text-anchor="middle" x="2593" y="-1051.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_new</text>
</g>
<!-- RaftCore_new&#45;&gt;RaftLog_new -->
<g id="edge3" class="edge">
<title>RaftCore_new&#45;&gt;RaftLog_new</title>
<path fill="none" stroke="#666666" d="M1875.05,-1463.54C2010.98,-1467.03 2403.52,-1469.6 2494,-1387 2583.16,-1305.61 2592.74,-1147.53 2592.73,-1083.23"/>
<polygon fill="#666666" stroke="#666666" points="2596.23,-1083.01 2592.64,-1073.04 2589.23,-1083.07 2596.23,-1083.01"/>
</g>
<!-- RaftCore_become_follower -->
<g id="node5" class="node">
<title>RaftCore_become_follower</title>
<path fill="none" stroke="#1c2123" d="M2033.5,-1124.5C2033.5,-1124.5 2177.5,-1124.5 2177.5,-1124.5 2183.5,-1124.5 2189.5,-1130.5 2189.5,-1136.5 2189.5,-1136.5 2189.5,-1173.5 2189.5,-1173.5 2189.5,-1179.5 2183.5,-1185.5 2177.5,-1185.5 2177.5,-1185.5 2033.5,-1185.5 2033.5,-1185.5 2027.5,-1185.5 2021.5,-1179.5 2021.5,-1173.5 2021.5,-1173.5 2021.5,-1136.5 2021.5,-1136.5 2021.5,-1130.5 2027.5,-1124.5 2033.5,-1124.5"/>
<text text-anchor="middle" x="2105.5" y="-1170.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_become_follower</text>
<polyline fill="none" stroke="#1c2123" points="2021.5,-1162.5 2189.5,-1162.5 "/>
<text text-anchor="start" x="2029.5" y="-1147.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">初始或者输了选票</text>
<text text-anchor="start" x="2029.5" y="-1132.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 成为follower</text>
</g>
<!-- RaftCore_new&#45;&gt;RaftCore_become_follower -->
<g id="edge4" class="edge">
<title>RaftCore_new&#45;&gt;RaftCore_become_follower</title>
<path fill="none" stroke="#666666" d="M1847.9,-1443.97C1876.02,-1417.09 1928.49,-1363.94 1963,-1311 1984.07,-1278.68 1974.62,-1261.91 1999,-1232 2011.44,-1216.73 2027.59,-1202.96 2043.49,-1191.43"/>
<polygon fill="#666666" stroke="#666666" points="2045.6,-1194.23 2051.76,-1185.61 2041.57,-1188.5 2045.6,-1194.23"/>
</g>
<!-- RaftLog_last_index -->
<g id="node15" class="node">
<title>RaftLog_last_index</title>
<path fill="none" stroke="#1c2123" d="M2643,-1019C2643,-1019 2543,-1019 2543,-1019 2537,-1019 2531,-1013 2531,-1007 2531,-1007 2531,-995 2531,-995 2531,-989 2537,-983 2543,-983 2543,-983 2643,-983 2643,-983 2649,-983 2655,-989 2655,-995 2655,-995 2655,-1007 2655,-1007 2655,-1013 2649,-1019 2643,-1019"/>
<text text-anchor="middle" x="2593" y="-997.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_last_index</text>
</g>
<!-- RaftCore_commit_apply&#45;&gt;RaftLog_last_index -->
<g id="edge31" class="edge">
<title>RaftCore_commit_apply&#45;&gt;RaftLog_last_index</title>
<path fill="none" stroke="#666666" d="M2206.42,-1407.77C2294.82,-1415.53 2420.81,-1410.37 2494,-1335 2589.71,-1236.44 2448.13,-1138.32 2530,-1028 2530.47,-1027.36 2530.96,-1026.74 2531.47,-1026.13"/>
<polygon fill="#666666" stroke="#666666" points="2534.1,-1028.47 2538.91,-1019.03 2529.26,-1023.4 2534.1,-1028.47"/>
</g>
<!-- RaftCore_append_entry -->
<g id="node29" class="node">
<title>RaftCore_append_entry</title>
<path fill="none" stroke="#1c2123" d="M2289.5,-963C2289.5,-963 2452.5,-963 2452.5,-963 2458.5,-963 2464.5,-969 2464.5,-975 2464.5,-975 2464.5,-1027 2464.5,-1027 2464.5,-1033 2458.5,-1039 2452.5,-1039 2452.5,-1039 2289.5,-1039 2289.5,-1039 2283.5,-1039 2277.5,-1033 2277.5,-1027 2277.5,-1027 2277.5,-975 2277.5,-975 2277.5,-969 2283.5,-963 2289.5,-963"/>
<text text-anchor="middle" x="2371" y="-1023.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_append_entry</text>
<polyline fill="none" stroke="#1c2123" points="2277.5,-1016 2464.5,-1016 "/>
<text text-anchor="start" x="2285.5" y="-1000.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Appends a slice of entries</text>
<text text-anchor="start" x="2285.5" y="-985.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> to the log</text>
<text text-anchor="start" x="2285.5" y="-970.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> only called by leader currently</text>
</g>
<!-- RaftCore_commit_apply&#45;&gt;RaftCore_append_entry -->
<g id="edge32" class="edge">
<title>RaftCore_commit_apply&#45;&gt;RaftCore_append_entry</title>
<path fill="none" stroke="#666666" d="M2166.89,-1349.92C2183.99,-1335.1 2200.94,-1317.07 2212,-1297 2257.71,-1214.07 2197.44,-1167.07 2248,-1087 2258.25,-1070.77 2272.79,-1056.73 2288.27,-1044.97"/>
<polygon fill="#666666" stroke="#666666" points="2290.41,-1047.74 2296.43,-1039.03 2286.29,-1042.08 2290.41,-1047.74"/>
</g>
<!-- Storage_first_index -->
<g id="node22" class="node">
<title>Storage_first_index</title>
<path fill="none" stroke="#1c2123" d="M2805,-819C2805,-819 2707,-819 2707,-819 2701,-819 2695,-813 2695,-807 2695,-807 2695,-795 2695,-795 2695,-789 2701,-783 2707,-783 2707,-783 2805,-783 2805,-783 2811,-783 2817,-789 2817,-795 2817,-795 2817,-807 2817,-807 2817,-813 2811,-819 2805,-819"/>
<text text-anchor="middle" x="2756" y="-797.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage_first_index</text>
</g>
<!-- RaftLog_new&#45;&gt;Storage_first_index -->
<g id="edge19" class="edge">
<title>RaftLog_new&#45;&gt;Storage_first_index</title>
<path fill="none" stroke="#666666" d="M2638.62,-1040.51C2644.97,-1037.11 2651.02,-1032.98 2656,-1028 2712.85,-971.18 2739.46,-876.3 2749.68,-829.24"/>
<polygon fill="#666666" stroke="#666666" points="2753.17,-829.66 2751.78,-819.16 2746.32,-828.24 2753.17,-829.66"/>
</g>
<!-- Storage_last_index -->
<g id="node23" class="node">
<title>Storage_last_index</title>
<path fill="none" stroke="#1c2123" d="M2804,-1046C2804,-1046 2708,-1046 2708,-1046 2702,-1046 2696,-1040 2696,-1034 2696,-1034 2696,-1022 2696,-1022 2696,-1016 2702,-1010 2708,-1010 2708,-1010 2804,-1010 2804,-1010 2810,-1010 2816,-1016 2816,-1022 2816,-1022 2816,-1034 2816,-1034 2816,-1040 2810,-1046 2804,-1046"/>
<text text-anchor="middle" x="2756" y="-1024.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage_last_index</text>
</g>
<!-- RaftLog_new&#45;&gt;Storage_last_index -->
<g id="edge20" class="edge">
<title>RaftLog_new&#45;&gt;Storage_last_index</title>
<path fill="none" stroke="#666666" d="M2638.85,-1047.48C2653.35,-1045.05 2669.79,-1042.29 2685.63,-1039.63"/>
<polygon fill="#666666" stroke="#666666" points="2686.66,-1043.01 2695.94,-1037.9 2685.5,-1036.11 2686.66,-1043.01"/>
</g>
<!-- RaftCore_reset -->
<g id="node30" class="node">
<title>RaftCore_reset</title>
<path fill="none" stroke="#1c2123" d="M2408,-1132C2408,-1132 2334,-1132 2334,-1132 2328,-1132 2322,-1126 2322,-1120 2322,-1120 2322,-1108 2322,-1108 2322,-1102 2328,-1096 2334,-1096 2334,-1096 2408,-1096 2408,-1096 2414,-1096 2420,-1102 2420,-1108 2420,-1108 2420,-1120 2420,-1120 2420,-1126 2414,-1132 2408,-1132"/>
<text text-anchor="middle" x="2371" y="-1110.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_reset</text>
</g>
<!-- RaftCore_become_follower&#45;&gt;RaftCore_reset -->
<g id="edge43" class="edge">
<title>RaftCore_become_follower&#45;&gt;RaftCore_reset</title>
<path fill="none" stroke="#666666" d="M2189.51,-1142.08C2229.19,-1135.91 2275.74,-1128.67 2311.62,-1123.08"/>
<polygon fill="#666666" stroke="#666666" points="2312.58,-1126.48 2321.92,-1121.48 2311.5,-1119.56 2312.58,-1126.48"/>
</g>
<!-- RaftLog_entries -->
<g id="node6" class="node">
<title>RaftLog_entries</title>
<path fill="none" stroke="#1c2123" d="M1758.5,-236.5C1758.5,-236.5 1896.5,-236.5 1896.5,-236.5 1902.5,-236.5 1908.5,-242.5 1908.5,-248.5 1908.5,-248.5 1908.5,-285.5 1908.5,-285.5 1908.5,-291.5 1902.5,-297.5 1896.5,-297.5 1896.5,-297.5 1758.5,-297.5 1758.5,-297.5 1752.5,-297.5 1746.5,-291.5 1746.5,-285.5 1746.5,-285.5 1746.5,-248.5 1746.5,-248.5 1746.5,-242.5 1752.5,-236.5 1758.5,-236.5"/>
<text text-anchor="middle" x="1827.5" y="-282.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_entries</text>
<polyline fill="none" stroke="#1c2123" points="1746.5,-274.5 1908.5,-274.5 "/>
<text text-anchor="start" x="1754.5" y="-259.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">准备要发送给follower的</text>
<text text-anchor="start" x="1754.5" y="-244.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> entries</text>
</g>
<!-- RaftLog_slice -->
<g id="node7" class="node">
<title>RaftLog_slice</title>
<path fill="none" stroke="#1c2123" d="M2140,-352C2140,-352 2071,-352 2071,-352 2065,-352 2059,-346 2059,-340 2059,-340 2059,-328 2059,-328 2059,-322 2065,-316 2071,-316 2071,-316 2140,-316 2140,-316 2146,-316 2152,-322 2152,-328 2152,-328 2152,-340 2152,-340 2152,-346 2146,-352 2140,-352"/>
<text text-anchor="middle" x="2105.5" y="-330.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_slice</text>
</g>
<!-- RaftLog_entries&#45;&gt;RaftLog_slice -->
<g id="edge5" class="edge">
<title>RaftLog_entries&#45;&gt;RaftLog_slice</title>
<path fill="none" stroke="#666666" d="M1908.7,-286.47C1953.75,-297.4 2008.82,-310.77 2049.07,-320.54"/>
<polygon fill="#666666" stroke="#666666" points="2048.42,-323.99 2058.97,-322.95 2050.08,-317.19 2048.42,-323.99"/>
</g>
<!-- Storage_entries -->
<g id="node8" class="node">
<title>Storage_entries</title>
<path fill="none" stroke="#1c2123" d="M2794.5,-112C2794.5,-112 2717.5,-112 2717.5,-112 2711.5,-112 2705.5,-106 2705.5,-100 2705.5,-100 2705.5,-88 2705.5,-88 2705.5,-82 2711.5,-76 2717.5,-76 2717.5,-76 2794.5,-76 2794.5,-76 2800.5,-76 2806.5,-82 2806.5,-88 2806.5,-88 2806.5,-100 2806.5,-100 2806.5,-106 2800.5,-112 2794.5,-112"/>
<text text-anchor="middle" x="2756" y="-90.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage_entries</text>
</g>
<!-- RaftLog_slice&#45;&gt;Storage_entries -->
<g id="edge6" class="edge">
<title>RaftLog_slice&#45;&gt;Storage_entries</title>
<path fill="none" stroke="#666666" d="M2152.1,-317.12C2267.02,-274.59 2568.44,-163.04 2696.3,-115.72"/>
<polygon fill="#666666" stroke="#666666" points="2697.77,-118.91 2705.94,-112.16 2695.34,-112.35 2697.77,-118.91"/>
</g>
<!-- RaftLog_must_check_outofbounds -->
<g id="node9" class="node">
<title>RaftLog_must_check_outofbounds</title>
<path fill="none" stroke="#1c2123" d="M2260,-354C2260,-354 2482,-354 2482,-354 2488,-354 2494,-360 2494,-366 2494,-366 2494,-388 2494,-388 2494,-394 2488,-400 2482,-400 2482,-400 2260,-400 2260,-400 2254,-400 2248,-394 2248,-388 2248,-388 2248,-366 2248,-366 2248,-360 2254,-354 2260,-354"/>
<text text-anchor="middle" x="2371" y="-384.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_must_check_outofbounds</text>
<polyline fill="none" stroke="#1c2123" points="2248,-377 2494,-377 "/>
<text text-anchor="middle" x="2371" y="-361.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">检查是否在[first_index, last_index)之间</text>
</g>
<!-- RaftLog_slice&#45;&gt;RaftLog_must_check_outofbounds -->
<g id="edge7" class="edge">
<title>RaftLog_slice&#45;&gt;RaftLog_must_check_outofbounds</title>
<path fill="none" stroke="#666666" d="M2152.1,-341.44C2176.15,-345.37 2207.04,-350.41 2237.94,-355.45"/>
<polygon fill="#666666" stroke="#666666" points="2237.53,-358.93 2247.97,-357.09 2238.66,-352.02 2237.53,-358.93"/>
</g>
<!-- RaftLog_first_index -->
<g id="node12" class="node">
<title>RaftLog_first_index</title>
<path fill="none" stroke="#1c2123" d="M2644,-395C2644,-395 2542,-395 2542,-395 2536,-395 2530,-389 2530,-383 2530,-383 2530,-371 2530,-371 2530,-365 2536,-359 2542,-359 2542,-359 2644,-359 2644,-359 2650,-359 2656,-365 2656,-371 2656,-371 2656,-383 2656,-383 2656,-389 2650,-395 2644,-395"/>
<text text-anchor="middle" x="2593" y="-373.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_first_index</text>
</g>
<!-- RaftLog_must_check_outofbounds&#45;&gt;RaftLog_first_index -->
<g id="edge28" class="edge">
<title>RaftLog_must_check_outofbounds&#45;&gt;RaftLog_first_index</title>
<path fill="none" stroke="#666666" d="M2494.22,-377C2502.85,-377 2511.37,-377 2519.57,-377"/>
<polygon fill="#666666" stroke="#666666" points="2519.78,-380.5 2529.78,-377 2519.78,-373.5 2519.78,-380.5"/>
</g>
<!-- RaftLog_must_check_outofbounds&#45;&gt;RaftLog_last_index -->
<g id="edge29" class="edge">
<title>RaftLog_must_check_outofbounds&#45;&gt;RaftLog_last_index</title>
<path fill="none" stroke="#666666" d="M2406.33,-400.2C2434.44,-421.1 2472.89,-454.41 2494,-493 2583.96,-657.44 2592.38,-891.36 2592.41,-972.21"/>
<polygon fill="#666666" stroke="#666666" points="2588.91,-972.56 2592.37,-982.58 2595.91,-972.59 2588.91,-972.56"/>
</g>
<!-- RaftLog_term -->
<g id="node10" class="node">
<title>RaftLog_term</title>
<path fill="none" stroke="#1c2123" d="M2327,-502.5C2327,-502.5 2415,-502.5 2415,-502.5 2421,-502.5 2427,-508.5 2427,-514.5 2427,-514.5 2427,-551.5 2427,-551.5 2427,-557.5 2421,-563.5 2415,-563.5 2415,-563.5 2327,-563.5 2327,-563.5 2321,-563.5 2315,-557.5 2315,-551.5 2315,-551.5 2315,-514.5 2315,-514.5 2315,-508.5 2321,-502.5 2327,-502.5"/>
<text text-anchor="middle" x="2371" y="-548.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_term</text>
<polyline fill="none" stroke="#1c2123" points="2315,-540.5 2427,-540.5 "/>
<text text-anchor="start" x="2323" y="-525.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">获取给定idx log</text>
<text text-anchor="start" x="2323" y="-510.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> entry的term</text>
</g>
<!-- Storage_term -->
<g id="node11" class="node">
<title>Storage_term</title>
<path fill="none" stroke="#1c2123" d="M2789,-551C2789,-551 2723,-551 2723,-551 2717,-551 2711,-545 2711,-539 2711,-539 2711,-527 2711,-527 2711,-521 2717,-515 2723,-515 2723,-515 2789,-515 2789,-515 2795,-515 2801,-521 2801,-527 2801,-527 2801,-539 2801,-539 2801,-545 2795,-551 2789,-551"/>
<text text-anchor="middle" x="2756" y="-529.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage_term</text>
</g>
<!-- RaftLog_term&#45;&gt;Storage_term -->
<g id="edge8" class="edge">
<title>RaftLog_term&#45;&gt;Storage_term</title>
<path fill="none" stroke="#666666" d="M2427.28,-533C2500.24,-533 2627.89,-533 2700.47,-533"/>
<polygon fill="#666666" stroke="#666666" points="2700.76,-536.5 2710.76,-533 2700.76,-529.5 2700.76,-536.5"/>
</g>
<!-- RaftLog_term&#45;&gt;RaftLog_first_index -->
<g id="edge9" class="edge">
<title>RaftLog_term&#45;&gt;RaftLog_first_index</title>
<path fill="none" stroke="#666666" d="M2415.2,-502.37C2457.08,-472.67 2519.76,-428.23 2558.14,-401.01"/>
<polygon fill="#666666" stroke="#666666" points="2560.28,-403.78 2566.42,-395.14 2556.24,-398.07 2560.28,-403.78"/>
</g>
<!-- RaftLog_first_index&#45;&gt;Storage_first_index -->
<g id="edge21" class="edge">
<title>RaftLog_first_index&#45;&gt;Storage_first_index</title>
<path fill="none" stroke="#666666" d="M2600.92,-395.22C2626.26,-461.95 2714.1,-693.29 2744.53,-773.42"/>
<polygon fill="#666666" stroke="#666666" points="2741.29,-774.74 2748.11,-782.85 2747.83,-772.26 2741.29,-774.74"/>
</g>
<!-- RaftLog_next_entries_since -->
<g id="node13" class="node">
<title>RaftLog_next_entries_since</title>
<path fill="none" stroke="#1c2123" d="M1900,-352C1900,-352 1755,-352 1755,-352 1749,-352 1743,-346 1743,-340 1743,-340 1743,-328 1743,-328 1743,-322 1749,-316 1755,-316 1755,-316 1900,-316 1900,-316 1906,-316 1912,-322 1912,-328 1912,-328 1912,-340 1912,-340 1912,-346 1906,-352 1900,-352"/>
<text text-anchor="middle" x="1827.5" y="-330.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_next_entries_since</text>
</g>
<!-- RaftLog_next_entries_since&#45;&gt;RaftLog_slice -->
<g id="edge10" class="edge">
<title>RaftLog_next_entries_since&#45;&gt;RaftLog_slice</title>
<path fill="none" stroke="#666666" d="M1912.06,-334C1956.33,-334 2009.51,-334 2048.74,-334"/>
<polygon fill="#666666" stroke="#666666" points="2048.9,-337.5 2058.9,-334 2048.9,-330.5 2048.9,-337.5"/>
</g>
<!-- RaftLog_next_entries_since&#45;&gt;RaftLog_first_index -->
<g id="edge25" class="edge">
<title>RaftLog_next_entries_since&#45;&gt;RaftLog_first_index</title>
<path fill="none" stroke="#666666" d="M1912.31,-318.05C1939.82,-313.53 1970.62,-309.23 1999,-307 2218.93,-289.69 2279.08,-294.21 2494,-344 2507.51,-347.13 2521.79,-351.38 2535.15,-355.78"/>
<polygon fill="#666666" stroke="#666666" points="2534.09,-359.12 2544.68,-359 2536.33,-352.48 2534.09,-359.12"/>
</g>
<!-- RaftLog_last_term -->
<g id="node14" class="node">
<title>RaftLog_last_term</title>
<path fill="none" stroke="#1c2123" d="M2022,-795C2022,-795 2189,-795 2189,-795 2195,-795 2201,-801 2201,-807 2201,-807 2201,-829 2201,-829 2201,-835 2195,-841 2189,-841 2189,-841 2022,-841 2022,-841 2016,-841 2010,-835 2010,-829 2010,-829 2010,-807 2010,-807 2010,-801 2016,-795 2022,-795"/>
<text text-anchor="middle" x="2105.5" y="-825.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_last_term</text>
<polyline fill="none" stroke="#1c2123" points="2010,-818 2201,-818 "/>
<text text-anchor="start" x="2018" y="-802.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">自己最后一个log entry的term</text>
</g>
<!-- RaftLog_last_term&#45;&gt;RaftLog_term -->
<g id="edge11" class="edge">
<title>RaftLog_last_term&#45;&gt;RaftLog_term</title>
<path fill="none" stroke="#666666" d="M2175.14,-794.95C2188.19,-788.73 2201.14,-781.13 2212,-772 2278.5,-716.11 2327.79,-625.26 2352.41,-573.15"/>
<polygon fill="#666666" stroke="#666666" points="2355.68,-574.43 2356.72,-563.89 2349.33,-571.48 2355.68,-574.43"/>
</g>
<!-- RaftLog_last_term&#45;&gt;RaftLog_last_index -->
<g id="edge12" class="edge">
<title>RaftLog_last_term&#45;&gt;RaftLog_last_index</title>
<path fill="none" stroke="#666666" d="M2201.02,-831.13C2282.12,-845.09 2400.38,-871.97 2494,-920 2521.84,-934.28 2548.89,-957.58 2567.5,-975.54"/>
<polygon fill="#666666" stroke="#666666" points="2565.35,-978.33 2574.93,-982.86 2570.27,-973.35 2565.35,-978.33"/>
</g>
<!-- RaftLog_last_index&#45;&gt;Storage_last_index -->
<g id="edge22" class="edge">
<title>RaftLog_last_index&#45;&gt;Storage_last_index</title>
<path fill="none" stroke="#666666" d="M2655.33,-1011.28C2665.32,-1012.96 2675.74,-1014.71 2685.91,-1016.41"/>
<polygon fill="#666666" stroke="#666666" points="2685.53,-1019.9 2695.97,-1018.1 2686.69,-1012.99 2685.53,-1019.9"/>
</g>
<!-- RaftLog_commit_info -->
<g id="node16" class="node">
<title>RaftLog_commit_info</title>
<path fill="none" stroke="#1c2123" d="M2163.5,-763C2163.5,-763 2047.5,-763 2047.5,-763 2041.5,-763 2035.5,-757 2035.5,-751 2035.5,-751 2035.5,-739 2035.5,-739 2035.5,-733 2041.5,-727 2047.5,-727 2047.5,-727 2163.5,-727 2163.5,-727 2169.5,-727 2175.5,-733 2175.5,-739 2175.5,-739 2175.5,-751 2175.5,-751 2175.5,-757 2169.5,-763 2163.5,-763"/>
<text text-anchor="middle" x="2105.5" y="-741.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_commit_info</text>
</g>
<!-- RaftLog_commit_info&#45;&gt;RaftLog_term -->
<g id="edge13" class="edge">
<title>RaftLog_commit_info&#45;&gt;RaftLog_term</title>
<path fill="none" stroke="#666666" d="M2150.15,-726.94C2169.89,-717.83 2193,-705.77 2212,-692 2260.57,-656.8 2307.94,-606.35 2337.93,-571.77"/>
<polygon fill="#666666" stroke="#666666" points="2340.94,-573.64 2344.81,-563.77 2335.63,-569.07 2340.94,-573.64"/>
</g>
<!-- RaftLog_maybe_persist -->
<g id="node17" class="node">
<title>RaftLog_maybe_persist</title>
<path fill="#feed9b" stroke="#f7e495" d="M2041.5,-1242C2041.5,-1242 2169.5,-1242 2169.5,-1242 2175.5,-1242 2181.5,-1248 2181.5,-1254 2181.5,-1254 2181.5,-1276 2181.5,-1276 2181.5,-1282 2175.5,-1288 2169.5,-1288 2169.5,-1288 2041.5,-1288 2041.5,-1288 2035.5,-1288 2029.5,-1282 2029.5,-1276 2029.5,-1276 2029.5,-1254 2029.5,-1254 2029.5,-1248 2035.5,-1242 2041.5,-1242"/>
<text text-anchor="middle" x="2105.5" y="-1272.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RaftLog_maybe_persist</text>
<polyline fill="none" stroke="#f7e495" points="2029.5,-1265 2181.5,-1265 "/>
<text text-anchor="start" x="2037.5" y="-1249.8" font-family="Times,serif" font-size="14.00" fill="#40575d">更新RaftLog的persisted</text>
</g>
<!-- RaftLog_maybe_persist&#45;&gt;RaftLog_term -->
<g id="edge14" class="edge">
<title>RaftLog_maybe_persist&#45;&gt;RaftLog_term</title>
<path fill="none" stroke="#666666" d="M2158.74,-1241.95C2178.5,-1230.62 2199.26,-1215.03 2212,-1195 2270.34,-1103.24 2224.78,-1059.23 2248,-953 2278.89,-811.66 2331.38,-648.05 2356.21,-573.62"/>
<polygon fill="#666666" stroke="#666666" points="2359.67,-574.31 2359.52,-563.72 2353.03,-572.09 2359.67,-574.31"/>
</g>
<!-- RaftLog_maybe_commit -->
<g id="node18" class="node">
<title>RaftLog_maybe_commit</title>
<path fill="none" stroke="#1c2123" d="M2011,-422.5C2011,-422.5 2200,-422.5 2200,-422.5 2206,-422.5 2212,-428.5 2212,-434.5 2212,-434.5 2212,-471.5 2212,-471.5 2212,-477.5 2206,-483.5 2200,-483.5 2200,-483.5 2011,-483.5 2011,-483.5 2005,-483.5 1999,-477.5 1999,-471.5 1999,-471.5 1999,-434.5 1999,-434.5 1999,-428.5 2005,-422.5 2011,-422.5"/>
<text text-anchor="middle" x="2105.5" y="-468.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_maybe_commit</text>
<polyline fill="none" stroke="#1c2123" points="1999,-460.5 2212,-460.5 "/>
<text text-anchor="start" x="2007" y="-445.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Attempts to commit the idx</text>
<text text-anchor="start" x="2007" y="-430.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> and term and returns whether it did</text>
</g>
<!-- RaftLog_maybe_commit&#45;&gt;RaftLog_term -->
<g id="edge15" class="edge">
<title>RaftLog_maybe_commit&#45;&gt;RaftLog_term</title>
<path fill="none" stroke="#666666" d="M2207.25,-483.59C2240.01,-493.53 2275.48,-504.3 2304.93,-513.24"/>
<polygon fill="#666666" stroke="#666666" points="2304.08,-516.64 2314.67,-516.2 2306.12,-509.95 2304.08,-516.64"/>
</g>
<!-- RaftLog_maybe_append -->
<g id="node19" class="node">
<title>RaftLog_maybe_append</title>
<path fill="none" stroke="#1c2123" d="M1442.5,-732.5C1442.5,-732.5 1604.5,-732.5 1604.5,-732.5 1610.5,-732.5 1616.5,-738.5 1616.5,-744.5 1616.5,-744.5 1616.5,-811.5 1616.5,-811.5 1616.5,-817.5 1610.5,-823.5 1604.5,-823.5 1604.5,-823.5 1442.5,-823.5 1442.5,-823.5 1436.5,-823.5 1430.5,-817.5 1430.5,-811.5 1430.5,-811.5 1430.5,-744.5 1430.5,-744.5 1430.5,-738.5 1436.5,-732.5 1442.5,-732.5"/>
<text text-anchor="middle" x="1523.5" y="-808.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_maybe_append</text>
<polyline fill="none" stroke="#1c2123" points="1430.5,-800.5 1616.5,-800.5 "/>
<text text-anchor="start" x="1438.5" y="-785.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">找到conflict index</text>
<text text-anchor="start" x="1438.5" y="-770.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> start = (conflic_idx &#45; (idx +1))</text>
<text text-anchor="start" x="1438.5" y="-755.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将start之后的log entries </text>
<text text-anchor="start" x="1438.5" y="-740.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 用新的覆盖掉</text>
</g>
<!-- RaftLog_find_conflict -->
<g id="node20" class="node">
<title>RaftLog_find_conflict</title>
<path fill="none" stroke="#1c2123" d="M1736.5,-565C1736.5,-565 1918.5,-565 1918.5,-565 1924.5,-565 1930.5,-571 1930.5,-577 1930.5,-577 1930.5,-629 1930.5,-629 1930.5,-635 1924.5,-641 1918.5,-641 1918.5,-641 1736.5,-641 1736.5,-641 1730.5,-641 1724.5,-635 1724.5,-629 1724.5,-629 1724.5,-577 1724.5,-577 1724.5,-571 1730.5,-565 1736.5,-565"/>
<text text-anchor="middle" x="1827.5" y="-625.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_find_conflict</text>
<polyline fill="none" stroke="#1c2123" points="1724.5,-618 1930.5,-618 "/>
<text text-anchor="start" x="1732.5" y="-602.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">寻找第一个和leader的log entries</text>
<text text-anchor="start" x="1732.5" y="-587.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> conflict的log</text>
<text text-anchor="start" x="1732.5" y="-572.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 比较每个log entrie的term</text>
</g>
<!-- RaftLog_maybe_append&#45;&gt;RaftLog_find_conflict -->
<g id="edge16" class="edge">
<title>RaftLog_maybe_append&#45;&gt;RaftLog_find_conflict</title>
<path fill="none" stroke="#666666" d="M1616.7,-745.36C1630.86,-737.79 1644.56,-728.72 1656,-718 1680.67,-694.89 1666.37,-673.04 1692,-651 1699.12,-644.88 1707.07,-639.52 1715.45,-634.83"/>
<polygon fill="#666666" stroke="#666666" points="1717.09,-637.92 1724.33,-630.18 1713.85,-631.72 1717.09,-637.92"/>
</g>
<!-- RaftLog_match_term -->
<g id="node21" class="node">
<title>RaftLog_match_term</title>
<path fill="none" stroke="#1c2123" d="M2033.5,-502.5C2033.5,-502.5 2177.5,-502.5 2177.5,-502.5 2183.5,-502.5 2189.5,-508.5 2189.5,-514.5 2189.5,-514.5 2189.5,-551.5 2189.5,-551.5 2189.5,-557.5 2183.5,-563.5 2177.5,-563.5 2177.5,-563.5 2033.5,-563.5 2033.5,-563.5 2027.5,-563.5 2021.5,-557.5 2021.5,-551.5 2021.5,-551.5 2021.5,-514.5 2021.5,-514.5 2021.5,-508.5 2027.5,-502.5 2033.5,-502.5"/>
<text text-anchor="middle" x="2105.5" y="-548.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_match_term</text>
<polyline fill="none" stroke="#1c2123" points="2021.5,-540.5 2189.5,-540.5 "/>
<text text-anchor="start" x="2029.5" y="-525.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">比较term(idx)时候是否和</text>
<text text-anchor="start" x="2029.5" y="-510.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 给定的值match</text>
</g>
<!-- RaftLog_find_conflict&#45;&gt;RaftLog_match_term -->
<g id="edge17" class="edge">
<title>RaftLog_find_conflict&#45;&gt;RaftLog_match_term</title>
<path fill="none" stroke="#666666" d="M1930.88,-577.03C1957.27,-570.34 1985.53,-563.17 2011.42,-556.61"/>
<polygon fill="#666666" stroke="#666666" points="2012.38,-559.97 2021.21,-554.12 2010.66,-553.19 2012.38,-559.97"/>
</g>
<!-- RaftLog_match_term&#45;&gt;RaftLog_term -->
<g id="edge18" class="edge">
<title>RaftLog_match_term&#45;&gt;RaftLog_term</title>
<path fill="none" stroke="#666666" d="M2189.51,-533C2226.72,-533 2269.97,-533 2304.8,-533"/>
<polygon fill="#666666" stroke="#666666" points="2304.85,-536.5 2314.85,-533 2304.85,-529.5 2304.85,-536.5"/>
</g>
<!-- RaftLog_has_next_entries -->
<g id="node24" class="node">
<title>RaftLog_has_next_entries</title>
<path fill="none" stroke="#1c2123" d="M12,-101C12,-101 202,-101 202,-101 208,-101 214,-107 214,-113 214,-113 214,-165 214,-165 214,-171 208,-177 202,-177 202,-177 12,-177 12,-177 6,-177 0,-171 0,-165 0,-165 0,-113 0,-113 0,-107 6,-101 12,-101"/>
<text text-anchor="middle" x="107" y="-161.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_has_next_entries</text>
<polyline fill="none" stroke="#1c2123" points="0,-154 214,-154 "/>
<text text-anchor="start" x="8" y="-138.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">has_next_entries_since(self.applied)</text>
<text text-anchor="start" x="8" y="-123.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 返回是否有新的entries</text>
<text text-anchor="start" x="8" y="-108.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 只在测试中被调用过</text>
</g>
<!-- RaftLog_has_next_entries_since -->
<g id="node25" class="node">
<title>RaftLog_has_next_entries_since</title>
<path fill="none" stroke="#1c2123" d="M442.5,-113C442.5,-113 272.5,-113 272.5,-113 266.5,-113 260.5,-107 260.5,-101 260.5,-101 260.5,-89 260.5,-89 260.5,-83 266.5,-77 272.5,-77 272.5,-77 442.5,-77 442.5,-77 448.5,-77 454.5,-83 454.5,-89 454.5,-89 454.5,-101 454.5,-101 454.5,-107 448.5,-113 442.5,-113"/>
<text text-anchor="middle" x="357.5" y="-91.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_has_next_entries_since</text>
</g>
<!-- RaftLog_has_next_entries&#45;&gt;RaftLog_has_next_entries_since -->
<g id="edge23" class="edge">
<title>RaftLog_has_next_entries&#45;&gt;RaftLog_has_next_entries_since</title>
<path fill="none" stroke="#666666" d="M214.11,-120.21C226.06,-118.1 238.25,-115.94 250.2,-113.82"/>
<polygon fill="#666666" stroke="#666666" points="250.95,-117.24 260.18,-112.05 249.73,-110.35 250.95,-117.24"/>
</g>
<!-- RaftLog_has_next_entries_since&#45;&gt;RaftLog_first_index -->
<g id="edge24" class="edge">
<title>RaftLog_has_next_entries_since&#45;&gt;RaftLog_first_index</title>
<path fill="none" stroke="#666666" d="M426.17,-76.96C513.33,-55.34 669.82,-22 806,-22 806,-22 806,-22 1828.5,-22 2148.54,-22 2224.03,-125.13 2494,-297 2519.61,-313.31 2546.14,-335.33 2565.13,-352.14"/>
<polygon fill="#666666" stroke="#666666" points="2563,-354.93 2572.78,-359 2567.67,-349.72 2563,-354.93"/>
</g>
<!-- RaftLog_next_entries -->
<g id="node26" class="node">
<title>RaftLog_next_entries</title>
<path fill="none" stroke="#1c2123" d="M1578.5,-358C1578.5,-358 1468.5,-358 1468.5,-358 1462.5,-358 1456.5,-352 1456.5,-346 1456.5,-346 1456.5,-334 1456.5,-334 1456.5,-328 1462.5,-322 1468.5,-322 1468.5,-322 1578.5,-322 1578.5,-322 1584.5,-322 1590.5,-328 1590.5,-334 1590.5,-334 1590.5,-346 1590.5,-346 1590.5,-352 1584.5,-358 1578.5,-358"/>
<text text-anchor="middle" x="1523.5" y="-336.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_next_entries</text>
</g>
<!-- RaftLog_next_entries&#45;&gt;RaftLog_next_entries_since -->
<g id="edge26" class="edge">
<title>RaftLog_next_entries&#45;&gt;RaftLog_next_entries_since</title>
<path fill="none" stroke="#666666" d="M1590.78,-338.68C1632.34,-337.86 1686.57,-336.78 1732.54,-335.87"/>
<polygon fill="#666666" stroke="#666666" points="1732.89,-339.36 1742.81,-335.66 1732.75,-332.36 1732.89,-339.36"/>
</g>
<!-- RaftLog_is_up_to_date -->
<g id="node27" class="node">
<title>RaftLog_is_up_to_date</title>
<path fill="none" stroke="#1c2123" d="M1753.5,-715C1753.5,-715 1901.5,-715 1901.5,-715 1907.5,-715 1913.5,-721 1913.5,-727 1913.5,-727 1913.5,-779 1913.5,-779 1913.5,-785 1907.5,-791 1901.5,-791 1901.5,-791 1753.5,-791 1753.5,-791 1747.5,-791 1741.5,-785 1741.5,-779 1741.5,-779 1741.5,-727 1741.5,-727 1741.5,-721 1747.5,-715 1753.5,-715"/>
<text text-anchor="middle" x="1827.5" y="-775.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_is_up_to_date</text>
<polyline fill="none" stroke="#1c2123" points="1741.5,-768 1913.5,-768 "/>
<text text-anchor="start" x="1749.5" y="-752.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">收到投票消息</text>
<text text-anchor="start" x="1749.5" y="-737.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 检查发起投票的candidate</text>
<text text-anchor="start" x="1749.5" y="-722.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 日志是否足够新</text>
</g>
<!-- RaftLog_is_up_to_date&#45;&gt;RaftLog_last_term -->
<g id="edge27" class="edge">
<title>RaftLog_is_up_to_date&#45;&gt;RaftLog_last_term</title>
<path fill="none" stroke="#666666" d="M1913.56,-773.03C1940.76,-779.44 1971.2,-786.61 1999.64,-793.31"/>
<polygon fill="#666666" stroke="#666666" points="1999.08,-796.77 2009.61,-795.65 2000.68,-789.95 1999.08,-796.77"/>
</g>
<!-- RaftCore_handle_append_entries -->
<g id="node28" class="node">
<title>RaftCore_handle_append_entries</title>
<path fill="none" stroke="#1c2123" d="M1151,-674.5C1151,-674.5 1324,-674.5 1324,-674.5 1330,-674.5 1336,-680.5 1336,-686.5 1336,-686.5 1336,-723.5 1336,-723.5 1336,-729.5 1330,-735.5 1324,-735.5 1324,-735.5 1151,-735.5 1151,-735.5 1145,-735.5 1139,-729.5 1139,-723.5 1139,-723.5 1139,-686.5 1139,-686.5 1139,-680.5 1145,-674.5 1151,-674.5"/>
<text text-anchor="middle" x="1237.5" y="-720.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_handle_append_entries</text>
<polyline fill="none" stroke="#1c2123" points="1139,-712.5 1336,-712.5 "/>
<text text-anchor="start" x="1147" y="-697.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理leader发送的</text>
<text text-anchor="start" x="1147" y="-682.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> MsgAppend消息</text>
</g>
<!-- RaftCore_handle_append_entries&#45;&gt;RaftLog_maybe_append -->
<g id="edge30" class="edge">
<title>RaftCore_handle_append_entries&#45;&gt;RaftLog_maybe_append</title>
<path fill="none" stroke="#666666" d="M1336.24,-730.12C1363.39,-737.1 1392.94,-744.7 1420.34,-751.74"/>
<polygon fill="#666666" stroke="#666666" points="1419.77,-755.21 1430.32,-754.31 1421.51,-748.43 1419.77,-755.21"/>
</g>
<!-- RaftCore_append_entry&#45;&gt;RaftLog_last_index -->
<g id="edge34" class="edge">
<title>RaftCore_append_entry&#45;&gt;RaftLog_last_index</title>
<path fill="none" stroke="#666666" d="M2464.66,-1001C2483.31,-1001 2502.65,-1001 2520.44,-1001"/>
<polygon fill="#666666" stroke="#666666" points="2520.73,-1004.5 2530.73,-1001 2520.73,-997.5 2520.73,-1004.5"/>
</g>
<!-- RaftCore_reset&#45;&gt;RaftLog_last_index -->
<g id="edge33" class="edge">
<title>RaftCore_reset&#45;&gt;RaftLog_last_index</title>
<path fill="none" stroke="#666666" d="M2420,-1109.53C2444,-1105.38 2472.43,-1097.39 2494,-1082 2517.48,-1065.25 2507.88,-1046.51 2530,-1028 2531.36,-1026.86 2532.78,-1025.76 2534.24,-1024.7"/>
<polygon fill="#666666" stroke="#666666" points="2536.5,-1027.41 2543.02,-1019.06 2532.71,-1021.52 2536.5,-1027.41"/>
</g>
<!-- RaftCore_become_leader -->
<g id="node31" class="node">
<title>RaftCore_become_leader</title>
<path fill="none" stroke="#1c2123" d="M2015,-1006.5C2015,-1006.5 2196,-1006.5 2196,-1006.5 2202,-1006.5 2208,-1012.5 2208,-1018.5 2208,-1018.5 2208,-1055.5 2208,-1055.5 2208,-1061.5 2202,-1067.5 2196,-1067.5 2196,-1067.5 2015,-1067.5 2015,-1067.5 2009,-1067.5 2003,-1061.5 2003,-1055.5 2003,-1055.5 2003,-1018.5 2003,-1018.5 2003,-1012.5 2009,-1006.5 2015,-1006.5"/>
<text text-anchor="middle" x="2105.5" y="-1052.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_become_leader</text>
<polyline fill="none" stroke="#1c2123" points="2003,-1044.5 2208,-1044.5 "/>
<text text-anchor="start" x="2011" y="-1029.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">赢得了CAMPAIGN_ELECTION</text>
<text text-anchor="start" x="2011" y="-1014.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 成为新的leader</text>
</g>
<!-- RaftCore_become_leader&#45;&gt;RaftLog_last_index -->
<g id="edge35" class="edge">
<title>RaftCore_become_leader&#45;&gt;RaftLog_last_index</title>
<path fill="none" stroke="#666666" d="M2208.19,-1055.16C2287.38,-1065.68 2399.37,-1072.52 2494,-1048 2511.72,-1043.41 2513.59,-1036.11 2530,-1028 2533.15,-1026.44 2536.41,-1024.88 2539.71,-1023.34"/>
<polygon fill="#666666" stroke="#666666" points="2541.43,-1026.4 2549.06,-1019.06 2538.51,-1020.04 2541.43,-1026.4"/>
</g>
<!-- RaftCore_become_leader&#45;&gt;RaftCore_append_entry -->
<g id="edge80" class="edge">
<title>RaftCore_become_leader&#45;&gt;RaftCore_append_entry</title>
<path fill="none" stroke="#666666" d="M2208.38,-1023.08C2227.74,-1020.44 2248.01,-1017.67 2267.39,-1015.02"/>
<polygon fill="#666666" stroke="#666666" points="2268.01,-1018.47 2277.44,-1013.65 2267.06,-1011.53 2268.01,-1018.47"/>
</g>
<!-- RaftCore_become_leader&#45;&gt;RaftCore_reset -->
<g id="edge36" class="edge">
<title>RaftCore_become_leader&#45;&gt;RaftCore_reset</title>
<path fill="none" stroke="#666666" d="M2200.29,-1067.57C2216.17,-1072.54 2232.53,-1077.51 2248,-1082 2268.78,-1088.03 2291.7,-1094.17 2312.01,-1099.44"/>
<polygon fill="#666666" stroke="#666666" points="2311.19,-1102.84 2321.75,-1101.95 2312.94,-1096.07 2311.19,-1102.84"/>
</g>
<!-- RaftCore_campaign -->
<g id="node32" class="node">
<title>RaftCore_campaign</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1403,-927C1403,-927 1644,-927 1644,-927 1650,-927 1656,-933 1656,-939 1656,-939 1656,-1021 1656,-1021 1656,-1027 1650,-1033 1644,-1033 1644,-1033 1403,-1033 1403,-1033 1397,-1033 1391,-1027 1391,-1021 1391,-1021 1391,-939 1391,-939 1391,-933 1397,-927 1403,-927"/>
<text text-anchor="middle" x="1523.5" y="-1017.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftCore_campaign</text>
<polyline fill="none" stroke="#8a8898" points="1391,-1010 1656,-1010 "/>
<text text-anchor="start" x="1399" y="-994.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">发起投票，会带上自己的index</text>
<text text-anchor="start" x="1399" y="-979.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 和last_term</text>
<text text-anchor="start" x="1399" y="-964.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 如果state为CAMPAIGN_PRE_ELECTION</text>
<text text-anchor="start" x="1399" y="-949.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 则become_pre_candidate</text>
<text text-anchor="start" x="1399" y="-934.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 否则become candidate</text>
</g>
<!-- RaftCore_campaign&#45;&gt;RaftLog_last_term -->
<g id="edge37" class="edge">
<title>RaftCore_campaign&#45;&gt;RaftLog_last_term</title>
<path fill="none" stroke="green" d="M1656.42,-930.42C1668.37,-926.64 1680.36,-923.09 1692,-920 1810.22,-888.6 1845.11,-904.62 1963,-872 1989.29,-864.73 2017.5,-854.48 2041.77,-844.87"/>
<polygon fill="green" stroke="green" points="2043.23,-848.05 2051.21,-841.08 2040.63,-841.55 2043.23,-848.05"/>
</g>
<!-- RaftCore_campaign&#45;&gt;RaftLog_last_index -->
<g id="edge38" class="edge">
<title>RaftCore_campaign&#45;&gt;RaftLog_last_index</title>
<path fill="none" stroke="green" d="M1656.38,-956.72C1668.4,-955.21 1680.4,-953.93 1692,-953 2047.31,-924.55 2146.76,-872.53 2494,-953 2515.22,-957.92 2537.14,-968.1 2554.86,-977.82"/>
<polygon fill="green" stroke="green" points="2553.29,-980.96 2563.71,-982.84 2556.74,-974.86 2553.29,-980.96"/>
</g>
<!-- RaftCore_campaign&#45;&gt;RaftLog_commit_info -->
<g id="edge39" class="edge">
<title>RaftCore_campaign&#45;&gt;RaftLog_commit_info</title>
<path fill="none" stroke="green" d="M1634.73,-926.9C1642.12,-922.16 1649.29,-917.18 1656,-912 1674.93,-897.38 1671.6,-884.48 1692,-872 1798.32,-806.99 1844.99,-840.06 1963,-800 1979.41,-794.43 1982.89,-791.41 1999,-785 2014.3,-778.91 2030.92,-772.51 2046.36,-766.66"/>
<polygon fill="green" stroke="green" points="2047.67,-769.9 2055.79,-763.09 2045.2,-763.36 2047.67,-769.9"/>
</g>
<!-- RaftCore_poll -->
<g id="node33" class="node">
<title>RaftCore_poll</title>
<path fill="none" stroke="#1c2123" d="M1704,-1016.5C1704,-1016.5 1951,-1016.5 1951,-1016.5 1957,-1016.5 1963,-1022.5 1963,-1028.5 1963,-1028.5 1963,-1095.5 1963,-1095.5 1963,-1101.5 1957,-1107.5 1951,-1107.5 1951,-1107.5 1704,-1107.5 1704,-1107.5 1698,-1107.5 1692,-1101.5 1692,-1095.5 1692,-1095.5 1692,-1028.5 1692,-1028.5 1692,-1022.5 1698,-1016.5 1704,-1016.5"/>
<text text-anchor="middle" x="1827.5" y="-1092.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_poll</text>
<polyline fill="none" stroke="#1c2123" points="1692,-1084.5 1963,-1084.5 "/>
<text text-anchor="start" x="1700" y="-1069.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">获取投票结果</text>
<text text-anchor="start" x="1700" y="-1054.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果当前sate为PreCandidate</text>
<text text-anchor="start" x="1700" y="-1039.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 且赢得了vote</text>
<text text-anchor="start" x="1700" y="-1024.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 则发起campaign(CAMPAIGN_ELECTION)</text>
</g>
<!-- RaftCore_campaign&#45;&gt;RaftCore_poll -->
<g id="edge40" class="edge">
<title>RaftCore_campaign&#45;&gt;RaftCore_poll</title>
<path fill="none" stroke="green" d="M1656.08,-1009.03C1664.63,-1011.3 1673.26,-1013.63 1681.86,-1015.98"/>
<polygon fill="green" stroke="green" points="1680.99,-1019.37 1691.56,-1018.64 1682.84,-1012.62 1680.99,-1019.37"/>
</g>
<!-- RaftCore_become_candidate -->
<g id="node34" class="node">
<title>RaftCore_become_candidate</title>
<path fill="none" stroke="#1c2123" d="M1902.5,-998C1902.5,-998 1752.5,-998 1752.5,-998 1746.5,-998 1740.5,-992 1740.5,-986 1740.5,-986 1740.5,-974 1740.5,-974 1740.5,-968 1746.5,-962 1752.5,-962 1752.5,-962 1902.5,-962 1902.5,-962 1908.5,-962 1914.5,-968 1914.5,-974 1914.5,-974 1914.5,-986 1914.5,-986 1914.5,-992 1908.5,-998 1902.5,-998"/>
<text text-anchor="middle" x="1827.5" y="-976.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_become_candidate</text>
</g>
<!-- RaftCore_campaign&#45;&gt;RaftCore_become_candidate -->
<g id="edge41" class="edge">
<title>RaftCore_campaign&#45;&gt;RaftCore_become_candidate</title>
<path fill="none" stroke="green" d="M1656.08,-980C1680.87,-980 1706.36,-980 1729.83,-980"/>
<polygon fill="green" stroke="green" points="1730.11,-983.5 1740.11,-980 1730.11,-976.5 1730.11,-983.5"/>
</g>
<!-- RaftCore_poll&#45;&gt;RaftCore_become_follower -->
<g id="edge77" class="edge">
<title>RaftCore_poll&#45;&gt;RaftCore_become_follower</title>
<path fill="none" stroke="#666666" d="M1963.27,-1107.41C1979.7,-1112.95 1996.19,-1118.5 2011.81,-1123.77"/>
<polygon fill="#666666" stroke="#666666" points="2010.82,-1127.13 2021.42,-1127 2013.06,-1120.49 2010.82,-1127.13"/>
</g>
<!-- RaftCore_poll&#45;&gt;RaftCore_become_leader -->
<g id="edge78" class="edge">
<title>RaftCore_poll&#45;&gt;RaftCore_become_leader</title>
<path fill="none" stroke="#666666" d="M1963.27,-1049.79C1973.12,-1048.9 1982.99,-1048.01 1992.68,-1047.13"/>
<polygon fill="#666666" stroke="#666666" points="1993.07,-1050.61 2002.71,-1046.22 1992.44,-1043.64 1993.07,-1050.61"/>
</g>
<!-- RaftCore_poll&#45;&gt;RaftCore_campaign -->
<g id="edge79" class="edge">
<title>RaftCore_poll&#45;&gt;RaftCore_campaign</title>
<path fill="none" stroke="#666666" d="M1691.56,-1032.08C1682.99,-1029.79 1674.36,-1027.45 1665.76,-1025.09"/>
<polygon fill="#666666" stroke="#666666" points="1666.65,-1021.71 1656.08,-1022.43 1664.79,-1028.46 1666.65,-1021.71"/>
</g>
<!-- RaftCore_become_candidate&#45;&gt;RaftCore_reset -->
<g id="edge42" class="edge">
<title>RaftCore_become_candidate&#45;&gt;RaftCore_reset</title>
<path fill="none" stroke="#666666" d="M1914.81,-985.51C1932,-989.73 1949.03,-996.45 1963,-1007 1990.91,-1028.09 1970.08,-1057.32 1999,-1077 2048.46,-1110.67 2219.97,-1115 2311.45,-1114.81"/>
<polygon fill="#666666" stroke="#666666" points="2311.68,-1118.31 2321.66,-1114.77 2311.65,-1111.31 2311.68,-1118.31"/>
</g>
<!-- RaftCore_restore -->
<g id="node35" class="node">
<title>RaftCore_restore</title>
<path fill="none" stroke="#1c2123" d="M1566.5,-1131C1566.5,-1131 1480.5,-1131 1480.5,-1131 1474.5,-1131 1468.5,-1125 1468.5,-1119 1468.5,-1119 1468.5,-1107 1468.5,-1107 1468.5,-1101 1474.5,-1095 1480.5,-1095 1480.5,-1095 1566.5,-1095 1566.5,-1095 1572.5,-1095 1578.5,-1101 1578.5,-1107 1578.5,-1107 1578.5,-1119 1578.5,-1119 1578.5,-1125 1572.5,-1131 1566.5,-1131"/>
<text text-anchor="middle" x="1523.5" y="-1109.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_restore</text>
</g>
<!-- RaftCore_restore&#45;&gt;RaftCore_become_follower -->
<g id="edge44" class="edge">
<title>RaftCore_restore&#45;&gt;RaftCore_become_follower</title>
<path fill="none" stroke="#666666" d="M1578.54,-1116.91C1677.49,-1124.08 1888.84,-1139.38 2011.37,-1148.26"/>
<polygon fill="#666666" stroke="#666666" points="2011.26,-1151.76 2021.48,-1148.99 2011.76,-1144.78 2011.26,-1151.76"/>
</g>
<!-- RaftCore_commit_to_current_term -->
<g id="node36" class="node">
<title>RaftCore_commit_to_current_term</title>
<path fill="none" stroke="#1c2123" d="M1132,-375C1132,-375 1343,-375 1343,-375 1349,-375 1355,-381 1355,-387 1355,-387 1355,-409 1355,-409 1355,-415 1349,-421 1343,-421 1343,-421 1132,-421 1132,-421 1126,-421 1120,-415 1120,-409 1120,-409 1120,-387 1120,-387 1120,-381 1126,-375 1132,-375"/>
<text text-anchor="middle" x="1237.5" y="-405.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_commit_to_current_term</text>
<polyline fill="none" stroke="#1c2123" points="1120,-398 1355,-398 "/>
<text text-anchor="middle" x="1237.5" y="-382.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">checks if logs are committed to its term</text>
</g>
<!-- RaftCore_commit_to_current_term&#45;&gt;RaftLog_term -->
<g id="edge45" class="edge">
<title>RaftCore_commit_to_current_term&#45;&gt;RaftLog_term</title>
<path fill="none" stroke="#666666" d="M1355.3,-390.77C1578.49,-378.44 2057.12,-359.52 2212,-413 2259.87,-429.53 2304.88,-466.66 2334.51,-495.27"/>
<polygon fill="#666666" stroke="#666666" points="2332.13,-497.83 2341.71,-502.35 2337.03,-492.84 2332.13,-497.83"/>
</g>
<!-- RaftCore_apply_to_current_term -->
<g id="node37" class="node">
<title>RaftCore_apply_to_current_term</title>
<path fill="none" stroke="#1c2123" d="M2192,-683C2192,-683 2019,-683 2019,-683 2013,-683 2007,-677 2007,-671 2007,-671 2007,-659 2007,-659 2007,-653 2013,-647 2019,-647 2019,-647 2192,-647 2192,-647 2198,-647 2204,-653 2204,-659 2204,-659 2204,-671 2204,-671 2204,-677 2198,-683 2192,-683"/>
<text text-anchor="middle" x="2105.5" y="-661.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_apply_to_current_term</text>
</g>
<!-- RaftCore_apply_to_current_term&#45;&gt;RaftLog_term -->
<g id="edge46" class="edge">
<title>RaftCore_apply_to_current_term&#45;&gt;RaftLog_term</title>
<path fill="none" stroke="#666666" d="M2142.59,-646.92C2184.47,-625.94 2254.34,-590.94 2305.6,-565.26"/>
<polygon fill="#666666" stroke="#666666" points="2307.25,-568.35 2314.63,-560.74 2304.12,-562.09 2307.25,-568.35"/>
</g>
<!-- RaftCore_check_group_commit_consistent -->
<g id="node38" class="node">
<title>RaftCore_check_group_commit_consistent</title>
<path fill="none" stroke="#1c2123" d="M1942,-696C1942,-696 1713,-696 1713,-696 1707,-696 1701,-690 1701,-684 1701,-684 1701,-672 1701,-672 1701,-666 1707,-660 1713,-660 1713,-660 1942,-660 1942,-660 1948,-660 1954,-666 1954,-672 1954,-672 1954,-684 1954,-684 1954,-690 1948,-696 1942,-696"/>
<text text-anchor="middle" x="1827.5" y="-674.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_check_group_commit_consistent</text>
</g>
<!-- RaftCore_check_group_commit_consistent&#45;&gt;RaftCore_apply_to_current_term -->
<g id="edge47" class="edge">
<title>RaftCore_check_group_commit_consistent&#45;&gt;RaftCore_apply_to_current_term</title>
<path fill="none" stroke="#666666" d="M1954.38,-672.07C1968.57,-671.4 1982.93,-670.73 1996.85,-670.07"/>
<polygon fill="#666666" stroke="#666666" points="1997.08,-673.56 2006.91,-669.6 1996.75,-666.57 1997.08,-673.56"/>
</g>
<!-- RaftCore_hup -->
<g id="node39" class="node">
<title>RaftCore_hup</title>
<path fill="none" stroke="#1c2123" d="M1178,-755C1178,-755 1297,-755 1297,-755 1303,-755 1309,-761 1309,-767 1309,-767 1309,-819 1309,-819 1309,-825 1303,-831 1297,-831 1297,-831 1178,-831 1178,-831 1172,-831 1166,-825 1166,-819 1166,-819 1166,-767 1166,-767 1166,-761 1172,-755 1178,-755"/>
<text text-anchor="middle" x="1237.5" y="-815.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_hup</text>
<polyline fill="none" stroke="#1c2123" points="1166,-808 1309,-808 "/>
<text text-anchor="start" x="1174" y="-792.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">收到MsgTimeoutNow</text>
<text text-anchor="start" x="1174" y="-777.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 或者MsgHup</text>
<text text-anchor="start" x="1174" y="-762.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发起竞选</text>
</g>
<!-- RaftCore_hup&#45;&gt;RaftLog_slice -->
<g id="edge48" class="edge">
<title>RaftCore_hup&#45;&gt;RaftLog_slice</title>
<path fill="none" stroke="#666666" d="M1309.23,-765.95C1324.53,-759.52 1340.47,-752.38 1355,-745 1371.72,-736.51 1373.37,-729.38 1391,-723 1502.94,-682.48 1570.8,-767.14 1656,-684 1723.46,-618.17 1630.85,-546.73 1692,-475 1739.12,-419.74 1947.4,-368.09 2048.74,-345.7"/>
<polygon fill="#666666" stroke="#666666" points="2049.77,-349.05 2058.79,-343.49 2048.28,-342.22 2049.77,-349.05"/>
</g>
<!-- RaftCore_hup&#45;&gt;RaftCore_campaign -->
<g id="edge49" class="edge">
<title>RaftCore_hup&#45;&gt;RaftCore_campaign</title>
<path fill="none" stroke="#666666" d="M1296.31,-831.07C1335.7,-857 1388.61,-891.84 1433.35,-921.3"/>
<polygon fill="#666666" stroke="#666666" points="1431.62,-924.35 1441.9,-926.93 1435.47,-918.5 1431.62,-924.35"/>
</g>
<!-- RaftCore_maybe_commit_by_vote -->
<g id="node40" class="node">
<title>RaftCore_maybe_commit_by_vote</title>
<path fill="none" stroke="#1c2123" d="M1735,-484.5C1735,-484.5 1920,-484.5 1920,-484.5 1926,-484.5 1932,-490.5 1932,-496.5 1932,-496.5 1932,-533.5 1932,-533.5 1932,-539.5 1926,-545.5 1920,-545.5 1920,-545.5 1735,-545.5 1735,-545.5 1729,-545.5 1723,-539.5 1723,-533.5 1723,-533.5 1723,-496.5 1723,-496.5 1723,-490.5 1729,-484.5 1735,-484.5"/>
<text text-anchor="middle" x="1827.5" y="-530.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_maybe_commit_by_vote</text>
<polyline fill="none" stroke="#1c2123" points="1723,-522.5 1932,-522.5 "/>
<text text-anchor="start" x="1731" y="-507.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Commits the logs using</text>
<text text-anchor="start" x="1731" y="-492.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> commit info in vote message</text>
</g>
<!-- RaftCore_maybe_commit_by_vote&#45;&gt;RaftCore_become_follower -->
<g id="edge81" class="edge">
<title>RaftCore_maybe_commit_by_vote&#45;&gt;RaftCore_become_follower</title>
<path fill="none" stroke="#666666" d="M1932.21,-531.23C1944.04,-537.02 1954.78,-544.73 1963,-555 2035.69,-645.76 1943.1,-975.04 1999,-1077 2007.92,-1093.26 2021.83,-1107.07 2036.67,-1118.34"/>
<polygon fill="#666666" stroke="#666666" points="2034.82,-1121.32 2044.98,-1124.34 2038.92,-1115.65 2034.82,-1121.32"/>
</g>
<!-- RaftCore_maybe_commit_by_vote&#45;&gt;RaftLog_slice -->
<g id="edge50" class="edge">
<title>RaftCore_maybe_commit_by_vote&#45;&gt;RaftLog_slice</title>
<path fill="none" stroke="#666666" d="M1879.35,-484.49C1904.69,-469.07 1935.68,-449.88 1963,-432 2000.39,-407.54 2042.38,-378.22 2070.84,-358.06"/>
<polygon fill="#666666" stroke="#666666" points="2073.08,-360.76 2079.21,-352.11 2069.03,-355.05 2073.08,-360.76"/>
</g>
<!-- RaftCore_maybe_commit_by_vote&#45;&gt;RaftLog_maybe_commit -->
<g id="edge51" class="edge">
<title>RaftCore_maybe_commit_by_vote&#45;&gt;RaftLog_maybe_commit</title>
<path fill="none" stroke="#666666" d="M1932.06,-491.74C1950.68,-487.55 1970.21,-483.17 1989.14,-478.91"/>
<polygon fill="#666666" stroke="#666666" points="1989.99,-482.31 1998.98,-476.7 1988.46,-475.48 1989.99,-482.31"/>
</g>
<!-- RaftCore_step -->
<g id="node41" class="node">
<title>RaftCore_step</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M731,-844.5C731,-844.5 883,-844.5 883,-844.5 889,-844.5 895,-850.5 895,-856.5 895,-856.5 895,-893.5 895,-893.5 895,-899.5 889,-905.5 883,-905.5 883,-905.5 731,-905.5 731,-905.5 725,-905.5 719,-899.5 719,-893.5 719,-893.5 719,-856.5 719,-856.5 719,-850.5 725,-844.5 731,-844.5"/>
<text text-anchor="middle" x="807" y="-890.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftCore_step</text>
<polyline fill="none" stroke="#8a8898" points="719,-882.5 895,-882.5 "/>
<text text-anchor="start" x="727" y="-867.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">raft along via a message</text>
<text text-anchor="start" x="727" y="-852.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 处理raft从peer收到的消息</text>
</g>
<!-- RaftCore_step&#45;&gt;RaftCore_become_follower -->
<g id="edge52" class="edge">
<title>RaftCore_step&#45;&gt;RaftCore_become_follower</title>
<path fill="none" stroke="red" d="M823.94,-905.65C844.27,-941.95 882.64,-1002.03 931,-1038 1002.87,-1091.46 1034.07,-1082.7 1120,-1108 1480.8,-1214.21 1588.56,-1217.4 1963,-1182 1978.77,-1180.51 1995.41,-1178.1 2011.51,-1175.32"/>
<polygon fill="red" stroke="red" points="2012.22,-1178.75 2021.45,-1173.55 2010.99,-1171.86 2012.22,-1178.75"/>
</g>
<!-- RaftCore_step&#45;&gt;RaftLog_last_index -->
<g id="edge53" class="edge">
<title>RaftCore_step&#45;&gt;RaftLog_last_index</title>
<path fill="none" stroke="red" d="M817.81,-905.55C847.14,-990.89 943.23,-1231 1120,-1315 1229.61,-1367.08 2095.4,-1330.62 2212,-1297 2349.63,-1257.32 2403.16,-1251.74 2494,-1141 2527.43,-1100.25 2494.68,-1067.13 2530,-1028 2530.75,-1027.17 2531.52,-1026.37 2532.33,-1025.59"/>
<polygon fill="red" stroke="red" points="2534.65,-1028.21 2540.2,-1019.19 2530.23,-1022.78 2534.65,-1028.21"/>
</g>
<!-- RaftCore_step&#45;&gt;RaftLog_is_up_to_date -->
<g id="edge54" class="edge">
<title>RaftCore_step&#45;&gt;RaftLog_is_up_to_date</title>
<path fill="none" stroke="red" d="M895.25,-890.76C1054.57,-915.32 1399.76,-948.75 1656,-833 1676.91,-823.55 1672.49,-808.08 1692,-796 1704.19,-788.45 1717.84,-782.11 1731.63,-776.81"/>
<polygon fill="red" stroke="red" points="1733.01,-780.04 1741.19,-773.31 1730.6,-773.46 1733.01,-780.04"/>
</g>
<!-- RaftCore_step&#45;&gt;RaftCore_hup -->
<g id="edge55" class="edge">
<title>RaftCore_step&#45;&gt;RaftCore_hup</title>
<path fill="none" stroke="red" d="M895.29,-861.98C949.72,-853.48 1021.14,-841.64 1084,-829 1107.45,-824.28 1132.79,-818.56 1155.94,-813.08"/>
<polygon fill="red" stroke="red" points="1156.81,-816.47 1165.72,-810.74 1155.18,-809.66 1156.81,-816.47"/>
</g>
<!-- RaftCore_step&#45;&gt;RaftCore_maybe_commit_by_vote -->
<g id="edge56" class="edge">
<title>RaftCore_step&#45;&gt;RaftCore_maybe_commit_by_vote</title>
<path fill="none" stroke="red" d="M837.52,-844.42C861.38,-820.73 896.54,-788 931,-764 1115.88,-635.24 1172.18,-604.63 1391,-551 1498.14,-524.74 1624.06,-516.7 1712.86,-514.65"/>
<polygon fill="red" stroke="red" points="1713.04,-518.15 1722.96,-514.44 1712.89,-511.15 1713.04,-518.15"/>
</g>
<!-- RaftCore_step_leader -->
<g id="node42" class="node">
<title>RaftCore_step_leader</title>
<path fill="none" stroke="#1c2123" d="M952.5,-433C952.5,-433 1062.5,-433 1062.5,-433 1068.5,-433 1074.5,-439 1074.5,-445 1074.5,-445 1074.5,-467 1074.5,-467 1074.5,-473 1068.5,-479 1062.5,-479 1062.5,-479 952.5,-479 952.5,-479 946.5,-479 940.5,-473 940.5,-467 940.5,-467 940.5,-445 940.5,-445 940.5,-439 946.5,-433 952.5,-433"/>
<text text-anchor="middle" x="1007.5" y="-463.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_step_leader</text>
<polyline fill="none" stroke="#1c2123" points="940.5,-456 1074.5,-456 "/>
<text text-anchor="start" x="948.5" y="-440.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Raft role为leader</text>
</g>
<!-- RaftCore_step&#45;&gt;RaftCore_step_leader -->
<g id="edge57" class="edge">
<title>RaftCore_step&#45;&gt;RaftCore_step_leader</title>
<path fill="none" stroke="red" d="M818.52,-844.4C837.92,-789.24 881.87,-670 931,-575 946.84,-544.36 968.14,-511.37 984.07,-487.92"/>
<polygon fill="red" stroke="red" points="987.13,-489.65 989.89,-479.42 981.35,-485.7 987.13,-489.65"/>
</g>
<!-- RaftCore_step_candidate -->
<g id="node43" class="node">
<title>RaftCore_step_candidate</title>
<path fill="none" stroke="#1c2123" d="M943,-983C943,-983 1072,-983 1072,-983 1078,-983 1084,-989 1084,-995 1084,-995 1084,-1017 1084,-1017 1084,-1023 1078,-1029 1072,-1029 1072,-1029 943,-1029 943,-1029 937,-1029 931,-1023 931,-1017 931,-1017 931,-995 931,-995 931,-989 937,-983 943,-983"/>
<text text-anchor="middle" x="1007.5" y="-1013.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_step_candidate</text>
<polyline fill="none" stroke="#1c2123" points="931,-1006 1084,-1006 "/>
<text text-anchor="start" x="939" y="-990.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Raft role 为candiate</text>
</g>
<!-- RaftCore_step&#45;&gt;RaftCore_step_candidate -->
<g id="edge58" class="edge">
<title>RaftCore_step&#45;&gt;RaftCore_step_candidate</title>
<path fill="none" stroke="red" d="M854.29,-905.55C887.06,-927.18 930.74,-956 962.9,-977.22"/>
<polygon fill="red" stroke="red" points="961.37,-980.41 971.64,-983 965.22,-974.57 961.37,-980.41"/>
</g>
<!-- RaftCore_step_follower -->
<g id="node44" class="node">
<title>RaftCore_step_follower</title>
<path fill="none" stroke="#1c2123" d="M946,-774C946,-774 1069,-774 1069,-774 1075,-774 1081,-780 1081,-786 1081,-786 1081,-808 1081,-808 1081,-814 1075,-820 1069,-820 1069,-820 946,-820 946,-820 940,-820 934,-814 934,-808 934,-808 934,-786 934,-786 934,-780 940,-774 946,-774"/>
<text text-anchor="middle" x="1007.5" y="-804.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_step_follower</text>
<polyline fill="none" stroke="#1c2123" points="934,-797 1081,-797 "/>
<text text-anchor="middle" x="1007.5" y="-781.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Raft role为follower</text>
</g>
<!-- RaftCore_step&#45;&gt;RaftCore_step_follower -->
<g id="edge59" class="edge">
<title>RaftCore_step&#45;&gt;RaftCore_step_follower</title>
<path fill="none" stroke="red" d="M885.88,-844.4C903.13,-837.62 921.29,-830.48 938.13,-823.87"/>
<polygon fill="red" stroke="red" points="939.85,-826.95 947.87,-820.04 937.29,-820.44 939.85,-826.95"/>
</g>
<!-- RaftCore_step_leader&#45;&gt;RaftCore_become_follower -->
<g id="edge60" class="edge">
<title>RaftCore_step_leader&#45;&gt;RaftCore_become_follower</title>
<path fill="none" stroke="#666666" d="M1074.73,-464.66C1237.69,-486.11 1645.73,-540.71 1656,-551 1734.98,-630.15 1628.84,-707.73 1692,-800 1770.12,-914.14 1877.14,-844.56 1963,-953 1998.62,-997.99 1966.2,-1029.91 1999,-1077 2010.14,-1093 2025.62,-1107.02 2041.3,-1118.59"/>
<polygon fill="#666666" stroke="#666666" points="2039.32,-1121.47 2049.49,-1124.42 2043.37,-1115.77 2039.32,-1121.47"/>
</g>
<!-- RaftCore_step_leader&#45;&gt;RaftCore_append_entry -->
<g id="edge61" class="edge">
<title>RaftCore_step_leader&#45;&gt;RaftCore_append_entry</title>
<path fill="none" stroke="#666666" d="M1074.52,-453.08C1278.8,-444.61 1891.18,-423.8 1963,-475 2000.78,-501.94 1965.29,-541.12 1999,-573 2070.91,-641.01 2138.13,-572.13 2212,-638 2307.12,-722.82 2347.34,-875.21 2362.28,-952.79"/>
<polygon fill="#666666" stroke="#666666" points="2358.87,-953.58 2364.15,-962.77 2365.75,-952.3 2358.87,-953.58"/>
</g>
<!-- RaftCore_step_leader&#45;&gt;RaftCore_commit_to_current_term -->
<g id="edge62" class="edge">
<title>RaftCore_step_leader&#45;&gt;RaftCore_commit_to_current_term</title>
<path fill="none" stroke="#666666" d="M1074.75,-439.15C1093.94,-434.27 1115.32,-428.83 1136.09,-423.54"/>
<polygon fill="#666666" stroke="#666666" points="1137.08,-426.9 1145.9,-421.05 1135.35,-420.12 1137.08,-426.9"/>
</g>
<!-- RaftCore_handle_append_response -->
<g id="node45" class="node">
<title>RaftCore_handle_append_response</title>
<path fill="none" stroke="#1c2123" d="M1145,-200.5C1145,-200.5 1330,-200.5 1330,-200.5 1336,-200.5 1342,-206.5 1342,-212.5 1342,-212.5 1342,-279.5 1342,-279.5 1342,-285.5 1336,-291.5 1330,-291.5 1330,-291.5 1145,-291.5 1145,-291.5 1139,-291.5 1133,-285.5 1133,-279.5 1133,-279.5 1133,-212.5 1133,-212.5 1133,-206.5 1139,-200.5 1145,-200.5"/>
<text text-anchor="middle" x="1237.5" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_handle_append_response</text>
<polyline fill="none" stroke="#1c2123" points="1133,-268.5 1342,-268.5 "/>
<text text-anchor="start" x="1141" y="-253.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理follower返回的append resp</text>
<text text-anchor="start" x="1141" y="-238.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 1.更新peer的ProcessTracker</text>
<text text-anchor="start" x="1141" y="-223.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 2.更新完follower的控制信息后</text>
<text text-anchor="start" x="1141" y="-208.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送多个append给follower</text>
</g>
<!-- RaftCore_step_leader&#45;&gt;RaftCore_handle_append_response -->
<g id="edge63" class="edge">
<title>RaftCore_step_leader&#45;&gt;RaftCore_handle_append_response</title>
<path fill="none" stroke="#666666" d="M1033.77,-432.72C1068.59,-400.66 1132.3,-341.98 1179.03,-298.93"/>
<polygon fill="#666666" stroke="#666666" points="1181.69,-301.24 1186.67,-291.89 1176.95,-296.09 1181.69,-301.24"/>
</g>
<!-- RaftCore_step_candidate&#45;&gt;RaftCore_become_follower -->
<g id="edge67" class="edge">
<title>RaftCore_step_candidate&#45;&gt;RaftCore_become_follower</title>
<path fill="none" stroke="blue" d="M1058.49,-1029.11C1130.27,-1060.98 1267.51,-1117.09 1391,-1140 1610.42,-1180.71 1874.28,-1171.56 2011.43,-1162.56"/>
<polygon fill="blue" stroke="blue" points="2011.74,-1166.04 2021.49,-1161.88 2011.28,-1159.06 2011.74,-1166.04"/>
</g>
<!-- RaftCore_step_candidate&#45;&gt;RaftCore_poll -->
<g id="edge68" class="edge">
<title>RaftCore_step_candidate&#45;&gt;RaftCore_poll</title>
<path fill="none" stroke="blue" d="M1084.25,-1014.21C1161.36,-1022.31 1284.37,-1034.54 1391,-1042 1487.68,-1048.77 1596.59,-1053.77 1681.32,-1057.08"/>
<polygon fill="blue" stroke="blue" points="1681.4,-1060.58 1691.53,-1057.47 1681.67,-1053.59 1681.4,-1060.58"/>
</g>
<!-- RaftCore_step_candidate&#45;&gt;RaftCore_maybe_commit_by_vote -->
<g id="edge69" class="edge">
<title>RaftCore_step_candidate&#45;&gt;RaftCore_maybe_commit_by_vote</title>
<path fill="none" stroke="blue" d="M1045.74,-982.95C1066.86,-970.74 1094.16,-956.38 1120,-947 1234.47,-905.46 1573.44,-922.52 1656,-833 1740.47,-741.42 1611.24,-649.87 1692,-555 1698.21,-547.7 1705.69,-541.7 1713.9,-536.78"/>
<polygon fill="blue" stroke="blue" points="1715.56,-539.86 1722.7,-532.02 1712.24,-533.7 1715.56,-539.86"/>
</g>
<!-- RaftCore_step_follower&#45;&gt;RaftCore_handle_append_entries -->
<g id="edge64" class="edge">
<title>RaftCore_step_follower&#45;&gt;RaftCore_handle_append_entries</title>
<path fill="none" stroke="#666666" d="M1055.22,-773.87C1074.99,-764.43 1098.41,-753.71 1120,-745 1124.83,-743.05 1129.8,-741.11 1134.84,-739.19"/>
<polygon fill="#666666" stroke="#666666" points="1136.45,-742.32 1144.59,-735.54 1133.99,-735.77 1136.45,-742.32"/>
</g>
<!-- RaftCore_step_follower&#45;&gt;RaftCore_hup -->
<g id="edge65" class="edge">
<title>RaftCore_step_follower&#45;&gt;RaftCore_hup</title>
<path fill="none" stroke="#666666" d="M1081.27,-795.72C1104.99,-795.31 1131.46,-794.84 1155.73,-794.42"/>
<polygon fill="#666666" stroke="#666666" points="1156.04,-797.91 1165.98,-794.24 1155.92,-790.91 1156.04,-797.91"/>
</g>
<!-- RaftCore_handle_snapshot -->
<g id="node48" class="node">
<title>RaftCore_handle_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1151,-957C1151,-957 1324,-957 1324,-957 1330,-957 1336,-963 1336,-969 1336,-969 1336,-991 1336,-991 1336,-997 1330,-1003 1324,-1003 1324,-1003 1151,-1003 1151,-1003 1145,-1003 1139,-997 1139,-991 1139,-991 1139,-969 1139,-969 1139,-963 1145,-957 1151,-957"/>
<text text-anchor="middle" x="1237.5" y="-987.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_handle_snapshot</text>
<polyline fill="none" stroke="#1c2123" points="1139,-980 1336,-980 "/>
<text text-anchor="start" x="1147" y="-964.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理leader发送的snapshot消息</text>
</g>
<!-- RaftCore_step_follower&#45;&gt;RaftCore_handle_snapshot -->
<g id="edge66" class="edge">
<title>RaftCore_step_follower&#45;&gt;RaftCore_handle_snapshot</title>
<path fill="none" stroke="#666666" d="M1037.38,-820.18C1078.64,-853.29 1154.46,-914.15 1199.7,-950.46"/>
<polygon fill="#666666" stroke="#666666" points="1197.51,-953.19 1207.5,-956.72 1201.89,-947.73 1197.51,-953.19"/>
</g>
<!-- RaftCore_handle_append_response&#45;&gt;RaftLog_last_index -->
<g id="edge75" class="edge">
<title>RaftCore_handle_append_response&#45;&gt;RaftLog_last_index</title>
<path fill="none" stroke="#666666" d="M1325.54,-200.42C1346.44,-191.56 1369.07,-183.61 1391,-179 1506.26,-154.8 1538.24,-176.89 1656,-179 2035.53,-185.8 2271.53,-36.43 2494,-344 2568.57,-447.09 2587.4,-860.56 2591.18,-972.78"/>
<polygon fill="#666666" stroke="#666666" points="2587.68,-973.08 2591.5,-982.96 2594.68,-972.86 2587.68,-973.08"/>
</g>
<!-- RaftCore_maybe_send_append -->
<g id="node46" class="node">
<title>RaftCore_maybe_send_append</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1440,-189C1440,-189 1607,-189 1607,-189 1613,-189 1619,-195 1619,-201 1619,-201 1619,-291 1619,-291 1619,-297 1613,-303 1607,-303 1607,-303 1440,-303 1440,-303 1434,-303 1428,-297 1428,-291 1428,-291 1428,-201 1428,-201 1428,-195 1434,-189 1440,-189"/>
<text text-anchor="middle" x="1523.5" y="-287.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftCore_maybe_send_append</text>
<polyline fill="none" stroke="#8a8898" points="1428,-280 1619,-280 "/>
<text text-anchor="start" x="1436" y="-264.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Sends an append RPC with new</text>
<text text-anchor="start" x="1436" y="-249.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> entries to the given peer</text>
<polyline fill="none" stroke="#8a8898" points="1428,-242 1619,-242 "/>
<text text-anchor="start" x="1436" y="-226.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">根据follower落后的情况</text>
<text text-anchor="start" x="1436" y="-211.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 可能发送entries</text>
<text text-anchor="start" x="1436" y="-196.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 也可能发送snapshot</text>
</g>
<!-- RaftCore_handle_append_response&#45;&gt;RaftCore_maybe_send_append -->
<g id="edge76" class="edge">
<title>RaftCore_handle_append_response&#45;&gt;RaftCore_maybe_send_append</title>
<path fill="none" stroke="#666666" d="M1342.24,-246C1366.89,-246 1393.2,-246 1417.89,-246"/>
<polygon fill="#666666" stroke="#666666" points="1417.99,-249.5 1427.99,-246 1417.99,-242.5 1417.99,-249.5"/>
</g>
<!-- RaftCore_maybe_send_append&#45;&gt;RaftLog_entries -->
<g id="edge72" class="edge">
<title>RaftCore_maybe_send_append&#45;&gt;RaftLog_entries</title>
<path fill="none" stroke="#666666" d="M1619.23,-252.59C1656.54,-255.18 1699.21,-258.15 1736.09,-260.71"/>
<polygon fill="#666666" stroke="#666666" points="1736.11,-264.22 1746.33,-261.43 1736.6,-257.24 1736.11,-264.22"/>
</g>
<!-- RaftCore_maybe_send_append&#45;&gt;RaftLog_term -->
<g id="edge73" class="edge">
<title>RaftCore_maybe_send_append&#45;&gt;RaftLog_term</title>
<path fill="none" stroke="#666666" d="M1619.24,-221.36C1767.51,-189.1 2053.79,-153.22 2212,-307 2246.47,-340.51 2222.53,-368.23 2248,-409 2268.44,-441.73 2298.87,-472.68 2324.23,-495.47"/>
<polygon fill="#666666" stroke="#666666" points="2322.11,-498.27 2331.92,-502.28 2326.75,-493.03 2322.11,-498.27"/>
</g>
<!-- RaftCore_prepare_send_snapshot -->
<g id="node47" class="node">
<title>RaftCore_prepare_send_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1740,-50.5C1740,-50.5 1915,-50.5 1915,-50.5 1921,-50.5 1927,-56.5 1927,-62.5 1927,-62.5 1927,-129.5 1927,-129.5 1927,-135.5 1921,-141.5 1915,-141.5 1915,-141.5 1740,-141.5 1740,-141.5 1734,-141.5 1728,-135.5 1728,-129.5 1728,-129.5 1728,-62.5 1728,-62.5 1728,-56.5 1734,-50.5 1740,-50.5"/>
<text text-anchor="middle" x="1827.5" y="-126.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_prepare_send_snapshot</text>
<polyline fill="none" stroke="#1c2123" points="1728,-118.5 1927,-118.5 "/>
<text text-anchor="start" x="1736" y="-103.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">准备发送snapshot</text>
<text text-anchor="start" x="1736" y="-88.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 创建snapshot</text>
<text text-anchor="start" x="1736" y="-73.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后更新follower的</text>
<text text-anchor="start" x="1736" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> progressTracker</text>
</g>
<!-- RaftCore_maybe_send_append&#45;&gt;RaftCore_prepare_send_snapshot -->
<g id="edge74" class="edge">
<title>RaftCore_maybe_send_append&#45;&gt;RaftCore_prepare_send_snapshot</title>
<path fill="none" stroke="#666666" d="M1619.23,-198.95C1653.05,-182.15 1691.27,-163.17 1725.59,-146.12"/>
<polygon fill="#666666" stroke="#666666" points="1727.29,-149.18 1734.69,-141.6 1724.18,-142.91 1727.29,-149.18"/>
</g>
<!-- RaftLog_snapshot -->
<g id="node49" class="node">
<title>RaftLog_snapshot</title>
<path fill="none" stroke="#1c2123" d="M2639,-36C2639,-36 2547,-36 2547,-36 2541,-36 2535,-30 2535,-24 2535,-24 2535,-12 2535,-12 2535,-6 2541,0 2547,0 2547,0 2639,0 2639,0 2645,0 2651,-6 2651,-12 2651,-12 2651,-24 2651,-24 2651,-30 2645,-36 2639,-36"/>
<text text-anchor="middle" x="2593" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLog_snapshot</text>
</g>
<!-- RaftCore_prepare_send_snapshot&#45;&gt;RaftLog_snapshot -->
<g id="edge71" class="edge">
<title>RaftCore_prepare_send_snapshot&#45;&gt;RaftLog_snapshot</title>
<path fill="none" stroke="#666666" d="M1927.14,-85.92C2084.69,-69.83 2389.1,-38.73 2524.37,-24.91"/>
<polygon fill="#666666" stroke="#666666" points="2525,-28.36 2534.6,-23.86 2524.29,-21.4 2525,-28.36"/>
</g>
<!-- RaftCore_handle_snapshot&#45;&gt;RaftCore_restore -->
<g id="edge82" class="edge">
<title>RaftCore_handle_snapshot&#45;&gt;RaftCore_restore</title>
<path fill="none" stroke="#666666" d="M1287.64,-1003.01C1340.1,-1027.58 1422.67,-1066.25 1474.63,-1090.58"/>
<polygon fill="#666666" stroke="#666666" points="1473.43,-1093.88 1483.97,-1094.95 1476.4,-1087.54 1473.43,-1093.88"/>
</g>
<!-- Storage_snapshot -->
<g id="node50" class="node">
<title>Storage_snapshot</title>
<path fill="none" stroke="#1c2123" d="M2800,-36C2800,-36 2712,-36 2712,-36 2706,-36 2700,-30 2700,-24 2700,-24 2700,-12 2700,-12 2700,-6 2706,0 2712,0 2712,0 2800,0 2800,0 2806,0 2812,-6 2812,-12 2812,-12 2812,-24 2812,-24 2812,-30 2806,-36 2800,-36"/>
<text text-anchor="middle" x="2756" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage_snapshot</text>
</g>
<!-- RaftLog_snapshot&#45;&gt;Storage_snapshot -->
<g id="edge70" class="edge">
<title>RaftLog_snapshot&#45;&gt;Storage_snapshot</title>
<path fill="none" stroke="#666666" d="M2651.22,-18C2663.7,-18 2676.99,-18 2689.76,-18"/>
<polygon fill="#666666" stroke="#666666" points="2689.86,-21.5 2699.86,-18 2689.86,-14.5 2689.86,-21.5"/>
</g>
<!-- RaftCore_on_persist_entries -->
<g id="node51" class="node">
<title>RaftCore_on_persist_entries</title>
<path fill="none" stroke="#1c2123" d="M1733,-1240.5C1733,-1240.5 1922,-1240.5 1922,-1240.5 1928,-1240.5 1934,-1246.5 1934,-1252.5 1934,-1252.5 1934,-1289.5 1934,-1289.5 1934,-1295.5 1928,-1301.5 1922,-1301.5 1922,-1301.5 1733,-1301.5 1733,-1301.5 1727,-1301.5 1721,-1295.5 1721,-1289.5 1721,-1289.5 1721,-1252.5 1721,-1252.5 1721,-1246.5 1727,-1240.5 1733,-1240.5"/>
<text text-anchor="middle" x="1827.5" y="-1286.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_on_persist_entries</text>
<polyline fill="none" stroke="#1c2123" points="1721,-1278.5 1934,-1278.5 "/>
<text text-anchor="start" x="1729" y="-1263.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Notifies that the raft logs</text>
<text text-anchor="start" x="1729" y="-1248.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> or the snapshot have been persisted</text>
</g>
<!-- RaftCore_on_persist_entries&#45;&gt;RaftLog_maybe_persist -->
<g id="edge83" class="edge">
<title>RaftCore_on_persist_entries&#45;&gt;RaftLog_maybe_persist</title>
<path fill="none" stroke="#666666" d="M1934.03,-1268.71C1962.23,-1268.09 1992.35,-1267.44 2019.3,-1266.85"/>
<polygon fill="#666666" stroke="#666666" points="2019.55,-1270.35 2029.47,-1266.63 2019.4,-1263.35 2019.55,-1270.35"/>
</g>
<!-- RawNode_on_persist_ready -->
<g id="node52" class="node">
<title>RawNode_on_persist_ready</title>
<path fill="none" stroke="#1c2123" d="M1596.5,-1287C1596.5,-1287 1450.5,-1287 1450.5,-1287 1444.5,-1287 1438.5,-1281 1438.5,-1275 1438.5,-1275 1438.5,-1263 1438.5,-1263 1438.5,-1257 1444.5,-1251 1450.5,-1251 1450.5,-1251 1596.5,-1251 1596.5,-1251 1602.5,-1251 1608.5,-1257 1608.5,-1263 1608.5,-1263 1608.5,-1275 1608.5,-1275 1608.5,-1281 1602.5,-1287 1596.5,-1287"/>
<text text-anchor="middle" x="1523.5" y="-1265.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_on_persist_ready</text>
</g>
<!-- RawNode_on_persist_ready&#45;&gt;RaftCore_on_persist_entries -->
<g id="edge84" class="edge">
<title>RawNode_on_persist_ready&#45;&gt;RaftCore_on_persist_entries</title>
<path fill="none" stroke="#666666" d="M1608.62,-1269.56C1640.31,-1269.77 1676.93,-1270.01 1710.99,-1270.24"/>
<polygon fill="#666666" stroke="#666666" points="1710.97,-1273.73 1721,-1270.3 1711.02,-1266.74 1710.97,-1273.73"/>
</g>
<!-- RawNode_advance_append -->
<g id="node53" class="node">
<title>RawNode_advance_append</title>
<path fill="none" stroke="#1c2123" d="M1150.5,-1230C1150.5,-1230 1324.5,-1230 1324.5,-1230 1330.5,-1230 1336.5,-1236 1336.5,-1242 1336.5,-1242 1336.5,-1294 1336.5,-1294 1336.5,-1300 1330.5,-1306 1324.5,-1306 1324.5,-1306 1150.5,-1306 1150.5,-1306 1144.5,-1306 1138.5,-1300 1138.5,-1294 1138.5,-1294 1138.5,-1242 1138.5,-1242 1138.5,-1236 1144.5,-1230 1150.5,-1230"/>
<text text-anchor="middle" x="1237.5" y="-1290.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_advance_append</text>
<polyline fill="none" stroke="#1c2123" points="1138.5,-1283 1336.5,-1283 "/>
<text text-anchor="start" x="1146.5" y="-1267.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Returns LightReady that</text>
<text text-anchor="start" x="1146.5" y="-1252.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> contains commit index</text>
<text text-anchor="start" x="1146.5" y="-1237.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> committed entries and messages</text>
</g>
<!-- RawNode_advance_append&#45;&gt;RawNode_on_persist_ready -->
<g id="edge85" class="edge">
<title>RawNode_advance_append&#45;&gt;RawNode_on_persist_ready</title>
<path fill="none" stroke="#666666" d="M1336.63,-1268.35C1366.18,-1268.45 1398.53,-1268.56 1427.85,-1268.67"/>
<polygon fill="#666666" stroke="#666666" points="1428.07,-1272.17 1438.08,-1268.7 1428.09,-1265.17 1428.07,-1272.17"/>
</g>
<!-- RawNode_gen_light_ready -->
<g id="node54" class="node">
<title>RawNode_gen_light_ready</title>
<path fill="#feed9b" stroke="#f7e495" d="M1404,-561C1404,-561 1643,-561 1643,-561 1649,-561 1655,-567 1655,-573 1655,-573 1655,-663 1655,-663 1655,-669 1649,-675 1643,-675 1643,-675 1404,-675 1404,-675 1398,-675 1392,-669 1392,-663 1392,-663 1392,-573 1392,-573 1392,-567 1398,-561 1404,-561"/>
<text text-anchor="middle" x="1523.5" y="-659.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RawNode_gen_light_ready</text>
<polyline fill="none" stroke="#f7e495" points="1392,-652 1655,-652 "/>
<text text-anchor="start" x="1400" y="-636.8" font-family="Times,serif" font-size="14.00" fill="#40575d">Generates a LightReady</text>
<text text-anchor="start" x="1400" y="-621.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> that has the committed entries </text>
<text text-anchor="start" x="1400" y="-606.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> and messages but no commit index</text>
<text text-anchor="start" x="1400" y="-591.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> 获取从commit_since_index后的log entries</text>
<polyline fill="none" stroke="#f7e495" points="1392,-584 1655,-584 "/>
<text text-anchor="start" x="1400" y="-568.8" font-family="Times,serif" font-size="14.00" fill="#40575d">更新RawNode的commit_since_index变量</text>
</g>
<!-- RawNode_advance_append&#45;&gt;RawNode_gen_light_ready -->
<g id="edge86" class="edge">
<title>RawNode_advance_append&#45;&gt;RawNode_gen_light_ready</title>
<path fill="none" stroke="#666666" d="M1260.28,-1229.93C1287.16,-1181.11 1332.09,-1093.06 1355,-1012 1390.21,-887.44 1327.76,-835.94 1391,-723 1399.41,-707.98 1410.92,-694.31 1423.65,-682.16"/>
<polygon fill="#666666" stroke="#666666" points="1426.26,-684.52 1431.28,-675.19 1421.54,-679.36 1426.26,-684.52"/>
</g>
<!-- RawNode_gen_light_ready&#45;&gt;RaftLog_next_entries_since -->
<g id="edge94" class="edge">
<title>RawNode_gen_light_ready&#45;&gt;RaftLog_next_entries_since</title>
<path fill="none" stroke="#666666" d="M1559.49,-560.64C1590.06,-514.05 1637.93,-448.93 1692,-404 1715.62,-384.37 1745.65,-368.1 1771.34,-356.19"/>
<polygon fill="#666666" stroke="#666666" points="1772.92,-359.32 1780.59,-352.01 1770.03,-352.94 1772.92,-359.32"/>
</g>
<!-- RawNode_advance -->
<g id="node55" class="node">
<title>RawNode_advance</title>
<path fill="none" stroke="#1c2123" d="M24,-1347C24,-1347 190,-1347 190,-1347 196,-1347 202,-1353 202,-1359 202,-1359 202,-1411 202,-1411 202,-1417 196,-1423 190,-1423 190,-1423 24,-1423 24,-1423 18,-1423 12,-1417 12,-1411 12,-1411 12,-1359 12,-1359 12,-1353 18,-1347 24,-1347"/>
<text text-anchor="middle" x="107" y="-1407.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_advance(Ready)</text>
<polyline fill="none" stroke="#1c2123" points="12,-1400 202,-1400 "/>
<text text-anchor="start" x="20" y="-1384.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">advance the ready </text>
<text text-anchor="start" x="20" y="-1369.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> after full procssing it</text>
<text text-anchor="start" x="20" y="-1354.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> applied = commit_since_index</text>
</g>
<!-- RawNode_advance&#45;&gt;RawNode_advance_append -->
<g id="edge87" class="edge">
<title>RawNode_advance&#45;&gt;RawNode_advance_append</title>
<path fill="none" stroke="#666666" d="M202.38,-1381.27C299.73,-1377.75 455.95,-1373 591,-1373 591,-1373 591,-1373 808,-1373 920.03,-1373 1043.92,-1338.72 1129.55,-1309.34"/>
<polygon fill="#666666" stroke="#666666" points="1130.72,-1312.64 1139.02,-1306.06 1128.43,-1306.02 1130.72,-1312.64"/>
</g>
<!-- RawNode_advance_apply_to -->
<g id="node56" class="node">
<title>RawNode_advance_apply_to</title>
<path fill="none" stroke="#1c2123" d="M1161.5,-1371.5C1161.5,-1371.5 1313.5,-1371.5 1313.5,-1371.5 1319.5,-1371.5 1325.5,-1377.5 1325.5,-1383.5 1325.5,-1383.5 1325.5,-1420.5 1325.5,-1420.5 1325.5,-1426.5 1319.5,-1432.5 1313.5,-1432.5 1313.5,-1432.5 1161.5,-1432.5 1161.5,-1432.5 1155.5,-1432.5 1149.5,-1426.5 1149.5,-1420.5 1149.5,-1420.5 1149.5,-1383.5 1149.5,-1383.5 1149.5,-1377.5 1155.5,-1371.5 1161.5,-1371.5"/>
<text text-anchor="middle" x="1237.5" y="-1417.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_advance_apply_to</text>
<polyline fill="none" stroke="#1c2123" points="1149.5,-1409.5 1325.5,-1409.5 "/>
<text text-anchor="start" x="1157.5" y="-1394.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">apply_to到</text>
<text text-anchor="start" x="1157.5" y="-1379.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> commit_since_index</text>
</g>
<!-- RawNode_advance&#45;&gt;RawNode_advance_apply_to -->
<g id="edge88" class="edge">
<title>RawNode_advance&#45;&gt;RawNode_advance_apply_to</title>
<path fill="none" stroke="#666666" d="M202.32,-1393.08C299.62,-1400.72 455.8,-1411 591,-1411 591,-1411 591,-1411 808,-1411 921.63,-1411 1052.16,-1407.8 1139,-1405.21"/>
<polygon fill="#666666" stroke="#666666" points="1139.22,-1408.71 1149.11,-1404.91 1139.01,-1401.71 1139.22,-1408.71"/>
</g>
<!-- RawNode_commit_apply -->
<g id="node57" class="node">
<title>RawNode_commit_apply</title>
<path fill="none" stroke="#1c2123" d="M1590,-1419C1590,-1419 1457,-1419 1457,-1419 1451,-1419 1445,-1413 1445,-1407 1445,-1407 1445,-1395 1445,-1395 1445,-1389 1451,-1383 1457,-1383 1457,-1383 1590,-1383 1590,-1383 1596,-1383 1602,-1389 1602,-1395 1602,-1395 1602,-1407 1602,-1407 1602,-1413 1596,-1419 1590,-1419"/>
<text text-anchor="middle" x="1523.5" y="-1397.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_commit_apply</text>
</g>
<!-- RawNode_advance_apply_to&#45;&gt;RawNode_commit_apply -->
<g id="edge90" class="edge">
<title>RawNode_advance_apply_to&#45;&gt;RawNode_commit_apply</title>
<path fill="none" stroke="#666666" d="M1325.64,-1401.69C1360.22,-1401.57 1399.92,-1401.43 1434.58,-1401.31"/>
<polygon fill="#666666" stroke="#666666" points="1434.7,-1404.81 1444.68,-1401.27 1434.67,-1397.81 1434.7,-1404.81"/>
</g>
<!-- RawNode_commit_apply&#45;&gt;RaftCore_commit_apply -->
<g id="edge89" class="edge">
<title>RawNode_commit_apply&#45;&gt;RaftCore_commit_apply</title>
<path fill="none" stroke="#666666" d="M1602.12,-1399.8C1703.02,-1398.23 1879.86,-1395.49 1994.54,-1393.71"/>
<polygon fill="#666666" stroke="#666666" points="1994.81,-1397.2 2004.75,-1393.55 1994.7,-1390.2 1994.81,-1397.2"/>
</g>
<!-- RawNode_has_ready -->
<g id="node58" class="node">
<title>RawNode_has_ready</title>
<path fill="none" stroke="#1c2123" d="M53,-20.5C53,-20.5 161,-20.5 161,-20.5 167,-20.5 173,-26.5 173,-32.5 173,-32.5 173,-69.5 173,-69.5 173,-75.5 167,-81.5 161,-81.5 161,-81.5 53,-81.5 53,-81.5 47,-81.5 41,-75.5 41,-69.5 41,-69.5 41,-32.5 41,-32.5 41,-26.5 47,-20.5 53,-20.5"/>
<text text-anchor="middle" x="107" y="-66.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_has_ready</text>
<polyline fill="none" stroke="#1c2123" points="41,-58.5 173,-58.5 "/>
<text text-anchor="start" x="49" y="-43.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">检查是否</text>
<text text-anchor="start" x="49" y="-28.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 需要调用ready</text>
</g>
<!-- RawNode_has_ready&#45;&gt;RaftLog_has_next_entries_since -->
<g id="edge91" class="edge">
<title>RawNode_has_ready&#45;&gt;RaftLog_has_next_entries_since</title>
<path fill="none" stroke="#666666" d="M173.29,-62.56C196.88,-66.74 224.16,-71.57 250.35,-76.2"/>
<polygon fill="#666666" stroke="#666666" points="249.86,-79.67 260.32,-77.97 251.08,-72.78 249.86,-79.67"/>
</g>
<!-- RawNode_ready -->
<g id="node59" class="node">
<title>RawNode_ready</title>
<path fill="none" stroke="#1c2123" d="M22.5,-403C22.5,-403 191.5,-403 191.5,-403 197.5,-403 203.5,-409 203.5,-415 203.5,-415 203.5,-543 203.5,-543 203.5,-549 197.5,-555 191.5,-555 191.5,-555 22.5,-555 22.5,-555 16.5,-555 10.5,-549 10.5,-543 10.5,-543 10.5,-415 10.5,-415 10.5,-409 16.5,-403 22.5,-403"/>
<text text-anchor="middle" x="107" y="-539.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_ready</text>
<polyline fill="none" stroke="#1c2123" points="10.5,-532 203.5,-532 "/>
<text text-anchor="start" x="18.5" y="-516.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Returns the outstanding worker</text>
<text text-anchor="start" x="18.5" y="-501.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> that application needs to handle</text>
<polyline fill="none" stroke="#1c2123" points="10.5,-494 203.5,-494 "/>
<text text-anchor="start" x="18.5" y="-478.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">返回Ready</text>
<polyline fill="none" stroke="#1c2123" points="10.5,-471 203.5,-471 "/>
<text text-anchor="start" x="18.5" y="-455.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">1.需要发送的Raft Message</text>
<text text-anchor="start" x="18.5" y="-440.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 2.需要持久化的log entries</text>
<text text-anchor="start" x="18.5" y="-425.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 3.需要apply 的snapshot</text>
<text text-anchor="start" x="18.5" y="-410.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 4.需要保存的hardstate</text>
</g>
<!-- RawNode_ready&#45;&gt;RaftLog_has_next_entries_since -->
<g id="edge92" class="edge">
<title>RawNode_ready&#45;&gt;RaftLog_has_next_entries_since</title>
<path fill="none" stroke="#666666" d="M157.39,-402.67C213.55,-315.89 302.24,-178.84 339.32,-121.55"/>
<polygon fill="#666666" stroke="#666666" points="342.32,-123.36 344.81,-113.06 336.44,-119.55 342.32,-123.36"/>
</g>
<!-- RawNode_ready&#45;&gt;RawNode_gen_light_ready -->
<g id="edge93" class="edge">
<title>RawNode_ready&#45;&gt;RawNode_gen_light_ready</title>
<path fill="none" stroke="#666666" d="M203.6,-501.78C300.59,-522.88 455.35,-551 591,-551 591,-551 591,-551 1008.5,-551 1135.54,-551 1278.78,-571.38 1381.72,-589.65"/>
<polygon fill="#666666" stroke="#666666" points="1381.4,-593.15 1391.86,-591.47 1382.64,-586.26 1381.4,-593.15"/>
</g>
<!-- RawNode_tick -->
<g id="node60" class="node">
<title>RawNode_tick</title>
<path fill="none" stroke="#1c2123" d="M21.5,-766.5C21.5,-766.5 192.5,-766.5 192.5,-766.5 198.5,-766.5 204.5,-772.5 204.5,-778.5 204.5,-778.5 204.5,-815.5 204.5,-815.5 204.5,-821.5 198.5,-827.5 192.5,-827.5 192.5,-827.5 21.5,-827.5 21.5,-827.5 15.5,-827.5 9.5,-821.5 9.5,-815.5 9.5,-815.5 9.5,-778.5 9.5,-778.5 9.5,-772.5 15.5,-766.5 21.5,-766.5"/>
<text text-anchor="middle" x="107" y="-812.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_tick</text>
<polyline fill="none" stroke="#1c2123" points="9.5,-804.5 204.5,-804.5 "/>
<text text-anchor="start" x="17.5" y="-789.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Tick advance the internal logical</text>
<text text-anchor="start" x="17.5" y="-774.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> clock by a single tick</text>
</g>
<!-- RaftCore_tick -->
<g id="node61" class="node">
<title>RaftCore_tick</title>
<path fill="none" stroke="#1c2123" d="M262,-747.5C262,-747.5 453,-747.5 453,-747.5 459,-747.5 465,-753.5 465,-759.5 465,-759.5 465,-834.5 465,-834.5 465,-840.5 459,-846.5 453,-846.5 453,-846.5 262,-846.5 262,-846.5 256,-846.5 250,-840.5 250,-834.5 250,-834.5 250,-759.5 250,-759.5 250,-753.5 256,-747.5 262,-747.5"/>
<text text-anchor="middle" x="357.5" y="-831.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_tick</text>
<polyline fill="none" stroke="#1c2123" points="250,-823.5 465,-823.5 "/>
<text text-anchor="start" x="258" y="-808.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果是leader就调用 tick_heartbeat</text>
<polyline fill="none" stroke="#1c2123" points="250,-800.5 465,-800.5 "/>
<text text-anchor="start" x="258" y="-785.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果是Follower,PreCandidate,</text>
<text text-anchor="start" x="258" y="-770.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Candidate,就调用</text>
<text text-anchor="start" x="258" y="-755.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> tick_election</text>
</g>
<!-- RawNode_tick&#45;&gt;RaftCore_tick -->
<g id="edge96" class="edge">
<title>RawNode_tick&#45;&gt;RaftCore_tick</title>
<path fill="none" stroke="#666666" d="M204.79,-797C216.17,-797 227.88,-797 239.5,-797"/>
<polygon fill="#666666" stroke="#666666" points="239.68,-800.5 249.68,-797 239.68,-793.5 239.68,-800.5"/>
</g>
<!-- RaftCore_tick_election -->
<g id="node62" class="node">
<title>RaftCore_tick_election</title>
<path fill="none" stroke="#1c2123" d="M513,-747.5C513,-747.5 671,-747.5 671,-747.5 677,-747.5 683,-753.5 683,-759.5 683,-759.5 683,-834.5 683,-834.5 683,-840.5 677,-846.5 671,-846.5 671,-846.5 513,-846.5 513,-846.5 507,-846.5 501,-840.5 501,-834.5 501,-834.5 501,-759.5 501,-759.5 501,-753.5 507,-747.5 513,-747.5"/>
<text text-anchor="middle" x="592" y="-831.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_tick_election</text>
<polyline fill="none" stroke="#1c2123" points="501,-823.5 683,-823.5 "/>
<text text-anchor="start" x="509" y="-808.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Follower, PreCandidate</text>
<text text-anchor="start" x="509" y="-793.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Candidate 角色</text>
<polyline fill="none" stroke="#1c2123" points="501,-785.5 683,-785.5 "/>
<text text-anchor="start" x="509" y="-770.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Run by follwers and cndidates</text>
<text text-anchor="start" x="509" y="-755.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> after self.election_timeout</text>
</g>
<!-- RaftCore_tick&#45;&gt;RaftCore_tick_election -->
<g id="edge97" class="edge">
<title>RaftCore_tick&#45;&gt;RaftCore_tick_election</title>
<path fill="none" stroke="#666666" d="M465.22,-797C473.71,-797 482.27,-797 490.71,-797"/>
<polygon fill="#666666" stroke="#666666" points="490.93,-800.5 500.93,-797 490.93,-793.5 490.93,-800.5"/>
</g>
<!-- RaftCore_tick_election&#45;&gt;RaftCore_step -->
<g id="edge98" class="edge">
<title>RaftCore_tick_election&#45;&gt;RaftCore_step</title>
<path fill="none" stroke="#666666" d="M683.02,-829.97C692.92,-833.59 703.01,-837.28 712.94,-840.92"/>
<polygon fill="#666666" stroke="#666666" points="711.81,-844.23 722.4,-844.39 714.21,-837.66 711.81,-844.23"/>
</g>
<!-- RawNode_propose -->
<g id="node63" class="node">
<title>RawNode_propose</title>
<path fill="none" stroke="#1c2123" d="M23,-917C23,-917 191,-917 191,-917 197,-917 203,-923 203,-929 203,-929 203,-951 203,-951 203,-957 197,-963 191,-963 191,-963 23,-963 23,-963 17,-963 11,-957 11,-951 11,-951 11,-929 11,-929 11,-923 17,-917 23,-917"/>
<text text-anchor="middle" x="107" y="-947.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_propose</text>
<polyline fill="none" stroke="#1c2123" points="11,-940 203,-940 "/>
<text text-anchor="start" x="19" y="-924.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">应用propose data to the raft log</text>
</g>
<!-- RawNode_propose&#45;&gt;RaftCore_step -->
<g id="edge100" class="edge">
<title>RawNode_propose&#45;&gt;RaftCore_step</title>
<path fill="none" stroke="#666666" d="M203.2,-932.29C317.3,-922.87 514.24,-906.09 683,-889 691.3,-888.16 699.91,-887.25 708.54,-886.32"/>
<polygon fill="#666666" stroke="#666666" points="709.12,-889.78 718.68,-885.21 708.36,-882.82 709.12,-889.78"/>
</g>
<!-- RawNode_step -->
<g id="node64" class="node">
<title>RawNode_step</title>
<path fill="none" stroke="#1c2123" d="M35,-852C35,-852 179,-852 179,-852 185,-852 191,-858 191,-864 191,-864 191,-886 191,-886 191,-892 185,-898 179,-898 179,-898 35,-898 35,-898 29,-898 23,-892 23,-886 23,-886 23,-864 23,-864 23,-858 29,-852 35,-852"/>
<text text-anchor="middle" x="107" y="-882.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_step</text>
<polyline fill="none" stroke="#1c2123" points="23,-875 191,-875 "/>
<text text-anchor="start" x="31" y="-859.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理其他peer发来的消息</text>
</g>
<!-- RawNode_step&#45;&gt;RaftCore_step -->
<g id="edge95" class="edge">
<title>RawNode_step&#45;&gt;RaftCore_step</title>
<path fill="none" stroke="#666666" d="M191.16,-875C320.85,-875 570.68,-875 708.6,-875"/>
<polygon fill="#666666" stroke="#666666" points="708.74,-878.5 718.74,-875 708.74,-871.5 708.74,-878.5"/>
</g>
<!-- RawNode_new -->
<g id="node65" class="node">
<title>RawNode_new</title>
<path fill="none" stroke="#1c2123" d="M145,-1480C145,-1480 69,-1480 69,-1480 63,-1480 57,-1474 57,-1468 57,-1468 57,-1456 57,-1456 57,-1450 63,-1444 69,-1444 69,-1444 145,-1444 145,-1444 151,-1444 157,-1450 157,-1456 157,-1456 157,-1468 157,-1468 157,-1474 151,-1480 145,-1480"/>
<text text-anchor="middle" x="107" y="-1458.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_new</text>
</g>
<!-- RawNode_new&#45;&gt;RaftCore_new -->
<g id="edge99" class="edge">
<title>RawNode_new&#45;&gt;RaftCore_new</title>
<path fill="none" stroke="#666666" d="M157.02,-1462C244.28,-1462 432.31,-1462 591,-1462 591,-1462 591,-1462 1238.5,-1462 1433.37,-1462 1664.57,-1462 1769.56,-1462"/>
<polygon fill="#666666" stroke="#666666" points="1769.62,-1465.5 1779.62,-1462 1769.62,-1458.5 1769.62,-1465.5"/>
</g>
</g>
</svg>
