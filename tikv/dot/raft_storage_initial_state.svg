<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raft_storage_initial_state Pages: 1 -->
<svg width="1280pt" height="418pt"
 viewBox="0.00 0.00 1280.00 418.05" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 414.05)">
<title>raft_storage_initial_state</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-414.05 1276,-414.05 1276,4 -4,4"/>
<!-- RawNode_new -->
<g id="node1" class="node">
<title>RawNode_new</title>
<path fill="none" stroke="#1c2123" d="M88,-247C88,-247 12,-247 12,-247 6,-247 0,-241 0,-235 0,-235 0,-223 0,-223 0,-217 6,-211 12,-211 12,-211 88,-211 88,-211 94,-211 100,-217 100,-223 100,-223 100,-235 100,-235 100,-241 94,-247 88,-247"/>
<text text-anchor="middle" x="50" y="-225.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode_new</text>
</g>
<!-- Raft_new -->
<g id="node2" class="node">
<title>Raft_new</title>
<path fill="none" stroke="#1c2123" d="M193,-247C193,-247 148,-247 148,-247 142,-247 136,-241 136,-235 136,-235 136,-223 136,-223 136,-217 142,-211 148,-211 148,-211 193,-211 193,-211 199,-211 205,-217 205,-223 205,-223 205,-235 205,-235 205,-241 199,-247 193,-247"/>
<text text-anchor="middle" x="170.5" y="-225.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Raft_new</text>
</g>
<!-- RawNode_new&#45;&gt;Raft_new -->
<g id="edge1" class="edge">
<title>RawNode_new&#45;&gt;Raft_new</title>
<path fill="none" stroke="#666666" d="M100.23,-229C108.63,-229 117.31,-229 125.57,-229"/>
<polygon fill="#666666" stroke="#666666" points="125.75,-232.5 135.75,-229 125.75,-225.5 125.75,-232.5"/>
</g>
<!-- Storage_initial_state -->
<g id="node3" class="node">
<title>Storage_initial_state</title>
<path fill="none" stroke="#1c2123" d="M377,-247C377,-247 273,-247 273,-247 267,-247 261,-241 261,-235 261,-235 261,-223 261,-223 261,-217 267,-211 273,-211 273,-211 377,-211 377,-211 383,-211 389,-217 389,-223 389,-223 389,-235 389,-235 389,-241 383,-247 377,-247"/>
<text text-anchor="middle" x="325" y="-225.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage_initial_state</text>
</g>
<!-- Raft_new&#45;&gt;Storage_initial_state -->
<g id="edge2" class="edge">
<title>Raft_new&#45;&gt;Storage_initial_state</title>
<path fill="none" stroke="#666666" d="M205.34,-229C218.73,-229 234.68,-229 250.47,-229"/>
<polygon fill="#666666" stroke="#666666" points="250.8,-232.5 260.8,-229 250.8,-225.5 250.8,-232.5"/>
</g>
<!-- RaftCore_post_conf_change -->
<g id="node5" class="node">
<title>RaftCore_post_conf_change</title>
<path fill="none" stroke="#1c2123" d="M1097.5,-104C1097.5,-104 950.5,-104 950.5,-104 944.5,-104 938.5,-98 938.5,-92 938.5,-92 938.5,-80 938.5,-80 938.5,-74 944.5,-68 950.5,-68 950.5,-68 1097.5,-68 1097.5,-68 1103.5,-68 1109.5,-74 1109.5,-80 1109.5,-80 1109.5,-92 1109.5,-92 1109.5,-98 1103.5,-104 1097.5,-104"/>
<text text-anchor="middle" x="1024" y="-82.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_post_conf_change</text>
</g>
<!-- Raft_new&#45;&gt;RaftCore_post_conf_change -->
<g id="edge4" class="edge">
<title>Raft_new&#45;&gt;RaftCore_post_conf_change</title>
<path fill="none" stroke="#666666" d="M205.23,-215.26C216.53,-210.82 229.24,-206.02 241,-202 416.9,-141.84 458.03,-109.72 642,-83 753.72,-66.77 783.12,-81.67 896,-83 906.36,-83.12 917.2,-83.3 927.99,-83.51"/>
<polygon fill="#666666" stroke="#666666" points="928.23,-87.02 938.3,-83.72 928.37,-80.02 928.23,-87.02"/>
</g>
<!-- RaftCore_load_state -->
<g id="node6" class="node">
<title>RaftCore_load_state</title>
<path fill="#feed9b" stroke="#f7e495" d="M944,-266C944,-266 1104,-266 1104,-266 1110,-266 1116,-272 1116,-278 1116,-278 1116,-368 1116,-368 1116,-374 1110,-380 1104,-380 1104,-380 944,-380 944,-380 938,-380 932,-374 932,-368 932,-368 932,-278 932,-278 932,-272 938,-266 944,-266"/>
<text text-anchor="middle" x="1024" y="-364.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RaftCore_load_state</text>
<polyline fill="none" stroke="#f7e495" points="932,-357 1116,-357 "/>
<text text-anchor="start" x="940" y="-341.8" font-family="Times,serif" font-size="14.00" fill="#40575d">使用hardState更新</text>
<text text-anchor="start" x="940" y="-326.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> Raft的term,vote</text>
<text text-anchor="start" x="940" y="-311.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> raft_log的committed</text>
<text text-anchor="start" x="940" y="-296.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> 变量</text>
<polyline fill="none" stroke="#f7e495" points="932,-289 1116,-289 "/>
<text text-anchor="start" x="940" y="-273.8" font-family="Times,serif" font-size="14.00" fill="#40575d">检查committed &lt;= last_index</text>
</g>
<!-- Raft_new&#45;&gt;RaftCore_load_state -->
<g id="edge5" class="edge">
<title>Raft_new&#45;&gt;RaftCore_load_state</title>
<path fill="none" stroke="#666666" d="M205.11,-243.12C216.4,-247.57 229.14,-252.29 241,-256 521.84,-343.72 603.63,-384.96 896,-352 904.49,-351.04 913.24,-349.74 921.99,-348.21"/>
<polygon fill="#666666" stroke="#666666" points="922.65,-351.64 931.85,-346.39 921.39,-344.76 922.65,-351.64"/>
</g>
<!-- RaftCore_become_follower -->
<g id="node7" class="node">
<title>RaftCore_become_follower</title>
<path fill="none" stroke="#1c2123" d="M397,-36C397,-36 253,-36 253,-36 247,-36 241,-30 241,-24 241,-24 241,-12 241,-12 241,-6 247,0 253,0 253,0 397,0 397,0 403,0 409,-6 409,-12 409,-12 409,-24 409,-24 409,-30 403,-36 397,-36"/>
<text text-anchor="middle" x="325" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCore_become_follower</text>
</g>
<!-- Raft_new&#45;&gt;RaftCore_become_follower -->
<g id="edge6" class="edge">
<title>Raft_new&#45;&gt;RaftCore_become_follower</title>
<path fill="none" stroke="#666666" d="M173.66,-210.9C178.83,-175.33 195.1,-95.79 241,-50 244.07,-46.93 247.48,-44.15 251.09,-41.63"/>
<polygon fill="#666666" stroke="#666666" points="253.2,-44.45 259.88,-36.22 249.53,-38.49 253.2,-44.45"/>
</g>
<!-- Storage_last_index -->
<g id="node11" class="node">
<title>Storage_last_index</title>
<path fill="none" stroke="#1c2123" d="M1260,-384C1260,-384 1164,-384 1164,-384 1158,-384 1152,-378 1152,-372 1152,-372 1152,-360 1152,-360 1152,-354 1158,-348 1164,-348 1164,-348 1260,-348 1260,-348 1266,-348 1272,-354 1272,-360 1272,-360 1272,-372 1272,-372 1272,-378 1266,-384 1260,-384"/>
<text text-anchor="middle" x="1212" y="-362.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage_last_index</text>
</g>
<!-- Raft_new&#45;&gt;Storage_last_index -->
<g id="edge12" class="edge">
<title>Raft_new&#45;&gt;Storage_last_index</title>
<path fill="none" stroke="#666666" d="M187.11,-247.22C200.29,-261.71 220.28,-281.69 241,-295 355.26,-368.39 388.69,-409 524.5,-409 524.5,-409 524.5,-409 770,-409 924.01,-409 963.75,-413.19 1116,-390 1124.49,-388.71 1133.33,-386.99 1142.05,-385.07"/>
<polygon fill="#666666" stroke="#666666" points="1142.85,-388.47 1151.81,-382.82 1141.28,-381.65 1142.85,-388.47"/>
</g>
<!-- RaftState -->
<g id="node4" class="node">
<title>RaftState</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M457,-194.5C457,-194.5 594,-194.5 594,-194.5 600,-194.5 606,-200.5 606,-206.5 606,-206.5 606,-251.5 606,-251.5 606,-257.5 600,-263.5 594,-263.5 594,-263.5 457,-263.5 457,-263.5 451,-263.5 445,-257.5 445,-251.5 445,-251.5 445,-206.5 445,-206.5 445,-200.5 451,-194.5 457,-194.5"/>
<text text-anchor="middle" x="525.5" y="-248.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">RaftState</text>
<polyline fill="none" stroke="#8a8898" points="445,-240.5 606,-240.5 "/>
<text text-anchor="start" x="453" y="-225.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub hard_state: HardState,</text>
<polyline fill="none" stroke="#8a8898" points="445,-217.5 606,-217.5 "/>
<text text-anchor="start" x="453" y="-202.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub conf_state: ConfState,</text>
</g>
<!-- Storage_initial_state&#45;&gt;RaftState -->
<g id="edge3" class="edge">
<title>Storage_initial_state&#45;&gt;RaftState</title>
<path fill="none" stroke="#666666" d="M389.08,-229C403.61,-229 419.33,-229 434.75,-229"/>
<polygon fill="#666666" stroke="#666666" points="434.82,-232.5 444.82,-229 434.82,-225.5 434.82,-232.5"/>
</g>
<!-- HardState -->
<g id="node8" class="node">
<title>HardState</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M723.5,-250C723.5,-250 814.5,-250 814.5,-250 820.5,-250 826.5,-256 826.5,-262 826.5,-262 826.5,-330 826.5,-330 826.5,-336 820.5,-342 814.5,-342 814.5,-342 723.5,-342 723.5,-342 717.5,-342 711.5,-336 711.5,-330 711.5,-330 711.5,-262 711.5,-262 711.5,-256 717.5,-250 723.5,-250"/>
<text text-anchor="middle" x="769" y="-326.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">HardState</text>
<polyline fill="none" stroke="#8a8898" points="711.5,-319 826.5,-319 "/>
<text text-anchor="start" x="719.5" y="-303.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub term: u64,</text>
<polyline fill="none" stroke="#8a8898" points="711.5,-296 826.5,-296 "/>
<text text-anchor="start" x="719.5" y="-280.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub vote: u64,</text>
<polyline fill="none" stroke="#8a8898" points="711.5,-273 826.5,-273 "/>
<text text-anchor="start" x="719.5" y="-257.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub commit: u64,</text>
</g>
<!-- RaftState&#45;&gt;HardState -->
<g id="edge7" class="edge">
<title>RaftState&#45;&gt;HardState</title>
<path fill="none" stroke="#666666" d="M606.25,-251.12C637.1,-259.69 672.02,-269.37 701.49,-277.55"/>
<polygon fill="#666666" stroke="#666666" points="700.69,-280.96 711.26,-280.26 702.56,-274.21 700.69,-280.96"/>
</g>
<!-- ConfState -->
<g id="node9" class="node">
<title>ConfState</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M654,-93C654,-93 884,-93 884,-93 890,-93 896,-99 896,-105 896,-105 896,-219 896,-219 896,-225 890,-231 884,-231 884,-231 654,-231 654,-231 648,-231 642,-225 642,-219 642,-219 642,-105 642,-105 642,-99 648,-93 654,-93"/>
<text text-anchor="middle" x="769" y="-215.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ConfState</text>
<polyline fill="none" stroke="#8a8898" points="642,-208 896,-208 "/>
<text text-anchor="start" x="650" y="-192.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub voters: ::std::vec::Vec&lt;u64&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="642,-185 896,-185 "/>
<text text-anchor="start" x="650" y="-169.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub learners: ::std::vec::Vec&lt;u64&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="642,-162 896,-162 "/>
<text text-anchor="start" x="650" y="-146.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub voters_outgoing: ::std::vec::Vec&lt;u64&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="642,-139 896,-139 "/>
<text text-anchor="start" x="650" y="-123.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub learners_next: ::std::vec::Vec&lt;u64&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="642,-116 896,-116 "/>
<text text-anchor="start" x="650" y="-100.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub auto_leave: bool,</text>
</g>
<!-- RaftState&#45;&gt;ConfState -->
<g id="edge8" class="edge">
<title>RaftState&#45;&gt;ConfState</title>
<path fill="none" stroke="#666666" d="M606.25,-206.88C614.53,-204.58 623.11,-202.2 631.79,-199.79"/>
<polygon fill="#666666" stroke="#666666" points="632.94,-203.1 641.64,-197.06 631.07,-196.36 632.94,-203.1"/>
</g>
<!-- RaftCore_load_state&#45;&gt;Storage_last_index -->
<g id="edge11" class="edge">
<title>RaftCore_load_state&#45;&gt;Storage_last_index</title>
<path fill="none" stroke="#666666" d="M1116.09,-344.06C1124.83,-346.08 1133.58,-348.1 1142.05,-350.06"/>
<polygon fill="#666666" stroke="#666666" points="1141.31,-353.48 1151.84,-352.32 1142.89,-346.66 1141.31,-353.48"/>
</g>
<!-- HardState&#45;&gt;RaftCore_load_state -->
<g id="edge9" class="edge">
<title>HardState&#45;&gt;RaftCore_load_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M826.78,-302.06C854.77,-305.05 889.38,-308.74 921.71,-312.19"/>
<polygon fill="green" stroke="green" points="921.34,-315.67 931.66,-313.25 922.08,-308.71 921.34,-315.67"/>
</g>
<!-- ConfState&#45;&gt;RaftCore_post_conf_change -->
<g id="edge13" class="edge">
<title>ConfState&#45;&gt;RaftCore_post_conf_change</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M896.13,-124.11C915.76,-118.21 935.41,-112.31 953.18,-106.98"/>
<polygon fill="green" stroke="green" points="954.27,-110.3 962.84,-104.07 952.26,-103.6 954.27,-110.3"/>
</g>
<!-- confchnage_restore -->
<g id="node10" class="node">
<title>confchnage_restore</title>
<path fill="none" stroke="#1c2123" d="M1073,-180C1073,-180 975,-180 975,-180 969,-180 963,-174 963,-168 963,-168 963,-156 963,-156 963,-150 969,-144 975,-144 975,-144 1073,-144 1073,-144 1079,-144 1085,-150 1085,-156 1085,-156 1085,-168 1085,-168 1085,-174 1079,-180 1073,-180"/>
<text text-anchor="middle" x="1024" y="-158.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">confchnage_restore</text>
</g>
<!-- ConfState&#45;&gt;confchnage_restore -->
<g id="edge10" class="edge">
<title>ConfState&#45;&gt;confchnage_restore</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M896.13,-162C915.58,-162 935.05,-162 952.68,-162"/>
<polygon fill="green" stroke="green" points="952.84,-165.5 962.84,-162 952.84,-158.5 952.84,-165.5"/>
</g>
</g>
</svg>
