<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: range_scanner_snapshot_from Pages: 1 -->
<svg width="1158pt" height="291pt"
 viewBox="0.00 0.00 1158.00 291.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 287)">
<title>range_scanner_snapshot_from</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-287 1154,-287 1154,4 -4,4"/>
<!-- Endpoint_handle_unary_request_impl -->
<g id="node1" class="node">
<title>Endpoint_handle_unary_request_impl</title>
<path fill="none" stroke="#1c2123" d="M212,-236C212,-236 12,-236 12,-236 6,-236 0,-230 0,-224 0,-224 0,-212 0,-212 0,-206 6,-200 12,-200 12,-200 212,-200 212,-200 218,-200 224,-206 224,-212 224,-212 224,-224 224,-224 224,-230 218,-236 212,-236"/>
<text text-anchor="middle" x="112" y="-214.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Endpoint_handle_unary_request_impl</text>
</g>
<!-- with_tls_engine -->
<g id="node2" class="node">
<title>with_tls_engine</title>
<path fill="none" stroke="#1c2123" d="M297,-221.5C297,-221.5 417,-221.5 417,-221.5 423,-221.5 429,-227.5 429,-233.5 429,-233.5 429,-270.5 429,-270.5 429,-276.5 423,-282.5 417,-282.5 417,-282.5 297,-282.5 297,-282.5 291,-282.5 285,-276.5 285,-270.5 285,-270.5 285,-233.5 285,-233.5 285,-227.5 291,-221.5 297,-221.5"/>
<text text-anchor="middle" x="357" y="-267.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">with_tls_engine</text>
<polyline fill="none" stroke="#1c2123" points="285,-259.5 429,-259.5 "/>
<text text-anchor="start" x="293" y="-244.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Execute the closure on</text>
<text text-anchor="start" x="293" y="-229.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> the thread local engine</text>
</g>
<!-- Endpoint_handle_unary_request_impl&#45;&gt;with_tls_engine -->
<g id="edge1" class="edge">
<title>Endpoint_handle_unary_request_impl&#45;&gt;with_tls_engine</title>
<path fill="none" stroke="#666666" d="M224.19,-233.56C241.26,-235.95 258.61,-238.37 274.88,-240.65"/>
<polygon fill="#666666" stroke="#666666" points="274.46,-244.12 284.85,-242.04 275.43,-237.19 274.46,-244.12"/>
</g>
<!-- Endpoint_async_snapshot_await -->
<g id="node3" class="node">
<title>Endpoint_async_snapshot_await</title>
<path fill="none" stroke="#1c2123" d="M442,-203C442,-203 272,-203 272,-203 266,-203 260,-197 260,-191 260,-191 260,-179 260,-179 260,-173 266,-167 272,-167 272,-167 442,-167 442,-167 448,-167 454,-173 454,-179 454,-179 454,-191 454,-191 454,-197 448,-203 442,-203"/>
<text text-anchor="middle" x="357" y="-181.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Endpoint_async_snapshot_await</text>
</g>
<!-- Endpoint_handle_unary_request_impl&#45;&gt;Endpoint_async_snapshot_await -->
<g id="edge2" class="edge">
<title>Endpoint_handle_unary_request_impl&#45;&gt;Endpoint_async_snapshot_await</title>
<path fill="none" stroke="#666666" d="M224.19,-202.9C232.72,-201.74 241.32,-200.57 249.82,-199.42"/>
<polygon fill="#666666" stroke="#666666" points="250.31,-202.89 259.74,-198.07 249.36,-195.95 250.31,-202.89"/>
</g>
<!-- tikv_Engine_async_snapshot -->
<g id="node6" class="node">
<title>tikv_Engine_async_snapshot</title>
<path fill="none" stroke="#1c2123" d="M917,-170C917,-170 767,-170 767,-170 761,-170 755,-164 755,-158 755,-158 755,-146 755,-146 755,-140 761,-134 767,-134 767,-134 917,-134 917,-134 923,-134 929,-140 929,-146 929,-146 929,-158 929,-158 929,-164 923,-170 917,-170"/>
<text text-anchor="middle" x="842" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tikv_Engine_async_snapshot</text>
</g>
<!-- with_tls_engine&#45;&gt;tikv_Engine_async_snapshot -->
<g id="edge10" class="edge">
<title>with_tls_engine&#45;&gt;tikv_Engine_async_snapshot</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M429.15,-258.65C502.41,-263.11 618.97,-263.5 714,-233 750.98,-221.13 787.79,-195.78 812.18,-176.58"/>
<polygon fill="green" stroke="green" points="814.67,-179.07 820.27,-170.08 810.29,-173.61 814.67,-179.07"/>
</g>
<!-- need_check_locks_in_replica_read -->
<g id="node4" class="node">
<title>need_check_locks_in_replica_read</title>
<path fill="none" stroke="#1c2123" d="M693,-224C693,-224 511,-224 511,-224 505,-224 499,-218 499,-212 499,-212 499,-200 499,-200 499,-194 505,-188 511,-188 511,-188 693,-188 693,-188 699,-188 705,-194 705,-200 705,-200 705,-212 705,-212 705,-218 699,-224 693,-224"/>
<text text-anchor="middle" x="602" y="-202.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">need_check_locks_in_replica_read</text>
</g>
<!-- Endpoint_async_snapshot_await&#45;&gt;need_check_locks_in_replica_read -->
<g id="edge3" class="edge">
<title>Endpoint_async_snapshot_await&#45;&gt;need_check_locks_in_replica_read</title>
<path fill="none" stroke="#666666" d="M454.04,-193.3C465.43,-194.28 477.13,-195.3 488.72,-196.3"/>
<polygon fill="#666666" stroke="#666666" points="488.6,-199.8 498.86,-197.17 489.2,-192.83 488.6,-199.8"/>
</g>
<!-- kv_snapshot -->
<g id="node5" class="node">
<title>kv_snapshot</title>
<path fill="none" stroke="#1c2123" d="M632,-170C632,-170 572,-170 572,-170 566,-170 560,-164 560,-158 560,-158 560,-146 560,-146 560,-140 566,-134 572,-134 572,-134 632,-134 632,-134 638,-134 644,-140 644,-146 644,-146 644,-158 644,-158 644,-164 638,-170 632,-170"/>
<text text-anchor="middle" x="602" y="-148.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv_snapshot</text>
</g>
<!-- Endpoint_async_snapshot_await&#45;&gt;kv_snapshot -->
<g id="edge4" class="edge">
<title>Endpoint_async_snapshot_await&#45;&gt;kv_snapshot</title>
<path fill="none" stroke="#666666" d="M454.04,-171.96C486.62,-167.53 521.77,-162.76 549.51,-158.99"/>
<polygon fill="#666666" stroke="#666666" points="550.33,-162.41 559.77,-157.6 549.39,-155.48 550.33,-162.41"/>
</g>
<!-- kv_snapshot&#45;&gt;tikv_Engine_async_snapshot -->
<g id="edge5" class="edge">
<title>kv_snapshot&#45;&gt;tikv_Engine_async_snapshot</title>
<path fill="none" stroke="#666666" d="M644.18,-152C671.79,-152 709.35,-152 744.26,-152"/>
<polygon fill="#666666" stroke="#666666" points="744.51,-155.5 754.51,-152 744.51,-148.5 744.51,-155.5"/>
</g>
<!-- RocksEngine_async_snapshot -->
<g id="node9" class="node">
<title>RocksEngine_async_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1138,-197C1138,-197 982,-197 982,-197 976,-197 970,-191 970,-185 970,-185 970,-173 970,-173 970,-167 976,-161 982,-161 982,-161 1138,-161 1138,-161 1144,-161 1150,-167 1150,-173 1150,-173 1150,-185 1150,-185 1150,-191 1144,-197 1138,-197"/>
<text text-anchor="middle" x="1060" y="-175.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RocksEngine_async_snapshot</text>
</g>
<!-- tikv_Engine_async_snapshot&#45;&gt;RocksEngine_async_snapshot -->
<g id="edge8" class="edge">
<title>tikv_Engine_async_snapshot&#45;&gt;RocksEngine_async_snapshot</title>
<path fill="none" stroke="#666666" d="M929.3,-162.79C939.26,-164.03 949.47,-165.31 959.59,-166.57"/>
<polygon fill="#666666" stroke="#666666" points="959.3,-170.06 969.66,-167.83 960.17,-163.12 959.3,-170.06"/>
</g>
<!-- RaftKV_async_snapshot -->
<g id="node10" class="node">
<title>RaftKV_async_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1123.5,-143C1123.5,-143 996.5,-143 996.5,-143 990.5,-143 984.5,-137 984.5,-131 984.5,-131 984.5,-119 984.5,-119 984.5,-113 990.5,-107 996.5,-107 996.5,-107 1123.5,-107 1123.5,-107 1129.5,-107 1135.5,-113 1135.5,-119 1135.5,-119 1135.5,-131 1135.5,-131 1135.5,-137 1129.5,-143 1123.5,-143"/>
<text text-anchor="middle" x="1060" y="-121.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftKV_async_snapshot</text>
</g>
<!-- tikv_Engine_async_snapshot&#45;&gt;RaftKV_async_snapshot -->
<g id="edge9" class="edge">
<title>tikv_Engine_async_snapshot&#45;&gt;RaftKV_async_snapshot</title>
<path fill="none" stroke="#666666" d="M929.3,-141.21C944.1,-139.36 959.46,-137.44 974.22,-135.6"/>
<polygon fill="#666666" stroke="#666666" points="974.84,-139.05 984.33,-134.33 973.97,-132.1 974.84,-139.05"/>
</g>
<!-- SnapContext -->
<g id="node7" class="node">
<title>SnapContext</title>
<path fill="none" stroke="#1c2123" d="M502,-0.5C502,-0.5 702,-0.5 702,-0.5 708,-0.5 714,-6.5 714,-12.5 714,-12.5 714,-103.5 714,-103.5 714,-109.5 708,-115.5 702,-115.5 702,-115.5 502,-115.5 502,-115.5 496,-115.5 490,-109.5 490,-103.5 490,-103.5 490,-12.5 490,-12.5 490,-6.5 496,-0.5 502,-0.5"/>
<text text-anchor="middle" x="602" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapContext</text>
<polyline fill="none" stroke="#1c2123" points="490,-92.5 714,-92.5 "/>
<text text-anchor="start" x="498" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub pb_ctx: &amp;&#39;a Context,</text>
<polyline fill="none" stroke="#1c2123" points="490,-69.5 714,-69.5 "/>
<text text-anchor="start" x="498" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub read_id: Option&lt;ThreadReadId&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="490,-46.5 714,-46.5 "/>
<text text-anchor="start" x="498" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub start_ts: TimeStamp,</text>
<polyline fill="none" stroke="#1c2123" points="490,-23.5 714,-23.5 "/>
<text text-anchor="start" x="498" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub key_ranges: Vec&lt;KeyRange&gt;,</text>
</g>
<!-- SnapContext&#45;&gt;tikv_Engine_async_snapshot -->
<g id="edge6" class="edge">
<title>SnapContext&#45;&gt;tikv_Engine_async_snapshot</title>
<path fill="none" stroke="#666666" d="M714.2,-106.72C726.23,-111.67 738.34,-116.52 750,-121 758.47,-124.25 767.44,-127.52 776.32,-130.65"/>
<polygon fill="#666666" stroke="#666666" points="775.3,-134 785.9,-133.99 777.61,-127.39 775.3,-134"/>
</g>
<!-- ThreadReadId -->
<g id="node8" class="node">
<title>ThreadReadId</title>
<path fill="none" stroke="#1c2123" d="M762,-4.5C762,-4.5 922,-4.5 922,-4.5 928,-4.5 934,-10.5 934,-16.5 934,-16.5 934,-99.5 934,-99.5 934,-105.5 928,-111.5 922,-111.5 922,-111.5 762,-111.5 762,-111.5 756,-111.5 750,-105.5 750,-99.5 750,-99.5 750,-16.5 750,-16.5 750,-10.5 756,-4.5 762,-4.5"/>
<text text-anchor="middle" x="842" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ThreadReadId</text>
<polyline fill="none" stroke="#1c2123" points="750,-88.5 934,-88.5 "/>
<text text-anchor="start" x="758" y="-73.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">whether the read request come</text>
<text text-anchor="start" x="758" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> from the same GRPC stream</text>
<polyline fill="none" stroke="#1c2123" points="750,-50.5 934,-50.5 "/>
<text text-anchor="start" x="758" y="-35.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">sequence: u64</text>
<polyline fill="none" stroke="#1c2123" points="750,-27.5 934,-27.5 "/>
<text text-anchor="start" x="758" y="-12.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub create_time: Timespec,</text>
</g>
<!-- SnapContext&#45;&gt;ThreadReadId -->
<g id="edge7" class="edge">
<title>SnapContext&#45;&gt;ThreadReadId</title>
<path fill="none" stroke="#666666" d="M714.33,-58C722.76,-58 731.24,-58 739.61,-58"/>
<polygon fill="#666666" stroke="#666666" points="739.74,-61.5 749.74,-58 739.74,-54.5 739.74,-61.5"/>
</g>
</g>
</svg>
