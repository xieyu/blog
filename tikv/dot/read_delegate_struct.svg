<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: read_delegate_struct Pages: 1 -->
<svg width="1050pt" height="514pt"
 viewBox="0.00 0.00 1050.00 514.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 510)">
<title>read_delegate_struct</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-510 1046,-510 1046,4 -4,4"/>
<!-- StoreMeta -->
<g id="node1" class="node">
<title>StoreMeta</title>
<path fill="none" stroke="#1c2123" d="M300,-208.5C300,-208.5 473,-208.5 473,-208.5 479,-208.5 485,-214.5 485,-220.5 485,-220.5 485,-280.5 485,-280.5 485,-286.5 479,-292.5 473,-292.5 473,-292.5 300,-292.5 300,-292.5 294,-292.5 288,-286.5 288,-280.5 288,-280.5 288,-220.5 288,-220.5 288,-214.5 294,-208.5 300,-208.5"/>
<text text-anchor="middle" x="386.5" y="-277.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreMeta</text>
<polyline fill="none" stroke="#1c2123" points="288,-269.5 485,-269.5 "/>
<text text-anchor="start" x="296" y="-254.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">region_id &#45;&gt; reader</text>
<polyline fill="none" stroke="#1c2123" points="288,-246.5 485,-246.5 "/>
<text text-anchor="start" x="296" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub readers: </text>
<text text-anchor="start" x="296" y="-216.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> HashMap&lt;u64, ReadDelegate&gt;,</text>
</g>
<!-- ReadDelegate -->
<g id="node3" class="node">
<title>ReadDelegate</title>
<path fill="none" stroke="#1c2123" d="M560,-80.5C560,-80.5 773,-80.5 773,-80.5 779,-80.5 785,-86.5 785,-92.5 785,-92.5 785,-336.5 785,-336.5 785,-342.5 779,-348.5 773,-348.5 773,-348.5 560,-348.5 560,-348.5 554,-348.5 548,-342.5 548,-336.5 548,-336.5 548,-92.5 548,-92.5 548,-86.5 554,-80.5 560,-80.5"/>
<text text-anchor="middle" x="666.5" y="-333.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ReadDelegate</text>
<polyline fill="none" stroke="#1c2123" points="548,-325.5 785,-325.5 "/>
<text text-anchor="start" x="556" y="-310.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">region: Arc&lt;metapb::Region&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="548,-302.5 785,-302.5 "/>
<text text-anchor="start" x="556" y="-287.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">peer_id: u64,</text>
<polyline fill="none" stroke="#1c2123" points="548,-279.5 785,-279.5 "/>
<text text-anchor="start" x="556" y="-264.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">term: u64,</text>
<polyline fill="none" stroke="#1c2123" points="548,-256.5 785,-256.5 "/>
<text text-anchor="start" x="556" y="-241.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">applied_index_term: u64,</text>
<polyline fill="none" stroke="#1c2123" points="548,-233.5 785,-233.5 "/>
<text text-anchor="start" x="556" y="-218.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">leader_lease: Option&lt;RemoteLease&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="548,-210.5 785,-210.5 "/>
<text text-anchor="start" x="556" y="-195.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">last_valid_ts: Timespec,</text>
<polyline fill="none" stroke="#1c2123" points="548,-187.5 785,-187.5 "/>
<text text-anchor="start" x="556" y="-172.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tag: String,</text>
<polyline fill="none" stroke="#1c2123" points="548,-164.5 785,-164.5 "/>
<text text-anchor="start" x="556" y="-149.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub txn_extra_op: </text>
<text text-anchor="start" x="556" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Arc&lt;AtomicCell&lt;TxnExtraOp&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="548,-126.5 785,-126.5 "/>
<text text-anchor="start" x="556" y="-111.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">max_ts_sync_status: Arc&lt;AtomicU64&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="548,-103.5 785,-103.5 "/>
<text text-anchor="start" x="556" y="-88.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">track_ver: TrackVer,</text>
</g>
<!-- StoreMeta&#45;&gt;ReadDelegate -->
<g id="edge3" class="edge">
<title>StoreMeta&#45;&gt;ReadDelegate</title>
<path fill="none" stroke="#666666" d="M485.12,-237.86C501.99,-235.67 519.76,-233.37 537.29,-231.1"/>
<polygon fill="#666666" stroke="#666666" points="538.12,-234.53 547.58,-229.77 537.22,-227.58 538.12,-234.53"/>
</g>
<!-- LocalReader -->
<g id="node2" class="node">
<title>LocalReader</title>
<path fill="none" stroke="#1c2123" d="M12,-103.5C12,-103.5 234,-103.5 234,-103.5 240,-103.5 246,-109.5 246,-115.5 246,-115.5 246,-313.5 246,-313.5 246,-319.5 240,-325.5 234,-325.5 234,-325.5 12,-325.5 12,-325.5 6,-325.5 0,-319.5 0,-313.5 0,-313.5 0,-115.5 0,-115.5 0,-109.5 6,-103.5 12,-103.5"/>
<text text-anchor="middle" x="123" y="-310.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LocalReader</text>
<polyline fill="none" stroke="#1c2123" points="0,-302.5 246,-302.5 "/>
<text text-anchor="start" x="8" y="-287.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_id: Cell&lt;Option&lt;u64&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-279.5 246,-279.5 "/>
<text text-anchor="start" x="8" y="-264.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_meta: Arc&lt;Mutex&lt;StoreMeta&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-256.5 246,-256.5 "/>
<text text-anchor="start" x="8" y="-241.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv_engine: E,</text>
<polyline fill="none" stroke="#1c2123" points="0,-233.5 246,-233.5 "/>
<text text-anchor="start" x="8" y="-218.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">metrics: ReadMetrics,</text>
<polyline fill="none" stroke="#1c2123" points="0,-210.5 246,-210.5 "/>
<text text-anchor="start" x="8" y="-195.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">delegates: </text>
<text text-anchor="start" x="8" y="-180.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> LruCache&lt;u64, Arc&lt;ReadDelegate&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-172.5 246,-172.5 "/>
<text text-anchor="start" x="8" y="-157.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">snap_cache: Option&lt;Arc&lt;E::Snapshot&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-149.5 246,-149.5 "/>
<text text-anchor="start" x="8" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cache_read_id: ThreadReadId,</text>
<polyline fill="none" stroke="#1c2123" points="0,-126.5 246,-126.5 "/>
<text text-anchor="start" x="8" y="-111.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">router: C,</text>
</g>
<!-- LocalReader&#45;&gt;StoreMeta -->
<g id="edge1" class="edge">
<title>LocalReader&#45;&gt;StoreMeta</title>
<path fill="none" stroke="#666666" d="M246.33,-231.34C256.9,-232.8 267.56,-234.26 278,-235.7"/>
<polygon fill="#666666" stroke="#666666" points="277.56,-239.17 287.95,-237.07 278.52,-232.24 277.56,-239.17"/>
</g>
<!-- LocalReader&#45;&gt;ReadDelegate -->
<g id="edge2" class="edge">
<title>LocalReader&#45;&gt;ReadDelegate</title>
<path fill="none" stroke="#666666" d="M246.39,-200.88C258.41,-199.91 270.43,-199.08 282,-198.5 374.77,-193.81 398.21,-194.25 491,-198.5 506.08,-199.19 521.88,-200.21 537.54,-201.42"/>
<polygon fill="#666666" stroke="#666666" points="537.55,-204.93 547.8,-202.23 538.11,-197.95 537.55,-204.93"/>
</g>
<!-- Region -->
<g id="node4" class="node">
<title>Region</title>
<path fill="none" stroke="#1c2123" d="M958,-323.5C958,-323.5 926,-323.5 926,-323.5 920,-323.5 914,-317.5 914,-311.5 914,-311.5 914,-299.5 914,-299.5 914,-293.5 920,-287.5 926,-287.5 926,-287.5 958,-287.5 958,-287.5 964,-287.5 970,-293.5 970,-299.5 970,-299.5 970,-311.5 970,-311.5 970,-317.5 964,-323.5 958,-323.5"/>
<text text-anchor="middle" x="942" y="-301.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region</text>
</g>
<!-- ReadDelegate&#45;&gt;Region -->
<g id="edge4" class="edge">
<title>ReadDelegate&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M785.3,-259.25C804.17,-265.97 823.56,-272.61 842,-278.5 862.33,-284.99 885.32,-291.32 904.02,-296.22"/>
<polygon fill="#666666" stroke="#666666" points="903.37,-299.66 913.93,-298.78 905.12,-292.89 903.37,-299.66"/>
</g>
<!-- RemoteLease -->
<g id="node5" class="node">
<title>RemoteLease</title>
<path fill="none" stroke="#1c2123" d="M854,-382C854,-382 1030,-382 1030,-382 1036,-382 1042,-388 1042,-394 1042,-394 1042,-439 1042,-439 1042,-445 1036,-451 1030,-451 1030,-451 854,-451 854,-451 848,-451 842,-445 842,-439 842,-439 842,-394 842,-394 842,-388 848,-382 854,-382"/>
<text text-anchor="middle" x="942" y="-435.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RemoteLease</text>
<polyline fill="none" stroke="#1c2123" points="842,-428 1042,-428 "/>
<text text-anchor="start" x="850" y="-412.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">expired_time: Arc&lt;AtomicU64&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="842,-405 1042,-405 "/>
<text text-anchor="start" x="850" y="-389.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">term: u64,</text>
</g>
<!-- ReadDelegate&#45;&gt;RemoteLease -->
<g id="edge5" class="edge">
<title>ReadDelegate&#45;&gt;RemoteLease</title>
<path fill="none" stroke="#666666" d="M785.08,-301.34C820.13,-327.23 856.89,-354.38 885.92,-375.82"/>
<polygon fill="#666666" stroke="#666666" points="884.15,-378.86 894.28,-381.99 888.31,-373.23 884.15,-378.86"/>
</g>
<!-- Timespec -->
<g id="node6" class="node">
<title>Timespec</title>
<path fill="none" stroke="#1c2123" d="M909.5,-200C909.5,-200 974.5,-200 974.5,-200 980.5,-200 986.5,-206 986.5,-212 986.5,-212 986.5,-257 986.5,-257 986.5,-263 980.5,-269 974.5,-269 974.5,-269 909.5,-269 909.5,-269 903.5,-269 897.5,-263 897.5,-257 897.5,-257 897.5,-212 897.5,-212 897.5,-206 903.5,-200 909.5,-200"/>
<text text-anchor="middle" x="942" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Timespec</text>
<polyline fill="none" stroke="#1c2123" points="897.5,-246 986.5,-246 "/>
<text text-anchor="start" x="905.5" y="-230.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub sec: i64</text>
<polyline fill="none" stroke="#1c2123" points="897.5,-223 986.5,-223 "/>
<text text-anchor="start" x="905.5" y="-207.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub nsec: i32</text>
</g>
<!-- ReadDelegate&#45;&gt;Timespec -->
<g id="edge6" class="edge">
<title>ReadDelegate&#45;&gt;Timespec</title>
<path fill="none" stroke="#666666" d="M785.08,-223.1C820.69,-225.7 858.08,-228.44 887.31,-230.57"/>
<polygon fill="#666666" stroke="#666666" points="887.07,-234.07 897.29,-231.3 887.58,-227.08 887.07,-234.07"/>
</g>
<!-- TxnExtraOp -->
<g id="node7" class="node">
<title>TxnExtraOp</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M893,-112C893,-112 991,-112 991,-112 997,-112 1003,-118 1003,-124 1003,-124 1003,-169 1003,-169 1003,-175 997,-181 991,-181 991,-181 893,-181 893,-181 887,-181 881,-175 881,-169 881,-169 881,-124 881,-124 881,-118 887,-112 893,-112"/>
<text text-anchor="middle" x="942" y="-165.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">TxnExtraOp</text>
<polyline fill="none" stroke="#8a8898" points="881,-158 1003,-158 "/>
<text text-anchor="start" x="889" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Noop = 0,</text>
<polyline fill="none" stroke="#8a8898" points="881,-135 1003,-135 "/>
<text text-anchor="start" x="889" y="-119.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ReadOldValue = 1,</text>
</g>
<!-- ReadDelegate&#45;&gt;TxnExtraOp -->
<g id="edge7" class="edge">
<title>ReadDelegate&#45;&gt;TxnExtraOp</title>
<path fill="none" stroke="#666666" d="M785.08,-185.27C814.35,-177.99 844.81,-170.41 870.97,-163.91"/>
<polygon fill="#666666" stroke="#666666" points="871.91,-167.28 880.77,-161.48 870.22,-160.49 871.91,-167.28"/>
</g>
<!-- TrackVer -->
<g id="node8" class="node">
<title>TrackVer</title>
<path fill="none" stroke="#1c2123" d="M870,-0.5C870,-0.5 1014,-0.5 1014,-0.5 1020,-0.5 1026,-6.5 1026,-12.5 1026,-12.5 1026,-80.5 1026,-80.5 1026,-86.5 1020,-92.5 1014,-92.5 1014,-92.5 870,-92.5 870,-92.5 864,-92.5 858,-86.5 858,-80.5 858,-80.5 858,-12.5 858,-12.5 858,-6.5 864,-0.5 870,-0.5"/>
<text text-anchor="start" x="866" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TrackVer</text>
<polyline fill="none" stroke="#1c2123" points="858,-69.5 1026,-69.5 "/>
<text text-anchor="start" x="866" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">version: Arc&lt;AtomicU64&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="858,-46.5 1026,-46.5 "/>
<text text-anchor="start" x="866" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">local_ver: u64,</text>
<polyline fill="none" stroke="#1c2123" points="858,-23.5 1026,-23.5 "/>
<text text-anchor="start" x="866" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">source: bool,</text>
</g>
<!-- ReadDelegate&#45;&gt;TrackVer -->
<g id="edge8" class="edge">
<title>ReadDelegate&#45;&gt;TrackVer</title>
<path fill="none" stroke="#666666" d="M785.21,-137.69C804.09,-125.73 823.5,-113.65 842,-102.5 844.62,-100.92 847.29,-99.32 849.98,-97.72"/>
<polygon fill="#666666" stroke="#666666" points="851.84,-100.69 858.68,-92.6 848.29,-94.66 851.84,-100.69"/>
</g>
<!-- Lease -->
<g id="node9" class="node">
<title>Lease</title>
<path fill="none" stroke="#1c2123" d="M539,-367.5C539,-367.5 794,-367.5 794,-367.5 800,-367.5 806,-373.5 806,-379.5 806,-379.5 806,-493.5 806,-493.5 806,-499.5 800,-505.5 794,-505.5 794,-505.5 539,-505.5 539,-505.5 533,-505.5 527,-499.5 527,-493.5 527,-493.5 527,-379.5 527,-379.5 527,-373.5 533,-367.5 539,-367.5"/>
<text text-anchor="middle" x="666.5" y="-490.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lease</text>
<polyline fill="none" stroke="#1c2123" points="527,-482.5 806,-482.5 "/>
<text text-anchor="start" x="535" y="-467.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">bound: Option&lt;Either&lt;Timespec, Timespec&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="527,-459.5 806,-459.5 "/>
<text text-anchor="start" x="535" y="-444.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">max_lease: Duration,</text>
<polyline fill="none" stroke="#1c2123" points="527,-436.5 806,-436.5 "/>
<text text-anchor="start" x="535" y="-421.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">max_drift: Duration,</text>
<polyline fill="none" stroke="#1c2123" points="527,-413.5 806,-413.5 "/>
<text text-anchor="start" x="535" y="-398.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">last_update: Timespec,</text>
<polyline fill="none" stroke="#1c2123" points="527,-390.5 806,-390.5 "/>
<text text-anchor="start" x="535" y="-375.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">remote: Option&lt;RemoteLease&gt;,</text>
</g>
<!-- Lease&#45;&gt;RemoteLease -->
<g id="edge9" class="edge">
<title>Lease&#45;&gt;RemoteLease</title>
<path fill="none" stroke="#666666" d="M806.25,-426.35C814.81,-425.73 823.35,-425.1 831.75,-424.49"/>
<polygon fill="#666666" stroke="#666666" points="832.2,-427.97 841.92,-423.75 831.69,-420.98 832.2,-427.97"/>
</g>
<!-- Peer -->
<g id="node10" class="node">
<title>Peer</title>
<path fill="none" stroke="#1c2123" d="M294,-394.5C294,-394.5 479,-394.5 479,-394.5 485,-394.5 491,-400.5 491,-406.5 491,-406.5 491,-466.5 491,-466.5 491,-472.5 485,-478.5 479,-478.5 479,-478.5 294,-478.5 294,-478.5 288,-478.5 282,-472.5 282,-466.5 282,-466.5 282,-406.5 282,-406.5 282,-400.5 288,-394.5 294,-394.5"/>
<text text-anchor="middle" x="386.5" y="-463.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<polyline fill="none" stroke="#1c2123" points="282,-455.5 491,-455.5 "/>
<text text-anchor="start" x="290" y="-440.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pending_reads: </text>
<text text-anchor="start" x="290" y="-425.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ReadIndexQueue&lt;EK::Snapshot&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="282,-417.5 491,-417.5 "/>
<text text-anchor="start" x="290" y="-402.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">leader_lease: Lease,</text>
</g>
<!-- Peer&#45;&gt;Lease -->
<g id="edge10" class="edge">
<title>Peer&#45;&gt;Lease</title>
<path fill="none" stroke="#666666" d="M491.02,-436.5C499.45,-436.5 508.07,-436.5 516.74,-436.5"/>
<polygon fill="#666666" stroke="#666666" points="516.93,-440 526.93,-436.5 516.93,-433 516.93,-440"/>
</g>
</g>
</svg>
