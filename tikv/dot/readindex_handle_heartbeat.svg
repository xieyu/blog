<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: read_index_handle_heartbeat_resp Pages: 1 -->
<svg width="1895pt" height="499pt"
 viewBox="0.00 0.00 1895.00 499.16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 495.16)">
<title>read_index_handle_heartbeat_resp</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-495.16 1891,-495.16 1891,4 -4,4"/>
<!-- MsgHeartBeatResp -->
<g id="node1" class="node">
<title>MsgHeartBeatResp</title>
<path fill="#feed9b" stroke="#f7e495" d="M12,-66.5C12,-66.5 189,-66.5 189,-66.5 195,-66.5 201,-72.5 201,-78.5 201,-78.5 201,-153.5 201,-153.5 201,-159.5 195,-165.5 189,-165.5 189,-165.5 12,-165.5 12,-165.5 6,-165.5 0,-159.5 0,-153.5 0,-153.5 0,-78.5 0,-78.5 0,-72.5 6,-66.5 12,-66.5"/>
<text text-anchor="middle" x="100.5" y="-150.3" font-family="Times,serif" font-size="14.00" fill="#40575d">MsgHeartBeatResp</text>
<polyline fill="none" stroke="#f7e495" points="0,-142.5 201,-142.5 "/>
<text text-anchor="start" x="8" y="-127.3" font-family="Times,serif" font-size="14.00" fill="#40575d">from peer id</text>
<polyline fill="none" stroke="#f7e495" points="0,-119.5 201,-119.5 "/>
<text text-anchor="start" x="8" y="-104.3" font-family="Times,serif" font-size="14.00" fill="#40575d">context: leader带上的ctx</text>
<text text-anchor="start" x="8" y="-89.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> 由bcast_heartbeat_with_ctx带上</text>
<text text-anchor="start" x="8" y="-74.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> 的rctx</text>
</g>
<!-- recv_ack -->
<g id="node2" class="node">
<title>recv_ack</title>
<path fill="none" stroke="#1c2123" d="M249,-187.5C249,-187.5 449,-187.5 449,-187.5 455,-187.5 461,-193.5 461,-199.5 461,-199.5 461,-236.5 461,-236.5 461,-242.5 455,-248.5 449,-248.5 449,-248.5 249,-248.5 249,-248.5 243,-248.5 237,-242.5 237,-236.5 237,-236.5 237,-199.5 237,-199.5 237,-193.5 243,-187.5 249,-187.5"/>
<text text-anchor="middle" x="349" y="-233.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">recv_ack</text>
<polyline fill="none" stroke="#1c2123" points="237,-225.5 461,-225.5 "/>
<text text-anchor="start" x="245" y="-210.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">根据ctx找到对应的ReadIndexStatus</text>
<text text-anchor="start" x="245" y="-195.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 在里面的acks中插入peer id</text>
</g>
<!-- MsgHeartBeatResp&#45;&gt;recv_ack -->
<g id="edge1" class="edge">
<title>MsgHeartBeatResp:context&#45;&gt;recv_ack</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M201,-93C228.13,-93 279.78,-143.04 314.06,-179.8"/>
<polygon fill="green" stroke="green" points="311.74,-182.45 321.09,-187.42 316.88,-177.7 311.74,-182.45"/>
</g>
<!-- read_index_queue -->
<g id="node3" class="node">
<title>read_index_queue</title>
<path fill="#feed9b" stroke="#f7e495" d="M509,-28.5C509,-28.5 742,-28.5 742,-28.5 748,-28.5 754,-34.5 754,-40.5 754,-40.5 754,-145.5 754,-145.5 754,-151.5 748,-157.5 742,-157.5 742,-157.5 509,-157.5 509,-157.5 503,-157.5 497,-151.5 497,-145.5 497,-145.5 497,-40.5 497,-40.5 497,-34.5 503,-28.5 509,-28.5"/>
<text text-anchor="middle" x="625.5" y="-142.3" font-family="Times,serif" font-size="14.00" fill="#40575d">read_index_queue</text>
<polyline fill="none" stroke="#f7e495" points="497,-134.5 754,-134.5 "/>
<text text-anchor="start" x="505" y="-119.3" font-family="Times,serif" font-size="14.00" fill="#40575d">VecDeque&lt;Vec&lt;u8&gt;&gt;</text>
<text text-anchor="start" x="505" y="-104.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> 里面元素为rctx</text>
<polyline fill="none" stroke="#f7e495" points="497,-96.5 754,-96.5 "/>
<text text-anchor="start" x="505" y="-81.3" font-family="Times,serif" font-size="14.00" fill="#40575d">将只读请求维护为一个只读队列</text>
<text text-anchor="start" x="505" y="-66.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> 该队列中commit index是有序递增的</text>
<text text-anchor="start" x="505" y="-51.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> 如果队列中某个元素i对应commit index</text>
<text text-anchor="start" x="505" y="-36.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> 得到确认，那么之前的也会被确认</text>
</g>
<!-- MsgHeartBeatResp&#45;&gt;read_index_queue -->
<g id="edge2" class="edge">
<title>MsgHeartBeatResp:context&#45;&gt;read_index_queue</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M201,-93C296.28,-93 403.63,-93 486.4,-93"/>
<polygon fill="green" stroke="green" points="486.63,-96.5 496.63,-93 486.63,-89.5 486.63,-96.5"/>
</g>
<!-- advance -->
<g id="node4" class="node">
<title>advance</title>
<path fill="none" stroke="#1c2123" d="M1167,-184C1167,-184 1409,-184 1409,-184 1415,-184 1421,-190 1421,-196 1421,-196 1421,-286 1421,-286 1421,-292 1415,-298 1409,-298 1409,-298 1167,-298 1167,-298 1161,-298 1155,-292 1155,-286 1155,-286 1155,-196 1155,-196 1155,-190 1161,-184 1167,-184"/>
<text text-anchor="middle" x="1288" y="-282.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">advance</text>
<polyline fill="none" stroke="#1c2123" points="1155,-275 1421,-275 "/>
<text text-anchor="start" x="1163" y="-259.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">从read_index_queue中找</text>
<text text-anchor="start" x="1163" y="-244.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 到该rctx position</text>
<text text-anchor="start" x="1163" y="-229.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 这个position之前的所有</text>
<text text-anchor="start" x="1163" y="-214.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> rctx都认为是已确认</text>
<polyline fill="none" stroke="#1c2123" points="1155,-207 1421,-207 "/>
<text text-anchor="start" x="1163" y="-191.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">遍历取出0..position之间的ReadIndexStatus</text>
</g>
<!-- MsgHeartBeatResp&#45;&gt;advance -->
<g id="edge3" class="edge">
<title>MsgHeartBeatResp:context&#45;&gt;advance</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M201,-93C234.9,-93 463.75,-25.62 497,-19 553.19,-7.82 567.21,0 624.5,0 624.5,0 624.5,0 868,0 1009.98,0 1147.3,-105.26 1224.11,-176.66"/>
<polygon fill="green" stroke="green" points="1222.12,-179.59 1231.81,-183.89 1226.92,-174.49 1222.12,-179.59"/>
</g>
<!-- pending_read_index -->
<g id="node5" class="node">
<title>pending_read_index</title>
<path fill="#feed9b" stroke="#f7e495" d="M519.5,-214.5C519.5,-214.5 731.5,-214.5 731.5,-214.5 737.5,-214.5 743.5,-220.5 743.5,-226.5 743.5,-226.5 743.5,-271.5 743.5,-271.5 743.5,-277.5 737.5,-283.5 731.5,-283.5 731.5,-283.5 519.5,-283.5 519.5,-283.5 513.5,-283.5 507.5,-277.5 507.5,-271.5 507.5,-271.5 507.5,-226.5 507.5,-226.5 507.5,-220.5 513.5,-214.5 519.5,-214.5"/>
<text text-anchor="middle" x="625.5" y="-268.3" font-family="Times,serif" font-size="14.00" fill="#40575d">pending_read_index</text>
<polyline fill="none" stroke="#f7e495" points="507.5,-260.5 743.5,-260.5 "/>
<text text-anchor="middle" x="625.5" y="-245.3" font-family="Times,serif" font-size="14.00" fill="#40575d">HashMap&lt;Vec&lt;u8&gt;, ReadIndexStatus&gt;</text>
<polyline fill="none" stroke="#f7e495" points="507.5,-237.5 743.5,-237.5 "/>
<text text-anchor="start" x="515.5" y="-222.3" font-family="Times,serif" font-size="14.00" fill="#40575d">其中key为rctx</text>
</g>
<!-- recv_ack&#45;&gt;pending_read_index -->
<g id="edge8" class="edge">
<title>recv_ack&#45;&gt;pending_read_index</title>
<path fill="none" stroke="#666666" d="M461.25,-230.56C473.1,-231.9 485.21,-233.27 497.22,-234.63"/>
<polygon fill="#666666" stroke="#666666" points="496.94,-238.12 507.27,-235.76 497.73,-231.16 496.94,-238.12"/>
</g>
<!-- ReadIndexStatus -->
<g id="node6" class="node">
<title>ReadIndexStatus</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M802,-153C802,-153 932,-153 932,-153 938,-153 944,-159 944,-165 944,-165 944,-233 944,-233 944,-239 938,-245 932,-245 932,-245 802,-245 802,-245 796,-245 790,-239 790,-233 790,-233 790,-165 790,-165 790,-159 796,-153 802,-153"/>
<text text-anchor="middle" x="867" y="-229.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ReadIndexStatus</text>
<polyline fill="none" stroke="#60b5ac" points="790,-222 944,-222 "/>
<text text-anchor="start" x="798" y="-206.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub req: Message</text>
<polyline fill="none" stroke="#60b5ac" points="790,-199 944,-199 "/>
<text text-anchor="start" x="798" y="-183.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub index: u64</text>
<polyline fill="none" stroke="#60b5ac" points="790,-176 944,-176 "/>
<text text-anchor="start" x="798" y="-160.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub acks: HashSet&lt;u64&gt;</text>
</g>
<!-- recv_ack&#45;&gt;ReadIndexStatus -->
<g id="edge5" class="edge">
<title>recv_ack&#45;&gt;ReadIndexStatus:acks</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M461.17,-203.67C573.4,-189.3 736.23,-168.73 779.98,-164.7"/>
<polygon fill="green" stroke="green" points="780.27,-168.19 790,-164 779.78,-161.2 780.27,-168.19"/>
</g>
<!-- read_index_queue&#45;&gt;advance -->
<g id="edge20" class="edge">
<title>read_index_queue&#45;&gt;advance</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M754.21,-110.05C812.4,-118.71 881.99,-130.3 944,-144 1010.68,-158.73 1083.6,-178.79 1145,-196.84"/>
<polygon fill="green" stroke="green" points="1144.17,-200.24 1154.75,-199.72 1146.15,-193.53 1144.17,-200.24"/>
</g>
<!-- handle_ready_read_index -->
<g id="node10" class="node">
<title>handle_ready_read_index</title>
<path fill="none" stroke="#1c2123" d="M1469,-296.5C1469,-296.5 1610,-296.5 1610,-296.5 1616,-296.5 1622,-302.5 1622,-308.5 1622,-308.5 1622,-345.5 1622,-345.5 1622,-351.5 1616,-357.5 1610,-357.5 1610,-357.5 1469,-357.5 1469,-357.5 1463,-357.5 1457,-351.5 1457,-345.5 1457,-345.5 1457,-308.5 1457,-308.5 1457,-302.5 1463,-296.5 1469,-296.5"/>
<text text-anchor="middle" x="1539.5" y="-342.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_ready_read_index</text>
<polyline fill="none" stroke="#1c2123" points="1457,-334.5 1622,-334.5 "/>
<text text-anchor="start" x="1465" y="-319.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">对于每个ReadIndexStatus</text>
<text text-anchor="start" x="1465" y="-304.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 构建ReadState</text>
</g>
<!-- advance&#45;&gt;handle_ready_read_index -->
<g id="edge14" class="edge">
<title>advance&#45;&gt;handle_ready_read_index</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1421.06,-286.52C1429.89,-289.56 1438.67,-292.59 1447.23,-295.54"/>
<polygon fill="green" stroke="green" points="1446.19,-298.88 1456.78,-298.83 1448.47,-292.27 1446.19,-298.88"/>
</g>
<!-- pending_read_index&#45;&gt;advance -->
<g id="edge21" class="edge">
<title>pending_read_index&#45;&gt;advance</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M743.93,-253.83C759.42,-254.31 775.09,-254.73 790,-255 858.43,-256.26 875.57,-256.4 944,-255 1009.9,-253.66 1082.87,-250.86 1144.51,-248.12"/>
<polygon fill="green" stroke="green" points="1144.86,-251.61 1154.7,-247.66 1144.55,-244.61 1144.86,-251.61"/>
</g>
<!-- pending_read_index&#45;&gt;ReadIndexStatus -->
<g id="edge4" class="edge">
<title>pending_read_index&#45;&gt;ReadIndexStatus</title>
<path fill="none" stroke="#666666" d="M743.79,-224.51C755.89,-221.99 768.03,-219.45 779.7,-217.02"/>
<polygon fill="#666666" stroke="#666666" points="780.75,-220.37 789.83,-214.9 779.32,-213.52 780.75,-220.37"/>
</g>
<!-- has_quorum -->
<g id="node7" class="node">
<title>has_quorum</title>
<path fill="none" stroke="#1c2123" d="M992,-340.5C992,-340.5 1107,-340.5 1107,-340.5 1113,-340.5 1119,-346.5 1119,-352.5 1119,-352.5 1119,-389.5 1119,-389.5 1119,-395.5 1113,-401.5 1107,-401.5 1107,-401.5 992,-401.5 992,-401.5 986,-401.5 980,-395.5 980,-389.5 980,-389.5 980,-352.5 980,-352.5 980,-346.5 986,-340.5 992,-340.5"/>
<text text-anchor="middle" x="1049.5" y="-386.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">has_quorum</text>
<polyline fill="none" stroke="#1c2123" points="980,-378.5 1119,-378.5 "/>
<text text-anchor="start" x="988" y="-363.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">检查是否收到了</text>
<text text-anchor="start" x="988" y="-348.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 大部分voters的响应</text>
</g>
<!-- ReadIndexStatus&#45;&gt;has_quorum -->
<g id="edge6" class="edge">
<title>ReadIndexStatus:acks&#45;&gt;has_quorum</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M944,-164C1017.83,-164 1039.51,-270.23 1045.87,-330.49"/>
<polygon fill="green" stroke="green" points="1042.38,-330.84 1046.82,-340.46 1049.35,-330.17 1042.38,-330.84"/>
</g>
<!-- has_quorum&#45;&gt;advance -->
<g id="edge17" class="edge">
<title>has_quorum&#45;&gt;advance</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1105.51,-340.37C1121.46,-331.52 1138.91,-321.85 1155,-313 1160.92,-309.74 1166.98,-306.41 1173.11,-303.05"/>
<polygon fill="green" stroke="green" points="1175.04,-305.99 1182.13,-298.11 1171.67,-299.85 1175.04,-305.99"/>
</g>
<!-- vote_result -->
<g id="node8" class="node">
<title>vote_result</title>
<path fill="none" stroke="#1c2123" d="M1314.5,-391C1314.5,-391 1261.5,-391 1261.5,-391 1255.5,-391 1249.5,-385 1249.5,-379 1249.5,-379 1249.5,-367 1249.5,-367 1249.5,-361 1255.5,-355 1261.5,-355 1261.5,-355 1314.5,-355 1314.5,-355 1320.5,-355 1326.5,-361 1326.5,-367 1326.5,-367 1326.5,-379 1326.5,-379 1326.5,-385 1320.5,-391 1314.5,-391"/>
<text text-anchor="middle" x="1288" y="-369.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">vote_result</text>
</g>
<!-- has_quorum&#45;&gt;vote_result -->
<g id="edge7" class="edge">
<title>has_quorum&#45;&gt;vote_result</title>
<path fill="none" stroke="#666666" d="M1119.22,-371.58C1157.66,-371.91 1204.62,-372.3 1239.07,-372.59"/>
<polygon fill="#666666" stroke="#666666" points="1239.31,-376.1 1249.34,-372.68 1239.37,-369.1 1239.31,-376.1"/>
</g>
<!-- has_quorum&#45;&gt;handle_ready_read_index -->
<g id="edge18" class="edge">
<title>has_quorum&#45;&gt;handle_ready_read_index</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1119.01,-352.7C1130.94,-350.06 1143.27,-347.68 1155,-346 1253.99,-331.83 1368.66,-327.74 1446.63,-326.79"/>
<polygon fill="green" stroke="green" points="1446.95,-330.28 1456.91,-326.68 1446.87,-323.29 1446.95,-330.28"/>
</g>
<!-- send -->
<g id="node11" class="node">
<title>send</title>
<path fill="none" stroke="#1c2123" d="M1303,-445C1303,-445 1273,-445 1273,-445 1267,-445 1261,-439 1261,-433 1261,-433 1261,-421 1261,-421 1261,-415 1267,-409 1273,-409 1273,-409 1303,-409 1303,-409 1309,-409 1315,-415 1315,-421 1315,-421 1315,-433 1315,-433 1315,-439 1309,-445 1303,-445"/>
<text text-anchor="middle" x="1288" y="-423.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send</text>
</g>
<!-- has_quorum&#45;&gt;send -->
<g id="edge19" class="edge">
<title>has_quorum&#45;&gt;send</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1119.18,-390.79C1131.09,-394.01 1143.38,-397.2 1155,-400 1187.12,-407.73 1223.98,-415.15 1250.57,-420.25"/>
<polygon fill="green" stroke="green" points="1250.11,-423.72 1260.58,-422.15 1251.41,-416.85 1250.11,-423.72"/>
</g>
<!-- handle_heartbeat_response -->
<g id="node9" class="node">
<title>handle_heartbeat_response</title>
<path fill="none" stroke="#1c2123" d="M170,-389C170,-389 31,-389 31,-389 25,-389 19,-383 19,-377 19,-377 19,-365 19,-365 19,-359 25,-353 31,-353 31,-353 170,-353 170,-353 176,-353 182,-359 182,-365 182,-365 182,-377 182,-377 182,-383 176,-389 170,-389"/>
<text text-anchor="middle" x="100.5" y="-367.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_heartbeat_response</text>
</g>
<!-- handle_heartbeat_response&#45;&gt;recv_ack -->
<g id="edge9" class="edge">
<title>handle_heartbeat_response&#45;&gt;recv_ack</title>
<path fill="none" stroke="#666666" d="M130.74,-352.85C169.84,-328.58 240.02,-285.02 290.03,-253.98"/>
<polygon fill="#666666" stroke="#666666" points="292.16,-256.78 298.81,-248.53 288.47,-250.83 292.16,-256.78"/>
</g>
<!-- handle_heartbeat_response&#45;&gt;advance -->
<g id="edge10" class="edge">
<title>handle_heartbeat_response&#45;&gt;advance</title>
<path fill="none" stroke="#666666" d="M182.26,-356.19C284.74,-338.71 467.11,-312 624.5,-312 624.5,-312 624.5,-312 868,-312 961.04,-312 1064.09,-294.77 1144.71,-277.29"/>
<polygon fill="#666666" stroke="#666666" points="1145.91,-280.61 1154.93,-275.04 1144.41,-273.77 1145.91,-280.61"/>
</g>
<!-- handle_heartbeat_response&#45;&gt;has_quorum -->
<g id="edge11" class="edge">
<title>handle_heartbeat_response&#45;&gt;has_quorum</title>
<path fill="none" stroke="#666666" d="M182.24,-371C361.81,-371 792.36,-371 969.91,-371"/>
<polygon fill="#666666" stroke="#666666" points="969.96,-374.5 979.96,-371 969.96,-367.5 969.96,-374.5"/>
</g>
<!-- handle_heartbeat_response&#45;&gt;handle_ready_read_index -->
<g id="edge12" class="edge">
<title>handle_heartbeat_response&#45;&gt;handle_ready_read_index</title>
<path fill="none" stroke="#666666" d="M141.93,-389.01C168.47,-400.13 204.21,-413.79 237,-422 405.5,-464.2 450.79,-473 624.5,-473 624.5,-473 624.5,-473 1050.5,-473 1215.38,-473 1271.66,-523.89 1421,-454 1460.99,-435.28 1493.79,-396.19 1514.48,-366.29"/>
<polygon fill="#666666" stroke="#666666" points="1517.56,-367.98 1520.25,-357.73 1511.76,-364.07 1517.56,-367.98"/>
</g>
<!-- handle_heartbeat_response&#45;&gt;send -->
<g id="edge13" class="edge">
<title>handle_heartbeat_response&#45;&gt;send</title>
<path fill="none" stroke="#666666" d="M182.26,-385.81C284.74,-403.29 467.11,-430 624.5,-430 624.5,-430 624.5,-430 868,-430 1009.44,-430 1177.74,-428.27 1250.5,-427.44"/>
<polygon fill="#666666" stroke="#666666" points="1250.57,-430.94 1260.53,-427.32 1250.49,-423.94 1250.57,-430.94"/>
</g>
<!-- MsgReadIndexResp -->
<g id="node12" class="node">
<title>MsgReadIndexResp</title>
<path fill="#feed9b" stroke="#f7e495" d="M1703.5,-344C1703.5,-344 1841.5,-344 1841.5,-344 1847.5,-344 1853.5,-350 1853.5,-356 1853.5,-356 1853.5,-378 1853.5,-378 1853.5,-384 1847.5,-390 1841.5,-390 1841.5,-390 1703.5,-390 1703.5,-390 1697.5,-390 1691.5,-384 1691.5,-378 1691.5,-378 1691.5,-356 1691.5,-356 1691.5,-350 1697.5,-344 1703.5,-344"/>
<text text-anchor="middle" x="1772.5" y="-374.8" font-family="Times,serif" font-size="14.00" fill="#40575d">MsgReadIndexResp</text>
<polyline fill="none" stroke="#f7e495" points="1691.5,-367 1853.5,-367 "/>
<text text-anchor="start" x="1699.5" y="-351.8" font-family="Times,serif" font-size="14.00" fill="#40575d">否则发送消息给follower</text>
</g>
<!-- handle_ready_read_index&#45;&gt;MsgReadIndexResp -->
<g id="edge15" class="edge">
<title>handle_ready_read_index&#45;&gt;MsgReadIndexResp</title>
<path fill="none" stroke="#666666" d="M1622.27,-341.16C1641.39,-344.47 1661.86,-348.01 1681.32,-351.38"/>
<polygon fill="#666666" stroke="#666666" points="1680.95,-354.87 1691.4,-353.13 1682.14,-347.97 1680.95,-354.87"/>
</g>
<!-- read_states -->
<g id="node13" class="node">
<title>read_states</title>
<path fill="#feed9b" stroke="#f7e495" d="M1670,-249C1670,-249 1875,-249 1875,-249 1881,-249 1887,-255 1887,-261 1887,-261 1887,-313 1887,-313 1887,-319 1881,-325 1875,-325 1875,-325 1670,-325 1670,-325 1664,-325 1658,-319 1658,-313 1658,-313 1658,-261 1658,-261 1658,-255 1664,-249 1670,-249"/>
<text text-anchor="middle" x="1772.5" y="-309.8" font-family="Times,serif" font-size="14.00" fill="#40575d">read_states</text>
<polyline fill="none" stroke="#f7e495" points="1658,-302 1887,-302 "/>
<text text-anchor="start" x="1666" y="-286.8" font-family="Times,serif" font-size="14.00" fill="#40575d">self.read_states.push(rs)</text>
<text text-anchor="start" x="1666" y="-271.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> 如果是leader节点发送的ReadIndex</text>
<text text-anchor="middle" x="1772.5" y="-256.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> 则push到Leader自己的read_states中</text>
</g>
<!-- handle_ready_read_index&#45;&gt;read_states -->
<g id="edge16" class="edge">
<title>handle_ready_read_index&#45;&gt;read_states</title>
<path fill="none" stroke="#666666" d="M1622.27,-312.84C1630.66,-311.39 1639.31,-309.89 1648.03,-308.38"/>
<polygon fill="#666666" stroke="#666666" points="1648.62,-311.83 1657.88,-306.67 1647.43,-304.93 1648.62,-311.83"/>
</g>
</g>
</svg>
