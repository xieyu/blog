<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: dig Pages: 1 -->
<svg width="1388pt" height="507pt"
 viewBox="0.00 0.00 1388.00 507.18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 503.18)">
<title>dig</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-503.18 1384,-503.18 1384,4 -4,4"/>
<!-- twoPhaseCommitter__execute -->
<g id="node1" class="node">
<title>twoPhaseCommitter__execute</title>
<path fill="none" stroke="#1c2123" d="M12,-226.68C12,-226.68 116,-226.68 116,-226.68 122,-226.68 128,-232.68 128,-238.68 128,-238.68 128,-275.68 128,-275.68 128,-281.68 122,-287.68 116,-287.68 116,-287.68 12,-287.68 12,-287.68 6,-287.68 0,-281.68 0,-275.68 0,-275.68 0,-238.68 0,-238.68 0,-232.68 6,-226.68 12,-226.68"/>
<text text-anchor="start" x="8" y="-272.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitter</text>
<text text-anchor="start" x="8" y="-257.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> execute</text>
<polyline fill="none" stroke="#1c2123" points="0,-249.68 128,-249.68 "/>
<text text-anchor="start" x="8" y="-234.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">两阶段提交事务</text>
</g>
<!-- twoPhaseCommitter__isAsyncCommit -->
<g id="node7" class="node">
<title>twoPhaseCommitter__isAsyncCommit</title>
<path fill="none" stroke="#1c2123" d="M1264,-238.18C1264,-238.18 1368,-238.18 1368,-238.18 1374,-238.18 1380,-244.18 1380,-250.18 1380,-250.18 1380,-264.18 1380,-264.18 1380,-270.18 1374,-276.18 1368,-276.18 1368,-276.18 1264,-276.18 1264,-276.18 1258,-276.18 1252,-270.18 1252,-264.18 1252,-264.18 1252,-250.18 1252,-250.18 1252,-244.18 1258,-238.18 1264,-238.18"/>
<text text-anchor="start" x="1260" y="-260.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitter</text>
<text text-anchor="start" x="1260" y="-245.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> isAsyncCommit</text>
</g>
<!-- twoPhaseCommitter__execute&#45;&gt;twoPhaseCommitter__isAsyncCommit -->
<g id="edge1" class="edge">
<title>twoPhaseCommitter__execute&#45;&gt;twoPhaseCommitter__isAsyncCommit</title>
<path fill="none" stroke="#666666" d="M88.67,-226.64C140.09,-164.07 268.9,-27.18 411.5,-27.18 411.5,-27.18 411.5,-27.18 850,-27.18 1012.89,-27.18 1080.83,44.71 1216,-46.18 1278.59,-88.27 1302.52,-180.93 1310.91,-228.21"/>
<polygon fill="#666666" stroke="#666666" points="1307.46,-228.82 1312.55,-238.11 1314.36,-227.67 1307.46,-228.82"/>
</g>
<!-- commitWithGoRoutine -->
<g id="node10" class="node">
<title>commitWithGoRoutine</title>
<path fill="#bcffb9" stroke="#8a8898" d="M176,-305.68C176,-305.68 281,-305.68 281,-305.68 287,-305.68 293,-311.68 293,-317.68 293,-317.68 293,-384.68 293,-384.68 293,-390.68 287,-396.68 281,-396.68 281,-396.68 176,-396.68 176,-396.68 170,-396.68 164,-390.68 164,-384.68 164,-384.68 164,-317.68 164,-317.68 164,-311.68 170,-305.68 176,-305.68"/>
<text text-anchor="start" x="172" y="-381.48" font-family="Times,serif" font-size="14.00" fill="#5d6179">开启一个go routine</text>
<text text-anchor="start" x="172" y="-366.48" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 异步提交commit</text>
<polyline fill="none" stroke="#8a8898" points="164,-358.68 293,-358.68 "/>
<text text-anchor="start" x="172" y="-343.48" font-family="Times,serif" font-size="14.00" fill="#5d6179">go func() {</text>
<text text-anchor="start" x="172" y="-328.48" font-family="Times,serif" font-size="14.00" fill="#5d6179"> commitMutations()</text>
<text text-anchor="start" x="172" y="-313.48" font-family="Times,serif" font-size="14.00" fill="#5d6179"> }</text>
</g>
<!-- twoPhaseCommitter__execute&#45;&gt;commitWithGoRoutine -->
<g id="edge12" class="edge">
<title>twoPhaseCommitter__execute&#45;&gt;commitWithGoRoutine</title>
<path fill="none" stroke="#666666" d="M117.76,-287.7C129.73,-294.62 142.65,-302.1 155.27,-309.4"/>
<polygon fill="#666666" stroke="#666666" points="153.54,-312.44 163.95,-314.42 157.05,-306.38 153.54,-312.44"/>
</g>
<!-- twoPhaseCommitter__prewriteMutations -->
<g id="node11" class="node">
<title>twoPhaseCommitter__prewriteMutations</title>
<path fill="none" stroke="#1c2123" d="M360.5,-226.68C360.5,-226.68 464.5,-226.68 464.5,-226.68 470.5,-226.68 476.5,-232.68 476.5,-238.68 476.5,-238.68 476.5,-275.68 476.5,-275.68 476.5,-281.68 470.5,-287.68 464.5,-287.68 464.5,-287.68 360.5,-287.68 360.5,-287.68 354.5,-287.68 348.5,-281.68 348.5,-275.68 348.5,-275.68 348.5,-238.68 348.5,-238.68 348.5,-232.68 354.5,-226.68 360.5,-226.68"/>
<text text-anchor="start" x="356.5" y="-272.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitter</text>
<text text-anchor="start" x="356.5" y="-257.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> prewriteMutations</text>
<polyline fill="none" stroke="#1c2123" points="348.5,-249.68 476.5,-249.68 "/>
<text text-anchor="start" x="356.5" y="-234.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">prewrite阶段</text>
</g>
<!-- twoPhaseCommitter__execute&#45;&gt;twoPhaseCommitter__prewriteMutations -->
<g id="edge13" class="edge">
<title>twoPhaseCommitter__execute&#45;&gt;twoPhaseCommitter__prewriteMutations</title>
<path fill="none" stroke="#666666" d="M128.15,-257.18C187.41,-257.18 276.02,-257.18 338.34,-257.18"/>
<polygon fill="#666666" stroke="#666666" points="338.49,-260.68 348.49,-257.18 338.49,-253.68 338.49,-260.68"/>
</g>
<!-- kvTxn__onComittted -->
<g id="node2" class="node">
<title>kvTxn__onComittted</title>
<path fill="none" stroke="#1c2123" d="M1157.5,-499.18C1157.5,-499.18 1047.5,-499.18 1047.5,-499.18 1041.5,-499.18 1035.5,-493.18 1035.5,-487.18 1035.5,-487.18 1035.5,-475.18 1035.5,-475.18 1035.5,-469.18 1041.5,-463.18 1047.5,-463.18 1047.5,-463.18 1157.5,-463.18 1157.5,-463.18 1163.5,-463.18 1169.5,-469.18 1169.5,-475.18 1169.5,-475.18 1169.5,-487.18 1169.5,-487.18 1169.5,-493.18 1163.5,-499.18 1157.5,-499.18"/>
<text text-anchor="middle" x="1102.5" y="-477.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">kvTxn__onComittted</text>
</g>
<!-- kvTxn__onComittted&#45;&gt;twoPhaseCommitter__isAsyncCommit -->
<g id="edge2" class="edge">
<title>kvTxn__onComittted&#45;&gt;twoPhaseCommitter__isAsyncCommit</title>
<path fill="none" stroke="#666666" d="M1169.74,-471.89C1186.15,-467.14 1202.8,-459.98 1216,-449.18 1268.44,-406.26 1296.17,-328.28 1307.95,-286.11"/>
<polygon fill="#666666" stroke="#666666" points="1311.4,-286.77 1310.61,-276.2 1304.64,-284.96 1311.4,-286.77"/>
</g>
<!-- actionPrewrite__handleSingleBatch -->
<g id="node3" class="node">
<title>actionPrewrite__handleSingleBatch</title>
<path fill="none" stroke="#1c2123" d="M791.5,-219.18C791.5,-219.18 906.5,-219.18 906.5,-219.18 912.5,-219.18 918.5,-225.18 918.5,-231.18 918.5,-231.18 918.5,-283.18 918.5,-283.18 918.5,-289.18 912.5,-295.18 906.5,-295.18 906.5,-295.18 791.5,-295.18 791.5,-295.18 785.5,-295.18 779.5,-289.18 779.5,-283.18 779.5,-283.18 779.5,-231.18 779.5,-231.18 779.5,-225.18 785.5,-219.18 791.5,-219.18"/>
<text text-anchor="start" x="787.5" y="-279.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">actionPrewrite</text>
<text text-anchor="start" x="787.5" y="-264.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handleSingleBatch</text>
<polyline fill="none" stroke="#1c2123" points="779.5,-257.18 918.5,-257.18 "/>
<text text-anchor="start" x="787.5" y="-241.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">对于grpc Error</text>
<text text-anchor="start" x="787.5" y="-226.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> setUndetectmiatedErr</text>
</g>
<!-- twoPhaseCommitter__buildPrewriteRequest -->
<g id="node5" class="node">
<title>twoPhaseCommitter__buildPrewriteRequest</title>
<path fill="#bcffb9" stroke="#8a8898" d="M1018.5,-55.68C1018.5,-55.68 1186.5,-55.68 1186.5,-55.68 1192.5,-55.68 1198.5,-61.68 1198.5,-67.68 1198.5,-67.68 1198.5,-134.68 1198.5,-134.68 1198.5,-140.68 1192.5,-146.68 1186.5,-146.68 1186.5,-146.68 1018.5,-146.68 1018.5,-146.68 1012.5,-146.68 1006.5,-140.68 1006.5,-134.68 1006.5,-134.68 1006.5,-67.68 1006.5,-67.68 1006.5,-61.68 1012.5,-55.68 1018.5,-55.68"/>
<text text-anchor="start" x="1014.5" y="-131.48" font-family="Times,serif" font-size="14.00" fill="#5d6179">twoPhaseCommitter</text>
<text text-anchor="start" x="1014.5" y="-116.48" font-family="Times,serif" font-size="14.00" fill="#5d6179"> buildPrewriteRequest</text>
<polyline fill="none" stroke="#8a8898" points="1006.5,-108.68 1198.5,-108.68 "/>
<text text-anchor="start" x="1014.5" y="-93.48" font-family="Times,serif" font-size="14.00" fill="#5d6179">扫描mutations</text>
<text text-anchor="start" x="1014.5" y="-78.48" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 设置prewrite req的secondaries</text>
<text text-anchor="start" x="1014.5" y="-63.48" font-family="Times,serif" font-size="14.00" fill="#5d6179"> lock keys</text>
</g>
<!-- actionPrewrite__handleSingleBatch&#45;&gt;twoPhaseCommitter__buildPrewriteRequest -->
<g id="edge9" class="edge">
<title>actionPrewrite__handleSingleBatch&#45;&gt;twoPhaseCommitter__buildPrewriteRequest</title>
<path fill="none" stroke="#666666" d="M902.19,-219.03C927.87,-200.8 959.57,-179.11 989,-161.18 994.09,-158.08 999.35,-154.97 1004.69,-151.89"/>
<polygon fill="#666666" stroke="#666666" points="1006.78,-154.72 1013.73,-146.72 1003.31,-148.64 1006.78,-154.72"/>
</g>
<!-- actionPrewrite__handleSingleBatch&#45;&gt;twoPhaseCommitter__isAsyncCommit -->
<g id="edge3" class="edge">
<title>actionPrewrite__handleSingleBatch&#45;&gt;twoPhaseCommitter__isAsyncCommit</title>
<path fill="none" stroke="#666666" d="M918.71,-219.08C940.52,-208.91 965.17,-199.33 989,-194.18 1087.61,-172.88 1119.13,-165.97 1216,-194.18 1241.44,-201.59 1266.59,-217.73 1285.17,-231.82"/>
<polygon fill="#666666" stroke="#666666" points="1283.19,-234.72 1293.23,-238.12 1287.5,-229.2 1283.19,-234.72"/>
</g>
<!-- twoPhaseCommitter__setUndetermimedErr -->
<g id="node8" class="node">
<title>twoPhaseCommitter__setUndetermimedErr</title>
<path fill="none" stroke="#1c2123" d="M1045,-368.18C1045,-368.18 1160,-368.18 1160,-368.18 1166,-368.18 1172,-374.18 1172,-380.18 1172,-380.18 1172,-394.18 1172,-394.18 1172,-400.18 1166,-406.18 1160,-406.18 1160,-406.18 1045,-406.18 1045,-406.18 1039,-406.18 1033,-400.18 1033,-394.18 1033,-394.18 1033,-380.18 1033,-380.18 1033,-374.18 1039,-368.18 1045,-368.18"/>
<text text-anchor="start" x="1041" y="-390.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitter</text>
<text text-anchor="start" x="1041" y="-375.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> setUndetermimedErr;</text>
</g>
<!-- actionPrewrite__handleSingleBatch&#45;&gt;twoPhaseCommitter__setUndetermimedErr -->
<g id="edge10" class="edge">
<title>actionPrewrite__handleSingleBatch&#45;&gt;twoPhaseCommitter__setUndetermimedErr</title>
<path fill="none" stroke="#666666" d="M918.72,-292.7C962.16,-315.16 1017.12,-343.57 1055.38,-363.34"/>
<polygon fill="#666666" stroke="#666666" points="1054.24,-366.69 1064.73,-368.17 1057.45,-360.47 1054.24,-366.69"/>
</g>
<!-- twoPhaseCommitter__setAsyncCommit__False -->
<g id="node9" class="node">
<title>twoPhaseCommitter__setAsyncCommit__False</title>
<path fill="none" stroke="#1c2123" d="M1001,-204.18C1001,-204.18 1204,-204.18 1204,-204.18 1210,-204.18 1216,-210.18 1216,-216.18 1216,-216.18 1216,-298.18 1216,-298.18 1216,-304.18 1210,-310.18 1204,-310.18 1204,-310.18 1001,-310.18 1001,-310.18 995,-310.18 989,-304.18 989,-298.18 989,-298.18 989,-216.18 989,-216.18 989,-210.18 995,-204.18 1001,-204.18"/>
<text text-anchor="start" x="997" y="-294.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitter</text>
<text text-anchor="start" x="997" y="-279.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> setAsyncCommit(False)</text>
<polyline fill="none" stroke="#1c2123" points="989,-272.18 1216,-272.18 "/>
<text text-anchor="start" x="997" y="-256.98" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果prewrite.Resp.minCommitTs为0</text>
<text text-anchor="start" x="997" y="-241.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> client fallback to normal way to</text>
<text text-anchor="start" x="997" y="-226.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> continue committing the transcation</text>
<text text-anchor="start" x="997" y="-211.98" font-family="Times,serif" font-size="14.00" fill="#2f3638"> if prewrite are all finished</text>
</g>
<!-- actionPrewrite__handleSingleBatch&#45;&gt;twoPhaseCommitter__setAsyncCommit__False -->
<g id="edge11" class="edge">
<title>actionPrewrite__handleSingleBatch&#45;&gt;twoPhaseCommitter__setAsyncCommit__False</title>
<path fill="none" stroke="#666666" d="M918.72,-257.18C937.35,-257.18 958.09,-257.18 978.72,-257.18"/>
<polygon fill="#666666" stroke="#666666" points="978.83,-260.68 988.83,-257.18 978.83,-253.68 978.83,-260.68"/>
</g>
<!-- actionCommit__handleSingleBatch -->
<g id="node4" class="node">
<title>actionCommit__handleSingleBatch</title>
<path fill="none" stroke="#1c2123" d="M757,-367.68C757,-367.68 941,-367.68 941,-367.68 947,-367.68 953,-373.68 953,-379.68 953,-379.68 953,-484.68 953,-484.68 953,-490.68 947,-496.68 941,-496.68 941,-496.68 757,-496.68 757,-496.68 751,-496.68 745,-490.68 745,-484.68 745,-484.68 745,-379.68 745,-379.68 745,-373.68 751,-367.68 757,-367.68"/>
<text text-anchor="start" x="753" y="-481.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">actionCommit</text>
<text text-anchor="start" x="753" y="-466.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handleSingleBatch</text>
<polyline fill="none" stroke="#1c2123" points="745,-458.68 953,-458.68 "/>
<text text-anchor="start" x="753" y="-443.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">c.setUndeterminedErr(nil)</text>
<polyline fill="none" stroke="#1c2123" points="745,-435.68 953,-435.68 "/>
<text text-anchor="start" x="753" y="-420.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">we can make sure</text>
<text text-anchor="start" x="753" y="-405.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> tikv has proccessed</text>
<text text-anchor="start" x="753" y="-390.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> the commit primary key request</text>
<text text-anchor="start" x="753" y="-375.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> so we can calean undterminted err</text>
</g>
<!-- actionCommit__handleSingleBatch&#45;&gt;twoPhaseCommitter__isAsyncCommit -->
<g id="edge4" class="edge">
<title>actionCommit__handleSingleBatch&#45;&gt;twoPhaseCommitter__isAsyncCommit</title>
<path fill="none" stroke="#666666" d="M953.41,-437.85C1045.81,-441.05 1173.02,-440.29 1216,-415.18 1264.92,-386.6 1293.23,-323.23 1306.24,-286.01"/>
<polygon fill="#666666" stroke="#666666" points="1309.65,-286.85 1309.51,-276.26 1303.01,-284.63 1309.65,-286.85"/>
</g>
<!-- actionCommit__handleSingleBatch&#45;&gt;twoPhaseCommitter__setUndetermimedErr -->
<g id="edge19" class="edge">
<title>actionCommit__handleSingleBatch&#45;&gt;twoPhaseCommitter__setUndetermimedErr</title>
<path fill="none" stroke="#666666" d="M953.02,-413.75C976.31,-409.58 1000.68,-405.22 1022.78,-401.26"/>
<polygon fill="#666666" stroke="#666666" points="1023.54,-404.68 1032.77,-399.48 1022.31,-397.79 1023.54,-404.68"/>
</g>
<!-- twoPhaseCommitter__buildPrewriteRequest&#45;&gt;twoPhaseCommitter__isAsyncCommit -->
<g id="edge5" class="edge">
<title>twoPhaseCommitter__buildPrewriteRequest&#45;&gt;twoPhaseCommitter__isAsyncCommit</title>
<path fill="none" stroke="#666666" d="M1194.51,-146.83C1201.95,-151.42 1209.2,-156.22 1216,-161.18 1244.13,-181.69 1272.25,-209.88 1291.29,-230.4"/>
<polygon fill="#666666" stroke="#666666" points="1288.79,-232.85 1298.12,-237.86 1293.95,-228.12 1288.79,-232.85"/>
</g>
<!-- twoPhaseCommitter__doActionOnGroupMutations -->
<g id="node6" class="node">
<title>twoPhaseCommitter__doActionOnGroupMutations</title>
<path fill="none" stroke="#1c2123" d="M544,-289.68C544,-289.68 697,-289.68 697,-289.68 703,-289.68 709,-295.68 709,-301.68 709,-301.68 709,-376.68 709,-376.68 709,-382.68 703,-388.68 697,-388.68 697,-388.68 544,-388.68 544,-388.68 538,-388.68 532,-382.68 532,-376.68 532,-376.68 532,-301.68 532,-301.68 532,-295.68 538,-289.68 544,-289.68"/>
<text text-anchor="start" x="540" y="-373.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitter</text>
<text text-anchor="start" x="540" y="-358.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> doActionOnGroupMutations</text>
<polyline fill="none" stroke="#1c2123" points="532,-350.68 709,-350.68 "/>
<text text-anchor="start" x="540" y="-335.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">asyncCommit 不用考虑</text>
<text text-anchor="start" x="540" y="-320.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> . first commit primary batch</text>
<polyline fill="none" stroke="#1c2123" points="532,-312.68 709,-312.68 "/>
<text text-anchor="middle" x="620.5" y="-297.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> </text>
</g>
<!-- twoPhaseCommitter__doActionOnGroupMutations&#45;&gt;actionPrewrite__handleSingleBatch -->
<g id="edge7" class="edge">
<title>twoPhaseCommitter__doActionOnGroupMutations&#45;&gt;actionPrewrite__handleSingleBatch</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M709.07,-307.48C729.08,-300.23 750.21,-292.58 769.79,-285.49"/>
<polygon fill="green" stroke="green" points="771.06,-288.76 779.27,-282.06 768.68,-282.18 771.06,-288.76"/>
</g>
<!-- twoPhaseCommitter__doActionOnGroupMutations&#45;&gt;actionCommit__handleSingleBatch -->
<g id="edge8" class="edge">
<title>twoPhaseCommitter__doActionOnGroupMutations&#45;&gt;actionCommit__handleSingleBatch</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M709.07,-375.14C717.76,-378.7 726.65,-382.36 735.54,-386.01"/>
<polygon fill="green" stroke="green" points="734.22,-389.24 744.8,-389.81 736.88,-382.77 734.22,-389.24"/>
</g>
<!-- twoPhaseCommitter__doActionOnGroupMutations&#45;&gt;twoPhaseCommitter__isAsyncCommit -->
<g id="edge6" class="edge">
<title>twoPhaseCommitter__doActionOnGroupMutations&#45;&gt;twoPhaseCommitter__isAsyncCommit</title>
<path fill="none" stroke="#666666" d="M709.08,-341.79C850.84,-345.08 1123.97,-347.3 1216,-319.18 1240.89,-311.57 1265.71,-296.01 1284.27,-282.38"/>
<polygon fill="#666666" stroke="#666666" points="1286.46,-285.11 1292.33,-276.29 1282.24,-279.52 1286.46,-285.11"/>
</g>
<!-- twoPhaseCommitter__commitMutations -->
<g id="node12" class="node">
<title>twoPhaseCommitter__commitMutations</title>
<path fill="none" stroke="#1c2123" d="M341,-306.68C341,-306.68 484,-306.68 484,-306.68 490,-306.68 496,-312.68 496,-318.68 496,-318.68 496,-423.68 496,-423.68 496,-429.68 490,-435.68 484,-435.68 484,-435.68 341,-435.68 341,-435.68 335,-435.68 329,-429.68 329,-423.68 329,-423.68 329,-318.68 329,-318.68 329,-312.68 335,-306.68 341,-306.68"/>
<text text-anchor="start" x="337" y="-420.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitter</text>
<text text-anchor="start" x="337" y="-405.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> commitMutations</text>
<polyline fill="none" stroke="#1c2123" points="329,-397.68 496,-397.68 "/>
<text text-anchor="start" x="337" y="-382.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">commit阶段</text>
<polyline fill="none" stroke="#1c2123" points="329,-374.68 496,-374.68 "/>
<text text-anchor="start" x="337" y="-359.48" font-family="Times,serif" font-size="14.00" fill="#2f3638">commit阶段是异步的</text>
<text text-anchor="start" x="337" y="-344.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 不用等到primary key</text>
<text text-anchor="start" x="337" y="-329.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> commit 成功就可以返回</text>
<text text-anchor="start" x="337" y="-314.48" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 事务结果给client</text>
</g>
<!-- commitWithGoRoutine&#45;&gt;twoPhaseCommitter__commitMutations -->
<g id="edge18" class="edge">
<title>commitWithGoRoutine&#45;&gt;twoPhaseCommitter__commitMutations</title>
<path fill="none" stroke="#666666" d="M293.15,-358.17C301.41,-359.08 309.99,-360.02 318.59,-360.97"/>
<polygon fill="#666666" stroke="#666666" points="318.37,-364.47 328.69,-362.08 319.13,-357.51 318.37,-364.47"/>
</g>
<!-- twoPhaseCommitter__prewriteMutations&#45;&gt;actionPrewrite__handleSingleBatch -->
<g id="edge14" class="edge">
<title>twoPhaseCommitter__prewriteMutations&#45;&gt;actionPrewrite__handleSingleBatch</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M476.68,-257.18C554.07,-257.18 685.18,-257.18 769.11,-257.18"/>
<polygon fill="green" stroke="green" points="769.36,-260.68 779.36,-257.18 769.36,-253.68 769.36,-260.68"/>
</g>
<!-- twoPhaseCommitter__prewriteMutations&#45;&gt;twoPhaseCommitter__doActionOnGroupMutations -->
<g id="edge15" class="edge">
<title>twoPhaseCommitter__prewriteMutations&#45;&gt;twoPhaseCommitter__doActionOnGroupMutations</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M476.71,-282.34C491.1,-288.07 506.73,-294.29 522.18,-300.44"/>
<polygon fill="green" stroke="green" points="521.18,-303.81 531.77,-304.26 523.77,-297.31 521.18,-303.81"/>
</g>
<!-- twoPhaseCommitter__commitMutations&#45;&gt;actionCommit__handleSingleBatch -->
<g id="edge16" class="edge">
<title>twoPhaseCommitter__commitMutations&#45;&gt;actionCommit__handleSingleBatch</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M496.13,-391.3C508.12,-393.84 520.35,-396.23 532,-398.18 598.75,-409.34 674.08,-417.61 734.44,-423.2"/>
<polygon fill="green" stroke="green" points="734.49,-426.71 744.76,-424.14 735.12,-419.74 734.49,-426.71"/>
</g>
<!-- twoPhaseCommitter__commitMutations&#45;&gt;twoPhaseCommitter__doActionOnGroupMutations -->
<g id="edge17" class="edge">
<title>twoPhaseCommitter__commitMutations&#45;&gt;twoPhaseCommitter__doActionOnGroupMutations</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M496.1,-358.35C504.55,-357.04 513.19,-355.69 521.78,-354.36"/>
<polygon fill="green" stroke="green" points="522.48,-357.79 531.82,-352.8 521.4,-350.88 522.48,-357.79"/>
</g>
</g>
</svg>
