<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: region2 Pages: 1 -->
<svg width="1108pt" height="523pt"
 viewBox="0.00 0.00 1108.00 523.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 519)">
<title>region2</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-519 1104,-519 1104,4 -4,4"/>
<!-- Region -->
<g id="node1" class="node">
<title>Region</title>
<path fill="none" stroke="#1c2123" d="M482,-70C482,-70 760,-70 760,-70 766,-70 772,-76 772,-82 772,-82 772,-219 772,-219 772,-225 766,-231 760,-231 760,-231 482,-231 482,-231 476,-231 470,-225 470,-219 470,-219 470,-82 470,-82 470,-76 476,-70 482,-70"/>
<text text-anchor="middle" x="621" y="-215.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region</text>
<polyline fill="none" stroke="#1c2123" points="470,-208 772,-208 "/>
<text text-anchor="start" x="478" y="-192.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 id = 1;</text>
<polyline fill="none" stroke="#1c2123" points="470,-185 772,-185 "/>
<text text-anchor="start" x="478" y="-169.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">bytes start_key = 2;</text>
<polyline fill="none" stroke="#1c2123" points="470,-162 772,-162 "/>
<text text-anchor="start" x="478" y="-146.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">bytes end_key = 3;</text>
<polyline fill="none" stroke="#1c2123" points="470,-139 772,-139 "/>
<text text-anchor="start" x="478" y="-123.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RegionEpoch region_epoch = 4;</text>
<polyline fill="none" stroke="#1c2123" points="470,-116 772,-116 "/>
<text text-anchor="start" x="478" y="-100.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated Peer peers = 5;</text>
<polyline fill="none" stroke="#1c2123" points="470,-93 772,-93 "/>
<text text-anchor="start" x="478" y="-77.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">encryptionpb.EncryptionMeta encryption_meta = 6;</text>
</g>
<!-- RegionEpoch -->
<g id="node2" class="node">
<title>RegionEpoch</title>
<path fill="none" stroke="#1c2123" d="M820,-166C820,-166 925,-166 925,-166 931,-166 937,-172 937,-178 937,-178 937,-223 937,-223 937,-229 931,-235 925,-235 925,-235 820,-235 820,-235 814,-235 808,-229 808,-223 808,-223 808,-178 808,-178 808,-172 814,-166 820,-166"/>
<text text-anchor="middle" x="872.5" y="-219.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RegionEpoch</text>
<polyline fill="none" stroke="#1c2123" points="808,-212 937,-212 "/>
<text text-anchor="start" x="816" y="-196.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 conf_ver = 1;</text>
<polyline fill="none" stroke="#1c2123" points="808,-189 937,-189 "/>
<text text-anchor="start" x="816" y="-173.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 version = 2;</text>
</g>
<!-- Region&#45;&gt;RegionEpoch -->
<g id="edge2" class="edge">
<title>Region&#45;&gt;RegionEpoch</title>
<path fill="none" stroke="#666666" d="M772.17,-180.6C780.98,-182.36 789.61,-184.09 797.87,-185.75"/>
<polygon fill="#666666" stroke="#666666" points="797.27,-189.19 807.76,-187.73 798.65,-182.33 797.27,-189.19"/>
</g>
<!-- Peer -->
<g id="node3" class="node">
<title>Peer</title>
<path fill="none" stroke="#1c2123" d="M822,-54.5C822,-54.5 923,-54.5 923,-54.5 929,-54.5 935,-60.5 935,-66.5 935,-66.5 935,-134.5 935,-134.5 935,-140.5 929,-146.5 923,-146.5 923,-146.5 822,-146.5 822,-146.5 816,-146.5 810,-140.5 810,-134.5 810,-134.5 810,-66.5 810,-66.5 810,-60.5 816,-54.5 822,-54.5"/>
<text text-anchor="middle" x="872.5" y="-131.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<polyline fill="none" stroke="#1c2123" points="810,-123.5 935,-123.5 "/>
<text text-anchor="start" x="818" y="-108.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 id = 1;</text>
<polyline fill="none" stroke="#1c2123" points="810,-100.5 935,-100.5 "/>
<text text-anchor="start" x="818" y="-85.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 store_id = 2;</text>
<polyline fill="none" stroke="#1c2123" points="810,-77.5 935,-77.5 "/>
<text text-anchor="start" x="818" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerRole role = 3;</text>
</g>
<!-- Region&#45;&gt;Peer -->
<g id="edge3" class="edge">
<title>Region&#45;&gt;Peer</title>
<path fill="none" stroke="#666666" d="M772.17,-120.4C781.77,-118.48 791.16,-116.6 800.1,-114.81"/>
<polygon fill="#666666" stroke="#666666" points="800.87,-118.22 809.99,-112.83 799.49,-111.36 800.87,-118.22"/>
</g>
<!-- PeerRole -->
<g id="node4" class="node">
<title>PeerRole</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M985,-43C985,-43 1088,-43 1088,-43 1094,-43 1100,-49 1100,-55 1100,-55 1100,-146 1100,-146 1100,-152 1094,-158 1088,-158 1088,-158 985,-158 985,-158 979,-158 973,-152 973,-146 973,-146 973,-55 973,-55 973,-49 979,-43 985,-43"/>
<text text-anchor="middle" x="1036.5" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">PeerRole</text>
<polyline fill="none" stroke="#8a8898" points="973,-135 1100,-135 "/>
<text text-anchor="start" x="981" y="-119.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Voter = 0;</text>
<polyline fill="none" stroke="#8a8898" points="973,-112 1100,-112 "/>
<text text-anchor="start" x="981" y="-96.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Learner = 1;</text>
<polyline fill="none" stroke="#8a8898" points="973,-89 1100,-89 "/>
<text text-anchor="start" x="981" y="-73.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">IncomingVoter = 2;</text>
<polyline fill="none" stroke="#8a8898" points="973,-66 1100,-66 "/>
<text text-anchor="start" x="981" y="-50.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">DemotingVoter = 3;</text>
</g>
<!-- Peer&#45;&gt;PeerRole -->
<g id="edge1" class="edge">
<title>Peer&#45;&gt;PeerRole</title>
<path fill="none" stroke="#666666" d="M935.21,-100.5C944.17,-100.5 953.47,-100.5 962.63,-100.5"/>
<polygon fill="#666666" stroke="#666666" points="962.89,-104 972.89,-100.5 962.89,-97 962.89,-104"/>
</g>
<!-- RaftLocalState -->
<g id="node5" class="node">
<title>RaftLocalState</title>
<path fill="none" stroke="#1c2123" d="M31.5,-296C31.5,-296 205.5,-296 205.5,-296 211.5,-296 217.5,-302 217.5,-308 217.5,-308 217.5,-353 217.5,-353 217.5,-359 211.5,-365 205.5,-365 205.5,-365 31.5,-365 31.5,-365 25.5,-365 19.5,-359 19.5,-353 19.5,-353 19.5,-308 19.5,-308 19.5,-302 25.5,-296 31.5,-296"/>
<text text-anchor="middle" x="118.5" y="-349.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLocalState</text>
<polyline fill="none" stroke="#1c2123" points="19.5,-342 217.5,-342 "/>
<text text-anchor="start" x="27.5" y="-326.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">eraftpb.HardState hard_state = 1;</text>
<polyline fill="none" stroke="#1c2123" points="19.5,-319 217.5,-319 "/>
<text text-anchor="start" x="27.5" y="-303.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 last_index = 2;</text>
</g>
<!-- HardState -->
<g id="node6" class="node">
<title>HardState</title>
<path fill="none" stroke="#1c2123" d="M303.5,-284.5C303.5,-284.5 403.5,-284.5 403.5,-284.5 409.5,-284.5 415.5,-290.5 415.5,-296.5 415.5,-296.5 415.5,-364.5 415.5,-364.5 415.5,-370.5 409.5,-376.5 403.5,-376.5 403.5,-376.5 303.5,-376.5 303.5,-376.5 297.5,-376.5 291.5,-370.5 291.5,-364.5 291.5,-364.5 291.5,-296.5 291.5,-296.5 291.5,-290.5 297.5,-284.5 303.5,-284.5"/>
<text text-anchor="middle" x="353.5" y="-361.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">HardState</text>
<polyline fill="none" stroke="#1c2123" points="291.5,-353.5 415.5,-353.5 "/>
<text text-anchor="start" x="299.5" y="-338.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 term = 1;</text>
<polyline fill="none" stroke="#1c2123" points="291.5,-330.5 415.5,-330.5 "/>
<text text-anchor="start" x="299.5" y="-315.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 vote = 2;</text>
<polyline fill="none" stroke="#1c2123" points="291.5,-307.5 415.5,-307.5 "/>
<text text-anchor="start" x="299.5" y="-292.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 commit = 3;</text>
</g>
<!-- RaftLocalState&#45;&gt;HardState -->
<g id="edge4" class="edge">
<title>RaftLocalState&#45;&gt;HardState</title>
<path fill="none" stroke="#666666" d="M217.64,-330.5C238.93,-330.5 261.05,-330.5 281.08,-330.5"/>
<polygon fill="#666666" stroke="#666666" points="281.34,-334 291.34,-330.5 281.34,-327 281.34,-334"/>
</g>
<!-- RegionLocalState -->
<g id="node7" class="node">
<title>RegionLocalState</title>
<path fill="none" stroke="#1c2123" d="M42.5,-123.5C42.5,-123.5 194.5,-123.5 194.5,-123.5 200.5,-123.5 206.5,-129.5 206.5,-135.5 206.5,-135.5 206.5,-203.5 206.5,-203.5 206.5,-209.5 200.5,-215.5 194.5,-215.5 194.5,-215.5 42.5,-215.5 42.5,-215.5 36.5,-215.5 30.5,-209.5 30.5,-203.5 30.5,-203.5 30.5,-135.5 30.5,-135.5 30.5,-129.5 36.5,-123.5 42.5,-123.5"/>
<text text-anchor="middle" x="118.5" y="-200.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RegionLocalState</text>
<polyline fill="none" stroke="#1c2123" points="30.5,-192.5 206.5,-192.5 "/>
<text text-anchor="start" x="38.5" y="-177.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerState state = 1;</text>
<polyline fill="none" stroke="#1c2123" points="30.5,-169.5 206.5,-169.5 "/>
<text text-anchor="start" x="38.5" y="-154.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">metapb.Region region = 2;</text>
<polyline fill="none" stroke="#1c2123" points="30.5,-146.5 206.5,-146.5 "/>
<text text-anchor="start" x="38.5" y="-131.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">MergeState merge_state = 3;</text>
</g>
<!-- RegionLocalState&#45;&gt;Region -->
<g id="edge5" class="edge">
<title>RegionLocalState&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M206.73,-214.91C227.88,-223.84 250.8,-231.87 273,-236.5 343.05,-251.12 364.12,-251.87 434,-236.5 442.74,-234.58 451.56,-232.2 460.35,-229.48"/>
<polygon fill="#666666" stroke="#666666" points="461.45,-232.81 469.88,-226.4 459.29,-226.15 461.45,-232.81"/>
</g>
<!-- PeerState -->
<g id="node8" class="node">
<title>PeerState</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M313.5,-112C313.5,-112 393.5,-112 393.5,-112 399.5,-112 405.5,-118 405.5,-124 405.5,-124 405.5,-215 405.5,-215 405.5,-221 399.5,-227 393.5,-227 393.5,-227 313.5,-227 313.5,-227 307.5,-227 301.5,-221 301.5,-215 301.5,-215 301.5,-124 301.5,-124 301.5,-118 307.5,-112 313.5,-112"/>
<text text-anchor="middle" x="353.5" y="-211.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">PeerState</text>
<polyline fill="none" stroke="#8a8898" points="301.5,-204 405.5,-204 "/>
<text text-anchor="start" x="309.5" y="-188.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Normal = 0;</text>
<polyline fill="none" stroke="#8a8898" points="301.5,-181 405.5,-181 "/>
<text text-anchor="start" x="309.5" y="-165.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Applying = 1;</text>
<polyline fill="none" stroke="#8a8898" points="301.5,-158 405.5,-158 "/>
<text text-anchor="start" x="309.5" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Tombstone = 2;</text>
<polyline fill="none" stroke="#8a8898" points="301.5,-135 405.5,-135 "/>
<text text-anchor="start" x="309.5" y="-119.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Merging = 3;</text>
</g>
<!-- RegionLocalState&#45;&gt;PeerState -->
<g id="edge6" class="edge">
<title>RegionLocalState&#45;&gt;PeerState</title>
<path fill="none" stroke="#666666" d="M206.59,-169.5C234.78,-169.5 265.42,-169.5 291.31,-169.5"/>
<polygon fill="#666666" stroke="#666666" points="291.36,-173 301.36,-169.5 291.36,-166 291.36,-173"/>
</g>
<!-- MergeState -->
<g id="node9" class="node">
<title>MergeState</title>
<path fill="none" stroke="#1c2123" d="M285,-0.5C285,-0.5 422,-0.5 422,-0.5 428,-0.5 434,-6.5 434,-12.5 434,-12.5 434,-80.5 434,-80.5 434,-86.5 428,-92.5 422,-92.5 422,-92.5 285,-92.5 285,-92.5 279,-92.5 273,-86.5 273,-80.5 273,-80.5 273,-12.5 273,-12.5 273,-6.5 279,-0.5 285,-0.5"/>
<text text-anchor="middle" x="353.5" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">MergeState</text>
<polyline fill="none" stroke="#1c2123" points="273,-69.5 434,-69.5 "/>
<text text-anchor="start" x="281" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 min_index = 1;</text>
<polyline fill="none" stroke="#1c2123" points="273,-46.5 434,-46.5 "/>
<text text-anchor="start" x="281" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">metapb.Region target = 2;</text>
<polyline fill="none" stroke="#1c2123" points="273,-23.5 434,-23.5 "/>
<text text-anchor="start" x="281" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 commit = 3;</text>
</g>
<!-- RegionLocalState&#45;&gt;MergeState -->
<g id="edge7" class="edge">
<title>RegionLocalState&#45;&gt;MergeState</title>
<path fill="none" stroke="#666666" d="M206.59,-123.52C225.34,-113.63 245.17,-103.16 263.97,-93.23"/>
<polygon fill="#666666" stroke="#666666" points="265.61,-96.33 272.82,-88.56 262.34,-90.14 265.61,-96.33"/>
</g>
<!-- MergeState&#45;&gt;Region -->
<g id="edge8" class="edge">
<title>MergeState&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M434.16,-77.7C442.66,-81.03 451.51,-84.5 460.53,-88.03"/>
<polygon fill="#666666" stroke="#666666" points="459.4,-91.35 469.99,-91.74 461.96,-84.83 459.4,-91.35"/>
</g>
<!-- RaftApplyState -->
<g id="node10" class="node">
<title>RaftApplyState</title>
<path fill="none" stroke="#1c2123" d="M12,-384.5C12,-384.5 225,-384.5 225,-384.5 231,-384.5 237,-390.5 237,-396.5 237,-396.5 237,-502.5 237,-502.5 237,-508.5 231,-514.5 225,-514.5 225,-514.5 12,-514.5 12,-514.5 6,-514.5 0,-508.5 0,-502.5 0,-502.5 0,-396.5 0,-396.5 0,-390.5 6,-384.5 12,-384.5"/>
<text text-anchor="middle" x="118.5" y="-499.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftApplyState</text>
<polyline fill="none" stroke="#1c2123" points="0,-491.5 237,-491.5 "/>
<text text-anchor="start" x="8" y="-476.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 applied_index = 1;</text>
<polyline fill="none" stroke="#1c2123" points="0,-468.5 237,-468.5 "/>
<text text-anchor="start" x="8" y="-453.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 last_commit_index = 3;</text>
<polyline fill="none" stroke="#1c2123" points="0,-445.5 237,-445.5 "/>
<text text-anchor="start" x="8" y="-430.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 commit_index = 4;</text>
<polyline fill="none" stroke="#1c2123" points="0,-422.5 237,-422.5 "/>
<text text-anchor="start" x="8" y="-407.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 commit_term = 5;</text>
<text text-anchor="start" x="8" y="-392.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> RaftTruncatedState truncated_state = 2;</text>
</g>
<!-- RaftTruncatedState -->
<g id="node11" class="node">
<title>RaftTruncatedState</title>
<path fill="none" stroke="#1c2123" d="M304.5,-415C304.5,-415 402.5,-415 402.5,-415 408.5,-415 414.5,-421 414.5,-427 414.5,-427 414.5,-472 414.5,-472 414.5,-478 408.5,-484 402.5,-484 402.5,-484 304.5,-484 304.5,-484 298.5,-484 292.5,-478 292.5,-472 292.5,-472 292.5,-427 292.5,-427 292.5,-421 298.5,-415 304.5,-415"/>
<text text-anchor="middle" x="353.5" y="-468.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftTruncatedState</text>
<polyline fill="none" stroke="#1c2123" points="292.5,-461 414.5,-461 "/>
<text text-anchor="start" x="300.5" y="-445.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 index = 1;</text>
<polyline fill="none" stroke="#1c2123" points="292.5,-438 414.5,-438 "/>
<text text-anchor="start" x="300.5" y="-422.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 term = 2;</text>
</g>
<!-- RaftApplyState&#45;&gt;RaftTruncatedState -->
<g id="edge9" class="edge">
<title>RaftApplyState&#45;&gt;RaftTruncatedState</title>
<path fill="none" stroke="#666666" d="M237.02,-449.5C252.5,-449.5 267.94,-449.5 282.27,-449.5"/>
<polygon fill="#666666" stroke="#666666" points="282.5,-453 292.5,-449.5 282.5,-446 282.5,-453"/>
</g>
</g>
</svg>
