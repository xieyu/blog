<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: region_ref Pages: 1 -->
<svg width="1088pt" height="653pt"
 viewBox="0.00 0.00 1088.00 652.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 648.5)">
<title>region_ref</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-648.5 1084,-648.5 1084,4 -4,4"/>
<!-- RaftPoller -->
<g id="node1" class="node">
<title>RaftPoller</title>
<path fill="none" stroke="#1c2123" d="M22,-575C22,-575 210,-575 210,-575 216,-575 222,-581 222,-587 222,-587 222,-632 222,-632 222,-638 216,-644 210,-644 210,-644 22,-644 22,-644 16,-644 10,-638 10,-632 10,-632 10,-587 10,-587 10,-581 16,-575 22,-575"/>
<text text-anchor="middle" x="116" y="-628.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftPoller</text>
<polyline fill="none" stroke="#1c2123" points="10,-621 222,-621 "/>
<text text-anchor="start" x="18" y="-605.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">poll_ctx: PollContext&lt;EK, ER, T&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="10,-598 222,-598 "/>
<text text-anchor="start" x="18" y="-582.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">...</text>
</g>
<!-- PollContext -->
<g id="node2" class="node">
<title>PollContext</title>
<path fill="none" stroke="#1c2123" d="M330,-579C330,-579 563,-579 563,-579 569,-579 575,-585 575,-591 575,-591 575,-628 575,-628 575,-634 569,-640 563,-640 563,-640 330,-640 330,-640 324,-640 318,-634 318,-628 318,-628 318,-591 318,-591 318,-585 324,-579 330,-579"/>
<text text-anchor="middle" x="446.5" y="-624.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollContext</text>
<polyline fill="none" stroke="#1c2123" points="318,-617 575,-617 "/>
<text text-anchor="start" x="326" y="-601.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub store_meta: Arc&lt;Mutex&lt;StoreMeta&gt;&gt;,</text>
<text text-anchor="start" x="326" y="-586.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ...</text>
</g>
<!-- RaftPoller&#45;&gt;PollContext -->
<g id="edge1" class="edge">
<title>RaftPoller&#45;&gt;PollContext</title>
<path fill="none" stroke="#666666" d="M222.29,-609.5C249.49,-609.5 279.17,-609.5 307.75,-609.5"/>
<polygon fill="#666666" stroke="#666666" points="307.81,-613 317.81,-609.5 307.81,-606 307.81,-613"/>
</g>
<!-- StoreMeta -->
<g id="node3" class="node">
<title>StoreMeta</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M673,-429.5C673,-429.5 931,-429.5 931,-429.5 937,-429.5 943,-435.5 943,-441.5 943,-441.5 943,-585.5 943,-585.5 943,-591.5 937,-597.5 931,-597.5 931,-597.5 673,-597.5 673,-597.5 667,-597.5 661,-591.5 661,-585.5 661,-585.5 661,-441.5 661,-441.5 661,-435.5 667,-429.5 673,-429.5"/>
<text text-anchor="middle" x="802" y="-582.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">StoreMeta</text>
<polyline fill="none" stroke="#8a8898" points="661,-574.5 943,-574.5 "/>
<text text-anchor="start" x="669" y="-559.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub store_id: Option&lt;u64&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="661,-551.5 943,-551.5 "/>
<text text-anchor="start" x="669" y="-536.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub region_ranges: BTreeMap&lt;Vec&lt;u8&gt;, u64&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="661,-528.5 943,-528.5 "/>
<text text-anchor="start" x="669" y="-513.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub regions: HashMap&lt;u64, Region&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="661,-505.5 943,-505.5 "/>
<text text-anchor="start" x="669" y="-490.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub pending_snapshot_regions: Vec&lt;Region&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="661,-482.5 943,-482.5 "/>
<text text-anchor="start" x="669" y="-467.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub pending_merge_targets: HashMap&lt;u64,</text>
<text text-anchor="start" x="669" y="-452.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> HashMap&lt;u64, metapb::Region&gt;&gt;,</text>
<text text-anchor="middle" x="802" y="-437.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> ...</text>
</g>
<!-- PollContext&#45;&gt;StoreMeta -->
<g id="edge2" class="edge">
<title>PollContext&#45;&gt;StoreMeta</title>
<path fill="none" stroke="#666666" d="M575.29,-581.21C592.06,-577.14 608.98,-572.85 625,-568.5 633.42,-566.22 642.04,-563.8 650.72,-561.29"/>
<polygon fill="#666666" stroke="#666666" points="651.92,-564.59 660.54,-558.44 649.96,-557.87 651.92,-564.59"/>
</g>
<!-- Region -->
<g id="node6" class="node">
<title>Region</title>
<path fill="none" stroke="#1c2123" d="M1045.5,-351.5C1045.5,-351.5 1013.5,-351.5 1013.5,-351.5 1007.5,-351.5 1001.5,-345.5 1001.5,-339.5 1001.5,-339.5 1001.5,-327.5 1001.5,-327.5 1001.5,-321.5 1007.5,-315.5 1013.5,-315.5 1013.5,-315.5 1045.5,-315.5 1045.5,-315.5 1051.5,-315.5 1057.5,-321.5 1057.5,-327.5 1057.5,-327.5 1057.5,-339.5 1057.5,-339.5 1057.5,-345.5 1051.5,-351.5 1045.5,-351.5"/>
<text text-anchor="middle" x="1029.5" y="-329.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region</text>
</g>
<!-- StoreMeta&#45;&gt;Region -->
<g id="edge10" class="edge">
<title>StoreMeta&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M908.49,-429.3C940.95,-403.38 974.22,-376.83 997.47,-358.27"/>
<polygon fill="#666666" stroke="#666666" points="999.93,-360.78 1005.57,-351.81 995.57,-355.31 999.93,-360.78"/>
</g>
<!-- ApplyFsm -->
<g id="node4" class="node">
<title>ApplyFsm</title>
<path fill="none" stroke="#1c2123" d="M302.5,-356.5C302.5,-356.5 590.5,-356.5 590.5,-356.5 596.5,-356.5 602.5,-362.5 602.5,-368.5 602.5,-368.5 602.5,-436.5 602.5,-436.5 602.5,-442.5 596.5,-448.5 590.5,-448.5 590.5,-448.5 302.5,-448.5 302.5,-448.5 296.5,-448.5 290.5,-442.5 290.5,-436.5 290.5,-436.5 290.5,-368.5 290.5,-368.5 290.5,-362.5 296.5,-356.5 302.5,-356.5"/>
<text text-anchor="middle" x="446.5" y="-433.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsm</text>
<polyline fill="none" stroke="#1c2123" points="290.5,-425.5 602.5,-425.5 "/>
<text text-anchor="start" x="298.5" y="-410.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">delegate: ApplyDelegate&lt;EK&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="290.5,-402.5 602.5,-402.5 "/>
<text text-anchor="start" x="298.5" y="-387.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">receiver: Receiver&lt;Msg&lt;EK&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="290.5,-379.5 602.5,-379.5 "/>
<text text-anchor="start" x="298.5" y="-364.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">mailbox: Option&lt;BasicMailbox&lt;ApplyFsm&lt;EK&gt;&gt;&gt;,</text>
</g>
<!-- ApplyFsmDelegate -->
<g id="node5" class="node">
<title>ApplyFsmDelegate</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M727.5,-276C727.5,-276 876.5,-276 876.5,-276 882.5,-276 888.5,-282 888.5,-288 888.5,-288 888.5,-379 888.5,-379 888.5,-385 882.5,-391 876.5,-391 876.5,-391 727.5,-391 727.5,-391 721.5,-391 715.5,-385 715.5,-379 715.5,-379 715.5,-288 715.5,-288 715.5,-282 721.5,-276 727.5,-276"/>
<text text-anchor="middle" x="802" y="-375.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">ApplyFsmDelegate</text>
<polyline fill="none" stroke="#8a8898" points="715.5,-368 888.5,-368 "/>
<text text-anchor="start" x="723.5" y="-352.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">id: u64,</text>
<polyline fill="none" stroke="#8a8898" points="715.5,-345 888.5,-345 "/>
<text text-anchor="start" x="723.5" y="-329.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">term: u64,</text>
<polyline fill="none" stroke="#8a8898" points="715.5,-322 888.5,-322 "/>
<text text-anchor="start" x="723.5" y="-306.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">region: Region,</text>
<polyline fill="none" stroke="#8a8898" points="715.5,-299 888.5,-299 "/>
<text text-anchor="start" x="723.5" y="-283.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">apply_state: RaftApplyState,</text>
</g>
<!-- ApplyFsm&#45;&gt;ApplyFsmDelegate -->
<g id="edge3" class="edge">
<title>ApplyFsm&#45;&gt;ApplyFsmDelegate</title>
<path fill="none" stroke="#666666" d="M602.55,-372.24C637.54,-365.41 673.67,-358.35 705.37,-352.17"/>
<polygon fill="#666666" stroke="#666666" points="706.35,-355.54 715.49,-350.19 705.01,-348.67 706.35,-355.54"/>
</g>
<!-- ApplyFsmDelegate&#45;&gt;Region -->
<g id="edge4" class="edge">
<title>ApplyFsmDelegate&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M888.57,-333.5C924.04,-333.5 963.32,-333.5 991.21,-333.5"/>
<polygon fill="#666666" stroke="#666666" points="991.31,-337 1001.31,-333.5 991.31,-330 991.31,-337"/>
</g>
<!-- RaftApplyState -->
<g id="node13" class="node">
<title>RaftApplyState</title>
<path fill="none" stroke="#1c2123" d="M1068,-214.5C1068,-214.5 991,-214.5 991,-214.5 985,-214.5 979,-208.5 979,-202.5 979,-202.5 979,-190.5 979,-190.5 979,-184.5 985,-178.5 991,-178.5 991,-178.5 1068,-178.5 1068,-178.5 1074,-178.5 1080,-184.5 1080,-190.5 1080,-190.5 1080,-202.5 1080,-202.5 1080,-208.5 1074,-214.5 1068,-214.5"/>
<text text-anchor="middle" x="1029.5" y="-192.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftApplyState</text>
</g>
<!-- ApplyFsmDelegate&#45;&gt;RaftApplyState -->
<g id="edge13" class="edge">
<title>ApplyFsmDelegate&#45;&gt;RaftApplyState</title>
<path fill="none" stroke="#666666" d="M888.73,-292.43C906.98,-282.85 925.89,-272.29 943,-261.5 962.34,-249.31 982.77,-233.88 998.81,-221.12"/>
<polygon fill="#666666" stroke="#666666" points="1001.17,-223.71 1006.77,-214.72 996.78,-218.26 1001.17,-223.71"/>
</g>
<!-- PeerFsm -->
<g id="node7" class="node">
<title>PeerFsm</title>
<path fill="none" stroke="#1c2123" d="M49,-96C49,-96 183,-96 183,-96 189,-96 195,-102 195,-108 195,-108 195,-153 195,-153 195,-159 189,-165 183,-165 183,-165 49,-165 49,-165 43,-165 37,-159 37,-153 37,-153 37,-108 37,-108 37,-102 43,-96 49,-96"/>
<text text-anchor="middle" x="116" y="-149.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsm</text>
<polyline fill="none" stroke="#1c2123" points="37,-142 195,-142 "/>
<text text-anchor="start" x="45" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub peer: Peer&lt;EK, ER&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="37,-119 195,-119 "/>
<text text-anchor="start" x="45" y="-103.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">...</text>
</g>
<!-- Peer -->
<g id="node8" class="node">
<title>Peer</title>
<path fill="none" stroke="#1c2123" d="M306.5,-96C306.5,-96 586.5,-96 586.5,-96 592.5,-96 598.5,-102 598.5,-108 598.5,-108 598.5,-153 598.5,-153 598.5,-159 592.5,-165 586.5,-165 586.5,-165 306.5,-165 306.5,-165 300.5,-165 294.5,-159 294.5,-153 294.5,-153 294.5,-108 294.5,-108 294.5,-102 300.5,-96 306.5,-96"/>
<text text-anchor="middle" x="446.5" y="-149.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<polyline fill="none" stroke="#1c2123" points="294.5,-142 598.5,-142 "/>
<text text-anchor="start" x="302.5" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub peer: metapb::Peer,</text>
<polyline fill="none" stroke="#1c2123" points="294.5,-119 598.5,-119 "/>
<text text-anchor="start" x="302.5" y="-103.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub raft_group: RawNode&lt;PeerStorage&lt;EK, ER&gt;&gt;,</text>
</g>
<!-- PeerFsm&#45;&gt;Peer -->
<g id="edge5" class="edge">
<title>PeerFsm&#45;&gt;Peer</title>
<path fill="none" stroke="#666666" d="M195.27,-130.5C222.15,-130.5 253.32,-130.5 284.33,-130.5"/>
<polygon fill="#666666" stroke="#666666" points="284.39,-134 294.39,-130.5 284.39,-127 284.39,-134"/>
</g>
<!-- PeerStorage -->
<g id="node9" class="node">
<title>PeerStorage</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M727.5,-80.5C727.5,-80.5 876.5,-80.5 876.5,-80.5 882.5,-80.5 888.5,-86.5 888.5,-92.5 888.5,-92.5 888.5,-206.5 888.5,-206.5 888.5,-212.5 882.5,-218.5 876.5,-218.5 876.5,-218.5 727.5,-218.5 727.5,-218.5 721.5,-218.5 715.5,-212.5 715.5,-206.5 715.5,-206.5 715.5,-92.5 715.5,-92.5 715.5,-86.5 721.5,-80.5 727.5,-80.5"/>
<text text-anchor="middle" x="802" y="-203.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">PeerStorage</text>
<polyline fill="none" stroke="#8a8898" points="715.5,-195.5 888.5,-195.5 "/>
<text text-anchor="start" x="723.5" y="-180.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">peer_id: u64,</text>
<polyline fill="none" stroke="#8a8898" points="715.5,-172.5 888.5,-172.5 "/>
<text text-anchor="start" x="723.5" y="-157.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">region: metapb::Region,</text>
<polyline fill="none" stroke="#8a8898" points="715.5,-149.5 888.5,-149.5 "/>
<text text-anchor="start" x="723.5" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">raft_state: RaftLocalState,</text>
<polyline fill="none" stroke="#8a8898" points="715.5,-126.5 888.5,-126.5 "/>
<text text-anchor="start" x="723.5" y="-111.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">apply_state: RaftApplyState,</text>
<polyline fill="none" stroke="#8a8898" points="715.5,-103.5 888.5,-103.5 "/>
<text text-anchor="start" x="723.5" y="-88.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">applied_index_term: u64,</text>
</g>
<!-- Peer&#45;&gt;PeerStorage -->
<g id="edge6" class="edge">
<title>Peer&#45;&gt;PeerStorage</title>
<path fill="none" stroke="#666666" d="M598.7,-138.63C634.9,-140.57 672.55,-142.6 705.43,-144.36"/>
<polygon fill="#666666" stroke="#666666" points="705.3,-147.86 715.47,-144.9 705.67,-140.87 705.3,-147.86"/>
</g>
<!-- PeerStorage&#45;&gt;Region -->
<g id="edge7" class="edge">
<title>PeerStorage&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M887.61,-218.54C926.51,-250.28 970.19,-285.92 998.45,-308.98"/>
<polygon fill="#666666" stroke="#666666" points="996.39,-311.82 1006.35,-315.43 1000.82,-306.39 996.39,-311.82"/>
</g>
<!-- RaftLocalState -->
<g id="node12" class="node">
<title>RaftLocalState</title>
<path fill="none" stroke="#1c2123" d="M1066.5,-119.5C1066.5,-119.5 992.5,-119.5 992.5,-119.5 986.5,-119.5 980.5,-113.5 980.5,-107.5 980.5,-107.5 980.5,-95.5 980.5,-95.5 980.5,-89.5 986.5,-83.5 992.5,-83.5 992.5,-83.5 1066.5,-83.5 1066.5,-83.5 1072.5,-83.5 1078.5,-89.5 1078.5,-95.5 1078.5,-95.5 1078.5,-107.5 1078.5,-107.5 1078.5,-113.5 1072.5,-119.5 1066.5,-119.5"/>
<text text-anchor="middle" x="1029.5" y="-97.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftLocalState</text>
</g>
<!-- PeerStorage&#45;&gt;RaftLocalState -->
<g id="edge11" class="edge">
<title>PeerStorage&#45;&gt;RaftLocalState</title>
<path fill="none" stroke="#666666" d="M888.57,-131.28C915.84,-125.48 945.36,-119.2 970.23,-113.9"/>
<polygon fill="#666666" stroke="#666666" points="971.17,-117.28 980.23,-111.78 969.72,-110.43 971.17,-117.28"/>
</g>
<!-- PeerStorage&#45;&gt;RaftApplyState -->
<g id="edge12" class="edge">
<title>PeerStorage&#45;&gt;RaftApplyState</title>
<path fill="none" stroke="#666666" d="M888.57,-167.34C915.4,-172.93 944.41,-178.97 969.03,-184.1"/>
<polygon fill="#666666" stroke="#666666" points="968.43,-187.56 978.93,-186.17 969.86,-180.7 968.43,-187.56"/>
</g>
<!-- TiKVServer -->
<g id="node10" class="node">
<title>TiKVServer</title>
<path fill="none" stroke="#1c2123" d="M12,-490.5C12,-490.5 220,-490.5 220,-490.5 226,-490.5 232,-496.5 232,-502.5 232,-502.5 232,-524.5 232,-524.5 232,-530.5 226,-536.5 220,-536.5 220,-536.5 12,-536.5 12,-536.5 6,-536.5 0,-530.5 0,-524.5 0,-524.5 0,-502.5 0,-502.5 0,-496.5 6,-490.5 12,-490.5"/>
<text text-anchor="middle" x="116" y="-521.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TiKVServer</text>
<polyline fill="none" stroke="#1c2123" points="0,-513.5 232,-513.5 "/>
<text text-anchor="start" x="8" y="-498.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">engines: Option&lt;TiKVEngines&lt;ER&gt;&gt;,</text>
</g>
<!-- TiKVEngines -->
<g id="node11" class="node">
<title>TiKVEngines</title>
<path fill="none" stroke="#1c2123" d="M280,-467.5C280,-467.5 613,-467.5 613,-467.5 619,-467.5 625,-473.5 625,-479.5 625,-479.5 625,-547.5 625,-547.5 625,-553.5 619,-559.5 613,-559.5 613,-559.5 280,-559.5 280,-559.5 274,-559.5 268,-553.5 268,-547.5 268,-547.5 268,-479.5 268,-479.5 268,-473.5 274,-467.5 280,-467.5"/>
<text text-anchor="middle" x="446.5" y="-544.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TiKVEngines</text>
<polyline fill="none" stroke="#1c2123" points="268,-536.5 625,-536.5 "/>
<text text-anchor="start" x="276" y="-521.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">engines: Engines&lt;RocksEngine, ER&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="268,-513.5 625,-513.5 "/>
<text text-anchor="start" x="276" y="-498.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_meta: Arc&lt;Mutex&lt;StoreMeta&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="268,-490.5 625,-490.5 "/>
<text text-anchor="start" x="276" y="-475.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">engine: RaftKv&lt;ServerRaftStoreRouter&lt;RocksEngine, ER&gt;&gt;,</text>
</g>
<!-- TiKVServer&#45;&gt;TiKVEngines -->
<g id="edge8" class="edge">
<title>TiKVServer&#45;&gt;TiKVEngines</title>
<path fill="none" stroke="#666666" d="M232.35,-513.5C240.66,-513.5 249.15,-513.5 257.72,-513.5"/>
<polygon fill="#666666" stroke="#666666" points="257.82,-517 267.82,-513.5 257.82,-510 257.82,-517"/>
</g>
<!-- TiKVEngines&#45;&gt;StoreMeta -->
<g id="edge9" class="edge">
<title>TiKVEngines&#45;&gt;StoreMeta</title>
<path fill="none" stroke="#666666" d="M625.03,-513.5C633.69,-513.5 642.34,-513.5 650.91,-513.5"/>
<polygon fill="#666666" stroke="#666666" points="650.93,-517 660.93,-513.5 650.93,-510 650.93,-517"/>
</g>
<!-- InvokeContext -->
<g id="node14" class="node">
<title>InvokeContext</title>
<path fill="none" stroke="#1c2123" d="M325,-0.5C325,-0.5 568,-0.5 568,-0.5 574,-0.5 580,-6.5 580,-12.5 580,-12.5 580,-64.5 580,-64.5 580,-70.5 574,-76.5 568,-76.5 568,-76.5 325,-76.5 325,-76.5 319,-76.5 313,-70.5 313,-64.5 313,-64.5 313,-12.5 313,-12.5 313,-6.5 319,-0.5 325,-0.5"/>
<text text-anchor="middle" x="446.5" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">InvokeContext</text>
<polyline fill="none" stroke="#1c2123" points="313,-53.5 580,-53.5 "/>
<text text-anchor="start" x="321" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Returned by `PeerStorage::handle_raft_ready`</text>
<text text-anchor="start" x="321" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> used for recording changed status of</text>
<text text-anchor="start" x="321" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> RaftLocalState and RaftApplyState</text>
</g>
<!-- InvokeContext&#45;&gt;PeerStorage -->
<g id="edge19" class="edge">
<title>InvokeContext&#45;&gt;PeerStorage</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M580.14,-73.13C595.32,-77.46 610.53,-81.96 625,-86.5 651.34,-94.76 679.6,-104.49 705.61,-113.79"/>
<polygon fill="green" stroke="green" points="704.48,-117.11 715.08,-117.2 706.85,-110.52 704.48,-117.11"/>
</g>
<!-- InvokeContext&#45;&gt;RaftLocalState -->
<g id="edge14" class="edge">
<title>InvokeContext&#45;&gt;RaftLocalState</title>
<path fill="none" stroke="#666666" d="M580.22,-15.79C682.14,-3.63 824.95,1.79 943,-37.5 966.07,-45.18 987.94,-61.78 1003.79,-76.16"/>
<polygon fill="#666666" stroke="#666666" points="1001.82,-79.11 1011.5,-83.41 1006.61,-74.01 1001.82,-79.11"/>
</g>
<!-- InvokeContext&#45;&gt;RaftApplyState -->
<g id="edge15" class="edge">
<title>InvokeContext&#45;&gt;RaftApplyState</title>
<path fill="none" stroke="#666666" d="M580.19,-40.85C716.37,-44.25 912.57,-52.26 943,-70.5 969.02,-86.1 962.06,-103.33 979,-128.5 988.41,-142.48 999.39,-157.67 1008.62,-170.14"/>
<polygon fill="#666666" stroke="#666666" points="1005.9,-172.36 1014.68,-178.29 1011.52,-168.18 1005.9,-172.36"/>
</g>
<!-- ApplyContext -->
<g id="node15" class="node">
<title>ApplyContext</title>
<path fill="none" stroke="#1c2123" d="M150.5,-278.5C150.5,-278.5 81.5,-278.5 81.5,-278.5 75.5,-278.5 69.5,-272.5 69.5,-266.5 69.5,-266.5 69.5,-254.5 69.5,-254.5 69.5,-248.5 75.5,-242.5 81.5,-242.5 81.5,-242.5 150.5,-242.5 150.5,-242.5 156.5,-242.5 162.5,-248.5 162.5,-254.5 162.5,-254.5 162.5,-266.5 162.5,-266.5 162.5,-272.5 156.5,-278.5 150.5,-278.5"/>
<text text-anchor="middle" x="116" y="-256.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyContext</text>
</g>
<!-- ExecContext -->
<g id="node16" class="node">
<title>ExecContext</title>
<path fill="none" stroke="#1c2123" d="M372,-184C372,-184 521,-184 521,-184 527,-184 533,-190 533,-196 533,-196 533,-325 533,-325 533,-331 527,-337 521,-337 521,-337 372,-337 372,-337 366,-337 360,-331 360,-325 360,-325 360,-196 360,-196 360,-190 366,-184 372,-184"/>
<text text-anchor="start" x="368" y="-321.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">fsm/apply.rs</text>
<polyline fill="none" stroke="#1c2123" points="360,-314 533,-314 "/>
<text text-anchor="start" x="368" y="-298.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ExecContext</text>
<polyline fill="none" stroke="#1c2123" points="360,-291 533,-291 "/>
<text text-anchor="start" x="368" y="-275.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">apply_state: RaftApplyState,</text>
<polyline fill="none" stroke="#1c2123" points="360,-268 533,-268 "/>
<text text-anchor="start" x="368" y="-252.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">index: u64,</text>
<polyline fill="none" stroke="#1c2123" points="360,-245 533,-245 "/>
<text text-anchor="start" x="368" y="-229.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">term: u64,</text>
<polyline fill="none" stroke="#1c2123" points="360,-222 533,-222 "/>
<text text-anchor="start" x="368" y="-206.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">apply_state为</text>
<text text-anchor="start" x="368" y="-191.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ApplyFsmDelegate的clone</text>
</g>
<!-- ApplyContext&#45;&gt;ExecContext -->
<g id="edge16" class="edge">
<title>ApplyContext&#45;&gt;ExecContext</title>
<path fill="none" stroke="#666666" d="M162.68,-260.5C210.86,-260.5 288.18,-260.5 349.81,-260.5"/>
<polygon fill="#666666" stroke="#666666" points="349.95,-264 359.95,-260.5 349.95,-257 349.95,-264"/>
</g>
<!-- ExecContext&#45;&gt;ApplyFsmDelegate -->
<g id="edge17" class="edge">
<title>ExecContext&#45;&gt;ApplyFsmDelegate</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M533.07,-278.17C585.11,-288.92 651.66,-302.66 705.41,-313.76"/>
<polygon fill="green" stroke="green" points="704.8,-317.21 715.3,-315.8 706.21,-310.35 704.8,-317.21"/>
</g>
<!-- ExecContext&#45;&gt;RaftApplyState -->
<g id="edge18" class="edge">
<title>ExecContext&#45;&gt;RaftApplyState</title>
<path fill="none" stroke="#666666" d="M533.1,-262.04C632.66,-262.18 801.47,-257.25 943,-227.5 954.11,-225.16 965.73,-221.69 976.7,-217.91"/>
<polygon fill="#666666" stroke="#666666" points="977.9,-221.2 986.13,-214.53 975.54,-214.61 977.9,-221.2"/>
</g>
</g>
</svg>
