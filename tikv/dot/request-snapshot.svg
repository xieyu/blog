<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: request_snapshot Pages: 1 -->
<svg width="1256pt" height="185pt"
 viewBox="0.00 0.00 1256.00 185.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 181)">
<title>request_snapshot</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-181 1252,-181 1252,4 -4,4"/>
<!-- RawNode_request_snapshot -->
<g id="node1" class="node">
<title>RawNode_request_snapshot</title>
<path fill="none" stroke="#1c2123" d="M12,-73C12,-73 182,-73 182,-73 188,-73 194,-79 194,-85 194,-85 194,-107 194,-107 194,-113 188,-119 182,-119 182,-119 12,-119 12,-119 6,-119 0,-113 0,-107 0,-107 0,-85 0,-85 0,-79 6,-73 12,-73"/>
<text text-anchor="middle" x="97" y="-103.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode::request_snapshot</text>
<polyline fill="none" stroke="#1c2123" points="0,-96 194,-96 "/>
<text text-anchor="start" x="8" y="-80.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">request a snapshot from a leader</text>
</g>
<!-- request_snapshot -->
<g id="node2" class="node">
<title>request_snapshot</title>
<path fill="none" stroke="#1c2123" d="M328,-114C328,-114 242,-114 242,-114 236,-114 230,-108 230,-102 230,-102 230,-90 230,-90 230,-84 236,-78 242,-78 242,-78 328,-78 328,-78 334,-78 340,-84 340,-90 340,-90 340,-102 340,-102 340,-108 334,-114 328,-114"/>
<text text-anchor="middle" x="285" y="-92.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">request_snapshot</text>
</g>
<!-- RawNode_request_snapshot&#45;&gt;request_snapshot -->
<g id="edge1" class="edge">
<title>RawNode_request_snapshot&#45;&gt;request_snapshot</title>
<path fill="none" stroke="#666666" d="M194.27,-96C202.87,-96 211.43,-96 219.67,-96"/>
<polygon fill="#666666" stroke="#666666" points="219.89,-99.5 229.89,-96 219.89,-92.5 219.89,-99.5"/>
</g>
<!-- pending_request_snapshot -->
<g id="node6" class="node">
<title>pending_request_snapshot</title>
<path fill="#feed9b" stroke="#f7e495" d="M388,-55C388,-55 524,-55 524,-55 530,-55 536,-61 536,-67 536,-67 536,-79 536,-79 536,-85 530,-91 524,-91 524,-91 388,-91 388,-91 382,-91 376,-85 376,-79 376,-79 376,-67 376,-67 376,-61 382,-55 388,-55"/>
<text text-anchor="middle" x="456" y="-69.3" font-family="Times,serif" font-size="14.00" fill="#40575d">pending_request_snapshot</text>
</g>
<!-- request_snapshot&#45;&gt;pending_request_snapshot -->
<g id="edge4" class="edge">
<title>request_snapshot&#45;&gt;pending_request_snapshot</title>
<path fill="none" stroke="#666666" d="M340.4,-88.6C348.52,-87.49 357.06,-86.33 365.67,-85.16"/>
<polygon fill="#666666" stroke="#666666" points="366.34,-88.6 375.78,-83.78 365.4,-81.66 366.34,-88.6"/>
</g>
<!-- send_request_snapshot -->
<g id="node7" class="node">
<title>send_request_snapshot</title>
<path fill="none" stroke="#1c2123" d="M878,-114C878,-114 761,-114 761,-114 755,-114 749,-108 749,-102 749,-102 749,-90 749,-90 749,-84 755,-78 761,-78 761,-78 878,-78 878,-78 884,-78 890,-84 890,-90 890,-90 890,-102 890,-102 890,-108 884,-114 878,-114"/>
<text text-anchor="middle" x="819.5" y="-92.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_request_snapshot</text>
</g>
<!-- request_snapshot&#45;&gt;send_request_snapshot -->
<g id="edge5" class="edge">
<title>request_snapshot&#45;&gt;send_request_snapshot</title>
<path fill="none" stroke="#666666" d="M340.23,-99.5C352.02,-100.13 364.42,-100.68 376,-101 525.72,-105.16 563.26,-103.26 713,-100 721.36,-99.82 730.1,-99.57 738.81,-99.29"/>
<polygon fill="#666666" stroke="#666666" points="739.11,-102.79 748.99,-98.95 738.88,-95.79 739.11,-102.79"/>
</g>
<!-- step -->
<g id="node3" class="node">
<title>step</title>
<path fill="none" stroke="#1c2123" d="M300,-36C300,-36 270,-36 270,-36 264,-36 258,-30 258,-24 258,-24 258,-12 258,-12 258,-6 264,0 270,0 270,0 300,0 300,0 306,0 312,-6 312,-12 312,-12 312,-24 312,-24 312,-30 306,-36 300,-36"/>
<text text-anchor="middle" x="285" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">step</text>
</g>
<!-- step_follower -->
<g id="node4" class="node">
<title>step_follower</title>
<path fill="none" stroke="#1c2123" d="M489.5,-36C489.5,-36 422.5,-36 422.5,-36 416.5,-36 410.5,-30 410.5,-24 410.5,-24 410.5,-12 410.5,-12 410.5,-6 416.5,0 422.5,0 422.5,0 489.5,0 489.5,0 495.5,0 501.5,-6 501.5,-12 501.5,-12 501.5,-24 501.5,-24 501.5,-30 495.5,-36 489.5,-36"/>
<text text-anchor="middle" x="456" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">step_follower</text>
</g>
<!-- step&#45;&gt;step_follower -->
<g id="edge2" class="edge">
<title>step&#45;&gt;step_follower</title>
<path fill="none" stroke="#666666" d="M312.04,-18C335.39,-18 370.44,-18 399.98,-18"/>
<polygon fill="#666666" stroke="#666666" points="400.18,-21.5 410.18,-18 400.18,-14.5 400.18,-21.5"/>
</g>
<!-- handle_append_entries -->
<g id="node5" class="node">
<title>handle_append_entries</title>
<path fill="none" stroke="#1c2123" d="M701,-91C701,-91 584,-91 584,-91 578,-91 572,-85 572,-79 572,-79 572,-67 572,-67 572,-61 578,-55 584,-55 584,-55 701,-55 701,-55 707,-55 713,-61 713,-67 713,-67 713,-79 713,-79 713,-85 707,-91 701,-91"/>
<text text-anchor="middle" x="642.5" y="-69.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_append_entries</text>
</g>
<!-- step_follower&#45;&gt;handle_append_entries -->
<g id="edge3" class="edge">
<title>step_follower&#45;&gt;handle_append_entries</title>
<path fill="none" stroke="#666666" d="M501.66,-31.31C522.47,-37.52 547.73,-45.05 571.02,-51.99"/>
<polygon fill="#666666" stroke="#666666" points="570.29,-55.42 580.87,-54.93 572.28,-48.71 570.29,-55.42"/>
</g>
<!-- handle_append_entries&#45;&gt;send_request_snapshot -->
<g id="edge8" class="edge">
<title>handle_append_entries&#45;&gt;send_request_snapshot</title>
<path fill="none" stroke="#666666" d="M713.17,-82.16C721.59,-83.26 730.25,-84.4 738.81,-85.53"/>
<polygon fill="#666666" stroke="#666666" points="738.42,-89 748.79,-86.84 739.33,-82.06 738.42,-89"/>
</g>
<!-- pending_request_snapshot&#45;&gt;handle_append_entries -->
<g id="edge7" class="edge">
<title>pending_request_snapshot&#45;&gt;handle_append_entries</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M536.05,-73C544.53,-73 553.17,-73 561.66,-73"/>
<polygon fill="green" stroke="green" points="561.93,-76.5 571.93,-73 561.93,-69.5 561.93,-76.5"/>
</g>
<!-- MsgAppendResponse -->
<g id="node8" class="node">
<title>MsgAppendResponse</title>
<path fill="#feed9b" stroke="#f7e495" d="M938,-15.5C938,-15.5 1236,-15.5 1236,-15.5 1242,-15.5 1248,-21.5 1248,-27.5 1248,-27.5 1248,-164.5 1248,-164.5 1248,-170.5 1242,-176.5 1236,-176.5 1236,-176.5 938,-176.5 938,-176.5 932,-176.5 926,-170.5 926,-164.5 926,-164.5 926,-27.5 926,-27.5 926,-21.5 932,-15.5 938,-15.5"/>
<text text-anchor="middle" x="1087" y="-161.3" font-family="Times,serif" font-size="14.00" fill="#40575d">MsgAppendResponse</text>
<polyline fill="none" stroke="#f7e495" points="926,-153.5 1248,-153.5 "/>
<text text-anchor="start" x="934" y="-138.3" font-family="Times,serif" font-size="14.00" fill="#40575d">m.set_msg_type(MessageType::MsgAppendResponse);</text>
<polyline fill="none" stroke="#f7e495" points="926,-130.5 1248,-130.5 "/>
<text text-anchor="start" x="934" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#40575d">m.index = self.raft_log.committed;</text>
<polyline fill="none" stroke="#f7e495" points="926,-107.5 1248,-107.5 "/>
<text text-anchor="start" x="934" y="-92.3" font-family="Times,serif" font-size="14.00" fill="#40575d">m.reject = true;</text>
<polyline fill="none" stroke="#f7e495" points="926,-84.5 1248,-84.5 "/>
<text text-anchor="start" x="934" y="-69.3" font-family="Times,serif" font-size="14.00" fill="#40575d">m.reject_hint = self.raft_log.last_index();</text>
<polyline fill="none" stroke="#f7e495" points="926,-61.5 1248,-61.5 "/>
<text text-anchor="start" x="934" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#40575d">m.to = self.leader_id;</text>
<polyline fill="none" stroke="#f7e495" points="926,-38.5 1248,-38.5 "/>
<text text-anchor="start" x="934" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#40575d">m.request_snapshot = self.pending_request_snapshot;</text>
</g>
<!-- send_request_snapshot&#45;&gt;MsgAppendResponse -->
<g id="edge6" class="edge">
<title>send_request_snapshot&#45;&gt;MsgAppendResponse</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M890.26,-96C898.41,-96 906.97,-96 915.77,-96"/>
<polygon fill="green" stroke="green" points="915.8,-99.5 925.8,-96 915.8,-92.5 915.8,-99.5"/>
</g>
</g>
</svg>
