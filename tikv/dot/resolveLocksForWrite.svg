<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: resolveLocksForWrite_normal Pages: 1 -->
<svg width="1100pt" height="632pt"
 viewBox="0.00 0.00 1100.00 632.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 628)">
<title>resolveLocksForWrite_normal</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-628 1096,-628 1096,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_LockResolver</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-8C20,-8 1072,-8 1072,-8 1078,-8 1084,-14 1084,-20 1084,-20 1084,-604 1084,-604 1084,-610 1078,-616 1072,-616 1072,-616 20,-616 20,-616 14,-616 8,-610 8,-604 8,-604 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="546" y="-596" font-family="Times,serif" font-size="20.00">LockResolver</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_resolve</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M637,-16C637,-16 882,-16 882,-16 888,-16 894,-22 894,-28 894,-28 894,-332 894,-332 894,-338 888,-344 882,-344 882,-344 637,-344 637,-344 631,-344 625,-338 625,-332 625,-332 625,-28 625,-28 625,-22 631,-16 637,-16"/>
<text text-anchor="middle" x="759.5" y="-324" font-family="Times,serif" font-size="20.00">三种resolve方式</text>
</g>
<!-- resolveLock -->
<g id="node1" class="node">
<title>resolveLock</title>
<path fill="none" stroke="#1c2123" d="M652,-104.5C652,-104.5 867,-104.5 867,-104.5 873,-104.5 879,-110.5 879,-116.5 879,-116.5 879,-183.5 879,-183.5 879,-189.5 873,-195.5 867,-195.5 867,-195.5 652,-195.5 652,-195.5 646,-195.5 640,-189.5 640,-183.5 640,-183.5 640,-116.5 640,-116.5 640,-110.5 646,-104.5 652,-104.5"/>
<text text-anchor="middle" x="759.5" y="-180.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolveLock</text>
<polyline fill="none" stroke="#1c2123" points="640,-172.5 879,-172.5 "/>
<text text-anchor="start" x="648" y="-157.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">不断尝试locate key所在region</text>
<text text-anchor="start" x="648" y="-142.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 向tikv发送CmdResolveLock</text>
<text text-anchor="start" x="648" y="-127.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果有regionErr，就重新尝试locKey</text>
<text text-anchor="start" x="648" y="-112.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 重新发送CmdResolveLock 命令</text>
</g>
<!-- LocateKey -->
<g id="node4" class="node">
<title>LocateKey</title>
<path fill="none" stroke="#1c2123" d="M954.5,-109C954.5,-109 1043.5,-109 1043.5,-109 1049.5,-109 1055.5,-115 1055.5,-121 1055.5,-121 1055.5,-143 1055.5,-143 1055.5,-149 1049.5,-155 1043.5,-155 1043.5,-155 954.5,-155 954.5,-155 948.5,-155 942.5,-149 942.5,-143 942.5,-143 942.5,-121 942.5,-121 942.5,-115 948.5,-109 954.5,-109"/>
<text text-anchor="middle" x="999" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">LocateKey</text>
<polyline fill="none" stroke="#1c2123" points="942.5,-132 1055.5,-132 "/>
<text text-anchor="middle" x="999" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">获取key的region</text>
</g>
<!-- resolveLock&#45;&gt;LocateKey -->
<g id="edge1" class="edge">
<title>resolveLock&#45;&gt;LocateKey</title>
<path fill="none" stroke="#666666" d="M879.25,-141C897.5,-139.62 915.74,-138.23 932.27,-136.98"/>
<polygon fill="#666666" stroke="#666666" points="932.61,-140.47 942.32,-136.22 932.08,-133.49 932.61,-140.47"/>
</g>
<!-- CmdResolveLock -->
<g id="node6" class="node">
<title>CmdResolveLock</title>
<path fill="none" stroke="#1c2123" d="M944,-198C944,-198 1054,-198 1054,-198 1060,-198 1066,-204 1066,-210 1066,-210 1066,-262 1066,-262 1066,-268 1060,-274 1054,-274 1054,-274 944,-274 944,-274 938,-274 932,-268 932,-262 932,-262 932,-210 932,-210 932,-204 938,-198 944,-198"/>
<text text-anchor="middle" x="999" y="-258.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdResolveLock</text>
<polyline fill="none" stroke="#1c2123" points="932,-251 1066,-251 "/>
<text text-anchor="start" x="940" y="-235.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Tikv: 根据txn status</text>
<text text-anchor="start" x="940" y="-220.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 清理lock</text>
<text text-anchor="start" x="940" y="-205.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> commit或者cleanup</text>
</g>
<!-- resolveLock&#45;&gt;CmdResolveLock -->
<g id="edge16" class="edge">
<title>resolveLock&#45;&gt;CmdResolveLock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M879.25,-193C893.81,-198.27 908.36,-203.54 922.05,-208.5"/>
<polygon fill="green" stroke="green" points="921.25,-211.93 931.84,-212.04 923.63,-205.35 921.25,-211.93"/>
</g>
<!-- resolvePessimisticLock -->
<g id="node2" class="node">
<title>resolvePessimisticLock</title>
<path fill="none" stroke="#1c2123" d="M665,-24.5C665,-24.5 854,-24.5 854,-24.5 860,-24.5 866,-30.5 866,-36.5 866,-36.5 866,-73.5 866,-73.5 866,-79.5 860,-85.5 854,-85.5 854,-85.5 665,-85.5 665,-85.5 659,-85.5 653,-79.5 653,-73.5 653,-73.5 653,-36.5 653,-36.5 653,-30.5 659,-24.5 665,-24.5"/>
<text text-anchor="middle" x="759.5" y="-70.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolvePessimisticLock</text>
<polyline fill="none" stroke="#1c2123" points="653,-62.5 866,-62.5 "/>
<text text-anchor="start" x="661" y="-47.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">和resolveLo类似，不过发送的是</text>
<text text-anchor="start" x="661" y="-32.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> CmdPessimisticLockRollback</text>
</g>
<!-- resolvePessimisticLock&#45;&gt;LocateKey -->
<g id="edge2" class="edge">
<title>resolvePessimisticLock&#45;&gt;LocateKey</title>
<path fill="none" stroke="#666666" d="M864.51,-85.61C874.5,-88.71 884.46,-91.88 894,-95 906.55,-99.11 919.89,-103.69 932.67,-108.19"/>
<polygon fill="#666666" stroke="#666666" points="931.72,-111.57 942.32,-111.6 934.06,-104.97 931.72,-111.57"/>
</g>
<!-- CmdPessimisticRollback -->
<g id="node5" class="node">
<title>CmdPessimisticRollback</title>
<path fill="none" stroke="#1c2123" d="M1064,-73C1064,-73 934,-73 934,-73 928,-73 922,-67 922,-61 922,-61 922,-49 922,-49 922,-43 928,-37 934,-37 934,-37 1064,-37 1064,-37 1070,-37 1076,-43 1076,-49 1076,-49 1076,-61 1076,-61 1076,-67 1070,-73 1064,-73"/>
<text text-anchor="middle" x="999" y="-51.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdPessimisticRollback</text>
</g>
<!-- resolvePessimisticLock&#45;&gt;CmdPessimisticRollback -->
<g id="edge3" class="edge">
<title>resolvePessimisticLock&#45;&gt;CmdPessimisticRollback</title>
<path fill="none" stroke="#666666" d="M866.05,-55C881.35,-55 896.95,-55 911.81,-55"/>
<polygon fill="#666666" stroke="#666666" points="911.97,-58.5 921.97,-55 911.97,-51.5 911.97,-58.5"/>
</g>
<!-- resolveLockAsync -->
<g id="node3" class="node">
<title>resolveLockAsync</title>
<path fill="none" stroke="#1c2123" d="M645,-214.5C645,-214.5 874,-214.5 874,-214.5 880,-214.5 886,-220.5 886,-226.5 886,-226.5 886,-293.5 886,-293.5 886,-299.5 880,-305.5 874,-305.5 874,-305.5 645,-305.5 645,-305.5 639,-305.5 633,-299.5 633,-293.5 633,-293.5 633,-226.5 633,-226.5 633,-220.5 639,-214.5 645,-214.5"/>
<text text-anchor="middle" x="759.5" y="-290.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolveLockAsync</text>
<polyline fill="none" stroke="#1c2123" points="633,-282.5 886,-282.5 "/>
<text text-anchor="start" x="641" y="-267.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">由于AsyncCommit中lock有所有的</text>
<text text-anchor="start" x="641" y="-252.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> secondary keys 所以可一次性的</text>
<text text-anchor="start" x="641" y="-237.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> resolve lock相关key</text>
<text text-anchor="start" x="641" y="-222.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 向Tikv发送CmdResolveLock来清理lock</text>
</g>
<!-- resolveLockAsync&#45;&gt;CmdResolveLock -->
<g id="edge4" class="edge">
<title>resolveLockAsync&#45;&gt;CmdResolveLock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M886.2,-247.3C898.3,-246.07 910.3,-244.86 921.7,-243.71"/>
<polygon fill="green" stroke="green" points="922.39,-247.16 931.99,-242.67 921.68,-240.19 922.39,-247.16"/>
</g>
<!-- TxnStatus -->
<g id="node7" class="node">
<title>TxnStatus</title>
<path fill="none" stroke="#1c2123" d="M412,-125.5C412,-125.5 585,-125.5 585,-125.5 591,-125.5 597,-131.5 597,-137.5 597,-137.5 597,-228.5 597,-228.5 597,-234.5 591,-240.5 585,-240.5 585,-240.5 412,-240.5 412,-240.5 406,-240.5 400,-234.5 400,-228.5 400,-228.5 400,-137.5 400,-137.5 400,-131.5 406,-125.5 412,-125.5"/>
<text text-anchor="middle" x="498.5" y="-225.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TxnStatus</text>
<polyline fill="none" stroke="#1c2123" points="400,-217.5 597,-217.5 "/>
<text text-anchor="start" x="408" y="-202.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ttl uint64</text>
<polyline fill="none" stroke="#1c2123" points="400,-194.5 597,-194.5 "/>
<text text-anchor="start" x="408" y="-179.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">commitTS uint64</text>
<polyline fill="none" stroke="#1c2123" points="400,-171.5 597,-171.5 "/>
<text text-anchor="start" x="408" y="-156.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">action kvrpcpb.Action</text>
<polyline fill="none" stroke="#1c2123" points="400,-148.5 597,-148.5 "/>
<text text-anchor="start" x="408" y="-133.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">primaryLock *kvrpcpb.LockInfo</text>
</g>
<!-- TxnStatus&#45;&gt;resolveLock -->
<g id="edge5" class="edge">
<title>TxnStatus&#45;&gt;resolveLock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M597.05,-164.01C607.7,-162.52 618.65,-161.07 629.61,-159.67"/>
<polygon fill="green" stroke="green" points="630.16,-163.13 639.65,-158.41 629.29,-156.18 630.16,-163.13"/>
</g>
<!-- TxnStatus&#45;&gt;resolveLock -->
<g id="edge15" class="edge">
<title>TxnStatus&#45;&gt;resolveLock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M597.05,-177.14C607.7,-175.9 618.65,-174.57 629.61,-173.17"/>
<polygon fill="green" stroke="green" points="630.18,-176.63 639.65,-171.87 629.29,-169.69 630.18,-176.63"/>
</g>
<!-- TxnStatus&#45;&gt;resolvePessimisticLock -->
<g id="edge6" class="edge">
<title>TxnStatus&#45;&gt;resolvePessimisticLock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M573.41,-125.37C589.8,-114.27 607.52,-103.47 625,-95 630.79,-92.2 636.81,-89.54 642.96,-87.04"/>
<polygon fill="green" stroke="green" points="644.67,-90.13 652.71,-83.23 642.12,-83.61 644.67,-90.13"/>
</g>
<!-- TxnStatus&#45;&gt;resolveLockAsync -->
<g id="edge7" class="edge">
<title>TxnStatus&#45;&gt;resolveLockAsync</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M597.05,-212C605.49,-214.51 614.12,-217.08 622.79,-219.65"/>
<polygon fill="green" stroke="green" points="622,-223.07 632.58,-222.57 624,-216.36 622,-223.07"/>
</g>
<!-- LockInfo -->
<g id="node12" class="node">
<title>LockInfo</title>
<path fill="none" stroke="#1c2123" d="M707.5,-352.5C707.5,-352.5 811.5,-352.5 811.5,-352.5 817.5,-352.5 823.5,-358.5 823.5,-364.5 823.5,-364.5 823.5,-455.5 823.5,-455.5 823.5,-461.5 817.5,-467.5 811.5,-467.5 811.5,-467.5 707.5,-467.5 707.5,-467.5 701.5,-467.5 695.5,-461.5 695.5,-455.5 695.5,-455.5 695.5,-364.5 695.5,-364.5 695.5,-358.5 701.5,-352.5 707.5,-352.5"/>
<text text-anchor="middle" x="759.5" y="-452.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockInfo</text>
<polyline fill="none" stroke="#1c2123" points="695.5,-444.5 823.5,-444.5 "/>
<text text-anchor="start" x="703.5" y="-429.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PrimaryLock []byte </text>
<polyline fill="none" stroke="#1c2123" points="695.5,-421.5 823.5,-421.5 "/>
<text text-anchor="start" x="703.5" y="-406.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockVersion uint64 </text>
<polyline fill="none" stroke="#1c2123" points="695.5,-398.5 823.5,-398.5 "/>
<text text-anchor="start" x="703.5" y="-383.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Key []byte </text>
<polyline fill="none" stroke="#1c2123" points="695.5,-375.5 823.5,-375.5 "/>
<text text-anchor="start" x="703.5" y="-360.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockTtl uint64 </text>
</g>
<!-- TxnStatus&#45;&gt;LockInfo -->
<g id="edge17" class="edge">
<title>TxnStatus&#45;&gt;LockInfo</title>
<path fill="none" stroke="#666666" d="M533.26,-240.67C555.78,-275.28 587.99,-318.21 625,-348 643.12,-362.58 665.24,-374.64 686.21,-384.11"/>
<polygon fill="#666666" stroke="#666666" points="684.87,-387.35 695.43,-388.15 687.68,-380.93 684.87,-387.35"/>
</g>
<!-- resolve -->
<g id="node8" class="node">
<title>resolve</title>
<path fill="none" stroke="#1c2123" d="M28,-137.5C28,-137.5 162,-137.5 162,-137.5 168,-137.5 174,-143.5 174,-149.5 174,-149.5 174,-216.5 174,-216.5 174,-222.5 168,-228.5 162,-228.5 162,-228.5 28,-228.5 28,-228.5 22,-228.5 16,-222.5 16,-216.5 16,-216.5 16,-149.5 16,-149.5 16,-143.5 22,-137.5 28,-137.5"/>
<text text-anchor="middle" x="95" y="-213.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve</text>
<polyline fill="none" stroke="#1c2123" points="16,-205.5 174,-205.5 "/>
<text text-anchor="start" x="24" y="-190.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">1.获取txnStatus</text>
<text text-anchor="start" x="24" y="-175.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 2.如果status.ttl == 0 </text>
<text text-anchor="start" x="24" y="-160.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 根据lock type调用</text>
<text text-anchor="start" x="24" y="-145.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 不同的resolveLock方法</text>
</g>
<!-- resolve&#45;&gt;resolveLock -->
<g id="edge8" class="edge">
<title>resolve&#45;&gt;resolveLock</title>
<path fill="none" stroke="#666666" d="M174.27,-160.84C235.22,-144.78 322.23,-124.47 400,-116 487.04,-106.52 509.92,-106.93 597,-116 607.69,-117.11 618.72,-118.63 629.75,-120.41"/>
<polygon fill="#666666" stroke="#666666" points="629.43,-123.9 639.88,-122.11 630.6,-117 629.43,-123.9"/>
</g>
<!-- resolve&#45;&gt;resolvePessimisticLock -->
<g id="edge9" class="edge">
<title>resolve&#45;&gt;resolvePessimisticLock</title>
<path fill="none" stroke="#666666" d="M164.4,-137.38C178.94,-129.43 194.58,-122.09 210,-117 354.11,-69.46 529.79,-57.01 642.86,-54.43"/>
<polygon fill="#666666" stroke="#666666" points="643,-57.93 652.92,-54.22 642.85,-50.93 643,-57.93"/>
</g>
<!-- resolve&#45;&gt;resolveLockAsync -->
<g id="edge10" class="edge">
<title>resolve&#45;&gt;resolveLockAsync</title>
<path fill="none" stroke="#666666" d="M174.03,-204.47C235.02,-220.21 322.22,-240.43 400,-250 473.18,-259 555.37,-261.82 622.57,-262.24"/>
<polygon fill="#666666" stroke="#666666" points="622.79,-265.74 632.8,-262.29 622.82,-258.74 622.79,-265.74"/>
</g>
<!-- getTxnStatusFromLock -->
<g id="node9" class="node">
<title>getTxnStatusFromLock</title>
<path fill="none" stroke="#1c2123" d="M222,-280C222,-280 352,-280 352,-280 358,-280 364,-286 364,-292 364,-292 364,-314 364,-314 364,-320 358,-326 352,-326 352,-326 222,-326 222,-326 216,-326 210,-320 210,-314 210,-314 210,-292 210,-292 210,-286 216,-280 222,-280"/>
<text text-anchor="middle" x="287" y="-310.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">getTxnStatusFromLock</text>
<polyline fill="none" stroke="#1c2123" points="210,-303 364,-303 "/>
<text text-anchor="start" x="218" y="-287.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">获取primay lock的状态</text>
</g>
<!-- resolve&#45;&gt;getTxnStatusFromLock -->
<g id="edge11" class="edge">
<title>resolve&#45;&gt;getTxnStatusFromLock</title>
<path fill="none" stroke="#666666" d="M155.72,-228.68C172.87,-241.04 191.85,-254.03 210,-265 215.68,-268.43 221.72,-271.84 227.8,-275.11"/>
<polygon fill="#666666" stroke="#666666" points="226.25,-278.24 236.72,-279.81 229.51,-272.05 226.25,-278.24"/>
</g>
<!-- getTxnStatusFromLock&#45;&gt;TxnStatus -->
<g id="edge12" class="edge">
<title>getTxnStatusFromLock&#45;&gt;TxnStatus</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M328.39,-279.86C346.45,-269.52 368.67,-256.79 390.99,-244.01"/>
<polygon fill="green" stroke="green" points="392.94,-246.92 399.88,-238.92 389.46,-240.85 392.94,-246.92"/>
</g>
<!-- getTxnStatus -->
<g id="node10" class="node">
<title>getTxnStatus</title>
<path fill="none" stroke="#1c2123" d="M453.5,-387C453.5,-387 543.5,-387 543.5,-387 549.5,-387 555.5,-393 555.5,-399 555.5,-399 555.5,-451 555.5,-451 555.5,-457 549.5,-463 543.5,-463 543.5,-463 453.5,-463 453.5,-463 447.5,-463 441.5,-457 441.5,-451 441.5,-451 441.5,-399 441.5,-399 441.5,-393 447.5,-387 453.5,-387"/>
<text text-anchor="middle" x="498.5" y="-447.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">getTxnStatus</text>
<polyline fill="none" stroke="#1c2123" points="441.5,-440 555.5,-440 "/>
<text text-anchor="start" x="449.5" y="-424.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">根据冲突key的</text>
<text text-anchor="start" x="449.5" y="-409.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> primary key lock</text>
<text text-anchor="start" x="449.5" y="-394.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 获取txn status</text>
</g>
<!-- getTxnStatusFromLock&#45;&gt;getTxnStatus -->
<g id="edge13" class="edge">
<title>getTxnStatusFromLock&#45;&gt;getTxnStatus</title>
<path fill="none" stroke="#666666" d="M327.9,-326.23C357.32,-343.37 398,-367.06 432.15,-386.94"/>
<polygon fill="#666666" stroke="#666666" points="430.73,-390.17 441.13,-392.17 434.25,-384.12 430.73,-390.17"/>
</g>
<!-- CmdCheckTxnStatus -->
<g id="node11" class="node">
<title>CmdCheckTxnStatus</title>
<path fill="none" stroke="#1c2123" d="M668.5,-486.5C668.5,-486.5 850.5,-486.5 850.5,-486.5 856.5,-486.5 862.5,-492.5 862.5,-498.5 862.5,-498.5 862.5,-565.5 862.5,-565.5 862.5,-571.5 856.5,-577.5 850.5,-577.5 850.5,-577.5 668.5,-577.5 668.5,-577.5 662.5,-577.5 656.5,-571.5 656.5,-565.5 656.5,-565.5 656.5,-498.5 656.5,-498.5 656.5,-492.5 662.5,-486.5 668.5,-486.5"/>
<text text-anchor="middle" x="759.5" y="-562.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdCheckTxnStatus</text>
<polyline fill="none" stroke="#1c2123" points="656.5,-554.5 862.5,-554.5 "/>
<text text-anchor="start" x="664.5" y="-539.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tikv: 如果primay lock expire了</text>
<text text-anchor="start" x="664.5" y="-524.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 则会rollback the primary lock</text>
<text text-anchor="start" x="664.5" y="-509.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 并返回commit Version 0</text>
<text text-anchor="start" x="664.5" y="-494.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 否则返回正常的commit version</text>
</g>
<!-- getTxnStatus&#45;&gt;CmdCheckTxnStatus -->
<g id="edge14" class="edge">
<title>getTxnStatus&#45;&gt;CmdCheckTxnStatus</title>
<path fill="none" stroke="#666666" d="M555.72,-448.32C577.37,-457.3 602.33,-467.63 625,-477 632.17,-479.96 639.55,-483.01 647,-486.08"/>
<polygon fill="#666666" stroke="#666666" points="645.87,-489.4 656.45,-489.98 648.54,-482.93 645.87,-489.4"/>
</g>
</g>
</svg>
