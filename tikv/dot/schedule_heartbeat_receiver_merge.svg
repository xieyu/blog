<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: schedule_heartbeat_receiver_merge Pages: 1 -->
<svg width="1324pt" height="199pt"
 viewBox="0.00 0.00 1324.00 199.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 195)">
<title>schedule_heartbeat_receiver_merge</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-195 1320,-195 1320,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_router</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1176,-75C1176,-75 1296,-75 1296,-75 1302,-75 1308,-81 1308,-87 1308,-87 1308,-171 1308,-171 1308,-177 1302,-183 1296,-183 1296,-183 1176,-183 1176,-183 1170,-183 1164,-177 1164,-171 1164,-171 1164,-87 1164,-87 1164,-81 1170,-75 1176,-75"/>
<text text-anchor="middle" x="1236" y="-163" font-family="Times,serif" font-size="20.00">router</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_worker_pd</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-8C20,-8 1132,-8 1132,-8 1138,-8 1144,-14 1144,-20 1144,-20 1144,-158 1144,-158 1144,-164 1138,-170 1132,-170 1132,-170 20,-170 20,-170 14,-170 8,-164 8,-158 8,-158 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="576" y="-150" font-family="Times,serif" font-size="20.00">worker/pd</text>
</g>
<!-- send_raft_command -->
<g id="node1" class="node">
<title>send_raft_command</title>
<path fill="none" stroke="#1c2123" d="M1184,-83.5C1184,-83.5 1288,-83.5 1288,-83.5 1294,-83.5 1300,-89.5 1300,-95.5 1300,-95.5 1300,-132.5 1300,-132.5 1300,-138.5 1294,-144.5 1288,-144.5 1288,-144.5 1184,-144.5 1184,-144.5 1178,-144.5 1172,-138.5 1172,-132.5 1172,-132.5 1172,-95.5 1172,-95.5 1172,-89.5 1178,-83.5 1184,-83.5"/>
<text text-anchor="middle" x="1236" y="-129.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_raft_command</text>
<polyline fill="none" stroke="#1c2123" points="1172,-121.5 1300,-121.5 "/>
<text text-anchor="start" x="1180" y="-106.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">向region raft发送</text>
<text text-anchor="start" x="1180" y="-91.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> PrepareMerge cmd</text>
</g>
<!-- handle_region_heartbeat_response -->
<g id="node2" class="node">
<title>handle_region_heartbeat_response</title>
<path fill="none" stroke="#1c2123" d="M324,-53.5C324,-53.5 504,-53.5 504,-53.5 510,-53.5 516,-59.5 516,-65.5 516,-65.5 516,-102.5 516,-102.5 516,-108.5 510,-114.5 504,-114.5 504,-114.5 324,-114.5 324,-114.5 318,-114.5 312,-108.5 312,-102.5 312,-102.5 312,-65.5 312,-65.5 312,-59.5 318,-53.5 324,-53.5"/>
<text text-anchor="middle" x="414" y="-99.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_region_heartbeat_response</text>
<polyline fill="none" stroke="#1c2123" points="312,-91.5 516,-91.5 "/>
<text text-anchor="start" x="320" y="-76.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理pd 对region </text>
<text text-anchor="start" x="320" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> heartbeat 的resp</text>
</g>
<!-- has_merge -->
<g id="node5" class="node">
<title>has_merge</title>
<path fill="none" stroke="#1c2123" d="M616,-55C616,-55 564,-55 564,-55 558,-55 552,-49 552,-43 552,-43 552,-31 552,-31 552,-25 558,-19 564,-19 564,-19 616,-19 616,-19 622,-19 628,-25 628,-31 628,-31 628,-43 628,-43 628,-49 622,-55 616,-55"/>
<text text-anchor="middle" x="590" y="-33.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">has_merge</text>
</g>
<!-- handle_region_heartbeat_response&#45;&gt;has_merge -->
<g id="edge3" class="edge">
<title>handle_region_heartbeat_response&#45;&gt;has_merge</title>
<path fill="none" stroke="#666666" d="M516.22,-56.66C525.25,-54.22 534.08,-51.84 542.29,-49.62"/>
<polygon fill="#666666" stroke="#666666" points="543.23,-52.99 551.97,-47 541.41,-46.23 543.23,-52.99"/>
</g>
<!-- take_merge -->
<g id="node6" class="node">
<title>take_merge</title>
<path fill="none" stroke="#1c2123" d="M732,-75C732,-75 676,-75 676,-75 670,-75 664,-69 664,-63 664,-63 664,-51 664,-51 664,-45 670,-39 676,-39 676,-39 732,-39 732,-39 738,-39 744,-45 744,-51 744,-51 744,-63 744,-63 744,-69 738,-75 732,-75"/>
<text text-anchor="middle" x="704" y="-53.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">take_merge</text>
</g>
<!-- handle_region_heartbeat_response&#45;&gt;take_merge -->
<g id="edge4" class="edge">
<title>handle_region_heartbeat_response&#45;&gt;take_merge</title>
<path fill="none" stroke="#666666" d="M516.13,-74.52C562.8,-70.14 616.08,-65.15 653.77,-61.62"/>
<polygon fill="#666666" stroke="#666666" points="654.34,-65.08 663.97,-60.66 653.69,-58.11 654.34,-65.08"/>
</g>
<!-- new_merge_request -->
<g id="node7" class="node">
<title>new_merge_request</title>
<path fill="none" stroke="#1c2123" d="M894,-85C894,-85 792,-85 792,-85 786,-85 780,-79 780,-73 780,-73 780,-61 780,-61 780,-55 786,-49 792,-49 792,-49 894,-49 894,-49 900,-49 906,-55 906,-61 906,-61 906,-73 906,-73 906,-79 900,-85 894,-85"/>
<text text-anchor="middle" x="843" y="-63.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">new_merge_request</text>
</g>
<!-- handle_region_heartbeat_response&#45;&gt;new_merge_request -->
<g id="edge5" class="edge">
<title>handle_region_heartbeat_response&#45;&gt;new_merge_request</title>
<path fill="none" stroke="#666666" d="M516.35,-88.48C581.5,-90.26 667.89,-90.55 744,-84 752.41,-83.28 761.18,-82.21 769.87,-80.96"/>
<polygon fill="#666666" stroke="#666666" points="770.64,-84.38 780,-79.41 769.58,-77.46 770.64,-84.38"/>
</g>
<!-- send_admin_request -->
<g id="node8" class="node">
<title>send_admin_request</title>
<path fill="none" stroke="#1c2123" d="M1091,-132C1091,-132 987,-132 987,-132 981,-132 975,-126 975,-120 975,-120 975,-108 975,-108 975,-102 981,-96 987,-96 987,-96 1091,-96 1091,-96 1097,-96 1103,-102 1103,-108 1103,-108 1103,-120 1103,-120 1103,-126 1097,-132 1091,-132"/>
<text text-anchor="middle" x="1039" y="-110.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_admin_request</text>
</g>
<!-- handle_region_heartbeat_response&#45;&gt;send_admin_request -->
<g id="edge6" class="edge">
<title>handle_region_heartbeat_response&#45;&gt;send_admin_request</title>
<path fill="none" stroke="#666666" d="M516.35,-91.76C528.36,-92.57 540.45,-93.34 552,-94 698.22,-102.34 869.37,-108.56 964.57,-111.7"/>
<polygon fill="#666666" stroke="#666666" points="964.56,-115.21 974.67,-112.04 964.79,-108.21 964.56,-115.21"/>
</g>
<!-- run -->
<g id="node3" class="node">
<title>run</title>
<path fill="none" stroke="#1c2123" d="M58,-102C58,-102 28,-102 28,-102 22,-102 16,-96 16,-90 16,-90 16,-78 16,-78 16,-72 22,-66 28,-66 28,-66 58,-66 58,-66 64,-66 70,-72 70,-78 70,-78 70,-90 70,-90 70,-96 64,-102 58,-102"/>
<text text-anchor="middle" x="43" y="-80.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">run</text>
</g>
<!-- schedule_heartbeat_receiver -->
<g id="node4" class="node">
<title>schedule_heartbeat_receiver</title>
<path fill="none" stroke="#1c2123" d="M264,-102C264,-102 118,-102 118,-102 112,-102 106,-96 106,-90 106,-90 106,-78 106,-78 106,-72 112,-66 118,-66 118,-66 264,-66 264,-66 270,-66 276,-72 276,-78 276,-78 276,-90 276,-90 276,-96 270,-102 264,-102"/>
<text text-anchor="middle" x="191" y="-80.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">schedule_heartbeat_receiver</text>
</g>
<!-- run&#45;&gt;schedule_heartbeat_receiver -->
<g id="edge1" class="edge">
<title>run&#45;&gt;schedule_heartbeat_receiver</title>
<path fill="none" stroke="#666666" d="M70.1,-84C77.69,-84 86.45,-84 95.72,-84"/>
<polygon fill="#666666" stroke="#666666" points="95.93,-87.5 105.93,-84 95.93,-80.5 95.93,-87.5"/>
</g>
<!-- schedule_heartbeat_receiver&#45;&gt;handle_region_heartbeat_response -->
<g id="edge2" class="edge">
<title>schedule_heartbeat_receiver&#45;&gt;handle_region_heartbeat_response</title>
<path fill="none" stroke="#666666" d="M276.18,-84C284.6,-84 293.23,-84 301.87,-84"/>
<polygon fill="#666666" stroke="#666666" points="302,-87.5 312,-84 302,-80.5 302,-87.5"/>
</g>
<!-- has_merge&#45;&gt;take_merge -->
<g id="edge7" class="edge">
<title>has_merge&#45;&gt;take_merge</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M628.29,-43.66C636.53,-45.13 645.37,-46.71 653.99,-48.25"/>
<polygon fill="green" stroke="green" points="653.49,-51.71 663.95,-50.03 654.72,-44.82 653.49,-51.71"/>
</g>
<!-- take_merge&#45;&gt;new_merge_request -->
<g id="edge8" class="edge">
<title>take_merge&#45;&gt;new_merge_request</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M744.26,-59.87C752.36,-60.46 761.13,-61.1 769.98,-61.74"/>
<polygon fill="green" stroke="green" points="769.75,-65.24 779.98,-62.47 770.26,-58.25 769.75,-65.24"/>
</g>
<!-- new_merge_request&#45;&gt;send_admin_request -->
<g id="edge9" class="edge">
<title>new_merge_request&#45;&gt;send_admin_request</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M906.18,-82.07C924.87,-86.59 945.54,-91.6 964.87,-96.28"/>
<polygon fill="green" stroke="green" points="964.29,-99.74 974.84,-98.7 965.94,-92.94 964.29,-99.74"/>
</g>
<!-- AdminCmdType_PrepareMerge -->
<g id="node9" class="node">
<title>AdminCmdType_PrepareMerge</title>
<path fill="none" stroke="#1c2123" d="M954,-16.5C954,-16.5 1124,-16.5 1124,-16.5 1130,-16.5 1136,-22.5 1136,-28.5 1136,-28.5 1136,-65.5 1136,-65.5 1136,-71.5 1130,-77.5 1124,-77.5 1124,-77.5 954,-77.5 954,-77.5 948,-77.5 942,-71.5 942,-65.5 942,-65.5 942,-28.5 942,-28.5 942,-22.5 948,-16.5 954,-16.5"/>
<text text-anchor="middle" x="1039" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">AdminCmdType::PrepareMerge</text>
<polyline fill="none" stroke="#1c2123" points="942,-54.5 1136,-54.5 "/>
<text text-anchor="start" x="950" y="-39.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">向target还是source region</text>
<text text-anchor="start" x="950" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送的这个消息？</text>
</g>
<!-- new_merge_request&#45;&gt;AdminCmdType_PrepareMerge -->
<g id="edge11" class="edge">
<title>new_merge_request&#45;&gt;AdminCmdType_PrepareMerge</title>
<path fill="none" stroke="#666666" d="M906.18,-60.59C914.39,-59.74 922.98,-58.86 931.66,-57.96"/>
<polygon fill="#666666" stroke="#666666" points="932.31,-61.41 941.89,-56.91 931.59,-54.45 932.31,-61.41"/>
</g>
<!-- send_admin_request&#45;&gt;send_raft_command -->
<g id="edge10" class="edge">
<title>send_admin_request&#45;&gt;send_raft_command</title>
<path fill="none" stroke="#666666" d="M1103.04,-114C1121.72,-114 1142.33,-114 1161.6,-114"/>
<polygon fill="#666666" stroke="#666666" points="1161.84,-117.5 1171.84,-114 1161.84,-110.5 1161.84,-117.5"/>
</g>
</g>
</svg>
