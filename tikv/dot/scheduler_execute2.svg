<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: scheduler_execute Pages: 1 -->
<svg width="1526pt" height="282pt"
 viewBox="0.00 0.00 1526.00 282.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 278)">
<title>scheduler_execute</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-278 1522,-278 1522,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_Scheduler</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-8C20,-8 1498,-8 1498,-8 1504,-8 1510,-14 1510,-20 1510,-20 1510,-254 1510,-254 1510,-260 1504,-266 1498,-266 1498,-266 20,-266 20,-266 14,-266 8,-260 8,-254 8,-254 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="759" y="-246" font-family="Times,serif" font-size="20.00">Scheduler</text>
</g>
<!-- run_cmd -->
<g id="node1" class="node">
<title>run_cmd</title>
<path fill="none" stroke="#1c2123" d="M69,-121C69,-121 28,-121 28,-121 22,-121 16,-115 16,-109 16,-109 16,-97 16,-97 16,-91 22,-85 28,-85 28,-85 69,-85 69,-85 75,-85 81,-91 81,-97 81,-97 81,-109 81,-109 81,-115 75,-121 69,-121"/>
<text text-anchor="middle" x="48.5" y="-99.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">run_cmd</text>
</g>
<!-- schedule_command -->
<g id="node2" class="node">
<title>schedule_command</title>
<path fill="none" stroke="#1c2123" d="M230,-121C230,-121 129,-121 129,-121 123,-121 117,-115 117,-109 117,-109 117,-97 117,-97 117,-91 123,-85 129,-85 129,-85 230,-85 230,-85 236,-85 242,-91 242,-97 242,-97 242,-109 242,-109 242,-115 236,-121 230,-121"/>
<text text-anchor="middle" x="179.5" y="-99.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">schedule_command</text>
</g>
<!-- run_cmd&#45;&gt;schedule_command -->
<g id="edge1" class="edge">
<title>run_cmd&#45;&gt;schedule_command</title>
<path fill="none" stroke="#666666" d="M81.06,-103C88.92,-103 97.67,-103 106.61,-103"/>
<polygon fill="#666666" stroke="#666666" points="106.75,-106.5 116.75,-103 106.75,-99.5 106.75,-106.5"/>
</g>
<!-- execute -->
<g id="node3" class="node">
<title>execute</title>
<path fill="none" stroke="#1c2123" d="M290,-72.5C290,-72.5 441,-72.5 441,-72.5 447,-72.5 453,-78.5 453,-84.5 453,-84.5 453,-121.5 453,-121.5 453,-127.5 447,-133.5 441,-133.5 441,-133.5 290,-133.5 290,-133.5 284,-133.5 278,-127.5 278,-121.5 278,-121.5 278,-84.5 278,-84.5 278,-78.5 284,-72.5 290,-72.5"/>
<text text-anchor="middle" x="365.5" y="-118.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">execute</text>
<polyline fill="none" stroke="#1c2123" points="278,-110.5 453,-110.5 "/>
<text text-anchor="start" x="286" y="-95.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">在async_snapshot的callback</text>
<text text-anchor="start" x="286" y="-80.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 中执行process_by_worker</text>
</g>
<!-- schedule_command&#45;&gt;execute -->
<g id="edge2" class="edge">
<title>schedule_command&#45;&gt;execute</title>
<path fill="none" stroke="#666666" d="M242.03,-103C250.29,-103 258.91,-103 267.6,-103"/>
<polygon fill="#666666" stroke="#666666" points="267.81,-106.5 277.81,-103 267.81,-99.5 267.81,-106.5"/>
</g>
<!-- process_by_worker -->
<g id="node8" class="node">
<title>process_by_worker</title>
<path fill="none" stroke="#1c2123" d="M501,-117C501,-117 636,-117 636,-117 642,-117 648,-123 648,-129 648,-129 648,-151 648,-151 648,-157 642,-163 636,-163 636,-163 501,-163 501,-163 495,-163 489,-157 489,-151 489,-151 489,-129 489,-129 489,-123 495,-117 501,-117"/>
<text text-anchor="middle" x="568.5" y="-147.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">process_by_worker</text>
<polyline fill="none" stroke="#1c2123" points="489,-140 648,-140 "/>
<text text-anchor="start" x="497" y="-124.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">在sched_pool中执行cmd</text>
</g>
<!-- execute&#45;&gt;process_by_worker -->
<g id="edge7" class="edge">
<title>execute&#45;&gt;process_by_worker</title>
<path fill="none" stroke="#666666" d="M453.2,-118.96C461.68,-120.52 470.29,-122.11 478.78,-123.67"/>
<polygon fill="#666666" stroke="#666666" points="478.22,-127.12 488.69,-125.49 479.49,-120.24 478.22,-127.12"/>
</g>
<!-- async_snapshot -->
<g id="node9" class="node">
<title>async_snapshot</title>
<path fill="none" stroke="#1c2123" d="M518,-36.5C518,-36.5 619,-36.5 619,-36.5 625,-36.5 631,-42.5 631,-48.5 631,-48.5 631,-85.5 631,-85.5 631,-91.5 625,-97.5 619,-97.5 619,-97.5 518,-97.5 518,-97.5 512,-97.5 506,-91.5 506,-85.5 506,-85.5 506,-48.5 506,-48.5 506,-42.5 512,-36.5 518,-36.5"/>
<text text-anchor="middle" x="568.5" y="-82.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">async_snapshot</text>
<polyline fill="none" stroke="#1c2123" points="506,-74.5 631,-74.5 "/>
<text text-anchor="start" x="514" y="-59.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">异步的去raft store</text>
<text text-anchor="start" x="514" y="-44.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 获取一个snapshot</text>
</g>
<!-- execute&#45;&gt;async_snapshot -->
<g id="edge8" class="edge">
<title>execute&#45;&gt;async_snapshot</title>
<path fill="none" stroke="#666666" d="M453.2,-87.47C467.48,-84.91 482.14,-82.29 495.99,-79.81"/>
<polygon fill="#666666" stroke="#666666" points="496.69,-83.24 505.92,-78.03 495.46,-76.35 496.69,-83.24"/>
</g>
<!-- on_write_finished -->
<g id="node4" class="node">
<title>on_write_finished</title>
<path fill="none" stroke="#1c2123" d="M1295,-131.5C1295,-131.5 1490,-131.5 1490,-131.5 1496,-131.5 1502,-137.5 1502,-143.5 1502,-143.5 1502,-180.5 1502,-180.5 1502,-186.5 1496,-192.5 1490,-192.5 1490,-192.5 1295,-192.5 1295,-192.5 1289,-192.5 1283,-186.5 1283,-180.5 1283,-180.5 1283,-143.5 1283,-143.5 1283,-137.5 1289,-131.5 1295,-131.5"/>
<text text-anchor="middle" x="1392.5" y="-177.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_write_finished</text>
<polyline fill="none" stroke="#1c2123" points="1283,-169.5 1502,-169.5 "/>
<text text-anchor="start" x="1291" y="-154.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果ProcessResult是NextCommand</text>
<text text-anchor="start" x="1291" y="-139.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 继续调度执行cmd</text>
</g>
<!-- on_write_finished&#45;&gt;schedule_command -->
<g id="edge3" class="edge">
<title>on_write_finished&#45;&gt;schedule_command</title>
<path fill="none" stroke="#666666" d="M1325.24,-192.51C1301.13,-202.18 1273.32,-211.73 1247,-217 1109.44,-244.55 1071.79,-227 931.5,-227 567.5,-227 567.5,-227 567.5,-227 436.17,-227 291.22,-161.44 221.89,-125.66"/>
<polygon fill="#666666" stroke="#666666" points="223.5,-122.55 213.01,-121.03 220.26,-128.76 223.5,-122.55"/>
</g>
<!-- on_read_finished -->
<g id="node5" class="node">
<title>on_read_finished</title>
<path fill="none" stroke="#1c2123" d="M1040,-16.5C1040,-16.5 1235,-16.5 1235,-16.5 1241,-16.5 1247,-22.5 1247,-28.5 1247,-28.5 1247,-65.5 1247,-65.5 1247,-71.5 1241,-77.5 1235,-77.5 1235,-77.5 1040,-77.5 1040,-77.5 1034,-77.5 1028,-71.5 1028,-65.5 1028,-65.5 1028,-28.5 1028,-28.5 1028,-22.5 1034,-16.5 1040,-16.5"/>
<text text-anchor="middle" x="1137.5" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_read_finished</text>
<polyline fill="none" stroke="#1c2123" points="1028,-54.5 1247,-54.5 "/>
<text text-anchor="start" x="1036" y="-39.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果ProcessResult是NextCommand</text>
<text text-anchor="middle" x="1137.5" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 继续调度执行cmd</text>
</g>
<!-- on_read_finished&#45;&gt;schedule_command -->
<g id="edge4" class="edge">
<title>on_read_finished&#45;&gt;schedule_command</title>
<path fill="none" stroke="#666666" d="M1027.74,-30.83C1015.7,-29.37 1003.6,-28.05 992,-27 888.99,-17.68 862.93,-17 759.5,-17 567.5,-17 567.5,-17 567.5,-17 437.22,-17 403.24,-27.1 278,-63 261.54,-67.72 244.09,-74.33 228.57,-80.82"/>
<polygon fill="#666666" stroke="#666666" points="227,-77.69 219.18,-84.83 229.75,-84.12 227,-77.69"/>
</g>
<!-- process_read -->
<g id="node6" class="node">
<title>process_read</title>
<path fill="none" stroke="#1c2123" d="M790,-91C790,-91 727,-91 727,-91 721,-91 715,-85 715,-79 715,-79 715,-67 715,-67 715,-61 721,-55 727,-55 727,-55 790,-55 790,-55 796,-55 802,-61 802,-67 802,-67 802,-79 802,-79 802,-85 796,-91 790,-91"/>
<text text-anchor="middle" x="758.5" y="-69.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">process_read</text>
</g>
<!-- process_read&#45;&gt;on_read_finished -->
<g id="edge5" class="edge">
<title>process_read&#45;&gt;on_read_finished</title>
<path fill="none" stroke="#666666" d="M802.08,-77.8C822.32,-79.84 846.88,-81.99 869,-83 923.61,-85.49 937.74,-89.66 992,-83 1000.48,-81.96 1009.19,-80.59 1017.91,-78.99"/>
<polygon fill="#666666" stroke="#666666" points="1018.6,-82.42 1027.75,-77.09 1017.27,-75.54 1018.6,-82.42"/>
</g>
<!-- cmd_process_read -->
<g id="node10" class="node">
<title>cmd_process_read</title>
<path fill="none" stroke="#1c2123" d="M883,-37C883,-37 978,-37 978,-37 984,-37 990,-43 990,-49 990,-49 990,-61 990,-61 990,-67 984,-73 978,-73 978,-73 883,-73 883,-73 877,-73 871,-67 871,-61 871,-61 871,-49 871,-49 871,-43 877,-37 883,-37"/>
<text text-anchor="middle" x="930.5" y="-51.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cmd::process_read</text>
</g>
<!-- process_read&#45;&gt;cmd_process_read -->
<g id="edge11" class="edge">
<title>process_read&#45;&gt;cmd_process_read</title>
<path fill="none" stroke="#666666" d="M802.4,-68.46C820.07,-66.59 840.99,-64.37 860.71,-62.28"/>
<polygon fill="#666666" stroke="#666666" points="861.31,-65.74 870.88,-61.21 860.57,-58.78 861.31,-65.74"/>
</g>
<!-- process_write -->
<g id="node7" class="node">
<title>process_write</title>
<path fill="none" stroke="#1c2123" d="M696,-109.5C696,-109.5 821,-109.5 821,-109.5 827,-109.5 833,-115.5 833,-121.5 833,-121.5 833,-158.5 833,-158.5 833,-164.5 827,-170.5 821,-170.5 821,-170.5 696,-170.5 696,-170.5 690,-170.5 684,-164.5 684,-158.5 684,-158.5 684,-121.5 684,-121.5 684,-115.5 690,-109.5 696,-109.5"/>
<text text-anchor="middle" x="758.5" y="-155.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">process_write</text>
<polyline fill="none" stroke="#1c2123" points="684,-147.5 833,-147.5 "/>
<text text-anchor="start" x="692" y="-132.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理cmd的WriteResult</text>
<text text-anchor="start" x="692" y="-117.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 写入raft store中</text>
</g>
<!-- process_write&#45;&gt;on_write_finished -->
<g id="edge6" class="edge">
<title>process_write&#45;&gt;on_write_finished</title>
<path fill="none" stroke="#666666" d="M833.24,-123.72C929.29,-105.07 1102.04,-80.35 1247,-107 1270.45,-111.31 1295.02,-119.25 1317.11,-127.78"/>
<polygon fill="#666666" stroke="#666666" points="1315.83,-131.04 1326.41,-131.47 1318.4,-124.53 1315.83,-131.04"/>
</g>
<!-- cmd_process_write -->
<g id="node11" class="node">
<title>cmd_process_write</title>
<path fill="none" stroke="#1c2123" d="M881,-157C881,-157 980,-157 980,-157 986,-157 992,-163 992,-169 992,-169 992,-181 992,-181 992,-187 986,-193 980,-193 980,-193 881,-193 881,-193 875,-193 869,-187 869,-181 869,-181 869,-169 869,-169 869,-163 875,-157 881,-157"/>
<text text-anchor="middle" x="930.5" y="-171.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cmd::process_write</text>
</g>
<!-- process_write&#45;&gt;cmd_process_write -->
<g id="edge12" class="edge">
<title>process_write&#45;&gt;cmd_process_write</title>
<path fill="none" stroke="#666666" d="M833.08,-155.15C841.65,-156.91 850.39,-158.71 858.93,-160.47"/>
<polygon fill="#666666" stroke="#666666" points="858.33,-163.92 868.83,-162.51 859.75,-157.07 858.33,-163.92"/>
</g>
<!-- async_write_ext -->
<g id="node12" class="node">
<title>async_write_ext</title>
<path fill="none" stroke="#1c2123" d="M1048,-116.5C1048,-116.5 1227,-116.5 1227,-116.5 1233,-116.5 1239,-122.5 1239,-128.5 1239,-128.5 1239,-195.5 1239,-195.5 1239,-201.5 1233,-207.5 1227,-207.5 1227,-207.5 1048,-207.5 1048,-207.5 1042,-207.5 1036,-201.5 1036,-195.5 1036,-195.5 1036,-128.5 1036,-128.5 1036,-122.5 1042,-116.5 1048,-116.5"/>
<text text-anchor="middle" x="1137.5" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">async_write_ext</text>
<polyline fill="none" stroke="#1c2123" points="1036,-184.5 1239,-184.5 "/>
<text text-anchor="start" x="1044" y="-169.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将writeresult中要写入的</text>
<text text-anchor="start" x="1044" y="-154.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 数据写入raft store</text>
<text text-anchor="start" x="1044" y="-139.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 写完后回调callback</text>
<text text-anchor="start" x="1044" y="-124.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 在回调中调用on_write_finished</text>
</g>
<!-- process_write&#45;&gt;async_write_ext -->
<g id="edge16" class="edge">
<title>process_write&#45;&gt;async_write_ext</title>
<path fill="none" stroke="#666666" d="M833.12,-141.36C878.88,-142.5 938.9,-144.52 992,-148 1002.99,-148.72 1014.44,-149.6 1025.87,-150.57"/>
<polygon fill="#666666" stroke="#666666" points="1025.63,-154.06 1035.9,-151.44 1026.24,-147.09 1025.63,-154.06"/>
</g>
<!-- process_by_worker&#45;&gt;process_read -->
<g id="edge9" class="edge">
<title>process_by_worker&#45;&gt;process_read</title>
<path fill="none" stroke="#666666" d="M634.2,-116.94C657.42,-108.67 683.3,-99.44 705.32,-91.6"/>
<polygon fill="#666666" stroke="#666666" points="706.58,-94.86 714.83,-88.21 704.23,-88.27 706.58,-94.86"/>
</g>
<!-- process_by_worker&#45;&gt;process_write -->
<g id="edge10" class="edge">
<title>process_by_worker&#45;&gt;process_write</title>
<path fill="none" stroke="#666666" d="M648.14,-140C656.67,-140 665.38,-140 673.97,-140"/>
<polygon fill="#666666" stroke="#666666" points="673.98,-143.5 683.98,-140 673.98,-136.5 673.98,-143.5"/>
</g>
<!-- cmd_process_read&#45;&gt;on_read_finished -->
<g id="edge13" class="edge">
<title>cmd_process_read&#45;&gt;on_read_finished</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M990.24,-52.71C998.93,-52.37 1008.14,-52.01 1017.53,-51.64"/>
<polygon fill="green" stroke="green" points="1017.93,-55.13 1027.79,-51.24 1017.66,-48.14 1017.93,-55.13"/>
</g>
<!-- cmd_process_write&#45;&gt;async_write_ext -->
<g id="edge14" class="edge">
<title>cmd_process_write&#45;&gt;async_write_ext</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M992.17,-171.15C1002.77,-170.48 1014.08,-169.76 1025.53,-169.04"/>
<polygon fill="green" stroke="green" points="1025.86,-172.52 1035.62,-168.4 1025.42,-165.54 1025.86,-172.52"/>
</g>
<!-- async_write_ext&#45;&gt;on_write_finished -->
<g id="edge15" class="edge">
<title>async_write_ext&#45;&gt;on_write_finished</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1239.22,-162C1250.19,-162 1261.43,-162 1272.6,-162"/>
<polygon fill="green" stroke="green" points="1272.82,-165.5 1282.82,-162 1272.82,-158.5 1272.82,-165.5"/>
</g>
</g>
</svg>
