<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: server_transport Pages: 1 -->
<svg width="1841pt" height="354pt"
 viewBox="0.00 0.00 1841.00 354.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 350)">
<title>server_transport</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-350 1837,-350 1837,4 -4,4"/>
<!-- ServerTransport -->
<g id="node1" class="node">
<title>ServerTransport</title>
<path fill="none" stroke="#1c2123" d="M1186,-150C1186,-150 1338,-150 1338,-150 1344,-150 1350,-156 1350,-162 1350,-162 1350,-184 1350,-184 1350,-190 1344,-196 1338,-196 1338,-196 1186,-196 1186,-196 1180,-196 1174,-190 1174,-184 1174,-184 1174,-162 1174,-162 1174,-156 1180,-150 1186,-150"/>
<text text-anchor="middle" x="1262" y="-180.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ServerTransport</text>
<polyline fill="none" stroke="#1c2123" points="1174,-173 1350,-173 "/>
<text text-anchor="start" x="1182" y="-157.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_client: RaftClient&lt;S, T&gt;</text>
</g>
<!-- RaftStoreRouter -->
<g id="node3" class="node">
<title>RaftStoreRouter</title>
<path fill="none" stroke="#1c2123" d="M1564.5,-308C1564.5,-308 1483.5,-308 1483.5,-308 1477.5,-308 1471.5,-302 1471.5,-296 1471.5,-296 1471.5,-284 1471.5,-284 1471.5,-278 1477.5,-272 1483.5,-272 1483.5,-272 1564.5,-272 1564.5,-272 1570.5,-272 1576.5,-278 1576.5,-284 1576.5,-284 1576.5,-296 1576.5,-296 1576.5,-302 1570.5,-308 1564.5,-308"/>
<text text-anchor="middle" x="1524" y="-286.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftStoreRouter</text>
</g>
<!-- ServerTransport&#45;&gt;RaftStoreRouter -->
<g id="edge2" class="edge">
<title>ServerTransport&#45;&gt;RaftStoreRouter</title>
<path fill="none" stroke="#666666" d="M1287.79,-196.28C1311.27,-217.01 1348.44,-246.53 1386,-263 1409.51,-273.3 1437,-279.7 1461.17,-283.67"/>
<polygon fill="#666666" stroke="#666666" points="1460.88,-287.16 1471.3,-285.22 1461.95,-280.24 1460.88,-287.16"/>
</g>
<!-- RaftClient -->
<g id="node4" class="node">
<title>RaftClient</title>
<path fill="none" stroke="#1c2123" d="M1398,-92.5C1398,-92.5 1650,-92.5 1650,-92.5 1656,-92.5 1662,-98.5 1662,-104.5 1662,-104.5 1662,-241.5 1662,-241.5 1662,-247.5 1656,-253.5 1650,-253.5 1650,-253.5 1398,-253.5 1398,-253.5 1392,-253.5 1386,-247.5 1386,-241.5 1386,-241.5 1386,-104.5 1386,-104.5 1386,-98.5 1392,-92.5 1398,-92.5"/>
<text text-anchor="middle" x="1524" y="-238.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftClient</text>
<polyline fill="none" stroke="#1c2123" points="1386,-230.5 1662,-230.5 "/>
<text text-anchor="start" x="1394" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pool: Arc&lt;Mutex&lt;ConnectionPool&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1386,-207.5 1662,-207.5 "/>
<text text-anchor="start" x="1394" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">cache: LruCache&lt;(u64, usize), CachedQueue&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1386,-184.5 1662,-184.5 "/>
<text text-anchor="start" x="1394" y="-169.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">need_flush: Vec&lt;(u64, usize)&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1386,-161.5 1662,-161.5 "/>
<text text-anchor="start" x="1394" y="-146.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">full_stores: Vec&lt;(u64, usize)&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1386,-138.5 1662,-138.5 "/>
<text text-anchor="start" x="1394" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">future_pool: Arc&lt;ThreadPool&lt;TaskCell&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1386,-115.5 1662,-115.5 "/>
<text text-anchor="start" x="1394" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">builder: ConnectionBuilder&lt;S, R&gt;,</text>
</g>
<!-- ServerTransport&#45;&gt;RaftClient -->
<g id="edge3" class="edge">
<title>ServerTransport&#45;&gt;RaftClient</title>
<path fill="none" stroke="#666666" d="M1350.3,-173C1358.57,-173 1367.1,-173 1375.73,-173"/>
<polygon fill="#666666" stroke="#666666" points="1375.91,-176.5 1385.91,-173 1375.91,-169.5 1375.91,-176.5"/>
</g>
<!-- StoreAddrResolver -->
<g id="node5" class="node">
<title>StoreAddrResolver</title>
<path fill="none" stroke="#1c2123" d="M1572.5,-74C1572.5,-74 1475.5,-74 1475.5,-74 1469.5,-74 1463.5,-68 1463.5,-62 1463.5,-62 1463.5,-50 1463.5,-50 1463.5,-44 1469.5,-38 1475.5,-38 1475.5,-38 1572.5,-38 1572.5,-38 1578.5,-38 1584.5,-44 1584.5,-50 1584.5,-50 1584.5,-62 1584.5,-62 1584.5,-68 1578.5,-74 1572.5,-74"/>
<text text-anchor="middle" x="1524" y="-52.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreAddrResolver</text>
</g>
<!-- ServerTransport&#45;&gt;StoreAddrResolver -->
<g id="edge4" class="edge">
<title>ServerTransport&#45;&gt;StoreAddrResolver</title>
<path fill="none" stroke="#666666" d="M1287.79,-149.72C1311.27,-128.99 1348.44,-99.47 1386,-83 1406.99,-73.8 1431.15,-67.71 1453.29,-63.69"/>
<polygon fill="#666666" stroke="#666666" points="1454.03,-67.12 1463.3,-61.99 1452.85,-60.22 1454.03,-67.12"/>
</g>
<!-- Server -->
<g id="node2" class="node">
<title>Server</title>
<path fill="none" stroke="#1c2123" d="M778,-0.5C778,-0.5 1126,-0.5 1126,-0.5 1132,-0.5 1138,-6.5 1138,-12.5 1138,-12.5 1138,-333.5 1138,-333.5 1138,-339.5 1132,-345.5 1126,-345.5 1126,-345.5 778,-345.5 778,-345.5 772,-345.5 766,-339.5 766,-333.5 766,-333.5 766,-12.5 766,-12.5 766,-6.5 772,-0.5 778,-0.5"/>
<text text-anchor="middle" x="952" y="-330.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Server</text>
<polyline fill="none" stroke="#1c2123" points="766,-322.5 1138,-322.5 "/>
<text text-anchor="start" x="774" y="-307.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">env: Arc&lt;Environment&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="766,-299.5 1138,-299.5 "/>
<text text-anchor="start" x="774" y="-284.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">builder_or_server: Option&lt;Either&lt;ServerBuilder, GrpcServer&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="766,-276.5 1138,-276.5 "/>
<text text-anchor="start" x="774" y="-261.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">local_addr: SocketAddr,</text>
<polyline fill="none" stroke="#1c2123" points="766,-253.5 1138,-253.5 "/>
<text text-anchor="start" x="774" y="-238.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">trans: ServerTransport&lt;T, S&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="766,-230.5 1138,-230.5 "/>
<text text-anchor="start" x="774" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_router: T,</text>
<polyline fill="none" stroke="#1c2123" points="766,-207.5 1138,-207.5 "/>
<text text-anchor="start" x="774" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">snap_mgr: SnapManager,</text>
<polyline fill="none" stroke="#1c2123" points="766,-184.5 1138,-184.5 "/>
<text text-anchor="start" x="774" y="-169.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">snap_worker: LazyWorker&lt;SnapTask&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="766,-161.5 1138,-161.5 "/>
<text text-anchor="start" x="774" y="-146.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">stats_pool: Option&lt;Runtime&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="766,-138.5 1138,-138.5 "/>
<text text-anchor="start" x="774" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">grpc_thread_load: Arc&lt;ThreadLoad&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="766,-115.5 1138,-115.5 "/>
<text text-anchor="start" x="774" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">yatp_read_pool: Option&lt;ReadPool&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="766,-92.5 1138,-92.5 "/>
<text text-anchor="start" x="774" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">readpool_normal_thread_load: Arc&lt;ThreadLoad&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="766,-69.5 1138,-69.5 "/>
<text text-anchor="start" x="774" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">debug_thread_pool: Arc&lt;Runtime&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="766,-46.5 1138,-46.5 "/>
<text text-anchor="start" x="774" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">health_service: HealthService,</text>
<polyline fill="none" stroke="#1c2123" points="766,-23.5 1138,-23.5 "/>
<text text-anchor="start" x="774" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">timer: Handle,</text>
</g>
<!-- Server&#45;&gt;ServerTransport -->
<g id="edge1" class="edge">
<title>Server&#45;&gt;ServerTransport</title>
<path fill="none" stroke="#666666" d="M1138.39,-173C1146.98,-173 1155.45,-173 1163.66,-173"/>
<polygon fill="#666666" stroke="#666666" points="1163.92,-176.5 1173.92,-173 1163.92,-169.5 1163.92,-176.5"/>
</g>
<!-- PdStoreAddrResolver -->
<g id="node8" class="node">
<title>PdStoreAddrResolver</title>
<path fill="none" stroke="#1c2123" d="M1821,-74C1821,-74 1710,-74 1710,-74 1704,-74 1698,-68 1698,-62 1698,-62 1698,-50 1698,-50 1698,-44 1704,-38 1710,-38 1710,-38 1821,-38 1821,-38 1827,-38 1833,-44 1833,-50 1833,-50 1833,-62 1833,-62 1833,-68 1827,-74 1821,-74"/>
<text text-anchor="middle" x="1765.5" y="-52.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PdStoreAddrResolver</text>
</g>
<!-- StoreAddrResolver&#45;&gt;PdStoreAddrResolver -->
<g id="edge7" class="edge">
<title>StoreAddrResolver&#45;&gt;PdStoreAddrResolver</title>
<path fill="none" stroke="#666666" d="M1584.51,-56C1615.65,-56 1654.13,-56 1687.51,-56"/>
<polygon fill="#666666" stroke="#666666" points="1687.69,-59.5 1697.69,-56 1687.69,-52.5 1687.69,-59.5"/>
</g>
<!-- TiKVServer -->
<g id="node6" class="node">
<title>TiKVServer</title>
<path fill="none" stroke="#1c2123" d="M12,-115.5C12,-115.5 224,-115.5 224,-115.5 230,-115.5 236,-121.5 236,-127.5 236,-127.5 236,-218.5 236,-218.5 236,-224.5 230,-230.5 224,-230.5 224,-230.5 12,-230.5 12,-230.5 6,-230.5 0,-224.5 0,-218.5 0,-218.5 0,-127.5 0,-127.5 0,-121.5 6,-115.5 12,-115.5"/>
<text text-anchor="middle" x="118" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TiKVServer</text>
<polyline fill="none" stroke="#1c2123" points="0,-207.5 236,-207.5 "/>
<text text-anchor="start" x="8" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolver: resolve::PdStoreAddrResolver,</text>
<polyline fill="none" stroke="#1c2123" points="0,-184.5 236,-184.5 "/>
<text text-anchor="start" x="8" y="-169.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">servers: Option&lt;Servers&lt;ER&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-161.5 236,-161.5 "/>
<text text-anchor="start" x="8" y="-146.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">router: RaftRouter&lt;RocksEngine, ER&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="0,-138.5 236,-138.5 "/>
<text text-anchor="middle" x="118" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">...</text>
</g>
<!-- Servers -->
<g id="node7" class="node">
<title>Servers</title>
<path fill="none" stroke="#1c2123" d="M284,-104C284,-104 718,-104 718,-104 724,-104 730,-110 730,-116 730,-116 730,-230 730,-230 730,-236 724,-242 718,-242 718,-242 284,-242 284,-242 278,-242 272,-236 272,-230 272,-230 272,-116 272,-116 272,-110 278,-104 284,-104"/>
<text text-anchor="middle" x="501" y="-226.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Servers</text>
<polyline fill="none" stroke="#1c2123" points="272,-219 730,-219 "/>
<text text-anchor="start" x="280" y="-203.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">lock_mgr: LockManager,</text>
<polyline fill="none" stroke="#1c2123" points="272,-196 730,-196 "/>
<text text-anchor="start" x="280" y="-180.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">server: Server&lt;RaftRouter&lt;RocksEngine, ER&gt;, resolve::PdStoreAddrResolver&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="272,-173 730,-173 "/>
<text text-anchor="start" x="280" y="-157.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">node: Node&lt;RpcClient, ER&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="272,-150 730,-150 "/>
<text text-anchor="start" x="280" y="-134.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">importer: Arc&lt;SSTImporter&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="272,-127 730,-127 "/>
<text text-anchor="start" x="280" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">cdc_scheduler: tikv_util::worker::Scheduler&lt;cdc::Task&gt;,</text>
</g>
<!-- TiKVServer&#45;&gt;Servers -->
<g id="edge5" class="edge">
<title>TiKVServer&#45;&gt;Servers</title>
<path fill="none" stroke="#666666" d="M236.16,-173C244.41,-173 252.88,-173 261.49,-173"/>
<polygon fill="#666666" stroke="#666666" points="261.66,-176.5 271.66,-173 261.66,-169.5 261.66,-176.5"/>
</g>
<!-- Servers&#45;&gt;Server -->
<g id="edge6" class="edge">
<title>Servers&#45;&gt;Server</title>
<path fill="none" stroke="#666666" d="M730.12,-173C738.6,-173 747.07,-173 755.49,-173"/>
<polygon fill="#666666" stroke="#666666" points="755.72,-176.5 765.72,-173 755.72,-169.5 755.72,-176.5"/>
</g>
</g>
</svg>
