<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: split_proto Pages: 1 -->
<svg width="692pt" height="347pt"
 viewBox="0.00 0.00 692.00 347.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 343)">
<title>split_proto</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-343 688,-343 688,4 -4,4"/>
<!-- SplitRegion -->
<g id="node1" class="node">
<title>SplitRegion</title>
<path fill="none" stroke="#1c2123" d="M301,-66.5C301,-66.5 426,-66.5 426,-66.5 432,-66.5 438,-72.5 438,-78.5 438,-78.5 438,-123.5 438,-123.5 438,-129.5 432,-135.5 426,-135.5 426,-135.5 301,-135.5 301,-135.5 295,-135.5 289,-129.5 289,-123.5 289,-123.5 289,-78.5 289,-78.5 289,-72.5 295,-66.5 301,-66.5"/>
<text text-anchor="middle" x="363.5" y="-120.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SplitRegion</text>
<polyline fill="none" stroke="#1c2123" points="289,-112.5 438,-112.5 "/>
<text text-anchor="start" x="297" y="-97.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CheckPolicy policy = 1;</text>
<polyline fill="none" stroke="#1c2123" points="289,-89.5 438,-89.5 "/>
<text text-anchor="start" x="297" y="-74.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated bytes keys = 2;</text>
</g>
<!-- CheckPolicy -->
<g id="node2" class="node">
<title>CheckPolicy</title>
<path fill="none" stroke="#1c2123" d="M544,-55C544,-55 658,-55 658,-55 664,-55 670,-61 670,-67 670,-67 670,-135 670,-135 670,-141 664,-147 658,-147 658,-147 544,-147 544,-147 538,-147 532,-141 532,-135 532,-135 532,-67 532,-67 532,-61 538,-55 544,-55"/>
<text text-anchor="middle" x="601" y="-131.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">CheckPolicy</text>
<polyline fill="none" stroke="#1c2123" points="532,-124 670,-124 "/>
<text text-anchor="start" x="540" y="-108.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">SCAN = 0;</text>
<polyline fill="none" stroke="#1c2123" points="532,-101 670,-101 "/>
<text text-anchor="start" x="540" y="-85.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">APPROXIMATE = 1;</text>
<polyline fill="none" stroke="#1c2123" points="532,-78 670,-78 "/>
<text text-anchor="start" x="540" y="-62.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">USEKEY = 2;</text>
</g>
<!-- SplitRegion&#45;&gt;CheckPolicy -->
<g id="edge1" class="edge">
<title>SplitRegion&#45;&gt;CheckPolicy</title>
<path fill="none" stroke="#666666" d="M438.04,-101C464.61,-101 494.69,-101 521.65,-101"/>
<polygon fill="#666666" stroke="#666666" points="521.82,-104.5 531.82,-101 521.82,-97.5 521.82,-104.5"/>
</g>
<!-- SplitRequest -->
<g id="node3" class="node">
<title>SplitRequest</title>
<path fill="none" stroke="#1c2123" d="M257,-223.5C257,-223.5 470,-223.5 470,-223.5 476,-223.5 482,-229.5 482,-235.5 482,-235.5 482,-326.5 482,-326.5 482,-332.5 476,-338.5 470,-338.5 470,-338.5 257,-338.5 257,-338.5 251,-338.5 245,-332.5 245,-326.5 245,-326.5 245,-235.5 245,-235.5 245,-229.5 251,-223.5 257,-223.5"/>
<text text-anchor="middle" x="363.5" y="-323.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SplitRequest</text>
<polyline fill="none" stroke="#1c2123" points="245,-315.5 482,-315.5 "/>
<text text-anchor="start" x="253" y="-300.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">bytes split_key = 1;</text>
<polyline fill="none" stroke="#1c2123" points="245,-292.5 482,-292.5 "/>
<text text-anchor="start" x="253" y="-277.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">uint64 new_region_id = 2;</text>
<polyline fill="none" stroke="#1c2123" points="245,-269.5 482,-269.5 "/>
<text text-anchor="start" x="253" y="-254.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated uint64 new_peer_ids = 3;</text>
<polyline fill="none" stroke="#1c2123" points="245,-246.5 482,-246.5 "/>
<text text-anchor="start" x="253" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">bool right_derive = 4 [deprecated=true];</text>
</g>
<!-- right_derive -->
<g id="node5" class="node">
<title>right_derive</title>
<path fill="none" stroke="#1c2123" d="M530,-189C530,-189 672,-189 672,-189 678,-189 684,-195 684,-201 684,-201 684,-253 684,-253 684,-259 678,-265 672,-265 672,-265 530,-265 530,-265 524,-265 518,-259 518,-253 518,-253 518,-201 518,-201 518,-195 524,-189 530,-189"/>
<text text-anchor="middle" x="601" y="-249.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">right_derive</text>
<polyline fill="none" stroke="#1c2123" points="518,-242 684,-242 "/>
<text text-anchor="start" x="526" y="-226.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">If true, the last region</text>
<text text-anchor="start" x="526" y="-211.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> derive the origin region_id</text>
<text text-anchor="start" x="526" y="-196.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> other regions use new ids.</text>
</g>
<!-- SplitRequest&#45;&gt;right_derive -->
<g id="edge4" class="edge">
<title>SplitRequest&#45;&gt;right_derive</title>
<path fill="none" stroke="#666666" d="M482.25,-254C490.93,-252.01 499.61,-250.02 508.1,-248.07"/>
<polygon fill="#666666" stroke="#666666" points="509,-251.46 517.96,-245.81 507.43,-244.63 509,-251.46"/>
</g>
<!-- BatchSplitRequest -->
<g id="node4" class="node">
<title>BatchSplitRequest</title>
<path fill="none" stroke="#1c2123" d="M12,-203.5C12,-203.5 197,-203.5 197,-203.5 203,-203.5 209,-209.5 209,-215.5 209,-215.5 209,-260.5 209,-260.5 209,-266.5 203,-272.5 197,-272.5 197,-272.5 12,-272.5 12,-272.5 6,-272.5 0,-266.5 0,-260.5 0,-260.5 0,-215.5 0,-215.5 0,-209.5 6,-203.5 12,-203.5"/>
<text text-anchor="middle" x="104.5" y="-257.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">BatchSplitRequest</text>
<polyline fill="none" stroke="#1c2123" points="0,-249.5 209,-249.5 "/>
<text text-anchor="start" x="8" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">repeated SplitRequest requests = 1;</text>
<polyline fill="none" stroke="#1c2123" points="0,-226.5 209,-226.5 "/>
<text text-anchor="start" x="8" y="-211.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">bool right_derive = 2;</text>
</g>
<!-- BatchSplitRequest&#45;&gt;SplitRequest -->
<g id="edge2" class="edge">
<title>BatchSplitRequest&#45;&gt;SplitRequest</title>
<path fill="none" stroke="#666666" d="M209.29,-255.37C217.7,-256.77 226.26,-258.2 234.81,-259.64"/>
<polygon fill="#666666" stroke="#666666" points="234.4,-263.12 244.84,-261.31 235.56,-256.21 234.4,-263.12"/>
</g>
<!-- BatchSplitRequest&#45;&gt;right_derive -->
<g id="edge3" class="edge">
<title>BatchSplitRequest&#45;&gt;right_derive</title>
<path fill="none" stroke="#666666" d="M209.23,-218.15C221.25,-216.44 233.37,-214.99 245,-214 349.95,-205.04 376.83,-208.22 482,-214 490.36,-214.46 499.03,-215.1 507.71,-215.85"/>
<polygon fill="#666666" stroke="#666666" points="507.61,-219.36 517.89,-216.78 508.25,-212.39 507.61,-219.36"/>
</g>
<!-- CasualMessage -->
<g id="node6" class="node">
<title>CasualMessage</title>
<path fill="none" stroke="#1c2123" d="M143,-42C143,-42 66,-42 66,-42 60,-42 54,-36 54,-30 54,-30 54,-18 54,-18 54,-12 60,-6 66,-6 66,-6 143,-6 143,-6 149,-6 155,-12 155,-18 155,-18 155,-30 155,-30 155,-36 149,-42 143,-42"/>
<text text-anchor="middle" x="104.5" y="-20.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CasualMessage</text>
</g>
<!-- HalfSplitRegion -->
<g id="node7" class="node">
<title>HalfSplitRegion</title>
<path fill="none" stroke="#1c2123" d="M404,-42C404,-42 323,-42 323,-42 317,-42 311,-36 311,-30 311,-30 311,-18 311,-18 311,-12 317,-6 323,-6 323,-6 404,-6 404,-6 410,-6 416,-12 416,-18 416,-18 416,-30 416,-30 416,-36 410,-42 404,-42"/>
<text text-anchor="middle" x="363.5" y="-20.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">HalfSplitRegion</text>
</g>
<!-- CasualMessage&#45;&gt;HalfSplitRegion -->
<g id="edge5" class="edge">
<title>CasualMessage&#45;&gt;HalfSplitRegion</title>
<path fill="none" stroke="#666666" d="M155.05,-24C196.6,-24 256.11,-24 300.75,-24"/>
<polygon fill="#666666" stroke="#666666" points="300.9,-27.5 310.9,-24 300.9,-20.5 300.9,-27.5"/>
</g>
<!-- HalfSplitRegion&#45;&gt;CheckPolicy -->
<g id="edge6" class="edge">
<title>HalfSplitRegion&#45;&gt;CheckPolicy</title>
<path fill="none" stroke="#666666" d="M416.26,-37.54C436.83,-43.18 460.65,-50.03 482,-57 495.05,-61.26 508.79,-66.07 522.1,-70.91"/>
<polygon fill="#666666" stroke="#666666" points="521.11,-74.28 531.7,-74.44 523.52,-67.71 521.11,-74.28"/>
</g>
<!-- RegionEpoch -->
<g id="node8" class="node">
<title>RegionEpoch</title>
<path fill="none" stroke="#1c2123" d="M634,-36C634,-36 568,-36 568,-36 562,-36 556,-30 556,-24 556,-24 556,-12 556,-12 556,-6 562,0 568,0 568,0 634,0 634,0 640,0 646,-6 646,-12 646,-12 646,-24 646,-24 646,-30 640,-36 634,-36"/>
<text text-anchor="middle" x="601" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RegionEpoch</text>
</g>
<!-- HalfSplitRegion&#45;&gt;RegionEpoch -->
<g id="edge7" class="edge">
<title>HalfSplitRegion&#45;&gt;RegionEpoch</title>
<path fill="none" stroke="#666666" d="M416.18,-22.68C454.59,-21.7 506.86,-20.37 545.84,-19.38"/>
<polygon fill="#666666" stroke="#666666" points="546.05,-22.88 555.96,-19.12 545.87,-15.88 546.05,-22.88"/>
</g>
</g>
</svg>
