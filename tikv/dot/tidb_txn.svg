<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: tikvTxn Pages: 1 -->
<svg width="2486pt" height="616pt"
 viewBox="0.00 0.00 2486.00 616.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 612)">
<title>tikvTxn</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-612 2482,-612 2482,4 -4,4"/>
<g id="clust5" class="cluster">
<title>cluster_LockResolver</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M540,-152C540,-152 2458,-152 2458,-152 2464,-152 2470,-158 2470,-164 2470,-164 2470,-498 2470,-498 2470,-504 2464,-510 2458,-510 2458,-510 540,-510 540,-510 534,-510 528,-504 528,-498 528,-498 528,-164 528,-164 528,-158 534,-152 540,-152"/>
<text text-anchor="middle" x="1499" y="-490" font-family="Times,serif" font-size="20.00">LockResolver</text>
</g>
<!-- tikvTxn -->
<g id="node1" class="node">
<title>tikvTxn</title>
<path fill="none" stroke="#1c2123" d="M147.5,-171C147.5,-171 112.5,-171 112.5,-171 106.5,-171 100.5,-165 100.5,-159 100.5,-159 100.5,-147 100.5,-147 100.5,-141 106.5,-135 112.5,-135 112.5,-135 147.5,-135 147.5,-135 153.5,-135 159.5,-141 159.5,-147 159.5,-147 159.5,-159 159.5,-159 159.5,-165 153.5,-171 147.5,-171"/>
<text text-anchor="middle" x="130" y="-149.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tikvTxn</text>
</g>
<!-- tikvSnapshot -->
<g id="node2" class="node">
<title>tikvSnapshot</title>
<path fill="none" stroke="#1c2123" d="M429.5,-144C429.5,-144 366.5,-144 366.5,-144 360.5,-144 354.5,-138 354.5,-132 354.5,-132 354.5,-120 354.5,-120 354.5,-114 360.5,-108 366.5,-108 366.5,-108 429.5,-108 429.5,-108 435.5,-108 441.5,-114 441.5,-120 441.5,-120 441.5,-132 441.5,-132 441.5,-138 435.5,-144 429.5,-144"/>
<text text-anchor="middle" x="398" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tikvSnapshot</text>
</g>
<!-- tikvTxn&#45;&gt;tikvSnapshot -->
<g id="edge1" class="edge">
<title>tikvTxn&#45;&gt;tikvSnapshot</title>
<path fill="none" stroke="#666666" d="M159.72,-150.08C203.86,-145.6 289.06,-136.96 344.44,-131.33"/>
<polygon fill="#666666" stroke="#666666" points="344.83,-134.81 354.42,-130.32 344.12,-127.85 344.83,-134.81"/>
</g>
<!-- twoPhaseCommitter -->
<g id="node3" class="node">
<title>twoPhaseCommitter</title>
<path fill="none" stroke="#1c2123" d="M450,-90C450,-90 346,-90 346,-90 340,-90 334,-84 334,-78 334,-78 334,-66 334,-66 334,-60 340,-54 346,-54 346,-54 450,-54 450,-54 456,-54 462,-60 462,-66 462,-66 462,-78 462,-78 462,-84 456,-90 450,-90"/>
<text text-anchor="middle" x="398" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitter</text>
</g>
<!-- tikvTxn&#45;&gt;twoPhaseCommitter -->
<g id="edge2" class="edge">
<title>tikvTxn&#45;&gt;twoPhaseCommitter</title>
<path fill="none" stroke="#666666" d="M159.76,-143.05C192.57,-131.83 247.89,-113.29 296,-99 305.04,-96.31 314.57,-93.61 324.02,-91"/>
<polygon fill="#666666" stroke="#666666" points="325.09,-94.33 333.81,-88.32 323.24,-87.58 325.09,-94.33"/>
</g>
<!-- UnionStore -->
<g id="node4" class="node">
<title>UnionStore</title>
<path fill="none" stroke="#1c2123" d="M425.5,-252C425.5,-252 370.5,-252 370.5,-252 364.5,-252 358.5,-246 358.5,-240 358.5,-240 358.5,-228 358.5,-228 358.5,-222 364.5,-216 370.5,-216 370.5,-216 425.5,-216 425.5,-216 431.5,-216 437.5,-222 437.5,-228 437.5,-228 437.5,-240 437.5,-240 437.5,-246 431.5,-252 425.5,-252"/>
<text text-anchor="middle" x="398" y="-230.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">UnionStore</text>
</g>
<!-- tikvTxn&#45;&gt;UnionStore -->
<g id="edge3" class="edge">
<title>tikvTxn&#45;&gt;UnionStore</title>
<path fill="none" stroke="#666666" d="M159.76,-162.95C192.57,-174.17 247.89,-192.71 296,-207 313,-212.05 331.74,-217.18 348.41,-221.59"/>
<polygon fill="#666666" stroke="#666666" points="347.93,-225.08 358.49,-224.24 349.71,-218.31 347.93,-225.08"/>
</g>
<!-- commitCallback -->
<g id="node5" class="node">
<title>commitCallback</title>
<path fill="none" stroke="#1c2123" d="M439.5,-198C439.5,-198 356.5,-198 356.5,-198 350.5,-198 344.5,-192 344.5,-186 344.5,-186 344.5,-174 344.5,-174 344.5,-168 350.5,-162 356.5,-162 356.5,-162 439.5,-162 439.5,-162 445.5,-162 451.5,-168 451.5,-174 451.5,-174 451.5,-186 451.5,-186 451.5,-192 445.5,-198 439.5,-198"/>
<text text-anchor="middle" x="398" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">commitCallback</text>
</g>
<!-- tikvTxn&#45;&gt;commitCallback -->
<g id="edge4" class="edge">
<title>tikvTxn&#45;&gt;commitCallback</title>
<path fill="none" stroke="#666666" d="M159.72,-155.92C201.26,-160.13 279.19,-168.04 334.39,-173.64"/>
<polygon fill="#666666" stroke="#666666" points="334.11,-177.13 344.42,-174.66 334.82,-170.17 334.11,-177.13"/>
</g>
<!-- memBufferMutations -->
<g id="node6" class="node">
<title>memBufferMutations</title>
<path fill="none" stroke="#1c2123" d="M673,-144C673,-144 561,-144 561,-144 555,-144 549,-138 549,-132 549,-132 549,-120 549,-120 549,-114 555,-108 561,-108 561,-108 673,-108 673,-108 679,-108 685,-114 685,-120 685,-120 685,-132 685,-132 685,-138 679,-144 673,-144"/>
<text text-anchor="middle" x="617" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">memBufferMutations</text>
</g>
<!-- twoPhaseCommitter&#45;&gt;memBufferMutations -->
<g id="edge5" class="edge">
<title>twoPhaseCommitter&#45;&gt;memBufferMutations</title>
<path fill="none" stroke="#666666" d="M462.06,-87.69C486.03,-93.66 513.61,-100.52 538.75,-106.78"/>
<polygon fill="#666666" stroke="#666666" points="538.07,-110.21 548.62,-109.23 539.76,-103.42 538.07,-110.21"/>
</g>
<!-- primaryKey -->
<g id="node7" class="node">
<title>primaryKey</title>
<path fill="none" stroke="#1c2123" d="M646.5,-90C646.5,-90 587.5,-90 587.5,-90 581.5,-90 575.5,-84 575.5,-78 575.5,-78 575.5,-66 575.5,-66 575.5,-60 581.5,-54 587.5,-54 587.5,-54 646.5,-54 646.5,-54 652.5,-54 658.5,-60 658.5,-66 658.5,-66 658.5,-78 658.5,-78 658.5,-84 652.5,-90 646.5,-90"/>
<text text-anchor="middle" x="617" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">primaryKey</text>
</g>
<!-- twoPhaseCommitter&#45;&gt;primaryKey -->
<g id="edge6" class="edge">
<title>twoPhaseCommitter&#45;&gt;primaryKey</title>
<path fill="none" stroke="#666666" d="M462.06,-72C494.89,-72 534.49,-72 565.31,-72"/>
<polygon fill="#666666" stroke="#666666" points="565.4,-75.5 575.4,-72 565.4,-68.5 565.4,-75.5"/>
</g>
<!-- ttlManager -->
<g id="node8" class="node">
<title>ttlManager</title>
<path fill="none" stroke="#1c2123" d="M643.5,-36C643.5,-36 590.5,-36 590.5,-36 584.5,-36 578.5,-30 578.5,-24 578.5,-24 578.5,-12 578.5,-12 578.5,-6 584.5,0 590.5,0 590.5,0 643.5,0 643.5,0 649.5,0 655.5,-6 655.5,-12 655.5,-12 655.5,-24 655.5,-24 655.5,-30 649.5,-36 643.5,-36"/>
<text text-anchor="middle" x="617" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ttlManager</text>
</g>
<!-- twoPhaseCommitter&#45;&gt;ttlManager -->
<g id="edge7" class="edge">
<title>twoPhaseCommitter&#45;&gt;ttlManager</title>
<path fill="none" stroke="#666666" d="M462.06,-56.31C496.04,-47.85 537.29,-37.59 568.54,-29.81"/>
<polygon fill="#666666" stroke="#666666" points="569.45,-33.19 578.31,-27.38 567.76,-26.4 569.45,-33.19"/>
</g>
<!-- asyncSecondaries -->
<g id="node9" class="node">
<title>asyncSecondaries</title>
<path fill="none" stroke="#1c2123" d="M174.5,-246C174.5,-246 85.5,-246 85.5,-246 79.5,-246 73.5,-240 73.5,-234 73.5,-234 73.5,-222 73.5,-222 73.5,-216 79.5,-210 85.5,-210 85.5,-210 174.5,-210 174.5,-210 180.5,-210 186.5,-216 186.5,-222 186.5,-222 186.5,-234 186.5,-234 186.5,-240 180.5,-246 174.5,-246"/>
<text text-anchor="middle" x="130" y="-224.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">asyncSecondaries</text>
</g>
<!-- txnLockTTL -->
<g id="node10" class="node">
<title>txnLockTTL</title>
<path fill="none" stroke="#1c2123" d="M161,-383C161,-383 99,-383 99,-383 93,-383 87,-377 87,-371 87,-371 87,-359 87,-359 87,-353 93,-347 99,-347 99,-347 161,-347 161,-347 167,-347 173,-353 173,-359 173,-359 173,-371 173,-371 173,-377 167,-383 161,-383"/>
<text text-anchor="middle" x="130" y="-361.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">txnLockTTL</text>
</g>
<!-- twoPhaseCommitAction -->
<g id="node11" class="node">
<title>twoPhaseCommitAction</title>
<path fill="none" stroke="#1c2123" d="M193.5,-479C193.5,-479 66.5,-479 66.5,-479 60.5,-479 54.5,-473 54.5,-467 54.5,-467 54.5,-455 54.5,-455 54.5,-449 60.5,-443 66.5,-443 66.5,-443 193.5,-443 193.5,-443 199.5,-443 205.5,-449 205.5,-455 205.5,-455 205.5,-467 205.5,-467 205.5,-473 199.5,-479 193.5,-479"/>
<text text-anchor="middle" x="130" y="-457.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitAction</text>
</g>
<!-- twoPhaseCommitAction_handleSingleBatch -->
<g id="node12" class="node">
<title>twoPhaseCommitAction_handleSingleBatch</title>
<path fill="none" stroke="#1c2123" d="M248,-554C248,-554 12,-554 12,-554 6,-554 0,-548 0,-542 0,-542 0,-530 0,-530 0,-524 6,-518 12,-518 12,-518 248,-518 248,-518 254,-518 260,-524 260,-530 260,-530 260,-542 260,-542 260,-548 254,-554 248,-554"/>
<text text-anchor="middle" x="130" y="-532.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">twoPhaseCommitAction_handleSingleBatch</text>
</g>
<!-- actionPrewrite_handleSingleBatch -->
<g id="node13" class="node">
<title>actionPrewrite_handleSingleBatch</title>
<path fill="none" stroke="#1c2123" d="M488,-554C488,-554 308,-554 308,-554 302,-554 296,-548 296,-542 296,-542 296,-530 296,-530 296,-524 302,-518 308,-518 308,-518 488,-518 488,-518 494,-518 500,-524 500,-530 500,-530 500,-542 500,-542 500,-548 494,-554 488,-554"/>
<text text-anchor="middle" x="398" y="-532.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">actionPrewrite_handleSingleBatch</text>
</g>
<!-- twoPhaseCommitAction_handleSingleBatch&#45;&gt;actionPrewrite_handleSingleBatch -->
<g id="edge8" class="edge">
<title>twoPhaseCommitAction_handleSingleBatch&#45;&gt;actionPrewrite_handleSingleBatch</title>
<path fill="none" stroke="#666666" d="M260.1,-536C268.67,-536 277.25,-536 285.72,-536"/>
<polygon fill="#666666" stroke="#666666" points="285.97,-539.5 295.97,-536 285.97,-532.5 285.97,-539.5"/>
</g>
<!-- buildPrewriteRequest -->
<g id="node14" class="node">
<title>buildPrewriteRequest</title>
<path fill="none" stroke="#1c2123" d="M672,-608C672,-608 562,-608 562,-608 556,-608 550,-602 550,-596 550,-596 550,-584 550,-584 550,-578 556,-572 562,-572 562,-572 672,-572 672,-572 678,-572 684,-578 684,-584 684,-584 684,-596 684,-596 684,-602 678,-608 672,-608"/>
<text text-anchor="middle" x="617" y="-586.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">buildPrewriteRequest</text>
</g>
<!-- actionPrewrite_handleSingleBatch&#45;&gt;buildPrewriteRequest -->
<g id="edge9" class="edge">
<title>actionPrewrite_handleSingleBatch&#45;&gt;buildPrewriteRequest</title>
<path fill="none" stroke="#666666" d="M471.56,-554.06C493.56,-559.53 517.79,-565.56 540.01,-571.09"/>
<polygon fill="#666666" stroke="#666666" points="539.18,-574.49 549.73,-573.51 540.87,-567.7 539.18,-574.49"/>
</g>
<!-- SendReq -->
<g id="node15" class="node">
<title>SendReq</title>
<path fill="none" stroke="#1c2123" d="M637.5,-554C637.5,-554 596.5,-554 596.5,-554 590.5,-554 584.5,-548 584.5,-542 584.5,-542 584.5,-530 584.5,-530 584.5,-524 590.5,-518 596.5,-518 596.5,-518 637.5,-518 637.5,-518 643.5,-518 649.5,-524 649.5,-530 649.5,-530 649.5,-542 649.5,-542 649.5,-548 643.5,-554 637.5,-554"/>
<text text-anchor="middle" x="617" y="-532.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SendReq</text>
</g>
<!-- actionPrewrite_handleSingleBatch&#45;&gt;SendReq -->
<g id="edge10" class="edge">
<title>actionPrewrite_handleSingleBatch&#45;&gt;SendReq</title>
<path fill="none" stroke="#666666" d="M500.19,-536C526.28,-536 552.94,-536 574.09,-536"/>
<polygon fill="#666666" stroke="#666666" points="574.31,-539.5 584.31,-536 574.31,-532.5 574.31,-539.5"/>
</g>
<!-- resolveLocksForWrite -->
<g id="node16" class="node">
<title>resolveLocksForWrite</title>
<path fill="none" stroke="#1c2123" d="M548,-391C548,-391 686,-391 686,-391 692,-391 698,-397 698,-403 698,-403 698,-455 698,-455 698,-461 692,-467 686,-467 686,-467 548,-467 548,-467 542,-467 536,-461 536,-455 536,-455 536,-403 536,-403 536,-397 542,-391 548,-391"/>
<text text-anchor="middle" x="617" y="-451.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolveLocksForWrite</text>
<polyline fill="none" stroke="#1c2123" points="536,-444 698,-444 "/>
<text text-anchor="start" x="544" y="-428.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">prewrite返回write conflict</text>
<text text-anchor="start" x="544" y="-413.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 返回了conflict的locks</text>
<text text-anchor="start" x="544" y="-398.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 尝试resolve这些locks</text>
</g>
<!-- actionPrewrite_handleSingleBatch&#45;&gt;resolveLocksForWrite -->
<g id="edge11" class="edge">
<title>actionPrewrite_handleSingleBatch&#45;&gt;resolveLocksForWrite</title>
<path fill="none" stroke="#666666" d="M435.81,-517.85C461.56,-505.15 497.07,-487.64 529.76,-471.52"/>
<polygon fill="#666666" stroke="#666666" points="531.47,-474.58 538.89,-467.02 528.38,-468.3 531.47,-474.58"/>
</g>
<!-- resolveLocks -->
<g id="node17" class="node">
<title>resolveLocks</title>
<path fill="none" stroke="#1c2123" d="M746,-380.5C746,-380.5 880,-380.5 880,-380.5 886,-380.5 892,-386.5 892,-392.5 892,-392.5 892,-459.5 892,-459.5 892,-465.5 886,-471.5 880,-471.5 880,-471.5 746,-471.5 746,-471.5 740,-471.5 734,-465.5 734,-459.5 734,-459.5 734,-392.5 734,-392.5 734,-386.5 740,-380.5 746,-380.5"/>
<text text-anchor="middle" x="813" y="-456.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolveLocks</text>
<polyline fill="none" stroke="#1c2123" points="734,-448.5 892,-448.5 "/>
<text text-anchor="start" x="742" y="-433.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">1.获取txnStatus</text>
<text text-anchor="start" x="742" y="-418.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 2.如果status.ttl == 0 </text>
<text text-anchor="start" x="742" y="-403.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 根据lock type调用</text>
<text text-anchor="start" x="742" y="-388.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 不同的resolveLock方法</text>
</g>
<!-- resolveLocksForWrite&#45;&gt;resolveLocks -->
<g id="edge12" class="edge">
<title>resolveLocksForWrite&#45;&gt;resolveLocks</title>
<path fill="none" stroke="#666666" d="M698.03,-427.76C706.41,-427.63 714.97,-427.5 723.44,-427.37"/>
<polygon fill="#666666" stroke="#666666" points="723.77,-430.86 733.72,-427.21 723.67,-423.87 723.77,-430.86"/>
</g>
<!-- getTxnStatusFromLock -->
<g id="node18" class="node">
<title>getTxnStatusFromLock</title>
<path fill="none" stroke="#1c2123" d="M1062,-338C1062,-338 940,-338 940,-338 934,-338 928,-332 928,-326 928,-326 928,-314 928,-314 928,-308 934,-302 940,-302 940,-302 1062,-302 1062,-302 1068,-302 1074,-308 1074,-314 1074,-314 1074,-326 1074,-326 1074,-332 1068,-338 1062,-338"/>
<text text-anchor="middle" x="1001" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">getTxnStatusFromLock</text>
</g>
<!-- resolveLocks&#45;&gt;getTxnStatusFromLock -->
<g id="edge13" class="edge">
<title>resolveLocks&#45;&gt;getTxnStatusFromLock</title>
<path fill="none" stroke="#666666" d="M892.07,-381.51C915.18,-368.34 939.54,-354.45 959.27,-343.21"/>
<polygon fill="#666666" stroke="#666666" points="961.03,-346.24 967.98,-338.25 957.56,-340.16 961.03,-346.24"/>
</g>
<!-- resolvePessimisticLock -->
<g id="node19" class="node">
<title>resolvePessimisticLock</title>
<path fill="none" stroke="#1c2123" d="M1061.5,-432C1061.5,-432 940.5,-432 940.5,-432 934.5,-432 928.5,-426 928.5,-420 928.5,-420 928.5,-408 928.5,-408 928.5,-402 934.5,-396 940.5,-396 940.5,-396 1061.5,-396 1061.5,-396 1067.5,-396 1073.5,-402 1073.5,-408 1073.5,-408 1073.5,-420 1073.5,-420 1073.5,-426 1067.5,-432 1061.5,-432"/>
<text text-anchor="middle" x="1001" y="-410.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolvePessimisticLock</text>
</g>
<!-- resolveLocks&#45;&gt;resolvePessimisticLock -->
<g id="edge14" class="edge">
<title>resolveLocks&#45;&gt;resolvePessimisticLock</title>
<path fill="none" stroke="#666666" d="M892.07,-420.96C900.72,-420.41 909.54,-419.84 918.23,-419.28"/>
<polygon fill="#666666" stroke="#666666" points="918.6,-422.76 928.35,-418.62 918.15,-415.77 918.6,-422.76"/>
</g>
<!-- resolveLock -->
<g id="node20" class="node">
<title>resolveLock</title>
<path fill="none" stroke="#1c2123" d="M1680,-452C1680,-452 1621,-452 1621,-452 1615,-452 1609,-446 1609,-440 1609,-440 1609,-428 1609,-428 1609,-422 1615,-416 1621,-416 1621,-416 1680,-416 1680,-416 1686,-416 1692,-422 1692,-428 1692,-428 1692,-440 1692,-440 1692,-446 1686,-452 1680,-452"/>
<text text-anchor="middle" x="1650.5" y="-430.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolveLock</text>
</g>
<!-- resolveLocks&#45;&gt;resolveLock -->
<g id="edge15" class="edge">
<title>resolveLocks&#45;&gt;resolveLock</title>
<path fill="none" stroke="#666666" d="M892,-448.57C903.97,-451.24 916.25,-453.53 928,-455 1177.85,-486.28 1479.98,-455.52 1598.4,-440.84"/>
<polygon fill="#666666" stroke="#666666" points="1599.12,-444.27 1608.61,-439.56 1598.25,-437.33 1599.12,-444.27"/>
</g>
<!-- resolveLockAsync -->
<g id="node21" class="node">
<title>resolveLockAsync</title>
<path fill="none" stroke="#1c2123" d="M1493,-400C1493,-400 1399,-400 1399,-400 1393,-400 1387,-394 1387,-388 1387,-388 1387,-376 1387,-376 1387,-370 1393,-364 1399,-364 1399,-364 1493,-364 1493,-364 1499,-364 1505,-370 1505,-376 1505,-376 1505,-388 1505,-388 1505,-394 1499,-400 1493,-400"/>
<text text-anchor="middle" x="1446" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolveLockAsync</text>
</g>
<!-- resolveLocks&#45;&gt;resolveLockAsync -->
<g id="edge16" class="edge">
<title>resolveLocks&#45;&gt;resolveLockAsync</title>
<path fill="none" stroke="#666666" d="M892.23,-439.39C990.27,-453.67 1162.92,-470.51 1307,-441 1341.14,-434.01 1377.27,-418.22 1403.99,-404.74"/>
<polygon fill="#666666" stroke="#666666" points="1405.75,-407.77 1413.04,-400.08 1402.54,-401.55 1405.75,-407.77"/>
</g>
<!-- TxnStatus -->
<g id="node22" class="node">
<title>TxnStatus</title>
<path fill="none" stroke="#1c2123" d="M1122,-262.5C1122,-262.5 1295,-262.5 1295,-262.5 1301,-262.5 1307,-268.5 1307,-274.5 1307,-274.5 1307,-365.5 1307,-365.5 1307,-371.5 1301,-377.5 1295,-377.5 1295,-377.5 1122,-377.5 1122,-377.5 1116,-377.5 1110,-371.5 1110,-365.5 1110,-365.5 1110,-274.5 1110,-274.5 1110,-268.5 1116,-262.5 1122,-262.5"/>
<text text-anchor="middle" x="1208.5" y="-362.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TxnStatus</text>
<polyline fill="none" stroke="#1c2123" points="1110,-354.5 1307,-354.5 "/>
<text text-anchor="start" x="1118" y="-339.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ttl uint64</text>
<polyline fill="none" stroke="#1c2123" points="1110,-331.5 1307,-331.5 "/>
<text text-anchor="start" x="1118" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">commitTS uint64</text>
<polyline fill="none" stroke="#1c2123" points="1110,-308.5 1307,-308.5 "/>
<text text-anchor="start" x="1118" y="-293.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">action kvrpcpb.Action</text>
<polyline fill="none" stroke="#1c2123" points="1110,-285.5 1307,-285.5 "/>
<text text-anchor="start" x="1118" y="-270.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">primaryLock *kvrpcpb.LockInfo</text>
</g>
<!-- getTxnStatusFromLock&#45;&gt;TxnStatus -->
<g id="edge19" class="edge">
<title>getTxnStatusFromLock&#45;&gt;TxnStatus</title>
<path fill="none" stroke="#666666" d="M1074.16,-320C1082.47,-320 1091.08,-320 1099.73,-320"/>
<polygon fill="#666666" stroke="#666666" points="1099.9,-323.5 1109.9,-320 1099.9,-316.5 1099.9,-323.5"/>
</g>
<!-- getTxnStatus -->
<g id="node25" class="node">
<title>getTxnStatus</title>
<path fill="none" stroke="#1c2123" d="M1240.5,-244C1240.5,-244 1176.5,-244 1176.5,-244 1170.5,-244 1164.5,-238 1164.5,-232 1164.5,-232 1164.5,-220 1164.5,-220 1164.5,-214 1170.5,-208 1176.5,-208 1176.5,-208 1240.5,-208 1240.5,-208 1246.5,-208 1252.5,-214 1252.5,-220 1252.5,-220 1252.5,-232 1252.5,-232 1252.5,-238 1246.5,-244 1240.5,-244"/>
<text text-anchor="middle" x="1208.5" y="-222.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">getTxnStatus</text>
</g>
<!-- getTxnStatusFromLock&#45;&gt;getTxnStatus -->
<g id="edge20" class="edge">
<title>getTxnStatusFromLock&#45;&gt;getTxnStatus</title>
<path fill="none" stroke="#666666" d="M1026.62,-301.88C1047.81,-287 1079.68,-266.28 1110,-253 1123.99,-246.88 1139.72,-241.8 1154.4,-237.76"/>
<polygon fill="#666666" stroke="#666666" points="1155.58,-241.07 1164.36,-235.13 1153.79,-234.3 1155.58,-241.07"/>
</g>
<!-- CmdPessimisticRollback -->
<g id="node24" class="node">
<title>CmdPessimisticRollback</title>
<path fill="none" stroke="#1c2123" d="M1273.5,-432C1273.5,-432 1143.5,-432 1143.5,-432 1137.5,-432 1131.5,-426 1131.5,-420 1131.5,-420 1131.5,-408 1131.5,-408 1131.5,-402 1137.5,-396 1143.5,-396 1143.5,-396 1273.5,-396 1273.5,-396 1279.5,-396 1285.5,-402 1285.5,-408 1285.5,-408 1285.5,-420 1285.5,-420 1285.5,-426 1279.5,-432 1273.5,-432"/>
<text text-anchor="middle" x="1208.5" y="-410.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdPessimisticRollback</text>
</g>
<!-- resolvePessimisticLock&#45;&gt;CmdPessimisticRollback -->
<g id="edge18" class="edge">
<title>resolvePessimisticLock&#45;&gt;CmdPessimisticRollback</title>
<path fill="none" stroke="#666666" d="M1073.59,-414C1088.88,-414 1105.2,-414 1120.99,-414"/>
<polygon fill="#666666" stroke="#666666" points="1121.28,-417.5 1131.28,-414 1121.28,-410.5 1121.28,-417.5"/>
</g>
<!-- CmdResolveLock -->
<g id="node23" class="node">
<title>CmdResolveLock</title>
<path fill="none" stroke="#1c2123" d="M1769.5,-365C1769.5,-365 1971.5,-365 1971.5,-365 1977.5,-365 1983.5,-371 1983.5,-377 1983.5,-377 1983.5,-459 1983.5,-459 1983.5,-465 1977.5,-471 1971.5,-471 1971.5,-471 1769.5,-471 1769.5,-471 1763.5,-471 1757.5,-465 1757.5,-459 1757.5,-459 1757.5,-377 1757.5,-377 1757.5,-371 1763.5,-365 1769.5,-365"/>
<text text-anchor="middle" x="1870.5" y="-455.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdResolveLock</text>
<polyline fill="none" stroke="#1c2123" points="1757.5,-448 1983.5,-448 "/>
<text text-anchor="start" x="1765.5" y="-432.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Tikv: 根据txn status</text>
<text text-anchor="start" x="1765.5" y="-417.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> resolve lock</text>
<text text-anchor="start" x="1765.5" y="-402.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> commit或者cleanup</text>
<text text-anchor="start" x="1765.5" y="-387.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 这里的commit对应的就是</text>
<text text-anchor="start" x="1765.5" y="-372.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> percolator论文里面的roll forward吧</text>
</g>
<!-- resolveLock&#45;&gt;CmdResolveLock -->
<g id="edge17" class="edge">
<title>resolveLock&#45;&gt;CmdResolveLock</title>
<path fill="none" stroke="#666666" d="M1692.25,-425.61C1708.17,-423.71 1727.34,-421.86 1747.1,-420.28"/>
<polygon fill="#666666" stroke="#666666" points="1747.46,-423.76 1757.16,-419.5 1746.92,-416.78 1747.46,-423.76"/>
</g>
<!-- resolveLock&#45;&gt;CmdResolveLock -->
<g id="edge32" class="edge">
<title>resolveLock&#45;&gt;CmdResolveLock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1692.25,-436.41C1708.17,-435.98 1727.34,-435 1747.1,-433.69"/>
<polygon fill="green" stroke="green" points="1747.42,-437.17 1757.16,-432.99 1746.94,-430.19 1747.42,-437.17"/>
</g>
<!-- checkAllSecondaries -->
<g id="node28" class="node">
<title>checkAllSecondaries</title>
<path fill="none" stroke="#1c2123" d="M1704,-342C1704,-342 1597,-342 1597,-342 1591,-342 1585,-336 1585,-330 1585,-330 1585,-318 1585,-318 1585,-312 1591,-306 1597,-306 1597,-306 1704,-306 1704,-306 1710,-306 1716,-312 1716,-318 1716,-318 1716,-330 1716,-330 1716,-336 1710,-342 1704,-342"/>
<text text-anchor="middle" x="1650.5" y="-320.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">checkAllSecondaries</text>
</g>
<!-- resolveLockAsync&#45;&gt;checkAllSecondaries -->
<g id="edge23" class="edge">
<title>resolveLockAsync&#45;&gt;checkAllSecondaries</title>
<path fill="none" stroke="#666666" d="M1505.03,-365.38C1527.32,-358.99 1553.06,-351.62 1576.57,-344.89"/>
<polygon fill="#666666" stroke="#666666" points="1577.85,-348.16 1586.5,-342.04 1575.92,-341.43 1577.85,-348.16"/>
</g>
<!-- resolveRegionLocks -->
<g id="node29" class="node">
<title>resolveRegionLocks</title>
<path fill="none" stroke="#1c2123" d="M1702.5,-398C1702.5,-398 1598.5,-398 1598.5,-398 1592.5,-398 1586.5,-392 1586.5,-386 1586.5,-386 1586.5,-374 1586.5,-374 1586.5,-368 1592.5,-362 1598.5,-362 1598.5,-362 1702.5,-362 1702.5,-362 1708.5,-362 1714.5,-368 1714.5,-374 1714.5,-374 1714.5,-386 1714.5,-386 1714.5,-392 1708.5,-398 1702.5,-398"/>
<text text-anchor="middle" x="1650.5" y="-376.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolveRegionLocks</text>
</g>
<!-- resolveLockAsync&#45;&gt;resolveRegionLocks -->
<g id="edge24" class="edge">
<title>resolveLockAsync&#45;&gt;resolveRegionLocks</title>
<path fill="none" stroke="#666666" d="M1505.03,-381.43C1527.12,-381.21 1552.59,-380.96 1575.94,-380.73"/>
<polygon fill="#666666" stroke="#666666" points="1576.18,-384.22 1586.14,-380.63 1576.11,-377.22 1576.18,-384.22"/>
</g>
<!-- TxnStatus&#45;&gt;resolveLock -->
<g id="edge31" class="edge">
<title>TxnStatus&#45;&gt;resolveLock</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1294.14,-377.59C1318.62,-394.03 1339.71,-407.86 1343,-409 1429.04,-438.92 1536.55,-440.06 1598.68,-437.5"/>
<polygon fill="green" stroke="green" points="1599.17,-440.98 1609,-437.02 1598.85,-433.99 1599.17,-440.98"/>
</g>
<!-- TxnStatus&#45;&gt;resolveLockAsync -->
<g id="edge33" class="edge">
<title>TxnStatus&#45;&gt;resolveLockAsync</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1307.33,-345.75C1330.78,-351.93 1355.32,-358.39 1377.07,-364.12"/>
<polygon fill="green" stroke="green" points="1376.3,-367.53 1386.86,-366.69 1378.08,-360.76 1376.3,-367.53"/>
</g>
<!-- TxnStatus&#45;&gt;checkAllSecondaries -->
<g id="edge34" class="edge">
<title>TxnStatus&#45;&gt;checkAllSecondaries</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1307.15,-328.16C1319.22,-328.92 1331.39,-329.57 1343,-330 1434.49,-333.42 1457.49,-332.73 1549,-330 1557.35,-329.75 1566.09,-329.39 1574.77,-328.96"/>
<polygon fill="green" stroke="green" points="1575.12,-332.44 1584.92,-328.43 1574.75,-325.45 1575.12,-332.44"/>
</g>
<!-- LockInfo -->
<g id="node33" class="node">
<title>LockInfo</title>
<path fill="none" stroke="#1c2123" d="M1598.5,-168.5C1598.5,-168.5 1702.5,-168.5 1702.5,-168.5 1708.5,-168.5 1714.5,-174.5 1714.5,-180.5 1714.5,-180.5 1714.5,-271.5 1714.5,-271.5 1714.5,-277.5 1708.5,-283.5 1702.5,-283.5 1702.5,-283.5 1598.5,-283.5 1598.5,-283.5 1592.5,-283.5 1586.5,-277.5 1586.5,-271.5 1586.5,-271.5 1586.5,-180.5 1586.5,-180.5 1586.5,-174.5 1592.5,-168.5 1598.5,-168.5"/>
<text text-anchor="middle" x="1650.5" y="-268.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockInfo</text>
<polyline fill="none" stroke="#1c2123" points="1586.5,-260.5 1714.5,-260.5 "/>
<text text-anchor="start" x="1594.5" y="-245.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PrimaryLock []byte </text>
<polyline fill="none" stroke="#1c2123" points="1586.5,-237.5 1714.5,-237.5 "/>
<text text-anchor="start" x="1594.5" y="-222.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockVersion uint64 </text>
<polyline fill="none" stroke="#1c2123" points="1586.5,-214.5 1714.5,-214.5 "/>
<text text-anchor="start" x="1594.5" y="-199.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Key []byte </text>
<polyline fill="none" stroke="#1c2123" points="1586.5,-191.5 1714.5,-191.5 "/>
<text text-anchor="start" x="1594.5" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockTtl uint64 </text>
</g>
<!-- TxnStatus&#45;&gt;LockInfo -->
<g id="edge39" class="edge">
<title>TxnStatus&#45;&gt;LockInfo</title>
<path fill="none" stroke="#666666" d="M1307.26,-326.03C1391.67,-329.87 1506.54,-331.46 1549,-315 1563.85,-309.25 1577.93,-300.22 1590.59,-290.09"/>
<polygon fill="#666666" stroke="#666666" points="1592.86,-292.75 1598.29,-283.65 1588.37,-287.38 1592.86,-292.75"/>
</g>
<!-- CmdCheckTxnStatus -->
<g id="node26" class="node">
<title>CmdCheckTxnStatus</title>
<path fill="none" stroke="#1c2123" d="M1355,-160.5C1355,-160.5 1537,-160.5 1537,-160.5 1543,-160.5 1549,-166.5 1549,-172.5 1549,-172.5 1549,-239.5 1549,-239.5 1549,-245.5 1543,-251.5 1537,-251.5 1537,-251.5 1355,-251.5 1355,-251.5 1349,-251.5 1343,-245.5 1343,-239.5 1343,-239.5 1343,-172.5 1343,-172.5 1343,-166.5 1349,-160.5 1355,-160.5"/>
<text text-anchor="middle" x="1446" y="-236.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdCheckTxnStatus</text>
<polyline fill="none" stroke="#1c2123" points="1343,-228.5 1549,-228.5 "/>
<text text-anchor="start" x="1351" y="-213.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tikv: 如果primay lock expire了</text>
<text text-anchor="start" x="1351" y="-198.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 则会rollback the primary lock</text>
<text text-anchor="start" x="1351" y="-183.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 并返回commit Version 0</text>
<text text-anchor="start" x="1351" y="-168.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 否则返回正常的commit version</text>
</g>
<!-- getTxnStatus&#45;&gt;CmdCheckTxnStatus -->
<g id="edge21" class="edge">
<title>getTxnStatus&#45;&gt;CmdCheckTxnStatus</title>
<path fill="none" stroke="#666666" d="M1252.69,-222.33C1275.38,-220.4 1304.34,-217.95 1332.86,-215.52"/>
<polygon fill="#666666" stroke="#666666" points="1333.25,-219 1342.92,-214.67 1332.66,-212.03 1333.25,-219"/>
</g>
<!-- CommitVersion -->
<g id="node27" class="node">
<title>CommitVersion</title>
<path fill="none" stroke="#1c2123" d="M1486,-306C1486,-306 1406,-306 1406,-306 1400,-306 1394,-300 1394,-294 1394,-294 1394,-282 1394,-282 1394,-276 1400,-270 1406,-270 1406,-270 1486,-270 1486,-270 1492,-270 1498,-276 1498,-282 1498,-282 1498,-294 1498,-294 1498,-300 1492,-306 1486,-306"/>
<text text-anchor="middle" x="1446" y="-284.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">CommitVersion</text>
</g>
<!-- getTxnStatus&#45;&gt;CommitVersion -->
<g id="edge22" class="edge">
<title>getTxnStatus&#45;&gt;CommitVersion</title>
<path fill="none" stroke="#666666" d="M1252.69,-237.37C1289.5,-247.06 1342.8,-261.09 1383.96,-271.93"/>
<polygon fill="#666666" stroke="#666666" points="1383.32,-275.38 1393.88,-274.54 1385.1,-268.61 1383.32,-275.38"/>
</g>
<!-- GroupKeysByRegion -->
<g id="node30" class="node">
<title>GroupKeysByRegion</title>
<path fill="none" stroke="#1c2123" d="M1779.5,-160.5C1779.5,-160.5 1961.5,-160.5 1961.5,-160.5 1967.5,-160.5 1973.5,-166.5 1973.5,-172.5 1973.5,-172.5 1973.5,-209.5 1973.5,-209.5 1973.5,-215.5 1967.5,-221.5 1961.5,-221.5 1961.5,-221.5 1779.5,-221.5 1779.5,-221.5 1773.5,-221.5 1767.5,-215.5 1767.5,-209.5 1767.5,-209.5 1767.5,-172.5 1767.5,-172.5 1767.5,-166.5 1773.5,-160.5 1779.5,-160.5"/>
<text text-anchor="middle" x="1870.5" y="-206.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">GroupKeysByRegion</text>
<polyline fill="none" stroke="#1c2123" points="1767.5,-198.5 1973.5,-198.5 "/>
<text text-anchor="start" x="1775.5" y="-183.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">把status.primaryLock.Secondaries</text>
<text text-anchor="start" x="1775.5" y="-168.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 根据region 分组</text>
</g>
<!-- checkAllSecondaries&#45;&gt;GroupKeysByRegion -->
<g id="edge25" class="edge">
<title>checkAllSecondaries&#45;&gt;GroupKeysByRegion</title>
<path fill="none" stroke="#666666" d="M1697.58,-305.84C1704.15,-302.15 1710.53,-297.88 1716,-293 1738.37,-273.07 1728.83,-254.99 1752,-236 1756.02,-232.71 1760.3,-229.64 1764.76,-226.78"/>
<polygon fill="#666666" stroke="#666666" points="1766.76,-229.67 1773.55,-221.54 1763.17,-223.66 1766.76,-229.67"/>
</g>
<!-- checkSecondaries -->
<g id="node31" class="node">
<title>checkSecondaries</title>
<path fill="none" stroke="#1c2123" d="M1764,-261C1764,-261 1977,-261 1977,-261 1983,-261 1989,-267 1989,-273 1989,-273 1989,-295 1989,-295 1989,-301 1983,-307 1977,-307 1977,-307 1764,-307 1764,-307 1758,-307 1752,-301 1752,-295 1752,-295 1752,-273 1752,-273 1752,-267 1758,-261 1764,-261"/>
<text text-anchor="middle" x="1870.5" y="-291.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">checkSecondaries</text>
<polyline fill="none" stroke="#1c2123" points="1752,-284 1989,-284 "/>
<text text-anchor="start" x="1760" y="-268.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">对于每个region 调用checkSecondaries</text>
</g>
<!-- checkAllSecondaries&#45;&gt;checkSecondaries -->
<g id="edge26" class="edge">
<title>checkAllSecondaries&#45;&gt;checkSecondaries</title>
<path fill="none" stroke="#666666" d="M1716.02,-312.16C1724.23,-310.65 1732.85,-309.07 1741.63,-307.46"/>
<polygon fill="#666666" stroke="#666666" points="1742.41,-310.88 1751.61,-305.63 1741.14,-303.99 1742.41,-310.88"/>
</g>
<!-- CmdCheckSecondaryLocks -->
<g id="node32" class="node">
<title>CmdCheckSecondaryLocks</title>
<path fill="none" stroke="#1c2123" d="M2037,-297C2037,-297 2298,-297 2298,-297 2304,-297 2310,-303 2310,-309 2310,-309 2310,-459 2310,-459 2310,-465 2304,-471 2298,-471 2298,-471 2037,-471 2037,-471 2031,-471 2025,-465 2025,-459 2025,-459 2025,-309 2025,-309 2025,-303 2031,-297 2037,-297"/>
<text text-anchor="middle" x="2167.5" y="-455.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">CmdCheckSecondaryLocks</text>
<polyline fill="none" stroke="#1c2123" points="2025,-448 2310,-448 "/>
<text text-anchor="start" x="2033" y="-432.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">check secondary locks of</text>
<text text-anchor="start" x="2033" y="-417.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> an async commit transaction</text>
<text text-anchor="start" x="2033" y="-402.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> If all prewritten locks exist,</text>
<text text-anchor="start" x="2033" y="-387.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> the lock information is returned.</text>
<polyline fill="none" stroke="#1c2123" points="2025,-380 2310,-380 "/>
<text text-anchor="start" x="2033" y="-364.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Otherwise, it returns the commit timestamp</text>
<text text-anchor="start" x="2033" y="-349.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> of the transaction.</text>
<text text-anchor="start" x="2033" y="-334.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> If the lock does not exist or</text>
<text text-anchor="start" x="2033" y="-319.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> is a pessimistic lock, to prevent the</text>
<text text-anchor="start" x="2033" y="-304.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> status being changed, a rollback may be written.</text>
</g>
<!-- checkAllSecondaries&#45;&gt;CmdCheckSecondaryLocks -->
<g id="edge27" class="edge">
<title>checkAllSecondaries&#45;&gt;CmdCheckSecondaryLocks</title>
<path fill="none" stroke="#666666" d="M1716.08,-331.27C1728.02,-332.55 1740.38,-333.85 1752,-335 1857.23,-345.42 1884.05,-343.09 1989,-356 1997.35,-357.03 2005.9,-358.15 2014.53,-359.33"/>
<polygon fill="#666666" stroke="#666666" points="2014.3,-362.83 2024.69,-360.75 2015.27,-355.9 2014.3,-362.83"/>
</g>
<!-- asyncResolveData -->
<g id="node34" class="node">
<title>asyncResolveData</title>
<path fill="none" stroke="#1c2123" d="M2450,-259C2450,-259 2358,-259 2358,-259 2352,-259 2346,-253 2346,-247 2346,-247 2346,-235 2346,-235 2346,-229 2352,-223 2358,-223 2358,-223 2450,-223 2450,-223 2456,-223 2462,-229 2462,-235 2462,-235 2462,-247 2462,-247 2462,-253 2456,-259 2450,-259"/>
<text text-anchor="middle" x="2404" y="-237.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">asyncResolveData</text>
</g>
<!-- checkAllSecondaries&#45;&gt;asyncResolveData -->
<g id="edge36" class="edge">
<title>checkAllSecondaries&#45;&gt;asyncResolveData</title>
<path fill="none" stroke="#666666" d="M1695.23,-305.95C1702.47,-302.15 1709.67,-297.81 1716,-293 1735.32,-278.34 1730.27,-262.76 1752,-252 1807.59,-224.47 2248.02,-230.34 2310,-233 2318.38,-233.36 2327.17,-233.9 2335.87,-234.54"/>
<polygon fill="#666666" stroke="#666666" points="2335.76,-238.04 2346,-235.32 2336.3,-231.06 2335.76,-238.04"/>
</g>
<!-- resolveRegionLocks&#45;&gt;CmdResolveLock -->
<g id="edge28" class="edge">
<title>resolveRegionLocks&#45;&gt;CmdResolveLock</title>
<path fill="none" stroke="#666666" d="M1714.55,-390.99C1724.96,-392.81 1736.05,-394.74 1747.33,-396.7"/>
<polygon fill="#666666" stroke="#666666" points="1746.83,-400.17 1757.28,-398.44 1748.03,-393.27 1746.83,-400.17"/>
</g>
<!-- checkSecondaries&#45;&gt;checkSecondaries -->
<g id="edge29" class="edge">
<title>checkSecondaries&#45;&gt;checkSecondaries</title>
<path fill="none" stroke="#666666" d="M1829.74,-307.05C1826.41,-316.99 1839.99,-325.5 1870.5,-325.5 1890.04,-325.5 1902.64,-322.01 1908.3,-316.88"/>
<polygon fill="#666666" stroke="#666666" points="1911.73,-317.63 1911.26,-307.05 1905.02,-315.61 1911.73,-317.63"/>
</g>
<!-- checkSecondaries&#45;&gt;CmdCheckSecondaryLocks -->
<g id="edge30" class="edge">
<title>checkSecondaries&#45;&gt;CmdCheckSecondaryLocks</title>
<path fill="none" stroke="#666666" d="M1939.55,-307.07C1962.28,-314.77 1988.6,-323.7 2015.09,-332.67"/>
<polygon fill="#666666" stroke="#666666" points="2014.26,-336.09 2024.85,-335.98 2016.5,-329.46 2014.26,-336.09"/>
</g>
<!-- addKeys -->
<g id="node35" class="node">
<title>addKeys</title>
<path fill="none" stroke="#1c2123" d="M2187.5,-278C2187.5,-278 2147.5,-278 2147.5,-278 2141.5,-278 2135.5,-272 2135.5,-266 2135.5,-266 2135.5,-254 2135.5,-254 2135.5,-248 2141.5,-242 2147.5,-242 2147.5,-242 2187.5,-242 2187.5,-242 2193.5,-242 2199.5,-248 2199.5,-254 2199.5,-254 2199.5,-266 2199.5,-266 2199.5,-272 2193.5,-278 2187.5,-278"/>
<text text-anchor="middle" x="2167.5" y="-256.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">addKeys</text>
</g>
<!-- checkSecondaries&#45;&gt;addKeys -->
<g id="edge37" class="edge">
<title>checkSecondaries&#45;&gt;addKeys</title>
<path fill="none" stroke="#666666" d="M1989.36,-274.41C2037.36,-270.51 2089.72,-266.25 2124.97,-263.38"/>
<polygon fill="#666666" stroke="#666666" points="2125.66,-266.83 2135.34,-262.53 2125.09,-259.86 2125.66,-266.83"/>
</g>
<!-- LockInfo&#45;&gt;GroupKeysByRegion -->
<g id="edge35" class="edge">
<title>LockInfo&#45;&gt;GroupKeysByRegion</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1714.55,-215.88C1727.94,-213.73 1742.45,-211.4 1757.05,-209.05"/>
<polygon fill="green" stroke="green" points="1757.84,-212.47 1767.16,-207.43 1756.73,-205.56 1757.84,-212.47"/>
</g>
<!-- addKeys&#45;&gt;asyncResolveData -->
<g id="edge38" class="edge">
<title>addKeys&#45;&gt;asyncResolveData</title>
<path fill="none" stroke="#666666" d="M2199.64,-257.48C2234.08,-254.69 2290.62,-250.11 2335.35,-246.48"/>
<polygon fill="#666666" stroke="#666666" points="2335.89,-249.95 2345.58,-245.65 2335.33,-242.97 2335.89,-249.95"/>
</g>
</g>
</svg>
