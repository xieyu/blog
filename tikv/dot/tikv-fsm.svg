<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: fsm Pages: 1 -->
<svg width="2561pt" height="946pt"
 viewBox="0.00 0.00 2561.00 946.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 942)">
<title>fsm</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-942 2557,-942 2557,4 -4,4"/>
<!-- Fsm -->
<g id="node1" class="node">
<title>Fsm</title>
<path fill="#feed9b" stroke="#f7e495" d="M1876,-82.5C1876,-82.5 1995,-82.5 1995,-82.5 2001,-82.5 2007,-88.5 2007,-94.5 2007,-94.5 2007,-245.5 2007,-245.5 2007,-251.5 2001,-257.5 1995,-257.5 1995,-257.5 1876,-257.5 1876,-257.5 1870,-257.5 1864,-251.5 1864,-245.5 1864,-245.5 1864,-94.5 1864,-94.5 1864,-88.5 1870,-82.5 1876,-82.5"/>
<text text-anchor="middle" x="1935.5" y="-242.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Fsm</text>
<polyline fill="none" stroke="#f7e495" points="1864,-234.5 2007,-234.5 "/>
<text text-anchor="start" x="1872" y="-219.3" font-family="Times,serif" font-size="14.00" fill="#40575d">A Fsm is a finite</text>
<text text-anchor="start" x="1872" y="-204.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> state machine.</text>
<polyline fill="none" stroke="#f7e495" points="1864,-196.5 2007,-196.5 "/>
<text text-anchor="start" x="1872" y="-181.3" font-family="Times,serif" font-size="14.00" fill="#40575d">fn is_stopped</text>
<polyline fill="none" stroke="#f7e495" points="1864,-173.5 2007,-173.5 "/>
<text text-anchor="start" x="1872" y="-158.3" font-family="Times,serif" font-size="14.00" fill="#40575d">fn set_mailbox</text>
<text text-anchor="start" x="1872" y="-143.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> 设置mailbox</text>
<text text-anchor="start" x="1872" y="-128.3" font-family="Times,serif" font-size="14.00" fill="#40575d">,后面通过</text>
<text text-anchor="middle" x="1935.5" y="-113.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> mailbox发消息给fsm</text>
<polyline fill="none" stroke="#f7e495" points="1864,-105.5 2007,-105.5 "/>
<text text-anchor="start" x="1872" y="-90.3" font-family="Times,serif" font-size="14.00" fill="#40575d">fn take_mailbox</text>
</g>
<!-- ApplyFsm -->
<g id="node2" class="node">
<title>ApplyFsm</title>
<path fill="none" stroke="#1c2123" d="M2141,-129C2141,-129 2091,-129 2091,-129 2085,-129 2079,-123 2079,-117 2079,-117 2079,-105 2079,-105 2079,-99 2085,-93 2091,-93 2091,-93 2141,-93 2141,-93 2147,-93 2153,-99 2153,-105 2153,-105 2153,-117 2153,-117 2153,-123 2147,-129 2141,-129"/>
<text text-anchor="middle" x="2116" y="-107.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsm</text>
</g>
<!-- Fsm&#45;&gt;ApplyFsm -->
<g id="edge1" class="edge">
<title>Fsm&#45;&gt;ApplyFsm</title>
<path fill="none" stroke="#666666" d="M2007.05,-146.68C2027.96,-139.77 2050.31,-132.38 2069.21,-126.13"/>
<polygon fill="#666666" stroke="#666666" points="2070.36,-129.44 2078.76,-122.98 2068.16,-122.79 2070.36,-129.44"/>
</g>
<!-- PeerFsm -->
<g id="node3" class="node">
<title>PeerFsm</title>
<path fill="none" stroke="#1c2123" d="M2136.5,-388C2136.5,-388 2095.5,-388 2095.5,-388 2089.5,-388 2083.5,-382 2083.5,-376 2083.5,-376 2083.5,-364 2083.5,-364 2083.5,-358 2089.5,-352 2095.5,-352 2095.5,-352 2136.5,-352 2136.5,-352 2142.5,-352 2148.5,-358 2148.5,-364 2148.5,-364 2148.5,-376 2148.5,-376 2148.5,-382 2142.5,-388 2136.5,-388"/>
<text text-anchor="middle" x="2116" y="-366.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsm</text>
</g>
<!-- Fsm&#45;&gt;PeerFsm -->
<g id="edge2" class="edge">
<title>Fsm&#45;&gt;PeerFsm</title>
<path fill="none" stroke="#666666" d="M2007.05,-249.05C2037.17,-282.79 2070.26,-319.87 2091.76,-343.96"/>
<polygon fill="#666666" stroke="#666666" points="2089.32,-346.48 2098.59,-351.61 2094.54,-341.82 2089.32,-346.48"/>
</g>
<!-- ControlFsm -->
<g id="node4" class="node">
<title>ControlFsm</title>
<path fill="none" stroke="#1c2123" d="M2145,-183C2145,-183 2087,-183 2087,-183 2081,-183 2075,-177 2075,-171 2075,-171 2075,-159 2075,-159 2075,-153 2081,-147 2087,-147 2087,-147 2145,-147 2145,-147 2151,-147 2157,-153 2157,-159 2157,-159 2157,-171 2157,-171 2157,-177 2151,-183 2145,-183"/>
<text text-anchor="middle" x="2116" y="-161.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ControlFsm</text>
</g>
<!-- Fsm&#45;&gt;ControlFsm -->
<g id="edge3" class="edge">
<title>Fsm&#45;&gt;ControlFsm</title>
<path fill="none" stroke="#666666" d="M2007.05,-168.02C2026.27,-167.49 2046.71,-166.91 2064.57,-166.41"/>
<polygon fill="#666666" stroke="#666666" points="2064.86,-169.91 2074.76,-166.13 2064.67,-162.91 2064.86,-169.91"/>
</g>
<!-- StoreFsm -->
<g id="node5" class="node">
<title>StoreFsm</title>
<path fill="none" stroke="#1c2123" d="M2138.5,-237C2138.5,-237 2093.5,-237 2093.5,-237 2087.5,-237 2081.5,-231 2081.5,-225 2081.5,-225 2081.5,-213 2081.5,-213 2081.5,-207 2087.5,-201 2093.5,-201 2093.5,-201 2138.5,-201 2138.5,-201 2144.5,-201 2150.5,-207 2150.5,-213 2150.5,-213 2150.5,-225 2150.5,-225 2150.5,-231 2144.5,-237 2138.5,-237"/>
<text text-anchor="middle" x="2116" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreFsm</text>
</g>
<!-- Fsm&#45;&gt;StoreFsm -->
<g id="edge4" class="edge">
<title>Fsm&#45;&gt;StoreFsm</title>
<path fill="none" stroke="#666666" d="M2007.05,-189.37C2028.79,-195.33 2052.08,-201.73 2071.44,-207.04"/>
<polygon fill="#666666" stroke="#666666" points="2070.61,-210.44 2081.18,-209.72 2072.47,-203.69 2070.61,-210.44"/>
</g>
<!-- KvEngine -->
<g id="node6" class="node">
<title>KvEngine</title>
<path fill="none" stroke="#1c2123" d="M2339.5,-280C2339.5,-280 2292.5,-280 2292.5,-280 2286.5,-280 2280.5,-274 2280.5,-268 2280.5,-268 2280.5,-256 2280.5,-256 2280.5,-250 2286.5,-244 2292.5,-244 2292.5,-244 2339.5,-244 2339.5,-244 2345.5,-244 2351.5,-250 2351.5,-256 2351.5,-256 2351.5,-268 2351.5,-268 2351.5,-274 2345.5,-280 2339.5,-280"/>
<text text-anchor="middle" x="2316" y="-258.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">KvEngine</text>
</g>
<!-- ApplyFsm&#45;&gt;KvEngine -->
<g id="edge5" class="edge">
<title>ApplyFsm&#45;&gt;KvEngine</title>
<path fill="none" stroke="#666666" d="M2153.01,-117.97C2165.74,-121.99 2179.29,-128.26 2189,-138 2221.46,-170.57 2191.46,-203.54 2225,-235 2237.2,-246.44 2254.07,-253.05 2269.9,-256.86"/>
<polygon fill="#666666" stroke="#666666" points="2269.6,-260.37 2280.1,-258.98 2271.02,-253.52 2269.6,-260.37"/>
</g>
<!-- ApplyDelegate -->
<g id="node7" class="node">
<title>ApplyDelegate</title>
<path fill="none" stroke="#1c2123" d="M2353,-71C2353,-71 2279,-71 2279,-71 2273,-71 2267,-65 2267,-59 2267,-59 2267,-47 2267,-47 2267,-41 2273,-35 2279,-35 2279,-35 2353,-35 2353,-35 2359,-35 2365,-41 2365,-47 2365,-47 2365,-59 2365,-59 2365,-65 2359,-71 2353,-71"/>
<text text-anchor="middle" x="2316" y="-49.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyDelegate</text>
</g>
<!-- ApplyFsm&#45;&gt;ApplyDelegate -->
<g id="edge6" class="edge">
<title>ApplyFsm&#45;&gt;ApplyDelegate</title>
<path fill="none" stroke="#666666" d="M2153.32,-100.36C2182.38,-91.85 2223.68,-79.75 2257.27,-69.91"/>
<polygon fill="#666666" stroke="#666666" points="2258.35,-73.24 2266.97,-67.07 2256.39,-66.52 2258.35,-73.24"/>
</g>
<!-- Receiver -->
<g id="node8" class="node">
<title>Receiver</title>
<path fill="none" stroke="#1c2123" d="M2242,-90.5C2242,-90.5 2390,-90.5 2390,-90.5 2396,-90.5 2402,-96.5 2402,-102.5 2402,-102.5 2402,-139.5 2402,-139.5 2402,-145.5 2396,-151.5 2390,-151.5 2390,-151.5 2242,-151.5 2242,-151.5 2236,-151.5 2230,-145.5 2230,-139.5 2230,-139.5 2230,-102.5 2230,-102.5 2230,-96.5 2236,-90.5 2242,-90.5"/>
<text text-anchor="middle" x="2316" y="-136.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Receiver</text>
<polyline fill="none" stroke="#1c2123" points="2230,-128.5 2402,-128.5 "/>
<text text-anchor="start" x="2238" y="-113.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">为mailbox中channel的rx端</text>
<text text-anchor="start" x="2238" y="-98.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 从channel中获取消息</text>
</g>
<!-- ApplyFsm&#45;&gt;Receiver -->
<g id="edge7" class="edge">
<title>ApplyFsm&#45;&gt;Receiver</title>
<path fill="none" stroke="#666666" d="M2153.32,-112.83C2172.07,-113.78 2195.93,-114.99 2219.52,-116.18"/>
<polygon fill="#666666" stroke="#666666" points="2219.43,-119.68 2229.59,-116.69 2219.78,-112.69 2219.43,-119.68"/>
</g>
<!-- PeerFsm&#45;&gt;KvEngine -->
<g id="edge16" class="edge">
<title>PeerFsm&#45;&gt;KvEngine</title>
<path fill="none" stroke="#666666" d="M2136.66,-351.84C2157.28,-333.66 2191.31,-306 2225,-289 2239.08,-281.89 2255.36,-276.3 2270.18,-272.1"/>
<polygon fill="#666666" stroke="#666666" points="2271.41,-275.39 2280.15,-269.41 2269.58,-268.63 2271.41,-275.39"/>
</g>
<!-- PeerFsm&#45;&gt;Receiver -->
<g id="edge17" class="edge">
<title>PeerFsm&#45;&gt;Receiver</title>
<path fill="none" stroke="#666666" d="M2127.61,-351.99C2141.75,-327.92 2167.51,-283.89 2189,-246 2205.29,-217.27 2202.63,-205.29 2225,-181 2232.77,-172.56 2241.96,-164.73 2251.45,-157.7"/>
<polygon fill="#666666" stroke="#666666" points="2253.72,-160.38 2259.84,-151.74 2249.66,-154.68 2253.72,-160.38"/>
</g>
<!-- RaftEngine -->
<g id="node14" class="node">
<title>RaftEngine</title>
<path fill="none" stroke="#1c2123" d="M2343,-334C2343,-334 2289,-334 2289,-334 2283,-334 2277,-328 2277,-322 2277,-322 2277,-310 2277,-310 2277,-304 2283,-298 2289,-298 2289,-298 2343,-298 2343,-298 2349,-298 2355,-304 2355,-310 2355,-310 2355,-322 2355,-322 2355,-328 2349,-334 2343,-334"/>
<text text-anchor="middle" x="2316" y="-312.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftEngine</text>
</g>
<!-- PeerFsm&#45;&gt;RaftEngine -->
<g id="edge18" class="edge">
<title>PeerFsm&#45;&gt;RaftEngine</title>
<path fill="none" stroke="#666666" d="M2148.81,-361.32C2180.69,-352.63 2230.16,-339.14 2266.84,-329.13"/>
<polygon fill="#666666" stroke="#666666" points="2268.1,-332.42 2276.83,-326.41 2266.26,-325.67 2268.1,-332.42"/>
</g>
<!-- Peer -->
<g id="node15" class="node">
<title>Peer</title>
<path fill="none" stroke="#1c2123" d="M2331,-496C2331,-496 2301,-496 2301,-496 2295,-496 2289,-490 2289,-484 2289,-484 2289,-472 2289,-472 2289,-466 2295,-460 2301,-460 2301,-460 2331,-460 2331,-460 2337,-460 2343,-466 2343,-472 2343,-472 2343,-484 2343,-484 2343,-490 2337,-496 2331,-496"/>
<text text-anchor="middle" x="2316" y="-474.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
</g>
<!-- PeerFsm&#45;&gt;Peer -->
<g id="edge19" class="edge">
<title>PeerFsm&#45;&gt;Peer</title>
<path fill="none" stroke="#666666" d="M2136.66,-388.16C2157.28,-406.34 2191.31,-434 2225,-451 2241.88,-459.52 2261.93,-465.86 2278.82,-470.25"/>
<polygon fill="#666666" stroke="#666666" points="2278.32,-473.73 2288.87,-472.73 2280,-466.94 2278.32,-473.73"/>
</g>
<!-- PeerTicks -->
<g id="node16" class="node">
<title>PeerTicks</title>
<path fill="none" stroke="#1c2123" d="M2339.5,-442C2339.5,-442 2292.5,-442 2292.5,-442 2286.5,-442 2280.5,-436 2280.5,-430 2280.5,-430 2280.5,-418 2280.5,-418 2280.5,-412 2286.5,-406 2292.5,-406 2292.5,-406 2339.5,-406 2339.5,-406 2345.5,-406 2351.5,-412 2351.5,-418 2351.5,-418 2351.5,-430 2351.5,-430 2351.5,-436 2345.5,-442 2339.5,-442"/>
<text text-anchor="middle" x="2316" y="-420.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerTicks</text>
</g>
<!-- PeerFsm&#45;&gt;PeerTicks -->
<g id="edge20" class="edge">
<title>PeerFsm&#45;&gt;PeerTicks</title>
<path fill="none" stroke="#666666" d="M2148.81,-378.68C2181.69,-387.64 2233.28,-401.71 2270.25,-411.8"/>
<polygon fill="#666666" stroke="#666666" points="2269.7,-415.27 2280.27,-414.53 2271.54,-408.52 2269.7,-415.27"/>
</g>
<!-- BatchRaftCmdRequestBuilder -->
<g id="node17" class="node">
<title>BatchRaftCmdRequestBuilder</title>
<path fill="none" stroke="#1c2123" d="M2395,-388C2395,-388 2237,-388 2237,-388 2231,-388 2225,-382 2225,-376 2225,-376 2225,-364 2225,-364 2225,-358 2231,-352 2237,-352 2237,-352 2395,-352 2395,-352 2401,-352 2407,-358 2407,-364 2407,-364 2407,-376 2407,-376 2407,-382 2401,-388 2395,-388"/>
<text text-anchor="middle" x="2316" y="-366.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">BatchRaftCmdRequestBuilder</text>
</g>
<!-- PeerFsm&#45;&gt;BatchRaftCmdRequestBuilder -->
<g id="edge21" class="edge">
<title>PeerFsm&#45;&gt;BatchRaftCmdRequestBuilder</title>
<path fill="none" stroke="#666666" d="M2148.81,-370C2166.89,-370 2190.63,-370 2214.48,-370"/>
<polygon fill="#666666" stroke="#666666" points="2214.7,-373.5 2224.7,-370 2214.7,-366.5 2214.7,-373.5"/>
</g>
<!-- StoreFsm&#45;&gt;Receiver -->
<g id="edge8" class="edge">
<title>StoreFsm&#45;&gt;Receiver</title>
<path fill="none" stroke="#666666" d="M2150.78,-207.55C2162.99,-203.1 2176.78,-197.69 2189,-192 2211.4,-181.56 2235.21,-168.65 2256.02,-156.72"/>
<polygon fill="#666666" stroke="#666666" points="2257.84,-159.71 2264.75,-151.67 2254.34,-153.65 2257.84,-159.71"/>
</g>
<!-- Store -->
<g id="node9" class="node">
<title>Store</title>
<path fill="none" stroke="#1c2123" d="M2331,-226C2331,-226 2301,-226 2301,-226 2295,-226 2289,-220 2289,-214 2289,-214 2289,-202 2289,-202 2289,-196 2295,-190 2301,-190 2301,-190 2331,-190 2331,-190 2337,-190 2343,-196 2343,-202 2343,-202 2343,-214 2343,-214 2343,-220 2337,-226 2331,-226"/>
<text text-anchor="middle" x="2316" y="-204.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Store</text>
</g>
<!-- StoreFsm&#45;&gt;Store -->
<g id="edge9" class="edge">
<title>StoreFsm&#45;&gt;Store</title>
<path fill="none" stroke="#666666" d="M2150.59,-217.13C2186.14,-215.16 2242.05,-212.05 2278.62,-210.02"/>
<polygon fill="#666666" stroke="#666666" points="2279.06,-213.5 2288.85,-209.45 2278.67,-206.51 2279.06,-213.5"/>
</g>
<!-- StoreFsmDelegate -->
<g id="node10" class="node">
<title>StoreFsmDelegate</title>
<path fill="none" stroke="#1c2123" d="M421,-384C421,-384 328,-384 328,-384 322,-384 316,-378 316,-372 316,-372 316,-360 316,-360 316,-354 322,-348 328,-348 328,-348 421,-348 421,-348 427,-348 433,-354 433,-360 433,-360 433,-372 433,-372 433,-378 427,-384 421,-384"/>
<text text-anchor="middle" x="374.5" y="-362.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">StoreFsmDelegate</text>
</g>
<!-- StoreFsmDelegate&#45;&gt;StoreFsm -->
<g id="edge10" class="edge">
<title>StoreFsmDelegate&#45;&gt;StoreFsm</title>
<path fill="none" stroke="#666666" d="M433.17,-353.57C495.73,-341.18 598.72,-324 688.5,-324 688.5,-324 688.5,-324 1665,-324 1817.37,-324 1864.22,-353.22 2007,-300 2039.13,-288.02 2069.81,-263.28 2090.2,-244.27"/>
<polygon fill="#666666" stroke="#666666" points="2092.68,-246.75 2097.5,-237.31 2087.85,-241.68 2092.68,-246.75"/>
</g>
<!-- PollContext -->
<g id="node11" class="node">
<title>PollContext</title>
<path fill="none" stroke="#1c2123" d="M538,-468C538,-468 481,-468 481,-468 475,-468 469,-462 469,-456 469,-456 469,-444 469,-444 469,-438 475,-432 481,-432 481,-432 538,-432 538,-432 544,-432 550,-438 550,-444 550,-444 550,-456 550,-456 550,-462 544,-468 538,-468"/>
<text text-anchor="middle" x="509.5" y="-446.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollContext</text>
</g>
<!-- StoreFsmDelegate&#45;&gt;PollContext -->
<g id="edge11" class="edge">
<title>StoreFsmDelegate&#45;&gt;PollContext</title>
<path fill="none" stroke="#666666" d="M404.03,-384.02C423.62,-396.39 449.82,-412.94 471.08,-426.37"/>
<polygon fill="#666666" stroke="#666666" points="469.23,-429.34 479.56,-431.72 472.97,-423.42 469.23,-429.34"/>
</g>
<!-- Transport -->
<g id="node12" class="node">
<title>Transport</title>
<path fill="none" stroke="#1c2123" d="M712,-388C712,-388 667,-388 667,-388 661,-388 655,-382 655,-376 655,-376 655,-364 655,-364 655,-358 661,-352 667,-352 667,-352 712,-352 712,-352 718,-352 724,-358 724,-364 724,-364 724,-376 724,-376 724,-382 718,-388 712,-388"/>
<text text-anchor="middle" x="689.5" y="-366.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Transport</text>
</g>
<!-- StoreFsmDelegate&#45;&gt;Transport -->
<g id="edge12" class="edge">
<title>StoreFsmDelegate&#45;&gt;Transport</title>
<path fill="none" stroke="#666666" d="M433.27,-366.74C494.34,-367.52 589.31,-368.73 644.55,-369.44"/>
<polygon fill="#666666" stroke="#666666" points="644.67,-372.94 654.72,-369.57 644.76,-365.94 644.67,-372.94"/>
</g>
<!-- PollContext&#45;&gt;Transport -->
<g id="edge29" class="edge">
<title>PollContext&#45;&gt;Transport</title>
<path fill="none" stroke="#666666" d="M532.01,-431.78C546.47,-420.35 566.39,-406.11 586,-397 604.45,-388.43 626.07,-382.23 644.69,-377.95"/>
<polygon fill="#666666" stroke="#666666" points="645.67,-381.32 654.69,-375.76 644.17,-374.48 645.67,-381.32"/>
</g>
<!-- RaftRouter -->
<g id="node21" class="node">
<title>RaftRouter</title>
<path fill="none" stroke="#1c2123" d="M598,-406.5C598,-406.5 781,-406.5 781,-406.5 787,-406.5 793,-412.5 793,-418.5 793,-418.5 793,-553.5 793,-553.5 793,-559.5 787,-565.5 781,-565.5 781,-565.5 598,-565.5 598,-565.5 592,-565.5 586,-559.5 586,-553.5 586,-553.5 586,-418.5 586,-418.5 586,-412.5 592,-406.5 598,-406.5"/>
<text text-anchor="middle" x="689.5" y="-550.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftRouter</text>
<polyline fill="none" stroke="#1c2123" points="586,-542.5 793,-542.5 "/>
<text text-anchor="start" x="594" y="-527.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send</text>
<text text-anchor="start" x="594" y="-512.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 根据region_id</text>
<text text-anchor="start" x="594" y="-497.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 从StoreFsmDelegate</text>
<text text-anchor="start" x="594" y="-482.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送PeerMsg消息</text>
<text text-anchor="start" x="594" y="-467.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 给PeerFsm</text>
<polyline fill="none" stroke="#1c2123" points="586,-459.5 793,-459.5 "/>
<text text-anchor="start" x="594" y="-444.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.ctx.router.send(</text>
<text text-anchor="start" x="594" y="-429.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> region_id, PeerMsg::RaftMessage</text>
<text text-anchor="start" x="594" y="-414.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ....)</text>
</g>
<!-- PollContext&#45;&gt;RaftRouter -->
<g id="edge30" class="edge">
<title>PollContext&#45;&gt;RaftRouter</title>
<path fill="none" stroke="#666666" d="M550,-457.99C557.98,-459.6 566.73,-461.37 575.83,-463.21"/>
<polygon fill="#666666" stroke="#666666" points="575.34,-466.68 585.83,-465.24 576.73,-459.82 575.34,-466.68"/>
</g>
<!-- ApplyRouter -->
<g id="node22" class="node">
<title>ApplyRouter</title>
<path fill="none" stroke="#1c2123" d="M607,-585C607,-585 772,-585 772,-585 778,-585 784,-591 784,-597 784,-597 784,-687 784,-687 784,-693 778,-699 772,-699 772,-699 607,-699 607,-699 601,-699 595,-693 595,-687 595,-687 595,-597 595,-597 595,-591 601,-585 607,-585"/>
<text text-anchor="middle" x="689.5" y="-683.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyRouter</text>
<polyline fill="none" stroke="#1c2123" points="595,-676 784,-676 "/>
<text text-anchor="start" x="603" y="-660.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">根据region_id</text>
<text text-anchor="start" x="603" y="-645.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 从PeerFsm发送</text>
<text text-anchor="start" x="603" y="-630.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 任务给ApplyFsm</text>
<polyline fill="none" stroke="#1c2123" points="595,-623 784,-623 "/>
<text text-anchor="start" x="603" y="-607.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ctx.apply_router.schedule_task(</text>
<text text-anchor="start" x="603" y="-592.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> self.fsm.region_id,...)</text>
</g>
<!-- PollContext&#45;&gt;ApplyRouter -->
<g id="edge31" class="edge">
<title>PollContext&#45;&gt;ApplyRouter</title>
<path fill="none" stroke="#666666" d="M518.33,-468.26C530.13,-494.24 554.49,-542.34 586,-575 586.91,-575.95 587.84,-576.89 588.79,-577.82"/>
<polygon fill="#666666" stroke="#666666" points="586.59,-580.56 596.28,-584.84 591.37,-575.45 586.59,-580.56"/>
</g>
<!-- PeerFsmDelegate -->
<g id="node13" class="node">
<title>PeerFsmDelegate</title>
<path fill="none" stroke="#1c2123" d="M419,-453C419,-453 330,-453 330,-453 324,-453 318,-447 318,-441 318,-441 318,-429 318,-429 318,-423 324,-417 330,-417 330,-417 419,-417 419,-417 425,-417 431,-423 431,-429 431,-429 431,-441 431,-441 431,-447 425,-453 419,-453"/>
<text text-anchor="middle" x="374.5" y="-431.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate</text>
</g>
<!-- PeerFsmDelegate&#45;&gt;PeerFsm -->
<g id="edge13" class="edge">
<title>PeerFsmDelegate&#45;&gt;PeerFsm</title>
<path fill="none" stroke="#666666" d="M383.54,-453.05C406.79,-503.01 479.34,-643.68 586,-709 625.51,-733.2 642.17,-728 688.5,-728 688.5,-728 688.5,-728 1665,-728 1818.14,-728 1888.1,-782.51 2007,-686 2097,-612.95 2112.3,-461.26 2114.68,-398.32"/>
<polygon fill="#666666" stroke="#666666" points="2118.18,-398.42 2114.97,-388.32 2111.18,-398.21 2118.18,-398.42"/>
</g>
<!-- PeerFsmDelegate&#45;&gt;PollContext -->
<g id="edge14" class="edge">
<title>PeerFsmDelegate&#45;&gt;PollContext</title>
<path fill="none" stroke="#666666" d="M431.13,-441.27C440.34,-442.31 449.83,-443.38 458.88,-444.4"/>
<polygon fill="#666666" stroke="#666666" points="458.53,-447.89 468.86,-445.53 459.32,-440.93 458.53,-447.89"/>
</g>
<!-- PeerFsmDelegate&#45;&gt;Transport -->
<g id="edge15" class="edge">
<title>PeerFsmDelegate&#45;&gt;Transport</title>
<path fill="none" stroke="#666666" d="M431.1,-423.45C492.12,-410.78 588.83,-390.7 644.71,-379.09"/>
<polygon fill="#666666" stroke="#666666" points="645.57,-382.49 654.65,-377.03 644.15,-375.64 645.57,-382.49"/>
</g>
<!-- RawNode -->
<g id="node18" class="node">
<title>RawNode</title>
<path fill="none" stroke="#1c2123" d="M2521.5,-550C2521.5,-550 2474.5,-550 2474.5,-550 2468.5,-550 2462.5,-544 2462.5,-538 2462.5,-538 2462.5,-526 2462.5,-526 2462.5,-520 2468.5,-514 2474.5,-514 2474.5,-514 2521.5,-514 2521.5,-514 2527.5,-514 2533.5,-520 2533.5,-526 2533.5,-526 2533.5,-538 2533.5,-538 2533.5,-544 2527.5,-550 2521.5,-550"/>
<text text-anchor="middle" x="2498" y="-528.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawNode</text>
</g>
<!-- Peer&#45;&gt;RawNode -->
<g id="edge22" class="edge">
<title>Peer&#45;&gt;RawNode</title>
<path fill="none" stroke="#666666" d="M2343.17,-485.85C2371.84,-494.45 2418.3,-508.39 2452.67,-518.7"/>
<polygon fill="#666666" stroke="#666666" points="2451.88,-522.12 2462.47,-521.64 2453.89,-515.41 2451.88,-522.12"/>
</g>
<!-- ProposalQueue -->
<g id="node19" class="node">
<title>ProposalQueue</title>
<path fill="none" stroke="#1c2123" d="M2535.5,-496C2535.5,-496 2460.5,-496 2460.5,-496 2454.5,-496 2448.5,-490 2448.5,-484 2448.5,-484 2448.5,-472 2448.5,-472 2448.5,-466 2454.5,-460 2460.5,-460 2460.5,-460 2535.5,-460 2535.5,-460 2541.5,-460 2547.5,-466 2547.5,-472 2547.5,-472 2547.5,-484 2547.5,-484 2547.5,-490 2541.5,-496 2535.5,-496"/>
<text text-anchor="middle" x="2498" y="-474.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ProposalQueue</text>
</g>
<!-- Peer&#45;&gt;ProposalQueue -->
<g id="edge23" class="edge">
<title>Peer&#45;&gt;ProposalQueue</title>
<path fill="none" stroke="#666666" d="M2343.17,-478C2367.98,-478 2406.13,-478 2438.23,-478"/>
<polygon fill="#666666" stroke="#666666" points="2438.41,-481.5 2448.41,-478 2438.41,-474.5 2438.41,-481.5"/>
</g>
<!-- ReadIndexQueue -->
<g id="node20" class="node">
<title>ReadIndexQueue</title>
<path fill="none" stroke="#1c2123" d="M2541,-442C2541,-442 2455,-442 2455,-442 2449,-442 2443,-436 2443,-430 2443,-430 2443,-418 2443,-418 2443,-412 2449,-406 2455,-406 2455,-406 2541,-406 2541,-406 2547,-406 2553,-412 2553,-418 2553,-418 2553,-430 2553,-430 2553,-436 2547,-442 2541,-442"/>
<text text-anchor="middle" x="2498" y="-420.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ReadIndexQueue</text>
</g>
<!-- Peer&#45;&gt;ReadIndexQueue -->
<g id="edge24" class="edge">
<title>Peer&#45;&gt;ReadIndexQueue</title>
<path fill="none" stroke="#666666" d="M2343.17,-470.15C2366.67,-463.1 2402.11,-452.47 2433.06,-443.18"/>
<polygon fill="#666666" stroke="#666666" points="2434.35,-446.45 2442.92,-440.22 2432.34,-439.74 2434.35,-446.45"/>
</g>
<!-- BatchRouter -->
<g id="node27" class="node">
<title>BatchRouter</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M841,-588.5C841,-588.5 1059,-588.5 1059,-588.5 1065,-588.5 1071,-594.5 1071,-600.5 1071,-600.5 1071,-637.5 1071,-637.5 1071,-643.5 1065,-649.5 1059,-649.5 1059,-649.5 841,-649.5 841,-649.5 835,-649.5 829,-643.5 829,-637.5 829,-637.5 829,-600.5 829,-600.5 829,-594.5 835,-588.5 841,-588.5"/>
<text text-anchor="middle" x="950" y="-634.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">BatchRouter</text>
<polyline fill="none" stroke="#60b5ac" points="829,-626.5 1071,-626.5 "/>
<text text-anchor="start" x="837" y="-611.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Router&lt;N, C, NormalScheduler&lt;N, C&gt;, </text>
<text text-anchor="middle" x="950" y="-596.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> ControlScheduler&lt;N, C&gt;&gt;;</text>
</g>
<!-- RaftRouter&#45;&gt;BatchRouter -->
<g id="edge32" class="edge">
<title>RaftRouter&#45;&gt;BatchRouter</title>
<path fill="none" stroke="#666666" d="M793.04,-538.76C822.42,-553.87 853.73,-569.98 880.52,-583.77"/>
<polygon fill="#666666" stroke="#666666" points="878.93,-586.89 889.43,-588.35 882.14,-580.66 878.93,-586.89"/>
</g>
<!-- ApplyRouter&#45;&gt;BatchRouter -->
<g id="edge34" class="edge">
<title>ApplyRouter&#45;&gt;BatchRouter</title>
<path fill="none" stroke="#666666" d="M784.19,-633.66C795.37,-632.67 806.93,-631.64 818.5,-630.61"/>
<polygon fill="#666666" stroke="#666666" points="819.01,-634.08 828.66,-629.71 818.39,-627.11 819.01,-634.08"/>
</g>
<!-- BasicMailbox -->
<g id="node23" class="node">
<title>BasicMailbox</title>
<path fill="none" stroke="#1c2123" d="M1512,-543C1512,-543 1816,-543 1816,-543 1822,-543 1828,-549 1828,-555 1828,-555 1828,-683 1828,-683 1828,-689 1822,-695 1816,-695 1816,-695 1512,-695 1512,-695 1506,-695 1500,-689 1500,-683 1500,-683 1500,-555 1500,-555 1500,-549 1506,-543 1512,-543"/>
<text text-anchor="middle" x="1664" y="-679.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">BasicMailbox</text>
<polyline fill="none" stroke="#1c2123" points="1500,-672 1828,-672 "/>
<text text-anchor="start" x="1508" y="-656.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Every mailbox should have one</text>
<text text-anchor="start" x="1508" y="-641.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> and only one owner</text>
<text text-anchor="start" x="1508" y="-626.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> who will receive all</text>
<text text-anchor="start" x="1508" y="-611.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> messages sent to this mailbox</text>
<polyline fill="none" stroke="#1c2123" points="1500,-604 1828,-604 "/>
<text text-anchor="start" x="1508" y="-588.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub struct BasicMailbox&lt;Owner: Fsm&gt; {</text>
<text text-anchor="start" x="1508" y="-573.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> sender: mpsc::LooseBoundedSender&lt;Owner::Message&gt;</text>
<polyline fill="none" stroke="#1c2123" points="1500,-566 1828,-566 "/>
<text text-anchor="start" x="1508" y="-550.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">state: Arc&lt;FsmState&lt;Owner&gt;&gt;</text>
</g>
<!-- BasicMailbox&#45;&gt;Fsm -->
<g id="edge25" class="edge">
<title>BasicMailbox&#45;&gt;Fsm</title>
<path fill="none" stroke="#666666" d="M1710.72,-542.83C1756.48,-466.59 1827.03,-349.04 1876.66,-266.36"/>
<polygon fill="#666666" stroke="#666666" points="1879.71,-268.09 1881.85,-257.71 1873.7,-264.49 1879.71,-268.09"/>
</g>
<!-- FsmState -->
<g id="node24" class="node">
<title>FsmState</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1883,-607.5C1883,-607.5 1988,-607.5 1988,-607.5 1994,-607.5 2000,-613.5 2000,-619.5 2000,-619.5 2000,-664.5 2000,-664.5 2000,-670.5 1994,-676.5 1988,-676.5 1988,-676.5 1883,-676.5 1883,-676.5 1877,-676.5 1871,-670.5 1871,-664.5 1871,-664.5 1871,-619.5 1871,-619.5 1871,-613.5 1877,-607.5 1883,-607.5"/>
<text text-anchor="middle" x="1935.5" y="-661.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">FsmState</text>
<polyline fill="none" stroke="#60b5ac" points="1871,-653.5 2000,-653.5 "/>
<text text-anchor="start" x="1879" y="-638.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">status: AtomicUsize</text>
<polyline fill="none" stroke="#60b5ac" points="1871,-630.5 2000,-630.5 "/>
<text text-anchor="start" x="1879" y="-615.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">data: AtomicPtr&lt;N&gt;</text>
</g>
<!-- BasicMailbox&#45;&gt;FsmState -->
<g id="edge26" class="edge">
<title>BasicMailbox&#45;&gt;FsmState</title>
<path fill="none" stroke="#666666" d="M1828.37,-632.94C1839.57,-633.9 1850.48,-634.83 1860.79,-635.71"/>
<polygon fill="#666666" stroke="#666666" points="1860.63,-639.21 1870.89,-636.57 1861.22,-632.23 1860.63,-639.21"/>
</g>
<!-- LooseBoundedSender -->
<g id="node25" class="node">
<title>LooseBoundedSender</title>
<path fill="none" stroke="#1c2123" d="M1991.5,-589C1991.5,-589 1879.5,-589 1879.5,-589 1873.5,-589 1867.5,-583 1867.5,-577 1867.5,-577 1867.5,-565 1867.5,-565 1867.5,-559 1873.5,-553 1879.5,-553 1879.5,-553 1991.5,-553 1991.5,-553 1997.5,-553 2003.5,-559 2003.5,-565 2003.5,-565 2003.5,-577 2003.5,-577 2003.5,-583 1997.5,-589 1991.5,-589"/>
<text text-anchor="middle" x="1935.5" y="-567.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LooseBoundedSender</text>
</g>
<!-- BasicMailbox&#45;&gt;LooseBoundedSender -->
<g id="edge27" class="edge">
<title>BasicMailbox&#45;&gt;LooseBoundedSender</title>
<path fill="none" stroke="#666666" d="M1828.37,-589.9C1838.36,-588.12 1848.12,-586.38 1857.43,-584.73"/>
<polygon fill="#666666" stroke="#666666" points="1858.12,-588.16 1867.35,-582.96 1856.89,-581.27 1858.12,-588.16"/>
</g>
<!-- FsmScheduler -->
<g id="node26" class="node">
<title>FsmScheduler</title>
<path fill="#feed9b" stroke="#f7e495" d="M1900,-832.5C1900,-832.5 1971,-832.5 1971,-832.5 1977,-832.5 1983,-838.5 1983,-844.5 1983,-844.5 1983,-889.5 1983,-889.5 1983,-895.5 1977,-901.5 1971,-901.5 1971,-901.5 1900,-901.5 1900,-901.5 1894,-901.5 1888,-895.5 1888,-889.5 1888,-889.5 1888,-844.5 1888,-844.5 1888,-838.5 1894,-832.5 1900,-832.5"/>
<text text-anchor="middle" x="1935.5" y="-886.3" font-family="Times,serif" font-size="14.00" fill="#40575d">FsmScheduler</text>
<polyline fill="none" stroke="#f7e495" points="1888,-878.5 1983,-878.5 "/>
<text text-anchor="start" x="1896" y="-863.3" font-family="Times,serif" font-size="14.00" fill="#40575d">fn schedule</text>
<polyline fill="none" stroke="#f7e495" points="1888,-855.5 1983,-855.5 "/>
<text text-anchor="start" x="1896" y="-840.3" font-family="Times,serif" font-size="14.00" fill="#40575d">fn shutdown</text>
</g>
<!-- BasicMailbox&#45;&gt;FsmScheduler -->
<g id="edge28" class="edge">
<title>BasicMailbox&#45;&gt;FsmScheduler</title>
<path fill="none" stroke="#666666" d="M1747.69,-695.09C1794.4,-738.08 1850.97,-790.13 1889.53,-825.62"/>
<polygon fill="#666666" stroke="#666666" points="1887.27,-828.3 1897,-832.49 1892.01,-823.14 1887.27,-828.3"/>
</g>
<!-- NormalScheduler -->
<g id="node29" class="node">
<title>NormalScheduler</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M2055,-876.5C2055,-876.5 2177,-876.5 2177,-876.5 2183,-876.5 2189,-882.5 2189,-888.5 2189,-888.5 2189,-925.5 2189,-925.5 2189,-931.5 2183,-937.5 2177,-937.5 2177,-937.5 2055,-937.5 2055,-937.5 2049,-937.5 2043,-931.5 2043,-925.5 2043,-925.5 2043,-888.5 2043,-888.5 2043,-882.5 2049,-876.5 2055,-876.5"/>
<text text-anchor="middle" x="2116" y="-922.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">NormalScheduler</text>
<polyline fill="none" stroke="#60b5ac" points="2043,-914.5 2189,-914.5 "/>
<text text-anchor="start" x="2051" y="-899.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">sender: channel::Sender</text>
<text text-anchor="middle" x="2116" y="-884.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> &lt;FsmTypes&lt;N,C&gt;&gt;</text>
</g>
<!-- FsmScheduler&#45;&gt;NormalScheduler -->
<g id="edge36" class="edge">
<title>FsmScheduler&#45;&gt;NormalScheduler</title>
<path fill="none" stroke="#666666" d="M1983.4,-877.51C1998.6,-880.92 2015.93,-884.8 2032.91,-888.6"/>
<polygon fill="#666666" stroke="#666666" points="2032.32,-892.06 2042.85,-890.83 2033.85,-885.23 2032.32,-892.06"/>
</g>
<!-- ControlScheduler -->
<g id="node30" class="node">
<title>ControlScheduler</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M2055,-796.5C2055,-796.5 2177,-796.5 2177,-796.5 2183,-796.5 2189,-802.5 2189,-808.5 2189,-808.5 2189,-845.5 2189,-845.5 2189,-851.5 2183,-857.5 2177,-857.5 2177,-857.5 2055,-857.5 2055,-857.5 2049,-857.5 2043,-851.5 2043,-845.5 2043,-845.5 2043,-808.5 2043,-808.5 2043,-802.5 2049,-796.5 2055,-796.5"/>
<text text-anchor="middle" x="2116" y="-842.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ControlScheduler</text>
<polyline fill="none" stroke="#60b5ac" points="2043,-834.5 2189,-834.5 "/>
<text text-anchor="start" x="2051" y="-819.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">sender: channel::Sender</text>
<text text-anchor="middle" x="2116" y="-804.3" font-family="Times,serif" font-size="14.00" fill="#5d6179"> &lt;FsmTypes&lt;N,C&gt;&gt;</text>
</g>
<!-- FsmScheduler&#45;&gt;ControlScheduler -->
<g id="edge37" class="edge">
<title>FsmScheduler&#45;&gt;ControlScheduler</title>
<path fill="none" stroke="#666666" d="M1983.4,-856.49C1998.6,-853.08 2015.93,-849.2 2032.91,-845.4"/>
<polygon fill="#666666" stroke="#666666" points="2033.85,-848.77 2042.85,-843.17 2032.32,-841.94 2033.85,-848.77"/>
</g>
<!-- Router -->
<g id="node28" class="node">
<title>Router</title>
<path fill="#79d8ce" stroke="#60b5ac" d="M1119,-538.5C1119,-538.5 1452,-538.5 1452,-538.5 1458,-538.5 1464,-544.5 1464,-550.5 1464,-550.5 1464,-687.5 1464,-687.5 1464,-693.5 1458,-699.5 1452,-699.5 1452,-699.5 1119,-699.5 1119,-699.5 1113,-699.5 1107,-693.5 1107,-687.5 1107,-687.5 1107,-550.5 1107,-550.5 1107,-544.5 1113,-538.5 1119,-538.5"/>
<text text-anchor="middle" x="1285.5" y="-684.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Router</text>
<polyline fill="none" stroke="#60b5ac" points="1107,-676.5 1464,-676.5 "/>
<text text-anchor="start" x="1115" y="-661.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">normals: Arc&lt;Mutex&lt;HashMap&lt;u64, BasicMailbox&lt;N&gt;&gt;&gt;&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="1107,-653.5 1464,-653.5 "/>
<text text-anchor="start" x="1115" y="-638.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">caches: Cell&lt;LruCache&lt;u64, BasicMailbox&lt;N&gt;&gt;&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="1107,-630.5 1464,-630.5 "/>
<text text-anchor="start" x="1115" y="-615.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(super) control_box: BasicMailbox&lt;C&gt;</text>
<polyline fill="none" stroke="#60b5ac" points="1107,-607.5 1464,-607.5 "/>
<text text-anchor="start" x="1115" y="-592.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub(crate) normal_scheduler: Ns</text>
<polyline fill="none" stroke="#60b5ac" points="1107,-584.5 1464,-584.5 "/>
<text text-anchor="start" x="1115" y="-569.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">control_scheduler: Cs</text>
<polyline fill="none" stroke="#60b5ac" points="1107,-561.5 1464,-561.5 "/>
<text text-anchor="start" x="1115" y="-546.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">shutdown: Arc&lt;AtomicBool&gt;</text>
</g>
<!-- BatchRouter&#45;&gt;Router -->
<g id="edge33" class="edge">
<title>BatchRouter&#45;&gt;Router</title>
<path fill="none" stroke="#666666" d="M1071.4,-619C1079.72,-619 1088.2,-619 1096.75,-619"/>
<polygon fill="#666666" stroke="#666666" points="1096.83,-622.5 1106.83,-619 1096.83,-615.5 1096.83,-622.5"/>
</g>
<!-- Router&#45;&gt;BasicMailbox -->
<g id="edge35" class="edge">
<title>Router&#45;&gt;BasicMailbox</title>
<path fill="none" stroke="#666666" d="M1464,-619C1472.63,-619 1481.29,-619 1489.91,-619"/>
<polygon fill="#666666" stroke="#666666" points="1490,-622.5 1500,-619 1490,-615.5 1490,-622.5"/>
</g>
<!-- Poller -->
<g id="node31" class="node">
<title>Poller</title>
<path fill="none" stroke="#1c2123" d="M42,-211C42,-211 12,-211 12,-211 6,-211 0,-205 0,-199 0,-199 0,-187 0,-187 0,-181 6,-175 12,-175 12,-175 42,-175 42,-175 48,-175 54,-181 54,-187 54,-187 54,-199 54,-199 54,-205 48,-211 42,-211"/>
<text text-anchor="middle" x="27" y="-189.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Poller</text>
</g>
<!-- Poller&#45;&gt;Fsm -->
<g id="edge38" class="edge">
<title>Poller&#45;&gt;Fsm</title>
<path fill="none" stroke="#666666" d="M54.05,-188.4C94.39,-181.69 174.49,-170 243,-170 243,-170 243,-170 1286.5,-170 1490.58,-170 1730.8,-170 1853.48,-170"/>
<polygon fill="#666666" stroke="#666666" points="1853.54,-173.5 1863.54,-170 1853.54,-166.5 1853.54,-173.5"/>
</g>
<!-- Poller&#45;&gt;Receiver -->
<g id="edge39" class="edge">
<title>Poller&#45;&gt;Receiver</title>
<path fill="none" stroke="#666666" d="M37.02,-174.84C62.31,-126.8 138.92,0 243,0 243,0 243,0 1936.5,0 1993.86,0 2136.4,-51.05 2229.27,-86.84"/>
<polygon fill="#666666" stroke="#666666" points="2228.06,-90.12 2238.65,-90.47 2230.59,-83.6 2228.06,-90.12"/>
</g>
<!-- Poller&#45;&gt;Router -->
<g id="edge40" class="edge">
<title>Poller&#45;&gt;Router</title>
<path fill="none" stroke="#666666" d="M30.29,-211.29C43.49,-312.95 113.96,-804 243,-804 243,-804 243,-804 375.5,-804 629.24,-804 914.96,-733.93 1097.19,-680.03"/>
<polygon fill="#666666" stroke="#666666" points="1098.28,-683.36 1106.87,-677.15 1096.29,-676.65 1098.28,-683.36"/>
</g>
<!-- PollHandler -->
<g id="node32" class="node">
<title>PollHandler</title>
<path fill="none" stroke="#1c2123" d="M160,-234C160,-234 102,-234 102,-234 96,-234 90,-228 90,-222 90,-222 90,-210 90,-210 90,-204 96,-198 102,-198 102,-198 160,-198 160,-198 166,-198 172,-204 172,-210 172,-210 172,-222 172,-222 172,-228 166,-234 160,-234"/>
<text text-anchor="middle" x="131" y="-212.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PollHandler</text>
</g>
<!-- Poller&#45;&gt;PollHandler -->
<g id="edge41" class="edge">
<title>Poller&#45;&gt;PollHandler</title>
<path fill="none" stroke="#666666" d="M54,-198.86C61.89,-200.64 70.84,-202.66 79.77,-204.67"/>
<polygon fill="#666666" stroke="#666666" points="79.24,-208.14 89.76,-206.93 80.78,-201.31 79.24,-208.14"/>
</g>
<!-- ApplyPoller -->
<g id="node33" class="node">
<title>ApplyPoller</title>
<path fill="none" stroke="#1c2123" d="M1965,-64C1965,-64 1906,-64 1906,-64 1900,-64 1894,-58 1894,-52 1894,-52 1894,-40 1894,-40 1894,-34 1900,-28 1906,-28 1906,-28 1965,-28 1965,-28 1971,-28 1977,-34 1977,-40 1977,-40 1977,-52 1977,-52 1977,-58 1971,-64 1965,-64"/>
<text text-anchor="middle" x="1935.5" y="-42.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyPoller</text>
</g>
<!-- PollHandler&#45;&gt;ApplyPoller -->
<g id="edge42" class="edge">
<title>PollHandler&#45;&gt;ApplyPoller</title>
<path fill="none" stroke="#666666" d="M172.15,-213.86C220.07,-211.49 302.6,-208 373.5,-208 373.5,-208 373.5,-208 951,-208 1312.64,-208 1739.26,-100.04 1883.76,-60.39"/>
<polygon fill="#666666" stroke="#666666" points="1884.96,-63.68 1893.67,-57.65 1883.1,-56.94 1884.96,-63.68"/>
</g>
<!-- RaftPoller -->
<g id="node34" class="node">
<title>RaftPoller</title>
<path fill="none" stroke="#1c2123" d="M268,-384C268,-384 220,-384 220,-384 214,-384 208,-378 208,-372 208,-372 208,-360 208,-360 208,-354 214,-348 220,-348 220,-348 268,-348 268,-348 274,-348 280,-354 280,-360 280,-360 280,-372 280,-372 280,-378 274,-384 268,-384"/>
<text text-anchor="middle" x="244" y="-362.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftPoller</text>
</g>
<!-- PollHandler&#45;&gt;RaftPoller -->
<g id="edge43" class="edge">
<title>PollHandler&#45;&gt;RaftPoller</title>
<path fill="none" stroke="#666666" d="M145.39,-234.09C164.81,-260.33 200.91,-309.12 223.35,-339.44"/>
<polygon fill="#666666" stroke="#666666" points="220.8,-341.89 229.56,-347.84 226.43,-337.72 220.8,-341.89"/>
</g>
<!-- ApplyPoller&#45;&gt;ApplyFsm -->
<g id="edge48" class="edge">
<title>ApplyPoller&#45;&gt;ApplyFsm</title>
<path fill="none" stroke="#666666" d="M1977,-60.75C2004.42,-70.73 2040.7,-83.94 2069.17,-94.31"/>
<polygon fill="#666666" stroke="#666666" points="2068.3,-97.72 2078.89,-97.85 2070.7,-91.14 2068.3,-97.72"/>
</g>
<!-- ApplyPoller&#45;&gt;ControlFsm -->
<g id="edge49" class="edge">
<title>ApplyPoller&#45;&gt;ControlFsm</title>
<path fill="none" stroke="#666666" d="M1977.22,-56.13C1987.74,-60.13 1998.49,-65.61 2007,-73 2031.93,-94.66 2018,-116.43 2043,-138 2049.54,-143.64 2057.37,-148.16 2065.42,-151.75"/>
<polygon fill="#666666" stroke="#666666" points="2064.33,-155.09 2074.91,-155.57 2066.94,-148.59 2064.33,-155.09"/>
</g>
<!-- ApplyPoller&#45;&gt;ApplyDelegate -->
<g id="edge50" class="edge">
<title>ApplyPoller&#45;&gt;ApplyDelegate</title>
<path fill="none" stroke="#666666" d="M1977.01,-46.75C2044.26,-47.99 2179.23,-50.49 2256.71,-51.92"/>
<polygon fill="#666666" stroke="#666666" points="2256.73,-55.42 2266.79,-52.11 2256.86,-48.42 2256.73,-55.42"/>
</g>
<!-- RaftPoller&#45;&gt;PeerFsm -->
<g id="edge44" class="edge">
<title>RaftPoller&#45;&gt;PeerFsm</title>
<path fill="none" stroke="#666666" d="M256.08,-384.21C286,-432.39 372.67,-565.51 469,-654 633.6,-805.2 725.49,-804 949,-804 949,-804 949,-804 1665,-804 1820.71,-804 1892.88,-833.94 2007,-728 2103.45,-638.47 2114.87,-466.25 2115.45,-398.44"/>
<polygon fill="#666666" stroke="#666666" points="2118.95,-398.12 2115.45,-388.11 2111.95,-398.11 2118.95,-398.12"/>
</g>
<!-- RaftPoller&#45;&gt;StoreFsm -->
<g id="edge45" class="edge">
<title>RaftPoller&#45;&gt;StoreFsm</title>
<path fill="none" stroke="#666666" d="M280.2,-348.05C329.78,-324.46 423.64,-286 508.5,-286 508.5,-286 508.5,-286 1665,-286 1817.23,-286 1859.02,-302.72 2007,-267 2029.9,-261.47 2053.98,-251.25 2073.58,-241.65"/>
<polygon fill="#666666" stroke="#666666" points="2075.17,-244.77 2082.53,-237.16 2072.03,-238.52 2075.17,-244.77"/>
</g>
<!-- RaftPoller&#45;&gt;StoreFsmDelegate -->
<g id="edge46" class="edge">
<title>RaftPoller&#45;&gt;StoreFsmDelegate</title>
<path fill="none" stroke="#666666" d="M280.11,-366C288.02,-366 296.67,-366 305.42,-366"/>
<polygon fill="#666666" stroke="#666666" points="305.69,-369.5 315.69,-366 305.69,-362.5 305.69,-369.5"/>
</g>
<!-- RaftPoller&#45;&gt;PeerFsmDelegate -->
<g id="edge47" class="edge">
<title>RaftPoller&#45;&gt;PeerFsmDelegate</title>
<path fill="none" stroke="#666666" d="M278.76,-384.13C294.7,-392.69 313.89,-402.99 330.82,-412.08"/>
<polygon fill="#666666" stroke="#666666" points="329.5,-415.34 339.96,-416.99 332.81,-409.18 329.5,-415.34"/>
</g>
</g>
</svg>
