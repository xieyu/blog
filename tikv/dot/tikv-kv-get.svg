<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: kv_get Pages: 1 -->
<svg width="1963pt" height="530pt"
 viewBox="0.00 0.00 1963.00 530.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 526)">
<title>kv_get</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-526 1959,-526 1959,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_SnapshotStore</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1253,-8C1253,-8 1591,-8 1591,-8 1597,-8 1603,-14 1603,-20 1603,-20 1603,-80 1603,-80 1603,-86 1597,-92 1591,-92 1591,-92 1253,-92 1253,-92 1247,-92 1241,-86 1241,-80 1241,-80 1241,-20 1241,-20 1241,-14 1247,-8 1253,-8"/>
<text text-anchor="middle" x="1422" y="-72" font-family="Times,serif" font-size="20.00">Storage</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Storage</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M301,-100C301,-100 1935,-100 1935,-100 1941,-100 1947,-106 1947,-112 1947,-112 1947,-282 1947,-282 1947,-288 1941,-294 1935,-294 1935,-294 301,-294 301,-294 295,-294 289,-288 289,-282 289,-282 289,-112 289,-112 289,-106 295,-100 301,-100"/>
<text text-anchor="middle" x="1118" y="-274" font-family="Times,serif" font-size="20.00">Storage</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_service_kv</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-302C20,-302 1076,-302 1076,-302 1082,-302 1088,-308 1088,-314 1088,-314 1088,-502 1088,-502 1088,-508 1082,-514 1076,-514 1076,-514 20,-514 20,-514 14,-514 8,-508 8,-502 8,-502 8,-314 8,-314 8,-308 14,-302 20,-302"/>
<text text-anchor="middle" x="548" y="-494" font-family="Times,serif" font-size="20.00">service::kv</text>
</g>
<!-- snap_store_get -->
<g id="node1" class="node">
<title>snap_store_get</title>
<path fill="none" stroke="#1c2123" d="M1261,-17C1261,-17 1356,-17 1356,-17 1362,-17 1368,-23 1368,-29 1368,-29 1368,-41 1368,-41 1368,-47 1362,-53 1356,-53 1356,-53 1261,-53 1261,-53 1255,-53 1249,-47 1249,-41 1249,-41 1249,-29 1249,-29 1249,-23 1255,-17 1261,-17"/>
<text text-anchor="middle" x="1308.5" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapshotStore::get</text>
</g>
<!-- PointGetter_get -->
<g id="node2" class="node">
<title>PointGetter_get</title>
<path fill="none" stroke="#1c2123" d="M1583,-53C1583,-53 1505,-53 1505,-53 1499,-53 1493,-47 1493,-41 1493,-41 1493,-29 1493,-29 1493,-23 1499,-17 1505,-17 1505,-17 1583,-17 1583,-17 1589,-17 1595,-23 1595,-29 1595,-29 1595,-41 1595,-41 1595,-47 1589,-53 1583,-53"/>
<text text-anchor="middle" x="1544" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PointGetter_get</text>
</g>
<!-- snap_store_get&#45;&gt;PointGetter_get -->
<g id="edge1" class="edge">
<title>snap_store_get&#45;&gt;PointGetter_get</title>
<path fill="none" stroke="#666666" d="M1368.12,-35C1403.04,-35 1447.27,-35 1482.52,-35"/>
<polygon fill="#666666" stroke="#666666" points="1482.67,-38.5 1492.67,-35 1482.67,-31.5 1482.67,-38.5"/>
</g>
<!-- Storage_get -->
<g id="node3" class="node">
<title>Storage_get</title>
<path fill="none" stroke="#1c2123" d="M309,-194.5C309,-194.5 423,-194.5 423,-194.5 429,-194.5 435,-200.5 435,-206.5 435,-206.5 435,-243.5 435,-243.5 435,-249.5 429,-255.5 423,-255.5 423,-255.5 309,-255.5 309,-255.5 303,-255.5 297,-249.5 297,-243.5 297,-243.5 297,-206.5 297,-206.5 297,-200.5 303,-194.5 309,-194.5"/>
<text text-anchor="middle" x="366" y="-240.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage.get</text>
<polyline fill="none" stroke="#1c2123" points="297,-232.5 435,-232.5 "/>
<text text-anchor="start" x="305" y="-217.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Get value of the given</text>
<text text-anchor="start" x="305" y="-202.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> key from a snapshot</text>
</g>
<!-- read_pool_spawn_handle -->
<g id="node4" class="node">
<title>read_pool_spawn_handle</title>
<path fill="none" stroke="#1c2123" d="M488.5,-133C488.5,-133 657.5,-133 657.5,-133 663.5,-133 669.5,-139 669.5,-145 669.5,-145 669.5,-235 669.5,-235 669.5,-241 663.5,-247 657.5,-247 657.5,-247 488.5,-247 488.5,-247 482.5,-247 476.5,-241 476.5,-235 476.5,-235 476.5,-145 476.5,-145 476.5,-139 482.5,-133 488.5,-133"/>
<text text-anchor="start" x="484.5" y="-231.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ReadPoolHandle::spawn_handle</text>
<polyline fill="none" stroke="#1c2123" points="476.5,-224 669.5,-224 "/>
<text text-anchor="start" x="484.5" y="-208.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">生成执行异步任务</text>
<polyline fill="none" stroke="#1c2123" points="476.5,-201 669.5,-201 "/>
<text text-anchor="start" x="484.5" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.read_pool.spawn_handle(</text>
<text text-anchor="start" x="484.5" y="-170.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> async move {</text>
<text text-anchor="start" x="484.5" y="-155.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ...</text>
<text text-anchor="start" x="484.5" y="-140.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> }</text>
</g>
<!-- Storage_get&#45;&gt;read_pool_spawn_handle -->
<g id="edge2" class="edge">
<title>Storage_get&#45;&gt;read_pool_spawn_handle</title>
<path fill="none" stroke="#666666" d="M435.26,-213.35C445.24,-211.64 455.7,-209.86 466.21,-208.06"/>
<polygon fill="#666666" stroke="#666666" points="467.01,-211.48 476.28,-206.34 465.84,-204.57 467.01,-211.48"/>
</g>
<!-- future_get_async_task -->
<g id="node16" class="node">
<title>future_get_async_task</title>
<path fill="none" stroke="#1c2123" d="M483,-310.5C483,-310.5 663,-310.5 663,-310.5 669,-310.5 675,-316.5 675,-322.5 675,-322.5 675,-359.5 675,-359.5 675,-365.5 669,-371.5 663,-371.5 663,-371.5 483,-371.5 483,-371.5 477,-371.5 471,-365.5 471,-359.5 471,-359.5 471,-322.5 471,-322.5 471,-316.5 477,-310.5 483,-310.5"/>
<text text-anchor="start" x="479" y="-356.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">future_get中异步任务</text>
<polyline fill="none" stroke="#1c2123" points="471,-348.5 675,-348.5 "/>
<text text-anchor="start" x="479" y="-333.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">等待storage.get的异步任务完成</text>
<text text-anchor="start" x="479" y="-318.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> let v = v.await</text>
</g>
<!-- Storage_get&#45;&gt;future_get_async_task -->
<g id="edge25" class="edge">
<title>Storage_get&#45;&gt;future_get_async_task</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M406.71,-255.83C425.59,-269.69 448.83,-285.68 471,-298 475.84,-300.69 480.88,-303.32 486.02,-305.88"/>
<polygon fill="green" stroke="green" points="484.82,-309.19 495.35,-310.39 487.87,-302.89 484.82,-309.19"/>
</g>
<!-- read_pool_spawn_handle&#45;&gt;snap_store_get -->
<g id="edge3" class="edge">
<title>read_pool_spawn_handle&#45;&gt;snap_store_get</title>
<path fill="none" stroke="#666666" d="M669.57,-141.18C683.24,-135.43 697.31,-130.15 711,-126 896.69,-69.74 1125.93,-47.25 1238.5,-39.12"/>
<polygon fill="#666666" stroke="#666666" points="1238.97,-42.6 1248.7,-38.4 1238.48,-35.61 1238.97,-42.6"/>
</g>
<!-- prepare_snap_ctx -->
<g id="node5" class="node">
<title>prepare_snap_ctx</title>
<path fill="none" stroke="#1c2123" d="M838.5,-171C838.5,-171 750.5,-171 750.5,-171 744.5,-171 738.5,-165 738.5,-159 738.5,-159 738.5,-147 738.5,-147 738.5,-141 744.5,-135 750.5,-135 750.5,-135 838.5,-135 838.5,-135 844.5,-135 850.5,-141 850.5,-147 850.5,-147 850.5,-159 850.5,-159 850.5,-165 844.5,-171 838.5,-171"/>
<text text-anchor="middle" x="794.5" y="-149.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">prepare_snap_ctx</text>
</g>
<!-- read_pool_spawn_handle&#45;&gt;prepare_snap_ctx -->
<g id="edge4" class="edge">
<title>read_pool_spawn_handle&#45;&gt;prepare_snap_ctx</title>
<path fill="none" stroke="#666666" d="M669.64,-173.88C689.43,-170.54 709.84,-167.1 728.24,-164"/>
<polygon fill="#666666" stroke="#666666" points="728.96,-167.43 738.24,-162.32 727.79,-160.53 728.96,-167.43"/>
</g>
<!-- with_tls_engine -->
<g id="node6" class="node">
<title>with_tls_engine</title>
<path fill="none" stroke="#1c2123" d="M1036.5,-191C1036.5,-191 957.5,-191 957.5,-191 951.5,-191 945.5,-185 945.5,-179 945.5,-179 945.5,-167 945.5,-167 945.5,-161 951.5,-155 957.5,-155 957.5,-155 1036.5,-155 1036.5,-155 1042.5,-155 1048.5,-161 1048.5,-167 1048.5,-167 1048.5,-179 1048.5,-179 1048.5,-185 1042.5,-191 1036.5,-191"/>
<text text-anchor="middle" x="997" y="-169.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">with_tls_engine</text>
</g>
<!-- read_pool_spawn_handle&#45;&gt;with_tls_engine -->
<g id="edge5" class="edge">
<title>read_pool_spawn_handle&#45;&gt;with_tls_engine</title>
<path fill="none" stroke="#666666" d="M669.53,-187.5C729.42,-185.78 808.24,-183.22 878,-180 896.68,-179.14 917.01,-178 935.46,-176.9"/>
<polygon fill="#666666" stroke="#666666" points="935.71,-180.39 945.48,-176.29 935.29,-173.4 935.71,-180.39"/>
</g>
<!-- snapshot -->
<g id="node7" class="node">
<title>snapshot</title>
<path fill="none" stroke="#1c2123" d="M1168,-205C1168,-205 1128,-205 1128,-205 1122,-205 1116,-199 1116,-193 1116,-193 1116,-181 1116,-181 1116,-175 1122,-169 1128,-169 1128,-169 1168,-169 1168,-169 1174,-169 1180,-175 1180,-181 1180,-181 1180,-193 1180,-193 1180,-199 1174,-205 1168,-205"/>
<text text-anchor="middle" x="1148" y="-183.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">snapshot</text>
</g>
<!-- read_pool_spawn_handle&#45;&gt;snapshot -->
<g id="edge6" class="edge">
<title>read_pool_spawn_handle&#45;&gt;snapshot</title>
<path fill="none" stroke="#666666" d="M669.53,-199.12C772.98,-207.31 942.71,-215.82 1088,-200 1093.88,-199.36 1100.03,-198.37 1106.05,-197.22"/>
<polygon fill="#666666" stroke="#666666" points="1106.9,-200.62 1115.98,-195.16 1105.47,-193.76 1106.9,-200.62"/>
</g>
<!-- prepare_snap_ctx&#45;&gt;with_tls_engine -->
<g id="edge7" class="edge">
<title>prepare_snap_ctx&#45;&gt;with_tls_engine</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M850.55,-158.49C876.77,-161.11 908.19,-164.24 935.12,-166.93"/>
<polygon fill="green" stroke="green" points="934.9,-170.42 945.2,-167.93 935.59,-163.46 934.9,-170.42"/>
</g>
<!-- with_tls_engine&#45;&gt;snapshot -->
<g id="edge8" class="edge">
<title>with_tls_engine&#45;&gt;snapshot</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1048.86,-177.78C1067.47,-179.53 1088.27,-181.48 1105.91,-183.14"/>
<polygon fill="green" stroke="green" points="1105.61,-186.63 1115.9,-184.08 1106.27,-179.66 1105.61,-186.63"/>
</g>
<!-- snapshot&#45;&gt;snap_store_get -->
<g id="edge10" class="edge">
<title>snapshot&#45;&gt;snap_store_get</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1159.72,-168.8C1171.77,-149.31 1192.72,-118.21 1216,-96 1230.8,-81.88 1249.24,-68.89 1265.68,-58.56"/>
<polygon fill="green" stroke="green" points="1267.88,-61.32 1274.58,-53.11 1264.22,-55.35 1267.88,-61.32"/>
</g>
<!-- kv_snapshot -->
<g id="node8" class="node">
<title>kv_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1228,-152.5C1228,-152.5 1389,-152.5 1389,-152.5 1395,-152.5 1401,-158.5 1401,-164.5 1401,-164.5 1401,-209.5 1401,-209.5 1401,-215.5 1395,-221.5 1389,-221.5 1389,-221.5 1228,-221.5 1228,-221.5 1222,-221.5 1216,-215.5 1216,-209.5 1216,-209.5 1216,-164.5 1216,-164.5 1216,-158.5 1222,-152.5 1228,-152.5"/>
<text text-anchor="start" x="1224" y="-206.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv::snapshot</text>
<polyline fill="none" stroke="#1c2123" points="1216,-198.5 1401,-198.5 "/>
<text text-anchor="start" x="1224" y="-183.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Get a snapshot of engine</text>
<polyline fill="none" stroke="#1c2123" points="1216,-175.5 1401,-175.5 "/>
<text text-anchor="start" x="1224" y="-160.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">异步的获取engine的snapshot</text>
</g>
<!-- snapshot&#45;&gt;kv_snapshot -->
<g id="edge9" class="edge">
<title>snapshot&#45;&gt;kv_snapshot</title>
<path fill="none" stroke="#666666" d="M1180.31,-187C1187.92,-187 1196.46,-187 1205.44,-187"/>
<polygon fill="#666666" stroke="#666666" points="1205.72,-190.5 1215.72,-187 1205.72,-183.5 1205.72,-190.5"/>
</g>
<!-- engine_async_snapshot -->
<g id="node9" class="node">
<title>engine_async_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1461,-109C1461,-109 1627,-109 1627,-109 1633,-109 1639,-115 1639,-121 1639,-121 1639,-143 1639,-143 1639,-149 1633,-155 1627,-155 1627,-155 1461,-155 1461,-155 1455,-155 1449,-149 1449,-143 1449,-143 1449,-121 1449,-121 1449,-115 1455,-109 1461,-109"/>
<text text-anchor="start" x="1457" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Engine::async_snapshot</text>
<polyline fill="none" stroke="#1c2123" points="1449,-132 1639,-132 "/>
<text text-anchor="start" x="1457" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">等read ready后会回调callback</text>
</g>
<!-- kv_snapshot&#45;&gt;engine_async_snapshot -->
<g id="edge11" class="edge">
<title>kv_snapshot&#45;&gt;engine_async_snapshot</title>
<path fill="none" stroke="#666666" d="M1401.12,-165.42C1413.52,-162.5 1426.31,-159.49 1438.91,-156.52"/>
<polygon fill="#666666" stroke="#666666" points="1440.03,-159.85 1448.96,-154.15 1438.42,-153.04 1440.03,-159.85"/>
</g>
<!-- paired_must_called_future_callback -->
<g id="node10" class="node">
<title>paired_must_called_future_callback</title>
<path fill="none" stroke="#1c2123" d="M1449,-174.5C1449,-174.5 1639,-174.5 1639,-174.5 1645,-174.5 1651,-180.5 1651,-186.5 1651,-186.5 1651,-223.5 1651,-223.5 1651,-229.5 1645,-235.5 1639,-235.5 1639,-235.5 1449,-235.5 1449,-235.5 1443,-235.5 1437,-229.5 1437,-223.5 1437,-223.5 1437,-186.5 1437,-186.5 1437,-180.5 1443,-174.5 1449,-174.5"/>
<text text-anchor="start" x="1445" y="-220.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">paired_must_called_future_callback</text>
<polyline fill="none" stroke="#1c2123" points="1437,-212.5 1651,-212.5 "/>
<text text-anchor="start" x="1445" y="-197.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">返回一个callback和future</text>
<text text-anchor="start" x="1445" y="-182.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用callback会触发future</text>
</g>
<!-- kv_snapshot&#45;&gt;paired_must_called_future_callback -->
<g id="edge12" class="edge">
<title>kv_snapshot&#45;&gt;paired_must_called_future_callback</title>
<path fill="none" stroke="#666666" d="M1401.12,-194.06C1409.56,-194.71 1418.2,-195.38 1426.83,-196.04"/>
<polygon fill="#666666" stroke="#666666" points="1426.7,-199.55 1436.94,-196.82 1427.24,-192.57 1426.7,-199.55"/>
</g>
<!-- callback -->
<g id="node11" class="node">
<title>callback</title>
<path fill="none" stroke="#1c2123" d="M1699,-139.5C1699,-139.5 1837,-139.5 1837,-139.5 1843,-139.5 1849,-145.5 1849,-151.5 1849,-151.5 1849,-188.5 1849,-188.5 1849,-194.5 1843,-200.5 1837,-200.5 1837,-200.5 1699,-200.5 1699,-200.5 1693,-200.5 1687,-194.5 1687,-188.5 1687,-188.5 1687,-151.5 1687,-151.5 1687,-145.5 1693,-139.5 1699,-139.5"/>
<text text-anchor="middle" x="1768" y="-185.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">callback</text>
<polyline fill="none" stroke="#1c2123" points="1687,-177.5 1849,-177.5 "/>
<text text-anchor="start" x="1695" y="-162.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">lease read或readIndex OK</text>
<text text-anchor="start" x="1695" y="-147.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 后callback</text>
</g>
<!-- engine_async_snapshot&#45;&gt;callback -->
<g id="edge13" class="edge">
<title>engine_async_snapshot&#45;&gt;callback</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1639.15,-148.12C1651.64,-150.25 1664.43,-152.44 1676.86,-154.57"/>
<polygon fill="green" stroke="green" points="1676.28,-158.02 1686.73,-156.26 1677.46,-151.12 1676.28,-158.02"/>
</g>
<!-- paired_must_called_future_callback&#45;&gt;callback -->
<g id="edge14" class="edge">
<title>paired_must_called_future_callback&#45;&gt;callback</title>
<path fill="none" stroke="#666666" d="M1651.12,-188.27C1659.78,-186.9 1668.47,-185.53 1676.99,-184.19"/>
<polygon fill="#666666" stroke="#666666" points="1677.57,-187.64 1686.9,-182.63 1676.48,-180.73 1677.57,-187.64"/>
</g>
<!-- future -->
<g id="node12" class="node">
<title>future</title>
<path fill="none" stroke="#1c2123" d="M1927,-238C1927,-238 1897,-238 1897,-238 1891,-238 1885,-232 1885,-226 1885,-226 1885,-214 1885,-214 1885,-208 1891,-202 1897,-202 1897,-202 1927,-202 1927,-202 1933,-202 1939,-208 1939,-214 1939,-214 1939,-226 1939,-226 1939,-232 1933,-238 1927,-238"/>
<text text-anchor="middle" x="1912" y="-216.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">future</text>
</g>
<!-- paired_must_called_future_callback&#45;&gt;future -->
<g id="edge15" class="edge">
<title>paired_must_called_future_callback&#45;&gt;future</title>
<path fill="none" stroke="#666666" d="M1651.35,-209.36C1726.62,-212.44 1823.01,-216.39 1874.58,-218.51"/>
<polygon fill="#666666" stroke="#666666" points="1874.74,-222.02 1884.88,-218.93 1875.03,-215.02 1874.74,-222.02"/>
</g>
<!-- callback&#45;&gt;future -->
<g id="edge16" class="edge">
<title>callback&#45;&gt;future</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1849.13,-198.21C1858.15,-201.39 1866.98,-204.5 1875,-207.33"/>
<polygon fill="green" stroke="green" points="1874.11,-210.72 1884.7,-210.74 1876.43,-204.12 1874.11,-210.72"/>
</g>
<!-- future&#45;&gt;snapshot -->
<g id="edge17" class="edge">
<title>future&#45;&gt;snapshot</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1884.86,-223.35C1838.06,-229.16 1736.83,-240.88 1651,-245 1457.79,-254.27 1399.48,-292.25 1216,-231 1202.88,-226.62 1189.84,-219 1178.8,-211.33"/>
<polygon fill="green" stroke="green" points="1180.56,-208.28 1170.42,-205.22 1176.44,-213.94 1180.56,-208.28"/>
</g>
<!-- kv_get -->
<g id="node13" class="node">
<title>kv_get</title>
<path fill="none" stroke="#1c2123" d="M28,-368C28,-368 141,-368 141,-368 147,-368 153,-374 153,-380 153,-380 153,-402 153,-402 153,-408 147,-414 141,-414 141,-414 28,-414 28,-414 22,-414 16,-408 16,-402 16,-402 16,-380 16,-380 16,-374 22,-368 28,-368"/>
<text text-anchor="start" x="24" y="-398.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv_get</text>
<polyline fill="none" stroke="#1c2123" points="16,-391 153,-391 "/>
<text text-anchor="middle" x="84.5" y="-375.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理GetRequest请求</text>
</g>
<!-- async_task -->
<g id="node14" class="node">
<title>async_task</title>
<path fill="none" stroke="#1c2123" d="M723,-311C723,-311 866,-311 866,-311 872,-311 878,-317 878,-323 878,-323 878,-443 878,-443 878,-449 872,-455 866,-455 866,-455 723,-455 723,-455 717,-455 711,-449 711,-443 711,-443 711,-323 711,-323 711,-317 717,-311 723,-311"/>
<text text-anchor="middle" x="794.5" y="-439.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">async_task</text>
<polyline fill="none" stroke="#1c2123" points="711,-432 878,-432 "/>
<text text-anchor="start" x="719" y="-416.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">task = async move {</text>
<text text-anchor="start" x="719" y="-401.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 等待future异步任务完成</text>
<text text-anchor="start" x="719" y="-386.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后发送resp</text>
<polyline fill="none" stroke="#1c2123" points="711,-379 878,-379 "/>
<text text-anchor="start" x="719" y="-363.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">let resp = resp.await?;</text>
<text text-anchor="start" x="719" y="-348.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> sink.success(resp).await?;</text>
<text text-anchor="start" x="719" y="-333.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> ...</text>
<text text-anchor="start" x="719" y="-318.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> }</text>
</g>
<!-- kv_get&#45;&gt;async_task -->
<g id="edge19" class="edge">
<title>kv_get&#45;&gt;async_task</title>
<path fill="none" stroke="#666666" d="M153.07,-390.24C280.4,-388.8 556.07,-385.68 700.68,-384.05"/>
<polygon fill="#666666" stroke="#666666" points="700.9,-387.55 710.86,-383.93 700.83,-380.55 700.9,-387.55"/>
</g>
<!-- ctx_spawn -->
<g id="node15" class="node">
<title>ctx_spawn</title>
<path fill="none" stroke="#1c2123" d="M926,-394C926,-394 1068,-394 1068,-394 1074,-394 1080,-400 1080,-406 1080,-406 1080,-428 1080,-428 1080,-434 1074,-440 1068,-440 1068,-440 926,-440 926,-440 920,-440 914,-434 914,-428 914,-428 914,-406 914,-406 914,-400 920,-394 926,-394"/>
<text text-anchor="middle" x="997" y="-424.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RpcContext::spawn</text>
<polyline fill="none" stroke="#1c2123" points="914,-417 1080,-417 "/>
<text text-anchor="middle" x="997" y="-401.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">grpc contex执行异步任务</text>
</g>
<!-- kv_get&#45;&gt;ctx_spawn -->
<g id="edge20" class="edge">
<title>kv_get&#45;&gt;ctx_spawn</title>
<path fill="none" stroke="#666666" d="M132.19,-414.18C186.67,-439.04 280.13,-475 365,-475 365,-475 365,-475 574,-475 709.18,-475 745.77,-493.13 878,-465 899.19,-460.49 921.45,-452.4 940.84,-444.14"/>
<polygon fill="#666666" stroke="#666666" points="942.36,-447.29 950.12,-440.08 939.56,-440.88 942.36,-447.29"/>
</g>
<!-- future_get -->
<g id="node17" class="node">
<title>future_get</title>
<path fill="none" stroke="#1c2123" d="M249,-359C249,-359 201,-359 201,-359 195,-359 189,-353 189,-347 189,-347 189,-335 189,-335 189,-329 195,-323 201,-323 201,-323 249,-323 249,-323 255,-323 261,-329 261,-335 261,-335 261,-347 261,-347 261,-353 255,-359 249,-359"/>
<text text-anchor="middle" x="225" y="-337.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">future_get</text>
</g>
<!-- kv_get&#45;&gt;future_get -->
<g id="edge21" class="edge">
<title>kv_get&#45;&gt;future_get</title>
<path fill="none" stroke="#666666" d="M149.48,-367.9C159.47,-364.29 169.62,-360.63 179.07,-357.22"/>
<polygon fill="#666666" stroke="#666666" points="180.41,-360.46 188.63,-353.77 178.03,-353.87 180.41,-360.46"/>
</g>
<!-- async_task&#45;&gt;ctx_spawn -->
<g id="edge22" class="edge">
<title>async_task&#45;&gt;ctx_spawn</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M878.21,-397.03C886.66,-398.46 895.28,-399.92 903.83,-401.37"/>
<polygon fill="green" stroke="green" points="903.36,-404.84 913.8,-403.06 904.53,-397.94 903.36,-404.84"/>
</g>
<!-- future_get_async_task&#45;&gt;async_task -->
<g id="edge18" class="edge">
<title>future_get_async_task&#45;&gt;async_task</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M675.08,-360.34C683.65,-361.98 692.29,-363.63 700.8,-365.26"/>
<polygon fill="green" stroke="green" points="700.22,-368.72 710.7,-367.16 701.54,-361.84 700.22,-368.72"/>
</g>
<!-- future_get&#45;&gt;Storage_get -->
<g id="edge23" class="edge">
<title>future_get&#45;&gt;Storage_get</title>
<path fill="none" stroke="#666666" d="M247.72,-322.88C267.15,-306.66 296.23,-282.39 320.58,-262.07"/>
<polygon fill="#666666" stroke="#666666" points="322.86,-264.72 328.3,-255.63 318.38,-259.35 322.86,-264.72"/>
</g>
<!-- future_get&#45;&gt;future_get_async_task -->
<g id="edge24" class="edge">
<title>future_get&#45;&gt;future_get_async_task</title>
<path fill="none" stroke="#666666" d="M261.08,-341C307.59,-341 391.82,-341 460.9,-341"/>
<polygon fill="#666666" stroke="#666666" points="460.97,-344.5 470.97,-341 460.97,-337.5 460.97,-344.5"/>
</g>
</g>
</svg>
