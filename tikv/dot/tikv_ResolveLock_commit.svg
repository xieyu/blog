<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: dig Pages: 1 -->
<svg width="1198pt" height="644pt"
 viewBox="0.00 0.00 1198.00 644.17" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 640.17)">
<title>dig</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-640.17 1194,-640.17 1194,4 -4,4"/>
<!-- commit -->
<g id="node1" class="node">
<title>commit</title>
<path fill="none" stroke="#1c2123" d="M47,-393.17C47,-393.17 12,-393.17 12,-393.17 6,-393.17 0,-387.17 0,-381.17 0,-381.17 0,-369.17 0,-369.17 0,-363.17 6,-357.17 12,-357.17 12,-357.17 47,-357.17 47,-357.17 53,-357.17 59,-363.17 59,-369.17 59,-369.17 59,-381.17 59,-381.17 59,-387.17 53,-393.17 47,-393.17"/>
<text text-anchor="middle" x="29.5" y="-371.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">commit</text>
</g>
<!-- ErrorInner__CommitTsExpired -->
<g id="node2" class="node">
<title>ErrorInner__CommitTsExpired</title>
<path fill="#bcffb9" stroke="#8a8898" d="M889,-418.67C889,-418.67 1059,-418.67 1059,-418.67 1065,-418.67 1071,-424.67 1071,-430.67 1071,-430.67 1071,-497.67 1071,-497.67 1071,-503.67 1065,-509.67 1059,-509.67 1059,-509.67 889,-509.67 889,-509.67 883,-509.67 877,-503.67 877,-497.67 877,-497.67 877,-430.67 877,-430.67 877,-424.67 883,-418.67 889,-418.67"/>
<text text-anchor="start" x="885" y="-494.47" font-family="Times,serif" font-size="14.00" fill="#5d6179">ErrorInner</text>
<text text-anchor="start" x="885" y="-479.47" font-family="Times,serif" font-size="14.00" fill="#5d6179"> CommitTsExpired</text>
<polyline fill="none" stroke="#8a8898" points="877,-471.67 1071,-471.67 "/>
<text text-anchor="start" x="885" y="-456.47" font-family="Times,serif" font-size="14.00" fill="#5d6179">如果commit_ts &lt;</text>
<text text-anchor="start" x="885" y="-441.47" font-family="Times,serif" font-size="14.00" fill="#5d6179"> lock.min_commit_ts</text>
<text text-anchor="start" x="885" y="-426.47" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 则返回CommitTsExpired错误</text>
</g>
<!-- commit&#45;&gt;ErrorInner__CommitTsExpired -->
<g id="edge1" class="edge">
<title>commit&#45;&gt;ErrorInner__CommitTsExpired</title>
<path fill="none" stroke="#666666" d="M59.3,-387.72C110.97,-409.07 223.32,-450.17 322.5,-450.17 322.5,-450.17 322.5,-450.17 529.5,-450.17 644.84,-450.17 776.98,-454.96 866.8,-458.94"/>
<polygon fill="#666666" stroke="#666666" points="866.85,-462.44 877,-459.39 867.16,-455.45 866.85,-462.44"/>
</g>
<!-- SnapshotReader__get_txn_commit_record -->
<g id="node3" class="node">
<title>SnapshotReader__get_txn_commit_record</title>
<path fill="none" stroke="#1c2123" d="M462.5,-140.17C462.5,-140.17 594.5,-140.17 594.5,-140.17 600.5,-140.17 606.5,-146.17 606.5,-152.17 606.5,-152.17 606.5,-196.17 606.5,-196.17 606.5,-202.17 600.5,-208.17 594.5,-208.17 594.5,-208.17 462.5,-208.17 462.5,-208.17 456.5,-208.17 450.5,-202.17 450.5,-196.17 450.5,-196.17 450.5,-152.17 450.5,-152.17 450.5,-146.17 456.5,-140.17 462.5,-140.17"/>
<text text-anchor="start" x="458.5" y="-192.97" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapshotReader</text>
<text text-anchor="start" x="458.5" y="-177.97" font-family="Times,serif" font-size="14.00" fill="#2f3638"> get_txn_commit_record</text>
<text text-anchor="start" x="458.5" y="-162.97" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 扫描从max_ts到start_ts</text>
<text text-anchor="start" x="458.5" y="-147.97" font-family="Times,serif" font-size="14.00" fill="#2f3638"> key的所有 write record</text>
</g>
<!-- commit&#45;&gt;SnapshotReader__get_txn_commit_record -->
<g id="edge2" class="edge">
<title>commit&#45;&gt;SnapshotReader__get_txn_commit_record</title>
<path fill="none" stroke="#666666" d="M31.52,-357.15C34.57,-321.47 46.73,-241.88 95,-202.17 191.39,-122.88 344.46,-134.59 440.28,-152.66"/>
<polygon fill="#666666" stroke="#666666" points="439.75,-156.12 450.23,-154.6 441.08,-149.25 439.75,-156.12"/>
</g>
<!-- SnapshotReader__load_lock -->
<g id="node4" class="node">
<title>SnapshotReader__load_lock</title>
<path fill="none" stroke="#1c2123" d="M107,-211.17C107,-211.17 187,-211.17 187,-211.17 193,-211.17 199,-217.17 199,-223.17 199,-223.17 199,-237.17 199,-237.17 199,-243.17 193,-249.17 187,-249.17 187,-249.17 107,-249.17 107,-249.17 101,-249.17 95,-243.17 95,-237.17 95,-237.17 95,-223.17 95,-223.17 95,-217.17 101,-211.17 107,-211.17"/>
<text text-anchor="start" x="103" y="-233.97" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapshotReader</text>
<text text-anchor="start" x="103" y="-218.97" font-family="Times,serif" font-size="14.00" fill="#2f3638"> load_lock</text>
</g>
<!-- commit&#45;&gt;SnapshotReader__load_lock -->
<g id="edge3" class="edge">
<title>commit&#45;&gt;SnapshotReader__load_lock</title>
<path fill="none" stroke="#666666" d="M37.94,-357C48.18,-333.55 68.44,-292.42 95,-264.17 97.87,-261.12 101.06,-258.2 104.41,-255.45"/>
<polygon fill="#666666" stroke="#666666" points="106.6,-258.18 112.43,-249.34 102.36,-252.61 106.6,-258.18"/>
</g>
<!-- Lock__rollback_ts -->
<g id="node5" class="node">
<title>Lock__rollback_ts</title>
<path fill="none" stroke="#1c2123" d="M460,-478.67C460,-478.67 597,-478.67 597,-478.67 603,-478.67 609,-484.67 609,-490.67 609,-490.67 609,-557.67 609,-557.67 609,-563.67 603,-569.67 597,-569.67 597,-569.67 460,-569.67 460,-569.67 454,-569.67 448,-563.67 448,-557.67 448,-557.67 448,-490.67 448,-490.67 448,-484.67 454,-478.67 460,-478.67"/>
<text text-anchor="start" x="456" y="-554.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock</text>
<text text-anchor="start" x="456" y="-539.47" font-family="Times,serif" font-size="14.00" fill="#2f3638"> rollback_ts</text>
<polyline fill="none" stroke="#1c2123" points="448,-531.67 609,-531.67 "/>
<text text-anchor="start" x="456" y="-516.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">遍历rollback_ts</text>
<text text-anchor="start" x="456" y="-501.47" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果ts == commit_ts</text>
<text text-anchor="start" x="456" y="-486.47" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 则set_verlapped_rollback</text>
</g>
<!-- commit&#45;&gt;Lock__rollback_ts -->
<g id="edge4" class="edge">
<title>commit&#45;&gt;Lock__rollback_ts</title>
<path fill="none" stroke="#666666" d="M38.21,-393.27C48.1,-414.1 67.35,-447.57 95,-464.17 200.08,-527.27 344.95,-534.6 437.44,-531.43"/>
<polygon fill="#666666" stroke="#666666" points="437.76,-534.92 447.61,-531.03 437.48,-527.93 437.76,-534.92"/>
</g>
<!-- Write__set_ovelapped_rollback -->
<g id="node6" class="node">
<title>Write__set_ovelapped_rollback</title>
<path fill="none" stroke="#1c2123" d="M680.5,-519.17C680.5,-519.17 805.5,-519.17 805.5,-519.17 811.5,-519.17 817.5,-525.17 817.5,-531.17 817.5,-531.17 817.5,-545.17 817.5,-545.17 817.5,-551.17 811.5,-557.17 805.5,-557.17 805.5,-557.17 680.5,-557.17 680.5,-557.17 674.5,-557.17 668.5,-551.17 668.5,-545.17 668.5,-545.17 668.5,-531.17 668.5,-531.17 668.5,-525.17 674.5,-519.17 680.5,-519.17"/>
<text text-anchor="start" x="676.5" y="-541.97" font-family="Times,serif" font-size="14.00" fill="#2f3638">Write</text>
<text text-anchor="start" x="676.5" y="-526.97" font-family="Times,serif" font-size="14.00" fill="#2f3638"> set_ovelapped_rollback</text>
</g>
<!-- commit&#45;&gt;Write__set_ovelapped_rollback -->
<g id="edge5" class="edge">
<title>commit&#45;&gt;Write__set_ovelapped_rollback</title>
<path fill="none" stroke="#666666" d="M34.95,-393.29C42.57,-420.41 60.7,-471.35 95,-499.17 145.17,-539.86 172.12,-523.39 235,-538.17 397.78,-576.44 443.65,-604.08 609,-579.17 633.77,-575.44 660.3,-568 683.09,-560.48"/>
<polygon fill="#666666" stroke="#666666" points="684.26,-563.78 692.61,-557.26 682.02,-557.14 684.26,-563.78"/>
</g>
<!-- MvccTxn__put_write -->
<g id="node7" class="node">
<title>MvccTxn__put_write</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1124,-433.67C1124,-433.67 1173,-433.67 1173,-433.67 1179,-433.67 1185,-439.67 1185,-445.67 1185,-445.67 1185,-482.67 1185,-482.67 1185,-488.67 1179,-494.67 1173,-494.67 1173,-494.67 1124,-494.67 1124,-494.67 1118,-494.67 1112,-488.67 1112,-482.67 1112,-482.67 1112,-445.67 1112,-445.67 1112,-439.67 1118,-433.67 1124,-433.67"/>
<text text-anchor="start" x="1120" y="-479.47" font-family="Times,serif" font-size="14.00" fill="#5d6179">MvccTxn</text>
<text text-anchor="start" x="1120" y="-464.47" font-family="Times,serif" font-size="14.00" fill="#5d6179"> put_write</text>
<polyline fill="none" stroke="#8a8898" points="1112,-456.67 1185,-456.67 "/>
<text text-anchor="start" x="1120" y="-441.47" font-family="Times,serif" font-size="14.00" fill="#5d6179">提交write</text>
</g>
<!-- commit&#45;&gt;MvccTxn__put_write -->
<g id="edge6" class="edge">
<title>commit&#45;&gt;MvccTxn__put_write</title>
<path fill="none" stroke="#666666" d="M33.76,-393.67C40.19,-425.21 57.3,-489.82 95,-529.17 172.29,-609.86 210.76,-636.17 322.5,-636.17 322.5,-636.17 322.5,-636.17 744,-636.17 894.74,-636.17 942.05,-624.23 1071,-546.17 1089.44,-535.01 1106.24,-518.17 1119.36,-502.64"/>
<polygon fill="#666666" stroke="#666666" points="1122.25,-504.64 1125.88,-494.68 1116.84,-500.2 1122.25,-504.64"/>
</g>
<!-- MvccTxn__unlock_key -->
<g id="node8" class="node">
<title>MvccTxn__unlock_key</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1119,-118.67C1119,-118.67 1178,-118.67 1178,-118.67 1184,-118.67 1190,-124.67 1190,-130.67 1190,-130.67 1190,-167.67 1190,-167.67 1190,-173.67 1184,-179.67 1178,-179.67 1178,-179.67 1119,-179.67 1119,-179.67 1113,-179.67 1107,-173.67 1107,-167.67 1107,-167.67 1107,-130.67 1107,-130.67 1107,-124.67 1113,-118.67 1119,-118.67"/>
<text text-anchor="start" x="1115" y="-164.47" font-family="Times,serif" font-size="14.00" fill="#5d6179">MvccTxn</text>
<text text-anchor="start" x="1115" y="-149.47" font-family="Times,serif" font-size="14.00" fill="#5d6179"> unlock_key</text>
<polyline fill="none" stroke="#8a8898" points="1107,-141.67 1190,-141.67 "/>
<text text-anchor="start" x="1115" y="-126.47" font-family="Times,serif" font-size="14.00" fill="#5d6179">清理掉lock</text>
</g>
<!-- commit&#45;&gt;MvccTxn__unlock_key -->
<g id="edge7" class="edge">
<title>commit&#45;&gt;MvccTxn__unlock_key</title>
<path fill="none" stroke="#666666" d="M31.39,-357.16C34.23,-316.24 46.1,-214.76 95,-149.17 166.67,-53.05 202.6,-4.17 322.5,-4.17 322.5,-4.17 322.5,-4.17 744,-4.17 891.02,-4.17 943.58,19.17 1071,-54.17 1093.7,-67.24 1112.32,-89.86 1125.51,-109.75"/>
<polygon fill="#666666" stroke="#666666" points="1122.68,-111.81 1131,-118.36 1128.58,-108.04 1122.68,-111.81"/>
</g>
<!-- WriteType__from_lock_type -->
<g id="node9" class="node">
<title>WriteType__from_lock_type</title>
<path fill="none" stroke="#1c2123" d="M932.5,-323.17C932.5,-323.17 1015.5,-323.17 1015.5,-323.17 1021.5,-323.17 1027.5,-329.17 1027.5,-335.17 1027.5,-335.17 1027.5,-349.17 1027.5,-349.17 1027.5,-355.17 1021.5,-361.17 1015.5,-361.17 1015.5,-361.17 932.5,-361.17 932.5,-361.17 926.5,-361.17 920.5,-355.17 920.5,-349.17 920.5,-349.17 920.5,-335.17 920.5,-335.17 920.5,-329.17 926.5,-323.17 932.5,-323.17"/>
<text text-anchor="start" x="928.5" y="-345.97" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteType</text>
<text text-anchor="start" x="928.5" y="-330.97" font-family="Times,serif" font-size="14.00" fill="#2f3638"> from_lock_type</text>
</g>
<!-- commit&#45;&gt;WriteType__from_lock_type -->
<g id="edge8" class="edge">
<title>commit&#45;&gt;WriteType__from_lock_type</title>
<path fill="none" stroke="#666666" d="M59.2,-365.44C98.39,-352.64 171.08,-330.69 235,-321.17 353.72,-303.49 833.18,-312.32 841,-313.17 863.96,-315.66 888.78,-320.53 910.63,-325.57"/>
<polygon fill="#666666" stroke="#666666" points="909.91,-328.99 920.44,-327.89 911.52,-322.18 909.91,-328.99"/>
</g>
<!-- WriteType__Rollback -->
<g id="node12" class="node">
<title>WriteType__Rollback</title>
<path fill="none" stroke="#1c2123" d="M657,-151.17C657,-151.17 829,-151.17 829,-151.17 835,-151.17 841,-157.17 841,-163.17 841,-163.17 841,-215.17 841,-215.17 841,-221.17 835,-227.17 829,-227.17 829,-227.17 657,-227.17 657,-227.17 651,-227.17 645,-221.17 645,-215.17 645,-215.17 645,-163.17 645,-163.17 645,-157.17 651,-151.17 657,-151.17"/>
<text text-anchor="start" x="653" y="-211.97" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteType</text>
<text text-anchor="start" x="653" y="-196.97" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Rollback</text>
<polyline fill="none" stroke="#1c2123" points="645,-189.17 841,-189.17 "/>
<text text-anchor="start" x="653" y="-173.97" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果类型为Rollback</text>
<text text-anchor="start" x="653" y="-158.97" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 则返回错误TxnLockNotFound</text>
</g>
<!-- SnapshotReader__get_txn_commit_record&#45;&gt;WriteType__Rollback -->
<g id="edge12" class="edge">
<title>SnapshotReader__get_txn_commit_record&#45;&gt;WriteType__Rollback</title>
<path fill="none" stroke="#666666" d="M606.52,-179.61C615.77,-180.26 625.35,-180.94 634.94,-181.61"/>
<polygon fill="#666666" stroke="#666666" points="634.7,-185.1 644.92,-182.32 635.19,-178.12 634.7,-185.1"/>
</g>
<!-- WriteType__Other -->
<g id="node14" class="node">
<title>WriteType__Other</title>
<path fill="none" stroke="#1c2123" d="M678.5,-32.67C678.5,-32.67 807.5,-32.67 807.5,-32.67 813.5,-32.67 819.5,-38.67 819.5,-44.67 819.5,-44.67 819.5,-119.67 819.5,-119.67 819.5,-125.67 813.5,-131.67 807.5,-131.67 807.5,-131.67 678.5,-131.67 678.5,-131.67 672.5,-131.67 666.5,-125.67 666.5,-119.67 666.5,-119.67 666.5,-44.67 666.5,-44.67 666.5,-38.67 672.5,-32.67 678.5,-32.67"/>
<text text-anchor="start" x="674.5" y="-116.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteType</text>
<text text-anchor="start" x="674.5" y="-101.47" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 为PUt/Delete/Lock</text>
<polyline fill="none" stroke="#1c2123" points="666.5,-93.67 819.5,-93.67 "/>
<text text-anchor="start" x="674.5" y="-78.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">Committed by concurent</text>
<text text-anchor="start" x="674.5" y="-63.47" font-family="Times,serif" font-size="14.00" fill="#2f3638"> transaction]</text>
<polyline fill="none" stroke="#1c2123" points="666.5,-55.67 819.5,-55.67 "/>
<text text-anchor="middle" x="743" y="-40.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">返回Ok(None)</text>
</g>
<!-- SnapshotReader__get_txn_commit_record&#45;&gt;WriteType__Other -->
<g id="edge13" class="edge">
<title>SnapshotReader__get_txn_commit_record&#45;&gt;WriteType__Other</title>
<path fill="none" stroke="#666666" d="M606.52,-140.83C622.95,-133.71 640.4,-126.16 657.11,-118.92"/>
<polygon fill="#666666" stroke="#666666" points="658.53,-122.12 666.31,-114.94 655.74,-115.7 658.53,-122.12"/>
</g>
<!-- lock__match -->
<g id="node10" class="node">
<title>lock__match</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M259.5,-330.17C259.5,-330.17 387.5,-330.17 387.5,-330.17 393.5,-330.17 399.5,-336.17 399.5,-342.17 399.5,-342.17 399.5,-364.17 399.5,-364.17 399.5,-370.17 393.5,-376.17 387.5,-376.17 387.5,-376.17 259.5,-376.17 259.5,-376.17 253.5,-376.17 247.5,-370.17 247.5,-364.17 247.5,-364.17 247.5,-342.17 247.5,-342.17 247.5,-336.17 253.5,-330.17 259.5,-330.17"/>
<text text-anchor="start" x="255.5" y="-360.97" font-family="Times,serif" font-size="14.00" fill="#5d6179">lock match</text>
<polyline fill="none" stroke="#8a8898" points="247.5,-353.17 399.5,-353.17 "/>
<text text-anchor="start" x="255.5" y="-337.97" font-family="Times,serif" font-size="14.00" fill="#5d6179">lock.ts == reader.start_ts</text>
</g>
<!-- SnapshotReader__load_lock&#45;&gt;lock__match -->
<g id="edge9" class="edge">
<title>SnapshotReader__load_lock&#45;&gt;lock__match</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M175.27,-249.39C203.69,-269.42 248.57,-301.06 281.31,-324.14"/>
<polygon fill="green" stroke="green" points="279.59,-327.21 289.78,-330.11 283.62,-321.48 279.59,-327.21"/>
</g>
<!-- lock__mismatch -->
<g id="node11" class="node">
<title>lock__mismatch</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M247,-188.67C247,-188.67 400,-188.67 400,-188.67 406,-188.67 412,-194.67 412,-200.67 412,-200.67 412,-237.67 412,-237.67 412,-243.67 406,-249.67 400,-249.67 400,-249.67 247,-249.67 247,-249.67 241,-249.67 235,-243.67 235,-237.67 235,-237.67 235,-200.67 235,-200.67 235,-194.67 241,-188.67 247,-188.67"/>
<text text-anchor="start" x="243" y="-234.47" font-family="Times,serif" font-size="14.00" fill="#5d6179">lock mismatch</text>
<text text-anchor="start" x="243" y="-219.47" font-family="Times,serif" font-size="14.00" fill="#5d6179"> lock 为none</text>
<polyline fill="none" stroke="#8a8898" points="235,-211.67 412,-211.67 "/>
<text text-anchor="middle" x="323.5" y="-196.47" font-family="Times,serif" font-size="14.00" fill="#5d6179">或者lock.ts != reader.start_ts</text>
</g>
<!-- SnapshotReader__load_lock&#45;&gt;lock__mismatch -->
<g id="edge10" class="edge">
<title>SnapshotReader__load_lock&#45;&gt;lock__mismatch</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M199.41,-226.93C207.43,-226.42 215.94,-225.89 224.59,-225.34"/>
<polygon fill="green" stroke="green" points="225.03,-228.82 234.79,-224.7 224.59,-221.84 225.03,-228.82"/>
</g>
<!-- Lock__rollback_ts&#45;&gt;Write__set_ovelapped_rollback -->
<g id="edge15" class="edge">
<title>Lock__rollback_ts&#45;&gt;Write__set_ovelapped_rollback</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M609.23,-529.42C625.32,-530.48 642.28,-531.6 658.5,-532.67"/>
<polygon fill="green" stroke="green" points="658.28,-536.16 668.49,-533.33 658.74,-529.18 658.28,-536.16"/>
</g>
<!-- Write__set_ovelapped_rollback&#45;&gt;MvccTxn__put_write -->
<g id="edge24" class="edge">
<title>Write__set_ovelapped_rollback&#45;&gt;MvccTxn__put_write</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M817.74,-545.38C885.57,-549.37 987.92,-548.62 1071,-519.17 1083.04,-514.9 1094.86,-508.12 1105.47,-500.75"/>
<polygon fill="green" stroke="green" points="1107.68,-503.47 1113.7,-494.75 1103.55,-497.81 1107.68,-503.47"/>
</g>
<!-- WriteType__from_lock_type&#45;&gt;MvccTxn__put_write -->
<g id="edge25" class="edge">
<title>WriteType__from_lock_type&#45;&gt;MvccTxn__put_write</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1027.65,-355.39C1042.43,-360.51 1057.99,-367.31 1071,-376.17 1090.27,-389.29 1107.68,-408.41 1121.01,-425.48"/>
<polygon fill="green" stroke="green" points="1118.38,-427.81 1127.21,-433.66 1123.96,-423.58 1118.38,-427.81"/>
</g>
<!-- lock__match&#45;&gt;ErrorInner__CommitTsExpired -->
<g id="edge17" class="edge">
<title>lock__match&#45;&gt;ErrorInner__CommitTsExpired</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M387.29,-376.24C406.54,-382.58 427.95,-388.87 448,-393.17 619.81,-429.99 667.51,-408.35 841,-436.17 849.49,-437.53 858.25,-439.08 867.04,-440.73"/>
<polygon fill="green" stroke="green" points="866.48,-444.18 876.96,-442.63 867.8,-437.31 866.48,-444.18"/>
</g>
<!-- lock__match&#45;&gt;Lock__rollback_ts -->
<g id="edge18" class="edge">
<title>lock__match&#45;&gt;Lock__rollback_ts</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M351.88,-376.23C380.77,-400.57 427.29,-439.76 465.2,-471.69"/>
<polygon fill="green" stroke="green" points="463.24,-474.62 473.15,-478.38 467.75,-469.26 463.24,-474.62"/>
</g>
<!-- lock__match&#45;&gt;MvccTxn__unlock_key -->
<g id="edge19" class="edge">
<title>lock__match&#45;&gt;MvccTxn__unlock_key</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M389,-330.1C407.84,-323.96 428.59,-317.76 448,-313.17 720.57,-248.7 817.9,-338.13 1071,-218.17 1086.79,-210.68 1101.68,-198.86 1114.04,-187.1"/>
<polygon fill="green" stroke="green" points="1116.75,-189.34 1121.4,-179.82 1111.83,-184.37 1116.75,-189.34"/>
</g>
<!-- LockType__Pessimistic -->
<g id="node16" class="node">
<title>LockType__Pessimistic</title>
<path fill="none" stroke="#1c2123" d="M462,-322.67C462,-322.67 595,-322.67 595,-322.67 601,-322.67 607,-328.67 607,-334.67 607,-334.67 607,-371.67 607,-371.67 607,-377.67 601,-383.67 595,-383.67 595,-383.67 462,-383.67 462,-383.67 456,-383.67 450,-377.67 450,-371.67 450,-371.67 450,-334.67 450,-334.67 450,-328.67 456,-322.67 462,-322.67"/>
<text text-anchor="start" x="458" y="-368.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockType</text>
<text text-anchor="start" x="458" y="-353.47" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Pessimistic</text>
<polyline fill="none" stroke="#1c2123" points="450,-345.67 607,-345.67 "/>
<text text-anchor="start" x="458" y="-330.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果Lock type为悲观锁</text>
</g>
<!-- lock__match&#45;&gt;LockType__Pessimistic -->
<g id="edge20" class="edge">
<title>lock__match&#45;&gt;LockType__Pessimistic</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M399.51,-353.17C412.56,-353.17 426.24,-353.17 439.6,-353.17"/>
<polygon fill="green" stroke="green" points="439.74,-356.67 449.74,-353.17 439.74,-349.67 439.74,-356.67"/>
</g>
<!-- lock__mismatch&#45;&gt;SnapshotReader__get_txn_commit_record -->
<g id="edge16" class="edge">
<title>lock__mismatch&#45;&gt;SnapshotReader__get_txn_commit_record</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M412.06,-199.76C421.54,-197.66 431.18,-195.52 440.65,-193.42"/>
<polygon fill="green" stroke="green" points="441.44,-196.83 450.44,-191.25 439.92,-190 441.44,-196.83"/>
</g>
<!-- ErrorInner__TxnNotFound -->
<g id="node13" class="node">
<title>ErrorInner__TxnNotFound</title>
<path fill="#bcffb9" stroke="#8a8898" d="M923.5,-170.17C923.5,-170.17 1024.5,-170.17 1024.5,-170.17 1030.5,-170.17 1036.5,-176.17 1036.5,-182.17 1036.5,-182.17 1036.5,-196.17 1036.5,-196.17 1036.5,-202.17 1030.5,-208.17 1024.5,-208.17 1024.5,-208.17 923.5,-208.17 923.5,-208.17 917.5,-208.17 911.5,-202.17 911.5,-196.17 911.5,-196.17 911.5,-182.17 911.5,-182.17 911.5,-176.17 917.5,-170.17 923.5,-170.17"/>
<text text-anchor="start" x="919.5" y="-192.97" font-family="Times,serif" font-size="14.00" fill="#5d6179">ErrorInner</text>
<text text-anchor="start" x="919.5" y="-177.97" font-family="Times,serif" font-size="14.00" fill="#5d6179"> TxnLockNotFound</text>
</g>
<!-- WriteType__Rollback&#45;&gt;ErrorInner__TxnNotFound -->
<g id="edge11" class="edge">
<title>WriteType__Rollback&#45;&gt;ErrorInner__TxnNotFound</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M841.12,-189.17C861.27,-189.17 882.15,-189.17 901.2,-189.17"/>
<polygon fill="green" stroke="green" points="901.27,-192.67 911.27,-189.17 901.27,-185.67 901.27,-192.67"/>
</g>
<!-- OK_None -->
<g id="node15" class="node">
<title>OK_None</title>
<path fill="#bcffb9" stroke="#8a8898" d="M950.5,-64.17C950.5,-64.17 997.5,-64.17 997.5,-64.17 1003.5,-64.17 1009.5,-70.17 1009.5,-76.17 1009.5,-76.17 1009.5,-88.17 1009.5,-88.17 1009.5,-94.17 1003.5,-100.17 997.5,-100.17 997.5,-100.17 950.5,-100.17 950.5,-100.17 944.5,-100.17 938.5,-94.17 938.5,-88.17 938.5,-88.17 938.5,-76.17 938.5,-76.17 938.5,-70.17 944.5,-64.17 950.5,-64.17"/>
<text text-anchor="start" x="946.5" y="-78.47" font-family="Times,serif" font-size="14.00" fill="#5d6179">Ok(None)</text>
</g>
<!-- WriteType__Other&#45;&gt;OK_None -->
<g id="edge14" class="edge">
<title>WriteType__Other&#45;&gt;OK_None</title>
<path fill="none" stroke="#666666" d="M819.62,-82.17C855.67,-82.17 897.55,-82.17 928.44,-82.17"/>
<polygon fill="#666666" stroke="#666666" points="928.46,-85.67 938.46,-82.17 928.46,-78.67 928.46,-85.67"/>
</g>
<!-- LockType__Lock -->
<g id="node17" class="node">
<title>LockType__Lock</title>
<path fill="none" stroke="#1c2123" d="M671.5,-322.67C671.5,-322.67 814.5,-322.67 814.5,-322.67 820.5,-322.67 826.5,-328.67 826.5,-334.67 826.5,-334.67 826.5,-371.67 826.5,-371.67 826.5,-377.67 820.5,-383.67 814.5,-383.67 814.5,-383.67 671.5,-383.67 671.5,-383.67 665.5,-383.67 659.5,-377.67 659.5,-371.67 659.5,-371.67 659.5,-334.67 659.5,-334.67 659.5,-328.67 665.5,-322.67 671.5,-322.67"/>
<text text-anchor="start" x="667.5" y="-368.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockType</text>
<text text-anchor="start" x="667.5" y="-353.47" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Lock</text>
<polyline fill="none" stroke="#1c2123" points="659.5,-345.67 826.5,-345.67 "/>
<text text-anchor="start" x="667.5" y="-330.47" font-family="Times,serif" font-size="14.00" fill="#2f3638">提交时，write类型为lock</text>
</g>
<!-- LockType__Pessimistic&#45;&gt;LockType__Lock -->
<g id="edge23" class="edge">
<title>LockType__Pessimistic&#45;&gt;LockType__Lock</title>
<path fill="none" stroke="#666666" d="M607.12,-353.17C620.76,-353.17 635.09,-353.17 649.09,-353.17"/>
<polygon fill="#666666" stroke="#666666" points="649.23,-356.67 659.23,-353.17 649.23,-349.67 649.23,-356.67"/>
</g>
<!-- LockType__Lock&#45;&gt;MvccTxn__put_write -->
<g id="edge22" class="edge">
<title>LockType__Lock&#45;&gt;MvccTxn__put_write</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M826.64,-365.34C916.02,-378.82 1048.79,-399.87 1071,-409.17 1082.2,-413.86 1093.33,-420.45 1103.5,-427.45"/>
<polygon fill="green" stroke="green" points="1101.63,-430.41 1111.79,-433.39 1105.7,-424.72 1101.63,-430.41"/>
</g>
<!-- LockType__Lock&#45;&gt;WriteType__from_lock_type -->
<g id="edge21" class="edge">
<title>LockType__Lock&#45;&gt;WriteType__from_lock_type</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M826.67,-349.2C854.27,-347.87 884.55,-346.42 910.36,-345.18"/>
<polygon fill="green" stroke="green" points="910.57,-348.67 920.39,-344.7 910.23,-341.68 910.57,-348.67"/>
</g>
</g>
</svg>
