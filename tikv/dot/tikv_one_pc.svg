<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: tikv_one_pc Pages: 1 -->
<svg width="765pt" height="387pt"
 viewBox="0.00 0.00 765.00 386.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 382.5)">
<title>tikv_one_pc</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-382.5 761,-382.5 761,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_MvccTxn</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M486,-85.5C486,-85.5 737,-85.5 737,-85.5 743,-85.5 749,-91.5 749,-97.5 749,-97.5 749,-211.5 749,-211.5 749,-217.5 743,-223.5 737,-223.5 737,-223.5 486,-223.5 486,-223.5 480,-223.5 474,-217.5 474,-211.5 474,-211.5 474,-97.5 474,-97.5 474,-91.5 480,-85.5 486,-85.5"/>
<text text-anchor="middle" x="611.5" y="-203.5" font-family="Times,serif" font-size="20.00">MvccTxn</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_PreWriter</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-231.5C20,-231.5 604,-231.5 604,-231.5 610,-231.5 616,-237.5 616,-243.5 616,-243.5 616,-358.5 616,-358.5 616,-364.5 610,-370.5 604,-370.5 604,-370.5 20,-370.5 20,-370.5 14,-370.5 8,-364.5 8,-358.5 8,-358.5 8,-243.5 8,-243.5 8,-237.5 14,-231.5 20,-231.5"/>
<text text-anchor="middle" x="312" y="-350.5" font-family="Times,serif" font-size="20.00">PreWriter</text>
</g>
<!-- locks_for_1pc -->
<g id="node1" class="node">
<title>locks_for_1pc</title>
<path fill="#feed9b" stroke="#f7e495" d="M659,-94.5C659,-94.5 729,-94.5 729,-94.5 735,-94.5 741,-100.5 741,-106.5 741,-106.5 741,-118.5 741,-118.5 741,-124.5 735,-130.5 729,-130.5 729,-130.5 659,-130.5 659,-130.5 653,-130.5 647,-124.5 647,-118.5 647,-118.5 647,-106.5 647,-106.5 647,-100.5 653,-94.5 659,-94.5"/>
<text text-anchor="middle" x="694" y="-108.8" font-family="Times,serif" font-size="14.00" fill="#40575d">locks_for_1pc</text>
</g>
<!-- put_locks_for_1pc -->
<g id="node2" class="node">
<title>put_locks_for_1pc</title>
<path fill="none" stroke="#1c2123" d="M588,-158.5C588,-158.5 494,-158.5 494,-158.5 488,-158.5 482,-152.5 482,-146.5 482,-146.5 482,-134.5 482,-134.5 482,-128.5 488,-122.5 494,-122.5 494,-122.5 588,-122.5 588,-122.5 594,-122.5 600,-128.5 600,-134.5 600,-134.5 600,-146.5 600,-146.5 600,-152.5 594,-158.5 588,-158.5"/>
<text text-anchor="middle" x="541" y="-136.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">put_locks_for_1pc</text>
</g>
<!-- put_locks_for_1pc&#45;&gt;locks_for_1pc -->
<g id="edge1" class="edge">
<title>put_locks_for_1pc&#45;&gt;locks_for_1pc</title>
<path fill="none" stroke="#666666" d="M600.38,-129.67C612.44,-127.44 625.11,-125.09 637.08,-122.87"/>
<polygon fill="#666666" stroke="#666666" points="637.75,-126.3 646.94,-121.04 636.47,-119.42 637.75,-126.3"/>
</g>
<!-- put_write -->
<g id="node3" class="node">
<title>put_write</title>
<path fill="none" stroke="#1c2123" d="M716,-185.5C716,-185.5 672,-185.5 672,-185.5 666,-185.5 660,-179.5 660,-173.5 660,-173.5 660,-161.5 660,-161.5 660,-155.5 666,-149.5 672,-149.5 672,-149.5 716,-149.5 716,-149.5 722,-149.5 728,-155.5 728,-161.5 728,-161.5 728,-173.5 728,-173.5 728,-179.5 722,-185.5 716,-185.5"/>
<text text-anchor="middle" x="694" y="-163.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">put_write</text>
</g>
<!-- handle_1pc_locks -->
<g id="node4" class="node">
<title>handle_1pc_locks</title>
<path fill="none" stroke="#1c2123" d="M483,-0.5C483,-0.5 599,-0.5 599,-0.5 605,-0.5 611,-6.5 611,-12.5 611,-12.5 611,-64.5 611,-64.5 611,-70.5 605,-76.5 599,-76.5 599,-76.5 483,-76.5 483,-76.5 477,-76.5 471,-70.5 471,-64.5 471,-64.5 471,-12.5 471,-12.5 471,-6.5 477,-0.5 483,-0.5"/>
<text text-anchor="middle" x="541" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_1pc_locks</text>
<polyline fill="none" stroke="#1c2123" points="471,-53.5 611,-53.5 "/>
<text text-anchor="start" x="479" y="-38.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">遍历locks_for_1pc</text>
<text text-anchor="start" x="479" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 向write column 写入</text>
<text text-anchor="start" x="479" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> write record</text>
</g>
<!-- handle_1pc_locks&#45;&gt;locks_for_1pc -->
<g id="edge3" class="edge">
<title>handle_1pc_locks&#45;&gt;locks_for_1pc</title>
<path fill="none" stroke="#666666" d="M611.31,-72.47C623.43,-78.4 635.75,-84.45 647.04,-89.98"/>
<polygon fill="#666666" stroke="#666666" points="645.72,-93.23 656.24,-94.49 648.8,-86.94 645.72,-93.23"/>
</g>
<!-- handle_1pc_locks&#45;&gt;put_write -->
<g id="edge4" class="edge">
<title>handle_1pc_locks&#45;&gt;put_write</title>
<path fill="none" stroke="#666666" d="M611.17,-76.8C612.84,-78.32 614.46,-79.89 616,-81.5 636.49,-102.89 626.55,-119.07 647,-140.5 648.39,-141.96 649.88,-143.36 651.43,-144.71"/>
<polygon fill="#666666" stroke="#666666" points="649.6,-147.71 659.67,-151 653.85,-142.15 649.6,-147.71"/>
</g>
<!-- one_pc_commit_ts -->
<g id="node5" class="node">
<title>one_pc_commit_ts</title>
<path fill="none" stroke="#1c2123" d="M273,-65C273,-65 423,-65 423,-65 429,-65 435,-71 435,-77 435,-77 435,-114 435,-114 435,-120 429,-126 423,-126 423,-126 273,-126 273,-126 267,-126 261,-120 261,-114 261,-114 261,-77 261,-77 261,-71 267,-65 273,-65"/>
<text text-anchor="middle" x="348" y="-110.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">one_pc_commit_ts</text>
<polyline fill="none" stroke="#1c2123" points="261,-103 435,-103 "/>
<text text-anchor="start" x="269" y="-87.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Compute commit ts of a 1pc</text>
<text text-anchor="start" x="269" y="-72.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> transaction</text>
</g>
<!-- one_pc_commit_ts&#45;&gt;handle_1pc_locks -->
<g id="edge2" class="edge">
<title>one_pc_commit_ts&#45;&gt;handle_1pc_locks</title>
<path fill="none" stroke="#666666" d="M435,-69.83C443.71,-67.24 452.52,-64.61 461.14,-62.03"/>
<polygon fill="#666666" stroke="#666666" points="462.2,-65.37 470.78,-59.16 460.2,-58.66 462.2,-65.37"/>
</g>
<!-- PreWriter_write_result -->
<g id="node6" class="node">
<title>PreWriter_write_result</title>
<path fill="none" stroke="#1c2123" d="M156,-240.5C156,-240.5 213,-240.5 213,-240.5 219,-240.5 225,-246.5 225,-252.5 225,-252.5 225,-264.5 225,-264.5 225,-270.5 219,-276.5 213,-276.5 213,-276.5 156,-276.5 156,-276.5 150,-276.5 144,-270.5 144,-264.5 144,-264.5 144,-252.5 144,-252.5 144,-246.5 150,-240.5 156,-240.5"/>
<text text-anchor="middle" x="184.5" y="-254.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_result</text>
</g>
<!-- PreWriter_write_result&#45;&gt;one_pc_commit_ts -->
<g id="edge5" class="edge">
<title>PreWriter_write_result&#45;&gt;one_pc_commit_ts</title>
<path fill="none" stroke="#666666" d="M192.95,-240.3C204.28,-214.51 228.08,-167.18 261,-137.5 263.14,-135.57 265.39,-133.71 267.71,-131.92"/>
<polygon fill="#666666" stroke="#666666" points="269.78,-134.74 275.9,-126.08 265.72,-129.04 269.78,-134.74"/>
</g>
<!-- PreWriter_prewrite -->
<g id="node7" class="node">
<title>PreWriter_prewrite</title>
<path fill="none" stroke="#1c2123" d="M165.5,-295.5C165.5,-295.5 203.5,-295.5 203.5,-295.5 209.5,-295.5 215.5,-301.5 215.5,-307.5 215.5,-307.5 215.5,-319.5 215.5,-319.5 215.5,-325.5 209.5,-331.5 203.5,-331.5 203.5,-331.5 165.5,-331.5 165.5,-331.5 159.5,-331.5 153.5,-325.5 153.5,-319.5 153.5,-319.5 153.5,-307.5 153.5,-307.5 153.5,-301.5 159.5,-295.5 165.5,-295.5"/>
<text text-anchor="middle" x="184.5" y="-309.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">prewrite</text>
</g>
<!-- PrewriteMutation_write_lock -->
<g id="node8" class="node">
<title>PrewriteMutation_write_lock</title>
<path fill="none" stroke="#1c2123" d="M303.5,-146.5C303.5,-146.5 392.5,-146.5 392.5,-146.5 398.5,-146.5 404.5,-152.5 404.5,-158.5 404.5,-158.5 404.5,-180.5 404.5,-180.5 404.5,-186.5 398.5,-192.5 392.5,-192.5 392.5,-192.5 303.5,-192.5 303.5,-192.5 297.5,-192.5 291.5,-186.5 291.5,-180.5 291.5,-180.5 291.5,-158.5 291.5,-158.5 291.5,-152.5 297.5,-146.5 303.5,-146.5"/>
<text text-anchor="start" x="299.5" y="-177.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PrewriteMutation</text>
<polyline fill="none" stroke="#1c2123" points="291.5,-169.5 404.5,-169.5 "/>
<text text-anchor="start" x="299.5" y="-154.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_lock</text>
</g>
<!-- PreWriter_prewrite&#45;&gt;PrewriteMutation_write_lock -->
<g id="edge6" class="edge">
<title>PreWriter_prewrite&#45;&gt;PrewriteMutation_write_lock</title>
<path fill="none" stroke="#666666" d="M215.11,-295.36C218.63,-292.61 222.03,-289.63 225,-286.5 246.15,-264.22 239.78,-249.71 261,-227.5 271.41,-216.6 284.21,-206.63 296.71,-198.15"/>
<polygon fill="#666666" stroke="#666666" points="298.85,-200.93 305.29,-192.52 295.01,-195.08 298.85,-200.93"/>
</g>
<!-- final_min_commit_ts -->
<g id="node10" class="node">
<title>final_min_commit_ts</title>
<path fill="none" stroke="#1c2123" d="M596,-303.5C596,-303.5 486,-303.5 486,-303.5 480,-303.5 474,-297.5 474,-291.5 474,-291.5 474,-279.5 474,-279.5 474,-273.5 480,-267.5 486,-267.5 486,-267.5 596,-267.5 596,-267.5 602,-267.5 608,-273.5 608,-279.5 608,-279.5 608,-291.5 608,-291.5 608,-297.5 602,-303.5 596,-303.5"/>
<text text-anchor="middle" x="541" y="-281.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">final_min_commit_ts</text>
</g>
<!-- PreWriter_prewrite&#45;&gt;final_min_commit_ts -->
<g id="edge9" class="edge">
<title>PreWriter_prewrite&#45;&gt;final_min_commit_ts</title>
<path fill="none" stroke="#666666" d="M215.72,-311.11C270.13,-306.82 386.07,-297.66 463.54,-291.54"/>
<polygon fill="#666666" stroke="#666666" points="464.04,-295.01 473.73,-290.73 463.49,-288.03 464.04,-295.01"/>
</g>
<!-- PrewriteMutation_write_lock&#45;&gt;put_locks_for_1pc -->
<g id="edge11" class="edge">
<title>PrewriteMutation_write_lock&#45;&gt;put_locks_for_1pc</title>
<path fill="none" stroke="#666666" d="M404.5,-161.07C425.51,-157.88 449.68,-154.21 471.73,-150.86"/>
<polygon fill="#666666" stroke="#666666" points="472.34,-154.31 481.7,-149.35 471.29,-147.39 472.34,-154.31"/>
</g>
<!-- process_write -->
<g id="node9" class="node">
<title>process_write</title>
<path fill="none" stroke="#1c2123" d="M96,-303.5C96,-303.5 28,-303.5 28,-303.5 22,-303.5 16,-297.5 16,-291.5 16,-291.5 16,-279.5 16,-279.5 16,-273.5 22,-267.5 28,-267.5 28,-267.5 96,-267.5 96,-267.5 102,-267.5 108,-273.5 108,-279.5 108,-279.5 108,-291.5 108,-291.5 108,-297.5 102,-303.5 96,-303.5"/>
<text text-anchor="middle" x="62" y="-281.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">process_write</text>
</g>
<!-- process_write&#45;&gt;PreWriter_write_result -->
<g id="edge7" class="edge">
<title>process_write&#45;&gt;PreWriter_write_result</title>
<path fill="none" stroke="#666666" d="M108.21,-275.37C116.66,-273.48 125.53,-271.49 134.1,-269.57"/>
<polygon fill="#666666" stroke="#666666" points="134.98,-272.96 143.97,-267.36 133.45,-266.13 134.98,-272.96"/>
</g>
<!-- process_write&#45;&gt;PreWriter_prewrite -->
<g id="edge8" class="edge">
<title>process_write&#45;&gt;PreWriter_prewrite</title>
<path fill="none" stroke="#666666" d="M108.21,-296.01C119.77,-298.69 132.11,-301.56 143.39,-304.18"/>
<polygon fill="#666666" stroke="#666666" points="142.86,-307.65 153.4,-306.51 144.45,-300.83 142.86,-307.65"/>
</g>
<!-- final_min_commit_ts&#45;&gt;put_write -->
<g id="edge10" class="edge">
<title>final_min_commit_ts&#45;&gt;put_write</title>
<path fill="none" stroke="#666666" d="M565.26,-267.32C591.16,-247.08 633.15,-214.27 661.87,-191.83"/>
<polygon fill="#666666" stroke="#666666" points="664.23,-194.42 669.96,-185.51 659.92,-188.91 664.23,-194.42"/>
</g>
</g>
</svg>
