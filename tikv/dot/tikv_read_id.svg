<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: read_id Pages: 1 -->
<svg width="1797pt" height="120pt"
 viewBox="0.00 0.00 1797.00 119.76" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 115.76)">
<title>read_id</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-115.76 1793,-115.76 1793,4 -4,4"/>
<!-- KvService__batch_commands -->
<g id="node1" class="node">
<title>KvService__batch_commands</title>
<path fill="none" stroke="#1c2123" d="M12,-22.55C12,-22.55 206,-22.55 206,-22.55 212,-22.55 218,-28.55 218,-34.55 218,-34.55 218,-71.55 218,-71.55 218,-77.55 212,-83.55 206,-83.55 206,-83.55 12,-83.55 12,-83.55 6,-83.55 0,-77.55 0,-71.55 0,-71.55 0,-34.55 0,-34.55 0,-28.55 6,-22.55 12,-22.55"/>
<text text-anchor="start" x="8" y="-68.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">KvService</text>
<text text-anchor="start" x="8" y="-53.35" font-family="Times,serif" font-size="14.00" fill="#2f3638"> batch_commands</text>
<polyline fill="none" stroke="#1c2123" points="0,-45.55 218,-45.55 "/>
<text text-anchor="middle" x="109" y="-30.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">GRPC stream batch commands接口</text>
</g>
<!-- ReqBatcher__commit -->
<g id="node2" class="node">
<title>ReqBatcher__commit</title>
<path fill="none" stroke="#1c2123" d="M637.5,-98.05C637.5,-98.05 524.5,-98.05 524.5,-98.05 518.5,-98.05 512.5,-92.05 512.5,-86.05 512.5,-86.05 512.5,-74.05 512.5,-74.05 512.5,-68.05 518.5,-62.05 524.5,-62.05 524.5,-62.05 637.5,-62.05 637.5,-62.05 643.5,-62.05 649.5,-68.05 649.5,-74.05 649.5,-74.05 649.5,-86.05 649.5,-86.05 649.5,-92.05 643.5,-98.05 637.5,-98.05"/>
<text text-anchor="middle" x="581" y="-76.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">ReqBatcher__commit</text>
</g>
<!-- KvService__batch_commands&#45;&gt;ReqBatcher__commit -->
<g id="edge1" class="edge">
<title>KvService__batch_commands&#45;&gt;ReqBatcher__commit</title>
<path fill="none" stroke="#666666" d="M218.12,-59.27C304.9,-64.25 424.63,-71.13 502.18,-75.58"/>
<polygon fill="#666666" stroke="#666666" points="502.18,-79.09 512.37,-76.17 502.59,-72.1 502.18,-79.09"/>
</g>
<!-- handle_batch_commands_request -->
<g id="node3" class="node">
<title>handle_batch_commands_request</title>
<path fill="none" stroke="#1c2123" d="M443,-48.05C443,-48.05 266,-48.05 266,-48.05 260,-48.05 254,-42.05 254,-36.05 254,-36.05 254,-24.05 254,-24.05 254,-18.05 260,-12.05 266,-12.05 266,-12.05 443,-12.05 443,-12.05 449,-12.05 455,-18.05 455,-24.05 455,-24.05 455,-36.05 455,-36.05 455,-42.05 449,-48.05 443,-48.05"/>
<text text-anchor="middle" x="354.5" y="-26.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_batch_commands_request</text>
</g>
<!-- KvService__batch_commands&#45;&gt;handle_batch_commands_request -->
<g id="edge2" class="edge">
<title>KvService__batch_commands&#45;&gt;handle_batch_commands_request</title>
<path fill="none" stroke="#666666" d="M218.22,-42.83C226.62,-42.04 235.1,-41.24 243.51,-40.44"/>
<polygon fill="#666666" stroke="#666666" points="244.1,-43.9 253.72,-39.48 243.44,-36.93 244.1,-43.9"/>
</g>
<!-- future_batch_get_command -->
<g id="node5" class="node">
<title>future_batch_get_command</title>
<path fill="none" stroke="#1c2123" d="M878.5,-44.05C878.5,-44.05 732.5,-44.05 732.5,-44.05 726.5,-44.05 720.5,-38.05 720.5,-32.05 720.5,-32.05 720.5,-20.05 720.5,-20.05 720.5,-14.05 726.5,-8.05 732.5,-8.05 732.5,-8.05 878.5,-8.05 878.5,-8.05 884.5,-8.05 890.5,-14.05 890.5,-20.05 890.5,-20.05 890.5,-32.05 890.5,-32.05 890.5,-38.05 884.5,-44.05 878.5,-44.05"/>
<text text-anchor="middle" x="805.5" y="-22.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">future_batch_get_command</text>
</g>
<!-- ReqBatcher__commit&#45;&gt;future_batch_get_command -->
<g id="edge4" class="edge">
<title>ReqBatcher__commit&#45;&gt;future_batch_get_command</title>
<path fill="none" stroke="#666666" d="M649.66,-63.63C671.93,-58.23 696.95,-52.16 720.29,-46.49"/>
<polygon fill="#666666" stroke="#666666" points="721.29,-49.85 730.18,-44.09 719.63,-43.05 721.29,-49.85"/>
</g>
<!-- future_batch_raw_get_command -->
<g id="node6" class="node">
<title>future_batch_raw_get_command</title>
<path fill="none" stroke="#1c2123" d="M892,-98.05C892,-98.05 719,-98.05 719,-98.05 713,-98.05 707,-92.05 707,-86.05 707,-86.05 707,-74.05 707,-74.05 707,-68.05 713,-62.05 719,-62.05 719,-62.05 892,-62.05 892,-62.05 898,-62.05 904,-68.05 904,-74.05 904,-74.05 904,-86.05 904,-86.05 904,-92.05 898,-98.05 892,-98.05"/>
<text text-anchor="middle" x="805.5" y="-76.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">future_batch_raw_get_command</text>
</g>
<!-- ReqBatcher__commit&#45;&gt;future_batch_raw_get_command -->
<g id="edge5" class="edge">
<title>ReqBatcher__commit&#45;&gt;future_batch_raw_get_command</title>
<path fill="none" stroke="#666666" d="M649.66,-80.05C664.45,-80.05 680.46,-80.05 696.38,-80.05"/>
<polygon fill="#666666" stroke="#666666" points="696.82,-83.55 706.82,-80.05 696.82,-76.55 696.82,-83.55"/>
</g>
<!-- ReqBatcher__maybe_commit -->
<g id="node4" class="node">
<title>ReqBatcher__maybe_commit</title>
<path fill="none" stroke="#1c2123" d="M659,-44.05C659,-44.05 503,-44.05 503,-44.05 497,-44.05 491,-38.05 491,-32.05 491,-32.05 491,-20.05 491,-20.05 491,-14.05 497,-8.05 503,-8.05 503,-8.05 659,-8.05 659,-8.05 665,-8.05 671,-14.05 671,-20.05 671,-20.05 671,-32.05 671,-32.05 671,-38.05 665,-44.05 659,-44.05"/>
<text text-anchor="middle" x="581" y="-22.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">ReqBatcher__maybe_commit</text>
</g>
<!-- handle_batch_commands_request&#45;&gt;ReqBatcher__maybe_commit -->
<g id="edge3" class="edge">
<title>handle_batch_commands_request&#45;&gt;ReqBatcher__maybe_commit</title>
<path fill="none" stroke="#666666" d="M455.28,-28.28C463.69,-28.13 472.19,-27.98 480.59,-27.83"/>
<polygon fill="#666666" stroke="#666666" points="480.85,-31.32 490.79,-27.64 480.73,-24.32 480.85,-31.32"/>
</g>
<!-- ReqBatcher__maybe_commit&#45;&gt;future_batch_get_command -->
<g id="edge6" class="edge">
<title>ReqBatcher__maybe_commit&#45;&gt;future_batch_get_command</title>
<path fill="none" stroke="#666666" d="M671.22,-26.05C684,-26.05 697.19,-26.05 710.07,-26.05"/>
<polygon fill="#666666" stroke="#666666" points="710.32,-29.55 720.32,-26.05 710.32,-22.55 710.32,-29.55"/>
</g>
<!-- ReqBatcher__maybe_commit&#45;&gt;future_batch_raw_get_command -->
<g id="edge7" class="edge">
<title>ReqBatcher__maybe_commit&#45;&gt;future_batch_raw_get_command</title>
<path fill="none" stroke="#666666" d="M656.4,-44.11C676.9,-49.09 699.29,-54.52 720.3,-59.62"/>
<polygon fill="#666666" stroke="#666666" points="719.63,-63.06 730.17,-62.02 721.28,-56.26 719.63,-63.06"/>
</g>
<!-- Storage__batch_get_command -->
<g id="node11" class="node">
<title>Storage__batch_get_command</title>
<path fill="none" stroke="#1c2123" d="M1126.5,-44.05C1126.5,-44.05 965.5,-44.05 965.5,-44.05 959.5,-44.05 953.5,-38.05 953.5,-32.05 953.5,-32.05 953.5,-20.05 953.5,-20.05 953.5,-14.05 959.5,-8.05 965.5,-8.05 965.5,-8.05 1126.5,-8.05 1126.5,-8.05 1132.5,-8.05 1138.5,-14.05 1138.5,-20.05 1138.5,-20.05 1138.5,-32.05 1138.5,-32.05 1138.5,-38.05 1132.5,-44.05 1126.5,-44.05"/>
<text text-anchor="middle" x="1046" y="-22.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage__batch_get_command</text>
</g>
<!-- future_batch_get_command&#45;&gt;Storage__batch_get_command -->
<g id="edge14" class="edge">
<title>future_batch_get_command&#45;&gt;Storage__batch_get_command</title>
<path fill="none" stroke="#666666" d="M890.59,-26.05C907.51,-26.05 925.48,-26.05 942.95,-26.05"/>
<polygon fill="#666666" stroke="#666666" points="943.16,-29.55 953.16,-26.05 943.16,-22.55 943.16,-29.55"/>
</g>
<!-- Storage__raw_batch_get_command -->
<g id="node7" class="node">
<title>Storage__raw_batch_get_command</title>
<path fill="none" stroke="#1c2123" d="M1140,-110.05C1140,-110.05 952,-110.05 952,-110.05 946,-110.05 940,-104.05 940,-98.05 940,-98.05 940,-86.05 940,-86.05 940,-80.05 946,-74.05 952,-74.05 952,-74.05 1140,-74.05 1140,-74.05 1146,-74.05 1152,-80.05 1152,-86.05 1152,-86.05 1152,-98.05 1152,-98.05 1152,-104.05 1146,-110.05 1140,-110.05"/>
<text text-anchor="middle" x="1046" y="-88.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">Storage__raw_batch_get_command</text>
</g>
<!-- future_batch_raw_get_command&#45;&gt;Storage__raw_batch_get_command -->
<g id="edge8" class="edge">
<title>future_batch_raw_get_command&#45;&gt;Storage__raw_batch_get_command</title>
<path fill="none" stroke="#666666" d="M904.2,-84.97C912.61,-85.39 921.17,-85.82 929.71,-86.25"/>
<polygon fill="#666666" stroke="#666666" points="929.54,-89.75 939.7,-86.76 929.89,-82.76 929.54,-89.75"/>
</g>
<!-- ThreadReadId__new -->
<g id="node8" class="node">
<title>ThreadReadId__new</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1200,-30.05C1200,-30.05 1341,-30.05 1341,-30.05 1347,-30.05 1353,-36.05 1353,-42.05 1353,-42.05 1353,-64.05 1353,-64.05 1353,-70.05 1347,-76.05 1341,-76.05 1341,-76.05 1200,-76.05 1200,-76.05 1194,-76.05 1188,-70.05 1188,-64.05 1188,-64.05 1188,-42.05 1188,-42.05 1188,-36.05 1194,-30.05 1200,-30.05"/>
<text text-anchor="middle" x="1270.5" y="-60.85" font-family="Times,serif" font-size="14.00" fill="#5d6179">ThreadReadId::new</text>
<polyline fill="none" stroke="#8a8898" points="1188,-53.05 1353,-53.05 "/>
<text text-anchor="middle" x="1270.5" y="-37.85" font-family="Times,serif" font-size="14.00" fill="#5d6179">新生成一个ThreadReadId</text>
</g>
<!-- Storage__raw_batch_get_command&#45;&gt;ThreadReadId__new -->
<g id="edge9" class="edge">
<title>Storage__raw_batch_get_command&#45;&gt;ThreadReadId__new</title>
<path fill="none" stroke="#666666" d="M1149.78,-74.04C1159.15,-72.4 1168.59,-70.74 1177.85,-69.12"/>
<polygon fill="#666666" stroke="#666666" points="1178.57,-72.55 1187.81,-67.37 1177.36,-65.65 1178.57,-72.55"/>
</g>
<!-- SnapContext -->
<g id="node9" class="node">
<title>SnapContext</title>
<path fill="none" stroke="#1c2123" d="M1463,-71.05C1463,-71.05 1401,-71.05 1401,-71.05 1395,-71.05 1389,-65.05 1389,-59.05 1389,-59.05 1389,-47.05 1389,-47.05 1389,-41.05 1395,-35.05 1401,-35.05 1401,-35.05 1463,-35.05 1463,-35.05 1469,-35.05 1475,-41.05 1475,-47.05 1475,-47.05 1475,-59.05 1475,-59.05 1475,-65.05 1469,-71.05 1463,-71.05"/>
<text text-anchor="middle" x="1432" y="-49.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">SnapContext</text>
</g>
<!-- Storage__raw_batch_get_command&#45;&gt;SnapContext -->
<g id="edge10" class="edge">
<title>Storage__raw_batch_get_command&#45;&gt;SnapContext</title>
<path fill="none" stroke="#666666" d="M1152.22,-99.75C1211.77,-101.69 1287.26,-100.06 1353,-86.05 1364.35,-83.64 1376.11,-79.58 1386.95,-75.11"/>
<polygon fill="#666666" stroke="#666666" points="1388.41,-78.29 1396.21,-71.12 1385.64,-71.87 1388.41,-78.29"/>
</g>
<!-- kv__snapshot -->
<g id="node10" class="node">
<title>kv__snapshot</title>
<path fill="none" stroke="#1c2123" d="M1590,-71.05C1590,-71.05 1523,-71.05 1523,-71.05 1517,-71.05 1511,-65.05 1511,-59.05 1511,-59.05 1511,-47.05 1511,-47.05 1511,-41.05 1517,-35.05 1523,-35.05 1523,-35.05 1590,-35.05 1590,-35.05 1596,-35.05 1602,-41.05 1602,-47.05 1602,-47.05 1602,-59.05 1602,-59.05 1602,-65.05 1596,-71.05 1590,-71.05"/>
<text text-anchor="middle" x="1556.5" y="-49.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv__snapshot</text>
</g>
<!-- Storage__raw_batch_get_command&#45;&gt;kv__snapshot -->
<g id="edge11" class="edge">
<title>Storage__raw_batch_get_command&#45;&gt;kv__snapshot</title>
<path fill="none" stroke="#666666" d="M1152,-104.46C1164.13,-105.53 1176.32,-106.43 1188,-107.05 1261.23,-110.94 1280.1,-115.02 1353,-107.05 1408.21,-101.02 1421.49,-94.9 1475,-80.05 1483.46,-77.71 1492.35,-74.99 1501,-72.2"/>
<polygon fill="#666666" stroke="#666666" points="1502.22,-75.48 1510.63,-69.04 1500.04,-68.83 1502.22,-75.48"/>
</g>
<!-- ThreadReadId__new&#45;&gt;SnapContext -->
<g id="edge12" class="edge">
<title>ThreadReadId__new&#45;&gt;SnapContext</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1353.12,-53.05C1361.85,-53.05 1370.55,-53.05 1378.8,-53.05"/>
<polygon fill="green" stroke="green" points="1378.98,-56.55 1388.98,-53.05 1378.98,-49.55 1378.98,-56.55"/>
</g>
<!-- SnapContext&#45;&gt;kv__snapshot -->
<g id="edge13" class="edge">
<title>SnapContext&#45;&gt;kv__snapshot</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1475.16,-53.05C1483.33,-53.05 1492,-53.05 1500.5,-53.05"/>
<polygon fill="green" stroke="green" points="1500.76,-56.55 1510.76,-53.05 1500.76,-49.55 1500.76,-56.55"/>
</g>
<!-- RaftKV_async_snapshot -->
<g id="node12" class="node">
<title>RaftKV_async_snapshot</title>
<path fill="none" stroke="#1c2123" d="M1777,-71.05C1777,-71.05 1650,-71.05 1650,-71.05 1644,-71.05 1638,-65.05 1638,-59.05 1638,-59.05 1638,-47.05 1638,-47.05 1638,-41.05 1644,-35.05 1650,-35.05 1650,-35.05 1777,-35.05 1777,-35.05 1783,-35.05 1789,-41.05 1789,-47.05 1789,-47.05 1789,-59.05 1789,-59.05 1789,-65.05 1783,-71.05 1777,-71.05"/>
<text text-anchor="middle" x="1713.5" y="-49.35" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftKV_async_snapshot</text>
</g>
<!-- kv__snapshot&#45;&gt;RaftKV_async_snapshot -->
<g id="edge18" class="edge">
<title>kv__snapshot&#45;&gt;RaftKV_async_snapshot</title>
<path fill="none" stroke="#666666" d="M1602.33,-53.05C1610.37,-53.05 1618.97,-53.05 1627.7,-53.05"/>
<polygon fill="#666666" stroke="#666666" points="1627.98,-56.55 1637.98,-53.05 1627.98,-49.55 1627.98,-56.55"/>
</g>
<!-- Storage__batch_get_command&#45;&gt;ThreadReadId__new -->
<g id="edge15" class="edge">
<title>Storage__batch_get_command&#45;&gt;ThreadReadId__new</title>
<path fill="none" stroke="#666666" d="M1138.78,-37.19C1151.63,-38.75 1164.83,-40.35 1177.68,-41.91"/>
<polygon fill="#666666" stroke="#666666" points="1177.54,-45.42 1187.89,-43.15 1178.39,-38.47 1177.54,-45.42"/>
</g>
<!-- Storage__batch_get_command&#45;&gt;SnapContext -->
<g id="edge16" class="edge">
<title>Storage__batch_get_command&#45;&gt;SnapContext</title>
<path fill="none" stroke="#666666" d="M1138.6,-14.6C1199.87,-9.37 1281.97,-7.05 1353,-21.05 1363.99,-23.22 1375.39,-26.96 1385.96,-31.12"/>
<polygon fill="#666666" stroke="#666666" points="1384.83,-34.44 1395.41,-35.04 1387.51,-27.98 1384.83,-34.44"/>
</g>
<!-- Storage__batch_get_command&#45;&gt;kv__snapshot -->
<g id="edge17" class="edge">
<title>Storage__batch_get_command&#45;&gt;kv__snapshot</title>
<path fill="none" stroke="#666666" d="M1138.57,-11.16C1154.99,-9.03 1171.97,-7.19 1188,-6.05 1315.55,2.95 1350.89,4.72 1475,-26.05 1483.52,-28.17 1492.44,-30.76 1501.11,-33.49"/>
<polygon fill="#666666" stroke="#666666" points="1500.15,-36.86 1510.75,-36.62 1502.32,-30.21 1500.15,-36.86"/>
</g>
</g>
</svg>
