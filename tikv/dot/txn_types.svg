<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: txn_types Pages: 1 -->
<svg width="1224pt" height="645pt"
 viewBox="0.00 0.00 1224.00 644.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 640.5)">
<title>txn_types</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-640.5 1220,-640.5 1220,4 -4,4"/>
<!-- Write -->
<g id="node1" class="node">
<title>Write</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M403,-295.5C403,-295.5 598,-295.5 598,-295.5 604,-295.5 610,-301.5 610,-307.5 610,-307.5 610,-421.5 610,-421.5 610,-427.5 604,-433.5 598,-433.5 598,-433.5 403,-433.5 403,-433.5 397,-433.5 391,-427.5 391,-421.5 391,-421.5 391,-307.5 391,-307.5 391,-301.5 397,-295.5 403,-295.5"/>
<text text-anchor="middle" x="500.5" y="-418.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Write</text>
<polyline fill="none" stroke="#8a8898" points="391,-410.5 610,-410.5 "/>
<text text-anchor="start" x="399" y="-395.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub write_type: WriteType,</text>
<polyline fill="none" stroke="#8a8898" points="391,-387.5 610,-387.5 "/>
<text text-anchor="start" x="399" y="-372.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub start_ts: TimeStamp,</text>
<polyline fill="none" stroke="#8a8898" points="391,-364.5 610,-364.5 "/>
<text text-anchor="start" x="399" y="-349.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub short_value: Option&lt;Value&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="391,-341.5 610,-341.5 "/>
<text text-anchor="start" x="399" y="-326.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub has_overlapped_rollback: bool,</text>
<polyline fill="none" stroke="#8a8898" points="391,-318.5 610,-318.5 "/>
<text text-anchor="start" x="399" y="-303.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub gc_fence: Option&lt;TimeStamp&gt;,</text>
</g>
<!-- WriteType -->
<g id="node2" class="node">
<title>WriteType</title>
<path fill="#feed9b" stroke="#f7e495" d="M706.5,-445C706.5,-445 757.5,-445 757.5,-445 763.5,-445 769.5,-451 769.5,-457 769.5,-457 769.5,-548 769.5,-548 769.5,-554 763.5,-560 757.5,-560 757.5,-560 706.5,-560 706.5,-560 700.5,-560 694.5,-554 694.5,-548 694.5,-548 694.5,-457 694.5,-457 694.5,-451 700.5,-445 706.5,-445"/>
<text text-anchor="middle" x="732" y="-544.8" font-family="Times,serif" font-size="14.00" fill="#40575d">WriteType</text>
<polyline fill="none" stroke="#f7e495" points="694.5,-537 769.5,-537 "/>
<text text-anchor="start" x="702.5" y="-521.8" font-family="Times,serif" font-size="14.00" fill="#40575d">Put,</text>
<polyline fill="none" stroke="#f7e495" points="694.5,-514 769.5,-514 "/>
<text text-anchor="start" x="702.5" y="-498.8" font-family="Times,serif" font-size="14.00" fill="#40575d">Delete,</text>
<polyline fill="none" stroke="#f7e495" points="694.5,-491 769.5,-491 "/>
<text text-anchor="start" x="702.5" y="-475.8" font-family="Times,serif" font-size="14.00" fill="#40575d">Lock,</text>
<polyline fill="none" stroke="#f7e495" points="694.5,-468 769.5,-468 "/>
<text text-anchor="start" x="702.5" y="-452.8" font-family="Times,serif" font-size="14.00" fill="#40575d">Rollback,</text>
</g>
<!-- Write&#45;&gt;WriteType -->
<g id="edge1" class="edge">
<title>Write&#45;&gt;WriteType</title>
<path fill="none" stroke="#666666" d="M610.2,-429.86C636.88,-445.9 664,-462.21 685.76,-475.3"/>
<polygon fill="#666666" stroke="#666666" points="684.06,-478.36 694.43,-480.51 687.67,-472.36 684.06,-478.36"/>
</g>
<!-- TimeStamp -->
<g id="node3" class="node">
<title>TimeStamp</title>
<path fill="none" stroke="#1c2123" d="M658,-341.5C658,-341.5 806,-341.5 806,-341.5 812,-341.5 818,-347.5 818,-353.5 818,-353.5 818,-375.5 818,-375.5 818,-381.5 812,-387.5 806,-387.5 806,-387.5 658,-387.5 658,-387.5 652,-387.5 646,-381.5 646,-375.5 646,-375.5 646,-353.5 646,-353.5 646,-347.5 652,-341.5 658,-341.5"/>
<text text-anchor="middle" x="732" y="-372.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TimeStamp</text>
<polyline fill="none" stroke="#1c2123" points="646,-364.5 818,-364.5 "/>
<text text-anchor="start" x="654" y="-349.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub struct TimeStamp(u64);</text>
</g>
<!-- Write&#45;&gt;TimeStamp -->
<g id="edge2" class="edge">
<title>Write&#45;&gt;TimeStamp</title>
<path fill="none" stroke="#666666" d="M610.2,-364.5C618.69,-364.5 627.21,-364.5 635.6,-364.5"/>
<polygon fill="#666666" stroke="#666666" points="635.75,-368 645.75,-364.5 635.75,-361 635.75,-368"/>
</g>
<!-- Value -->
<g id="node4" class="node">
<title>Value</title>
<path fill="none" stroke="#1c2123" d="M660,-249.5C660,-249.5 804,-249.5 804,-249.5 810,-249.5 816,-255.5 816,-261.5 816,-261.5 816,-283.5 816,-283.5 816,-289.5 810,-295.5 804,-295.5 804,-295.5 660,-295.5 660,-295.5 654,-295.5 648,-289.5 648,-283.5 648,-283.5 648,-261.5 648,-261.5 648,-255.5 654,-249.5 660,-249.5"/>
<text text-anchor="middle" x="732" y="-280.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Value</text>
<polyline fill="none" stroke="#1c2123" points="648,-272.5 816,-272.5 "/>
<text text-anchor="start" x="656" y="-257.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub type Value = Vec&lt;u8&gt;;</text>
</g>
<!-- Write&#45;&gt;Value -->
<g id="edge3" class="edge">
<title>Write&#45;&gt;Value</title>
<path fill="none" stroke="#666666" d="M610.2,-320.92C628.51,-313.59 647.02,-306.17 663.86,-299.41"/>
<polygon fill="#666666" stroke="#666666" points="665.59,-302.49 673.57,-295.52 662.99,-295.99 665.59,-302.49"/>
</g>
<!-- WriteRef -->
<g id="node5" class="node">
<title>WriteRef</title>
<path fill="none" stroke="#1c2123" d="M403,-452.5C403,-452.5 598,-452.5 598,-452.5 604,-452.5 610,-458.5 610,-464.5 610,-464.5 610,-616.5 610,-616.5 610,-622.5 604,-628.5 598,-628.5 598,-628.5 403,-628.5 403,-628.5 397,-628.5 391,-622.5 391,-616.5 391,-616.5 391,-464.5 391,-464.5 391,-458.5 397,-452.5 403,-452.5"/>
<text text-anchor="middle" x="500.5" y="-613.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteRef</text>
<polyline fill="none" stroke="#1c2123" points="391,-605.5 610,-605.5 "/>
<text text-anchor="start" x="399" y="-590.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">和Write不同地方在于</text>
<text text-anchor="start" x="399" y="-575.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> short_value 是引用</text>
<polyline fill="none" stroke="#1c2123" points="391,-567.5 610,-567.5 "/>
<text text-anchor="start" x="399" y="-552.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub write_type: WriteType,</text>
<polyline fill="none" stroke="#1c2123" points="391,-544.5 610,-544.5 "/>
<text text-anchor="start" x="399" y="-529.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub start_ts: TimeStamp,</text>
<polyline fill="none" stroke="#1c2123" points="391,-521.5 610,-521.5 "/>
<text text-anchor="start" x="399" y="-506.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub short_value: Option&lt;&amp;&#39;a [u8]&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="391,-498.5 610,-498.5 "/>
<text text-anchor="start" x="399" y="-483.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub has_overlapped_rollback: bool,</text>
<polyline fill="none" stroke="#1c2123" points="391,-475.5 610,-475.5 "/>
<text text-anchor="start" x="399" y="-460.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub gc_fence: Option&lt;TimeStamp&gt;,</text>
</g>
<!-- WriteRef&#45;&gt;WriteType -->
<g id="edge4" class="edge">
<title>WriteRef&#45;&gt;WriteType</title>
<path fill="none" stroke="#666666" d="M610.2,-522.5C636.29,-518.18 662.79,-513.79 684.3,-510.23"/>
<polygon fill="#666666" stroke="#666666" points="685.14,-513.64 694.43,-508.55 684,-506.73 685.14,-513.64"/>
</g>
<!-- WriteRef&#45;&gt;TimeStamp -->
<g id="edge5" class="edge">
<title>WriteRef&#45;&gt;TimeStamp</title>
<path fill="none" stroke="#666666" d="M610.2,-457.14C639.71,-434.51 669.76,-411.47 692.5,-394.02"/>
<polygon fill="#666666" stroke="#666666" points="694.73,-396.72 700.54,-387.86 690.47,-391.17 694.73,-396.72"/>
</g>
<!-- WriteRef_parse -->
<g id="node6" class="node">
<title>WriteRef_parse</title>
<path fill="none" stroke="#1c2123" d="M233,-502.5C233,-502.5 312,-502.5 312,-502.5 318,-502.5 324,-508.5 324,-514.5 324,-514.5 324,-536.5 324,-536.5 324,-542.5 318,-548.5 312,-548.5 312,-548.5 233,-548.5 233,-548.5 227,-548.5 221,-542.5 221,-536.5 221,-536.5 221,-514.5 221,-514.5 221,-508.5 227,-502.5 233,-502.5"/>
<text text-anchor="middle" x="272.5" y="-533.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteRef::parse</text>
<polyline fill="none" stroke="#1c2123" points="221,-525.5 324,-525.5 "/>
<text text-anchor="start" x="229" y="-510.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">反序列化</text>
</g>
<!-- WriteRef_parse&#45;&gt;WriteRef -->
<g id="edge6" class="edge">
<title>WriteRef_parse&#45;&gt;WriteRef</title>
<path fill="none" stroke="#666666" d="M324.22,-528.87C341.14,-529.99 360.77,-531.29 380.65,-532.61"/>
<polygon fill="#666666" stroke="#666666" points="380.52,-536.11 390.73,-533.28 380.98,-529.13 380.52,-536.11"/>
</g>
<!-- WriteRef_tobytes -->
<g id="node7" class="node">
<title>WriteRef_tobytes</title>
<path fill="none" stroke="#1c2123" d="M228,-567.5C228,-567.5 317,-567.5 317,-567.5 323,-567.5 329,-573.5 329,-579.5 329,-579.5 329,-601.5 329,-601.5 329,-607.5 323,-613.5 317,-613.5 317,-613.5 228,-613.5 228,-613.5 222,-613.5 216,-607.5 216,-601.5 216,-601.5 216,-579.5 216,-579.5 216,-573.5 222,-567.5 228,-567.5"/>
<text text-anchor="middle" x="272.5" y="-598.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">WriteRef::tobytes</text>
<polyline fill="none" stroke="#1c2123" points="216,-590.5 329,-590.5 "/>
<text text-anchor="middle" x="272.5" y="-575.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">序列化</text>
</g>
<!-- WriteRef_tobytes&#45;&gt;WriteRef -->
<g id="edge7" class="edge">
<title>WriteRef_tobytes&#45;&gt;WriteRef</title>
<path fill="none" stroke="#666666" d="M329.08,-578.2C344.84,-574.72 362.65,-570.78 380.65,-566.8"/>
<polygon fill="#666666" stroke="#666666" points="381.65,-570.16 390.65,-564.58 380.13,-563.32 381.65,-570.16"/>
</g>
<!-- MvccTxn_put_write -->
<g id="node8" class="node">
<title>MvccTxn_put_write</title>
<path fill="none" stroke="#1c2123" d="M12,-545C12,-545 142,-545 142,-545 148,-545 154,-551 154,-557 154,-557 154,-624 154,-624 154,-630 148,-636 142,-636 142,-636 12,-636 12,-636 6,-636 0,-630 0,-624 0,-624 0,-557 0,-557 0,-551 6,-545 12,-545"/>
<text text-anchor="middle" x="77" y="-620.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">MvccTxn::put_write</text>
<polyline fill="none" stroke="#1c2123" points="0,-613 154,-613 "/>
<text text-anchor="start" x="8" y="-597.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">向CF_WRITE写入write</text>
<text text-anchor="start" x="8" y="-582.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 放入modifies中</text>
<text text-anchor="start" x="8" y="-567.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 写入writeBatch</text>
<text text-anchor="start" x="8" y="-552.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后写入rocksdb中</text>
</g>
<!-- MvccTxn_put_write&#45;&gt;WriteRef_tobytes -->
<g id="edge8" class="edge">
<title>MvccTxn_put_write&#45;&gt;WriteRef_tobytes</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M154.2,-590.5C171.28,-590.5 189.25,-590.5 205.86,-590.5"/>
<polygon fill="green" stroke="green" points="206,-594 216,-590.5 206,-587 206,-594"/>
</g>
<!-- Lock -->
<g id="node9" class="node">
<title>Lock</title>
<path fill="none" stroke="#1c2123" d="M406,-0.5C406,-0.5 595,-0.5 595,-0.5 601,-0.5 607,-6.5 607,-12.5 607,-12.5 607,-264.5 607,-264.5 607,-270.5 601,-276.5 595,-276.5 595,-276.5 406,-276.5 406,-276.5 400,-276.5 394,-270.5 394,-264.5 394,-264.5 394,-12.5 394,-12.5 394,-6.5 400,-0.5 406,-0.5"/>
<text text-anchor="middle" x="500.5" y="-261.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock</text>
<polyline fill="none" stroke="#1c2123" points="394,-253.5 607,-253.5 "/>
<text text-anchor="start" x="402" y="-238.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub lock_type: LockType,</text>
<polyline fill="none" stroke="#1c2123" points="394,-230.5 607,-230.5 "/>
<text text-anchor="start" x="402" y="-215.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub primary: Vec&lt;u8&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="394,-207.5 607,-207.5 "/>
<text text-anchor="start" x="402" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub ts: TimeStamp,</text>
<polyline fill="none" stroke="#1c2123" points="394,-184.5 607,-184.5 "/>
<text text-anchor="start" x="402" y="-169.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub ttl: u64,</text>
<polyline fill="none" stroke="#1c2123" points="394,-161.5 607,-161.5 "/>
<text text-anchor="start" x="402" y="-146.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub short_value: Option&lt;Value&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="394,-138.5 607,-138.5 "/>
<text text-anchor="start" x="402" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub for_update_ts: TimeStamp,</text>
<polyline fill="none" stroke="#1c2123" points="394,-115.5 607,-115.5 "/>
<text text-anchor="start" x="402" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub txn_size: u64,</text>
<polyline fill="none" stroke="#1c2123" points="394,-92.5 607,-92.5 "/>
<text text-anchor="start" x="402" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub min_commit_ts: TimeStamp,</text>
<polyline fill="none" stroke="#1c2123" points="394,-69.5 607,-69.5 "/>
<text text-anchor="start" x="402" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub use_async_commit: bool,</text>
<polyline fill="none" stroke="#1c2123" points="394,-46.5 607,-46.5 "/>
<text text-anchor="start" x="402" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub secondaries: Vec&lt;Vec&lt;u8&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="394,-23.5 607,-23.5 "/>
<text text-anchor="start" x="402" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub rollback_ts: Vec&lt;TimeStamp&gt;,</text>
</g>
<!-- Lock&#45;&gt;TimeStamp -->
<g id="edge9" class="edge">
<title>Lock&#45;&gt;TimeStamp</title>
<path fill="none" stroke="#666666" d="M607.2,-267.46C619.81,-280.77 632.88,-293.71 646,-305.5 657.95,-316.24 671.92,-326.67 685.04,-335.7"/>
<polygon fill="#666666" stroke="#666666" points="683.27,-338.73 693.51,-341.43 687.18,-332.93 683.27,-338.73"/>
</g>
<!-- Lock&#45;&gt;Value -->
<g id="edge10" class="edge">
<title>Lock&#45;&gt;Value</title>
<path fill="none" stroke="#666666" d="M607.18,-200.21C633.55,-215.6 660.56,-231.37 682.59,-244.24"/>
<polygon fill="#666666" stroke="#666666" points="681,-247.36 691.4,-249.38 684.53,-241.32 681,-247.36"/>
</g>
<!-- LockType -->
<g id="node10" class="node">
<title>LockType</title>
<path fill="none" stroke="#1c2123" d="M703,-34C703,-34 761,-34 761,-34 767,-34 773,-40 773,-46 773,-46 773,-137 773,-137 773,-143 767,-149 761,-149 761,-149 703,-149 703,-149 697,-149 691,-143 691,-137 691,-137 691,-46 691,-46 691,-40 697,-34 703,-34"/>
<text text-anchor="middle" x="732" y="-133.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockType</text>
<polyline fill="none" stroke="#1c2123" points="691,-126 773,-126 "/>
<text text-anchor="start" x="699" y="-110.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Put,</text>
<polyline fill="none" stroke="#1c2123" points="691,-103 773,-103 "/>
<text text-anchor="start" x="699" y="-87.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Delete,</text>
<polyline fill="none" stroke="#1c2123" points="691,-80 773,-80 "/>
<text text-anchor="start" x="699" y="-64.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock,</text>
<polyline fill="none" stroke="#1c2123" points="691,-57 773,-57 "/>
<text text-anchor="start" x="699" y="-41.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Pessimistic,</text>
</g>
<!-- Lock&#45;&gt;LockType -->
<g id="edge11" class="edge">
<title>Lock&#45;&gt;LockType</title>
<path fill="none" stroke="#666666" d="M607.18,-116.86C632.88,-111.6 659.18,-106.21 680.9,-101.76"/>
<polygon fill="#666666" stroke="#666666" points="681.76,-105.16 690.85,-99.72 680.35,-98.3 681.76,-105.16"/>
</g>
<!-- into_lock_info -->
<g id="node13" class="node">
<title>into_lock_info</title>
<path fill="none" stroke="#1c2123" d="M768,-203.5C768,-203.5 696,-203.5 696,-203.5 690,-203.5 684,-197.5 684,-191.5 684,-191.5 684,-179.5 684,-179.5 684,-173.5 690,-167.5 696,-167.5 696,-167.5 768,-167.5 768,-167.5 774,-167.5 780,-173.5 780,-179.5 780,-179.5 780,-191.5 780,-191.5 780,-197.5 774,-203.5 768,-203.5"/>
<text text-anchor="middle" x="732" y="-181.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">into_lock_info</text>
</g>
<!-- Lock&#45;&gt;into_lock_info -->
<g id="edge14" class="edge">
<title>Lock&#45;&gt;into_lock_info</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M607.18,-160.14C630.13,-164.84 653.56,-169.64 673.78,-173.78"/>
<polygon fill="green" stroke="green" points="673.23,-177.24 683.73,-175.82 674.64,-170.38 673.23,-177.24"/>
</g>
<!-- Lock_parse -->
<g id="node11" class="node">
<title>Lock_parse</title>
<path fill="none" stroke="#1c2123" d="M244.5,-98.5C244.5,-98.5 300.5,-98.5 300.5,-98.5 306.5,-98.5 312.5,-104.5 312.5,-110.5 312.5,-110.5 312.5,-132.5 312.5,-132.5 312.5,-138.5 306.5,-144.5 300.5,-144.5 300.5,-144.5 244.5,-144.5 244.5,-144.5 238.5,-144.5 232.5,-138.5 232.5,-132.5 232.5,-132.5 232.5,-110.5 232.5,-110.5 232.5,-104.5 238.5,-98.5 244.5,-98.5"/>
<text text-anchor="middle" x="272.5" y="-129.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock::parse</text>
<polyline fill="none" stroke="#1c2123" points="232.5,-121.5 312.5,-121.5 "/>
<text text-anchor="middle" x="272.5" y="-106.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">反序列化</text>
</g>
<!-- Lock_parse&#45;&gt;Lock -->
<g id="edge12" class="edge">
<title>Lock_parse&#45;&gt;Lock</title>
<path fill="none" stroke="#666666" d="M312.61,-124.44C332.57,-125.94 358.02,-127.86 383.66,-129.79"/>
<polygon fill="#666666" stroke="#666666" points="383.63,-133.29 393.86,-130.55 384.15,-126.31 383.63,-133.29"/>
</g>
<!-- Lock_tobytes -->
<g id="node12" class="node">
<title>Lock_tobytes</title>
<path fill="none" stroke="#1c2123" d="M239,-163.5C239,-163.5 306,-163.5 306,-163.5 312,-163.5 318,-169.5 318,-175.5 318,-175.5 318,-197.5 318,-197.5 318,-203.5 312,-209.5 306,-209.5 306,-209.5 239,-209.5 239,-209.5 233,-209.5 227,-203.5 227,-197.5 227,-197.5 227,-175.5 227,-175.5 227,-169.5 233,-163.5 239,-163.5"/>
<text text-anchor="middle" x="272.5" y="-194.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Lock::tobytes</text>
<polyline fill="none" stroke="#1c2123" points="227,-186.5 318,-186.5 "/>
<text text-anchor="middle" x="272.5" y="-171.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">序列化</text>
</g>
<!-- Lock_tobytes&#45;&gt;Lock -->
<g id="edge13" class="edge">
<title>Lock_tobytes&#45;&gt;Lock</title>
<path fill="none" stroke="#666666" d="M318.15,-177.02C337.17,-172.98 360.33,-168.06 383.66,-163.1"/>
<polygon fill="#666666" stroke="#666666" points="384.6,-166.48 393.65,-160.98 383.14,-159.63 384.6,-166.48"/>
</g>
<!-- LockInfo -->
<g id="node14" class="node">
<title>LockInfo</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M866,-59C866,-59 1036,-59 1036,-59 1042,-59 1048,-65 1048,-71 1048,-71 1048,-300 1048,-300 1048,-306 1042,-312 1036,-312 1036,-312 866,-312 866,-312 860,-312 854,-306 854,-300 854,-300 854,-71 854,-71 854,-65 860,-59 866,-59"/>
<text text-anchor="middle" x="951" y="-296.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">LockInfo</text>
<polyline fill="none" stroke="#8a8898" points="854,-289 1048,-289 "/>
<text text-anchor="start" x="862" y="-273.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">bytes primary_lock = 1;</text>
<polyline fill="none" stroke="#8a8898" points="854,-266 1048,-266 "/>
<text text-anchor="start" x="862" y="-250.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">uint64 lock_version = 2;</text>
<polyline fill="none" stroke="#8a8898" points="854,-243 1048,-243 "/>
<text text-anchor="start" x="862" y="-227.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">bytes key = 3;</text>
<polyline fill="none" stroke="#8a8898" points="854,-220 1048,-220 "/>
<text text-anchor="start" x="862" y="-204.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">uint64 lock_ttl = 4;</text>
<polyline fill="none" stroke="#8a8898" points="854,-197 1048,-197 "/>
<text text-anchor="start" x="862" y="-181.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">uint64 txn_size = 5;</text>
<polyline fill="none" stroke="#8a8898" points="854,-174 1048,-174 "/>
<text text-anchor="start" x="862" y="-158.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">Op lock_type = 6;</text>
<polyline fill="none" stroke="#8a8898" points="854,-151 1048,-151 "/>
<text text-anchor="start" x="862" y="-135.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">uint64 lock_for_update_ts = 7;</text>
<polyline fill="none" stroke="#8a8898" points="854,-128 1048,-128 "/>
<text text-anchor="start" x="862" y="-112.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">bool use_async_commit = 8;</text>
<polyline fill="none" stroke="#8a8898" points="854,-105 1048,-105 "/>
<text text-anchor="start" x="862" y="-89.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">uint64 min_commit_ts = 9;</text>
<polyline fill="none" stroke="#8a8898" points="854,-82 1048,-82 "/>
<text text-anchor="start" x="862" y="-66.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">repeated bytes secondaries = 10;</text>
</g>
<!-- into_lock_info&#45;&gt;LockInfo -->
<g id="edge15" class="edge">
<title>into_lock_info&#45;&gt;LockInfo</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M780.09,-185.5C798.89,-185.5 821.37,-185.5 843.73,-185.5"/>
<polygon fill="green" stroke="green" points="843.98,-189 853.98,-185.5 843.98,-182 843.98,-189"/>
</g>
<!-- Op -->
<g id="node20" class="node">
<title>Op</title>
<path fill="#feed9b" stroke="#f7e495" d="M1096,-93.5C1096,-93.5 1204,-93.5 1204,-93.5 1210,-93.5 1216,-99.5 1216,-105.5 1216,-105.5 1216,-265.5 1216,-265.5 1216,-271.5 1210,-277.5 1204,-277.5 1204,-277.5 1096,-277.5 1096,-277.5 1090,-277.5 1084,-271.5 1084,-265.5 1084,-265.5 1084,-105.5 1084,-105.5 1084,-99.5 1090,-93.5 1096,-93.5"/>
<text text-anchor="middle" x="1150" y="-262.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Op</text>
<polyline fill="none" stroke="#f7e495" points="1084,-254.5 1216,-254.5 "/>
<text text-anchor="start" x="1092" y="-239.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Put = 0;</text>
<polyline fill="none" stroke="#f7e495" points="1084,-231.5 1216,-231.5 "/>
<text text-anchor="start" x="1092" y="-216.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Del = 1;</text>
<polyline fill="none" stroke="#f7e495" points="1084,-208.5 1216,-208.5 "/>
<text text-anchor="start" x="1092" y="-193.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Lock = 2;</text>
<polyline fill="none" stroke="#f7e495" points="1084,-185.5 1216,-185.5 "/>
<text text-anchor="start" x="1092" y="-170.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Rollback = 3;</text>
<polyline fill="none" stroke="#f7e495" points="1084,-162.5 1216,-162.5 "/>
<text text-anchor="start" x="1092" y="-147.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Insert = 4;</text>
<polyline fill="none" stroke="#f7e495" points="1084,-139.5 1216,-139.5 "/>
<text text-anchor="start" x="1092" y="-124.3" font-family="Times,serif" font-size="14.00" fill="#40575d">PessimisticLock = 5;</text>
<polyline fill="none" stroke="#f7e495" points="1084,-116.5 1216,-116.5 "/>
<text text-anchor="start" x="1092" y="-101.3" font-family="Times,serif" font-size="14.00" fill="#40575d">CheckNotExists = 6;</text>
</g>
<!-- LockInfo&#45;&gt;Op -->
<g id="edge22" class="edge">
<title>LockInfo&#45;&gt;Op</title>
<path fill="none" stroke="#666666" d="M1048.19,-185.5C1056.8,-185.5 1065.44,-185.5 1073.83,-185.5"/>
<polygon fill="#666666" stroke="#666666" points="1073.93,-189 1083.93,-185.5 1073.93,-182 1073.93,-189"/>
</g>
<!-- MvccTxn_put_lock -->
<g id="node15" class="node">
<title>MvccTxn_put_lock</title>
<path fill="none" stroke="#1c2123" d="M12,-141C12,-141 142,-141 142,-141 148,-141 154,-147 154,-153 154,-153 154,-220 154,-220 154,-226 148,-232 142,-232 142,-232 12,-232 12,-232 6,-232 0,-226 0,-220 0,-220 0,-153 0,-153 0,-147 6,-141 12,-141"/>
<text text-anchor="middle" x="77" y="-216.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">MvccTxn::put_lock</text>
<polyline fill="none" stroke="#1c2123" points="0,-209 154,-209 "/>
<text text-anchor="start" x="8" y="-193.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">向CF_LOCK 写入lock, </text>
<text text-anchor="start" x="8" y="-178.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 放入modifies中</text>
<text text-anchor="start" x="8" y="-163.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 后续写入writeBatch</text>
<text text-anchor="start" x="8" y="-148.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后写入RocksDB</text>
</g>
<!-- MvccTxn_put_lock&#45;&gt;Lock_tobytes -->
<g id="edge16" class="edge">
<title>MvccTxn_put_lock&#45;&gt;Lock_tobytes</title>
<path fill="none" stroke="#666666" d="M154.2,-186.5C175.09,-186.5 197.31,-186.5 216.74,-186.5"/>
<polygon fill="#666666" stroke="#666666" points="216.92,-190 226.92,-186.5 216.92,-183 216.92,-190"/>
</g>
<!-- TxnCommitRecord -->
<g id="node16" class="node">
<title>TxnCommitRecord</title>
<path fill="none" stroke="#1c2123" d="M25,-300.5C25,-300.5 129,-300.5 129,-300.5 135,-300.5 141,-306.5 141,-312.5 141,-312.5 141,-380.5 141,-380.5 141,-386.5 135,-392.5 129,-392.5 129,-392.5 25,-392.5 25,-392.5 19,-392.5 13,-386.5 13,-380.5 13,-380.5 13,-312.5 13,-312.5 13,-306.5 19,-300.5 25,-300.5"/>
<text text-anchor="middle" x="77" y="-377.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TxnCommitRecord</text>
<polyline fill="none" stroke="#1c2123" points="13,-369.5 141,-369.5 "/>
<text text-anchor="start" x="21" y="-354.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SingleRecord</text>
<polyline fill="none" stroke="#1c2123" points="13,-346.5 141,-346.5 "/>
<text text-anchor="start" x="21" y="-331.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">OverlappedRollback</text>
<polyline fill="none" stroke="#1c2123" points="13,-323.5 141,-323.5 "/>
<text text-anchor="start" x="21" y="-308.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">None</text>
</g>
<!-- OverlappedWrite -->
<g id="node17" class="node">
<title>OverlappedWrite</title>
<path fill="none" stroke="#1c2123" d="M202,-312C202,-312 343,-312 343,-312 349,-312 355,-318 355,-324 355,-324 355,-369 355,-369 355,-375 349,-381 343,-381 343,-381 202,-381 202,-381 196,-381 190,-375 190,-369 190,-369 190,-324 190,-324 190,-318 196,-312 202,-312"/>
<text text-anchor="middle" x="272.5" y="-365.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">OverlappedWrite</text>
<polyline fill="none" stroke="#1c2123" points="190,-358 355,-358 "/>
<text text-anchor="start" x="198" y="-342.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub write: Write</text>
<polyline fill="none" stroke="#1c2123" points="190,-335 355,-335 "/>
<text text-anchor="start" x="198" y="-319.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub gc_fence: TimeStamp,</text>
</g>
<!-- TxnCommitRecord&#45;&gt;OverlappedWrite -->
<g id="edge17" class="edge">
<title>TxnCommitRecord&#45;&gt;OverlappedWrite</title>
<path fill="none" stroke="#666666" d="M141.09,-346.5C153.36,-346.5 166.46,-346.5 179.44,-346.5"/>
<polygon fill="#666666" stroke="#666666" points="179.81,-350 189.81,-346.5 179.81,-343 179.81,-350"/>
</g>
<!-- SingleRecord -->
<g id="node18" class="node">
<title>SingleRecord</title>
<path fill="none" stroke="#1c2123" d="M211,-400C211,-400 334,-400 334,-400 340,-400 346,-406 346,-412 346,-412 346,-457 346,-457 346,-463 340,-469 334,-469 334,-469 211,-469 211,-469 205,-469 199,-463 199,-457 199,-457 199,-412 199,-412 199,-406 205,-400 211,-400"/>
<text text-anchor="middle" x="272.5" y="-453.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">SingleRecord</text>
<polyline fill="none" stroke="#1c2123" points="199,-446 346,-446 "/>
<text text-anchor="start" x="207" y="-430.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">commit_ts: TimeStamp</text>
<polyline fill="none" stroke="#1c2123" points="199,-423 346,-423 "/>
<text text-anchor="start" x="207" y="-407.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">write: Write</text>
</g>
<!-- TxnCommitRecord&#45;&gt;SingleRecord -->
<g id="edge18" class="edge">
<title>TxnCommitRecord&#45;&gt;SingleRecord</title>
<path fill="none" stroke="#666666" d="M141.09,-375.19C156.49,-382.19 173.18,-389.79 189.32,-397.13"/>
<polygon fill="#666666" stroke="#666666" points="188.2,-400.46 198.75,-401.41 191.1,-394.09 188.2,-400.46"/>
</g>
<!-- OverlappedRollback -->
<g id="node19" class="node">
<title>OverlappedRollback</title>
<path fill="none" stroke="#1c2123" d="M211,-246.5C211,-246.5 334,-246.5 334,-246.5 340,-246.5 346,-252.5 346,-258.5 346,-258.5 346,-280.5 346,-280.5 346,-286.5 340,-292.5 334,-292.5 334,-292.5 211,-292.5 211,-292.5 205,-292.5 199,-286.5 199,-280.5 199,-280.5 199,-258.5 199,-258.5 199,-252.5 205,-246.5 211,-246.5"/>
<text text-anchor="middle" x="272.5" y="-277.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">OverlappedRollback</text>
<polyline fill="none" stroke="#1c2123" points="199,-269.5 346,-269.5 "/>
<text text-anchor="start" x="207" y="-254.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">commit_ts: TimeStamp</text>
</g>
<!-- TxnCommitRecord&#45;&gt;OverlappedRollback -->
<g id="edge19" class="edge">
<title>TxnCommitRecord&#45;&gt;OverlappedRollback</title>
<path fill="none" stroke="#666666" d="M141.09,-321.39C161.18,-313.4 183.48,-304.53 203.88,-296.41"/>
<polygon fill="#666666" stroke="#666666" points="205.41,-299.57 213.41,-292.62 202.82,-293.06 205.41,-299.57"/>
</g>
<!-- OverlappedWrite&#45;&gt;Write -->
<g id="edge21" class="edge">
<title>OverlappedWrite&#45;&gt;Write</title>
<path fill="none" stroke="#666666" d="M355.09,-353C363.45,-353.66 372.06,-354.35 380.72,-355.04"/>
<polygon fill="#666666" stroke="#666666" points="380.64,-358.54 390.89,-355.85 381.19,-351.57 380.64,-358.54"/>
</g>
<!-- SingleRecord&#45;&gt;Write -->
<g id="edge20" class="edge">
<title>SingleRecord&#45;&gt;Write</title>
<path fill="none" stroke="#666666" d="M346.25,-411.97C357.34,-408.53 369.02,-404.91 380.79,-401.27"/>
<polygon fill="#666666" stroke="#666666" points="382.17,-404.51 390.68,-398.2 380.1,-397.82 382.17,-404.51"/>
</g>
</g>
</svg>
