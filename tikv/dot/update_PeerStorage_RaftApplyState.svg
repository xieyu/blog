<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: update_peerstorage_raftApplyState Pages: 1 -->
<svg width="1382pt" height="531pt"
 viewBox="0.00 0.00 1382.00 530.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 526.5)">
<title>update_peerstorage_raftApplyState</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-526.5 1378,-526.5 1378,4 -4,4"/>
<!-- ApplyRes -->
<g id="node1" class="node">
<title>ApplyRes</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M12,-57.5C12,-57.5 245,-57.5 245,-57.5 251,-57.5 257,-63.5 257,-69.5 257,-69.5 257,-183.5 257,-183.5 257,-189.5 251,-195.5 245,-195.5 245,-195.5 12,-195.5 12,-195.5 6,-195.5 0,-189.5 0,-183.5 0,-183.5 0,-69.5 0,-69.5 0,-63.5 6,-57.5 12,-57.5"/>
<text text-anchor="middle" x="128.5" y="-180.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ApplyRes</text>
<polyline fill="none" stroke="#8a8898" points="0,-172.5 257,-172.5 "/>
<text text-anchor="start" x="8" y="-157.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub region_id: u64,</text>
<polyline fill="none" stroke="#8a8898" points="0,-149.5 257,-149.5 "/>
<text text-anchor="start" x="8" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub apply_state: RaftApplyState,</text>
<polyline fill="none" stroke="#8a8898" points="0,-126.5 257,-126.5 "/>
<text text-anchor="start" x="8" y="-111.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub applied_index_term: u64,</text>
<polyline fill="none" stroke="#8a8898" points="0,-103.5 257,-103.5 "/>
<text text-anchor="start" x="8" y="-88.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub exec_res: VecDeque&lt;ExecResult&lt;S&gt;&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="0,-80.5 257,-80.5 "/>
<text text-anchor="start" x="8" y="-65.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub metrics: ApplyMetrics,</text>
</g>
<!-- PeerFsmDelegate_on_apply_res -->
<g id="node2" class="node">
<title>PeerFsmDelegate_on_apply_res</title>
<path fill="none" stroke="#1c2123" d="M328.5,-96C328.5,-96 432.5,-96 432.5,-96 438.5,-96 444.5,-102 444.5,-108 444.5,-108 444.5,-145 444.5,-145 444.5,-151 438.5,-157 432.5,-157 432.5,-157 328.5,-157 328.5,-157 322.5,-157 316.5,-151 316.5,-145 316.5,-145 316.5,-108 316.5,-108 316.5,-102 322.5,-96 328.5,-96"/>
<text text-anchor="start" x="324.5" y="-141.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate</text>
<text text-anchor="start" x="324.5" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> on_apply_res</text>
<polyline fill="none" stroke="#1c2123" points="316.5,-119 444.5,-119 "/>
<text text-anchor="middle" x="380.5" y="-103.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理ApplyRes消息</text>
</g>
<!-- ApplyRes&#45;&gt;PeerFsmDelegate_on_apply_res -->
<g id="edge1" class="edge">
<title>ApplyRes&#45;&gt;PeerFsmDelegate_on_apply_res</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M257.06,-126.5C273.95,-126.5 290.77,-126.5 306.3,-126.5"/>
<polygon fill="green" stroke="green" points="306.31,-130 316.31,-126.5 306.31,-123 306.31,-130"/>
</g>
<!-- PeerStorage_set_applied_state -->
<g id="node4" class="node">
<title>PeerStorage_set_applied_state</title>
<path fill="none" stroke="#1c2123" d="M757.5,-176.5C757.5,-176.5 858.5,-176.5 858.5,-176.5 864.5,-176.5 870.5,-182.5 870.5,-188.5 870.5,-188.5 870.5,-240.5 870.5,-240.5 870.5,-246.5 864.5,-252.5 858.5,-252.5 858.5,-252.5 757.5,-252.5 757.5,-252.5 751.5,-252.5 745.5,-246.5 745.5,-240.5 745.5,-240.5 745.5,-188.5 745.5,-188.5 745.5,-182.5 751.5,-176.5 757.5,-176.5"/>
<text text-anchor="start" x="753.5" y="-237.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="753.5" y="-222.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> set_applied_state</text>
<polyline fill="none" stroke="#1c2123" points="745.5,-214.5 870.5,-214.5 "/>
<text text-anchor="start" x="753.5" y="-199.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">更新PeerStorage的</text>
<text text-anchor="start" x="753.5" y="-184.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> RaftApplyState</text>
</g>
<!-- ApplyRes&#45;&gt;PeerStorage_set_applied_state -->
<g id="edge2" class="edge">
<title>ApplyRes:state&#45;&gt;PeerStorage_set_applied_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M257,-138.5C277.27,-138.5 274.15,-159.04 293,-166.5 441.84,-225.44 633.2,-225.5 735.29,-220.15"/>
<polygon fill="green" stroke="green" points="735.7,-223.63 745.49,-219.58 735.31,-216.65 735.7,-223.63"/>
</g>
<!-- PeerStorage_set_applied_term -->
<g id="node5" class="node">
<title>PeerStorage_set_applied_term</title>
<path fill="none" stroke="#1c2123" d="M755.5,-0.5C755.5,-0.5 860.5,-0.5 860.5,-0.5 866.5,-0.5 872.5,-6.5 872.5,-12.5 872.5,-12.5 872.5,-64.5 872.5,-64.5 872.5,-70.5 866.5,-76.5 860.5,-76.5 860.5,-76.5 755.5,-76.5 755.5,-76.5 749.5,-76.5 743.5,-70.5 743.5,-64.5 743.5,-64.5 743.5,-12.5 743.5,-12.5 743.5,-6.5 749.5,-0.5 755.5,-0.5"/>
<text text-anchor="start" x="751.5" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="751.5" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> set_applied_term</text>
<polyline fill="none" stroke="#1c2123" points="743.5,-38.5 872.5,-38.5 "/>
<text text-anchor="start" x="751.5" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">更新PeerStorage的</text>
<text text-anchor="start" x="751.5" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> applied_index_term</text>
</g>
<!-- ApplyRes&#45;&gt;PeerStorage_set_applied_term -->
<g id="edge3" class="edge">
<title>ApplyRes:stte&#45;&gt;PeerStorage_set_applied_term</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M257.44,-93.27C269.42,-90.75 281.4,-88.44 293,-86.5 448.54,-60.47 633.09,-47.55 733.29,-42.01"/>
<polygon fill="green" stroke="green" points="733.52,-45.5 743.31,-41.46 733.14,-38.51 733.52,-45.5"/>
</g>
<!-- Peer_post_apply -->
<g id="node3" class="node">
<title>Peer_post_apply</title>
<path fill="none" stroke="#1c2123" d="M551.5,-107.5C551.5,-107.5 607.5,-107.5 607.5,-107.5 613.5,-107.5 619.5,-113.5 619.5,-119.5 619.5,-119.5 619.5,-133.5 619.5,-133.5 619.5,-139.5 613.5,-145.5 607.5,-145.5 607.5,-145.5 551.5,-145.5 551.5,-145.5 545.5,-145.5 539.5,-139.5 539.5,-133.5 539.5,-133.5 539.5,-119.5 539.5,-119.5 539.5,-113.5 545.5,-107.5 551.5,-107.5"/>
<text text-anchor="start" x="547.5" y="-130.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="547.5" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> post_apply</text>
</g>
<!-- PeerFsmDelegate_on_apply_res&#45;&gt;Peer_post_apply -->
<g id="edge12" class="edge">
<title>PeerFsmDelegate_on_apply_res&#45;&gt;Peer_post_apply</title>
<path fill="none" stroke="#666666" d="M444.64,-126.5C472.04,-126.5 503.65,-126.5 529.27,-126.5"/>
<polygon fill="#666666" stroke="#666666" points="529.49,-130 539.49,-126.5 529.49,-123 529.49,-130"/>
</g>
<!-- Peer_post_apply&#45;&gt;PeerStorage_set_applied_state -->
<g id="edge13" class="edge">
<title>Peer_post_apply&#45;&gt;PeerStorage_set_applied_state</title>
<path fill="none" stroke="#666666" d="M619.69,-141.73C651.56,-154.11 697.36,-171.9 735.69,-186.79"/>
<polygon fill="#666666" stroke="#666666" points="734.67,-190.15 745.26,-190.51 737.2,-183.63 734.67,-190.15"/>
</g>
<!-- Peer_post_apply&#45;&gt;PeerStorage_set_applied_term -->
<g id="edge14" class="edge">
<title>Peer_post_apply&#45;&gt;PeerStorage_set_applied_term</title>
<path fill="none" stroke="#666666" d="M619.69,-111.27C651.09,-99.07 696.02,-81.62 734,-66.86"/>
<polygon fill="#666666" stroke="#666666" points="735.44,-70.06 743.49,-63.17 732.9,-63.53 735.44,-70.06"/>
</g>
<!-- raft_group_advance_apply_to -->
<g id="node6" class="node">
<title>raft_group_advance_apply_to</title>
<path fill="none" stroke="#1c2123" d="M744,-96C744,-96 872,-96 872,-96 878,-96 884,-102 884,-108 884,-108 884,-145 884,-145 884,-151 878,-157 872,-157 872,-157 744,-157 744,-157 738,-157 732,-151 732,-145 732,-145 732,-108 732,-108 732,-102 738,-96 744,-96"/>
<text text-anchor="start" x="740" y="-141.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_group</text>
<text text-anchor="start" x="740" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> advance_apply_to</text>
<polyline fill="none" stroke="#1c2123" points="732,-119 884,-119 "/>
<text text-anchor="start" x="740" y="-103.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">更新raft的applied index</text>
</g>
<!-- Peer_post_apply&#45;&gt;raft_group_advance_apply_to -->
<g id="edge15" class="edge">
<title>Peer_post_apply&#45;&gt;raft_group_advance_apply_to</title>
<path fill="none" stroke="#666666" d="M619.69,-126.5C647.7,-126.5 686.46,-126.5 721.46,-126.5"/>
<polygon fill="#666666" stroke="#666666" points="721.7,-130 731.7,-126.5 721.7,-123 721.7,-130"/>
</g>
<!-- PeerFsmDelegate_collect_ready -->
<g id="node7" class="node">
<title>PeerFsmDelegate_collect_ready</title>
<path fill="none" stroke="#1c2123" d="M305,-408C305,-408 456,-408 456,-408 462,-408 468,-414 468,-420 468,-420 468,-457 468,-457 468,-463 462,-469 456,-469 456,-469 305,-469 305,-469 299,-469 293,-463 293,-457 293,-457 293,-420 293,-420 293,-414 299,-408 305,-408"/>
<text text-anchor="start" x="301" y="-453.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate</text>
<text text-anchor="start" x="301" y="-438.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> collect_ready</text>
<polyline fill="none" stroke="#1c2123" points="293,-431 468,-431 "/>
<text text-anchor="start" x="301" y="-415.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">调用raft_group的ready函数</text>
</g>
<!-- Peer_handle_raft_append -->
<g id="node8" class="node">
<title>Peer_handle_raft_append</title>
<path fill="none" stroke="#1c2123" d="M527.5,-419.5C527.5,-419.5 631.5,-419.5 631.5,-419.5 637.5,-419.5 643.5,-425.5 643.5,-431.5 643.5,-431.5 643.5,-445.5 643.5,-445.5 643.5,-451.5 637.5,-457.5 631.5,-457.5 631.5,-457.5 527.5,-457.5 527.5,-457.5 521.5,-457.5 515.5,-451.5 515.5,-445.5 515.5,-445.5 515.5,-431.5 515.5,-431.5 515.5,-425.5 521.5,-419.5 527.5,-419.5"/>
<text text-anchor="start" x="523.5" y="-442.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="523.5" y="-427.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_append</text>
</g>
<!-- PeerFsmDelegate_collect_ready&#45;&gt;Peer_handle_raft_append -->
<g id="edge8" class="edge">
<title>PeerFsmDelegate_collect_ready&#45;&gt;Peer_handle_raft_append</title>
<path fill="none" stroke="#666666" d="M468.19,-438.5C480.61,-438.5 493.29,-438.5 505.41,-438.5"/>
<polygon fill="#666666" stroke="#666666" points="505.45,-442 515.45,-438.5 505.45,-435 505.45,-442"/>
</g>
<!-- PeerStorage_handle_raft_ready -->
<g id="node9" class="node">
<title>PeerStorage_handle_raft_ready</title>
<path fill="none" stroke="#1c2123" d="M703,-355C703,-355 913,-355 913,-355 919,-355 925,-361 925,-367 925,-367 925,-510 925,-510 925,-516 919,-522 913,-522 913,-522 703,-522 703,-522 697,-522 691,-516 691,-510 691,-510 691,-367 691,-367 691,-361 697,-355 703,-355"/>
<text text-anchor="start" x="699" y="-506.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="699" y="-491.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_ready</text>
<polyline fill="none" stroke="#1c2123" points="691,-484 925,-484 "/>
<text text-anchor="start" x="699" y="-468.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">1. 创建InvokeContext</text>
<text text-anchor="start" x="699" y="-453.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将raftState和applyState放在里面</text>
<polyline fill="none" stroke="#1c2123" points="691,-446 925,-446 "/>
<text text-anchor="start" x="699" y="-430.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">2.它们写入write batch</text>
<polyline fill="none" stroke="#1c2123" points="691,-423 925,-423 "/>
<text text-anchor="start" x="699" y="-407.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">3.等write batc写入底层的kv engine后</text>
<text text-anchor="start" x="699" y="-392.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 使用InvokeContext</text>
<text text-anchor="start" x="699" y="-377.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 更新PeerStorage的</text>
<text text-anchor="start" x="699" y="-362.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> RaftState和ApplyState</text>
</g>
<!-- Peer_handle_raft_append&#45;&gt;PeerStorage_handle_raft_ready -->
<g id="edge9" class="edge">
<title>Peer_handle_raft_append&#45;&gt;PeerStorage_handle_raft_ready</title>
<path fill="none" stroke="#666666" d="M643.59,-438.5C655.26,-438.5 667.83,-438.5 680.61,-438.5"/>
<polygon fill="#666666" stroke="#666666" points="680.91,-442 690.91,-438.5 680.91,-435 680.91,-442"/>
</g>
<!-- InvokeContext -->
<g id="node14" class="node">
<title>InvokeContext</title>
<path fill="none" stroke="#1c2123" d="M1087,-501.5C1087,-501.5 1014,-501.5 1014,-501.5 1008,-501.5 1002,-495.5 1002,-489.5 1002,-489.5 1002,-477.5 1002,-477.5 1002,-471.5 1008,-465.5 1014,-465.5 1014,-465.5 1087,-465.5 1087,-465.5 1093,-465.5 1099,-471.5 1099,-477.5 1099,-477.5 1099,-489.5 1099,-489.5 1099,-495.5 1093,-501.5 1087,-501.5"/>
<text text-anchor="middle" x="1050.5" y="-479.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">InvokeContext</text>
</g>
<!-- PeerStorage_handle_raft_ready&#45;&gt;InvokeContext -->
<g id="edge10" class="edge">
<title>PeerStorage_handle_raft_ready&#45;&gt;InvokeContext</title>
<path fill="none" stroke="#666666" d="M925.02,-460.21C948.25,-464.55 971.68,-468.94 991.85,-472.71"/>
<polygon fill="#666666" stroke="#666666" points="991.31,-476.17 1001.78,-474.57 992.6,-469.29 991.31,-476.17"/>
</g>
<!-- save_apply_state_to -->
<g id="node15" class="node">
<title>save_apply_state_to</title>
<path fill="none" stroke="#1c2123" d="M973,-310C973,-310 1128,-310 1128,-310 1134,-310 1140,-316 1140,-322 1140,-322 1140,-435 1140,-435 1140,-441 1134,-447 1128,-447 1128,-447 973,-447 973,-447 967,-447 961,-441 961,-435 961,-435 961,-322 961,-322 961,-316 967,-310 973,-310"/>
<text text-anchor="start" x="969" y="-431.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="969" y="-416.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> save_apply_state_to</text>
<polyline fill="none" stroke="#1c2123" points="961,-409 1140,-409 "/>
<text text-anchor="start" x="969" y="-393.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">only when apply snapshot</text>
<polyline fill="none" stroke="#1c2123" points="961,-386 1140,-386 "/>
<text text-anchor="start" x="969" y="-370.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">如果apply 了snapshot</text>
<text text-anchor="start" x="969" y="-355.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 更新region 在rocksdb</text>
<text text-anchor="start" x="969" y="-340.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 中的apply_state</text>
<polyline fill="none" stroke="#1c2123" points="961,-333 1140,-333 "/>
<text text-anchor="start" x="969" y="-317.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将apply state写入write batch</text>
</g>
<!-- PeerStorage_handle_raft_ready&#45;&gt;save_apply_state_to -->
<g id="edge11" class="edge">
<title>PeerStorage_handle_raft_ready&#45;&gt;save_apply_state_to</title>
<path fill="none" stroke="#666666" d="M925.02,-409.55C933.66,-407.4 942.32,-405.24 950.83,-403.12"/>
<polygon fill="#666666" stroke="#666666" points="951.89,-406.46 960.75,-400.64 950.2,-399.67 951.89,-406.46"/>
</g>
<!-- RaftPoller_handle_raft_ready -->
<g id="node10" class="node">
<title>RaftPoller_handle_raft_ready</title>
<path fill="none" stroke="#1c2123" d="M31.5,-232C31.5,-232 225.5,-232 225.5,-232 231.5,-232 237.5,-238 237.5,-244 237.5,-244 237.5,-319 237.5,-319 237.5,-325 231.5,-331 225.5,-331 225.5,-331 31.5,-331 31.5,-331 25.5,-331 19.5,-325 19.5,-319 19.5,-319 19.5,-244 19.5,-244 19.5,-238 25.5,-232 31.5,-232"/>
<text text-anchor="start" x="27.5" y="-315.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftPoller</text>
<text text-anchor="start" x="27.5" y="-300.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_ready</text>
<polyline fill="none" stroke="#1c2123" points="19.5,-293 237.5,-293 "/>
<text text-anchor="start" x="27.5" y="-277.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将write batch写入kv engine(rocksb)</text>
<text text-anchor="start" x="27.5" y="-262.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 和raft log engine</text>
<polyline fill="none" stroke="#1c2123" points="19.5,-255 237.5,-255 "/>
<text text-anchor="start" x="27.5" y="-239.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">写完后调用回调函数</text>
</g>
<!-- PeerFsmDelegate_post_raft_ready_append -->
<g id="node11" class="node">
<title>PeerFsmDelegate_post_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M317,-262.5C317,-262.5 444,-262.5 444,-262.5 450,-262.5 456,-268.5 456,-274.5 456,-274.5 456,-288.5 456,-288.5 456,-294.5 450,-300.5 444,-300.5 444,-300.5 317,-300.5 317,-300.5 311,-300.5 305,-294.5 305,-288.5 305,-288.5 305,-274.5 305,-274.5 305,-268.5 311,-262.5 317,-262.5"/>
<text text-anchor="start" x="313" y="-285.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerFsmDelegate</text>
<text text-anchor="start" x="313" y="-270.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> post_raft_ready_append</text>
</g>
<!-- RaftPoller_handle_raft_ready&#45;&gt;PeerFsmDelegate_post_raft_ready_append -->
<g id="edge5" class="edge">
<title>RaftPoller_handle_raft_ready&#45;&gt;PeerFsmDelegate_post_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M237.7,-281.5C256.85,-281.5 276.54,-281.5 294.92,-281.5"/>
<polygon fill="#666666" stroke="#666666" points="294.98,-285 304.98,-281.5 294.98,-278 294.98,-285"/>
</g>
<!-- Peer_post_raft_ready_append -->
<g id="node12" class="node">
<title>Peer_post_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M516,-262.5C516,-262.5 643,-262.5 643,-262.5 649,-262.5 655,-268.5 655,-274.5 655,-274.5 655,-288.5 655,-288.5 655,-294.5 649,-300.5 643,-300.5 643,-300.5 516,-300.5 516,-300.5 510,-300.5 504,-294.5 504,-288.5 504,-288.5 504,-274.5 504,-274.5 504,-268.5 510,-262.5 516,-262.5"/>
<text text-anchor="start" x="512" y="-285.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Peer</text>
<text text-anchor="start" x="512" y="-270.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> post_raft_ready_append</text>
</g>
<!-- PeerFsmDelegate_post_raft_ready_append&#45;&gt;Peer_post_raft_ready_append -->
<g id="edge6" class="edge">
<title>PeerFsmDelegate_post_raft_ready_append&#45;&gt;Peer_post_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M456.26,-281.5C468.42,-281.5 481.09,-281.5 493.48,-281.5"/>
<polygon fill="#666666" stroke="#666666" points="493.79,-285 503.79,-281.5 493.79,-278 493.79,-285"/>
</g>
<!-- PeerStorage_post_ready -->
<g id="node13" class="node">
<title>PeerStorage_post_ready</title>
<path fill="none" stroke="#1c2123" d="M1188,-337C1188,-337 1362,-337 1362,-337 1368,-337 1374,-343 1374,-349 1374,-349 1374,-416 1374,-416 1374,-422 1368,-428 1362,-428 1362,-428 1188,-428 1188,-428 1182,-428 1176,-422 1176,-416 1176,-416 1176,-349 1176,-349 1176,-343 1182,-337 1188,-337"/>
<text text-anchor="start" x="1184" y="-412.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="1184" y="-397.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> post_ready</text>
<polyline fill="none" stroke="#1c2123" points="1176,-390 1374,-390 "/>
<text text-anchor="start" x="1184" y="-374.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用InvokeContext更新</text>
<text text-anchor="start" x="1184" y="-359.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> PeerStorage的</text>
<text text-anchor="start" x="1184" y="-344.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> raft_state, apply_state, last_term</text>
</g>
<!-- Peer_post_raft_ready_append&#45;&gt;PeerStorage_post_ready -->
<g id="edge7" class="edge">
<title>Peer_post_raft_ready_append&#45;&gt;PeerStorage_post_ready</title>
<path fill="none" stroke="#666666" d="M655.31,-272.19C764.48,-261.22 972.67,-250.28 1140,-300.5 1162.86,-307.36 1185.74,-319.11 1205.97,-331.61"/>
<polygon fill="#666666" stroke="#666666" points="1204.15,-334.59 1214.47,-336.99 1207.9,-328.68 1204.15,-334.59"/>
</g>
<!-- InvokeContext&#45;&gt;PeerStorage_post_ready -->
<g id="edge4" class="edge">
<title>InvokeContext&#45;&gt;PeerStorage_post_ready</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1099.46,-470.86C1112.79,-466.81 1127.13,-461.95 1140,-456.5 1156.06,-449.7 1172.69,-441.53 1188.55,-433.13"/>
<polygon fill="green" stroke="green" points="1190.63,-435.98 1197.78,-428.17 1187.32,-429.82 1190.63,-435.98"/>
</g>
</g>
</svg>
