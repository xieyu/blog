<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: update_raft_apply_state Pages: 1 -->
<svg width="1649pt" height="390pt"
 viewBox="0.00 0.00 1649.00 390.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 386)">
<title>update_raft_apply_state</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-386 1645,-386 1645,4 -4,4"/>
<!-- ApplyFsm_handle_apply -->
<g id="node1" class="node">
<title>ApplyFsm_handle_apply</title>
<path fill="none" stroke="#1c2123" d="M226,-101.5C226,-101.5 345,-101.5 345,-101.5 351,-101.5 357,-107.5 357,-113.5 357,-113.5 357,-165.5 357,-165.5 357,-171.5 351,-177.5 345,-177.5 345,-177.5 226,-177.5 226,-177.5 220,-177.5 214,-171.5 214,-165.5 214,-165.5 214,-113.5 214,-113.5 214,-107.5 220,-101.5 226,-101.5"/>
<text text-anchor="start" x="222" y="-162.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsm</text>
<text text-anchor="start" x="222" y="-147.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_apply</text>
<polyline fill="none" stroke="#1c2123" points="214,-139.5 357,-139.5 "/>
<text text-anchor="start" x="222" y="-124.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理RaftPoller发过来</text>
<text text-anchor="start" x="222" y="-109.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Apply Task</text>
</g>
<!-- Apply_entries_last -->
<g id="node2" class="node">
<title>Apply_entries_last</title>
<path fill="none" stroke="#1c2123" d="M669,-113C669,-113 790,-113 790,-113 796,-113 802,-119 802,-125 802,-125 802,-154 802,-154 802,-160 796,-166 790,-166 790,-166 669,-166 669,-166 663,-166 657,-160 657,-154 657,-154 657,-125 657,-125 657,-119 663,-113 669,-113"/>
<text text-anchor="start" x="665" y="-150.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用Apply::entries.last</text>
<text text-anchor="start" x="665" y="-135.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 更新commit_index</text>
<text text-anchor="start" x="665" y="-120.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 和commit_term</text>
</g>
<!-- ApplyFsm_handle_apply&#45;&gt;Apply_entries_last -->
<g id="edge1" class="edge">
<title>ApplyFsm_handle_apply&#45;&gt;Apply_entries_last</title>
<path fill="none" stroke="#666666" d="M357.02,-139.5C435.87,-139.5 563.39,-139.5 646.59,-139.5"/>
<polygon fill="#666666" stroke="#666666" points="646.76,-143 656.76,-139.5 646.76,-136 646.76,-143"/>
</g>
<!-- ApplyFsmDelegate_apply_state_set_commit_index -->
<g id="node3" class="node">
<title>ApplyFsmDelegate_apply_state_set_commit_index</title>
<path fill="none" stroke="#1c2123" d="M887,-39C887,-39 1061,-39 1061,-39 1067,-39 1073,-45 1073,-51 1073,-51 1073,-118 1073,-118 1073,-124 1067,-130 1061,-130 1061,-130 887,-130 887,-130 881,-130 875,-124 875,-118 875,-118 875,-51 875,-51 875,-45 881,-39 887,-39"/>
<text text-anchor="start" x="883" y="-114.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsmDelegate</text>
<text text-anchor="start" x="883" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> apply_state</text>
<text text-anchor="start" x="883" y="-84.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> set_commit_index</text>
<polyline fill="none" stroke="#1c2123" points="875,-77 1073,-77 "/>
<text text-anchor="start" x="883" y="-61.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用last entry的commit index</text>
<text text-anchor="start" x="883" y="-46.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 更新apply state的commit index</text>
</g>
<!-- ApplyFsm_handle_apply&#45;&gt;ApplyFsmDelegate_apply_state_set_commit_index -->
<g id="edge2" class="edge">
<title>ApplyFsm_handle_apply&#45;&gt;ApplyFsmDelegate_apply_state_set_commit_index</title>
<path fill="none" stroke="#666666" d="M357.31,-130.74C424.75,-122.66 529.16,-110.84 620,-103.5 701.92,-96.88 794.73,-91.99 864.62,-88.82"/>
<polygon fill="#666666" stroke="#666666" points="864.93,-92.31 874.76,-88.37 864.61,-85.32 864.93,-92.31"/>
</g>
<!-- ApplyFsmDelegate_apply_state_set_commit_term -->
<g id="node4" class="node">
<title>ApplyFsmDelegate_apply_state_set_commit_term</title>
<path fill="none" stroke="#1c2123" d="M887.5,-149C887.5,-149 1060.5,-149 1060.5,-149 1066.5,-149 1072.5,-155 1072.5,-161 1072.5,-161 1072.5,-228 1072.5,-228 1072.5,-234 1066.5,-240 1060.5,-240 1060.5,-240 887.5,-240 887.5,-240 881.5,-240 875.5,-234 875.5,-228 875.5,-228 875.5,-161 875.5,-161 875.5,-155 881.5,-149 887.5,-149"/>
<text text-anchor="start" x="883.5" y="-224.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsmDelegate</text>
<text text-anchor="start" x="883.5" y="-209.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> apply_state</text>
<text text-anchor="start" x="883.5" y="-194.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> set_commit_term</text>
<polyline fill="none" stroke="#1c2123" points="875.5,-187 1072.5,-187 "/>
<text text-anchor="start" x="883.5" y="-171.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用last entry的commit term</text>
<text text-anchor="start" x="883.5" y="-156.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 更新apply state的commit_term</text>
</g>
<!-- ApplyFsm_handle_apply&#45;&gt;ApplyFsmDelegate_apply_state_set_commit_term -->
<g id="edge3" class="edge">
<title>ApplyFsm_handle_apply&#45;&gt;ApplyFsmDelegate_apply_state_set_commit_term</title>
<path fill="none" stroke="#666666" d="M357.21,-149.14C369.15,-150.67 381.42,-152.18 393,-153.5 493.71,-165 518.92,-167.89 620,-175.5 702.1,-181.69 795.09,-186.61 865.01,-189.89"/>
<polygon fill="#666666" stroke="#666666" points="865.01,-193.39 875.16,-190.36 865.33,-186.4 865.01,-193.39"/>
</g>
<!-- ApplyFsmDelegate_handle_raft_committed_entries -->
<g id="node5" class="node">
<title>ApplyFsmDelegate_handle_raft_committed_entries</title>
<path fill="none" stroke="#1c2123" d="M405,-242.5C405,-242.5 572,-242.5 572,-242.5 578,-242.5 584,-248.5 584,-254.5 584,-254.5 584,-306.5 584,-306.5 584,-312.5 578,-318.5 572,-318.5 572,-318.5 405,-318.5 405,-318.5 399,-318.5 393,-312.5 393,-306.5 393,-306.5 393,-254.5 393,-254.5 393,-248.5 399,-242.5 405,-242.5"/>
<text text-anchor="start" x="401" y="-303.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsmDelegate</text>
<text text-anchor="start" x="401" y="-288.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_committed_entries</text>
<polyline fill="none" stroke="#1c2123" points="393,-280.5 584,-280.5 "/>
<text text-anchor="start" x="401" y="-265.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">遍历Apply中的entries</text>
<text text-anchor="start" x="401" y="-250.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 处理每个log entry</text>
</g>
<!-- ApplyFsm_handle_apply&#45;&gt;ApplyFsmDelegate_handle_raft_committed_entries -->
<g id="edge4" class="edge">
<title>ApplyFsm_handle_apply&#45;&gt;ApplyFsmDelegate_handle_raft_committed_entries</title>
<path fill="none" stroke="#666666" d="M340.89,-177.66C366.81,-195.84 397.96,-217.69 424.86,-236.56"/>
<polygon fill="#666666" stroke="#666666" points="422.87,-239.44 433.06,-242.31 426.89,-233.7 422.87,-239.44"/>
</g>
<!-- Apply_entries_last&#45;&gt;ApplyFsmDelegate_apply_state_set_commit_index -->
<g id="edge5" class="edge">
<title>Apply_entries_last&#45;&gt;ApplyFsmDelegate_apply_state_set_commit_index</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M802.27,-123.22C821.93,-118.76 843.67,-113.83 864.88,-109.02"/>
<polygon fill="green" stroke="green" points="865.92,-112.37 874.9,-106.75 864.37,-105.55 865.92,-112.37"/>
</g>
<!-- Apply_entries_last&#45;&gt;ApplyFsmDelegate_apply_state_set_commit_term -->
<g id="edge6" class="edge">
<title>Apply_entries_last&#45;&gt;ApplyFsmDelegate_apply_state_set_commit_term</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M802.27,-155.78C822.14,-160.28 844.14,-165.27 865.56,-170.13"/>
<polygon fill="green" stroke="green" points="864.82,-173.55 875.35,-172.35 866.37,-166.73 864.82,-173.55"/>
</g>
<!-- RaftApplyState -->
<g id="node11" class="node">
<title>RaftApplyState</title>
<path fill="#feed9b" stroke="#f7e495" d="M1121,-160C1121,-160 1336,-160 1336,-160 1342,-160 1348,-166 1348,-172 1348,-172 1348,-263 1348,-263 1348,-269 1342,-275 1336,-275 1336,-275 1121,-275 1121,-275 1115,-275 1109,-269 1109,-263 1109,-263 1109,-172 1109,-172 1109,-166 1115,-160 1121,-160"/>
<text text-anchor="middle" x="1228.5" y="-259.8" font-family="Times,serif" font-size="14.00" fill="#40575d">RaftApplyState</text>
<polyline fill="none" stroke="#f7e495" points="1109,-252 1348,-252 "/>
<text text-anchor="start" x="1117" y="-236.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub applied_index: u64,</text>
<polyline fill="none" stroke="#f7e495" points="1109,-229 1348,-229 "/>
<text text-anchor="start" x="1117" y="-213.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub commit_index: u64,</text>
<polyline fill="none" stroke="#f7e495" points="1109,-206 1348,-206 "/>
<text text-anchor="start" x="1117" y="-190.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub commit_term: u64,</text>
<polyline fill="none" stroke="#f7e495" points="1109,-183 1348,-183 "/>
<text text-anchor="start" x="1117" y="-167.8" font-family="Times,serif" font-size="14.00" fill="#40575d">pub truncated_state: RaftTruncatedState,</text>
</g>
<!-- ApplyFsmDelegate_apply_state_set_commit_index&#45;&gt;RaftApplyState -->
<g id="edge12" class="edge">
<title>ApplyFsmDelegate_apply_state_set_commit_index&#45;&gt;RaftApplyState</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1061.54,-130.08C1076.96,-138.21 1093.26,-146.79 1109.38,-155.28"/>
<polygon fill="green" stroke="green" points="1107.83,-158.42 1118.31,-159.99 1111.09,-152.23 1107.83,-158.42"/>
</g>
<!-- ApplyFsmDelegate_apply_state_set_commit_term&#45;&gt;RaftApplyState -->
<g id="edge13" class="edge">
<title>ApplyFsmDelegate_apply_state_set_commit_term&#45;&gt;RaftApplyState</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1072.62,-203.39C1081.1,-204.16 1089.76,-204.95 1098.44,-205.74"/>
<polygon fill="green" stroke="green" points="1098.35,-209.25 1108.62,-206.67 1098.98,-202.28 1098.35,-209.25"/>
</g>
<!-- ApplyContext_finish_for -->
<g id="node6" class="node">
<title>ApplyContext_finish_for</title>
<path fill="none" stroke="#1c2123" d="M1138.5,-313C1138.5,-313 1318.5,-313 1318.5,-313 1324.5,-313 1330.5,-319 1330.5,-325 1330.5,-325 1330.5,-362 1330.5,-362 1330.5,-368 1324.5,-374 1318.5,-374 1318.5,-374 1138.5,-374 1138.5,-374 1132.5,-374 1126.5,-368 1126.5,-362 1126.5,-362 1126.5,-325 1126.5,-325 1126.5,-319 1132.5,-313 1138.5,-313"/>
<text text-anchor="start" x="1134.5" y="-358.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyContext</text>
<text text-anchor="start" x="1134.5" y="-343.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> finish_for</text>
<polyline fill="none" stroke="#1c2123" points="1126.5,-336 1330.5,-336 "/>
<text text-anchor="start" x="1134.5" y="-320.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将delete的apply_state写入kv_wb</text>
</g>
<!-- ApplyFsmDelegate_handle_raft_committed_entries&#45;&gt;ApplyContext_finish_for -->
<g id="edge7" class="edge">
<title>ApplyFsmDelegate_handle_raft_committed_entries&#45;&gt;ApplyContext_finish_for</title>
<path fill="none" stroke="#666666" d="M548.89,-318.51C570.42,-330.21 595.49,-341.58 620,-347.5 789.27,-388.41 992.89,-374.89 1116.15,-360.13"/>
<polygon fill="#666666" stroke="#666666" points="1116.85,-363.57 1126.35,-358.88 1116,-356.62 1116.85,-363.57"/>
</g>
<!-- ApplyFsmDelegate_handle_raft_entry_normal -->
<g id="node7" class="node">
<title>ApplyFsmDelegate_handle_raft_entry_normal</title>
<path fill="none" stroke="#1c2123" d="M632,-223.5C632,-223.5 827,-223.5 827,-223.5 833,-223.5 839,-229.5 839,-235.5 839,-235.5 839,-325.5 839,-325.5 839,-331.5 833,-337.5 827,-337.5 827,-337.5 632,-337.5 632,-337.5 626,-337.5 620,-331.5 620,-325.5 620,-325.5 620,-235.5 620,-235.5 620,-229.5 626,-223.5 632,-223.5"/>
<text text-anchor="start" x="628" y="-322.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsmDelegate</text>
<text text-anchor="start" x="628" y="-307.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_entry_normal</text>
<polyline fill="none" stroke="#1c2123" points="620,-299.5 839,-299.5 "/>
<text text-anchor="start" x="628" y="-284.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">处理normal的raft log</text>
<text text-anchor="start" x="628" y="-269.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用apply_raft_cmd</text>
<text text-anchor="start" x="628" y="-254.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将log entry对应的cmd 写入kv_wb</text>
<polyline fill="none" stroke="#1c2123" points="620,-246.5 839,-246.5 "/>
<text text-anchor="start" x="628" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">更新apply_state的applied index</text>
</g>
<!-- ApplyFsmDelegate_handle_raft_committed_entries&#45;&gt;ApplyFsmDelegate_handle_raft_entry_normal -->
<g id="edge8" class="edge">
<title>ApplyFsmDelegate_handle_raft_committed_entries&#45;&gt;ApplyFsmDelegate_handle_raft_entry_normal</title>
<path fill="none" stroke="#666666" d="M584.3,-280.5C592.55,-280.5 600.96,-280.5 609.37,-280.5"/>
<polygon fill="#666666" stroke="#666666" points="609.61,-284 619.61,-280.5 609.61,-277 609.61,-284"/>
</g>
<!-- ApplyFsmDelegate_write_apply_state -->
<g id="node8" class="node">
<title>ApplyFsmDelegate_write_apply_state</title>
<path fill="none" stroke="#1c2123" d="M1432.5,-305.5C1432.5,-305.5 1592.5,-305.5 1592.5,-305.5 1598.5,-305.5 1604.5,-311.5 1604.5,-317.5 1604.5,-317.5 1604.5,-369.5 1604.5,-369.5 1604.5,-375.5 1598.5,-381.5 1592.5,-381.5 1592.5,-381.5 1432.5,-381.5 1432.5,-381.5 1426.5,-381.5 1420.5,-375.5 1420.5,-369.5 1420.5,-369.5 1420.5,-317.5 1420.5,-317.5 1420.5,-311.5 1426.5,-305.5 1432.5,-305.5"/>
<text text-anchor="start" x="1428.5" y="-366.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsmDelegate</text>
<text text-anchor="start" x="1428.5" y="-351.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> write_apply_state</text>
<text text-anchor="start" x="1428.5" y="-336.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将apply_state写入kv_wb</text>
<polyline fill="none" stroke="#1c2123" points="1420.5,-328.5 1604.5,-328.5 "/>
<text text-anchor="start" x="1428.5" y="-313.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">在最后会一起写入kv engine</text>
</g>
<!-- ApplyContext_finish_for&#45;&gt;ApplyFsmDelegate_write_apply_state -->
<g id="edge9" class="edge">
<title>ApplyContext_finish_for&#45;&gt;ApplyFsmDelegate_write_apply_state</title>
<path fill="none" stroke="#666666" d="M1330.51,-343.5C1356.32,-343.5 1384.08,-343.5 1409.92,-343.5"/>
<polygon fill="#666666" stroke="#666666" points="1410.1,-347 1420.1,-343.5 1410.1,-340 1410.1,-347"/>
</g>
<!-- ApplyRes -->
<g id="node9" class="node">
<title>ApplyRes</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M1396,-148.5C1396,-148.5 1629,-148.5 1629,-148.5 1635,-148.5 1641,-154.5 1641,-160.5 1641,-160.5 1641,-274.5 1641,-274.5 1641,-280.5 1635,-286.5 1629,-286.5 1629,-286.5 1396,-286.5 1396,-286.5 1390,-286.5 1384,-280.5 1384,-274.5 1384,-274.5 1384,-160.5 1384,-160.5 1384,-154.5 1390,-148.5 1396,-148.5"/>
<text text-anchor="middle" x="1512.5" y="-271.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ApplyRes</text>
<polyline fill="none" stroke="#8a8898" points="1384,-263.5 1641,-263.5 "/>
<text text-anchor="start" x="1392" y="-248.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub region_id: u64,</text>
<polyline fill="none" stroke="#8a8898" points="1384,-240.5 1641,-240.5 "/>
<text text-anchor="start" x="1392" y="-225.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub apply_state: RaftApplyState,</text>
<polyline fill="none" stroke="#8a8898" points="1384,-217.5 1641,-217.5 "/>
<text text-anchor="start" x="1392" y="-202.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub applied_index_term: u64,</text>
<polyline fill="none" stroke="#8a8898" points="1384,-194.5 1641,-194.5 "/>
<text text-anchor="start" x="1392" y="-179.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub exec_res: VecDeque&lt;ExecResult&lt;S&gt;&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="1384,-171.5 1641,-171.5 "/>
<text text-anchor="start" x="1392" y="-156.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub metrics: ApplyMetrics,</text>
</g>
<!-- ApplyContext_finish_for&#45;&gt;ApplyRes -->
<g id="edge10" class="edge">
<title>ApplyContext_finish_for&#45;&gt;ApplyRes</title>
<path fill="none" stroke="#666666" d="M1297.76,-313C1320.95,-302.64 1347.75,-290.67 1374.36,-278.78"/>
<polygon fill="#666666" stroke="#666666" points="1376.06,-281.85 1383.76,-274.58 1373.2,-275.46 1376.06,-281.85"/>
</g>
<!-- ApplyFsmDelegate_apply_state_set_applied_index -->
<g id="node10" class="node">
<title>ApplyFsmDelegate_apply_state_set_applied_index</title>
<path fill="none" stroke="#1c2123" d="M925,-259.5C925,-259.5 1023,-259.5 1023,-259.5 1029,-259.5 1035,-265.5 1035,-271.5 1035,-271.5 1035,-323.5 1035,-323.5 1035,-329.5 1029,-335.5 1023,-335.5 1023,-335.5 925,-335.5 925,-335.5 919,-335.5 913,-329.5 913,-323.5 913,-323.5 913,-271.5 913,-271.5 913,-265.5 919,-259.5 925,-259.5"/>
<text text-anchor="start" x="921" y="-320.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyFsmDelegate</text>
<text text-anchor="start" x="921" y="-305.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> apply_state</text>
<text text-anchor="start" x="921" y="-290.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> set_applied_index</text>
<polyline fill="none" stroke="#1c2123" points="913,-282.5 1035,-282.5 "/>
<text text-anchor="start" x="921" y="-267.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">更新applied index</text>
</g>
<!-- ApplyFsmDelegate_handle_raft_entry_normal&#45;&gt;ApplyFsmDelegate_apply_state_set_applied_index -->
<g id="edge11" class="edge">
<title>ApplyFsmDelegate_handle_raft_entry_normal&#45;&gt;ApplyFsmDelegate_apply_state_set_applied_index</title>
<path fill="none" stroke="#666666" d="M839.34,-288.13C860.89,-289.64 882.97,-291.19 902.81,-292.58"/>
<polygon fill="#666666" stroke="#666666" points="902.75,-296.08 912.98,-293.29 903.24,-289.1 902.75,-296.08"/>
</g>
<!-- ApplyFsmDelegate_apply_state_set_applied_index&#45;&gt;RaftApplyState -->
<g id="edge14" class="edge">
<title>ApplyFsmDelegate_apply_state_set_applied_index&#45;&gt;RaftApplyState</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1035.16,-278.44C1054.56,-272.29 1076.86,-265.23 1099.24,-258.14"/>
<polygon fill="green" stroke="green" points="1100.36,-261.45 1108.83,-255.1 1098.24,-254.78 1100.36,-261.45"/>
</g>
<!-- RaftApplyState&#45;&gt;ApplyFsmDelegate_write_apply_state -->
<g id="edge17" class="edge">
<title>RaftApplyState&#45;&gt;ApplyFsmDelegate_write_apply_state</title>
<path fill="none" stroke="#666666" d="M1338.02,-275.04C1353.32,-282.55 1368.96,-289.91 1384,-296.5 1392.66,-300.29 1401.73,-304.05 1410.88,-307.69"/>
<polygon fill="#666666" stroke="#666666" points="1409.83,-311.04 1420.42,-311.44 1412.39,-304.53 1409.83,-311.04"/>
</g>
<!-- RaftApplyState&#45;&gt;ApplyRes -->
<g id="edge18" class="edge">
<title>RaftApplyState&#45;&gt;ApplyRes</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1348.28,-217.5C1356.71,-217.5 1365.26,-217.5 1373.79,-217.5"/>
<polygon fill="green" stroke="green" points="1373.79,-221 1383.79,-217.5 1373.79,-214 1373.79,-221"/>
</g>
<!-- Apply -->
<g id="node12" class="node">
<title>Apply</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M12,-0.5C12,-0.5 166,-0.5 166,-0.5 172,-0.5 178,-6.5 178,-12.5 178,-12.5 178,-172.5 178,-172.5 178,-178.5 172,-184.5 166,-184.5 166,-184.5 12,-184.5 12,-184.5 6,-184.5 0,-178.5 0,-172.5 0,-172.5 0,-12.5 0,-12.5 0,-6.5 6,-0.5 12,-0.5"/>
<text text-anchor="middle" x="89" y="-169.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Apply</text>
<polyline fill="none" stroke="#8a8898" points="0,-161.5 178,-161.5 "/>
<text text-anchor="start" x="8" y="-146.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub peer_id: u64,</text>
<polyline fill="none" stroke="#8a8898" points="0,-138.5 178,-138.5 "/>
<text text-anchor="start" x="8" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub region_id: u64,</text>
<polyline fill="none" stroke="#8a8898" points="0,-115.5 178,-115.5 "/>
<text text-anchor="start" x="8" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub term: u64,</text>
<polyline fill="none" stroke="#8a8898" points="0,-92.5 178,-92.5 "/>
<text text-anchor="start" x="8" y="-77.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub entries: Vec&lt;Entry&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="0,-69.5 178,-69.5 "/>
<text text-anchor="start" x="8" y="-54.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">pub cbs: Vec&lt;Proposal&lt;S&gt;&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="0,-46.5 178,-46.5 "/>
<text text-anchor="start" x="8" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">entries_mem_size: i64,</text>
<polyline fill="none" stroke="#8a8898" points="0,-23.5 178,-23.5 "/>
<text text-anchor="start" x="8" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">entries_count: i64,</text>
</g>
<!-- Apply&#45;&gt;ApplyFsm_handle_apply -->
<g id="edge15" class="edge">
<title>Apply&#45;&gt;ApplyFsm_handle_apply</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M178.14,-113.8C186.74,-115.88 195.43,-117.98 203.95,-120.04"/>
<polygon fill="green" stroke="green" points="203.31,-123.48 213.85,-122.43 204.95,-116.68 203.31,-123.48"/>
</g>
<!-- Apply&#45;&gt;Apply_entries_last -->
<g id="edge16" class="edge">
<title>Apply:engines&#45;&gt;Apply_entries_last</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M178.12,-89.7C230.3,-88.76 297.45,-88.75 357,-92.5 457.08,-98.81 571.42,-114.58 646.51,-126.11"/>
<polygon fill="green" stroke="green" points="646.42,-129.64 656.84,-127.71 647.49,-122.73 646.42,-129.64"/>
</g>
</g>
</svg>
