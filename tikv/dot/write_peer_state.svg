<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: write_peer_state Pages: 1 -->
<svg width="1133pt" height="713pt"
 viewBox="0.00 0.00 1133.00 712.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 708.5)">
<title>write_peer_state</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-708.5 1129,-708.5 1129,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_metapb</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M190.5,-212.5C190.5,-212.5 681,-212.5 681,-212.5 687,-212.5 693,-218.5 693,-224.5 693,-224.5 693,-684.5 693,-684.5 693,-690.5 687,-696.5 681,-696.5 681,-696.5 190.5,-696.5 190.5,-696.5 184.5,-696.5 178.5,-690.5 178.5,-684.5 178.5,-684.5 178.5,-224.5 178.5,-224.5 178.5,-218.5 184.5,-212.5 190.5,-212.5"/>
<text text-anchor="middle" x="435.75" y="-676.5" font-family="Times,serif" font-size="20.00">metapb</text>
</g>
<!-- PeerState -->
<g id="node1" class="node">
<title>PeerState</title>
<path fill="none" stroke="#1c2123" d="M492.5,-221C492.5,-221 572.5,-221 572.5,-221 578.5,-221 584.5,-227 584.5,-233 584.5,-233 584.5,-324 584.5,-324 584.5,-330 578.5,-336 572.5,-336 572.5,-336 492.5,-336 492.5,-336 486.5,-336 480.5,-330 480.5,-324 480.5,-324 480.5,-233 480.5,-233 480.5,-227 486.5,-221 492.5,-221"/>
<text text-anchor="middle" x="532.5" y="-320.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerState</text>
<polyline fill="none" stroke="#1c2123" points="480.5,-313 584.5,-313 "/>
<text text-anchor="start" x="488.5" y="-297.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Normal = 0,</text>
<polyline fill="none" stroke="#1c2123" points="480.5,-290 584.5,-290 "/>
<text text-anchor="start" x="488.5" y="-274.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Applying = 1,</text>
<polyline fill="none" stroke="#1c2123" points="480.5,-267 584.5,-267 "/>
<text text-anchor="start" x="488.5" y="-251.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Tombstone = 2,</text>
<polyline fill="none" stroke="#1c2123" points="480.5,-244 584.5,-244 "/>
<text text-anchor="start" x="488.5" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Merging = 3,</text>
</g>
<!-- MergeState -->
<g id="node2" class="node">
<title>MergeState</title>
<path fill="none" stroke="#1c2123" d="M429.5,-355C429.5,-355 635.5,-355 635.5,-355 641.5,-355 647.5,-361 647.5,-367 647.5,-367 647.5,-450 647.5,-450 647.5,-456 641.5,-462 635.5,-462 635.5,-462 429.5,-462 429.5,-462 423.5,-462 417.5,-456 417.5,-450 417.5,-450 417.5,-367 417.5,-367 417.5,-361 423.5,-355 429.5,-355"/>
<text text-anchor="middle" x="532.5" y="-446.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">MergeState</text>
<polyline fill="none" stroke="#1c2123" points="417.5,-439 647.5,-439 "/>
<text text-anchor="start" x="425.5" y="-423.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub min_index: u64,</text>
<polyline fill="none" stroke="#1c2123" points="417.5,-416 647.5,-416 "/>
<text text-anchor="start" x="425.5" y="-400.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub target: ::protobuf::SingularPtrField</text>
<text text-anchor="start" x="425.5" y="-385.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> &lt;super::metapb::Region&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="417.5,-378 647.5,-378 "/>
<text text-anchor="start" x="425.5" y="-362.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub commit: u64,</text>
</g>
<!-- RegionLocalState -->
<g id="node3" class="node">
<title>RegionLocalState</title>
<path fill="none" stroke="#1c2123" d="M287.5,-361.5C287.5,-361.5 198.5,-361.5 198.5,-361.5 192.5,-361.5 186.5,-355.5 186.5,-349.5 186.5,-349.5 186.5,-337.5 186.5,-337.5 186.5,-331.5 192.5,-325.5 198.5,-325.5 198.5,-325.5 287.5,-325.5 287.5,-325.5 293.5,-325.5 299.5,-331.5 299.5,-337.5 299.5,-337.5 299.5,-349.5 299.5,-349.5 299.5,-355.5 293.5,-361.5 287.5,-361.5"/>
<text text-anchor="middle" x="243" y="-339.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RegionLocalState</text>
</g>
<!-- RegionLocalState&#45;&gt;PeerState -->
<g id="edge1" class="edge">
<title>RegionLocalState&#45;&gt;PeerState</title>
<path fill="none" stroke="#666666" d="M299.77,-330.89C348.76,-319.81 419.9,-303.73 470.41,-292.31"/>
<polygon fill="#666666" stroke="#666666" points="471.24,-295.71 480.23,-290.09 469.7,-288.88 471.24,-295.71"/>
</g>
<!-- RegionLocalState&#45;&gt;MergeState -->
<g id="edge2" class="edge">
<title>RegionLocalState&#45;&gt;MergeState</title>
<path fill="none" stroke="#666666" d="M299.77,-356.11C330.43,-363.04 369.76,-371.93 407.27,-380.41"/>
<polygon fill="#666666" stroke="#666666" points="406.76,-383.89 417.28,-382.68 408.3,-377.06 406.76,-383.89"/>
</g>
<!-- Region -->
<g id="node4" class="node">
<title>Region</title>
<path fill="none" stroke="#1c2123" d="M392,-481.5C392,-481.5 673,-481.5 673,-481.5 679,-481.5 685,-487.5 685,-493.5 685,-493.5 685,-645.5 685,-645.5 685,-651.5 679,-657.5 673,-657.5 673,-657.5 392,-657.5 392,-657.5 386,-657.5 380,-651.5 380,-645.5 380,-645.5 380,-493.5 380,-493.5 380,-487.5 386,-481.5 392,-481.5"/>
<text text-anchor="middle" x="532.5" y="-642.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Region</text>
<polyline fill="none" stroke="#1c2123" points="380,-634.5 685,-634.5 "/>
<text text-anchor="start" x="388" y="-619.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub id: u64,</text>
<polyline fill="none" stroke="#1c2123" points="380,-611.5 685,-611.5 "/>
<text text-anchor="start" x="388" y="-596.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub start_key: Vec&lt;u8&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="380,-588.5 685,-588.5 "/>
<text text-anchor="start" x="388" y="-573.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub end_key: Vec&lt;u8&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="380,-565.5 685,-565.5 "/>
<text text-anchor="start" x="388" y="-550.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub region_epoch: SingularPtrField&lt;RegionEpoch&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="380,-542.5 685,-542.5 "/>
<text text-anchor="start" x="388" y="-527.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub peers: RepeatedField&lt;Peer&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="380,-519.5 685,-519.5 "/>
<text text-anchor="start" x="388" y="-504.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub encryption_meta: SingularPtrField</text>
<text text-anchor="start" x="388" y="-489.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> &lt;super::encryptionpb::EncryptionMeta&gt;,</text>
</g>
<!-- RegionLocalState&#45;&gt;Region -->
<g id="edge3" class="edge">
<title>RegionLocalState&#45;&gt;Region</title>
<path fill="none" stroke="#666666" d="M261.11,-361.56C286.03,-387.39 334.32,-435.7 380,-471.5 381.57,-472.73 383.16,-473.96 384.76,-475.19"/>
<polygon fill="#666666" stroke="#666666" points="382.79,-478.09 392.88,-481.33 387.01,-472.5 382.79,-478.09"/>
</g>
<!-- write_peer_state -->
<g id="node5" class="node">
<title>write_peer_state</title>
<path fill="none" stroke="#1c2123" d="M94,-152.5C94,-152.5 12,-152.5 12,-152.5 6,-152.5 0,-146.5 0,-140.5 0,-140.5 0,-128.5 0,-128.5 0,-122.5 6,-116.5 12,-116.5 12,-116.5 94,-116.5 94,-116.5 100,-116.5 106,-122.5 106,-128.5 106,-128.5 106,-140.5 106,-140.5 106,-146.5 100,-152.5 94,-152.5"/>
<text text-anchor="middle" x="53" y="-130.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_peer_state</text>
</g>
<!-- write_peer_state&#45;&gt;RegionLocalState -->
<g id="edge4" class="edge">
<title>write_peer_state&#45;&gt;RegionLocalState</title>
<path fill="none" stroke="#666666" d="M70.35,-152.68C103.83,-189.89 180.23,-274.83 218.81,-317.71"/>
<polygon fill="#666666" stroke="#666666" points="216.26,-320.12 225.55,-325.21 221.46,-315.44 216.26,-320.12"/>
</g>
<!-- region_state_key -->
<g id="node6" class="node">
<title>region_state_key</title>
<path fill="none" stroke="#1c2123" d="M154.5,-65.5C154.5,-65.5 331.5,-65.5 331.5,-65.5 337.5,-65.5 343.5,-71.5 343.5,-77.5 343.5,-77.5 343.5,-191.5 343.5,-191.5 343.5,-197.5 337.5,-203.5 331.5,-203.5 331.5,-203.5 154.5,-203.5 154.5,-203.5 148.5,-203.5 142.5,-197.5 142.5,-191.5 142.5,-191.5 142.5,-77.5 142.5,-77.5 142.5,-71.5 148.5,-65.5 154.5,-65.5"/>
<text text-anchor="middle" x="243" y="-188.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">region_state_key</text>
<polyline fill="none" stroke="#1c2123" points="142.5,-180.5 343.5,-180.5 "/>
<text text-anchor="start" x="150.5" y="-165.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">布局如下</text>
<polyline fill="none" stroke="#1c2123" points="142.5,-157.5 343.5,-157.5 "/>
<text text-anchor="start" x="150.5" y="-142.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LOCAL_PREFIX: 0x01</text>
<polyline fill="none" stroke="#1c2123" points="142.5,-134.5 343.5,-134.5 "/>
<text text-anchor="start" x="150.5" y="-119.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">REGION_META_PREFIX: 0x03</text>
<polyline fill="none" stroke="#1c2123" points="142.5,-111.5 343.5,-111.5 "/>
<text text-anchor="start" x="150.5" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">region_id: u64占用个8字节</text>
<polyline fill="none" stroke="#1c2123" points="142.5,-88.5 343.5,-88.5 "/>
<text text-anchor="start" x="150.5" y="-73.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RAFT_STATE_SUFFIX: 0x01</text>
</g>
<!-- write_peer_state&#45;&gt;region_state_key -->
<g id="edge5" class="edge">
<title>write_peer_state&#45;&gt;region_state_key</title>
<path fill="none" stroke="#666666" d="M106.37,-134.5C114.58,-134.5 123.32,-134.5 132.25,-134.5"/>
<polygon fill="#666666" stroke="#666666" points="132.41,-138 142.41,-134.5 132.41,-131 132.41,-138"/>
</g>
<!-- put_msg_cf -->
<g id="node7" class="node">
<title>put_msg_cf</title>
<path fill="none" stroke="#1c2123" d="M154,-0.5C154,-0.5 332,-0.5 332,-0.5 338,-0.5 344,-6.5 344,-12.5 344,-12.5 344,-34.5 344,-34.5 344,-40.5 338,-46.5 332,-46.5 332,-46.5 154,-46.5 154,-46.5 148,-46.5 142,-40.5 142,-34.5 142,-34.5 142,-12.5 142,-12.5 142,-6.5 148,-0.5 154,-0.5"/>
<text text-anchor="middle" x="243" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">put_msg_cf</text>
<polyline fill="none" stroke="#1c2123" points="142,-23.5 344,-23.5 "/>
<text text-anchor="middle" x="243" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">写入CF_RAFT column family中</text>
</g>
<!-- write_peer_state&#45;&gt;put_msg_cf -->
<g id="edge6" class="edge">
<title>write_peer_state&#45;&gt;put_msg_cf</title>
<path fill="none" stroke="#666666" d="M69.82,-116.4C86.25,-98.61 113.5,-71.84 142,-55.5 144.85,-53.87 147.79,-52.31 150.79,-50.82"/>
<polygon fill="#666666" stroke="#666666" points="152.39,-53.93 159.99,-46.55 149.45,-47.58 152.39,-53.93"/>
</g>
<!-- make_region_meta_key -->
<g id="node8" class="node">
<title>make_region_meta_key</title>
<path fill="none" stroke="#1c2123" d="M594.5,-177.5C594.5,-177.5 470.5,-177.5 470.5,-177.5 464.5,-177.5 458.5,-171.5 458.5,-165.5 458.5,-165.5 458.5,-153.5 458.5,-153.5 458.5,-147.5 464.5,-141.5 470.5,-141.5 470.5,-141.5 594.5,-141.5 594.5,-141.5 600.5,-141.5 606.5,-147.5 606.5,-153.5 606.5,-153.5 606.5,-165.5 606.5,-165.5 606.5,-171.5 600.5,-177.5 594.5,-177.5"/>
<text text-anchor="middle" x="532.5" y="-155.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">make_region_meta_key</text>
</g>
<!-- region_state_key&#45;&gt;make_region_meta_key -->
<g id="edge7" class="edge">
<title>region_state_key&#45;&gt;make_region_meta_key</title>
<path fill="none" stroke="#666666" d="M343.75,-143.17C377.7,-146.13 415.27,-149.39 447.83,-152.22"/>
<polygon fill="#666666" stroke="#666666" points="447.95,-155.75 458.22,-153.13 448.56,-148.77 447.95,-155.75"/>
</g>
<!-- REGION_STATE_SUFFIX -->
<g id="node9" class="node">
<title>REGION_STATE_SUFFIX</title>
<path fill="#feed9b" stroke="#f7e495" d="M460.5,-76.5C460.5,-76.5 604.5,-76.5 604.5,-76.5 610.5,-76.5 616.5,-82.5 616.5,-88.5 616.5,-88.5 616.5,-110.5 616.5,-110.5 616.5,-116.5 610.5,-122.5 604.5,-122.5 604.5,-122.5 460.5,-122.5 460.5,-122.5 454.5,-122.5 448.5,-116.5 448.5,-110.5 448.5,-110.5 448.5,-88.5 448.5,-88.5 448.5,-82.5 454.5,-76.5 460.5,-76.5"/>
<text text-anchor="middle" x="532.5" y="-107.3" font-family="Times,serif" font-size="14.00" fill="#40575d">REGION_STATE_SUFFIX</text>
<polyline fill="none" stroke="#f7e495" points="448.5,-99.5 616.5,-99.5 "/>
<text text-anchor="middle" x="532.5" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#40575d">0x01</text>
</g>
<!-- region_state_key&#45;&gt;REGION_STATE_SUFFIX -->
<g id="edge8" class="edge">
<title>region_state_key&#45;&gt;REGION_STATE_SUFFIX</title>
<path fill="none" stroke="#666666" d="M343.75,-122.36C374.35,-118.63 407.89,-114.55 438.05,-110.88"/>
<polygon fill="#666666" stroke="#666666" points="438.64,-114.33 448.14,-109.65 437.79,-107.38 438.64,-114.33"/>
</g>
<!-- REGION_META_PREFIX_KEY -->
<g id="node10" class="node">
<title>REGION_META_PREFIX_KEY</title>
<path fill="none" stroke="#1c2123" d="M910,-177.5C910,-177.5 733,-177.5 733,-177.5 727,-177.5 721,-171.5 721,-165.5 721,-165.5 721,-153.5 721,-153.5 721,-147.5 727,-141.5 733,-141.5 733,-141.5 910,-141.5 910,-141.5 916,-141.5 922,-147.5 922,-153.5 922,-153.5 922,-165.5 922,-165.5 922,-171.5 916,-177.5 910,-177.5"/>
<text text-anchor="middle" x="821.5" y="-155.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">REGION_META_PREFIX_KEY</text>
</g>
<!-- make_region_meta_key&#45;&gt;REGION_META_PREFIX_KEY -->
<g id="edge9" class="edge">
<title>make_region_meta_key&#45;&gt;REGION_META_PREFIX_KEY</title>
<path fill="none" stroke="#666666" d="M606.66,-159.5C638.26,-159.5 675.89,-159.5 710.72,-159.5"/>
<polygon fill="#666666" stroke="#666666" points="710.94,-163 720.94,-159.5 710.94,-156 710.94,-163"/>
</g>
<!-- LOCAL_PREFIX -->
<g id="node11" class="node">
<title>LOCAL_PREFIX</title>
<path fill="#feed9b" stroke="#f7e495" d="M985.5,-169.5C985.5,-169.5 1097.5,-169.5 1097.5,-169.5 1103.5,-169.5 1109.5,-175.5 1109.5,-181.5 1109.5,-181.5 1109.5,-203.5 1109.5,-203.5 1109.5,-209.5 1103.5,-215.5 1097.5,-215.5 1097.5,-215.5 985.5,-215.5 985.5,-215.5 979.5,-215.5 973.5,-209.5 973.5,-203.5 973.5,-203.5 973.5,-181.5 973.5,-181.5 973.5,-175.5 979.5,-169.5 985.5,-169.5"/>
<text text-anchor="middle" x="1041.5" y="-200.3" font-family="Times,serif" font-size="14.00" fill="#40575d">LOCAL_PREFIX: u8</text>
<polyline fill="none" stroke="#f7e495" points="973.5,-192.5 1109.5,-192.5 "/>
<text text-anchor="start" x="981.5" y="-177.3" font-family="Times,serif" font-size="14.00" fill="#40575d">0x01</text>
</g>
<!-- REGION_META_PREFIX_KEY&#45;&gt;LOCAL_PREFIX -->
<g id="edge10" class="edge">
<title>REGION_META_PREFIX_KEY&#45;&gt;LOCAL_PREFIX</title>
<path fill="none" stroke="#666666" d="M922.25,-174.6C936.01,-176.68 949.96,-178.8 963.23,-180.8"/>
<polygon fill="#666666" stroke="#666666" points="962.82,-184.28 973.23,-182.32 963.87,-177.36 962.82,-184.28"/>
</g>
<!-- REGION_META_PREFIX -->
<g id="node12" class="node">
<title>REGION_META_PREFIX</title>
<path fill="#feed9b" stroke="#f7e495" d="M970,-104.5C970,-104.5 1113,-104.5 1113,-104.5 1119,-104.5 1125,-110.5 1125,-116.5 1125,-116.5 1125,-138.5 1125,-138.5 1125,-144.5 1119,-150.5 1113,-150.5 1113,-150.5 970,-150.5 970,-150.5 964,-150.5 958,-144.5 958,-138.5 958,-138.5 958,-116.5 958,-116.5 958,-110.5 964,-104.5 970,-104.5"/>
<text text-anchor="middle" x="1041.5" y="-135.3" font-family="Times,serif" font-size="14.00" fill="#40575d">REGION_META_PREFIX</text>
<polyline fill="none" stroke="#f7e495" points="958,-127.5 1125,-127.5 "/>
<text text-anchor="start" x="966" y="-112.3" font-family="Times,serif" font-size="14.00" fill="#40575d">0x03</text>
</g>
<!-- REGION_META_PREFIX_KEY&#45;&gt;REGION_META_PREFIX -->
<g id="edge11" class="edge">
<title>REGION_META_PREFIX_KEY&#45;&gt;REGION_META_PREFIX</title>
<path fill="none" stroke="#666666" d="M922.25,-144.86C930.7,-143.62 939.22,-142.37 947.61,-141.13"/>
<polygon fill="#666666" stroke="#666666" points="948.39,-144.56 957.77,-139.64 947.37,-137.63 948.39,-144.56"/>
</g>
</g>
</svg>
