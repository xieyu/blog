<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: yatp_future_waker Pages: 1 -->
<svg width="1620pt" height="374pt"
 viewBox="0.00 0.00 1620.00 374.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 370)">
<title>yatp_future_waker</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-370 1616,-370 1616,4 -4,4"/>
<!-- future_Runner_handle -->
<g id="node1" class="node">
<title>future_Runner_handle</title>
<path fill="none" stroke="#1c2123" d="M126,-242C126,-242 12,-242 12,-242 6,-242 0,-236 0,-230 0,-230 0,-218 0,-218 0,-212 6,-206 12,-206 12,-206 126,-206 126,-206 132,-206 138,-212 138,-218 138,-218 138,-230 138,-230 138,-236 132,-242 126,-242"/>
<text text-anchor="middle" x="69" y="-220.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">future_Runner_handle</text>
</g>
<!-- Scope_new -->
<g id="node2" class="node">
<title>Scope_new</title>
<path fill="none" stroke="#1c2123" d="M321.5,-366C321.5,-366 266.5,-366 266.5,-366 260.5,-366 254.5,-360 254.5,-354 254.5,-354 254.5,-342 254.5,-342 254.5,-336 260.5,-330 266.5,-330 266.5,-330 321.5,-330 321.5,-330 327.5,-330 333.5,-336 333.5,-342 333.5,-342 333.5,-354 333.5,-354 333.5,-360 327.5,-366 321.5,-366"/>
<text text-anchor="middle" x="294" y="-344.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Scope_new</text>
</g>
<!-- future_Runner_handle&#45;&gt;Scope_new -->
<g id="edge1" class="edge">
<title>future_Runner_handle&#45;&gt;Scope_new</title>
<path fill="none" stroke="#666666" d="M85.77,-242.34C104.69,-263.19 138.33,-296.82 174,-316 195.73,-327.69 222.04,-335.34 244.38,-340.22"/>
<polygon fill="#666666" stroke="#666666" points="243.84,-343.68 254.34,-342.27 245.25,-336.83 243.84,-343.68"/>
</g>
<!-- Context_from_waker -->
<g id="node3" class="node">
<title>Context_from_waker</title>
<path fill="none" stroke="#1c2123" d="M186,-175C186,-175 402,-175 402,-175 408,-175 414,-181 414,-187 414,-187 414,-209 414,-209 414,-215 408,-221 402,-221 402,-221 186,-221 186,-221 180,-221 174,-215 174,-209 174,-209 174,-187 174,-187 174,-181 180,-175 186,-175"/>
<text text-anchor="middle" x="294" y="-205.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Context::from_waker</text>
<polyline fill="none" stroke="#1c2123" points="174,-198 414,-198 "/>
<text text-anchor="middle" x="294" y="-182.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">Context{waker, _marker: PhantomData}</text>
</g>
<!-- future_Runner_handle&#45;&gt;Context_from_waker -->
<g id="edge2" class="edge">
<title>future_Runner_handle&#45;&gt;Context_from_waker</title>
<path fill="none" stroke="#666666" d="M138.12,-216.06C146.4,-215.09 155.06,-214.08 163.87,-213.06"/>
<polygon fill="#666666" stroke="#666666" points="164.35,-216.52 173.87,-211.89 163.54,-209.57 164.35,-216.52"/>
</g>
<!-- waker -->
<g id="node4" class="node">
<title>waker</title>
<path fill="none" stroke="#1c2123" d="M462,-174.5C462,-174.5 744,-174.5 744,-174.5 750,-174.5 756,-180.5 756,-186.5 756,-186.5 756,-261.5 756,-261.5 756,-267.5 750,-273.5 744,-273.5 744,-273.5 462,-273.5 462,-273.5 456,-273.5 450,-267.5 450,-261.5 450,-261.5 450,-186.5 450,-186.5 450,-180.5 456,-174.5 462,-174.5"/>
<text text-anchor="middle" x="603" y="-258.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">waker</text>
<polyline fill="none" stroke="#1c2123" points="450,-250.5 756,-250.5 "/>
<text text-anchor="start" x="458" y="-235.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Waker中包含了task 常指针</text>
<text text-anchor="start" x="458" y="-220.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Waker::from_raw(RawWaker::new( task as *const()</text>
<polyline fill="none" stroke="#1c2123" points="450,-212.5 756,-212.5 "/>
<text text-anchor="start" x="458" y="-197.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">&amp;RawWakerVTable::new(</text>
<text text-anchor="start" x="458" y="-182.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> clone_raw, wake_raw, wake_ref_raw, drop_raw),</text>
</g>
<!-- future_Runner_handle&#45;&gt;waker -->
<g id="edge3" class="edge">
<title>future_Runner_handle&#45;&gt;waker</title>
<path fill="none" stroke="#666666" d="M138.22,-229.25C150.14,-229.98 162.42,-230.61 174,-231 261.79,-233.95 359.75,-232.68 439.77,-230.47"/>
<polygon fill="#666666" stroke="#666666" points="440.04,-233.96 449.94,-230.18 439.84,-226.96 440.04,-233.96"/>
</g>
<!-- wake_task -->
<g id="node5" class="node">
<title>wake_task</title>
<path fill="none" stroke="#1c2123" d="M1418,-202C1418,-202 1600,-202 1600,-202 1606,-202 1612,-208 1612,-214 1612,-214 1612,-236 1612,-236 1612,-242 1606,-248 1600,-248 1600,-248 1418,-248 1418,-248 1412,-248 1406,-242 1406,-236 1406,-236 1406,-214 1406,-214 1406,-208 1412,-202 1418,-202"/>
<text text-anchor="middle" x="1509" y="-232.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">wake_task</text>
<polyline fill="none" stroke="#1c2123" points="1406,-225 1612,-225 "/>
<text text-anchor="start" x="1414" y="-209.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将task重新加入remote/local队列</text>
</g>
<!-- future_Runner_handle&#45;&gt;wake_task -->
<g id="edge4" class="edge">
<title>future_Runner_handle&#45;&gt;wake_task</title>
<path fill="none" stroke="#666666" d="M138.4,-240.54C239.22,-263.44 433.97,-302 602,-302 602,-302 602,-302 1078,-302 1208.05,-302 1243.41,-312.83 1370,-283 1398.82,-276.21 1429.33,-263.97 1454.31,-252.48"/>
<polygon fill="#666666" stroke="#666666" points="1456.02,-255.54 1463.59,-248.13 1453.05,-249.21 1456.02,-255.54"/>
</g>
<!-- task_status_compare_exchange -->
<g id="node6" class="node">
<title>task_status_compare_exchange</title>
<path fill="none" stroke="#1c2123" d="M376,-118C376,-118 212,-118 212,-118 206,-118 200,-112 200,-106 200,-106 200,-94 200,-94 200,-88 206,-82 212,-82 212,-82 376,-82 376,-82 382,-82 388,-88 388,-94 388,-94 388,-106 388,-106 388,-112 382,-118 376,-118"/>
<text text-anchor="middle" x="294" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">task_status_compare_exchange</text>
</g>
<!-- future_Runner_handle&#45;&gt;task_status_compare_exchange -->
<g id="edge5" class="edge">
<title>future_Runner_handle&#45;&gt;task_status_compare_exchange</title>
<path fill="none" stroke="#666666" d="M85.77,-205.66C104.69,-184.81 138.33,-151.18 174,-132 181.38,-128.03 189.29,-124.53 197.39,-121.44"/>
<polygon fill="#666666" stroke="#666666" points="198.74,-124.67 206.97,-118 196.37,-118.08 198.74,-124.67"/>
</g>
<!-- task_future_poll -->
<g id="node7" class="node">
<title>task_future_poll</title>
<path fill="none" stroke="#1c2123" d="M564,-109C564,-109 642,-109 642,-109 648,-109 654,-115 654,-121 654,-121 654,-143 654,-143 654,-149 648,-155 642,-155 642,-155 564,-155 564,-155 558,-155 552,-149 552,-143 552,-143 552,-121 552,-121 552,-115 558,-109 564,-109"/>
<text text-anchor="middle" x="603" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">task.future.poll</text>
<polyline fill="none" stroke="#1c2123" points="552,-132 654,-132 "/>
<text text-anchor="start" x="560" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">调用future.poll</text>
</g>
<!-- future_Runner_handle&#45;&gt;task_future_poll -->
<g id="edge6" class="edge">
<title>future_Runner_handle&#45;&gt;task_future_poll</title>
<path fill="none" stroke="#666666" d="M94.63,-205.87C114.86,-192.05 144.82,-173.92 174,-165 300.58,-126.33 457.51,-125.43 541.77,-128.51"/>
<polygon fill="#666666" stroke="#666666" points="541.79,-132.01 551.92,-128.91 542.07,-125.02 541.79,-132.01"/>
</g>
<!-- Context_from_waker&#45;&gt;waker -->
<g id="edge8" class="edge">
<title>Context_from_waker&#45;&gt;waker</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M414.13,-208.09C422.55,-208.8 431.12,-209.53 439.72,-210.26"/>
<polygon fill="green" stroke="green" points="439.57,-213.76 449.83,-211.11 440.16,-206.78 439.57,-213.76"/>
</g>
<!-- Context_from_waker&#45;&gt;task_future_poll -->
<g id="edge9" class="edge">
<title>Context_from_waker&#45;&gt;task_future_poll</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M402.37,-174.92C449.24,-164.84 502.43,-153.41 542.11,-144.88"/>
<polygon fill="green" stroke="green" points="542.85,-148.3 551.9,-142.77 541.38,-141.45 542.85,-148.3"/>
</g>
<!-- RawWakerVTable -->
<g id="node8" class="node">
<title>RawWakerVTable</title>
<path fill="none" stroke="#1c2123" d="M898,-214C898,-214 804,-214 804,-214 798,-214 792,-208 792,-202 792,-202 792,-190 792,-190 792,-184 798,-178 804,-178 804,-178 898,-178 898,-178 904,-178 910,-184 910,-190 910,-190 910,-202 910,-202 910,-208 904,-214 898,-214"/>
<text text-anchor="middle" x="851" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RawWakerVTable</text>
</g>
<!-- waker&#45;&gt;RawWakerVTable -->
<g id="edge7" class="edge">
<title>waker&#45;&gt;RawWakerVTable</title>
<path fill="none" stroke="#666666" d="M756.3,-206.67C765.07,-205.67 773.64,-204.69 781.8,-203.76"/>
<polygon fill="#666666" stroke="#666666" points="782.37,-207.22 791.91,-202.61 781.58,-200.27 782.37,-207.22"/>
</g>
<!-- wake_raw -->
<g id="node9" class="node">
<title>wake_raw</title>
<path fill="none" stroke="#1c2123" d="M958,-0.5C958,-0.5 1196,-0.5 1196,-0.5 1202,-0.5 1208,-6.5 1208,-12.5 1208,-12.5 1208,-87.5 1208,-87.5 1208,-93.5 1202,-99.5 1196,-99.5 1196,-99.5 958,-99.5 958,-99.5 952,-99.5 946,-93.5 946,-87.5 946,-87.5 946,-12.5 946,-12.5 946,-6.5 952,-0.5 958,-0.5"/>
<text text-anchor="middle" x="1077" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">wake_raw</text>
<polyline fill="none" stroke="#1c2123" points="946,-76.5 1208,-76.5 "/>
<text text-anchor="start" x="954" y="-61.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将task指针转为task_cell</text>
<text text-anchor="start" x="954" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后调用wake_impl</text>
<polyline fill="none" stroke="#1c2123" points="946,-38.5 1208,-38.5 "/>
<text text-anchor="start" x="954" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">let task_cell = task_cell(this as *const Task);</text>
<text text-anchor="start" x="954" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> wake_impl(Cow::Owned(task_cell.0))</text>
</g>
<!-- RawWakerVTable&#45;&gt;wake_raw -->
<g id="edge10" class="edge">
<title>RawWakerVTable&#45;&gt;wake_raw</title>
<path fill="none" stroke="#666666" d="M868.25,-177.84C885.96,-158.84 915.81,-129.06 946,-109 948.12,-107.59 950.28,-106.2 952.48,-104.82"/>
<polygon fill="#666666" stroke="#666666" points="954.34,-107.79 961.09,-99.62 950.72,-101.8 954.34,-107.79"/>
</g>
<!-- drop_raw -->
<g id="node10" class="node">
<title>drop_raw</title>
<path fill="none" stroke="#1c2123" d="M983.5,-173C983.5,-173 1170.5,-173 1170.5,-173 1176.5,-173 1182.5,-179 1182.5,-185 1182.5,-185 1182.5,-207 1182.5,-207 1182.5,-213 1176.5,-219 1170.5,-219 1170.5,-219 983.5,-219 983.5,-219 977.5,-219 971.5,-213 971.5,-207 971.5,-207 971.5,-185 971.5,-185 971.5,-179 977.5,-173 983.5,-173"/>
<text text-anchor="middle" x="1077" y="-203.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">drop_raw</text>
<polyline fill="none" stroke="#1c2123" points="971.5,-196 1182.5,-196 "/>
<text text-anchor="start" x="979.5" y="-180.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">drop(task_cell(this as *const Task))</text>
</g>
<!-- RawWakerVTable&#45;&gt;drop_raw -->
<g id="edge11" class="edge">
<title>RawWakerVTable&#45;&gt;drop_raw</title>
<path fill="none" stroke="#666666" d="M910.27,-196C925.87,-196 943.3,-196 960.83,-196"/>
<polygon fill="#666666" stroke="#666666" points="961.15,-199.5 971.15,-196 961.15,-192.5 961.15,-199.5"/>
</g>
<!-- clone_raw -->
<g id="node11" class="node">
<title>clone_raw</title>
<path fill="none" stroke="#1c2123" d="M1101.5,-154C1101.5,-154 1052.5,-154 1052.5,-154 1046.5,-154 1040.5,-148 1040.5,-142 1040.5,-142 1040.5,-130 1040.5,-130 1040.5,-124 1046.5,-118 1052.5,-118 1052.5,-118 1101.5,-118 1101.5,-118 1107.5,-118 1113.5,-124 1113.5,-130 1113.5,-130 1113.5,-142 1113.5,-142 1113.5,-148 1107.5,-154 1101.5,-154"/>
<text text-anchor="middle" x="1077" y="-132.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">clone_raw</text>
</g>
<!-- RawWakerVTable&#45;&gt;clone_raw -->
<g id="edge12" class="edge">
<title>RawWakerVTable&#45;&gt;clone_raw</title>
<path fill="none" stroke="#666666" d="M899.43,-177.97C914.22,-172.72 930.67,-167.26 946,-163 973.72,-155.29 1005.31,-148.68 1030.41,-143.93"/>
<polygon fill="#666666" stroke="#666666" points="1031.19,-147.35 1040.38,-142.08 1029.91,-140.47 1031.19,-147.35"/>
</g>
<!-- wake_ref_raw -->
<g id="node12" class="node">
<title>wake_ref_raw</title>
<path fill="none" stroke="#1c2123" d="M1112,-274C1112,-274 1042,-274 1042,-274 1036,-274 1030,-268 1030,-262 1030,-262 1030,-250 1030,-250 1030,-244 1036,-238 1042,-238 1042,-238 1112,-238 1112,-238 1118,-238 1124,-244 1124,-250 1124,-250 1124,-262 1124,-262 1124,-268 1118,-274 1112,-274"/>
<text text-anchor="middle" x="1077" y="-252.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">wake_ref_raw</text>
</g>
<!-- RawWakerVTable&#45;&gt;wake_ref_raw -->
<g id="edge13" class="edge">
<title>RawWakerVTable&#45;&gt;wake_ref_raw</title>
<path fill="none" stroke="#666666" d="M899.43,-214.03C914.22,-219.28 930.67,-224.74 946,-229 969.99,-235.67 996.88,-241.52 1019.95,-246.05"/>
<polygon fill="#666666" stroke="#666666" points="1019.44,-249.52 1029.92,-247.97 1020.76,-242.64 1019.44,-249.52"/>
</g>
<!-- wake_impl -->
<g id="node13" class="node">
<title>wake_impl</title>
<path fill="none" stroke="#1c2123" d="M1333.5,-166C1333.5,-166 1280.5,-166 1280.5,-166 1274.5,-166 1268.5,-160 1268.5,-154 1268.5,-154 1268.5,-142 1268.5,-142 1268.5,-136 1274.5,-130 1280.5,-130 1280.5,-130 1333.5,-130 1333.5,-130 1339.5,-130 1345.5,-136 1345.5,-142 1345.5,-142 1345.5,-154 1345.5,-154 1345.5,-160 1339.5,-166 1333.5,-166"/>
<text text-anchor="middle" x="1307" y="-144.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">wake_impl</text>
</g>
<!-- wake_raw&#45;&gt;wake_impl -->
<g id="edge14" class="edge">
<title>wake_raw&#45;&gt;wake_impl</title>
<path fill="none" stroke="#666666" d="M1193.34,-99.57C1216.58,-109.57 1239.75,-119.52 1258.98,-127.79"/>
<polygon fill="#666666" stroke="#666666" points="1257.8,-131.09 1268.37,-131.83 1260.57,-124.66 1257.8,-131.09"/>
</g>
<!-- task_cell -->
<g id="node14" class="node">
<title>task_cell</title>
<path fill="none" stroke="#1c2123" d="M1327.5,-220C1327.5,-220 1286.5,-220 1286.5,-220 1280.5,-220 1274.5,-214 1274.5,-208 1274.5,-208 1274.5,-196 1274.5,-196 1274.5,-190 1280.5,-184 1286.5,-184 1286.5,-184 1327.5,-184 1327.5,-184 1333.5,-184 1339.5,-190 1339.5,-196 1339.5,-196 1339.5,-208 1339.5,-208 1339.5,-214 1333.5,-220 1327.5,-220"/>
<text text-anchor="middle" x="1307" y="-198.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">task_cell</text>
</g>
<!-- wake_raw&#45;&gt;task_cell -->
<g id="edge15" class="edge">
<title>wake_raw&#45;&gt;task_cell</title>
<path fill="none" stroke="#666666" d="M1196.79,-99.6C1200.7,-102.58 1204.46,-105.71 1208,-109 1232.48,-131.75 1219.35,-152.44 1244,-175 1250.03,-180.52 1257.36,-185.03 1264.85,-188.68"/>
<polygon fill="#666666" stroke="#666666" points="1263.76,-192.02 1274.32,-192.84 1266.58,-185.61 1263.76,-192.02"/>
</g>
<!-- wake_ref_raw&#45;&gt;wake_impl -->
<g id="edge16" class="edge">
<title>wake_ref_raw&#45;&gt;wake_impl</title>
<path fill="none" stroke="#666666" d="M1124.04,-254.94C1150.54,-252.36 1183.35,-245.64 1208,-229 1231.91,-212.86 1221.88,-193.51 1244,-175 1248.56,-171.19 1253.74,-167.83 1259.11,-164.89"/>
<polygon fill="#666666" stroke="#666666" points="1260.87,-167.92 1268.27,-160.34 1257.76,-161.65 1260.87,-167.92"/>
</g>
<!-- wake_ref_raw&#45;&gt;task_cell -->
<g id="edge17" class="edge">
<title>wake_ref_raw&#45;&gt;task_cell</title>
<path fill="none" stroke="#666666" d="M1124.19,-247.16C1149.1,-242.2 1180.33,-235.68 1208,-229 1226.64,-224.5 1247.12,-218.96 1264.51,-214.06"/>
<polygon fill="#666666" stroke="#666666" points="1265.69,-217.37 1274.36,-211.27 1263.78,-210.63 1265.69,-217.37"/>
</g>
<!-- ManuallyDrop_new -->
<g id="node15" class="node">
<title>ManuallyDrop_new</title>
<path fill="none" stroke="#1c2123" d="M1358,-274C1358,-274 1256,-274 1256,-274 1250,-274 1244,-268 1244,-262 1244,-262 1244,-250 1244,-250 1244,-244 1250,-238 1256,-238 1256,-238 1358,-238 1358,-238 1364,-238 1370,-244 1370,-250 1370,-250 1370,-262 1370,-262 1370,-268 1364,-274 1358,-274"/>
<text text-anchor="middle" x="1307" y="-252.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ManuallyDrop_new</text>
</g>
<!-- wake_ref_raw&#45;&gt;ManuallyDrop_new -->
<g id="edge18" class="edge">
<title>wake_ref_raw&#45;&gt;ManuallyDrop_new</title>
<path fill="none" stroke="#666666" d="M1124.14,-256C1155.52,-256 1197.7,-256 1233.53,-256"/>
<polygon fill="#666666" stroke="#666666" points="1233.94,-259.5 1243.94,-256 1233.94,-252.5 1233.94,-259.5"/>
</g>
<!-- wake_impl&#45;&gt;wake_task -->
<g id="edge19" class="edge">
<title>wake_impl&#45;&gt;wake_task</title>
<path fill="none" stroke="#666666" d="M1345.62,-162.48C1371.77,-172.55 1407.39,-186.27 1438.61,-198.29"/>
<polygon fill="#666666" stroke="#666666" points="1437.55,-201.63 1448.14,-201.96 1440.07,-195.1 1437.55,-201.63"/>
</g>
</g>
</svg>
